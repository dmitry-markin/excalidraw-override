var aK = Object.defineProperty;
var lK = (e,t,n)=>t in e ? aK(e, t, {
    enumerable: !0,
    configurable: !0,
    writable: !0,
    value: n
}) : e[t] = n;
var D = (e,t,n)=>(lK(e, typeof t != "symbol" ? t + "" : t, n),
n);
function cK(e, t) {
    for (var n = 0; n < t.length; n++) {
        const r = t[n];
        if (typeof r != "string" && !Array.isArray(r)) {
            for (const i in r)
                if (i !== "default" && !(i in e)) {
                    const o = Object.getOwnPropertyDescriptor(r, i);
                    o && Object.defineProperty(e, i, o.get ? o : {
                        enumerable: !0,
                        get: ()=>r[i]
                    })
                }
        }
    }
    return Object.freeze(Object.defineProperty(e, Symbol.toStringTag, {
        value: "Module"
    }))
}
(function() {
    const t = document.createElement("link").relList;
    if (t && t.supports && t.supports("modulepreload"))
        return;
    for (const i of document.querySelectorAll('link[rel="modulepreload"]'))
        r(i);
    new MutationObserver(i=>{
        for (const o of i)
            if (o.type === "childList")
                for (const s of o.addedNodes)
                    s.tagName === "LINK" && s.rel === "modulepreload" && r(s)
    }
    ).observe(document, {
        childList: !0,
        subtree: !0
    });
    function n(i) {
        const o = {};
        return i.integrity && (o.integrity = i.integrity),
        i.referrerPolicy && (o.referrerPolicy = i.referrerPolicy),
        i.crossOrigin === "use-credentials" ? o.credentials = "include" : i.crossOrigin === "anonymous" ? o.credentials = "omit" : o.credentials = "same-origin",
        o
    }
    function r(i) {
        if (i.ep)
            return;
        i.ep = !0;
        const o = n(i);
        fetch(i.href, o)
    }
}
)();
var oa = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Su(e) {
    return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e
}
var w7 = {
    exports: {}
}
  , uv = {}
  , E7 = {
    exports: {}
}
  , ft = {};
/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Lp = Symbol.for("react.element")
  , uK = Symbol.for("react.portal")
  , dK = Symbol.for("react.fragment")
  , fK = Symbol.for("react.strict_mode")
  , hK = Symbol.for("react.profiler")
  , gK = Symbol.for("react.provider")
  , pK = Symbol.for("react.context")
  , mK = Symbol.for("react.forward_ref")
  , vK = Symbol.for("react.suspense")
  , yK = Symbol.for("react.memo")
  , wK = Symbol.for("react.lazy")
  , lC = Symbol.iterator;
function EK(e) {
    return e === null || typeof e != "object" ? null : (e = lC && e[lC] || e["@@iterator"],
    typeof e == "function" ? e : null)
}
var b7 = {
    isMounted: function() {
        return !1
    },
    enqueueForceUpdate: function() {},
    enqueueReplaceState: function() {},
    enqueueSetState: function() {}
}
  , _7 = Object.assign
  , x7 = {};
function kf(e, t, n) {
    this.props = e,
    this.context = t,
    this.refs = x7,
    this.updater = n || b7
}
kf.prototype.isReactComponent = {};
kf.prototype.setState = function(e, t) {
    if (typeof e != "object" && typeof e != "function" && e != null)
        throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");
    this.updater.enqueueSetState(this, e, t, "setState")
}
;
kf.prototype.forceUpdate = function(e) {
    this.updater.enqueueForceUpdate(this, e, "forceUpdate")
}
;
function S7() {}
S7.prototype = kf.prototype;
function wx(e, t, n) {
    this.props = e,
    this.context = t,
    this.refs = x7,
    this.updater = n || b7
}
var Ex = wx.prototype = new S7;
Ex.constructor = wx;
_7(Ex, kf.prototype);
Ex.isPureReactComponent = !0;
var cC = Array.isArray
  , I7 = Object.prototype.hasOwnProperty
  , bx = {
    current: null
}
  , C7 = {
    key: !0,
    ref: !0,
    __self: !0,
    __source: !0
};
function k7(e, t, n) {
    var r, i = {}, o = null, s = null;
    if (t != null)
        for (r in t.ref !== void 0 && (s = t.ref),
        t.key !== void 0 && (o = "" + t.key),
        t)
            I7.call(t, r) && !C7.hasOwnProperty(r) && (i[r] = t[r]);
    var a = arguments.length - 2;
    if (a === 1)
        i.children = n;
    else if (1 < a) {
        for (var l = Array(a), c = 0; c < a; c++)
            l[c] = arguments[c + 2];
        i.children = l
    }
    if (e && e.defaultProps)
        for (r in a = e.defaultProps,
        a)
            i[r] === void 0 && (i[r] = a[r]);
    return {
        $$typeof: Lp,
        type: e,
        key: o,
        ref: s,
        props: i,
        _owner: bx.current
    }
}
function bK(e, t) {
    return {
        $$typeof: Lp,
        type: e.type,
        key: t,
        ref: e.ref,
        props: e.props,
        _owner: e._owner
    }
}
function _x(e) {
    return typeof e == "object" && e !== null && e.$$typeof === Lp
}
function _K(e) {
    var t = {
        "=": "=0",
        ":": "=2"
    };
    return "$" + e.replace(/[=:]/g, function(n) {
        return t[n]
    })
}
var uC = /\/+/g;
function Qw(e, t) {
    return typeof e == "object" && e !== null && e.key != null ? _K("" + e.key) : t.toString(36)
}
function V0(e, t, n, r, i) {
    var o = typeof e;
    (o === "undefined" || o === "boolean") && (e = null);
    var s = !1;
    if (e === null)
        s = !0;
    else
        switch (o) {
        case "string":
        case "number":
            s = !0;
            break;
        case "object":
            switch (e.$$typeof) {
            case Lp:
            case uK:
                s = !0
            }
        }
    if (s)
        return s = e,
        i = i(s),
        e = r === "" ? "." + Qw(s, 0) : r,
        cC(i) ? (n = "",
        e != null && (n = e.replace(uC, "$&/") + "/"),
        V0(i, t, n, "", function(c) {
            return c
        })) : i != null && (_x(i) && (i = bK(i, n + (!i.key || s && s.key === i.key ? "" : ("" + i.key).replace(uC, "$&/") + "/") + e)),
        t.push(i)),
        1;
    if (s = 0,
    r = r === "" ? "." : r + ":",
    cC(e))
        for (var a = 0; a < e.length; a++) {
            o = e[a];
            var l = r + Qw(o, a);
            s += V0(o, t, n, l, i)
        }
    else if (l = EK(e),
    typeof l == "function")
        for (e = l.call(e),
        a = 0; !(o = e.next()).done; )
            o = o.value,
            l = r + Qw(o, a++),
            s += V0(o, t, n, l, i);
    else if (o === "object")
        throw t = String(e),
        Error("Objects are not valid as a React child (found: " + (t === "[object Object]" ? "object with keys {" + Object.keys(e).join(", ") + "}" : t) + "). If you meant to render a collection of children, use an array instead.");
    return s
}
function K1(e, t, n) {
    if (e == null)
        return e;
    var r = []
      , i = 0;
    return V0(e, r, "", "", function(o) {
        return t.call(n, o, i++)
    }),
    r
}
function xK(e) {
    if (e._status === -1) {
        var t = e._result;
        t = t(),
        t.then(function(n) {
            (e._status === 0 || e._status === -1) && (e._status = 1,
            e._result = n)
        }, function(n) {
            (e._status === 0 || e._status === -1) && (e._status = 2,
            e._result = n)
        }),
        e._status === -1 && (e._status = 0,
        e._result = t)
    }
    if (e._status === 1)
        return e._result.default;
    throw e._result
}
var Yr = {
    current: null
}
  , Y0 = {
    transition: null
}
  , SK = {
    ReactCurrentDispatcher: Yr,
    ReactCurrentBatchConfig: Y0,
    ReactCurrentOwner: bx
};
ft.Children = {
    map: K1,
    forEach: function(e, t, n) {
        K1(e, function() {
            t.apply(this, arguments)
        }, n)
    },
    count: function(e) {
        var t = 0;
        return K1(e, function() {
            t++
        }),
        t
    },
    toArray: function(e) {
        return K1(e, function(t) {
            return t
        }) || []
    },
    only: function(e) {
        if (!_x(e))
            throw Error("React.Children.only expected to receive a single React element child.");
        return e
    }
};
ft.Component = kf;
ft.Fragment = dK;
ft.Profiler = hK;
ft.PureComponent = wx;
ft.StrictMode = fK;
ft.Suspense = vK;
ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = SK;
ft.cloneElement = function(e, t, n) {
    if (e == null)
        throw Error("React.cloneElement(...): The argument must be a React element, but you passed " + e + ".");
    var r = _7({}, e.props)
      , i = e.key
      , o = e.ref
      , s = e._owner;
    if (t != null) {
        if (t.ref !== void 0 && (o = t.ref,
        s = bx.current),
        t.key !== void 0 && (i = "" + t.key),
        e.type && e.type.defaultProps)
            var a = e.type.defaultProps;
        for (l in t)
            I7.call(t, l) && !C7.hasOwnProperty(l) && (r[l] = t[l] === void 0 && a !== void 0 ? a[l] : t[l])
    }
    var l = arguments.length - 2;
    if (l === 1)
        r.children = n;
    else if (1 < l) {
        a = Array(l);
        for (var c = 0; c < l; c++)
            a[c] = arguments[c + 2];
        r.children = a
    }
    return {
        $$typeof: Lp,
        type: e.type,
        key: i,
        ref: o,
        props: r,
        _owner: s
    }
}
;
ft.createContext = function(e) {
    return e = {
        $$typeof: pK,
        _currentValue: e,
        _currentValue2: e,
        _threadCount: 0,
        Provider: null,
        Consumer: null,
        _defaultValue: null,
        _globalName: null
    },
    e.Provider = {
        $$typeof: gK,
        _context: e
    },
    e.Consumer = e
}
;
ft.createElement = k7;
ft.createFactory = function(e) {
    var t = k7.bind(null, e);
    return t.type = e,
    t
}
;
ft.createRef = function() {
    return {
        current: null
    }
}
;
ft.forwardRef = function(e) {
    return {
        $$typeof: mK,
        render: e
    }
}
;
ft.isValidElement = _x;
ft.lazy = function(e) {
    return {
        $$typeof: wK,
        _payload: {
            _status: -1,
            _result: e
        },
        _init: xK
    }
}
;
ft.memo = function(e, t) {
    return {
        $$typeof: yK,
        type: e,
        compare: t === void 0 ? null : t
    }
}
;
ft.startTransition = function(e) {
    var t = Y0.transition;
    Y0.transition = {};
    try {
        e()
    } finally {
        Y0.transition = t
    }
}
;
ft.unstable_act = function() {
    throw Error("act(...) is not supported in production builds of React.")
}
;
ft.useCallback = function(e, t) {
    return Yr.current.useCallback(e, t)
}
;
ft.useContext = function(e) {
    return Yr.current.useContext(e)
}
;
ft.useDebugValue = function() {}
;
ft.useDeferredValue = function(e) {
    return Yr.current.useDeferredValue(e)
}
;
ft.useEffect = function(e, t) {
    return Yr.current.useEffect(e, t)
}
;
ft.useId = function() {
    return Yr.current.useId()
}
;
ft.useImperativeHandle = function(e, t, n) {
    return Yr.current.useImperativeHandle(e, t, n)
}
;
ft.useInsertionEffect = function(e, t) {
    return Yr.current.useInsertionEffect(e, t)
}
;
ft.useLayoutEffect = function(e, t) {
    return Yr.current.useLayoutEffect(e, t)
}
;
ft.useMemo = function(e, t) {
    return Yr.current.useMemo(e, t)
}
;
ft.useReducer = function(e, t, n) {
    return Yr.current.useReducer(e, t, n)
}
;
ft.useRef = function(e) {
    return Yr.current.useRef(e)
}
;
ft.useState = function(e) {
    return Yr.current.useState(e)
}
;
ft.useSyncExternalStore = function(e, t, n) {
    return Yr.current.useSyncExternalStore(e, t, n)
}
;
ft.useTransition = function() {
    return Yr.current.useTransition()
}
;
ft.version = "18.2.0";
E7.exports = ft;
var T = E7.exports;
const ve = Su(T)
  , IK = cK({
    __proto__: null,
    default: ve
}, [T]);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var CK = T
  , kK = Symbol.for("react.element")
  , TK = Symbol.for("react.fragment")
  , AK = Object.prototype.hasOwnProperty
  , MK = CK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner
  , LK = {
    key: !0,
    ref: !0,
    __self: !0,
    __source: !0
};
function T7(e, t, n) {
    var r, i = {}, o = null, s = null;
    n !== void 0 && (o = "" + n),
    t.key !== void 0 && (o = "" + t.key),
    t.ref !== void 0 && (s = t.ref);
    for (r in t)
        AK.call(t, r) && !LK.hasOwnProperty(r) && (i[r] = t[r]);
    if (e && e.defaultProps)
        for (r in t = e.defaultProps,
        t)
            i[r] === void 0 && (i[r] = t[r]);
    return {
        $$typeof: kK,
        type: e,
        key: o,
        ref: s,
        props: i,
        _owner: MK.current
    }
}
uv.Fragment = TK;
uv.jsx = T7;
uv.jsxs = T7;
w7.exports = uv;
var xx = w7.exports;
const Se = xx.Fragment
  , g = xx.jsx
  , L = xx.jsxs;
var A7 = {
    exports: {}
}
  , Ni = {}
  , M7 = {
    exports: {}
}
  , L7 = {};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
(function(e) {
    function t(q, K) {
        var G = q.length;
        q.push(K);
        e: for (; 0 < G; ) {
            var H = G - 1 >>> 1
              , J = q[H];
            if (0 < i(J, K))
                q[H] = K,
                q[G] = J,
                G = H;
            else
                break e
        }
    }
    function n(q) {
        return q.length === 0 ? null : q[0]
    }
    function r(q) {
        if (q.length === 0)
            return null;
        var K = q[0]
          , G = q.pop();
        if (G !== K) {
            q[0] = G;
            e: for (var H = 0, J = q.length, te = J >>> 1; H < te; ) {
                var oe = 2 * (H + 1) - 1
                  , de = q[oe]
                  , pe = oe + 1
                  , be = q[pe];
                if (0 > i(de, G))
                    pe < J && 0 > i(be, de) ? (q[H] = be,
                    q[pe] = G,
                    H = pe) : (q[H] = de,
                    q[oe] = G,
                    H = oe);
                else if (pe < J && 0 > i(be, G))
                    q[H] = be,
                    q[pe] = G,
                    H = pe;
                else
                    break e
            }
        }
        return K
    }
    function i(q, K) {
        var G = q.sortIndex - K.sortIndex;
        return G !== 0 ? G : q.id - K.id
    }
    if (typeof performance == "object" && typeof performance.now == "function") {
        var o = performance;
        e.unstable_now = function() {
            return o.now()
        }
    } else {
        var s = Date
          , a = s.now();
        e.unstable_now = function() {
            return s.now() - a
        }
    }
    var l = []
      , c = []
      , u = 1
      , f = null
      , h = 3
      , m = !1
      , v = !1
      , y = !1
      , E = typeof setTimeout == "function" ? setTimeout : null
      , b = typeof clearTimeout == "function" ? clearTimeout : null
      , _ = typeof setImmediate < "u" ? setImmediate : null;
    typeof navigator < "u" && navigator.scheduling !== void 0 && navigator.scheduling.isInputPending !== void 0 && navigator.scheduling.isInputPending.bind(navigator.scheduling);
    function x(q) {
        for (var K = n(c); K !== null; ) {
            if (K.callback === null)
                r(c);
            else if (K.startTime <= q)
                r(c),
                K.sortIndex = K.expirationTime,
                t(l, K);
            else
                break;
            K = n(c)
        }
    }
    function C(q) {
        if (y = !1,
        x(q),
        !v)
            if (n(l) !== null)
                v = !0,
                se(P);
            else {
                var K = n(c);
                K !== null && ae(C, K.startTime - q)
            }
    }
    function P(q, K) {
        v = !1,
        y && (y = !1,
        b(I),
        I = -1),
        m = !0;
        var G = h;
        try {
            for (x(K),
            f = n(l); f !== null && (!(f.expirationTime > K) || q && !$()); ) {
                var H = f.callback;
                if (typeof H == "function") {
                    f.callback = null,
                    h = f.priorityLevel;
                    var J = H(f.expirationTime <= K);
                    K = e.unstable_now(),
                    typeof J == "function" ? f.callback = J : f === n(l) && r(l),
                    x(K)
                } else
                    r(l);
                f = n(l)
            }
            if (f !== null)
                var te = !0;
            else {
                var oe = n(c);
                oe !== null && ae(C, oe.startTime - K),
                te = !1
            }
            return te
        } finally {
            f = null,
            h = G,
            m = !1
        }
    }
    var M = !1
      , A = null
      , I = -1
      , O = 5
      , N = -1;
    function $() {
        return !(e.unstable_now() - N < O)
    }
    function V() {
        if (A !== null) {
            var q = e.unstable_now();
            N = q;
            var K = !0;
            try {
                K = A(!0, q)
            } finally {
                K ? z() : (M = !1,
                A = null)
            }
        } else
            M = !1
    }
    var z;
    if (typeof _ == "function")
        z = function() {
            _(V)
        }
        ;
    else if (typeof MessageChannel < "u") {
        var j = new MessageChannel
          , re = j.port2;
        j.port1.onmessage = V,
        z = function() {
            re.postMessage(null)
        }
    } else
        z = function() {
            E(V, 0)
        }
        ;
    function se(q) {
        A = q,
        M || (M = !0,
        z())
    }
    function ae(q, K) {
        I = E(function() {
            q(e.unstable_now())
        }, K)
    }
    e.unstable_IdlePriority = 5,
    e.unstable_ImmediatePriority = 1,
    e.unstable_LowPriority = 4,
    e.unstable_NormalPriority = 3,
    e.unstable_Profiling = null,
    e.unstable_UserBlockingPriority = 2,
    e.unstable_cancelCallback = function(q) {
        q.callback = null
    }
    ,
    e.unstable_continueExecution = function() {
        v || m || (v = !0,
        se(P))
    }
    ,
    e.unstable_forceFrameRate = function(q) {
        0 > q || 125 < q ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : O = 0 < q ? Math.floor(1e3 / q) : 5
    }
    ,
    e.unstable_getCurrentPriorityLevel = function() {
        return h
    }
    ,
    e.unstable_getFirstCallbackNode = function() {
        return n(l)
    }
    ,
    e.unstable_next = function(q) {
        switch (h) {
        case 1:
        case 2:
        case 3:
            var K = 3;
            break;
        default:
            K = h
        }
        var G = h;
        h = K;
        try {
            return q()
        } finally {
            h = G
        }
    }
    ,
    e.unstable_pauseExecution = function() {}
    ,
    e.unstable_requestPaint = function() {}
    ,
    e.unstable_runWithPriority = function(q, K) {
        switch (q) {
        case 1:
        case 2:
        case 3:
        case 4:
        case 5:
            break;
        default:
            q = 3
        }
        var G = h;
        h = q;
        try {
            return K()
        } finally {
            h = G
        }
    }
    ,
    e.unstable_scheduleCallback = function(q, K, G) {
        var H = e.unstable_now();
        switch (typeof G == "object" && G !== null ? (G = G.delay,
        G = typeof G == "number" && 0 < G ? H + G : H) : G = H,
        q) {
        case 1:
            var J = -1;
            break;
        case 2:
            J = 250;
            break;
        case 5:
            J = 1073741823;
            break;
        case 4:
            J = 1e4;
            break;
        default:
            J = 5e3
        }
        return J = G + J,
        q = {
            id: u++,
            callback: K,
            priorityLevel: q,
            startTime: G,
            expirationTime: J,
            sortIndex: -1
        },
        G > H ? (q.sortIndex = G,
        t(c, q),
        n(l) === null && q === n(c) && (y ? (b(I),
        I = -1) : y = !0,
        ae(C, G - H))) : (q.sortIndex = J,
        t(l, q),
        v || m || (v = !0,
        se(P))),
        q
    }
    ,
    e.unstable_shouldYield = $,
    e.unstable_wrapCallback = function(q) {
        var K = h;
        return function() {
            var G = h;
            h = K;
            try {
                return q.apply(this, arguments)
            } finally {
                h = G
            }
        }
    }
}
)(L7);
M7.exports = L7;
var PK = M7.exports;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var P7 = T
  , Ri = PK;
function me(e) {
    for (var t = "https://reactjs.org/docs/error-decoder.html?invariant=" + e, n = 1; n < arguments.length; n++)
        t += "&args[]=" + encodeURIComponent(arguments[n]);
    return "Minified React error #" + e + "; visit " + t + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings."
}
var R7 = new Set
  , Dg = {};
function Iu(e, t) {
    ef(e, t),
    ef(e + "Capture", t)
}
function ef(e, t) {
    for (Dg[e] = t,
    e = 0; e < t.length; e++)
        R7.add(t[e])
}
var ya = !(typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u")
  , Wb = Object.prototype.hasOwnProperty
  , RK = /^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/
  , dC = {}
  , fC = {};
function DK(e) {
    return Wb.call(fC, e) ? !0 : Wb.call(dC, e) ? !1 : RK.test(e) ? fC[e] = !0 : (dC[e] = !0,
    !1)
}
function OK(e, t, n, r) {
    if (n !== null && n.type === 0)
        return !1;
    switch (typeof t) {
    case "function":
    case "symbol":
        return !0;
    case "boolean":
        return r ? !1 : n !== null ? !n.acceptsBooleans : (e = e.toLowerCase().slice(0, 5),
        e !== "data-" && e !== "aria-");
    default:
        return !1
    }
}
function NK(e, t, n, r) {
    if (t === null || typeof t > "u" || OK(e, t, n, r))
        return !0;
    if (r)
        return !1;
    if (n !== null)
        switch (n.type) {
        case 3:
            return !t;
        case 4:
            return t === !1;
        case 5:
            return isNaN(t);
        case 6:
            return isNaN(t) || 1 > t
        }
    return !1
}
function jr(e, t, n, r, i, o, s) {
    this.acceptsBooleans = t === 2 || t === 3 || t === 4,
    this.attributeName = r,
    this.attributeNamespace = i,
    this.mustUseProperty = n,
    this.propertyName = e,
    this.type = t,
    this.sanitizeURL = o,
    this.removeEmptyString = s
}
var lr = {};
"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e) {
    lr[e] = new jr(e,0,!1,e,null,!1,!1)
});
[["acceptCharset", "accept-charset"], ["className", "class"], ["htmlFor", "for"], ["httpEquiv", "http-equiv"]].forEach(function(e) {
    var t = e[0];
    lr[t] = new jr(t,1,!1,e[1],null,!1,!1)
});
["contentEditable", "draggable", "spellCheck", "value"].forEach(function(e) {
    lr[e] = new jr(e,2,!1,e.toLowerCase(),null,!1,!1)
});
["autoReverse", "externalResourcesRequired", "focusable", "preserveAlpha"].forEach(function(e) {
    lr[e] = new jr(e,2,!1,e,null,!1,!1)
});
"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e) {
    lr[e] = new jr(e,3,!1,e.toLowerCase(),null,!1,!1)
});
["checked", "multiple", "muted", "selected"].forEach(function(e) {
    lr[e] = new jr(e,3,!0,e,null,!1,!1)
});
["capture", "download"].forEach(function(e) {
    lr[e] = new jr(e,4,!1,e,null,!1,!1)
});
["cols", "rows", "size", "span"].forEach(function(e) {
    lr[e] = new jr(e,6,!1,e,null,!1,!1)
});
["rowSpan", "start"].forEach(function(e) {
    lr[e] = new jr(e,5,!1,e.toLowerCase(),null,!1,!1)
});
var Sx = /[\-:]([a-z])/g;
function Ix(e) {
    return e[1].toUpperCase()
}
"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e) {
    var t = e.replace(Sx, Ix);
    lr[t] = new jr(t,1,!1,e,null,!1,!1)
});
"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e) {
    var t = e.replace(Sx, Ix);
    lr[t] = new jr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)
});
["xml:base", "xml:lang", "xml:space"].forEach(function(e) {
    var t = e.replace(Sx, Ix);
    lr[t] = new jr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)
});
["tabIndex", "crossOrigin"].forEach(function(e) {
    lr[e] = new jr(e,1,!1,e.toLowerCase(),null,!1,!1)
});
lr.xlinkHref = new jr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);
["src", "href", "action", "formAction"].forEach(function(e) {
    lr[e] = new jr(e,1,!1,e.toLowerCase(),null,!0,!0)
});
function Cx(e, t, n, r) {
    var i = lr.hasOwnProperty(t) ? lr[t] : null;
    (i !== null ? i.type !== 0 : r || !(2 < t.length) || t[0] !== "o" && t[0] !== "O" || t[1] !== "n" && t[1] !== "N") && (NK(t, n, i, r) && (n = null),
    r || i === null ? DK(t) && (n === null ? e.removeAttribute(t) : e.setAttribute(t, "" + n)) : i.mustUseProperty ? e[i.propertyName] = n === null ? i.type === 3 ? !1 : "" : n : (t = i.attributeName,
    r = i.attributeNamespace,
    n === null ? e.removeAttribute(t) : (i = i.type,
    n = i === 3 || i === 4 && n === !0 ? "" : "" + n,
    r ? e.setAttributeNS(r, t, n) : e.setAttribute(t, n))))
}
var Pa = P7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED
  , X1 = Symbol.for("react.element")
  , vd = Symbol.for("react.portal")
  , yd = Symbol.for("react.fragment")
  , kx = Symbol.for("react.strict_mode")
  , Gb = Symbol.for("react.profiler")
  , D7 = Symbol.for("react.provider")
  , O7 = Symbol.for("react.context")
  , Tx = Symbol.for("react.forward_ref")
  , Vb = Symbol.for("react.suspense")
  , Yb = Symbol.for("react.suspense_list")
  , Ax = Symbol.for("react.memo")
  , tl = Symbol.for("react.lazy")
  , N7 = Symbol.for("react.offscreen")
  , hC = Symbol.iterator;
function dh(e) {
    return e === null || typeof e != "object" ? null : (e = hC && e[hC] || e["@@iterator"],
    typeof e == "function" ? e : null)
}
var un = Object.assign, Jw;
function Uh(e) {
    if (Jw === void 0)
        try {
            throw Error()
        } catch (n) {
            var t = n.stack.trim().match(/\n( *(at )?)/);
            Jw = t && t[1] || ""
        }
    return `
` + Jw + e
}
var eE = !1;
function tE(e, t) {
    if (!e || eE)
        return "";
    eE = !0;
    var n = Error.prepareStackTrace;
    Error.prepareStackTrace = void 0;
    try {
        if (t)
            if (t = function() {
                throw Error()
            }
            ,
            Object.defineProperty(t.prototype, "props", {
                set: function() {
                    throw Error()
                }
            }),
            typeof Reflect == "object" && Reflect.construct) {
                try {
                    Reflect.construct(t, [])
                } catch (c) {
                    var r = c
                }
                Reflect.construct(e, [], t)
            } else {
                try {
                    t.call()
                } catch (c) {
                    r = c
                }
                e.call(t.prototype)
            }
        else {
            try {
                throw Error()
            } catch (c) {
                r = c
            }
            e()
        }
    } catch (c) {
        if (c && r && typeof c.stack == "string") {
            for (var i = c.stack.split(`
`), o = r.stack.split(`
`), s = i.length - 1, a = o.length - 1; 1 <= s && 0 <= a && i[s] !== o[a]; )
                a--;
            for (; 1 <= s && 0 <= a; s--,
            a--)
                if (i[s] !== o[a]) {
                    if (s !== 1 || a !== 1)
                        do
                            if (s--,
                            a--,
                            0 > a || i[s] !== o[a]) {
                                var l = `
` + i[s].replace(" at new ", " at ");
                                return e.displayName && l.includes("<anonymous>") && (l = l.replace("<anonymous>", e.displayName)),
                                l
                            }
                        while (1 <= s && 0 <= a);
                    break
                }
        }
    } finally {
        eE = !1,
        Error.prepareStackTrace = n
    }
    return (e = e ? e.displayName || e.name : "") ? Uh(e) : ""
}
function FK(e) {
    switch (e.tag) {
    case 5:
        return Uh(e.type);
    case 16:
        return Uh("Lazy");
    case 13:
        return Uh("Suspense");
    case 19:
        return Uh("SuspenseList");
    case 0:
    case 2:
    case 15:
        return e = tE(e.type, !1),
        e;
    case 11:
        return e = tE(e.type.render, !1),
        e;
    case 1:
        return e = tE(e.type, !0),
        e;
    default:
        return ""
    }
}
function jb(e) {
    if (e == null)
        return null;
    if (typeof e == "function")
        return e.displayName || e.name || null;
    if (typeof e == "string")
        return e;
    switch (e) {
    case yd:
        return "Fragment";
    case vd:
        return "Portal";
    case Gb:
        return "Profiler";
    case kx:
        return "StrictMode";
    case Vb:
        return "Suspense";
    case Yb:
        return "SuspenseList"
    }
    if (typeof e == "object")
        switch (e.$$typeof) {
        case O7:
            return (e.displayName || "Context") + ".Consumer";
        case D7:
            return (e._context.displayName || "Context") + ".Provider";
        case Tx:
            var t = e.render;
            return e = e.displayName,
            e || (e = t.displayName || t.name || "",
            e = e !== "" ? "ForwardRef(" + e + ")" : "ForwardRef"),
            e;
        case Ax:
            return t = e.displayName || null,
            t !== null ? t : jb(e.type) || "Memo";
        case tl:
            t = e._payload,
            e = e._init;
            try {
                return jb(e(t))
            } catch {}
        }
    return null
}
function BK(e) {
    var t = e.type;
    switch (e.tag) {
    case 24:
        return "Cache";
    case 9:
        return (t.displayName || "Context") + ".Consumer";
    case 10:
        return (t._context.displayName || "Context") + ".Provider";
    case 18:
        return "DehydratedFragment";
    case 11:
        return e = t.render,
        e = e.displayName || e.name || "",
        t.displayName || (e !== "" ? "ForwardRef(" + e + ")" : "ForwardRef");
    case 7:
        return "Fragment";
    case 5:
        return t;
    case 4:
        return "Portal";
    case 3:
        return "Root";
    case 6:
        return "Text";
    case 16:
        return jb(t);
    case 8:
        return t === kx ? "StrictMode" : "Mode";
    case 22:
        return "Offscreen";
    case 12:
        return "Profiler";
    case 21:
        return "Scope";
    case 13:
        return "Suspense";
    case 19:
        return "SuspenseList";
    case 25:
        return "TracingMarker";
    case 1:
    case 0:
    case 17:
    case 2:
    case 14:
    case 15:
        if (typeof t == "function")
            return t.displayName || t.name || null;
        if (typeof t == "string")
            return t
    }
    return null
}
function zl(e) {
    switch (typeof e) {
    case "boolean":
    case "number":
    case "string":
    case "undefined":
        return e;
    case "object":
        return e;
    default:
        return ""
    }
}
function F7(e) {
    var t = e.type;
    return (e = e.nodeName) && e.toLowerCase() === "input" && (t === "checkbox" || t === "radio")
}
function zK(e) {
    var t = F7(e) ? "checked" : "value"
      , n = Object.getOwnPropertyDescriptor(e.constructor.prototype, t)
      , r = "" + e[t];
    if (!e.hasOwnProperty(t) && typeof n < "u" && typeof n.get == "function" && typeof n.set == "function") {
        var i = n.get
          , o = n.set;
        return Object.defineProperty(e, t, {
            configurable: !0,
            get: function() {
                return i.call(this)
            },
            set: function(s) {
                r = "" + s,
                o.call(this, s)
            }
        }),
        Object.defineProperty(e, t, {
            enumerable: n.enumerable
        }),
        {
            getValue: function() {
                return r
            },
            setValue: function(s) {
                r = "" + s
            },
            stopTracking: function() {
                e._valueTracker = null,
                delete e[t]
            }
        }
    }
}
function Z1(e) {
    e._valueTracker || (e._valueTracker = zK(e))
}
function B7(e) {
    if (!e)
        return !1;
    var t = e._valueTracker;
    if (!t)
        return !0;
    var n = t.getValue()
      , r = "";
    return e && (r = F7(e) ? e.checked ? "true" : "false" : e.value),
    e = r,
    e !== n ? (t.setValue(e),
    !0) : !1
}
function Mm(e) {
    if (e = e || (typeof document < "u" ? document : void 0),
    typeof e > "u")
        return null;
    try {
        return e.activeElement || e.body
    } catch {
        return e.body
    }
}
function Kb(e, t) {
    var n = t.checked;
    return un({}, t, {
        defaultChecked: void 0,
        defaultValue: void 0,
        value: void 0,
        checked: n ?? e._wrapperState.initialChecked
    })
}
function gC(e, t) {
    var n = t.defaultValue == null ? "" : t.defaultValue
      , r = t.checked != null ? t.checked : t.defaultChecked;
    n = zl(t.value != null ? t.value : n),
    e._wrapperState = {
        initialChecked: r,
        initialValue: n,
        controlled: t.type === "checkbox" || t.type === "radio" ? t.checked != null : t.value != null
    }
}
function z7(e, t) {
    t = t.checked,
    t != null && Cx(e, "checked", t, !1)
}
function Xb(e, t) {
    z7(e, t);
    var n = zl(t.value)
      , r = t.type;
    if (n != null)
        r === "number" ? (n === 0 && e.value === "" || e.value != n) && (e.value = "" + n) : e.value !== "" + n && (e.value = "" + n);
    else if (r === "submit" || r === "reset") {
        e.removeAttribute("value");
        return
    }
    t.hasOwnProperty("value") ? Zb(e, t.type, n) : t.hasOwnProperty("defaultValue") && Zb(e, t.type, zl(t.defaultValue)),
    t.checked == null && t.defaultChecked != null && (e.defaultChecked = !!t.defaultChecked)
}
function pC(e, t, n) {
    if (t.hasOwnProperty("value") || t.hasOwnProperty("defaultValue")) {
        var r = t.type;
        if (!(r !== "submit" && r !== "reset" || t.value !== void 0 && t.value !== null))
            return;
        t = "" + e._wrapperState.initialValue,
        n || t === e.value || (e.value = t),
        e.defaultValue = t
    }
    n = e.name,
    n !== "" && (e.name = ""),
    e.defaultChecked = !!e._wrapperState.initialChecked,
    n !== "" && (e.name = n)
}
function Zb(e, t, n) {
    (t !== "number" || Mm(e.ownerDocument) !== e) && (n == null ? e.defaultValue = "" + e._wrapperState.initialValue : e.defaultValue !== "" + n && (e.defaultValue = "" + n))
}
var Hh = Array.isArray;
function zd(e, t, n, r) {
    if (e = e.options,
    t) {
        t = {};
        for (var i = 0; i < n.length; i++)
            t["$" + n[i]] = !0;
        for (n = 0; n < e.length; n++)
            i = t.hasOwnProperty("$" + e[n].value),
            e[n].selected !== i && (e[n].selected = i),
            i && r && (e[n].defaultSelected = !0)
    } else {
        for (n = "" + zl(n),
        t = null,
        i = 0; i < e.length; i++) {
            if (e[i].value === n) {
                e[i].selected = !0,
                r && (e[i].defaultSelected = !0);
                return
            }
            t !== null || e[i].disabled || (t = e[i])
        }
        t !== null && (t.selected = !0)
    }
}
function qb(e, t) {
    if (t.dangerouslySetInnerHTML != null)
        throw Error(me(91));
    return un({}, t, {
        value: void 0,
        defaultValue: void 0,
        children: "" + e._wrapperState.initialValue
    })
}
function mC(e, t) {
    var n = t.value;
    if (n == null) {
        if (n = t.children,
        t = t.defaultValue,
        n != null) {
            if (t != null)
                throw Error(me(92));
            if (Hh(n)) {
                if (1 < n.length)
                    throw Error(me(93));
                n = n[0]
            }
            t = n
        }
        t == null && (t = ""),
        n = t
    }
    e._wrapperState = {
        initialValue: zl(n)
    }
}
function $7(e, t) {
    var n = zl(t.value)
      , r = zl(t.defaultValue);
    n != null && (n = "" + n,
    n !== e.value && (e.value = n),
    t.defaultValue == null && e.defaultValue !== n && (e.defaultValue = n)),
    r != null && (e.defaultValue = "" + r)
}
function vC(e) {
    var t = e.textContent;
    t === e._wrapperState.initialValue && t !== "" && t !== null && (e.value = t)
}
function U7(e) {
    switch (e) {
    case "svg":
        return "http://www.w3.org/2000/svg";
    case "math":
        return "http://www.w3.org/1998/Math/MathML";
    default:
        return "http://www.w3.org/1999/xhtml"
    }
}
function Qb(e, t) {
    return e == null || e === "http://www.w3.org/1999/xhtml" ? U7(t) : e === "http://www.w3.org/2000/svg" && t === "foreignObject" ? "http://www.w3.org/1999/xhtml" : e
}
var q1, H7 = function(e) {
    return typeof MSApp < "u" && MSApp.execUnsafeLocalFunction ? function(t, n, r, i) {
        MSApp.execUnsafeLocalFunction(function() {
            return e(t, n, r, i)
        })
    }
    : e
}(function(e, t) {
    if (e.namespaceURI !== "http://www.w3.org/2000/svg" || "innerHTML"in e)
        e.innerHTML = t;
    else {
        for (q1 = q1 || document.createElement("div"),
        q1.innerHTML = "<svg>" + t.valueOf().toString() + "</svg>",
        t = q1.firstChild; e.firstChild; )
            e.removeChild(e.firstChild);
        for (; t.firstChild; )
            e.appendChild(t.firstChild)
    }
});
function Og(e, t) {
    if (t) {
        var n = e.firstChild;
        if (n && n === e.lastChild && n.nodeType === 3) {
            n.nodeValue = t;
            return
        }
    }
    e.textContent = t
}
var ig = {
    animationIterationCount: !0,
    aspectRatio: !0,
    borderImageOutset: !0,
    borderImageSlice: !0,
    borderImageWidth: !0,
    boxFlex: !0,
    boxFlexGroup: !0,
    boxOrdinalGroup: !0,
    columnCount: !0,
    columns: !0,
    flex: !0,
    flexGrow: !0,
    flexPositive: !0,
    flexShrink: !0,
    flexNegative: !0,
    flexOrder: !0,
    gridArea: !0,
    gridRow: !0,
    gridRowEnd: !0,
    gridRowSpan: !0,
    gridRowStart: !0,
    gridColumn: !0,
    gridColumnEnd: !0,
    gridColumnSpan: !0,
    gridColumnStart: !0,
    fontWeight: !0,
    lineClamp: !0,
    lineHeight: !0,
    opacity: !0,
    order: !0,
    orphans: !0,
    tabSize: !0,
    widows: !0,
    zIndex: !0,
    zoom: !0,
    fillOpacity: !0,
    floodOpacity: !0,
    stopOpacity: !0,
    strokeDasharray: !0,
    strokeDashoffset: !0,
    strokeMiterlimit: !0,
    strokeOpacity: !0,
    strokeWidth: !0
}
  , $K = ["Webkit", "ms", "Moz", "O"];
Object.keys(ig).forEach(function(e) {
    $K.forEach(function(t) {
        t = t + e.charAt(0).toUpperCase() + e.substring(1),
        ig[t] = ig[e]
    })
});
function W7(e, t, n) {
    return t == null || typeof t == "boolean" || t === "" ? "" : n || typeof t != "number" || t === 0 || ig.hasOwnProperty(e) && ig[e] ? ("" + t).trim() : t + "px"
}
function G7(e, t) {
    e = e.style;
    for (var n in t)
        if (t.hasOwnProperty(n)) {
            var r = n.indexOf("--") === 0
              , i = W7(n, t[n], r);
            n === "float" && (n = "cssFloat"),
            r ? e.setProperty(n, i) : e[n] = i
        }
}
var UK = un({
    menuitem: !0
}, {
    area: !0,
    base: !0,
    br: !0,
    col: !0,
    embed: !0,
    hr: !0,
    img: !0,
    input: !0,
    keygen: !0,
    link: !0,
    meta: !0,
    param: !0,
    source: !0,
    track: !0,
    wbr: !0
});
function Jb(e, t) {
    if (t) {
        if (UK[e] && (t.children != null || t.dangerouslySetInnerHTML != null))
            throw Error(me(137, e));
        if (t.dangerouslySetInnerHTML != null) {
            if (t.children != null)
                throw Error(me(60));
            if (typeof t.dangerouslySetInnerHTML != "object" || !("__html"in t.dangerouslySetInnerHTML))
                throw Error(me(61))
        }
        if (t.style != null && typeof t.style != "object")
            throw Error(me(62))
    }
}
function e3(e, t) {
    if (e.indexOf("-") === -1)
        return typeof t.is == "string";
    switch (e) {
    case "annotation-xml":
    case "color-profile":
    case "font-face":
    case "font-face-src":
    case "font-face-uri":
    case "font-face-format":
    case "font-face-name":
    case "missing-glyph":
        return !1;
    default:
        return !0
    }
}
var t3 = null;
function Mx(e) {
    return e = e.target || e.srcElement || window,
    e.correspondingUseElement && (e = e.correspondingUseElement),
    e.nodeType === 3 ? e.parentNode : e
}
var n3 = null
  , $d = null
  , Ud = null;
function yC(e) {
    if (e = Dp(e)) {
        if (typeof n3 != "function")
            throw Error(me(280));
        var t = e.stateNode;
        t && (t = pv(t),
        n3(e.stateNode, e.type, t))
    }
}
function V7(e) {
    $d ? Ud ? Ud.push(e) : Ud = [e] : $d = e
}
function Y7() {
    if ($d) {
        var e = $d
          , t = Ud;
        if (Ud = $d = null,
        yC(e),
        t)
            for (e = 0; e < t.length; e++)
                yC(t[e])
    }
}
function j7(e, t) {
    return e(t)
}
function K7() {}
var nE = !1;
function X7(e, t, n) {
    if (nE)
        return e(t, n);
    nE = !0;
    try {
        return j7(e, t, n)
    } finally {
        nE = !1,
        ($d !== null || Ud !== null) && (K7(),
        Y7())
    }
}
function Ng(e, t) {
    var n = e.stateNode;
    if (n === null)
        return null;
    var r = pv(n);
    if (r === null)
        return null;
    n = r[t];
    e: switch (t) {
    case "onClick":
    case "onClickCapture":
    case "onDoubleClick":
    case "onDoubleClickCapture":
    case "onMouseDown":
    case "onMouseDownCapture":
    case "onMouseMove":
    case "onMouseMoveCapture":
    case "onMouseUp":
    case "onMouseUpCapture":
    case "onMouseEnter":
        (r = !r.disabled) || (e = e.type,
        r = !(e === "button" || e === "input" || e === "select" || e === "textarea")),
        e = !r;
        break e;
    default:
        e = !1
    }
    if (e)
        return null;
    if (n && typeof n != "function")
        throw Error(me(231, t, typeof n));
    return n
}
var r3 = !1;
if (ya)
    try {
        var fh = {};
        Object.defineProperty(fh, "passive", {
            get: function() {
                r3 = !0
            }
        }),
        window.addEventListener("test", fh, fh),
        window.removeEventListener("test", fh, fh)
    } catch {
        r3 = !1
    }
function HK(e, t, n, r, i, o, s, a, l) {
    var c = Array.prototype.slice.call(arguments, 3);
    try {
        t.apply(n, c)
    } catch (u) {
        this.onError(u)
    }
}
var og = !1
  , Lm = null
  , Pm = !1
  , i3 = null
  , WK = {
    onError: function(e) {
        og = !0,
        Lm = e
    }
};
function GK(e, t, n, r, i, o, s, a, l) {
    og = !1,
    Lm = null,
    HK.apply(WK, arguments)
}
function VK(e, t, n, r, i, o, s, a, l) {
    if (GK.apply(this, arguments),
    og) {
        if (og) {
            var c = Lm;
            og = !1,
            Lm = null
        } else
            throw Error(me(198));
        Pm || (Pm = !0,
        i3 = c)
    }
}
function Cu(e) {
    var t = e
      , n = e;
    if (e.alternate)
        for (; t.return; )
            t = t.return;
    else {
        e = t;
        do
            t = e,
            t.flags & 4098 && (n = t.return),
            e = t.return;
        while (e)
    }
    return t.tag === 3 ? n : null
}
function Z7(e) {
    if (e.tag === 13) {
        var t = e.memoizedState;
        if (t === null && (e = e.alternate,
        e !== null && (t = e.memoizedState)),
        t !== null)
            return t.dehydrated
    }
    return null
}
function wC(e) {
    if (Cu(e) !== e)
        throw Error(me(188))
}
function YK(e) {
    var t = e.alternate;
    if (!t) {
        if (t = Cu(e),
        t === null)
            throw Error(me(188));
        return t !== e ? null : e
    }
    for (var n = e, r = t; ; ) {
        var i = n.return;
        if (i === null)
            break;
        var o = i.alternate;
        if (o === null) {
            if (r = i.return,
            r !== null) {
                n = r;
                continue
            }
            break
        }
        if (i.child === o.child) {
            for (o = i.child; o; ) {
                if (o === n)
                    return wC(i),
                    e;
                if (o === r)
                    return wC(i),
                    t;
                o = o.sibling
            }
            throw Error(me(188))
        }
        if (n.return !== r.return)
            n = i,
            r = o;
        else {
            for (var s = !1, a = i.child; a; ) {
                if (a === n) {
                    s = !0,
                    n = i,
                    r = o;
                    break
                }
                if (a === r) {
                    s = !0,
                    r = i,
                    n = o;
                    break
                }
                a = a.sibling
            }
            if (!s) {
                for (a = o.child; a; ) {
                    if (a === n) {
                        s = !0,
                        n = o,
                        r = i;
                        break
                    }
                    if (a === r) {
                        s = !0,
                        r = o,
                        n = i;
                        break
                    }
                    a = a.sibling
                }
                if (!s)
                    throw Error(me(189))
            }
        }
        if (n.alternate !== r)
            throw Error(me(190))
    }
    if (n.tag !== 3)
        throw Error(me(188));
    return n.stateNode.current === n ? e : t
}
function q7(e) {
    return e = YK(e),
    e !== null ? Q7(e) : null
}
function Q7(e) {
    if (e.tag === 5 || e.tag === 6)
        return e;
    for (e = e.child; e !== null; ) {
        var t = Q7(e);
        if (t !== null)
            return t;
        e = e.sibling
    }
    return null
}
var J7 = Ri.unstable_scheduleCallback
  , EC = Ri.unstable_cancelCallback
  , jK = Ri.unstable_shouldYield
  , KK = Ri.unstable_requestPaint
  , _n = Ri.unstable_now
  , XK = Ri.unstable_getCurrentPriorityLevel
  , Lx = Ri.unstable_ImmediatePriority
  , eL = Ri.unstable_UserBlockingPriority
  , Rm = Ri.unstable_NormalPriority
  , ZK = Ri.unstable_LowPriority
  , tL = Ri.unstable_IdlePriority
  , dv = null
  , _s = null;
function qK(e) {
    if (_s && typeof _s.onCommitFiberRoot == "function")
        try {
            _s.onCommitFiberRoot(dv, e, void 0, (e.current.flags & 128) === 128)
        } catch {}
}
var zo = Math.clz32 ? Math.clz32 : eX
  , QK = Math.log
  , JK = Math.LN2;
function eX(e) {
    return e >>>= 0,
    e === 0 ? 32 : 31 - (QK(e) / JK | 0) | 0
}
var Q1 = 64
  , J1 = 4194304;
function Wh(e) {
    switch (e & -e) {
    case 1:
        return 1;
    case 2:
        return 2;
    case 4:
        return 4;
    case 8:
        return 8;
    case 16:
        return 16;
    case 32:
        return 32;
    case 64:
    case 128:
    case 256:
    case 512:
    case 1024:
    case 2048:
    case 4096:
    case 8192:
    case 16384:
    case 32768:
    case 65536:
    case 131072:
    case 262144:
    case 524288:
    case 1048576:
    case 2097152:
        return e & 4194240;
    case 4194304:
    case 8388608:
    case 16777216:
    case 33554432:
    case 67108864:
        return e & 130023424;
    case 134217728:
        return 134217728;
    case 268435456:
        return 268435456;
    case 536870912:
        return 536870912;
    case 1073741824:
        return 1073741824;
    default:
        return e
    }
}
function Dm(e, t) {
    var n = e.pendingLanes;
    if (n === 0)
        return 0;
    var r = 0
      , i = e.suspendedLanes
      , o = e.pingedLanes
      , s = n & 268435455;
    if (s !== 0) {
        var a = s & ~i;
        a !== 0 ? r = Wh(a) : (o &= s,
        o !== 0 && (r = Wh(o)))
    } else
        s = n & ~i,
        s !== 0 ? r = Wh(s) : o !== 0 && (r = Wh(o));
    if (r === 0)
        return 0;
    if (t !== 0 && t !== r && !(t & i) && (i = r & -r,
    o = t & -t,
    i >= o || i === 16 && (o & 4194240) !== 0))
        return t;
    if (r & 4 && (r |= n & 16),
    t = e.entangledLanes,
    t !== 0)
        for (e = e.entanglements,
        t &= r; 0 < t; )
            n = 31 - zo(t),
            i = 1 << n,
            r |= e[n],
            t &= ~i;
    return r
}
function tX(e, t) {
    switch (e) {
    case 1:
    case 2:
    case 4:
        return t + 250;
    case 8:
    case 16:
    case 32:
    case 64:
    case 128:
    case 256:
    case 512:
    case 1024:
    case 2048:
    case 4096:
    case 8192:
    case 16384:
    case 32768:
    case 65536:
    case 131072:
    case 262144:
    case 524288:
    case 1048576:
    case 2097152:
        return t + 5e3;
    case 4194304:
    case 8388608:
    case 16777216:
    case 33554432:
    case 67108864:
        return -1;
    case 134217728:
    case 268435456:
    case 536870912:
    case 1073741824:
        return -1;
    default:
        return -1
    }
}
function nX(e, t) {
    for (var n = e.suspendedLanes, r = e.pingedLanes, i = e.expirationTimes, o = e.pendingLanes; 0 < o; ) {
        var s = 31 - zo(o)
          , a = 1 << s
          , l = i[s];
        l === -1 ? (!(a & n) || a & r) && (i[s] = tX(a, t)) : l <= t && (e.expiredLanes |= a),
        o &= ~a
    }
}
function o3(e) {
    return e = e.pendingLanes & -1073741825,
    e !== 0 ? e : e & 1073741824 ? 1073741824 : 0
}
function nL() {
    var e = Q1;
    return Q1 <<= 1,
    !(Q1 & 4194240) && (Q1 = 64),
    e
}
function rE(e) {
    for (var t = [], n = 0; 31 > n; n++)
        t.push(e);
    return t
}
function Pp(e, t, n) {
    e.pendingLanes |= t,
    t !== 536870912 && (e.suspendedLanes = 0,
    e.pingedLanes = 0),
    e = e.eventTimes,
    t = 31 - zo(t),
    e[t] = n
}
function rX(e, t) {
    var n = e.pendingLanes & ~t;
    e.pendingLanes = t,
    e.suspendedLanes = 0,
    e.pingedLanes = 0,
    e.expiredLanes &= t,
    e.mutableReadLanes &= t,
    e.entangledLanes &= t,
    t = e.entanglements;
    var r = e.eventTimes;
    for (e = e.expirationTimes; 0 < n; ) {
        var i = 31 - zo(n)
          , o = 1 << i;
        t[i] = 0,
        r[i] = -1,
        e[i] = -1,
        n &= ~o
    }
}
function Px(e, t) {
    var n = e.entangledLanes |= t;
    for (e = e.entanglements; n; ) {
        var r = 31 - zo(n)
          , i = 1 << r;
        i & t | e[r] & t && (e[r] |= t),
        n &= ~i
    }
}
var Pt = 0;
function rL(e) {
    return e &= -e,
    1 < e ? 4 < e ? e & 268435455 ? 16 : 536870912 : 4 : 1
}
var iL, Rx, oL, sL, aL, s3 = !1, e0 = [], xl = null, Sl = null, Il = null, Fg = new Map, Bg = new Map, al = [], iX = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");
function bC(e, t) {
    switch (e) {
    case "focusin":
    case "focusout":
        xl = null;
        break;
    case "dragenter":
    case "dragleave":
        Sl = null;
        break;
    case "mouseover":
    case "mouseout":
        Il = null;
        break;
    case "pointerover":
    case "pointerout":
        Fg.delete(t.pointerId);
        break;
    case "gotpointercapture":
    case "lostpointercapture":
        Bg.delete(t.pointerId)
    }
}
function hh(e, t, n, r, i, o) {
    return e === null || e.nativeEvent !== o ? (e = {
        blockedOn: t,
        domEventName: n,
        eventSystemFlags: r,
        nativeEvent: o,
        targetContainers: [i]
    },
    t !== null && (t = Dp(t),
    t !== null && Rx(t)),
    e) : (e.eventSystemFlags |= r,
    t = e.targetContainers,
    i !== null && t.indexOf(i) === -1 && t.push(i),
    e)
}
function oX(e, t, n, r, i) {
    switch (t) {
    case "focusin":
        return xl = hh(xl, e, t, n, r, i),
        !0;
    case "dragenter":
        return Sl = hh(Sl, e, t, n, r, i),
        !0;
    case "mouseover":
        return Il = hh(Il, e, t, n, r, i),
        !0;
    case "pointerover":
        var o = i.pointerId;
        return Fg.set(o, hh(Fg.get(o) || null, e, t, n, r, i)),
        !0;
    case "gotpointercapture":
        return o = i.pointerId,
        Bg.set(o, hh(Bg.get(o) || null, e, t, n, r, i)),
        !0
    }
    return !1
}
function lL(e) {
    var t = Rc(e.target);
    if (t !== null) {
        var n = Cu(t);
        if (n !== null) {
            if (t = n.tag,
            t === 13) {
                if (t = Z7(n),
                t !== null) {
                    e.blockedOn = t,
                    aL(e.priority, function() {
                        oL(n)
                    });
                    return
                }
            } else if (t === 3 && n.stateNode.current.memoizedState.isDehydrated) {
                e.blockedOn = n.tag === 3 ? n.stateNode.containerInfo : null;
                return
            }
        }
    }
    e.blockedOn = null
}
function j0(e) {
    if (e.blockedOn !== null)
        return !1;
    for (var t = e.targetContainers; 0 < t.length; ) {
        var n = a3(e.domEventName, e.eventSystemFlags, t[0], e.nativeEvent);
        if (n === null) {
            n = e.nativeEvent;
            var r = new n.constructor(n.type,n);
            t3 = r,
            n.target.dispatchEvent(r),
            t3 = null
        } else
            return t = Dp(n),
            t !== null && Rx(t),
            e.blockedOn = n,
            !1;
        t.shift()
    }
    return !0
}
function _C(e, t, n) {
    j0(e) && n.delete(t)
}
function sX() {
    s3 = !1,
    xl !== null && j0(xl) && (xl = null),
    Sl !== null && j0(Sl) && (Sl = null),
    Il !== null && j0(Il) && (Il = null),
    Fg.forEach(_C),
    Bg.forEach(_C)
}
function gh(e, t) {
    e.blockedOn === t && (e.blockedOn = null,
    s3 || (s3 = !0,
    Ri.unstable_scheduleCallback(Ri.unstable_NormalPriority, sX)))
}
function zg(e) {
    function t(i) {
        return gh(i, e)
    }
    if (0 < e0.length) {
        gh(e0[0], e);
        for (var n = 1; n < e0.length; n++) {
            var r = e0[n];
            r.blockedOn === e && (r.blockedOn = null)
        }
    }
    for (xl !== null && gh(xl, e),
    Sl !== null && gh(Sl, e),
    Il !== null && gh(Il, e),
    Fg.forEach(t),
    Bg.forEach(t),
    n = 0; n < al.length; n++)
        r = al[n],
        r.blockedOn === e && (r.blockedOn = null);
    for (; 0 < al.length && (n = al[0],
    n.blockedOn === null); )
        lL(n),
        n.blockedOn === null && al.shift()
}
var Hd = Pa.ReactCurrentBatchConfig
  , Om = !0;
function aX(e, t, n, r) {
    var i = Pt
      , o = Hd.transition;
    Hd.transition = null;
    try {
        Pt = 1,
        Dx(e, t, n, r)
    } finally {
        Pt = i,
        Hd.transition = o
    }
}
function lX(e, t, n, r) {
    var i = Pt
      , o = Hd.transition;
    Hd.transition = null;
    try {
        Pt = 4,
        Dx(e, t, n, r)
    } finally {
        Pt = i,
        Hd.transition = o
    }
}
function Dx(e, t, n, r) {
    if (Om) {
        var i = a3(e, t, n, r);
        if (i === null)
            hE(e, t, r, Nm, n),
            bC(e, r);
        else if (oX(i, e, t, n, r))
            r.stopPropagation();
        else if (bC(e, r),
        t & 4 && -1 < iX.indexOf(e)) {
            for (; i !== null; ) {
                var o = Dp(i);
                if (o !== null && iL(o),
                o = a3(e, t, n, r),
                o === null && hE(e, t, r, Nm, n),
                o === i)
                    break;
                i = o
            }
            i !== null && r.stopPropagation()
        } else
            hE(e, t, r, null, n)
    }
}
var Nm = null;
function a3(e, t, n, r) {
    if (Nm = null,
    e = Mx(r),
    e = Rc(e),
    e !== null)
        if (t = Cu(e),
        t === null)
            e = null;
        else if (n = t.tag,
        n === 13) {
            if (e = Z7(t),
            e !== null)
                return e;
            e = null
        } else if (n === 3) {
            if (t.stateNode.current.memoizedState.isDehydrated)
                return t.tag === 3 ? t.stateNode.containerInfo : null;
            e = null
        } else
            t !== e && (e = null);
    return Nm = e,
    null
}
function cL(e) {
    switch (e) {
    case "cancel":
    case "click":
    case "close":
    case "contextmenu":
    case "copy":
    case "cut":
    case "auxclick":
    case "dblclick":
    case "dragend":
    case "dragstart":
    case "drop":
    case "focusin":
    case "focusout":
    case "input":
    case "invalid":
    case "keydown":
    case "keypress":
    case "keyup":
    case "mousedown":
    case "mouseup":
    case "paste":
    case "pause":
    case "play":
    case "pointercancel":
    case "pointerdown":
    case "pointerup":
    case "ratechange":
    case "reset":
    case "resize":
    case "seeked":
    case "submit":
    case "touchcancel":
    case "touchend":
    case "touchstart":
    case "volumechange":
    case "change":
    case "selectionchange":
    case "textInput":
    case "compositionstart":
    case "compositionend":
    case "compositionupdate":
    case "beforeblur":
    case "afterblur":
    case "beforeinput":
    case "blur":
    case "fullscreenchange":
    case "focus":
    case "hashchange":
    case "popstate":
    case "select":
    case "selectstart":
        return 1;
    case "drag":
    case "dragenter":
    case "dragexit":
    case "dragleave":
    case "dragover":
    case "mousemove":
    case "mouseout":
    case "mouseover":
    case "pointermove":
    case "pointerout":
    case "pointerover":
    case "scroll":
    case "toggle":
    case "touchmove":
    case "wheel":
    case "mouseenter":
    case "mouseleave":
    case "pointerenter":
    case "pointerleave":
        return 4;
    case "message":
        switch (XK()) {
        case Lx:
            return 1;
        case eL:
            return 4;
        case Rm:
        case ZK:
            return 16;
        case tL:
            return 536870912;
        default:
            return 16
        }
    default:
        return 16
    }
}
var hl = null
  , Ox = null
  , K0 = null;
function uL() {
    if (K0)
        return K0;
    var e, t = Ox, n = t.length, r, i = "value"in hl ? hl.value : hl.textContent, o = i.length;
    for (e = 0; e < n && t[e] === i[e]; e++)
        ;
    var s = n - e;
    for (r = 1; r <= s && t[n - r] === i[o - r]; r++)
        ;
    return K0 = i.slice(e, 1 < r ? 1 - r : void 0)
}
function X0(e) {
    var t = e.keyCode;
    return "charCode"in e ? (e = e.charCode,
    e === 0 && t === 13 && (e = 13)) : e = t,
    e === 10 && (e = 13),
    32 <= e || e === 13 ? e : 0
}
function t0() {
    return !0
}
function xC() {
    return !1
}
function Fi(e) {
    function t(n, r, i, o, s) {
        this._reactName = n,
        this._targetInst = i,
        this.type = r,
        this.nativeEvent = o,
        this.target = s,
        this.currentTarget = null;
        for (var a in e)
            e.hasOwnProperty(a) && (n = e[a],
            this[a] = n ? n(o) : o[a]);
        return this.isDefaultPrevented = (o.defaultPrevented != null ? o.defaultPrevented : o.returnValue === !1) ? t0 : xC,
        this.isPropagationStopped = xC,
        this
    }
    return un(t.prototype, {
        preventDefault: function() {
            this.defaultPrevented = !0;
            var n = this.nativeEvent;
            n && (n.preventDefault ? n.preventDefault() : typeof n.returnValue != "unknown" && (n.returnValue = !1),
            this.isDefaultPrevented = t0)
        },
        stopPropagation: function() {
            var n = this.nativeEvent;
            n && (n.stopPropagation ? n.stopPropagation() : typeof n.cancelBubble != "unknown" && (n.cancelBubble = !0),
            this.isPropagationStopped = t0)
        },
        persist: function() {},
        isPersistent: t0
    }),
    t
}
var Tf = {
    eventPhase: 0,
    bubbles: 0,
    cancelable: 0,
    timeStamp: function(e) {
        return e.timeStamp || Date.now()
    },
    defaultPrevented: 0,
    isTrusted: 0
}, Nx = Fi(Tf), Rp = un({}, Tf, {
    view: 0,
    detail: 0
}), cX = Fi(Rp), iE, oE, ph, fv = un({}, Rp, {
    screenX: 0,
    screenY: 0,
    clientX: 0,
    clientY: 0,
    pageX: 0,
    pageY: 0,
    ctrlKey: 0,
    shiftKey: 0,
    altKey: 0,
    metaKey: 0,
    getModifierState: Fx,
    button: 0,
    buttons: 0,
    relatedTarget: function(e) {
        return e.relatedTarget === void 0 ? e.fromElement === e.srcElement ? e.toElement : e.fromElement : e.relatedTarget
    },
    movementX: function(e) {
        return "movementX"in e ? e.movementX : (e !== ph && (ph && e.type === "mousemove" ? (iE = e.screenX - ph.screenX,
        oE = e.screenY - ph.screenY) : oE = iE = 0,
        ph = e),
        iE)
    },
    movementY: function(e) {
        return "movementY"in e ? e.movementY : oE
    }
}), SC = Fi(fv), uX = un({}, fv, {
    dataTransfer: 0
}), dX = Fi(uX), fX = un({}, Rp, {
    relatedTarget: 0
}), sE = Fi(fX), hX = un({}, Tf, {
    animationName: 0,
    elapsedTime: 0,
    pseudoElement: 0
}), gX = Fi(hX), pX = un({}, Tf, {
    clipboardData: function(e) {
        return "clipboardData"in e ? e.clipboardData : window.clipboardData
    }
}), mX = Fi(pX), vX = un({}, Tf, {
    data: 0
}), IC = Fi(vX), yX = {
    Esc: "Escape",
    Spacebar: " ",
    Left: "ArrowLeft",
    Up: "ArrowUp",
    Right: "ArrowRight",
    Down: "ArrowDown",
    Del: "Delete",
    Win: "OS",
    Menu: "ContextMenu",
    Apps: "ContextMenu",
    Scroll: "ScrollLock",
    MozPrintableKey: "Unidentified"
}, wX = {
    8: "Backspace",
    9: "Tab",
    12: "Clear",
    13: "Enter",
    16: "Shift",
    17: "Control",
    18: "Alt",
    19: "Pause",
    20: "CapsLock",
    27: "Escape",
    32: " ",
    33: "PageUp",
    34: "PageDown",
    35: "End",
    36: "Home",
    37: "ArrowLeft",
    38: "ArrowUp",
    39: "ArrowRight",
    40: "ArrowDown",
    45: "Insert",
    46: "Delete",
    112: "F1",
    113: "F2",
    114: "F3",
    115: "F4",
    116: "F5",
    117: "F6",
    118: "F7",
    119: "F8",
    120: "F9",
    121: "F10",
    122: "F11",
    123: "F12",
    144: "NumLock",
    145: "ScrollLock",
    224: "Meta"
}, EX = {
    Alt: "altKey",
    Control: "ctrlKey",
    Meta: "metaKey",
    Shift: "shiftKey"
};
function bX(e) {
    var t = this.nativeEvent;
    return t.getModifierState ? t.getModifierState(e) : (e = EX[e]) ? !!t[e] : !1
}
function Fx() {
    return bX
}
var _X = un({}, Rp, {
    key: function(e) {
        if (e.key) {
            var t = yX[e.key] || e.key;
            if (t !== "Unidentified")
                return t
        }
        return e.type === "keypress" ? (e = X0(e),
        e === 13 ? "Enter" : String.fromCharCode(e)) : e.type === "keydown" || e.type === "keyup" ? wX[e.keyCode] || "Unidentified" : ""
    },
    code: 0,
    location: 0,
    ctrlKey: 0,
    shiftKey: 0,
    altKey: 0,
    metaKey: 0,
    repeat: 0,
    locale: 0,
    getModifierState: Fx,
    charCode: function(e) {
        return e.type === "keypress" ? X0(e) : 0
    },
    keyCode: function(e) {
        return e.type === "keydown" || e.type === "keyup" ? e.keyCode : 0
    },
    which: function(e) {
        return e.type === "keypress" ? X0(e) : e.type === "keydown" || e.type === "keyup" ? e.keyCode : 0
    }
})
  , xX = Fi(_X)
  , SX = un({}, fv, {
    pointerId: 0,
    width: 0,
    height: 0,
    pressure: 0,
    tangentialPressure: 0,
    tiltX: 0,
    tiltY: 0,
    twist: 0,
    pointerType: 0,
    isPrimary: 0
})
  , CC = Fi(SX)
  , IX = un({}, Rp, {
    touches: 0,
    targetTouches: 0,
    changedTouches: 0,
    altKey: 0,
    metaKey: 0,
    ctrlKey: 0,
    shiftKey: 0,
    getModifierState: Fx
})
  , CX = Fi(IX)
  , kX = un({}, Tf, {
    propertyName: 0,
    elapsedTime: 0,
    pseudoElement: 0
})
  , TX = Fi(kX)
  , AX = un({}, fv, {
    deltaX: function(e) {
        return "deltaX"in e ? e.deltaX : "wheelDeltaX"in e ? -e.wheelDeltaX : 0
    },
    deltaY: function(e) {
        return "deltaY"in e ? e.deltaY : "wheelDeltaY"in e ? -e.wheelDeltaY : "wheelDelta"in e ? -e.wheelDelta : 0
    },
    deltaZ: 0,
    deltaMode: 0
})
  , MX = Fi(AX)
  , LX = [9, 13, 27, 32]
  , Bx = ya && "CompositionEvent"in window
  , sg = null;
ya && "documentMode"in document && (sg = document.documentMode);
var PX = ya && "TextEvent"in window && !sg
  , dL = ya && (!Bx || sg && 8 < sg && 11 >= sg)
  , kC = " "
  , TC = !1;
function fL(e, t) {
    switch (e) {
    case "keyup":
        return LX.indexOf(t.keyCode) !== -1;
    case "keydown":
        return t.keyCode !== 229;
    case "keypress":
    case "mousedown":
    case "focusout":
        return !0;
    default:
        return !1
    }
}
function hL(e) {
    return e = e.detail,
    typeof e == "object" && "data"in e ? e.data : null
}
var wd = !1;
function RX(e, t) {
    switch (e) {
    case "compositionend":
        return hL(t);
    case "keypress":
        return t.which !== 32 ? null : (TC = !0,
        kC);
    case "textInput":
        return e = t.data,
        e === kC && TC ? null : e;
    default:
        return null
    }
}
function DX(e, t) {
    if (wd)
        return e === "compositionend" || !Bx && fL(e, t) ? (e = uL(),
        K0 = Ox = hl = null,
        wd = !1,
        e) : null;
    switch (e) {
    case "paste":
        return null;
    case "keypress":
        if (!(t.ctrlKey || t.altKey || t.metaKey) || t.ctrlKey && t.altKey) {
            if (t.char && 1 < t.char.length)
                return t.char;
            if (t.which)
                return String.fromCharCode(t.which)
        }
        return null;
    case "compositionend":
        return dL && t.locale !== "ko" ? null : t.data;
    default:
        return null
    }
}
var OX = {
    color: !0,
    date: !0,
    datetime: !0,
    "datetime-local": !0,
    email: !0,
    month: !0,
    number: !0,
    password: !0,
    range: !0,
    search: !0,
    tel: !0,
    text: !0,
    time: !0,
    url: !0,
    week: !0
};
function AC(e) {
    var t = e && e.nodeName && e.nodeName.toLowerCase();
    return t === "input" ? !!OX[e.type] : t === "textarea"
}
function gL(e, t, n, r) {
    V7(r),
    t = Fm(t, "onChange"),
    0 < t.length && (n = new Nx("onChange","change",null,n,r),
    e.push({
        event: n,
        listeners: t
    }))
}
var ag = null
  , $g = null;
function NX(e) {
    IL(e, 0)
}
function hv(e) {
    var t = _d(e);
    if (B7(t))
        return e
}
function FX(e, t) {
    if (e === "change")
        return t
}
var pL = !1;
if (ya) {
    var aE;
    if (ya) {
        var lE = "oninput"in document;
        if (!lE) {
            var MC = document.createElement("div");
            MC.setAttribute("oninput", "return;"),
            lE = typeof MC.oninput == "function"
        }
        aE = lE
    } else
        aE = !1;
    pL = aE && (!document.documentMode || 9 < document.documentMode)
}
function LC() {
    ag && (ag.detachEvent("onpropertychange", mL),
    $g = ag = null)
}
function mL(e) {
    if (e.propertyName === "value" && hv($g)) {
        var t = [];
        gL(t, $g, e, Mx(e)),
        X7(NX, t)
    }
}
function BX(e, t, n) {
    e === "focusin" ? (LC(),
    ag = t,
    $g = n,
    ag.attachEvent("onpropertychange", mL)) : e === "focusout" && LC()
}
function zX(e) {
    if (e === "selectionchange" || e === "keyup" || e === "keydown")
        return hv($g)
}
function $X(e, t) {
    if (e === "click")
        return hv(t)
}
function UX(e, t) {
    if (e === "input" || e === "change")
        return hv(t)
}
function HX(e, t) {
    return e === t && (e !== 0 || 1 / e === 1 / t) || e !== e && t !== t
}
var Vo = typeof Object.is == "function" ? Object.is : HX;
function Ug(e, t) {
    if (Vo(e, t))
        return !0;
    if (typeof e != "object" || e === null || typeof t != "object" || t === null)
        return !1;
    var n = Object.keys(e)
      , r = Object.keys(t);
    if (n.length !== r.length)
        return !1;
    for (r = 0; r < n.length; r++) {
        var i = n[r];
        if (!Wb.call(t, i) || !Vo(e[i], t[i]))
            return !1
    }
    return !0
}
function PC(e) {
    for (; e && e.firstChild; )
        e = e.firstChild;
    return e
}
function RC(e, t) {
    var n = PC(e);
    e = 0;
    for (var r; n; ) {
        if (n.nodeType === 3) {
            if (r = e + n.textContent.length,
            e <= t && r >= t)
                return {
                    node: n,
                    offset: t - e
                };
            e = r
        }
        e: {
            for (; n; ) {
                if (n.nextSibling) {
                    n = n.nextSibling;
                    break e
                }
                n = n.parentNode
            }
            n = void 0
        }
        n = PC(n)
    }
}
function vL(e, t) {
    return e && t ? e === t ? !0 : e && e.nodeType === 3 ? !1 : t && t.nodeType === 3 ? vL(e, t.parentNode) : "contains"in e ? e.contains(t) : e.compareDocumentPosition ? !!(e.compareDocumentPosition(t) & 16) : !1 : !1
}
function yL() {
    for (var e = window, t = Mm(); t instanceof e.HTMLIFrameElement; ) {
        try {
            var n = typeof t.contentWindow.location.href == "string"
        } catch {
            n = !1
        }
        if (n)
            e = t.contentWindow;
        else
            break;
        t = Mm(e.document)
    }
    return t
}
function zx(e) {
    var t = e && e.nodeName && e.nodeName.toLowerCase();
    return t && (t === "input" && (e.type === "text" || e.type === "search" || e.type === "tel" || e.type === "url" || e.type === "password") || t === "textarea" || e.contentEditable === "true")
}
function WX(e) {
    var t = yL()
      , n = e.focusedElem
      , r = e.selectionRange;
    if (t !== n && n && n.ownerDocument && vL(n.ownerDocument.documentElement, n)) {
        if (r !== null && zx(n)) {
            if (t = r.start,
            e = r.end,
            e === void 0 && (e = t),
            "selectionStart"in n)
                n.selectionStart = t,
                n.selectionEnd = Math.min(e, n.value.length);
            else if (e = (t = n.ownerDocument || document) && t.defaultView || window,
            e.getSelection) {
                e = e.getSelection();
                var i = n.textContent.length
                  , o = Math.min(r.start, i);
                r = r.end === void 0 ? o : Math.min(r.end, i),
                !e.extend && o > r && (i = r,
                r = o,
                o = i),
                i = RC(n, o);
                var s = RC(n, r);
                i && s && (e.rangeCount !== 1 || e.anchorNode !== i.node || e.anchorOffset !== i.offset || e.focusNode !== s.node || e.focusOffset !== s.offset) && (t = t.createRange(),
                t.setStart(i.node, i.offset),
                e.removeAllRanges(),
                o > r ? (e.addRange(t),
                e.extend(s.node, s.offset)) : (t.setEnd(s.node, s.offset),
                e.addRange(t)))
            }
        }
        for (t = [],
        e = n; e = e.parentNode; )
            e.nodeType === 1 && t.push({
                element: e,
                left: e.scrollLeft,
                top: e.scrollTop
            });
        for (typeof n.focus == "function" && n.focus(),
        n = 0; n < t.length; n++)
            e = t[n],
            e.element.scrollLeft = e.left,
            e.element.scrollTop = e.top
    }
}
var GX = ya && "documentMode"in document && 11 >= document.documentMode
  , Ed = null
  , l3 = null
  , lg = null
  , c3 = !1;
function DC(e, t, n) {
    var r = n.window === n ? n.document : n.nodeType === 9 ? n : n.ownerDocument;
    c3 || Ed == null || Ed !== Mm(r) || (r = Ed,
    "selectionStart"in r && zx(r) ? r = {
        start: r.selectionStart,
        end: r.selectionEnd
    } : (r = (r.ownerDocument && r.ownerDocument.defaultView || window).getSelection(),
    r = {
        anchorNode: r.anchorNode,
        anchorOffset: r.anchorOffset,
        focusNode: r.focusNode,
        focusOffset: r.focusOffset
    }),
    lg && Ug(lg, r) || (lg = r,
    r = Fm(l3, "onSelect"),
    0 < r.length && (t = new Nx("onSelect","select",null,t,n),
    e.push({
        event: t,
        listeners: r
    }),
    t.target = Ed)))
}
function n0(e, t) {
    var n = {};
    return n[e.toLowerCase()] = t.toLowerCase(),
    n["Webkit" + e] = "webkit" + t,
    n["Moz" + e] = "moz" + t,
    n
}
var bd = {
    animationend: n0("Animation", "AnimationEnd"),
    animationiteration: n0("Animation", "AnimationIteration"),
    animationstart: n0("Animation", "AnimationStart"),
    transitionend: n0("Transition", "TransitionEnd")
}
  , cE = {}
  , wL = {};
ya && (wL = document.createElement("div").style,
"AnimationEvent"in window || (delete bd.animationend.animation,
delete bd.animationiteration.animation,
delete bd.animationstart.animation),
"TransitionEvent"in window || delete bd.transitionend.transition);
function gv(e) {
    if (cE[e])
        return cE[e];
    if (!bd[e])
        return e;
    var t = bd[e], n;
    for (n in t)
        if (t.hasOwnProperty(n) && n in wL)
            return cE[e] = t[n];
    return e
}
var EL = gv("animationend")
  , bL = gv("animationiteration")
  , _L = gv("animationstart")
  , xL = gv("transitionend")
  , SL = new Map
  , OC = "abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");
function ql(e, t) {
    SL.set(e, t),
    Iu(t, [e])
}
for (var uE = 0; uE < OC.length; uE++) {
    var dE = OC[uE]
      , VX = dE.toLowerCase()
      , YX = dE[0].toUpperCase() + dE.slice(1);
    ql(VX, "on" + YX)
}
ql(EL, "onAnimationEnd");
ql(bL, "onAnimationIteration");
ql(_L, "onAnimationStart");
ql("dblclick", "onDoubleClick");
ql("focusin", "onFocus");
ql("focusout", "onBlur");
ql(xL, "onTransitionEnd");
ef("onMouseEnter", ["mouseout", "mouseover"]);
ef("onMouseLeave", ["mouseout", "mouseover"]);
ef("onPointerEnter", ["pointerout", "pointerover"]);
ef("onPointerLeave", ["pointerout", "pointerover"]);
Iu("onChange", "change click focusin focusout input keydown keyup selectionchange".split(" "));
Iu("onSelect", "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));
Iu("onBeforeInput", ["compositionend", "keypress", "textInput", "paste"]);
Iu("onCompositionEnd", "compositionend focusout keydown keypress keyup mousedown".split(" "));
Iu("onCompositionStart", "compositionstart focusout keydown keypress keyup mousedown".split(" "));
Iu("onCompositionUpdate", "compositionupdate focusout keydown keypress keyup mousedown".split(" "));
var Gh = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" ")
  , jX = new Set("cancel close invalid load scroll toggle".split(" ").concat(Gh));
function NC(e, t, n) {
    var r = e.type || "unknown-event";
    e.currentTarget = n,
    VK(r, t, void 0, e),
    e.currentTarget = null
}
function IL(e, t) {
    t = (t & 4) !== 0;
    for (var n = 0; n < e.length; n++) {
        var r = e[n]
          , i = r.event;
        r = r.listeners;
        e: {
            var o = void 0;
            if (t)
                for (var s = r.length - 1; 0 <= s; s--) {
                    var a = r[s]
                      , l = a.instance
                      , c = a.currentTarget;
                    if (a = a.listener,
                    l !== o && i.isPropagationStopped())
                        break e;
                    NC(i, a, c),
                    o = l
                }
            else
                for (s = 0; s < r.length; s++) {
                    if (a = r[s],
                    l = a.instance,
                    c = a.currentTarget,
                    a = a.listener,
                    l !== o && i.isPropagationStopped())
                        break e;
                    NC(i, a, c),
                    o = l
                }
        }
    }
    if (Pm)
        throw e = i3,
        Pm = !1,
        i3 = null,
        e
}
function Kt(e, t) {
    var n = t[g3];
    n === void 0 && (n = t[g3] = new Set);
    var r = e + "__bubble";
    n.has(r) || (CL(t, e, 2, !1),
    n.add(r))
}
function fE(e, t, n) {
    var r = 0;
    t && (r |= 4),
    CL(n, e, r, t)
}
var r0 = "_reactListening" + Math.random().toString(36).slice(2);
function Hg(e) {
    if (!e[r0]) {
        e[r0] = !0,
        R7.forEach(function(n) {
            n !== "selectionchange" && (jX.has(n) || fE(n, !1, e),
            fE(n, !0, e))
        });
        var t = e.nodeType === 9 ? e : e.ownerDocument;
        t === null || t[r0] || (t[r0] = !0,
        fE("selectionchange", !1, t))
    }
}
function CL(e, t, n, r) {
    switch (cL(t)) {
    case 1:
        var i = aX;
        break;
    case 4:
        i = lX;
        break;
    default:
        i = Dx
    }
    n = i.bind(null, t, n, e),
    i = void 0,
    !r3 || t !== "touchstart" && t !== "touchmove" && t !== "wheel" || (i = !0),
    r ? i !== void 0 ? e.addEventListener(t, n, {
        capture: !0,
        passive: i
    }) : e.addEventListener(t, n, !0) : i !== void 0 ? e.addEventListener(t, n, {
        passive: i
    }) : e.addEventListener(t, n, !1)
}
function hE(e, t, n, r, i) {
    var o = r;
    if (!(t & 1) && !(t & 2) && r !== null)
        e: for (; ; ) {
            if (r === null)
                return;
            var s = r.tag;
            if (s === 3 || s === 4) {
                var a = r.stateNode.containerInfo;
                if (a === i || a.nodeType === 8 && a.parentNode === i)
                    break;
                if (s === 4)
                    for (s = r.return; s !== null; ) {
                        var l = s.tag;
                        if ((l === 3 || l === 4) && (l = s.stateNode.containerInfo,
                        l === i || l.nodeType === 8 && l.parentNode === i))
                            return;
                        s = s.return
                    }
                for (; a !== null; ) {
                    if (s = Rc(a),
                    s === null)
                        return;
                    if (l = s.tag,
                    l === 5 || l === 6) {
                        r = o = s;
                        continue e
                    }
                    a = a.parentNode
                }
            }
            r = r.return
        }
    X7(function() {
        var c = o
          , u = Mx(n)
          , f = [];
        e: {
            var h = SL.get(e);
            if (h !== void 0) {
                var m = Nx
                  , v = e;
                switch (e) {
                case "keypress":
                    if (X0(n) === 0)
                        break e;
                case "keydown":
                case "keyup":
                    m = xX;
                    break;
                case "focusin":
                    v = "focus",
                    m = sE;
                    break;
                case "focusout":
                    v = "blur",
                    m = sE;
                    break;
                case "beforeblur":
                case "afterblur":
                    m = sE;
                    break;
                case "click":
                    if (n.button === 2)
                        break e;
                case "auxclick":
                case "dblclick":
                case "mousedown":
                case "mousemove":
                case "mouseup":
                case "mouseout":
                case "mouseover":
                case "contextmenu":
                    m = SC;
                    break;
                case "drag":
                case "dragend":
                case "dragenter":
                case "dragexit":
                case "dragleave":
                case "dragover":
                case "dragstart":
                case "drop":
                    m = dX;
                    break;
                case "touchcancel":
                case "touchend":
                case "touchmove":
                case "touchstart":
                    m = CX;
                    break;
                case EL:
                case bL:
                case _L:
                    m = gX;
                    break;
                case xL:
                    m = TX;
                    break;
                case "scroll":
                    m = cX;
                    break;
                case "wheel":
                    m = MX;
                    break;
                case "copy":
                case "cut":
                case "paste":
                    m = mX;
                    break;
                case "gotpointercapture":
                case "lostpointercapture":
                case "pointercancel":
                case "pointerdown":
                case "pointermove":
                case "pointerout":
                case "pointerover":
                case "pointerup":
                    m = CC
                }
                var y = (t & 4) !== 0
                  , E = !y && e === "scroll"
                  , b = y ? h !== null ? h + "Capture" : null : h;
                y = [];
                for (var _ = c, x; _ !== null; ) {
                    x = _;
                    var C = x.stateNode;
                    if (x.tag === 5 && C !== null && (x = C,
                    b !== null && (C = Ng(_, b),
                    C != null && y.push(Wg(_, C, x)))),
                    E)
                        break;
                    _ = _.return
                }
                0 < y.length && (h = new m(h,v,null,n,u),
                f.push({
                    event: h,
                    listeners: y
                }))
            }
        }
        if (!(t & 7)) {
            e: {
                if (h = e === "mouseover" || e === "pointerover",
                m = e === "mouseout" || e === "pointerout",
                h && n !== t3 && (v = n.relatedTarget || n.fromElement) && (Rc(v) || v[wa]))
                    break e;
                if ((m || h) && (h = u.window === u ? u : (h = u.ownerDocument) ? h.defaultView || h.parentWindow : window,
                m ? (v = n.relatedTarget || n.toElement,
                m = c,
                v = v ? Rc(v) : null,
                v !== null && (E = Cu(v),
                v !== E || v.tag !== 5 && v.tag !== 6) && (v = null)) : (m = null,
                v = c),
                m !== v)) {
                    if (y = SC,
                    C = "onMouseLeave",
                    b = "onMouseEnter",
                    _ = "mouse",
                    (e === "pointerout" || e === "pointerover") && (y = CC,
                    C = "onPointerLeave",
                    b = "onPointerEnter",
                    _ = "pointer"),
                    E = m == null ? h : _d(m),
                    x = v == null ? h : _d(v),
                    h = new y(C,_ + "leave",m,n,u),
                    h.target = E,
                    h.relatedTarget = x,
                    C = null,
                    Rc(u) === c && (y = new y(b,_ + "enter",v,n,u),
                    y.target = x,
                    y.relatedTarget = E,
                    C = y),
                    E = C,
                    m && v)
                        t: {
                            for (y = m,
                            b = v,
                            _ = 0,
                            x = y; x; x = Qu(x))
                                _++;
                            for (x = 0,
                            C = b; C; C = Qu(C))
                                x++;
                            for (; 0 < _ - x; )
                                y = Qu(y),
                                _--;
                            for (; 0 < x - _; )
                                b = Qu(b),
                                x--;
                            for (; _--; ) {
                                if (y === b || b !== null && y === b.alternate)
                                    break t;
                                y = Qu(y),
                                b = Qu(b)
                            }
                            y = null
                        }
                    else
                        y = null;
                    m !== null && FC(f, h, m, y, !1),
                    v !== null && E !== null && FC(f, E, v, y, !0)
                }
            }
            e: {
                if (h = c ? _d(c) : window,
                m = h.nodeName && h.nodeName.toLowerCase(),
                m === "select" || m === "input" && h.type === "file")
                    var P = FX;
                else if (AC(h))
                    if (pL)
                        P = UX;
                    else {
                        P = zX;
                        var M = BX
                    }
                else
                    (m = h.nodeName) && m.toLowerCase() === "input" && (h.type === "checkbox" || h.type === "radio") && (P = $X);
                if (P && (P = P(e, c))) {
                    gL(f, P, n, u);
                    break e
                }
                M && M(e, h, c),
                e === "focusout" && (M = h._wrapperState) && M.controlled && h.type === "number" && Zb(h, "number", h.value)
            }
            switch (M = c ? _d(c) : window,
            e) {
            case "focusin":
                (AC(M) || M.contentEditable === "true") && (Ed = M,
                l3 = c,
                lg = null);
                break;
            case "focusout":
                lg = l3 = Ed = null;
                break;
            case "mousedown":
                c3 = !0;
                break;
            case "contextmenu":
            case "mouseup":
            case "dragend":
                c3 = !1,
                DC(f, n, u);
                break;
            case "selectionchange":
                if (GX)
                    break;
            case "keydown":
            case "keyup":
                DC(f, n, u)
            }
            var A;
            if (Bx)
                e: {
                    switch (e) {
                    case "compositionstart":
                        var I = "onCompositionStart";
                        break e;
                    case "compositionend":
                        I = "onCompositionEnd";
                        break e;
                    case "compositionupdate":
                        I = "onCompositionUpdate";
                        break e
                    }
                    I = void 0
                }
            else
                wd ? fL(e, n) && (I = "onCompositionEnd") : e === "keydown" && n.keyCode === 229 && (I = "onCompositionStart");
            I && (dL && n.locale !== "ko" && (wd || I !== "onCompositionStart" ? I === "onCompositionEnd" && wd && (A = uL()) : (hl = u,
            Ox = "value"in hl ? hl.value : hl.textContent,
            wd = !0)),
            M = Fm(c, I),
            0 < M.length && (I = new IC(I,e,null,n,u),
            f.push({
                event: I,
                listeners: M
            }),
            A ? I.data = A : (A = hL(n),
            A !== null && (I.data = A)))),
            (A = PX ? RX(e, n) : DX(e, n)) && (c = Fm(c, "onBeforeInput"),
            0 < c.length && (u = new IC("onBeforeInput","beforeinput",null,n,u),
            f.push({
                event: u,
                listeners: c
            }),
            u.data = A))
        }
        IL(f, t)
    })
}
function Wg(e, t, n) {
    return {
        instance: e,
        listener: t,
        currentTarget: n
    }
}
function Fm(e, t) {
    for (var n = t + "Capture", r = []; e !== null; ) {
        var i = e
          , o = i.stateNode;
        i.tag === 5 && o !== null && (i = o,
        o = Ng(e, n),
        o != null && r.unshift(Wg(e, o, i)),
        o = Ng(e, t),
        o != null && r.push(Wg(e, o, i))),
        e = e.return
    }
    return r
}
function Qu(e) {
    if (e === null)
        return null;
    do
        e = e.return;
    while (e && e.tag !== 5);
    return e || null
}
function FC(e, t, n, r, i) {
    for (var o = t._reactName, s = []; n !== null && n !== r; ) {
        var a = n
          , l = a.alternate
          , c = a.stateNode;
        if (l !== null && l === r)
            break;
        a.tag === 5 && c !== null && (a = c,
        i ? (l = Ng(n, o),
        l != null && s.unshift(Wg(n, l, a))) : i || (l = Ng(n, o),
        l != null && s.push(Wg(n, l, a)))),
        n = n.return
    }
    s.length !== 0 && e.push({
        event: t,
        listeners: s
    })
}
var KX = /\r\n?/g
  , XX = /\u0000|\uFFFD/g;
function BC(e) {
    return (typeof e == "string" ? e : "" + e).replace(KX, `
`).replace(XX, "")
}
function i0(e, t, n) {
    if (t = BC(t),
    BC(e) !== t && n)
        throw Error(me(425))
}
function Bm() {}
var u3 = null
  , d3 = null;
function f3(e, t) {
    return e === "textarea" || e === "noscript" || typeof t.children == "string" || typeof t.children == "number" || typeof t.dangerouslySetInnerHTML == "object" && t.dangerouslySetInnerHTML !== null && t.dangerouslySetInnerHTML.__html != null
}
var h3 = typeof setTimeout == "function" ? setTimeout : void 0
  , ZX = typeof clearTimeout == "function" ? clearTimeout : void 0
  , zC = typeof Promise == "function" ? Promise : void 0
  , qX = typeof queueMicrotask == "function" ? queueMicrotask : typeof zC < "u" ? function(e) {
    return zC.resolve(null).then(e).catch(QX)
}
: h3;
function QX(e) {
    setTimeout(function() {
        throw e
    })
}
function gE(e, t) {
    var n = t
      , r = 0;
    do {
        var i = n.nextSibling;
        if (e.removeChild(n),
        i && i.nodeType === 8)
            if (n = i.data,
            n === "/$") {
                if (r === 0) {
                    e.removeChild(i),
                    zg(t);
                    return
                }
                r--
            } else
                n !== "$" && n !== "$?" && n !== "$!" || r++;
        n = i
    } while (n);
    zg(t)
}
function Cl(e) {
    for (; e != null; e = e.nextSibling) {
        var t = e.nodeType;
        if (t === 1 || t === 3)
            break;
        if (t === 8) {
            if (t = e.data,
            t === "$" || t === "$!" || t === "$?")
                break;
            if (t === "/$")
                return null
        }
    }
    return e
}
function $C(e) {
    e = e.previousSibling;
    for (var t = 0; e; ) {
        if (e.nodeType === 8) {
            var n = e.data;
            if (n === "$" || n === "$!" || n === "$?") {
                if (t === 0)
                    return e;
                t--
            } else
                n === "/$" && t++
        }
        e = e.previousSibling
    }
    return null
}
var Af = Math.random().toString(36).slice(2)
  , ps = "__reactFiber$" + Af
  , Gg = "__reactProps$" + Af
  , wa = "__reactContainer$" + Af
  , g3 = "__reactEvents$" + Af
  , JX = "__reactListeners$" + Af
  , eZ = "__reactHandles$" + Af;
function Rc(e) {
    var t = e[ps];
    if (t)
        return t;
    for (var n = e.parentNode; n; ) {
        if (t = n[wa] || n[ps]) {
            if (n = t.alternate,
            t.child !== null || n !== null && n.child !== null)
                for (e = $C(e); e !== null; ) {
                    if (n = e[ps])
                        return n;
                    e = $C(e)
                }
            return t
        }
        e = n,
        n = e.parentNode
    }
    return null
}
function Dp(e) {
    return e = e[ps] || e[wa],
    !e || e.tag !== 5 && e.tag !== 6 && e.tag !== 13 && e.tag !== 3 ? null : e
}
function _d(e) {
    if (e.tag === 5 || e.tag === 6)
        return e.stateNode;
    throw Error(me(33))
}
function pv(e) {
    return e[Gg] || null
}
var p3 = []
  , xd = -1;
function Ql(e) {
    return {
        current: e
    }
}
function qt(e) {
    0 > xd || (e.current = p3[xd],
    p3[xd] = null,
    xd--)
}
function Vt(e, t) {
    xd++,
    p3[xd] = e.current,
    e.current = t
}
var $l = {}
  , Cr = Ql($l)
  , ui = Ql(!1)
  , nu = $l;
function tf(e, t) {
    var n = e.type.contextTypes;
    if (!n)
        return $l;
    var r = e.stateNode;
    if (r && r.__reactInternalMemoizedUnmaskedChildContext === t)
        return r.__reactInternalMemoizedMaskedChildContext;
    var i = {}, o;
    for (o in n)
        i[o] = t[o];
    return r && (e = e.stateNode,
    e.__reactInternalMemoizedUnmaskedChildContext = t,
    e.__reactInternalMemoizedMaskedChildContext = i),
    i
}
function di(e) {
    return e = e.childContextTypes,
    e != null
}
function zm() {
    qt(ui),
    qt(Cr)
}
function UC(e, t, n) {
    if (Cr.current !== $l)
        throw Error(me(168));
    Vt(Cr, t),
    Vt(ui, n)
}
function kL(e, t, n) {
    var r = e.stateNode;
    if (t = t.childContextTypes,
    typeof r.getChildContext != "function")
        return n;
    r = r.getChildContext();
    for (var i in r)
        if (!(i in t))
            throw Error(me(108, BK(e) || "Unknown", i));
    return un({}, n, r)
}
function $m(e) {
    return e = (e = e.stateNode) && e.__reactInternalMemoizedMergedChildContext || $l,
    nu = Cr.current,
    Vt(Cr, e),
    Vt(ui, ui.current),
    !0
}
function HC(e, t, n) {
    var r = e.stateNode;
    if (!r)
        throw Error(me(169));
    n ? (e = kL(e, t, nu),
    r.__reactInternalMemoizedMergedChildContext = e,
    qt(ui),
    qt(Cr),
    Vt(Cr, e)) : qt(ui),
    Vt(ui, n)
}
var ta = null
  , mv = !1
  , pE = !1;
function TL(e) {
    ta === null ? ta = [e] : ta.push(e)
}
function tZ(e) {
    mv = !0,
    TL(e)
}
function Jl() {
    if (!pE && ta !== null) {
        pE = !0;
        var e = 0
          , t = Pt;
        try {
            var n = ta;
            for (Pt = 1; e < n.length; e++) {
                var r = n[e];
                do
                    r = r(!0);
                while (r !== null)
            }
            ta = null,
            mv = !1
        } catch (i) {
            throw ta !== null && (ta = ta.slice(e + 1)),
            J7(Lx, Jl),
            i
        } finally {
            Pt = t,
            pE = !1
        }
    }
    return null
}
var Sd = []
  , Id = 0
  , Um = null
  , Hm = 0
  , Qi = []
  , Ji = 0
  , ru = null
  , aa = 1
  , la = "";
function vc(e, t) {
    Sd[Id++] = Hm,
    Sd[Id++] = Um,
    Um = e,
    Hm = t
}
function AL(e, t, n) {
    Qi[Ji++] = aa,
    Qi[Ji++] = la,
    Qi[Ji++] = ru,
    ru = e;
    var r = aa;
    e = la;
    var i = 32 - zo(r) - 1;
    r &= ~(1 << i),
    n += 1;
    var o = 32 - zo(t) + i;
    if (30 < o) {
        var s = i - i % 5;
        o = (r & (1 << s) - 1).toString(32),
        r >>= s,
        i -= s,
        aa = 1 << 32 - zo(t) + i | n << i | r,
        la = o + e
    } else
        aa = 1 << o | n << i | r,
        la = e
}
function $x(e) {
    e.return !== null && (vc(e, 1),
    AL(e, 1, 0))
}
function Ux(e) {
    for (; e === Um; )
        Um = Sd[--Id],
        Sd[Id] = null,
        Hm = Sd[--Id],
        Sd[Id] = null;
    for (; e === ru; )
        ru = Qi[--Ji],
        Qi[Ji] = null,
        la = Qi[--Ji],
        Qi[Ji] = null,
        aa = Qi[--Ji],
        Qi[Ji] = null
}
var Li = null
  , Ti = null
  , nn = !1
  , Oo = null;
function ML(e, t) {
    var n = to(5, null, null, 0);
    n.elementType = "DELETED",
    n.stateNode = t,
    n.return = e,
    t = e.deletions,
    t === null ? (e.deletions = [n],
    e.flags |= 16) : t.push(n)
}
function WC(e, t) {
    switch (e.tag) {
    case 5:
        var n = e.type;
        return t = t.nodeType !== 1 || n.toLowerCase() !== t.nodeName.toLowerCase() ? null : t,
        t !== null ? (e.stateNode = t,
        Li = e,
        Ti = Cl(t.firstChild),
        !0) : !1;
    case 6:
        return t = e.pendingProps === "" || t.nodeType !== 3 ? null : t,
        t !== null ? (e.stateNode = t,
        Li = e,
        Ti = null,
        !0) : !1;
    case 13:
        return t = t.nodeType !== 8 ? null : t,
        t !== null ? (n = ru !== null ? {
            id: aa,
            overflow: la
        } : null,
        e.memoizedState = {
            dehydrated: t,
            treeContext: n,
            retryLane: 1073741824
        },
        n = to(18, null, null, 0),
        n.stateNode = t,
        n.return = e,
        e.child = n,
        Li = e,
        Ti = null,
        !0) : !1;
    default:
        return !1
    }
}
function m3(e) {
    return (e.mode & 1) !== 0 && (e.flags & 128) === 0
}
function v3(e) {
    if (nn) {
        var t = Ti;
        if (t) {
            var n = t;
            if (!WC(e, t)) {
                if (m3(e))
                    throw Error(me(418));
                t = Cl(n.nextSibling);
                var r = Li;
                t && WC(e, t) ? ML(r, n) : (e.flags = e.flags & -4097 | 2,
                nn = !1,
                Li = e)
            }
        } else {
            if (m3(e))
                throw Error(me(418));
            e.flags = e.flags & -4097 | 2,
            nn = !1,
            Li = e
        }
    }
}
function GC(e) {
    for (e = e.return; e !== null && e.tag !== 5 && e.tag !== 3 && e.tag !== 13; )
        e = e.return;
    Li = e
}
function o0(e) {
    if (e !== Li)
        return !1;
    if (!nn)
        return GC(e),
        nn = !0,
        !1;
    var t;
    if ((t = e.tag !== 3) && !(t = e.tag !== 5) && (t = e.type,
    t = t !== "head" && t !== "body" && !f3(e.type, e.memoizedProps)),
    t && (t = Ti)) {
        if (m3(e))
            throw LL(),
            Error(me(418));
        for (; t; )
            ML(e, t),
            t = Cl(t.nextSibling)
    }
    if (GC(e),
    e.tag === 13) {
        if (e = e.memoizedState,
        e = e !== null ? e.dehydrated : null,
        !e)
            throw Error(me(317));
        e: {
            for (e = e.nextSibling,
            t = 0; e; ) {
                if (e.nodeType === 8) {
                    var n = e.data;
                    if (n === "/$") {
                        if (t === 0) {
                            Ti = Cl(e.nextSibling);
                            break e
                        }
                        t--
                    } else
                        n !== "$" && n !== "$!" && n !== "$?" || t++
                }
                e = e.nextSibling
            }
            Ti = null
        }
    } else
        Ti = Li ? Cl(e.stateNode.nextSibling) : null;
    return !0
}
function LL() {
    for (var e = Ti; e; )
        e = Cl(e.nextSibling)
}
function nf() {
    Ti = Li = null,
    nn = !1
}
function Hx(e) {
    Oo === null ? Oo = [e] : Oo.push(e)
}
var nZ = Pa.ReactCurrentBatchConfig;
function Lo(e, t) {
    if (e && e.defaultProps) {
        t = un({}, t),
        e = e.defaultProps;
        for (var n in e)
            t[n] === void 0 && (t[n] = e[n]);
        return t
    }
    return t
}
var Wm = Ql(null)
  , Gm = null
  , Cd = null
  , Wx = null;
function Gx() {
    Wx = Cd = Gm = null
}
function Vx(e) {
    var t = Wm.current;
    qt(Wm),
    e._currentValue = t
}
function y3(e, t, n) {
    for (; e !== null; ) {
        var r = e.alternate;
        if ((e.childLanes & t) !== t ? (e.childLanes |= t,
        r !== null && (r.childLanes |= t)) : r !== null && (r.childLanes & t) !== t && (r.childLanes |= t),
        e === n)
            break;
        e = e.return
    }
}
function Wd(e, t) {
    Gm = e,
    Wx = Cd = null,
    e = e.dependencies,
    e !== null && e.firstContext !== null && (e.lanes & t && (oi = !0),
    e.firstContext = null)
}
function uo(e) {
    var t = e._currentValue;
    if (Wx !== e)
        if (e = {
            context: e,
            memoizedValue: t,
            next: null
        },
        Cd === null) {
            if (Gm === null)
                throw Error(me(308));
            Cd = e,
            Gm.dependencies = {
                lanes: 0,
                firstContext: e
            }
        } else
            Cd = Cd.next = e;
    return t
}
var Dc = null;
function Yx(e) {
    Dc === null ? Dc = [e] : Dc.push(e)
}
function PL(e, t, n, r) {
    var i = t.interleaved;
    return i === null ? (n.next = n,
    Yx(t)) : (n.next = i.next,
    i.next = n),
    t.interleaved = n,
    Ea(e, r)
}
function Ea(e, t) {
    e.lanes |= t;
    var n = e.alternate;
    for (n !== null && (n.lanes |= t),
    n = e,
    e = e.return; e !== null; )
        e.childLanes |= t,
        n = e.alternate,
        n !== null && (n.childLanes |= t),
        n = e,
        e = e.return;
    return n.tag === 3 ? n.stateNode : null
}
var nl = !1;
function jx(e) {
    e.updateQueue = {
        baseState: e.memoizedState,
        firstBaseUpdate: null,
        lastBaseUpdate: null,
        shared: {
            pending: null,
            interleaved: null,
            lanes: 0
        },
        effects: null
    }
}
function RL(e, t) {
    e = e.updateQueue,
    t.updateQueue === e && (t.updateQueue = {
        baseState: e.baseState,
        firstBaseUpdate: e.firstBaseUpdate,
        lastBaseUpdate: e.lastBaseUpdate,
        shared: e.shared,
        effects: e.effects
    })
}
function da(e, t) {
    return {
        eventTime: e,
        lane: t,
        tag: 0,
        payload: null,
        callback: null,
        next: null
    }
}
function kl(e, t, n) {
    var r = e.updateQueue;
    if (r === null)
        return null;
    if (r = r.shared,
    yt & 2) {
        var i = r.pending;
        return i === null ? t.next = t : (t.next = i.next,
        i.next = t),
        r.pending = t,
        Ea(e, n)
    }
    return i = r.interleaved,
    i === null ? (t.next = t,
    Yx(r)) : (t.next = i.next,
    i.next = t),
    r.interleaved = t,
    Ea(e, n)
}
function Z0(e, t, n) {
    if (t = t.updateQueue,
    t !== null && (t = t.shared,
    (n & 4194240) !== 0)) {
        var r = t.lanes;
        r &= e.pendingLanes,
        n |= r,
        t.lanes = n,
        Px(e, n)
    }
}
function VC(e, t) {
    var n = e.updateQueue
      , r = e.alternate;
    if (r !== null && (r = r.updateQueue,
    n === r)) {
        var i = null
          , o = null;
        if (n = n.firstBaseUpdate,
        n !== null) {
            do {
                var s = {
                    eventTime: n.eventTime,
                    lane: n.lane,
                    tag: n.tag,
                    payload: n.payload,
                    callback: n.callback,
                    next: null
                };
                o === null ? i = o = s : o = o.next = s,
                n = n.next
            } while (n !== null);
            o === null ? i = o = t : o = o.next = t
        } else
            i = o = t;
        n = {
            baseState: r.baseState,
            firstBaseUpdate: i,
            lastBaseUpdate: o,
            shared: r.shared,
            effects: r.effects
        },
        e.updateQueue = n;
        return
    }
    e = n.lastBaseUpdate,
    e === null ? n.firstBaseUpdate = t : e.next = t,
    n.lastBaseUpdate = t
}
function Vm(e, t, n, r) {
    var i = e.updateQueue;
    nl = !1;
    var o = i.firstBaseUpdate
      , s = i.lastBaseUpdate
      , a = i.shared.pending;
    if (a !== null) {
        i.shared.pending = null;
        var l = a
          , c = l.next;
        l.next = null,
        s === null ? o = c : s.next = c,
        s = l;
        var u = e.alternate;
        u !== null && (u = u.updateQueue,
        a = u.lastBaseUpdate,
        a !== s && (a === null ? u.firstBaseUpdate = c : a.next = c,
        u.lastBaseUpdate = l))
    }
    if (o !== null) {
        var f = i.baseState;
        s = 0,
        u = c = l = null,
        a = o;
        do {
            var h = a.lane
              , m = a.eventTime;
            if ((r & h) === h) {
                u !== null && (u = u.next = {
                    eventTime: m,
                    lane: 0,
                    tag: a.tag,
                    payload: a.payload,
                    callback: a.callback,
                    next: null
                });
                e: {
                    var v = e
                      , y = a;
                    switch (h = t,
                    m = n,
                    y.tag) {
                    case 1:
                        if (v = y.payload,
                        typeof v == "function") {
                            f = v.call(m, f, h);
                            break e
                        }
                        f = v;
                        break e;
                    case 3:
                        v.flags = v.flags & -65537 | 128;
                    case 0:
                        if (v = y.payload,
                        h = typeof v == "function" ? v.call(m, f, h) : v,
                        h == null)
                            break e;
                        f = un({}, f, h);
                        break e;
                    case 2:
                        nl = !0
                    }
                }
                a.callback !== null && a.lane !== 0 && (e.flags |= 64,
                h = i.effects,
                h === null ? i.effects = [a] : h.push(a))
            } else
                m = {
                    eventTime: m,
                    lane: h,
                    tag: a.tag,
                    payload: a.payload,
                    callback: a.callback,
                    next: null
                },
                u === null ? (c = u = m,
                l = f) : u = u.next = m,
                s |= h;
            if (a = a.next,
            a === null) {
                if (a = i.shared.pending,
                a === null)
                    break;
                h = a,
                a = h.next,
                h.next = null,
                i.lastBaseUpdate = h,
                i.shared.pending = null
            }
        } while (!0);
        if (u === null && (l = f),
        i.baseState = l,
        i.firstBaseUpdate = c,
        i.lastBaseUpdate = u,
        t = i.shared.interleaved,
        t !== null) {
            i = t;
            do
                s |= i.lane,
                i = i.next;
            while (i !== t)
        } else
            o === null && (i.shared.lanes = 0);
        ou |= s,
        e.lanes = s,
        e.memoizedState = f
    }
}
function YC(e, t, n) {
    if (e = t.effects,
    t.effects = null,
    e !== null)
        for (t = 0; t < e.length; t++) {
            var r = e[t]
              , i = r.callback;
            if (i !== null) {
                if (r.callback = null,
                r = n,
                typeof i != "function")
                    throw Error(me(191, i));
                i.call(r)
            }
        }
}
var DL = new P7.Component().refs;
function w3(e, t, n, r) {
    t = e.memoizedState,
    n = n(r, t),
    n = n == null ? t : un({}, t, n),
    e.memoizedState = n,
    e.lanes === 0 && (e.updateQueue.baseState = n)
}
var vv = {
    isMounted: function(e) {
        return (e = e._reactInternals) ? Cu(e) === e : !1
    },
    enqueueSetState: function(e, t, n) {
        e = e._reactInternals;
        var r = Ur()
          , i = Al(e)
          , o = da(r, i);
        o.payload = t,
        n != null && (o.callback = n),
        t = kl(e, o, i),
        t !== null && ($o(t, e, i, r),
        Z0(t, e, i))
    },
    enqueueReplaceState: function(e, t, n) {
        e = e._reactInternals;
        var r = Ur()
          , i = Al(e)
          , o = da(r, i);
        o.tag = 1,
        o.payload = t,
        n != null && (o.callback = n),
        t = kl(e, o, i),
        t !== null && ($o(t, e, i, r),
        Z0(t, e, i))
    },
    enqueueForceUpdate: function(e, t) {
        e = e._reactInternals;
        var n = Ur()
          , r = Al(e)
          , i = da(n, r);
        i.tag = 2,
        t != null && (i.callback = t),
        t = kl(e, i, r),
        t !== null && ($o(t, e, r, n),
        Z0(t, e, r))
    }
};
function jC(e, t, n, r, i, o, s) {
    return e = e.stateNode,
    typeof e.shouldComponentUpdate == "function" ? e.shouldComponentUpdate(r, o, s) : t.prototype && t.prototype.isPureReactComponent ? !Ug(n, r) || !Ug(i, o) : !0
}
function OL(e, t, n) {
    var r = !1
      , i = $l
      , o = t.contextType;
    return typeof o == "object" && o !== null ? o = uo(o) : (i = di(t) ? nu : Cr.current,
    r = t.contextTypes,
    o = (r = r != null) ? tf(e, i) : $l),
    t = new t(n,o),
    e.memoizedState = t.state !== null && t.state !== void 0 ? t.state : null,
    t.updater = vv,
    e.stateNode = t,
    t._reactInternals = e,
    r && (e = e.stateNode,
    e.__reactInternalMemoizedUnmaskedChildContext = i,
    e.__reactInternalMemoizedMaskedChildContext = o),
    t
}
function KC(e, t, n, r) {
    e = t.state,
    typeof t.componentWillReceiveProps == "function" && t.componentWillReceiveProps(n, r),
    typeof t.UNSAFE_componentWillReceiveProps == "function" && t.UNSAFE_componentWillReceiveProps(n, r),
    t.state !== e && vv.enqueueReplaceState(t, t.state, null)
}
function E3(e, t, n, r) {
    var i = e.stateNode;
    i.props = n,
    i.state = e.memoizedState,
    i.refs = DL,
    jx(e);
    var o = t.contextType;
    typeof o == "object" && o !== null ? i.context = uo(o) : (o = di(t) ? nu : Cr.current,
    i.context = tf(e, o)),
    i.state = e.memoizedState,
    o = t.getDerivedStateFromProps,
    typeof o == "function" && (w3(e, t, o, n),
    i.state = e.memoizedState),
    typeof t.getDerivedStateFromProps == "function" || typeof i.getSnapshotBeforeUpdate == "function" || typeof i.UNSAFE_componentWillMount != "function" && typeof i.componentWillMount != "function" || (t = i.state,
    typeof i.componentWillMount == "function" && i.componentWillMount(),
    typeof i.UNSAFE_componentWillMount == "function" && i.UNSAFE_componentWillMount(),
    t !== i.state && vv.enqueueReplaceState(i, i.state, null),
    Vm(e, n, i, r),
    i.state = e.memoizedState),
    typeof i.componentDidMount == "function" && (e.flags |= 4194308)
}
function mh(e, t, n) {
    if (e = n.ref,
    e !== null && typeof e != "function" && typeof e != "object") {
        if (n._owner) {
            if (n = n._owner,
            n) {
                if (n.tag !== 1)
                    throw Error(me(309));
                var r = n.stateNode
            }
            if (!r)
                throw Error(me(147, e));
            var i = r
              , o = "" + e;
            return t !== null && t.ref !== null && typeof t.ref == "function" && t.ref._stringRef === o ? t.ref : (t = function(s) {
                var a = i.refs;
                a === DL && (a = i.refs = {}),
                s === null ? delete a[o] : a[o] = s
            }
            ,
            t._stringRef = o,
            t)
        }
        if (typeof e != "string")
            throw Error(me(284));
        if (!n._owner)
            throw Error(me(290, e))
    }
    return e
}
function s0(e, t) {
    throw e = Object.prototype.toString.call(t),
    Error(me(31, e === "[object Object]" ? "object with keys {" + Object.keys(t).join(", ") + "}" : e))
}
function XC(e) {
    var t = e._init;
    return t(e._payload)
}
function NL(e) {
    function t(b, _) {
        if (e) {
            var x = b.deletions;
            x === null ? (b.deletions = [_],
            b.flags |= 16) : x.push(_)
        }
    }
    function n(b, _) {
        if (!e)
            return null;
        for (; _ !== null; )
            t(b, _),
            _ = _.sibling;
        return null
    }
    function r(b, _) {
        for (b = new Map; _ !== null; )
            _.key !== null ? b.set(_.key, _) : b.set(_.index, _),
            _ = _.sibling;
        return b
    }
    function i(b, _) {
        return b = Ml(b, _),
        b.index = 0,
        b.sibling = null,
        b
    }
    function o(b, _, x) {
        return b.index = x,
        e ? (x = b.alternate,
        x !== null ? (x = x.index,
        x < _ ? (b.flags |= 2,
        _) : x) : (b.flags |= 2,
        _)) : (b.flags |= 1048576,
        _)
    }
    function s(b) {
        return e && b.alternate === null && (b.flags |= 2),
        b
    }
    function a(b, _, x, C) {
        return _ === null || _.tag !== 6 ? (_ = _E(x, b.mode, C),
        _.return = b,
        _) : (_ = i(_, x),
        _.return = b,
        _)
    }
    function l(b, _, x, C) {
        var P = x.type;
        return P === yd ? u(b, _, x.props.children, C, x.key) : _ !== null && (_.elementType === P || typeof P == "object" && P !== null && P.$$typeof === tl && XC(P) === _.type) ? (C = i(_, x.props),
        C.ref = mh(b, _, x),
        C.return = b,
        C) : (C = nm(x.type, x.key, x.props, null, b.mode, C),
        C.ref = mh(b, _, x),
        C.return = b,
        C)
    }
    function c(b, _, x, C) {
        return _ === null || _.tag !== 4 || _.stateNode.containerInfo !== x.containerInfo || _.stateNode.implementation !== x.implementation ? (_ = xE(x, b.mode, C),
        _.return = b,
        _) : (_ = i(_, x.children || []),
        _.return = b,
        _)
    }
    function u(b, _, x, C, P) {
        return _ === null || _.tag !== 7 ? (_ = jc(x, b.mode, C, P),
        _.return = b,
        _) : (_ = i(_, x),
        _.return = b,
        _)
    }
    function f(b, _, x) {
        if (typeof _ == "string" && _ !== "" || typeof _ == "number")
            return _ = _E("" + _, b.mode, x),
            _.return = b,
            _;
        if (typeof _ == "object" && _ !== null) {
            switch (_.$$typeof) {
            case X1:
                return x = nm(_.type, _.key, _.props, null, b.mode, x),
                x.ref = mh(b, null, _),
                x.return = b,
                x;
            case vd:
                return _ = xE(_, b.mode, x),
                _.return = b,
                _;
            case tl:
                var C = _._init;
                return f(b, C(_._payload), x)
            }
            if (Hh(_) || dh(_))
                return _ = jc(_, b.mode, x, null),
                _.return = b,
                _;
            s0(b, _)
        }
        return null
    }
    function h(b, _, x, C) {
        var P = _ !== null ? _.key : null;
        if (typeof x == "string" && x !== "" || typeof x == "number")
            return P !== null ? null : a(b, _, "" + x, C);
        if (typeof x == "object" && x !== null) {
            switch (x.$$typeof) {
            case X1:
                return x.key === P ? l(b, _, x, C) : null;
            case vd:
                return x.key === P ? c(b, _, x, C) : null;
            case tl:
                return P = x._init,
                h(b, _, P(x._payload), C)
            }
            if (Hh(x) || dh(x))
                return P !== null ? null : u(b, _, x, C, null);
            s0(b, x)
        }
        return null
    }
    function m(b, _, x, C, P) {
        if (typeof C == "string" && C !== "" || typeof C == "number")
            return b = b.get(x) || null,
            a(_, b, "" + C, P);
        if (typeof C == "object" && C !== null) {
            switch (C.$$typeof) {
            case X1:
                return b = b.get(C.key === null ? x : C.key) || null,
                l(_, b, C, P);
            case vd:
                return b = b.get(C.key === null ? x : C.key) || null,
                c(_, b, C, P);
            case tl:
                var M = C._init;
                return m(b, _, x, M(C._payload), P)
            }
            if (Hh(C) || dh(C))
                return b = b.get(x) || null,
                u(_, b, C, P, null);
            s0(_, C)
        }
        return null
    }
    function v(b, _, x, C) {
        for (var P = null, M = null, A = _, I = _ = 0, O = null; A !== null && I < x.length; I++) {
            A.index > I ? (O = A,
            A = null) : O = A.sibling;
            var N = h(b, A, x[I], C);
            if (N === null) {
                A === null && (A = O);
                break
            }
            e && A && N.alternate === null && t(b, A),
            _ = o(N, _, I),
            M === null ? P = N : M.sibling = N,
            M = N,
            A = O
        }
        if (I === x.length)
            return n(b, A),
            nn && vc(b, I),
            P;
        if (A === null) {
            for (; I < x.length; I++)
                A = f(b, x[I], C),
                A !== null && (_ = o(A, _, I),
                M === null ? P = A : M.sibling = A,
                M = A);
            return nn && vc(b, I),
            P
        }
        for (A = r(b, A); I < x.length; I++)
            O = m(A, b, I, x[I], C),
            O !== null && (e && O.alternate !== null && A.delete(O.key === null ? I : O.key),
            _ = o(O, _, I),
            M === null ? P = O : M.sibling = O,
            M = O);
        return e && A.forEach(function($) {
            return t(b, $)
        }),
        nn && vc(b, I),
        P
    }
    function y(b, _, x, C) {
        var P = dh(x);
        if (typeof P != "function")
            throw Error(me(150));
        if (x = P.call(x),
        x == null)
            throw Error(me(151));
        for (var M = P = null, A = _, I = _ = 0, O = null, N = x.next(); A !== null && !N.done; I++,
        N = x.next()) {
            A.index > I ? (O = A,
            A = null) : O = A.sibling;
            var $ = h(b, A, N.value, C);
            if ($ === null) {
                A === null && (A = O);
                break
            }
            e && A && $.alternate === null && t(b, A),
            _ = o($, _, I),
            M === null ? P = $ : M.sibling = $,
            M = $,
            A = O
        }
        if (N.done)
            return n(b, A),
            nn && vc(b, I),
            P;
        if (A === null) {
            for (; !N.done; I++,
            N = x.next())
                N = f(b, N.value, C),
                N !== null && (_ = o(N, _, I),
                M === null ? P = N : M.sibling = N,
                M = N);
            return nn && vc(b, I),
            P
        }
        for (A = r(b, A); !N.done; I++,
        N = x.next())
            N = m(A, b, I, N.value, C),
            N !== null && (e && N.alternate !== null && A.delete(N.key === null ? I : N.key),
            _ = o(N, _, I),
            M === null ? P = N : M.sibling = N,
            M = N);
        return e && A.forEach(function(V) {
            return t(b, V)
        }),
        nn && vc(b, I),
        P
    }
    function E(b, _, x, C) {
        if (typeof x == "object" && x !== null && x.type === yd && x.key === null && (x = x.props.children),
        typeof x == "object" && x !== null) {
            switch (x.$$typeof) {
            case X1:
                e: {
                    for (var P = x.key, M = _; M !== null; ) {
                        if (M.key === P) {
                            if (P = x.type,
                            P === yd) {
                                if (M.tag === 7) {
                                    n(b, M.sibling),
                                    _ = i(M, x.props.children),
                                    _.return = b,
                                    b = _;
                                    break e
                                }
                            } else if (M.elementType === P || typeof P == "object" && P !== null && P.$$typeof === tl && XC(P) === M.type) {
                                n(b, M.sibling),
                                _ = i(M, x.props),
                                _.ref = mh(b, M, x),
                                _.return = b,
                                b = _;
                                break e
                            }
                            n(b, M);
                            break
                        } else
                            t(b, M);
                        M = M.sibling
                    }
                    x.type === yd ? (_ = jc(x.props.children, b.mode, C, x.key),
                    _.return = b,
                    b = _) : (C = nm(x.type, x.key, x.props, null, b.mode, C),
                    C.ref = mh(b, _, x),
                    C.return = b,
                    b = C)
                }
                return s(b);
            case vd:
                e: {
                    for (M = x.key; _ !== null; ) {
                        if (_.key === M)
                            if (_.tag === 4 && _.stateNode.containerInfo === x.containerInfo && _.stateNode.implementation === x.implementation) {
                                n(b, _.sibling),
                                _ = i(_, x.children || []),
                                _.return = b,
                                b = _;
                                break e
                            } else {
                                n(b, _);
                                break
                            }
                        else
                            t(b, _);
                        _ = _.sibling
                    }
                    _ = xE(x, b.mode, C),
                    _.return = b,
                    b = _
                }
                return s(b);
            case tl:
                return M = x._init,
                E(b, _, M(x._payload), C)
            }
            if (Hh(x))
                return v(b, _, x, C);
            if (dh(x))
                return y(b, _, x, C);
            s0(b, x)
        }
        return typeof x == "string" && x !== "" || typeof x == "number" ? (x = "" + x,
        _ !== null && _.tag === 6 ? (n(b, _.sibling),
        _ = i(_, x),
        _.return = b,
        b = _) : (n(b, _),
        _ = _E(x, b.mode, C),
        _.return = b,
        b = _),
        s(b)) : n(b, _)
    }
    return E
}
var rf = NL(!0)
  , FL = NL(!1)
  , Op = {}
  , xs = Ql(Op)
  , Vg = Ql(Op)
  , Yg = Ql(Op);
function Oc(e) {
    if (e === Op)
        throw Error(me(174));
    return e
}
function Kx(e, t) {
    switch (Vt(Yg, t),
    Vt(Vg, e),
    Vt(xs, Op),
    e = t.nodeType,
    e) {
    case 9:
    case 11:
        t = (t = t.documentElement) ? t.namespaceURI : Qb(null, "");
        break;
    default:
        e = e === 8 ? t.parentNode : t,
        t = e.namespaceURI || null,
        e = e.tagName,
        t = Qb(t, e)
    }
    qt(xs),
    Vt(xs, t)
}
function of() {
    qt(xs),
    qt(Vg),
    qt(Yg)
}
function BL(e) {
    Oc(Yg.current);
    var t = Oc(xs.current)
      , n = Qb(t, e.type);
    t !== n && (Vt(Vg, e),
    Vt(xs, n))
}
function Xx(e) {
    Vg.current === e && (qt(xs),
    qt(Vg))
}
var an = Ql(0);
function Ym(e) {
    for (var t = e; t !== null; ) {
        if (t.tag === 13) {
            var n = t.memoizedState;
            if (n !== null && (n = n.dehydrated,
            n === null || n.data === "$?" || n.data === "$!"))
                return t
        } else if (t.tag === 19 && t.memoizedProps.revealOrder !== void 0) {
            if (t.flags & 128)
                return t
        } else if (t.child !== null) {
            t.child.return = t,
            t = t.child;
            continue
        }
        if (t === e)
            break;
        for (; t.sibling === null; ) {
            if (t.return === null || t.return === e)
                return null;
            t = t.return
        }
        t.sibling.return = t.return,
        t = t.sibling
    }
    return null
}
var mE = [];
function Zx() {
    for (var e = 0; e < mE.length; e++)
        mE[e]._workInProgressVersionPrimary = null;
    mE.length = 0
}
var q0 = Pa.ReactCurrentDispatcher
  , vE = Pa.ReactCurrentBatchConfig
  , iu = 0
  , cn = null
  , Bn = null
  , jn = null
  , jm = !1
  , cg = !1
  , jg = 0
  , rZ = 0;
function pr() {
    throw Error(me(321))
}
function qx(e, t) {
    if (t === null)
        return !1;
    for (var n = 0; n < t.length && n < e.length; n++)
        if (!Vo(e[n], t[n]))
            return !1;
    return !0
}
function Qx(e, t, n, r, i, o) {
    if (iu = o,
    cn = t,
    t.memoizedState = null,
    t.updateQueue = null,
    t.lanes = 0,
    q0.current = e === null || e.memoizedState === null ? aZ : lZ,
    e = n(r, i),
    cg) {
        o = 0;
        do {
            if (cg = !1,
            jg = 0,
            25 <= o)
                throw Error(me(301));
            o += 1,
            jn = Bn = null,
            t.updateQueue = null,
            q0.current = cZ,
            e = n(r, i)
        } while (cg)
    }
    if (q0.current = Km,
    t = Bn !== null && Bn.next !== null,
    iu = 0,
    jn = Bn = cn = null,
    jm = !1,
    t)
        throw Error(me(300));
    return e
}
function Jx() {
    var e = jg !== 0;
    return jg = 0,
    e
}
function as() {
    var e = {
        memoizedState: null,
        baseState: null,
        baseQueue: null,
        queue: null,
        next: null
    };
    return jn === null ? cn.memoizedState = jn = e : jn = jn.next = e,
    jn
}
function fo() {
    if (Bn === null) {
        var e = cn.alternate;
        e = e !== null ? e.memoizedState : null
    } else
        e = Bn.next;
    var t = jn === null ? cn.memoizedState : jn.next;
    if (t !== null)
        jn = t,
        Bn = e;
    else {
        if (e === null)
            throw Error(me(310));
        Bn = e,
        e = {
            memoizedState: Bn.memoizedState,
            baseState: Bn.baseState,
            baseQueue: Bn.baseQueue,
            queue: Bn.queue,
            next: null
        },
        jn === null ? cn.memoizedState = jn = e : jn = jn.next = e
    }
    return jn
}
function Kg(e, t) {
    return typeof t == "function" ? t(e) : t
}
function yE(e) {
    var t = fo()
      , n = t.queue;
    if (n === null)
        throw Error(me(311));
    n.lastRenderedReducer = e;
    var r = Bn
      , i = r.baseQueue
      , o = n.pending;
    if (o !== null) {
        if (i !== null) {
            var s = i.next;
            i.next = o.next,
            o.next = s
        }
        r.baseQueue = i = o,
        n.pending = null
    }
    if (i !== null) {
        o = i.next,
        r = r.baseState;
        var a = s = null
          , l = null
          , c = o;
        do {
            var u = c.lane;
            if ((iu & u) === u)
                l !== null && (l = l.next = {
                    lane: 0,
                    action: c.action,
                    hasEagerState: c.hasEagerState,
                    eagerState: c.eagerState,
                    next: null
                }),
                r = c.hasEagerState ? c.eagerState : e(r, c.action);
            else {
                var f = {
                    lane: u,
                    action: c.action,
                    hasEagerState: c.hasEagerState,
                    eagerState: c.eagerState,
                    next: null
                };
                l === null ? (a = l = f,
                s = r) : l = l.next = f,
                cn.lanes |= u,
                ou |= u
            }
            c = c.next
        } while (c !== null && c !== o);
        l === null ? s = r : l.next = a,
        Vo(r, t.memoizedState) || (oi = !0),
        t.memoizedState = r,
        t.baseState = s,
        t.baseQueue = l,
        n.lastRenderedState = r
    }
    if (e = n.interleaved,
    e !== null) {
        i = e;
        do
            o = i.lane,
            cn.lanes |= o,
            ou |= o,
            i = i.next;
        while (i !== e)
    } else
        i === null && (n.lanes = 0);
    return [t.memoizedState, n.dispatch]
}
function wE(e) {
    var t = fo()
      , n = t.queue;
    if (n === null)
        throw Error(me(311));
    n.lastRenderedReducer = e;
    var r = n.dispatch
      , i = n.pending
      , o = t.memoizedState;
    if (i !== null) {
        n.pending = null;
        var s = i = i.next;
        do
            o = e(o, s.action),
            s = s.next;
        while (s !== i);
        Vo(o, t.memoizedState) || (oi = !0),
        t.memoizedState = o,
        t.baseQueue === null && (t.baseState = o),
        n.lastRenderedState = o
    }
    return [o, r]
}
function zL() {}
function $L(e, t) {
    var n = cn
      , r = fo()
      , i = t()
      , o = !Vo(r.memoizedState, i);
    if (o && (r.memoizedState = i,
    oi = !0),
    r = r.queue,
    e6(WL.bind(null, n, r, e), [e]),
    r.getSnapshot !== t || o || jn !== null && jn.memoizedState.tag & 1) {
        if (n.flags |= 2048,
        Xg(9, HL.bind(null, n, r, i, t), void 0, null),
        Zn === null)
            throw Error(me(349));
        iu & 30 || UL(n, t, i)
    }
    return i
}
function UL(e, t, n) {
    e.flags |= 16384,
    e = {
        getSnapshot: t,
        value: n
    },
    t = cn.updateQueue,
    t === null ? (t = {
        lastEffect: null,
        stores: null
    },
    cn.updateQueue = t,
    t.stores = [e]) : (n = t.stores,
    n === null ? t.stores = [e] : n.push(e))
}
function HL(e, t, n, r) {
    t.value = n,
    t.getSnapshot = r,
    GL(t) && VL(e)
}
function WL(e, t, n) {
    return n(function() {
        GL(t) && VL(e)
    })
}
function GL(e) {
    var t = e.getSnapshot;
    e = e.value;
    try {
        var n = t();
        return !Vo(e, n)
    } catch {
        return !0
    }
}
function VL(e) {
    var t = Ea(e, 1);
    t !== null && $o(t, e, 1, -1)
}
function ZC(e) {
    var t = as();
    return typeof e == "function" && (e = e()),
    t.memoizedState = t.baseState = e,
    e = {
        pending: null,
        interleaved: null,
        lanes: 0,
        dispatch: null,
        lastRenderedReducer: Kg,
        lastRenderedState: e
    },
    t.queue = e,
    e = e.dispatch = sZ.bind(null, cn, e),
    [t.memoizedState, e]
}
function Xg(e, t, n, r) {
    return e = {
        tag: e,
        create: t,
        destroy: n,
        deps: r,
        next: null
    },
    t = cn.updateQueue,
    t === null ? (t = {
        lastEffect: null,
        stores: null
    },
    cn.updateQueue = t,
    t.lastEffect = e.next = e) : (n = t.lastEffect,
    n === null ? t.lastEffect = e.next = e : (r = n.next,
    n.next = e,
    e.next = r,
    t.lastEffect = e)),
    e
}
function YL() {
    return fo().memoizedState
}
function Q0(e, t, n, r) {
    var i = as();
    cn.flags |= e,
    i.memoizedState = Xg(1 | t, n, void 0, r === void 0 ? null : r)
}
function yv(e, t, n, r) {
    var i = fo();
    r = r === void 0 ? null : r;
    var o = void 0;
    if (Bn !== null) {
        var s = Bn.memoizedState;
        if (o = s.destroy,
        r !== null && qx(r, s.deps)) {
            i.memoizedState = Xg(t, n, o, r);
            return
        }
    }
    cn.flags |= e,
    i.memoizedState = Xg(1 | t, n, o, r)
}
function qC(e, t) {
    return Q0(8390656, 8, e, t)
}
function e6(e, t) {
    return yv(2048, 8, e, t)
}
function jL(e, t) {
    return yv(4, 2, e, t)
}
function KL(e, t) {
    return yv(4, 4, e, t)
}
function XL(e, t) {
    if (typeof t == "function")
        return e = e(),
        t(e),
        function() {
            t(null)
        }
        ;
    if (t != null)
        return e = e(),
        t.current = e,
        function() {
            t.current = null
        }
}
function ZL(e, t, n) {
    return n = n != null ? n.concat([e]) : null,
    yv(4, 4, XL.bind(null, t, e), n)
}
function t6() {}
function qL(e, t) {
    var n = fo();
    t = t === void 0 ? null : t;
    var r = n.memoizedState;
    return r !== null && t !== null && qx(t, r[1]) ? r[0] : (n.memoizedState = [e, t],
    e)
}
function QL(e, t) {
    var n = fo();
    t = t === void 0 ? null : t;
    var r = n.memoizedState;
    return r !== null && t !== null && qx(t, r[1]) ? r[0] : (e = e(),
    n.memoizedState = [e, t],
    e)
}
function JL(e, t, n) {
    return iu & 21 ? (Vo(n, t) || (n = nL(),
    cn.lanes |= n,
    ou |= n,
    e.baseState = !0),
    t) : (e.baseState && (e.baseState = !1,
    oi = !0),
    e.memoizedState = n)
}
function iZ(e, t) {
    var n = Pt;
    Pt = n !== 0 && 4 > n ? n : 4,
    e(!0);
    var r = vE.transition;
    vE.transition = {};
    try {
        e(!1),
        t()
    } finally {
        Pt = n,
        vE.transition = r
    }
}
function eP() {
    return fo().memoizedState
}
function oZ(e, t, n) {
    var r = Al(e);
    if (n = {
        lane: r,
        action: n,
        hasEagerState: !1,
        eagerState: null,
        next: null
    },
    tP(e))
        nP(t, n);
    else if (n = PL(e, t, n, r),
    n !== null) {
        var i = Ur();
        $o(n, e, r, i),
        rP(n, t, r)
    }
}
function sZ(e, t, n) {
    var r = Al(e)
      , i = {
        lane: r,
        action: n,
        hasEagerState: !1,
        eagerState: null,
        next: null
    };
    if (tP(e))
        nP(t, i);
    else {
        var o = e.alternate;
        if (e.lanes === 0 && (o === null || o.lanes === 0) && (o = t.lastRenderedReducer,
        o !== null))
            try {
                var s = t.lastRenderedState
                  , a = o(s, n);
                if (i.hasEagerState = !0,
                i.eagerState = a,
                Vo(a, s)) {
                    var l = t.interleaved;
                    l === null ? (i.next = i,
                    Yx(t)) : (i.next = l.next,
                    l.next = i),
                    t.interleaved = i;
                    return
                }
            } catch {} finally {}
        n = PL(e, t, i, r),
        n !== null && (i = Ur(),
        $o(n, e, r, i),
        rP(n, t, r))
    }
}
function tP(e) {
    var t = e.alternate;
    return e === cn || t !== null && t === cn
}
function nP(e, t) {
    cg = jm = !0;
    var n = e.pending;
    n === null ? t.next = t : (t.next = n.next,
    n.next = t),
    e.pending = t
}
function rP(e, t, n) {
    if (n & 4194240) {
        var r = t.lanes;
        r &= e.pendingLanes,
        n |= r,
        t.lanes = n,
        Px(e, n)
    }
}
var Km = {
    readContext: uo,
    useCallback: pr,
    useContext: pr,
    useEffect: pr,
    useImperativeHandle: pr,
    useInsertionEffect: pr,
    useLayoutEffect: pr,
    useMemo: pr,
    useReducer: pr,
    useRef: pr,
    useState: pr,
    useDebugValue: pr,
    useDeferredValue: pr,
    useTransition: pr,
    useMutableSource: pr,
    useSyncExternalStore: pr,
    useId: pr,
    unstable_isNewReconciler: !1
}
  , aZ = {
    readContext: uo,
    useCallback: function(e, t) {
        return as().memoizedState = [e, t === void 0 ? null : t],
        e
    },
    useContext: uo,
    useEffect: qC,
    useImperativeHandle: function(e, t, n) {
        return n = n != null ? n.concat([e]) : null,
        Q0(4194308, 4, XL.bind(null, t, e), n)
    },
    useLayoutEffect: function(e, t) {
        return Q0(4194308, 4, e, t)
    },
    useInsertionEffect: function(e, t) {
        return Q0(4, 2, e, t)
    },
    useMemo: function(e, t) {
        var n = as();
        return t = t === void 0 ? null : t,
        e = e(),
        n.memoizedState = [e, t],
        e
    },
    useReducer: function(e, t, n) {
        var r = as();
        return t = n !== void 0 ? n(t) : t,
        r.memoizedState = r.baseState = t,
        e = {
            pending: null,
            interleaved: null,
            lanes: 0,
            dispatch: null,
            lastRenderedReducer: e,
            lastRenderedState: t
        },
        r.queue = e,
        e = e.dispatch = oZ.bind(null, cn, e),
        [r.memoizedState, e]
    },
    useRef: function(e) {
        var t = as();
        return e = {
            current: e
        },
        t.memoizedState = e
    },
    useState: ZC,
    useDebugValue: t6,
    useDeferredValue: function(e) {
        return as().memoizedState = e
    },
    useTransition: function() {
        var e = ZC(!1)
          , t = e[0];
        return e = iZ.bind(null, e[1]),
        as().memoizedState = e,
        [t, e]
    },
    useMutableSource: function() {},
    useSyncExternalStore: function(e, t, n) {
        var r = cn
          , i = as();
        if (nn) {
            if (n === void 0)
                throw Error(me(407));
            n = n()
        } else {
            if (n = t(),
            Zn === null)
                throw Error(me(349));
            iu & 30 || UL(r, t, n)
        }
        i.memoizedState = n;
        var o = {
            value: n,
            getSnapshot: t
        };
        return i.queue = o,
        qC(WL.bind(null, r, o, e), [e]),
        r.flags |= 2048,
        Xg(9, HL.bind(null, r, o, n, t), void 0, null),
        n
    },
    useId: function() {
        var e = as()
          , t = Zn.identifierPrefix;
        if (nn) {
            var n = la
              , r = aa;
            n = (r & ~(1 << 32 - zo(r) - 1)).toString(32) + n,
            t = ":" + t + "R" + n,
            n = jg++,
            0 < n && (t += "H" + n.toString(32)),
            t += ":"
        } else
            n = rZ++,
            t = ":" + t + "r" + n.toString(32) + ":";
        return e.memoizedState = t
    },
    unstable_isNewReconciler: !1
}
  , lZ = {
    readContext: uo,
    useCallback: qL,
    useContext: uo,
    useEffect: e6,
    useImperativeHandle: ZL,
    useInsertionEffect: jL,
    useLayoutEffect: KL,
    useMemo: QL,
    useReducer: yE,
    useRef: YL,
    useState: function() {
        return yE(Kg)
    },
    useDebugValue: t6,
    useDeferredValue: function(e) {
        var t = fo();
        return JL(t, Bn.memoizedState, e)
    },
    useTransition: function() {
        var e = yE(Kg)[0]
          , t = fo().memoizedState;
        return [e, t]
    },
    useMutableSource: zL,
    useSyncExternalStore: $L,
    useId: eP,
    unstable_isNewReconciler: !1
}
  , cZ = {
    readContext: uo,
    useCallback: qL,
    useContext: uo,
    useEffect: e6,
    useImperativeHandle: ZL,
    useInsertionEffect: jL,
    useLayoutEffect: KL,
    useMemo: QL,
    useReducer: wE,
    useRef: YL,
    useState: function() {
        return wE(Kg)
    },
    useDebugValue: t6,
    useDeferredValue: function(e) {
        var t = fo();
        return Bn === null ? t.memoizedState = e : JL(t, Bn.memoizedState, e)
    },
    useTransition: function() {
        var e = wE(Kg)[0]
          , t = fo().memoizedState;
        return [e, t]
    },
    useMutableSource: zL,
    useSyncExternalStore: $L,
    useId: eP,
    unstable_isNewReconciler: !1
};
function sf(e, t) {
    try {
        var n = ""
          , r = t;
        do
            n += FK(r),
            r = r.return;
        while (r);
        var i = n
    } catch (o) {
        i = `
Error generating stack: ` + o.message + `
` + o.stack
    }
    return {
        value: e,
        source: t,
        stack: i,
        digest: null
    }
}
function EE(e, t, n) {
    return {
        value: e,
        source: null,
        stack: n ?? null,
        digest: t ?? null
    }
}
function b3(e, t) {
    try {
        console.error(t.value)
    } catch (n) {
        setTimeout(function() {
            throw n
        })
    }
}
var uZ = typeof WeakMap == "function" ? WeakMap : Map;
function iP(e, t, n) {
    n = da(-1, n),
    n.tag = 3,
    n.payload = {
        element: null
    };
    var r = t.value;
    return n.callback = function() {
        Zm || (Zm = !0,
        L3 = r),
        b3(e, t)
    }
    ,
    n
}
function oP(e, t, n) {
    n = da(-1, n),
    n.tag = 3;
    var r = e.type.getDerivedStateFromError;
    if (typeof r == "function") {
        var i = t.value;
        n.payload = function() {
            return r(i)
        }
        ,
        n.callback = function() {
            b3(e, t)
        }
    }
    var o = e.stateNode;
    return o !== null && typeof o.componentDidCatch == "function" && (n.callback = function() {
        b3(e, t),
        typeof r != "function" && (Tl === null ? Tl = new Set([this]) : Tl.add(this));
        var s = t.stack;
        this.componentDidCatch(t.value, {
            componentStack: s !== null ? s : ""
        })
    }
    ),
    n
}
function QC(e, t, n) {
    var r = e.pingCache;
    if (r === null) {
        r = e.pingCache = new uZ;
        var i = new Set;
        r.set(t, i)
    } else
        i = r.get(t),
        i === void 0 && (i = new Set,
        r.set(t, i));
    i.has(n) || (i.add(n),
    e = SZ.bind(null, e, t, n),
    t.then(e, e))
}
function JC(e) {
    do {
        var t;
        if ((t = e.tag === 13) && (t = e.memoizedState,
        t = t !== null ? t.dehydrated !== null : !0),
        t)
            return e;
        e = e.return
    } while (e !== null);
    return null
}
function ek(e, t, n, r, i) {
    return e.mode & 1 ? (e.flags |= 65536,
    e.lanes = i,
    e) : (e === t ? e.flags |= 65536 : (e.flags |= 128,
    n.flags |= 131072,
    n.flags &= -52805,
    n.tag === 1 && (n.alternate === null ? n.tag = 17 : (t = da(-1, 1),
    t.tag = 2,
    kl(n, t, 1))),
    n.lanes |= 1),
    e)
}
var dZ = Pa.ReactCurrentOwner
  , oi = !1;
function Nr(e, t, n, r) {
    t.child = e === null ? FL(t, null, n, r) : rf(t, e.child, n, r)
}
function tk(e, t, n, r, i) {
    n = n.render;
    var o = t.ref;
    return Wd(t, i),
    r = Qx(e, t, n, r, o, i),
    n = Jx(),
    e !== null && !oi ? (t.updateQueue = e.updateQueue,
    t.flags &= -2053,
    e.lanes &= ~i,
    ba(e, t, i)) : (nn && n && $x(t),
    t.flags |= 1,
    Nr(e, t, r, i),
    t.child)
}
function nk(e, t, n, r, i) {
    if (e === null) {
        var o = n.type;
        return typeof o == "function" && !c6(o) && o.defaultProps === void 0 && n.compare === null && n.defaultProps === void 0 ? (t.tag = 15,
        t.type = o,
        sP(e, t, o, r, i)) : (e = nm(n.type, null, r, t, t.mode, i),
        e.ref = t.ref,
        e.return = t,
        t.child = e)
    }
    if (o = e.child,
    !(e.lanes & i)) {
        var s = o.memoizedProps;
        if (n = n.compare,
        n = n !== null ? n : Ug,
        n(s, r) && e.ref === t.ref)
            return ba(e, t, i)
    }
    return t.flags |= 1,
    e = Ml(o, r),
    e.ref = t.ref,
    e.return = t,
    t.child = e
}
function sP(e, t, n, r, i) {
    if (e !== null) {
        var o = e.memoizedProps;
        if (Ug(o, r) && e.ref === t.ref)
            if (oi = !1,
            t.pendingProps = r = o,
            (e.lanes & i) !== 0)
                e.flags & 131072 && (oi = !0);
            else
                return t.lanes = e.lanes,
                ba(e, t, i)
    }
    return _3(e, t, n, r, i)
}
function aP(e, t, n) {
    var r = t.pendingProps
      , i = r.children
      , o = e !== null ? e.memoizedState : null;
    if (r.mode === "hidden")
        if (!(t.mode & 1))
            t.memoizedState = {
                baseLanes: 0,
                cachePool: null,
                transitions: null
            },
            Vt(Td, Ci),
            Ci |= n;
        else {
            if (!(n & 1073741824))
                return e = o !== null ? o.baseLanes | n : n,
                t.lanes = t.childLanes = 1073741824,
                t.memoizedState = {
                    baseLanes: e,
                    cachePool: null,
                    transitions: null
                },
                t.updateQueue = null,
                Vt(Td, Ci),
                Ci |= e,
                null;
            t.memoizedState = {
                baseLanes: 0,
                cachePool: null,
                transitions: null
            },
            r = o !== null ? o.baseLanes : n,
            Vt(Td, Ci),
            Ci |= r
        }
    else
        o !== null ? (r = o.baseLanes | n,
        t.memoizedState = null) : r = n,
        Vt(Td, Ci),
        Ci |= r;
    return Nr(e, t, i, n),
    t.child
}
function lP(e, t) {
    var n = t.ref;
    (e === null && n !== null || e !== null && e.ref !== n) && (t.flags |= 512,
    t.flags |= 2097152)
}
function _3(e, t, n, r, i) {
    var o = di(n) ? nu : Cr.current;
    return o = tf(t, o),
    Wd(t, i),
    n = Qx(e, t, n, r, o, i),
    r = Jx(),
    e !== null && !oi ? (t.updateQueue = e.updateQueue,
    t.flags &= -2053,
    e.lanes &= ~i,
    ba(e, t, i)) : (nn && r && $x(t),
    t.flags |= 1,
    Nr(e, t, n, i),
    t.child)
}
function rk(e, t, n, r, i) {
    if (di(n)) {
        var o = !0;
        $m(t)
    } else
        o = !1;
    if (Wd(t, i),
    t.stateNode === null)
        J0(e, t),
        OL(t, n, r),
        E3(t, n, r, i),
        r = !0;
    else if (e === null) {
        var s = t.stateNode
          , a = t.memoizedProps;
        s.props = a;
        var l = s.context
          , c = n.contextType;
        typeof c == "object" && c !== null ? c = uo(c) : (c = di(n) ? nu : Cr.current,
        c = tf(t, c));
        var u = n.getDerivedStateFromProps
          , f = typeof u == "function" || typeof s.getSnapshotBeforeUpdate == "function";
        f || typeof s.UNSAFE_componentWillReceiveProps != "function" && typeof s.componentWillReceiveProps != "function" || (a !== r || l !== c) && KC(t, s, r, c),
        nl = !1;
        var h = t.memoizedState;
        s.state = h,
        Vm(t, r, s, i),
        l = t.memoizedState,
        a !== r || h !== l || ui.current || nl ? (typeof u == "function" && (w3(t, n, u, r),
        l = t.memoizedState),
        (a = nl || jC(t, n, a, r, h, l, c)) ? (f || typeof s.UNSAFE_componentWillMount != "function" && typeof s.componentWillMount != "function" || (typeof s.componentWillMount == "function" && s.componentWillMount(),
        typeof s.UNSAFE_componentWillMount == "function" && s.UNSAFE_componentWillMount()),
        typeof s.componentDidMount == "function" && (t.flags |= 4194308)) : (typeof s.componentDidMount == "function" && (t.flags |= 4194308),
        t.memoizedProps = r,
        t.memoizedState = l),
        s.props = r,
        s.state = l,
        s.context = c,
        r = a) : (typeof s.componentDidMount == "function" && (t.flags |= 4194308),
        r = !1)
    } else {
        s = t.stateNode,
        RL(e, t),
        a = t.memoizedProps,
        c = t.type === t.elementType ? a : Lo(t.type, a),
        s.props = c,
        f = t.pendingProps,
        h = s.context,
        l = n.contextType,
        typeof l == "object" && l !== null ? l = uo(l) : (l = di(n) ? nu : Cr.current,
        l = tf(t, l));
        var m = n.getDerivedStateFromProps;
        (u = typeof m == "function" || typeof s.getSnapshotBeforeUpdate == "function") || typeof s.UNSAFE_componentWillReceiveProps != "function" && typeof s.componentWillReceiveProps != "function" || (a !== f || h !== l) && KC(t, s, r, l),
        nl = !1,
        h = t.memoizedState,
        s.state = h,
        Vm(t, r, s, i);
        var v = t.memoizedState;
        a !== f || h !== v || ui.current || nl ? (typeof m == "function" && (w3(t, n, m, r),
        v = t.memoizedState),
        (c = nl || jC(t, n, c, r, h, v, l) || !1) ? (u || typeof s.UNSAFE_componentWillUpdate != "function" && typeof s.componentWillUpdate != "function" || (typeof s.componentWillUpdate == "function" && s.componentWillUpdate(r, v, l),
        typeof s.UNSAFE_componentWillUpdate == "function" && s.UNSAFE_componentWillUpdate(r, v, l)),
        typeof s.componentDidUpdate == "function" && (t.flags |= 4),
        typeof s.getSnapshotBeforeUpdate == "function" && (t.flags |= 1024)) : (typeof s.componentDidUpdate != "function" || a === e.memoizedProps && h === e.memoizedState || (t.flags |= 4),
        typeof s.getSnapshotBeforeUpdate != "function" || a === e.memoizedProps && h === e.memoizedState || (t.flags |= 1024),
        t.memoizedProps = r,
        t.memoizedState = v),
        s.props = r,
        s.state = v,
        s.context = l,
        r = c) : (typeof s.componentDidUpdate != "function" || a === e.memoizedProps && h === e.memoizedState || (t.flags |= 4),
        typeof s.getSnapshotBeforeUpdate != "function" || a === e.memoizedProps && h === e.memoizedState || (t.flags |= 1024),
        r = !1)
    }
    return x3(e, t, n, r, o, i)
}
function x3(e, t, n, r, i, o) {
    lP(e, t);
    var s = (t.flags & 128) !== 0;
    if (!r && !s)
        return i && HC(t, n, !1),
        ba(e, t, o);
    r = t.stateNode,
    dZ.current = t;
    var a = s && typeof n.getDerivedStateFromError != "function" ? null : r.render();
    return t.flags |= 1,
    e !== null && s ? (t.child = rf(t, e.child, null, o),
    t.child = rf(t, null, a, o)) : Nr(e, t, a, o),
    t.memoizedState = r.state,
    i && HC(t, n, !0),
    t.child
}
function cP(e) {
    var t = e.stateNode;
    t.pendingContext ? UC(e, t.pendingContext, t.pendingContext !== t.context) : t.context && UC(e, t.context, !1),
    Kx(e, t.containerInfo)
}
function ik(e, t, n, r, i) {
    return nf(),
    Hx(i),
    t.flags |= 256,
    Nr(e, t, n, r),
    t.child
}
var S3 = {
    dehydrated: null,
    treeContext: null,
    retryLane: 0
};
function I3(e) {
    return {
        baseLanes: e,
        cachePool: null,
        transitions: null
    }
}
function uP(e, t, n) {
    var r = t.pendingProps, i = an.current, o = !1, s = (t.flags & 128) !== 0, a;
    if ((a = s) || (a = e !== null && e.memoizedState === null ? !1 : (i & 2) !== 0),
    a ? (o = !0,
    t.flags &= -129) : (e === null || e.memoizedState !== null) && (i |= 1),
    Vt(an, i & 1),
    e === null)
        return v3(t),
        e = t.memoizedState,
        e !== null && (e = e.dehydrated,
        e !== null) ? (t.mode & 1 ? e.data === "$!" ? t.lanes = 8 : t.lanes = 1073741824 : t.lanes = 1,
        null) : (s = r.children,
        e = r.fallback,
        o ? (r = t.mode,
        o = t.child,
        s = {
            mode: "hidden",
            children: s
        },
        !(r & 1) && o !== null ? (o.childLanes = 0,
        o.pendingProps = s) : o = bv(s, r, 0, null),
        e = jc(e, r, n, null),
        o.return = t,
        e.return = t,
        o.sibling = e,
        t.child = o,
        t.child.memoizedState = I3(n),
        t.memoizedState = S3,
        e) : n6(t, s));
    if (i = e.memoizedState,
    i !== null && (a = i.dehydrated,
    a !== null))
        return fZ(e, t, s, r, a, i, n);
    if (o) {
        o = r.fallback,
        s = t.mode,
        i = e.child,
        a = i.sibling;
        var l = {
            mode: "hidden",
            children: r.children
        };
        return !(s & 1) && t.child !== i ? (r = t.child,
        r.childLanes = 0,
        r.pendingProps = l,
        t.deletions = null) : (r = Ml(i, l),
        r.subtreeFlags = i.subtreeFlags & 14680064),
        a !== null ? o = Ml(a, o) : (o = jc(o, s, n, null),
        o.flags |= 2),
        o.return = t,
        r.return = t,
        r.sibling = o,
        t.child = r,
        r = o,
        o = t.child,
        s = e.child.memoizedState,
        s = s === null ? I3(n) : {
            baseLanes: s.baseLanes | n,
            cachePool: null,
            transitions: s.transitions
        },
        o.memoizedState = s,
        o.childLanes = e.childLanes & ~n,
        t.memoizedState = S3,
        r
    }
    return o = e.child,
    e = o.sibling,
    r = Ml(o, {
        mode: "visible",
        children: r.children
    }),
    !(t.mode & 1) && (r.lanes = n),
    r.return = t,
    r.sibling = null,
    e !== null && (n = t.deletions,
    n === null ? (t.deletions = [e],
    t.flags |= 16) : n.push(e)),
    t.child = r,
    t.memoizedState = null,
    r
}
function n6(e, t) {
    return t = bv({
        mode: "visible",
        children: t
    }, e.mode, 0, null),
    t.return = e,
    e.child = t
}
function a0(e, t, n, r) {
    return r !== null && Hx(r),
    rf(t, e.child, null, n),
    e = n6(t, t.pendingProps.children),
    e.flags |= 2,
    t.memoizedState = null,
    e
}
function fZ(e, t, n, r, i, o, s) {
    if (n)
        return t.flags & 256 ? (t.flags &= -257,
        r = EE(Error(me(422))),
        a0(e, t, s, r)) : t.memoizedState !== null ? (t.child = e.child,
        t.flags |= 128,
        null) : (o = r.fallback,
        i = t.mode,
        r = bv({
            mode: "visible",
            children: r.children
        }, i, 0, null),
        o = jc(o, i, s, null),
        o.flags |= 2,
        r.return = t,
        o.return = t,
        r.sibling = o,
        t.child = r,
        t.mode & 1 && rf(t, e.child, null, s),
        t.child.memoizedState = I3(s),
        t.memoizedState = S3,
        o);
    if (!(t.mode & 1))
        return a0(e, t, s, null);
    if (i.data === "$!") {
        if (r = i.nextSibling && i.nextSibling.dataset,
        r)
            var a = r.dgst;
        return r = a,
        o = Error(me(419)),
        r = EE(o, r, void 0),
        a0(e, t, s, r)
    }
    if (a = (s & e.childLanes) !== 0,
    oi || a) {
        if (r = Zn,
        r !== null) {
            switch (s & -s) {
            case 4:
                i = 2;
                break;
            case 16:
                i = 8;
                break;
            case 64:
            case 128:
            case 256:
            case 512:
            case 1024:
            case 2048:
            case 4096:
            case 8192:
            case 16384:
            case 32768:
            case 65536:
            case 131072:
            case 262144:
            case 524288:
            case 1048576:
            case 2097152:
            case 4194304:
            case 8388608:
            case 16777216:
            case 33554432:
            case 67108864:
                i = 32;
                break;
            case 536870912:
                i = 268435456;
                break;
            default:
                i = 0
            }
            i = i & (r.suspendedLanes | s) ? 0 : i,
            i !== 0 && i !== o.retryLane && (o.retryLane = i,
            Ea(e, i),
            $o(r, e, i, -1))
        }
        return l6(),
        r = EE(Error(me(421))),
        a0(e, t, s, r)
    }
    return i.data === "$?" ? (t.flags |= 128,
    t.child = e.child,
    t = IZ.bind(null, e),
    i._reactRetry = t,
    null) : (e = o.treeContext,
    Ti = Cl(i.nextSibling),
    Li = t,
    nn = !0,
    Oo = null,
    e !== null && (Qi[Ji++] = aa,
    Qi[Ji++] = la,
    Qi[Ji++] = ru,
    aa = e.id,
    la = e.overflow,
    ru = t),
    t = n6(t, r.children),
    t.flags |= 4096,
    t)
}
function ok(e, t, n) {
    e.lanes |= t;
    var r = e.alternate;
    r !== null && (r.lanes |= t),
    y3(e.return, t, n)
}
function bE(e, t, n, r, i) {
    var o = e.memoizedState;
    o === null ? e.memoizedState = {
        isBackwards: t,
        rendering: null,
        renderingStartTime: 0,
        last: r,
        tail: n,
        tailMode: i
    } : (o.isBackwards = t,
    o.rendering = null,
    o.renderingStartTime = 0,
    o.last = r,
    o.tail = n,
    o.tailMode = i)
}
function dP(e, t, n) {
    var r = t.pendingProps
      , i = r.revealOrder
      , o = r.tail;
    if (Nr(e, t, r.children, n),
    r = an.current,
    r & 2)
        r = r & 1 | 2,
        t.flags |= 128;
    else {
        if (e !== null && e.flags & 128)
            e: for (e = t.child; e !== null; ) {
                if (e.tag === 13)
                    e.memoizedState !== null && ok(e, n, t);
                else if (e.tag === 19)
                    ok(e, n, t);
                else if (e.child !== null) {
                    e.child.return = e,
                    e = e.child;
                    continue
                }
                if (e === t)
                    break e;
                for (; e.sibling === null; ) {
                    if (e.return === null || e.return === t)
                        break e;
                    e = e.return
                }
                e.sibling.return = e.return,
                e = e.sibling
            }
        r &= 1
    }
    if (Vt(an, r),
    !(t.mode & 1))
        t.memoizedState = null;
    else
        switch (i) {
        case "forwards":
            for (n = t.child,
            i = null; n !== null; )
                e = n.alternate,
                e !== null && Ym(e) === null && (i = n),
                n = n.sibling;
            n = i,
            n === null ? (i = t.child,
            t.child = null) : (i = n.sibling,
            n.sibling = null),
            bE(t, !1, i, n, o);
            break;
        case "backwards":
            for (n = null,
            i = t.child,
            t.child = null; i !== null; ) {
                if (e = i.alternate,
                e !== null && Ym(e) === null) {
                    t.child = i;
                    break
                }
                e = i.sibling,
                i.sibling = n,
                n = i,
                i = e
            }
            bE(t, !0, n, null, o);
            break;
        case "together":
            bE(t, !1, null, null, void 0);
            break;
        default:
            t.memoizedState = null
        }
    return t.child
}
function J0(e, t) {
    !(t.mode & 1) && e !== null && (e.alternate = null,
    t.alternate = null,
    t.flags |= 2)
}
function ba(e, t, n) {
    if (e !== null && (t.dependencies = e.dependencies),
    ou |= t.lanes,
    !(n & t.childLanes))
        return null;
    if (e !== null && t.child !== e.child)
        throw Error(me(153));
    if (t.child !== null) {
        for (e = t.child,
        n = Ml(e, e.pendingProps),
        t.child = n,
        n.return = t; e.sibling !== null; )
            e = e.sibling,
            n = n.sibling = Ml(e, e.pendingProps),
            n.return = t;
        n.sibling = null
    }
    return t.child
}
function hZ(e, t, n) {
    switch (t.tag) {
    case 3:
        cP(t),
        nf();
        break;
    case 5:
        BL(t);
        break;
    case 1:
        di(t.type) && $m(t);
        break;
    case 4:
        Kx(t, t.stateNode.containerInfo);
        break;
    case 10:
        var r = t.type._context
          , i = t.memoizedProps.value;
        Vt(Wm, r._currentValue),
        r._currentValue = i;
        break;
    case 13:
        if (r = t.memoizedState,
        r !== null)
            return r.dehydrated !== null ? (Vt(an, an.current & 1),
            t.flags |= 128,
            null) : n & t.child.childLanes ? uP(e, t, n) : (Vt(an, an.current & 1),
            e = ba(e, t, n),
            e !== null ? e.sibling : null);
        Vt(an, an.current & 1);
        break;
    case 19:
        if (r = (n & t.childLanes) !== 0,
        e.flags & 128) {
            if (r)
                return dP(e, t, n);
            t.flags |= 128
        }
        if (i = t.memoizedState,
        i !== null && (i.rendering = null,
        i.tail = null,
        i.lastEffect = null),
        Vt(an, an.current),
        r)
            break;
        return null;
    case 22:
    case 23:
        return t.lanes = 0,
        aP(e, t, n)
    }
    return ba(e, t, n)
}
var fP, C3, hP, gP;
fP = function(e, t) {
    for (var n = t.child; n !== null; ) {
        if (n.tag === 5 || n.tag === 6)
            e.appendChild(n.stateNode);
        else if (n.tag !== 4 && n.child !== null) {
            n.child.return = n,
            n = n.child;
            continue
        }
        if (n === t)
            break;
        for (; n.sibling === null; ) {
            if (n.return === null || n.return === t)
                return;
            n = n.return
        }
        n.sibling.return = n.return,
        n = n.sibling
    }
}
;
C3 = function() {}
;
hP = function(e, t, n, r) {
    var i = e.memoizedProps;
    if (i !== r) {
        e = t.stateNode,
        Oc(xs.current);
        var o = null;
        switch (n) {
        case "input":
            i = Kb(e, i),
            r = Kb(e, r),
            o = [];
            break;
        case "select":
            i = un({}, i, {
                value: void 0
            }),
            r = un({}, r, {
                value: void 0
            }),
            o = [];
            break;
        case "textarea":
            i = qb(e, i),
            r = qb(e, r),
            o = [];
            break;
        default:
            typeof i.onClick != "function" && typeof r.onClick == "function" && (e.onclick = Bm)
        }
        Jb(n, r);
        var s;
        n = null;
        for (c in i)
            if (!r.hasOwnProperty(c) && i.hasOwnProperty(c) && i[c] != null)
                if (c === "style") {
                    var a = i[c];
                    for (s in a)
                        a.hasOwnProperty(s) && (n || (n = {}),
                        n[s] = "")
                } else
                    c !== "dangerouslySetInnerHTML" && c !== "children" && c !== "suppressContentEditableWarning" && c !== "suppressHydrationWarning" && c !== "autoFocus" && (Dg.hasOwnProperty(c) ? o || (o = []) : (o = o || []).push(c, null));
        for (c in r) {
            var l = r[c];
            if (a = i != null ? i[c] : void 0,
            r.hasOwnProperty(c) && l !== a && (l != null || a != null))
                if (c === "style")
                    if (a) {
                        for (s in a)
                            !a.hasOwnProperty(s) || l && l.hasOwnProperty(s) || (n || (n = {}),
                            n[s] = "");
                        for (s in l)
                            l.hasOwnProperty(s) && a[s] !== l[s] && (n || (n = {}),
                            n[s] = l[s])
                    } else
                        n || (o || (o = []),
                        o.push(c, n)),
                        n = l;
                else
                    c === "dangerouslySetInnerHTML" ? (l = l ? l.__html : void 0,
                    a = a ? a.__html : void 0,
                    l != null && a !== l && (o = o || []).push(c, l)) : c === "children" ? typeof l != "string" && typeof l != "number" || (o = o || []).push(c, "" + l) : c !== "suppressContentEditableWarning" && c !== "suppressHydrationWarning" && (Dg.hasOwnProperty(c) ? (l != null && c === "onScroll" && Kt("scroll", e),
                    o || a === l || (o = [])) : (o = o || []).push(c, l))
        }
        n && (o = o || []).push("style", n);
        var c = o;
        (t.updateQueue = c) && (t.flags |= 4)
    }
}
;
gP = function(e, t, n, r) {
    n !== r && (t.flags |= 4)
}
;
function vh(e, t) {
    if (!nn)
        switch (e.tailMode) {
        case "hidden":
            t = e.tail;
            for (var n = null; t !== null; )
                t.alternate !== null && (n = t),
                t = t.sibling;
            n === null ? e.tail = null : n.sibling = null;
            break;
        case "collapsed":
            n = e.tail;
            for (var r = null; n !== null; )
                n.alternate !== null && (r = n),
                n = n.sibling;
            r === null ? t || e.tail === null ? e.tail = null : e.tail.sibling = null : r.sibling = null
        }
}
function mr(e) {
    var t = e.alternate !== null && e.alternate.child === e.child
      , n = 0
      , r = 0;
    if (t)
        for (var i = e.child; i !== null; )
            n |= i.lanes | i.childLanes,
            r |= i.subtreeFlags & 14680064,
            r |= i.flags & 14680064,
            i.return = e,
            i = i.sibling;
    else
        for (i = e.child; i !== null; )
            n |= i.lanes | i.childLanes,
            r |= i.subtreeFlags,
            r |= i.flags,
            i.return = e,
            i = i.sibling;
    return e.subtreeFlags |= r,
    e.childLanes = n,
    t
}
function gZ(e, t, n) {
    var r = t.pendingProps;
    switch (Ux(t),
    t.tag) {
    case 2:
    case 16:
    case 15:
    case 0:
    case 11:
    case 7:
    case 8:
    case 12:
    case 9:
    case 14:
        return mr(t),
        null;
    case 1:
        return di(t.type) && zm(),
        mr(t),
        null;
    case 3:
        return r = t.stateNode,
        of(),
        qt(ui),
        qt(Cr),
        Zx(),
        r.pendingContext && (r.context = r.pendingContext,
        r.pendingContext = null),
        (e === null || e.child === null) && (o0(t) ? t.flags |= 4 : e === null || e.memoizedState.isDehydrated && !(t.flags & 256) || (t.flags |= 1024,
        Oo !== null && (D3(Oo),
        Oo = null))),
        C3(e, t),
        mr(t),
        null;
    case 5:
        Xx(t);
        var i = Oc(Yg.current);
        if (n = t.type,
        e !== null && t.stateNode != null)
            hP(e, t, n, r, i),
            e.ref !== t.ref && (t.flags |= 512,
            t.flags |= 2097152);
        else {
            if (!r) {
                if (t.stateNode === null)
                    throw Error(me(166));
                return mr(t),
                null
            }
            if (e = Oc(xs.current),
            o0(t)) {
                r = t.stateNode,
                n = t.type;
                var o = t.memoizedProps;
                switch (r[ps] = t,
                r[Gg] = o,
                e = (t.mode & 1) !== 0,
                n) {
                case "dialog":
                    Kt("cancel", r),
                    Kt("close", r);
                    break;
                case "iframe":
                case "object":
                case "embed":
                    Kt("load", r);
                    break;
                case "video":
                case "audio":
                    for (i = 0; i < Gh.length; i++)
                        Kt(Gh[i], r);
                    break;
                case "source":
                    Kt("error", r);
                    break;
                case "img":
                case "image":
                case "link":
                    Kt("error", r),
                    Kt("load", r);
                    break;
                case "details":
                    Kt("toggle", r);
                    break;
                case "input":
                    gC(r, o),
                    Kt("invalid", r);
                    break;
                case "select":
                    r._wrapperState = {
                        wasMultiple: !!o.multiple
                    },
                    Kt("invalid", r);
                    break;
                case "textarea":
                    mC(r, o),
                    Kt("invalid", r)
                }
                Jb(n, o),
                i = null;
                for (var s in o)
                    if (o.hasOwnProperty(s)) {
                        var a = o[s];
                        s === "children" ? typeof a == "string" ? r.textContent !== a && (o.suppressHydrationWarning !== !0 && i0(r.textContent, a, e),
                        i = ["children", a]) : typeof a == "number" && r.textContent !== "" + a && (o.suppressHydrationWarning !== !0 && i0(r.textContent, a, e),
                        i = ["children", "" + a]) : Dg.hasOwnProperty(s) && a != null && s === "onScroll" && Kt("scroll", r)
                    }
                switch (n) {
                case "input":
                    Z1(r),
                    pC(r, o, !0);
                    break;
                case "textarea":
                    Z1(r),
                    vC(r);
                    break;
                case "select":
                case "option":
                    break;
                default:
                    typeof o.onClick == "function" && (r.onclick = Bm)
                }
                r = i,
                t.updateQueue = r,
                r !== null && (t.flags |= 4)
            } else {
                s = i.nodeType === 9 ? i : i.ownerDocument,
                e === "http://www.w3.org/1999/xhtml" && (e = U7(n)),
                e === "http://www.w3.org/1999/xhtml" ? n === "script" ? (e = s.createElement("div"),
                e.innerHTML = "<script><\/script>",
                e = e.removeChild(e.firstChild)) : typeof r.is == "string" ? e = s.createElement(n, {
                    is: r.is
                }) : (e = s.createElement(n),
                n === "select" && (s = e,
                r.multiple ? s.multiple = !0 : r.size && (s.size = r.size))) : e = s.createElementNS(e, n),
                e[ps] = t,
                e[Gg] = r,
                fP(e, t, !1, !1),
                t.stateNode = e;
                e: {
                    switch (s = e3(n, r),
                    n) {
                    case "dialog":
                        Kt("cancel", e),
                        Kt("close", e),
                        i = r;
                        break;
                    case "iframe":
                    case "object":
                    case "embed":
                        Kt("load", e),
                        i = r;
                        break;
                    case "video":
                    case "audio":
                        for (i = 0; i < Gh.length; i++)
                            Kt(Gh[i], e);
                        i = r;
                        break;
                    case "source":
                        Kt("error", e),
                        i = r;
                        break;
                    case "img":
                    case "image":
                    case "link":
                        Kt("error", e),
                        Kt("load", e),
                        i = r;
                        break;
                    case "details":
                        Kt("toggle", e),
                        i = r;
                        break;
                    case "input":
                        gC(e, r),
                        i = Kb(e, r),
                        Kt("invalid", e);
                        break;
                    case "option":
                        i = r;
                        break;
                    case "select":
                        e._wrapperState = {
                            wasMultiple: !!r.multiple
                        },
                        i = un({}, r, {
                            value: void 0
                        }),
                        Kt("invalid", e);
                        break;
                    case "textarea":
                        mC(e, r),
                        i = qb(e, r),
                        Kt("invalid", e);
                        break;
                    default:
                        i = r
                    }
                    Jb(n, i),
                    a = i;
                    for (o in a)
                        if (a.hasOwnProperty(o)) {
                            var l = a[o];
                            o === "style" ? G7(e, l) : o === "dangerouslySetInnerHTML" ? (l = l ? l.__html : void 0,
                            l != null && H7(e, l)) : o === "children" ? typeof l == "string" ? (n !== "textarea" || l !== "") && Og(e, l) : typeof l == "number" && Og(e, "" + l) : o !== "suppressContentEditableWarning" && o !== "suppressHydrationWarning" && o !== "autoFocus" && (Dg.hasOwnProperty(o) ? l != null && o === "onScroll" && Kt("scroll", e) : l != null && Cx(e, o, l, s))
                        }
                    switch (n) {
                    case "input":
                        Z1(e),
                        pC(e, r, !1);
                        break;
                    case "textarea":
                        Z1(e),
                        vC(e);
                        break;
                    case "option":
                        r.value != null && e.setAttribute("value", "" + zl(r.value));
                        break;
                    case "select":
                        e.multiple = !!r.multiple,
                        o = r.value,
                        o != null ? zd(e, !!r.multiple, o, !1) : r.defaultValue != null && zd(e, !!r.multiple, r.defaultValue, !0);
                        break;
                    default:
                        typeof i.onClick == "function" && (e.onclick = Bm)
                    }
                    switch (n) {
                    case "button":
                    case "input":
                    case "select":
                    case "textarea":
                        r = !!r.autoFocus;
                        break e;
                    case "img":
                        r = !0;
                        break e;
                    default:
                        r = !1
                    }
                }
                r && (t.flags |= 4)
            }
            t.ref !== null && (t.flags |= 512,
            t.flags |= 2097152)
        }
        return mr(t),
        null;
    case 6:
        if (e && t.stateNode != null)
            gP(e, t, e.memoizedProps, r);
        else {
            if (typeof r != "string" && t.stateNode === null)
                throw Error(me(166));
            if (n = Oc(Yg.current),
            Oc(xs.current),
            o0(t)) {
                if (r = t.stateNode,
                n = t.memoizedProps,
                r[ps] = t,
                (o = r.nodeValue !== n) && (e = Li,
                e !== null))
                    switch (e.tag) {
                    case 3:
                        i0(r.nodeValue, n, (e.mode & 1) !== 0);
                        break;
                    case 5:
                        e.memoizedProps.suppressHydrationWarning !== !0 && i0(r.nodeValue, n, (e.mode & 1) !== 0)
                    }
                o && (t.flags |= 4)
            } else
                r = (n.nodeType === 9 ? n : n.ownerDocument).createTextNode(r),
                r[ps] = t,
                t.stateNode = r
        }
        return mr(t),
        null;
    case 13:
        if (qt(an),
        r = t.memoizedState,
        e === null || e.memoizedState !== null && e.memoizedState.dehydrated !== null) {
            if (nn && Ti !== null && t.mode & 1 && !(t.flags & 128))
                LL(),
                nf(),
                t.flags |= 98560,
                o = !1;
            else if (o = o0(t),
            r !== null && r.dehydrated !== null) {
                if (e === null) {
                    if (!o)
                        throw Error(me(318));
                    if (o = t.memoizedState,
                    o = o !== null ? o.dehydrated : null,
                    !o)
                        throw Error(me(317));
                    o[ps] = t
                } else
                    nf(),
                    !(t.flags & 128) && (t.memoizedState = null),
                    t.flags |= 4;
                mr(t),
                o = !1
            } else
                Oo !== null && (D3(Oo),
                Oo = null),
                o = !0;
            if (!o)
                return t.flags & 65536 ? t : null
        }
        return t.flags & 128 ? (t.lanes = n,
        t) : (r = r !== null,
        r !== (e !== null && e.memoizedState !== null) && r && (t.child.flags |= 8192,
        t.mode & 1 && (e === null || an.current & 1 ? Un === 0 && (Un = 3) : l6())),
        t.updateQueue !== null && (t.flags |= 4),
        mr(t),
        null);
    case 4:
        return of(),
        C3(e, t),
        e === null && Hg(t.stateNode.containerInfo),
        mr(t),
        null;
    case 10:
        return Vx(t.type._context),
        mr(t),
        null;
    case 17:
        return di(t.type) && zm(),
        mr(t),
        null;
    case 19:
        if (qt(an),
        o = t.memoizedState,
        o === null)
            return mr(t),
            null;
        if (r = (t.flags & 128) !== 0,
        s = o.rendering,
        s === null)
            if (r)
                vh(o, !1);
            else {
                if (Un !== 0 || e !== null && e.flags & 128)
                    for (e = t.child; e !== null; ) {
                        if (s = Ym(e),
                        s !== null) {
                            for (t.flags |= 128,
                            vh(o, !1),
                            r = s.updateQueue,
                            r !== null && (t.updateQueue = r,
                            t.flags |= 4),
                            t.subtreeFlags = 0,
                            r = n,
                            n = t.child; n !== null; )
                                o = n,
                                e = r,
                                o.flags &= 14680066,
                                s = o.alternate,
                                s === null ? (o.childLanes = 0,
                                o.lanes = e,
                                o.child = null,
                                o.subtreeFlags = 0,
                                o.memoizedProps = null,
                                o.memoizedState = null,
                                o.updateQueue = null,
                                o.dependencies = null,
                                o.stateNode = null) : (o.childLanes = s.childLanes,
                                o.lanes = s.lanes,
                                o.child = s.child,
                                o.subtreeFlags = 0,
                                o.deletions = null,
                                o.memoizedProps = s.memoizedProps,
                                o.memoizedState = s.memoizedState,
                                o.updateQueue = s.updateQueue,
                                o.type = s.type,
                                e = s.dependencies,
                                o.dependencies = e === null ? null : {
                                    lanes: e.lanes,
                                    firstContext: e.firstContext
                                }),
                                n = n.sibling;
                            return Vt(an, an.current & 1 | 2),
                            t.child
                        }
                        e = e.sibling
                    }
                o.tail !== null && _n() > af && (t.flags |= 128,
                r = !0,
                vh(o, !1),
                t.lanes = 4194304)
            }
        else {
            if (!r)
                if (e = Ym(s),
                e !== null) {
                    if (t.flags |= 128,
                    r = !0,
                    n = e.updateQueue,
                    n !== null && (t.updateQueue = n,
                    t.flags |= 4),
                    vh(o, !0),
                    o.tail === null && o.tailMode === "hidden" && !s.alternate && !nn)
                        return mr(t),
                        null
                } else
                    2 * _n() - o.renderingStartTime > af && n !== 1073741824 && (t.flags |= 128,
                    r = !0,
                    vh(o, !1),
                    t.lanes = 4194304);
            o.isBackwards ? (s.sibling = t.child,
            t.child = s) : (n = o.last,
            n !== null ? n.sibling = s : t.child = s,
            o.last = s)
        }
        return o.tail !== null ? (t = o.tail,
        o.rendering = t,
        o.tail = t.sibling,
        o.renderingStartTime = _n(),
        t.sibling = null,
        n = an.current,
        Vt(an, r ? n & 1 | 2 : n & 1),
        t) : (mr(t),
        null);
    case 22:
    case 23:
        return a6(),
        r = t.memoizedState !== null,
        e !== null && e.memoizedState !== null !== r && (t.flags |= 8192),
        r && t.mode & 1 ? Ci & 1073741824 && (mr(t),
        t.subtreeFlags & 6 && (t.flags |= 8192)) : mr(t),
        null;
    case 24:
        return null;
    case 25:
        return null
    }
    throw Error(me(156, t.tag))
}
function pZ(e, t) {
    switch (Ux(t),
    t.tag) {
    case 1:
        return di(t.type) && zm(),
        e = t.flags,
        e & 65536 ? (t.flags = e & -65537 | 128,
        t) : null;
    case 3:
        return of(),
        qt(ui),
        qt(Cr),
        Zx(),
        e = t.flags,
        e & 65536 && !(e & 128) ? (t.flags = e & -65537 | 128,
        t) : null;
    case 5:
        return Xx(t),
        null;
    case 13:
        if (qt(an),
        e = t.memoizedState,
        e !== null && e.dehydrated !== null) {
            if (t.alternate === null)
                throw Error(me(340));
            nf()
        }
        return e = t.flags,
        e & 65536 ? (t.flags = e & -65537 | 128,
        t) : null;
    case 19:
        return qt(an),
        null;
    case 4:
        return of(),
        null;
    case 10:
        return Vx(t.type._context),
        null;
    case 22:
    case 23:
        return a6(),
        null;
    case 24:
        return null;
    default:
        return null
    }
}
var l0 = !1
  , _r = !1
  , mZ = typeof WeakSet == "function" ? WeakSet : Set
  , Me = null;
function kd(e, t) {
    var n = e.ref;
    if (n !== null)
        if (typeof n == "function")
            try {
                n(null)
            } catch (r) {
                gn(e, t, r)
            }
        else
            n.current = null
}
function k3(e, t, n) {
    try {
        n()
    } catch (r) {
        gn(e, t, r)
    }
}
var sk = !1;
function vZ(e, t) {
    if (u3 = Om,
    e = yL(),
    zx(e)) {
        if ("selectionStart"in e)
            var n = {
                start: e.selectionStart,
                end: e.selectionEnd
            };
        else
            e: {
                n = (n = e.ownerDocument) && n.defaultView || window;
                var r = n.getSelection && n.getSelection();
                if (r && r.rangeCount !== 0) {
                    n = r.anchorNode;
                    var i = r.anchorOffset
                      , o = r.focusNode;
                    r = r.focusOffset;
                    try {
                        n.nodeType,
                        o.nodeType
                    } catch {
                        n = null;
                        break e
                    }
                    var s = 0
                      , a = -1
                      , l = -1
                      , c = 0
                      , u = 0
                      , f = e
                      , h = null;
                    t: for (; ; ) {
                        for (var m; f !== n || i !== 0 && f.nodeType !== 3 || (a = s + i),
                        f !== o || r !== 0 && f.nodeType !== 3 || (l = s + r),
                        f.nodeType === 3 && (s += f.nodeValue.length),
                        (m = f.firstChild) !== null; )
                            h = f,
                            f = m;
                        for (; ; ) {
                            if (f === e)
                                break t;
                            if (h === n && ++c === i && (a = s),
                            h === o && ++u === r && (l = s),
                            (m = f.nextSibling) !== null)
                                break;
                            f = h,
                            h = f.parentNode
                        }
                        f = m
                    }
                    n = a === -1 || l === -1 ? null : {
                        start: a,
                        end: l
                    }
                } else
                    n = null
            }
        n = n || {
            start: 0,
            end: 0
        }
    } else
        n = null;
    for (d3 = {
        focusedElem: e,
        selectionRange: n
    },
    Om = !1,
    Me = t; Me !== null; )
        if (t = Me,
        e = t.child,
        (t.subtreeFlags & 1028) !== 0 && e !== null)
            e.return = t,
            Me = e;
        else
            for (; Me !== null; ) {
                t = Me;
                try {
                    var v = t.alternate;
                    if (t.flags & 1024)
                        switch (t.tag) {
                        case 0:
                        case 11:
                        case 15:
                            break;
                        case 1:
                            if (v !== null) {
                                var y = v.memoizedProps
                                  , E = v.memoizedState
                                  , b = t.stateNode
                                  , _ = b.getSnapshotBeforeUpdate(t.elementType === t.type ? y : Lo(t.type, y), E);
                                b.__reactInternalSnapshotBeforeUpdate = _
                            }
                            break;
                        case 3:
                            var x = t.stateNode.containerInfo;
                            x.nodeType === 1 ? x.textContent = "" : x.nodeType === 9 && x.documentElement && x.removeChild(x.documentElement);
                            break;
                        case 5:
                        case 6:
                        case 4:
                        case 17:
                            break;
                        default:
                            throw Error(me(163))
                        }
                } catch (C) {
                    gn(t, t.return, C)
                }
                if (e = t.sibling,
                e !== null) {
                    e.return = t.return,
                    Me = e;
                    break
                }
                Me = t.return
            }
    return v = sk,
    sk = !1,
    v
}
function ug(e, t, n) {
    var r = t.updateQueue;
    if (r = r !== null ? r.lastEffect : null,
    r !== null) {
        var i = r = r.next;
        do {
            if ((i.tag & e) === e) {
                var o = i.destroy;
                i.destroy = void 0,
                o !== void 0 && k3(t, n, o)
            }
            i = i.next
        } while (i !== r)
    }
}
function wv(e, t) {
    if (t = t.updateQueue,
    t = t !== null ? t.lastEffect : null,
    t !== null) {
        var n = t = t.next;
        do {
            if ((n.tag & e) === e) {
                var r = n.create;
                n.destroy = r()
            }
            n = n.next
        } while (n !== t)
    }
}
function T3(e) {
    var t = e.ref;
    if (t !== null) {
        var n = e.stateNode;
        switch (e.tag) {
        case 5:
            e = n;
            break;
        default:
            e = n
        }
        typeof t == "function" ? t(e) : t.current = e
    }
}
function pP(e) {
    var t = e.alternate;
    t !== null && (e.alternate = null,
    pP(t)),
    e.child = null,
    e.deletions = null,
    e.sibling = null,
    e.tag === 5 && (t = e.stateNode,
    t !== null && (delete t[ps],
    delete t[Gg],
    delete t[g3],
    delete t[JX],
    delete t[eZ])),
    e.stateNode = null,
    e.return = null,
    e.dependencies = null,
    e.memoizedProps = null,
    e.memoizedState = null,
    e.pendingProps = null,
    e.stateNode = null,
    e.updateQueue = null
}
function mP(e) {
    return e.tag === 5 || e.tag === 3 || e.tag === 4
}
function ak(e) {
    e: for (; ; ) {
        for (; e.sibling === null; ) {
            if (e.return === null || mP(e.return))
                return null;
            e = e.return
        }
        for (e.sibling.return = e.return,
        e = e.sibling; e.tag !== 5 && e.tag !== 6 && e.tag !== 18; ) {
            if (e.flags & 2 || e.child === null || e.tag === 4)
                continue e;
            e.child.return = e,
            e = e.child
        }
        if (!(e.flags & 2))
            return e.stateNode
    }
}
function A3(e, t, n) {
    var r = e.tag;
    if (r === 5 || r === 6)
        e = e.stateNode,
        t ? n.nodeType === 8 ? n.parentNode.insertBefore(e, t) : n.insertBefore(e, t) : (n.nodeType === 8 ? (t = n.parentNode,
        t.insertBefore(e, n)) : (t = n,
        t.appendChild(e)),
        n = n._reactRootContainer,
        n != null || t.onclick !== null || (t.onclick = Bm));
    else if (r !== 4 && (e = e.child,
    e !== null))
        for (A3(e, t, n),
        e = e.sibling; e !== null; )
            A3(e, t, n),
            e = e.sibling
}
function M3(e, t, n) {
    var r = e.tag;
    if (r === 5 || r === 6)
        e = e.stateNode,
        t ? n.insertBefore(e, t) : n.appendChild(e);
    else if (r !== 4 && (e = e.child,
    e !== null))
        for (M3(e, t, n),
        e = e.sibling; e !== null; )
            M3(e, t, n),
            e = e.sibling
}
var tr = null
  , Ro = !1;
function Ka(e, t, n) {
    for (n = n.child; n !== null; )
        vP(e, t, n),
        n = n.sibling
}
function vP(e, t, n) {
    if (_s && typeof _s.onCommitFiberUnmount == "function")
        try {
            _s.onCommitFiberUnmount(dv, n)
        } catch {}
    switch (n.tag) {
    case 5:
        _r || kd(n, t);
    case 6:
        var r = tr
          , i = Ro;
        tr = null,
        Ka(e, t, n),
        tr = r,
        Ro = i,
        tr !== null && (Ro ? (e = tr,
        n = n.stateNode,
        e.nodeType === 8 ? e.parentNode.removeChild(n) : e.removeChild(n)) : tr.removeChild(n.stateNode));
        break;
    case 18:
        tr !== null && (Ro ? (e = tr,
        n = n.stateNode,
        e.nodeType === 8 ? gE(e.parentNode, n) : e.nodeType === 1 && gE(e, n),
        zg(e)) : gE(tr, n.stateNode));
        break;
    case 4:
        r = tr,
        i = Ro,
        tr = n.stateNode.containerInfo,
        Ro = !0,
        Ka(e, t, n),
        tr = r,
        Ro = i;
        break;
    case 0:
    case 11:
    case 14:
    case 15:
        if (!_r && (r = n.updateQueue,
        r !== null && (r = r.lastEffect,
        r !== null))) {
            i = r = r.next;
            do {
                var o = i
                  , s = o.destroy;
                o = o.tag,
                s !== void 0 && (o & 2 || o & 4) && k3(n, t, s),
                i = i.next
            } while (i !== r)
        }
        Ka(e, t, n);
        break;
    case 1:
        if (!_r && (kd(n, t),
        r = n.stateNode,
        typeof r.componentWillUnmount == "function"))
            try {
                r.props = n.memoizedProps,
                r.state = n.memoizedState,
                r.componentWillUnmount()
            } catch (a) {
                gn(n, t, a)
            }
        Ka(e, t, n);
        break;
    case 21:
        Ka(e, t, n);
        break;
    case 22:
        n.mode & 1 ? (_r = (r = _r) || n.memoizedState !== null,
        Ka(e, t, n),
        _r = r) : Ka(e, t, n);
        break;
    default:
        Ka(e, t, n)
    }
}
function lk(e) {
    var t = e.updateQueue;
    if (t !== null) {
        e.updateQueue = null;
        var n = e.stateNode;
        n === null && (n = e.stateNode = new mZ),
        t.forEach(function(r) {
            var i = CZ.bind(null, e, r);
            n.has(r) || (n.add(r),
            r.then(i, i))
        })
    }
}
function So(e, t) {
    var n = t.deletions;
    if (n !== null)
        for (var r = 0; r < n.length; r++) {
            var i = n[r];
            try {
                var o = e
                  , s = t
                  , a = s;
                e: for (; a !== null; ) {
                    switch (a.tag) {
                    case 5:
                        tr = a.stateNode,
                        Ro = !1;
                        break e;
                    case 3:
                        tr = a.stateNode.containerInfo,
                        Ro = !0;
                        break e;
                    case 4:
                        tr = a.stateNode.containerInfo,
                        Ro = !0;
                        break e
                    }
                    a = a.return
                }
                if (tr === null)
                    throw Error(me(160));
                vP(o, s, i),
                tr = null,
                Ro = !1;
                var l = i.alternate;
                l !== null && (l.return = null),
                i.return = null
            } catch (c) {
                gn(i, t, c)
            }
        }
    if (t.subtreeFlags & 12854)
        for (t = t.child; t !== null; )
            yP(t, e),
            t = t.sibling
}
function yP(e, t) {
    var n = e.alternate
      , r = e.flags;
    switch (e.tag) {
    case 0:
    case 11:
    case 14:
    case 15:
        if (So(t, e),
        ts(e),
        r & 4) {
            try {
                ug(3, e, e.return),
                wv(3, e)
            } catch (y) {
                gn(e, e.return, y)
            }
            try {
                ug(5, e, e.return)
            } catch (y) {
                gn(e, e.return, y)
            }
        }
        break;
    case 1:
        So(t, e),
        ts(e),
        r & 512 && n !== null && kd(n, n.return);
        break;
    case 5:
        if (So(t, e),
        ts(e),
        r & 512 && n !== null && kd(n, n.return),
        e.flags & 32) {
            var i = e.stateNode;
            try {
                Og(i, "")
            } catch (y) {
                gn(e, e.return, y)
            }
        }
        if (r & 4 && (i = e.stateNode,
        i != null)) {
            var o = e.memoizedProps
              , s = n !== null ? n.memoizedProps : o
              , a = e.type
              , l = e.updateQueue;
            if (e.updateQueue = null,
            l !== null)
                try {
                    a === "input" && o.type === "radio" && o.name != null && z7(i, o),
                    e3(a, s);
                    var c = e3(a, o);
                    for (s = 0; s < l.length; s += 2) {
                        var u = l[s]
                          , f = l[s + 1];
                        u === "style" ? G7(i, f) : u === "dangerouslySetInnerHTML" ? H7(i, f) : u === "children" ? Og(i, f) : Cx(i, u, f, c)
                    }
                    switch (a) {
                    case "input":
                        Xb(i, o);
                        break;
                    case "textarea":
                        $7(i, o);
                        break;
                    case "select":
                        var h = i._wrapperState.wasMultiple;
                        i._wrapperState.wasMultiple = !!o.multiple;
                        var m = o.value;
                        m != null ? zd(i, !!o.multiple, m, !1) : h !== !!o.multiple && (o.defaultValue != null ? zd(i, !!o.multiple, o.defaultValue, !0) : zd(i, !!o.multiple, o.multiple ? [] : "", !1))
                    }
                    i[Gg] = o
                } catch (y) {
                    gn(e, e.return, y)
                }
        }
        break;
    case 6:
        if (So(t, e),
        ts(e),
        r & 4) {
            if (e.stateNode === null)
                throw Error(me(162));
            i = e.stateNode,
            o = e.memoizedProps;
            try {
                i.nodeValue = o
            } catch (y) {
                gn(e, e.return, y)
            }
        }
        break;
    case 3:
        if (So(t, e),
        ts(e),
        r & 4 && n !== null && n.memoizedState.isDehydrated)
            try {
                zg(t.containerInfo)
            } catch (y) {
                gn(e, e.return, y)
            }
        break;
    case 4:
        So(t, e),
        ts(e);
        break;
    case 13:
        So(t, e),
        ts(e),
        i = e.child,
        i.flags & 8192 && (o = i.memoizedState !== null,
        i.stateNode.isHidden = o,
        !o || i.alternate !== null && i.alternate.memoizedState !== null || (o6 = _n())),
        r & 4 && lk(e);
        break;
    case 22:
        if (u = n !== null && n.memoizedState !== null,
        e.mode & 1 ? (_r = (c = _r) || u,
        So(t, e),
        _r = c) : So(t, e),
        ts(e),
        r & 8192) {
            if (c = e.memoizedState !== null,
            (e.stateNode.isHidden = c) && !u && e.mode & 1)
                for (Me = e,
                u = e.child; u !== null; ) {
                    for (f = Me = u; Me !== null; ) {
                        switch (h = Me,
                        m = h.child,
                        h.tag) {
                        case 0:
                        case 11:
                        case 14:
                        case 15:
                            ug(4, h, h.return);
                            break;
                        case 1:
                            kd(h, h.return);
                            var v = h.stateNode;
                            if (typeof v.componentWillUnmount == "function") {
                                r = h,
                                n = h.return;
                                try {
                                    t = r,
                                    v.props = t.memoizedProps,
                                    v.state = t.memoizedState,
                                    v.componentWillUnmount()
                                } catch (y) {
                                    gn(r, n, y)
                                }
                            }
                            break;
                        case 5:
                            kd(h, h.return);
                            break;
                        case 22:
                            if (h.memoizedState !== null) {
                                uk(f);
                                continue
                            }
                        }
                        m !== null ? (m.return = h,
                        Me = m) : uk(f)
                    }
                    u = u.sibling
                }
            e: for (u = null,
            f = e; ; ) {
                if (f.tag === 5) {
                    if (u === null) {
                        u = f;
                        try {
                            i = f.stateNode,
                            c ? (o = i.style,
                            typeof o.setProperty == "function" ? o.setProperty("display", "none", "important") : o.display = "none") : (a = f.stateNode,
                            l = f.memoizedProps.style,
                            s = l != null && l.hasOwnProperty("display") ? l.display : null,
                            a.style.display = W7("display", s))
                        } catch (y) {
                            gn(e, e.return, y)
                        }
                    }
                } else if (f.tag === 6) {
                    if (u === null)
                        try {
                            f.stateNode.nodeValue = c ? "" : f.memoizedProps
                        } catch (y) {
                            gn(e, e.return, y)
                        }
                } else if ((f.tag !== 22 && f.tag !== 23 || f.memoizedState === null || f === e) && f.child !== null) {
                    f.child.return = f,
                    f = f.child;
                    continue
                }
                if (f === e)
                    break e;
                for (; f.sibling === null; ) {
                    if (f.return === null || f.return === e)
                        break e;
                    u === f && (u = null),
                    f = f.return
                }
                u === f && (u = null),
                f.sibling.return = f.return,
                f = f.sibling
            }
        }
        break;
    case 19:
        So(t, e),
        ts(e),
        r & 4 && lk(e);
        break;
    case 21:
        break;
    default:
        So(t, e),
        ts(e)
    }
}
function ts(e) {
    var t = e.flags;
    if (t & 2) {
        try {
            e: {
                for (var n = e.return; n !== null; ) {
                    if (mP(n)) {
                        var r = n;
                        break e
                    }
                    n = n.return
                }
                throw Error(me(160))
            }
            switch (r.tag) {
            case 5:
                var i = r.stateNode;
                r.flags & 32 && (Og(i, ""),
                r.flags &= -33);
                var o = ak(e);
                M3(e, o, i);
                break;
            case 3:
            case 4:
                var s = r.stateNode.containerInfo
                  , a = ak(e);
                A3(e, a, s);
                break;
            default:
                throw Error(me(161))
            }
        } catch (l) {
            gn(e, e.return, l)
        }
        e.flags &= -3
    }
    t & 4096 && (e.flags &= -4097)
}
function yZ(e, t, n) {
    Me = e,
    wP(e)
}
function wP(e, t, n) {
    for (var r = (e.mode & 1) !== 0; Me !== null; ) {
        var i = Me
          , o = i.child;
        if (i.tag === 22 && r) {
            var s = i.memoizedState !== null || l0;
            if (!s) {
                var a = i.alternate
                  , l = a !== null && a.memoizedState !== null || _r;
                a = l0;
                var c = _r;
                if (l0 = s,
                (_r = l) && !c)
                    for (Me = i; Me !== null; )
                        s = Me,
                        l = s.child,
                        s.tag === 22 && s.memoizedState !== null ? dk(i) : l !== null ? (l.return = s,
                        Me = l) : dk(i);
                for (; o !== null; )
                    Me = o,
                    wP(o),
                    o = o.sibling;
                Me = i,
                l0 = a,
                _r = c
            }
            ck(e)
        } else
            i.subtreeFlags & 8772 && o !== null ? (o.return = i,
            Me = o) : ck(e)
    }
}
function ck(e) {
    for (; Me !== null; ) {
        var t = Me;
        if (t.flags & 8772) {
            var n = t.alternate;
            try {
                if (t.flags & 8772)
                    switch (t.tag) {
                    case 0:
                    case 11:
                    case 15:
                        _r || wv(5, t);
                        break;
                    case 1:
                        var r = t.stateNode;
                        if (t.flags & 4 && !_r)
                            if (n === null)
                                r.componentDidMount();
                            else {
                                var i = t.elementType === t.type ? n.memoizedProps : Lo(t.type, n.memoizedProps);
                                r.componentDidUpdate(i, n.memoizedState, r.__reactInternalSnapshotBeforeUpdate)
                            }
                        var o = t.updateQueue;
                        o !== null && YC(t, o, r);
                        break;
                    case 3:
                        var s = t.updateQueue;
                        if (s !== null) {
                            if (n = null,
                            t.child !== null)
                                switch (t.child.tag) {
                                case 5:
                                    n = t.child.stateNode;
                                    break;
                                case 1:
                                    n = t.child.stateNode
                                }
                            YC(t, s, n)
                        }
                        break;
                    case 5:
                        var a = t.stateNode;
                        if (n === null && t.flags & 4) {
                            n = a;
                            var l = t.memoizedProps;
                            switch (t.type) {
                            case "button":
                            case "input":
                            case "select":
                            case "textarea":
                                l.autoFocus && n.focus();
                                break;
                            case "img":
                                l.src && (n.src = l.src)
                            }
                        }
                        break;
                    case 6:
                        break;
                    case 4:
                        break;
                    case 12:
                        break;
                    case 13:
                        if (t.memoizedState === null) {
                            var c = t.alternate;
                            if (c !== null) {
                                var u = c.memoizedState;
                                if (u !== null) {
                                    var f = u.dehydrated;
                                    f !== null && zg(f)
                                }
                            }
                        }
                        break;
                    case 19:
                    case 17:
                    case 21:
                    case 22:
                    case 23:
                    case 25:
                        break;
                    default:
                        throw Error(me(163))
                    }
                _r || t.flags & 512 && T3(t)
            } catch (h) {
                gn(t, t.return, h)
            }
        }
        if (t === e) {
            Me = null;
            break
        }
        if (n = t.sibling,
        n !== null) {
            n.return = t.return,
            Me = n;
            break
        }
        Me = t.return
    }
}
function uk(e) {
    for (; Me !== null; ) {
        var t = Me;
        if (t === e) {
            Me = null;
            break
        }
        var n = t.sibling;
        if (n !== null) {
            n.return = t.return,
            Me = n;
            break
        }
        Me = t.return
    }
}
function dk(e) {
    for (; Me !== null; ) {
        var t = Me;
        try {
            switch (t.tag) {
            case 0:
            case 11:
            case 15:
                var n = t.return;
                try {
                    wv(4, t)
                } catch (l) {
                    gn(t, n, l)
                }
                break;
            case 1:
                var r = t.stateNode;
                if (typeof r.componentDidMount == "function") {
                    var i = t.return;
                    try {
                        r.componentDidMount()
                    } catch (l) {
                        gn(t, i, l)
                    }
                }
                var o = t.return;
                try {
                    T3(t)
                } catch (l) {
                    gn(t, o, l)
                }
                break;
            case 5:
                var s = t.return;
                try {
                    T3(t)
                } catch (l) {
                    gn(t, s, l)
                }
            }
        } catch (l) {
            gn(t, t.return, l)
        }
        if (t === e) {
            Me = null;
            break
        }
        var a = t.sibling;
        if (a !== null) {
            a.return = t.return,
            Me = a;
            break
        }
        Me = t.return
    }
}
var wZ = Math.ceil
  , Xm = Pa.ReactCurrentDispatcher
  , r6 = Pa.ReactCurrentOwner
  , oo = Pa.ReactCurrentBatchConfig
  , yt = 0
  , Zn = null
  , kn = null
  , ar = 0
  , Ci = 0
  , Td = Ql(0)
  , Un = 0
  , Zg = null
  , ou = 0
  , Ev = 0
  , i6 = 0
  , dg = null
  , ti = null
  , o6 = 0
  , af = 1 / 0
  , Js = null
  , Zm = !1
  , L3 = null
  , Tl = null
  , c0 = !1
  , gl = null
  , qm = 0
  , fg = 0
  , P3 = null
  , em = -1
  , tm = 0;
function Ur() {
    return yt & 6 ? _n() : em !== -1 ? em : em = _n()
}
function Al(e) {
    return e.mode & 1 ? yt & 2 && ar !== 0 ? ar & -ar : nZ.transition !== null ? (tm === 0 && (tm = nL()),
    tm) : (e = Pt,
    e !== 0 || (e = window.event,
    e = e === void 0 ? 16 : cL(e.type)),
    e) : 1
}
function $o(e, t, n, r) {
    if (50 < fg)
        throw fg = 0,
        P3 = null,
        Error(me(185));
    Pp(e, n, r),
    (!(yt & 2) || e !== Zn) && (e === Zn && (!(yt & 2) && (Ev |= n),
    Un === 4 && ll(e, ar)),
    fi(e, r),
    n === 1 && yt === 0 && !(t.mode & 1) && (af = _n() + 500,
    mv && Jl()))
}
function fi(e, t) {
    var n = e.callbackNode;
    nX(e, t);
    var r = Dm(e, e === Zn ? ar : 0);
    if (r === 0)
        n !== null && EC(n),
        e.callbackNode = null,
        e.callbackPriority = 0;
    else if (t = r & -r,
    e.callbackPriority !== t) {
        if (n != null && EC(n),
        t === 1)
            e.tag === 0 ? tZ(fk.bind(null, e)) : TL(fk.bind(null, e)),
            qX(function() {
                !(yt & 6) && Jl()
            }),
            n = null;
        else {
            switch (rL(r)) {
            case 1:
                n = Lx;
                break;
            case 4:
                n = eL;
                break;
            case 16:
                n = Rm;
                break;
            case 536870912:
                n = tL;
                break;
            default:
                n = Rm
            }
            n = kP(n, EP.bind(null, e))
        }
        e.callbackPriority = t,
        e.callbackNode = n
    }
}
function EP(e, t) {
    if (em = -1,
    tm = 0,
    yt & 6)
        throw Error(me(327));
    var n = e.callbackNode;
    if (Gd() && e.callbackNode !== n)
        return null;
    var r = Dm(e, e === Zn ? ar : 0);
    if (r === 0)
        return null;
    if (r & 30 || r & e.expiredLanes || t)
        t = Qm(e, r);
    else {
        t = r;
        var i = yt;
        yt |= 2;
        var o = _P();
        (Zn !== e || ar !== t) && (Js = null,
        af = _n() + 500,
        Yc(e, t));
        do
            try {
                _Z();
                break
            } catch (a) {
                bP(e, a)
            }
        while (!0);
        Gx(),
        Xm.current = o,
        yt = i,
        kn !== null ? t = 0 : (Zn = null,
        ar = 0,
        t = Un)
    }
    if (t !== 0) {
        if (t === 2 && (i = o3(e),
        i !== 0 && (r = i,
        t = R3(e, i))),
        t === 1)
            throw n = Zg,
            Yc(e, 0),
            ll(e, r),
            fi(e, _n()),
            n;
        if (t === 6)
            ll(e, r);
        else {
            if (i = e.current.alternate,
            !(r & 30) && !EZ(i) && (t = Qm(e, r),
            t === 2 && (o = o3(e),
            o !== 0 && (r = o,
            t = R3(e, o))),
            t === 1))
                throw n = Zg,
                Yc(e, 0),
                ll(e, r),
                fi(e, _n()),
                n;
            switch (e.finishedWork = i,
            e.finishedLanes = r,
            t) {
            case 0:
            case 1:
                throw Error(me(345));
            case 2:
                yc(e, ti, Js);
                break;
            case 3:
                if (ll(e, r),
                (r & 130023424) === r && (t = o6 + 500 - _n(),
                10 < t)) {
                    if (Dm(e, 0) !== 0)
                        break;
                    if (i = e.suspendedLanes,
                    (i & r) !== r) {
                        Ur(),
                        e.pingedLanes |= e.suspendedLanes & i;
                        break
                    }
                    e.timeoutHandle = h3(yc.bind(null, e, ti, Js), t);
                    break
                }
                yc(e, ti, Js);
                break;
            case 4:
                if (ll(e, r),
                (r & 4194240) === r)
                    break;
                for (t = e.eventTimes,
                i = -1; 0 < r; ) {
                    var s = 31 - zo(r);
                    o = 1 << s,
                    s = t[s],
                    s > i && (i = s),
                    r &= ~o
                }
                if (r = i,
                r = _n() - r,
                r = (120 > r ? 120 : 480 > r ? 480 : 1080 > r ? 1080 : 1920 > r ? 1920 : 3e3 > r ? 3e3 : 4320 > r ? 4320 : 1960 * wZ(r / 1960)) - r,
                10 < r) {
                    e.timeoutHandle = h3(yc.bind(null, e, ti, Js), r);
                    break
                }
                yc(e, ti, Js);
                break;
            case 5:
                yc(e, ti, Js);
                break;
            default:
                throw Error(me(329))
            }
        }
    }
    return fi(e, _n()),
    e.callbackNode === n ? EP.bind(null, e) : null
}
function R3(e, t) {
    var n = dg;
    return e.current.memoizedState.isDehydrated && (Yc(e, t).flags |= 256),
    e = Qm(e, t),
    e !== 2 && (t = ti,
    ti = n,
    t !== null && D3(t)),
    e
}
function D3(e) {
    ti === null ? ti = e : ti.push.apply(ti, e)
}
function EZ(e) {
    for (var t = e; ; ) {
        if (t.flags & 16384) {
            var n = t.updateQueue;
            if (n !== null && (n = n.stores,
            n !== null))
                for (var r = 0; r < n.length; r++) {
                    var i = n[r]
                      , o = i.getSnapshot;
                    i = i.value;
                    try {
                        if (!Vo(o(), i))
                            return !1
                    } catch {
                        return !1
                    }
                }
        }
        if (n = t.child,
        t.subtreeFlags & 16384 && n !== null)
            n.return = t,
            t = n;
        else {
            if (t === e)
                break;
            for (; t.sibling === null; ) {
                if (t.return === null || t.return === e)
                    return !0;
                t = t.return
            }
            t.sibling.return = t.return,
            t = t.sibling
        }
    }
    return !0
}
function ll(e, t) {
    for (t &= ~i6,
    t &= ~Ev,
    e.suspendedLanes |= t,
    e.pingedLanes &= ~t,
    e = e.expirationTimes; 0 < t; ) {
        var n = 31 - zo(t)
          , r = 1 << n;
        e[n] = -1,
        t &= ~r
    }
}
function fk(e) {
    if (yt & 6)
        throw Error(me(327));
    Gd();
    var t = Dm(e, 0);
    if (!(t & 1))
        return fi(e, _n()),
        null;
    var n = Qm(e, t);
    if (e.tag !== 0 && n === 2) {
        var r = o3(e);
        r !== 0 && (t = r,
        n = R3(e, r))
    }
    if (n === 1)
        throw n = Zg,
        Yc(e, 0),
        ll(e, t),
        fi(e, _n()),
        n;
    if (n === 6)
        throw Error(me(345));
    return e.finishedWork = e.current.alternate,
    e.finishedLanes = t,
    yc(e, ti, Js),
    fi(e, _n()),
    null
}
function s6(e, t) {
    var n = yt;
    yt |= 1;
    try {
        return e(t)
    } finally {
        yt = n,
        yt === 0 && (af = _n() + 500,
        mv && Jl())
    }
}
function su(e) {
    gl !== null && gl.tag === 0 && !(yt & 6) && Gd();
    var t = yt;
    yt |= 1;
    var n = oo.transition
      , r = Pt;
    try {
        if (oo.transition = null,
        Pt = 1,
        e)
            return e()
    } finally {
        Pt = r,
        oo.transition = n,
        yt = t,
        !(yt & 6) && Jl()
    }
}
function a6() {
    Ci = Td.current,
    qt(Td)
}
function Yc(e, t) {
    e.finishedWork = null,
    e.finishedLanes = 0;
    var n = e.timeoutHandle;
    if (n !== -1 && (e.timeoutHandle = -1,
    ZX(n)),
    kn !== null)
        for (n = kn.return; n !== null; ) {
            var r = n;
            switch (Ux(r),
            r.tag) {
            case 1:
                r = r.type.childContextTypes,
                r != null && zm();
                break;
            case 3:
                of(),
                qt(ui),
                qt(Cr),
                Zx();
                break;
            case 5:
                Xx(r);
                break;
            case 4:
                of();
                break;
            case 13:
                qt(an);
                break;
            case 19:
                qt(an);
                break;
            case 10:
                Vx(r.type._context);
                break;
            case 22:
            case 23:
                a6()
            }
            n = n.return
        }
    if (Zn = e,
    kn = e = Ml(e.current, null),
    ar = Ci = t,
    Un = 0,
    Zg = null,
    i6 = Ev = ou = 0,
    ti = dg = null,
    Dc !== null) {
        for (t = 0; t < Dc.length; t++)
            if (n = Dc[t],
            r = n.interleaved,
            r !== null) {
                n.interleaved = null;
                var i = r.next
                  , o = n.pending;
                if (o !== null) {
                    var s = o.next;
                    o.next = i,
                    r.next = s
                }
                n.pending = r
            }
        Dc = null
    }
    return e
}
function bP(e, t) {
    do {
        var n = kn;
        try {
            if (Gx(),
            q0.current = Km,
            jm) {
                for (var r = cn.memoizedState; r !== null; ) {
                    var i = r.queue;
                    i !== null && (i.pending = null),
                    r = r.next
                }
                jm = !1
            }
            if (iu = 0,
            jn = Bn = cn = null,
            cg = !1,
            jg = 0,
            r6.current = null,
            n === null || n.return === null) {
                Un = 1,
                Zg = t,
                kn = null;
                break
            }
            e: {
                var o = e
                  , s = n.return
                  , a = n
                  , l = t;
                if (t = ar,
                a.flags |= 32768,
                l !== null && typeof l == "object" && typeof l.then == "function") {
                    var c = l
                      , u = a
                      , f = u.tag;
                    if (!(u.mode & 1) && (f === 0 || f === 11 || f === 15)) {
                        var h = u.alternate;
                        h ? (u.updateQueue = h.updateQueue,
                        u.memoizedState = h.memoizedState,
                        u.lanes = h.lanes) : (u.updateQueue = null,
                        u.memoizedState = null)
                    }
                    var m = JC(s);
                    if (m !== null) {
                        m.flags &= -257,
                        ek(m, s, a, o, t),
                        m.mode & 1 && QC(o, c, t),
                        t = m,
                        l = c;
                        var v = t.updateQueue;
                        if (v === null) {
                            var y = new Set;
                            y.add(l),
                            t.updateQueue = y
                        } else
                            v.add(l);
                        break e
                    } else {
                        if (!(t & 1)) {
                            QC(o, c, t),
                            l6();
                            break e
                        }
                        l = Error(me(426))
                    }
                } else if (nn && a.mode & 1) {
                    var E = JC(s);
                    if (E !== null) {
                        !(E.flags & 65536) && (E.flags |= 256),
                        ek(E, s, a, o, t),
                        Hx(sf(l, a));
                        break e
                    }
                }
                o = l = sf(l, a),
                Un !== 4 && (Un = 2),
                dg === null ? dg = [o] : dg.push(o),
                o = s;
                do {
                    switch (o.tag) {
                    case 3:
                        o.flags |= 65536,
                        t &= -t,
                        o.lanes |= t;
                        var b = iP(o, l, t);
                        VC(o, b);
                        break e;
                    case 1:
                        a = l;
                        var _ = o.type
                          , x = o.stateNode;
                        if (!(o.flags & 128) && (typeof _.getDerivedStateFromError == "function" || x !== null && typeof x.componentDidCatch == "function" && (Tl === null || !Tl.has(x)))) {
                            o.flags |= 65536,
                            t &= -t,
                            o.lanes |= t;
                            var C = oP(o, a, t);
                            VC(o, C);
                            break e
                        }
                    }
                    o = o.return
                } while (o !== null)
            }
            SP(n)
        } catch (P) {
            t = P,
            kn === n && n !== null && (kn = n = n.return);
            continue
        }
        break
    } while (!0)
}
function _P() {
    var e = Xm.current;
    return Xm.current = Km,
    e === null ? Km : e
}
function l6() {
    (Un === 0 || Un === 3 || Un === 2) && (Un = 4),
    Zn === null || !(ou & 268435455) && !(Ev & 268435455) || ll(Zn, ar)
}
function Qm(e, t) {
    var n = yt;
    yt |= 2;
    var r = _P();
    (Zn !== e || ar !== t) && (Js = null,
    Yc(e, t));
    do
        try {
            bZ();
            break
        } catch (i) {
            bP(e, i)
        }
    while (!0);
    if (Gx(),
    yt = n,
    Xm.current = r,
    kn !== null)
        throw Error(me(261));
    return Zn = null,
    ar = 0,
    Un
}
function bZ() {
    for (; kn !== null; )
        xP(kn)
}
function _Z() {
    for (; kn !== null && !jK(); )
        xP(kn)
}
function xP(e) {
    var t = CP(e.alternate, e, Ci);
    e.memoizedProps = e.pendingProps,
    t === null ? SP(e) : kn = t,
    r6.current = null
}
function SP(e) {
    var t = e;
    do {
        var n = t.alternate;
        if (e = t.return,
        t.flags & 32768) {
            if (n = pZ(n, t),
            n !== null) {
                n.flags &= 32767,
                kn = n;
                return
            }
            if (e !== null)
                e.flags |= 32768,
                e.subtreeFlags = 0,
                e.deletions = null;
            else {
                Un = 6,
                kn = null;
                return
            }
        } else if (n = gZ(n, t, Ci),
        n !== null) {
            kn = n;
            return
        }
        if (t = t.sibling,
        t !== null) {
            kn = t;
            return
        }
        kn = t = e
    } while (t !== null);
    Un === 0 && (Un = 5)
}
function yc(e, t, n) {
    var r = Pt
      , i = oo.transition;
    try {
        oo.transition = null,
        Pt = 1,
        xZ(e, t, n, r)
    } finally {
        oo.transition = i,
        Pt = r
    }
    return null
}
function xZ(e, t, n, r) {
    do
        Gd();
    while (gl !== null);
    if (yt & 6)
        throw Error(me(327));
    n = e.finishedWork;
    var i = e.finishedLanes;
    if (n === null)
        return null;
    if (e.finishedWork = null,
    e.finishedLanes = 0,
    n === e.current)
        throw Error(me(177));
    e.callbackNode = null,
    e.callbackPriority = 0;
    var o = n.lanes | n.childLanes;
    if (rX(e, o),
    e === Zn && (kn = Zn = null,
    ar = 0),
    !(n.subtreeFlags & 2064) && !(n.flags & 2064) || c0 || (c0 = !0,
    kP(Rm, function() {
        return Gd(),
        null
    })),
    o = (n.flags & 15990) !== 0,
    n.subtreeFlags & 15990 || o) {
        o = oo.transition,
        oo.transition = null;
        var s = Pt;
        Pt = 1;
        var a = yt;
        yt |= 4,
        r6.current = null,
        vZ(e, n),
        yP(n, e),
        WX(d3),
        Om = !!u3,
        d3 = u3 = null,
        e.current = n,
        yZ(n),
        KK(),
        yt = a,
        Pt = s,
        oo.transition = o
    } else
        e.current = n;
    if (c0 && (c0 = !1,
    gl = e,
    qm = i),
    o = e.pendingLanes,
    o === 0 && (Tl = null),
    qK(n.stateNode),
    fi(e, _n()),
    t !== null)
        for (r = e.onRecoverableError,
        n = 0; n < t.length; n++)
            i = t[n],
            r(i.value, {
                componentStack: i.stack,
                digest: i.digest
            });
    if (Zm)
        throw Zm = !1,
        e = L3,
        L3 = null,
        e;
    return qm & 1 && e.tag !== 0 && Gd(),
    o = e.pendingLanes,
    o & 1 ? e === P3 ? fg++ : (fg = 0,
    P3 = e) : fg = 0,
    Jl(),
    null
}
function Gd() {
    if (gl !== null) {
        var e = rL(qm)
          , t = oo.transition
          , n = Pt;
        try {
            if (oo.transition = null,
            Pt = 16 > e ? 16 : e,
            gl === null)
                var r = !1;
            else {
                if (e = gl,
                gl = null,
                qm = 0,
                yt & 6)
                    throw Error(me(331));
                var i = yt;
                for (yt |= 4,
                Me = e.current; Me !== null; ) {
                    var o = Me
                      , s = o.child;
                    if (Me.flags & 16) {
                        var a = o.deletions;
                        if (a !== null) {
                            for (var l = 0; l < a.length; l++) {
                                var c = a[l];
                                for (Me = c; Me !== null; ) {
                                    var u = Me;
                                    switch (u.tag) {
                                    case 0:
                                    case 11:
                                    case 15:
                                        ug(8, u, o)
                                    }
                                    var f = u.child;
                                    if (f !== null)
                                        f.return = u,
                                        Me = f;
                                    else
                                        for (; Me !== null; ) {
                                            u = Me;
                                            var h = u.sibling
                                              , m = u.return;
                                            if (pP(u),
                                            u === c) {
                                                Me = null;
                                                break
                                            }
                                            if (h !== null) {
                                                h.return = m,
                                                Me = h;
                                                break
                                            }
                                            Me = m
                                        }
                                }
                            }
                            var v = o.alternate;
                            if (v !== null) {
                                var y = v.child;
                                if (y !== null) {
                                    v.child = null;
                                    do {
                                        var E = y.sibling;
                                        y.sibling = null,
                                        y = E
                                    } while (y !== null)
                                }
                            }
                            Me = o
                        }
                    }
                    if (o.subtreeFlags & 2064 && s !== null)
                        s.return = o,
                        Me = s;
                    else
                        e: for (; Me !== null; ) {
                            if (o = Me,
                            o.flags & 2048)
                                switch (o.tag) {
                                case 0:
                                case 11:
                                case 15:
                                    ug(9, o, o.return)
                                }
                            var b = o.sibling;
                            if (b !== null) {
                                b.return = o.return,
                                Me = b;
                                break e
                            }
                            Me = o.return
                        }
                }
                var _ = e.current;
                for (Me = _; Me !== null; ) {
                    s = Me;
                    var x = s.child;
                    if (s.subtreeFlags & 2064 && x !== null)
                        x.return = s,
                        Me = x;
                    else
                        e: for (s = _; Me !== null; ) {
                            if (a = Me,
                            a.flags & 2048)
                                try {
                                    switch (a.tag) {
                                    case 0:
                                    case 11:
                                    case 15:
                                        wv(9, a)
                                    }
                                } catch (P) {
                                    gn(a, a.return, P)
                                }
                            if (a === s) {
                                Me = null;
                                break e
                            }
                            var C = a.sibling;
                            if (C !== null) {
                                C.return = a.return,
                                Me = C;
                                break e
                            }
                            Me = a.return
                        }
                }
                if (yt = i,
                Jl(),
                _s && typeof _s.onPostCommitFiberRoot == "function")
                    try {
                        _s.onPostCommitFiberRoot(dv, e)
                    } catch {}
                r = !0
            }
            return r
        } finally {
            Pt = n,
            oo.transition = t
        }
    }
    return !1
}
function hk(e, t, n) {
    t = sf(n, t),
    t = iP(e, t, 1),
    e = kl(e, t, 1),
    t = Ur(),
    e !== null && (Pp(e, 1, t),
    fi(e, t))
}
function gn(e, t, n) {
    if (e.tag === 3)
        hk(e, e, n);
    else
        for (; t !== null; ) {
            if (t.tag === 3) {
                hk(t, e, n);
                break
            } else if (t.tag === 1) {
                var r = t.stateNode;
                if (typeof t.type.getDerivedStateFromError == "function" || typeof r.componentDidCatch == "function" && (Tl === null || !Tl.has(r))) {
                    e = sf(n, e),
                    e = oP(t, e, 1),
                    t = kl(t, e, 1),
                    e = Ur(),
                    t !== null && (Pp(t, 1, e),
                    fi(t, e));
                    break
                }
            }
            t = t.return
        }
}
function SZ(e, t, n) {
    var r = e.pingCache;
    r !== null && r.delete(t),
    t = Ur(),
    e.pingedLanes |= e.suspendedLanes & n,
    Zn === e && (ar & n) === n && (Un === 4 || Un === 3 && (ar & 130023424) === ar && 500 > _n() - o6 ? Yc(e, 0) : i6 |= n),
    fi(e, t)
}
function IP(e, t) {
    t === 0 && (e.mode & 1 ? (t = J1,
    J1 <<= 1,
    !(J1 & 130023424) && (J1 = 4194304)) : t = 1);
    var n = Ur();
    e = Ea(e, t),
    e !== null && (Pp(e, t, n),
    fi(e, n))
}
function IZ(e) {
    var t = e.memoizedState
      , n = 0;
    t !== null && (n = t.retryLane),
    IP(e, n)
}
function CZ(e, t) {
    var n = 0;
    switch (e.tag) {
    case 13:
        var r = e.stateNode
          , i = e.memoizedState;
        i !== null && (n = i.retryLane);
        break;
    case 19:
        r = e.stateNode;
        break;
    default:
        throw Error(me(314))
    }
    r !== null && r.delete(t),
    IP(e, n)
}
var CP;
CP = function(e, t, n) {
    if (e !== null)
        if (e.memoizedProps !== t.pendingProps || ui.current)
            oi = !0;
        else {
            if (!(e.lanes & n) && !(t.flags & 128))
                return oi = !1,
                hZ(e, t, n);
            oi = !!(e.flags & 131072)
        }
    else
        oi = !1,
        nn && t.flags & 1048576 && AL(t, Hm, t.index);
    switch (t.lanes = 0,
    t.tag) {
    case 2:
        var r = t.type;
        J0(e, t),
        e = t.pendingProps;
        var i = tf(t, Cr.current);
        Wd(t, n),
        i = Qx(null, t, r, e, i, n);
        var o = Jx();
        return t.flags |= 1,
        typeof i == "object" && i !== null && typeof i.render == "function" && i.$$typeof === void 0 ? (t.tag = 1,
        t.memoizedState = null,
        t.updateQueue = null,
        di(r) ? (o = !0,
        $m(t)) : o = !1,
        t.memoizedState = i.state !== null && i.state !== void 0 ? i.state : null,
        jx(t),
        i.updater = vv,
        t.stateNode = i,
        i._reactInternals = t,
        E3(t, r, e, n),
        t = x3(null, t, r, !0, o, n)) : (t.tag = 0,
        nn && o && $x(t),
        Nr(null, t, i, n),
        t = t.child),
        t;
    case 16:
        r = t.elementType;
        e: {
            switch (J0(e, t),
            e = t.pendingProps,
            i = r._init,
            r = i(r._payload),
            t.type = r,
            i = t.tag = TZ(r),
            e = Lo(r, e),
            i) {
            case 0:
                t = _3(null, t, r, e, n);
                break e;
            case 1:
                t = rk(null, t, r, e, n);
                break e;
            case 11:
                t = tk(null, t, r, e, n);
                break e;
            case 14:
                t = nk(null, t, r, Lo(r.type, e), n);
                break e
            }
            throw Error(me(306, r, ""))
        }
        return t;
    case 0:
        return r = t.type,
        i = t.pendingProps,
        i = t.elementType === r ? i : Lo(r, i),
        _3(e, t, r, i, n);
    case 1:
        return r = t.type,
        i = t.pendingProps,
        i = t.elementType === r ? i : Lo(r, i),
        rk(e, t, r, i, n);
    case 3:
        e: {
            if (cP(t),
            e === null)
                throw Error(me(387));
            r = t.pendingProps,
            o = t.memoizedState,
            i = o.element,
            RL(e, t),
            Vm(t, r, null, n);
            var s = t.memoizedState;
            if (r = s.element,
            o.isDehydrated)
                if (o = {
                    element: r,
                    isDehydrated: !1,
                    cache: s.cache,
                    pendingSuspenseBoundaries: s.pendingSuspenseBoundaries,
                    transitions: s.transitions
                },
                t.updateQueue.baseState = o,
                t.memoizedState = o,
                t.flags & 256) {
                    i = sf(Error(me(423)), t),
                    t = ik(e, t, r, n, i);
                    break e
                } else if (r !== i) {
                    i = sf(Error(me(424)), t),
                    t = ik(e, t, r, n, i);
                    break e
                } else
                    for (Ti = Cl(t.stateNode.containerInfo.firstChild),
                    Li = t,
                    nn = !0,
                    Oo = null,
                    n = FL(t, null, r, n),
                    t.child = n; n; )
                        n.flags = n.flags & -3 | 4096,
                        n = n.sibling;
            else {
                if (nf(),
                r === i) {
                    t = ba(e, t, n);
                    break e
                }
                Nr(e, t, r, n)
            }
            t = t.child
        }
        return t;
    case 5:
        return BL(t),
        e === null && v3(t),
        r = t.type,
        i = t.pendingProps,
        o = e !== null ? e.memoizedProps : null,
        s = i.children,
        f3(r, i) ? s = null : o !== null && f3(r, o) && (t.flags |= 32),
        lP(e, t),
        Nr(e, t, s, n),
        t.child;
    case 6:
        return e === null && v3(t),
        null;
    case 13:
        return uP(e, t, n);
    case 4:
        return Kx(t, t.stateNode.containerInfo),
        r = t.pendingProps,
        e === null ? t.child = rf(t, null, r, n) : Nr(e, t, r, n),
        t.child;
    case 11:
        return r = t.type,
        i = t.pendingProps,
        i = t.elementType === r ? i : Lo(r, i),
        tk(e, t, r, i, n);
    case 7:
        return Nr(e, t, t.pendingProps, n),
        t.child;
    case 8:
        return Nr(e, t, t.pendingProps.children, n),
        t.child;
    case 12:
        return Nr(e, t, t.pendingProps.children, n),
        t.child;
    case 10:
        e: {
            if (r = t.type._context,
            i = t.pendingProps,
            o = t.memoizedProps,
            s = i.value,
            Vt(Wm, r._currentValue),
            r._currentValue = s,
            o !== null)
                if (Vo(o.value, s)) {
                    if (o.children === i.children && !ui.current) {
                        t = ba(e, t, n);
                        break e
                    }
                } else
                    for (o = t.child,
                    o !== null && (o.return = t); o !== null; ) {
                        var a = o.dependencies;
                        if (a !== null) {
                            s = o.child;
                            for (var l = a.firstContext; l !== null; ) {
                                if (l.context === r) {
                                    if (o.tag === 1) {
                                        l = da(-1, n & -n),
                                        l.tag = 2;
                                        var c = o.updateQueue;
                                        if (c !== null) {
                                            c = c.shared;
                                            var u = c.pending;
                                            u === null ? l.next = l : (l.next = u.next,
                                            u.next = l),
                                            c.pending = l
                                        }
                                    }
                                    o.lanes |= n,
                                    l = o.alternate,
                                    l !== null && (l.lanes |= n),
                                    y3(o.return, n, t),
                                    a.lanes |= n;
                                    break
                                }
                                l = l.next
                            }
                        } else if (o.tag === 10)
                            s = o.type === t.type ? null : o.child;
                        else if (o.tag === 18) {
                            if (s = o.return,
                            s === null)
                                throw Error(me(341));
                            s.lanes |= n,
                            a = s.alternate,
                            a !== null && (a.lanes |= n),
                            y3(s, n, t),
                            s = o.sibling
                        } else
                            s = o.child;
                        if (s !== null)
                            s.return = o;
                        else
                            for (s = o; s !== null; ) {
                                if (s === t) {
                                    s = null;
                                    break
                                }
                                if (o = s.sibling,
                                o !== null) {
                                    o.return = s.return,
                                    s = o;
                                    break
                                }
                                s = s.return
                            }
                        o = s
                    }
            Nr(e, t, i.children, n),
            t = t.child
        }
        return t;
    case 9:
        return i = t.type,
        r = t.pendingProps.children,
        Wd(t, n),
        i = uo(i),
        r = r(i),
        t.flags |= 1,
        Nr(e, t, r, n),
        t.child;
    case 14:
        return r = t.type,
        i = Lo(r, t.pendingProps),
        i = Lo(r.type, i),
        nk(e, t, r, i, n);
    case 15:
        return sP(e, t, t.type, t.pendingProps, n);
    case 17:
        return r = t.type,
        i = t.pendingProps,
        i = t.elementType === r ? i : Lo(r, i),
        J0(e, t),
        t.tag = 1,
        di(r) ? (e = !0,
        $m(t)) : e = !1,
        Wd(t, n),
        OL(t, r, i),
        E3(t, r, i, n),
        x3(null, t, r, !0, e, n);
    case 19:
        return dP(e, t, n);
    case 22:
        return aP(e, t, n)
    }
    throw Error(me(156, t.tag))
}
;
function kP(e, t) {
    return J7(e, t)
}
function kZ(e, t, n, r) {
    this.tag = e,
    this.key = n,
    this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null,
    this.index = 0,
    this.ref = null,
    this.pendingProps = t,
    this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null,
    this.mode = r,
    this.subtreeFlags = this.flags = 0,
    this.deletions = null,
    this.childLanes = this.lanes = 0,
    this.alternate = null
}
function to(e, t, n, r) {
    return new kZ(e,t,n,r)
}
function c6(e) {
    return e = e.prototype,
    !(!e || !e.isReactComponent)
}
function TZ(e) {
    if (typeof e == "function")
        return c6(e) ? 1 : 0;
    if (e != null) {
        if (e = e.$$typeof,
        e === Tx)
            return 11;
        if (e === Ax)
            return 14
    }
    return 2
}
function Ml(e, t) {
    var n = e.alternate;
    return n === null ? (n = to(e.tag, t, e.key, e.mode),
    n.elementType = e.elementType,
    n.type = e.type,
    n.stateNode = e.stateNode,
    n.alternate = e,
    e.alternate = n) : (n.pendingProps = t,
    n.type = e.type,
    n.flags = 0,
    n.subtreeFlags = 0,
    n.deletions = null),
    n.flags = e.flags & 14680064,
    n.childLanes = e.childLanes,
    n.lanes = e.lanes,
    n.child = e.child,
    n.memoizedProps = e.memoizedProps,
    n.memoizedState = e.memoizedState,
    n.updateQueue = e.updateQueue,
    t = e.dependencies,
    n.dependencies = t === null ? null : {
        lanes: t.lanes,
        firstContext: t.firstContext
    },
    n.sibling = e.sibling,
    n.index = e.index,
    n.ref = e.ref,
    n
}
function nm(e, t, n, r, i, o) {
    var s = 2;
    if (r = e,
    typeof e == "function")
        c6(e) && (s = 1);
    else if (typeof e == "string")
        s = 5;
    else
        e: switch (e) {
        case yd:
            return jc(n.children, i, o, t);
        case kx:
            s = 8,
            i |= 8;
            break;
        case Gb:
            return e = to(12, n, t, i | 2),
            e.elementType = Gb,
            e.lanes = o,
            e;
        case Vb:
            return e = to(13, n, t, i),
            e.elementType = Vb,
            e.lanes = o,
            e;
        case Yb:
            return e = to(19, n, t, i),
            e.elementType = Yb,
            e.lanes = o,
            e;
        case N7:
            return bv(n, i, o, t);
        default:
            if (typeof e == "object" && e !== null)
                switch (e.$$typeof) {
                case D7:
                    s = 10;
                    break e;
                case O7:
                    s = 9;
                    break e;
                case Tx:
                    s = 11;
                    break e;
                case Ax:
                    s = 14;
                    break e;
                case tl:
                    s = 16,
                    r = null;
                    break e
                }
            throw Error(me(130, e == null ? e : typeof e, ""))
        }
    return t = to(s, n, t, i),
    t.elementType = e,
    t.type = r,
    t.lanes = o,
    t
}
function jc(e, t, n, r) {
    return e = to(7, e, r, t),
    e.lanes = n,
    e
}
function bv(e, t, n, r) {
    return e = to(22, e, r, t),
    e.elementType = N7,
    e.lanes = n,
    e.stateNode = {
        isHidden: !1
    },
    e
}
function _E(e, t, n) {
    return e = to(6, e, null, t),
    e.lanes = n,
    e
}
function xE(e, t, n) {
    return t = to(4, e.children !== null ? e.children : [], e.key, t),
    t.lanes = n,
    t.stateNode = {
        containerInfo: e.containerInfo,
        pendingChildren: null,
        implementation: e.implementation
    },
    t
}
function AZ(e, t, n, r, i) {
    this.tag = t,
    this.containerInfo = e,
    this.finishedWork = this.pingCache = this.current = this.pendingChildren = null,
    this.timeoutHandle = -1,
    this.callbackNode = this.pendingContext = this.context = null,
    this.callbackPriority = 0,
    this.eventTimes = rE(0),
    this.expirationTimes = rE(-1),
    this.entangledLanes = this.finishedLanes = this.mutableReadLanes = this.expiredLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0,
    this.entanglements = rE(0),
    this.identifierPrefix = r,
    this.onRecoverableError = i,
    this.mutableSourceEagerHydrationData = null
}
function u6(e, t, n, r, i, o, s, a, l) {
    return e = new AZ(e,t,n,a,l),
    t === 1 ? (t = 1,
    o === !0 && (t |= 8)) : t = 0,
    o = to(3, null, null, t),
    e.current = o,
    o.stateNode = e,
    o.memoizedState = {
        element: r,
        isDehydrated: n,
        cache: null,
        transitions: null,
        pendingSuspenseBoundaries: null
    },
    jx(o),
    e
}
function MZ(e, t, n) {
    var r = 3 < arguments.length && arguments[3] !== void 0 ? arguments[3] : null;
    return {
        $$typeof: vd,
        key: r == null ? null : "" + r,
        children: e,
        containerInfo: t,
        implementation: n
    }
}
function TP(e) {
    if (!e)
        return $l;
    e = e._reactInternals;
    e: {
        if (Cu(e) !== e || e.tag !== 1)
            throw Error(me(170));
        var t = e;
        do {
            switch (t.tag) {
            case 3:
                t = t.stateNode.context;
                break e;
            case 1:
                if (di(t.type)) {
                    t = t.stateNode.__reactInternalMemoizedMergedChildContext;
                    break e
                }
            }
            t = t.return
        } while (t !== null);
        throw Error(me(171))
    }
    if (e.tag === 1) {
        var n = e.type;
        if (di(n))
            return kL(e, n, t)
    }
    return t
}
function AP(e, t, n, r, i, o, s, a, l) {
    return e = u6(n, r, !0, e, i, o, s, a, l),
    e.context = TP(null),
    n = e.current,
    r = Ur(),
    i = Al(n),
    o = da(r, i),
    o.callback = t ?? null,
    kl(n, o, i),
    e.current.lanes = i,
    Pp(e, i, r),
    fi(e, r),
    e
}
function _v(e, t, n, r) {
    var i = t.current
      , o = Ur()
      , s = Al(i);
    return n = TP(n),
    t.context === null ? t.context = n : t.pendingContext = n,
    t = da(o, s),
    t.payload = {
        element: e
    },
    r = r === void 0 ? null : r,
    r !== null && (t.callback = r),
    e = kl(i, t, s),
    e !== null && ($o(e, i, s, o),
    Z0(e, i, s)),
    s
}
function Jm(e) {
    if (e = e.current,
    !e.child)
        return null;
    switch (e.child.tag) {
    case 5:
        return e.child.stateNode;
    default:
        return e.child.stateNode
    }
}
function gk(e, t) {
    if (e = e.memoizedState,
    e !== null && e.dehydrated !== null) {
        var n = e.retryLane;
        e.retryLane = n !== 0 && n < t ? n : t
    }
}
function d6(e, t) {
    gk(e, t),
    (e = e.alternate) && gk(e, t)
}
function LZ() {
    return null
}
var MP = typeof reportError == "function" ? reportError : function(e) {
    console.error(e)
}
;
function f6(e) {
    this._internalRoot = e
}
xv.prototype.render = f6.prototype.render = function(e) {
    var t = this._internalRoot;
    if (t === null)
        throw Error(me(409));
    _v(e, t, null, null)
}
;
xv.prototype.unmount = f6.prototype.unmount = function() {
    var e = this._internalRoot;
    if (e !== null) {
        this._internalRoot = null;
        var t = e.containerInfo;
        su(function() {
            _v(null, e, null, null)
        }),
        t[wa] = null
    }
}
;
function xv(e) {
    this._internalRoot = e
}
xv.prototype.unstable_scheduleHydration = function(e) {
    if (e) {
        var t = sL();
        e = {
            blockedOn: null,
            target: e,
            priority: t
        };
        for (var n = 0; n < al.length && t !== 0 && t < al[n].priority; n++)
            ;
        al.splice(n, 0, e),
        n === 0 && lL(e)
    }
}
;
function h6(e) {
    return !(!e || e.nodeType !== 1 && e.nodeType !== 9 && e.nodeType !== 11)
}
function Sv(e) {
    return !(!e || e.nodeType !== 1 && e.nodeType !== 9 && e.nodeType !== 11 && (e.nodeType !== 8 || e.nodeValue !== " react-mount-point-unstable "))
}
function pk() {}
function PZ(e, t, n, r, i) {
    if (i) {
        if (typeof r == "function") {
            var o = r;
            r = function() {
                var c = Jm(s);
                o.call(c)
            }
        }
        var s = AP(t, r, e, 0, null, !1, !1, "", pk);
        return e._reactRootContainer = s,
        e[wa] = s.current,
        Hg(e.nodeType === 8 ? e.parentNode : e),
        su(),
        s
    }
    for (; i = e.lastChild; )
        e.removeChild(i);
    if (typeof r == "function") {
        var a = r;
        r = function() {
            var c = Jm(l);
            a.call(c)
        }
    }
    var l = u6(e, 0, !1, null, null, !1, !1, "", pk);
    return e._reactRootContainer = l,
    e[wa] = l.current,
    Hg(e.nodeType === 8 ? e.parentNode : e),
    su(function() {
        _v(t, l, n, r)
    }),
    l
}
function Iv(e, t, n, r, i) {
    var o = n._reactRootContainer;
    if (o) {
        var s = o;
        if (typeof i == "function") {
            var a = i;
            i = function() {
                var l = Jm(s);
                a.call(l)
            }
        }
        _v(t, s, e, i)
    } else
        s = PZ(n, t, e, i, r);
    return Jm(s)
}
iL = function(e) {
    switch (e.tag) {
    case 3:
        var t = e.stateNode;
        if (t.current.memoizedState.isDehydrated) {
            var n = Wh(t.pendingLanes);
            n !== 0 && (Px(t, n | 1),
            fi(t, _n()),
            !(yt & 6) && (af = _n() + 500,
            Jl()))
        }
        break;
    case 13:
        su(function() {
            var r = Ea(e, 1);
            if (r !== null) {
                var i = Ur();
                $o(r, e, 1, i)
            }
        }),
        d6(e, 1)
    }
}
;
Rx = function(e) {
    if (e.tag === 13) {
        var t = Ea(e, 134217728);
        if (t !== null) {
            var n = Ur();
            $o(t, e, 134217728, n)
        }
        d6(e, 134217728)
    }
}
;
oL = function(e) {
    if (e.tag === 13) {
        var t = Al(e)
          , n = Ea(e, t);
        if (n !== null) {
            var r = Ur();
            $o(n, e, t, r)
        }
        d6(e, t)
    }
}
;
sL = function() {
    return Pt
}
;
aL = function(e, t) {
    var n = Pt;
    try {
        return Pt = e,
        t()
    } finally {
        Pt = n
    }
}
;
n3 = function(e, t, n) {
    switch (t) {
    case "input":
        if (Xb(e, n),
        t = n.name,
        n.type === "radio" && t != null) {
            for (n = e; n.parentNode; )
                n = n.parentNode;
            for (n = n.querySelectorAll("input[name=" + JSON.stringify("" + t) + '][type="radio"]'),
            t = 0; t < n.length; t++) {
                var r = n[t];
                if (r !== e && r.form === e.form) {
                    var i = pv(r);
                    if (!i)
                        throw Error(me(90));
                    B7(r),
                    Xb(r, i)
                }
            }
        }
        break;
    case "textarea":
        $7(e, n);
        break;
    case "select":
        t = n.value,
        t != null && zd(e, !!n.multiple, t, !1)
    }
}
;
j7 = s6;
K7 = su;
var RZ = {
    usingClientEntryPoint: !1,
    Events: [Dp, _d, pv, V7, Y7, s6]
}
  , yh = {
    findFiberByHostInstance: Rc,
    bundleType: 0,
    version: "18.2.0",
    rendererPackageName: "react-dom"
}
  , DZ = {
    bundleType: yh.bundleType,
    version: yh.version,
    rendererPackageName: yh.rendererPackageName,
    rendererConfig: yh.rendererConfig,
    overrideHookState: null,
    overrideHookStateDeletePath: null,
    overrideHookStateRenamePath: null,
    overrideProps: null,
    overridePropsDeletePath: null,
    overridePropsRenamePath: null,
    setErrorHandler: null,
    setSuspenseHandler: null,
    scheduleUpdate: null,
    currentDispatcherRef: Pa.ReactCurrentDispatcher,
    findHostInstanceByFiber: function(e) {
        return e = q7(e),
        e === null ? null : e.stateNode
    },
    findFiberByHostInstance: yh.findFiberByHostInstance || LZ,
    findHostInstancesForRefresh: null,
    scheduleRefresh: null,
    scheduleRoot: null,
    setRefreshHandler: null,
    getCurrentFiber: null,
    reconcilerVersion: "18.2.0-next-9e3b772b8-20220608"
};
if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u") {
    var u0 = __REACT_DEVTOOLS_GLOBAL_HOOK__;
    if (!u0.isDisabled && u0.supportsFiber)
        try {
            dv = u0.inject(DZ),
            _s = u0
        } catch {}
}
Ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = RZ;
Ni.createPortal = function(e, t) {
    var n = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : null;
    if (!h6(t))
        throw Error(me(200));
    return MZ(e, t, null, n)
}
;
Ni.createRoot = function(e, t) {
    if (!h6(e))
        throw Error(me(299));
    var n = !1
      , r = ""
      , i = MP;
    return t != null && (t.unstable_strictMode === !0 && (n = !0),
    t.identifierPrefix !== void 0 && (r = t.identifierPrefix),
    t.onRecoverableError !== void 0 && (i = t.onRecoverableError)),
    t = u6(e, 1, !1, null, null, n, !1, r, i),
    e[wa] = t.current,
    Hg(e.nodeType === 8 ? e.parentNode : e),
    new f6(t)
}
;
Ni.findDOMNode = function(e) {
    if (e == null)
        return null;
    if (e.nodeType === 1)
        return e;
    var t = e._reactInternals;
    if (t === void 0)
        throw typeof e.render == "function" ? Error(me(188)) : (e = Object.keys(e).join(","),
        Error(me(268, e)));
    return e = q7(t),
    e = e === null ? null : e.stateNode,
    e
}
;
Ni.flushSync = function(e) {
    return su(e)
}
;
Ni.hydrate = function(e, t, n) {
    if (!Sv(t))
        throw Error(me(200));
    return Iv(null, e, t, !0, n)
}
;
Ni.hydrateRoot = function(e, t, n) {
    if (!h6(e))
        throw Error(me(405));
    var r = n != null && n.hydratedSources || null
      , i = !1
      , o = ""
      , s = MP;
    if (n != null && (n.unstable_strictMode === !0 && (i = !0),
    n.identifierPrefix !== void 0 && (o = n.identifierPrefix),
    n.onRecoverableError !== void 0 && (s = n.onRecoverableError)),
    t = AP(t, null, e, 1, n ?? null, i, !1, o, s),
    e[wa] = t.current,
    Hg(e),
    r)
        for (e = 0; e < r.length; e++)
            n = r[e],
            i = n._getVersion,
            i = i(n._source),
            t.mutableSourceEagerHydrationData == null ? t.mutableSourceEagerHydrationData = [n, i] : t.mutableSourceEagerHydrationData.push(n, i);
    return new xv(t)
}
;
Ni.render = function(e, t, n) {
    if (!Sv(t))
        throw Error(me(200));
    return Iv(null, e, t, !1, n)
}
;
Ni.unmountComponentAtNode = function(e) {
    if (!Sv(e))
        throw Error(me(40));
    return e._reactRootContainer ? (su(function() {
        Iv(null, null, e, !1, function() {
            e._reactRootContainer = null,
            e[wa] = null
        })
    }),
    !0) : !1
}
;
Ni.unstable_batchedUpdates = s6;
Ni.unstable_renderSubtreeIntoContainer = function(e, t, n, r) {
    if (!Sv(n))
        throw Error(me(200));
    if (e == null || e._reactInternals === void 0)
        throw Error(me(38));
    return Iv(e, t, n, !1, r)
}
;
Ni.version = "18.2.0-next-9e3b772b8-20220608";
function LP() {
    if (!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ > "u" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE != "function"))
        try {
            __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LP)
        } catch (e) {
            console.error(e)
        }
}
LP(),
A7.exports = Ni;
var si = A7.exports;
const OZ = Su(si);
var PP, mk = si;
PP = mk.createRoot,
mk.hydrateRoot;
const RP = ()=>{
    Array.prototype.at || Object.defineProperty(Array.prototype, "at", {
        value: function(e) {
            if (e = Math.trunc(e) || 0,
            e < 0 && (e += this.length),
            !(e < 0 || e >= this.length))
                return this[e]
        },
        writable: !0,
        enumerable: !1,
        configurable: !0
    }),
    Element.prototype.replaceChildren || (Element.prototype.replaceChildren = function(...e) {
        this.innerHTML = "",
        this.append(...e)
    }
    )
}
;
var NZ = {
    VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
    VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
    VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
    VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
    VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
    VITE_APP_PLUS_APP: "https://app.excalidraw.com",
    VITE_APP_AI_BACKEND: "https://oss-ai.excalidraw.com",
    VITE_APP_WS_SERVER_URL: "https://oss-collab.excalidraw.com",
    VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
    VITE_APP_ENABLE_TRACKING: "true",
    VITE_APP_GIT_SHA: "fb4bb29aa5d9f03c60afc9984b01f25bcd117970",
    BASE_URL: "/",
    MODE: "production",
    DEV: !1,
    PROD: !0,
    SSR: !1
};
const FZ = new Set(["command_palette"])
  , at = (e,t,n,r)=>{
    try {
        if (typeof window > "u" || NZ.VITE_WORKER_ID || !FZ.has(e))
            return;
        window.sa_event && window.sa_event(t, {
            category: e,
            label: n,
            value: r
        })
    } catch (i) {
        console.error("error during analytics", i)
    }
}
  , BZ = "#ffffff"
  , zZ = "#000000"
  , $Z = ["#f8f9fa", "#f1f3f5", "#e9ecef", "#dee2e6", "#ced4da", "#adb5bd", "#868e96", "#495057", "#343a40", "#212529"]
  , UZ = ["#fff5f5", "#ffe3e3", "#ffc9c9", "#ffa8a8", "#ff8787", "#ff6b6b", "#fa5252", "#f03e3e", "#e03131", "#c92a2a"]
  , HZ = ["#fff0f6", "#ffdeeb", "#fcc2d7", "#faa2c1", "#f783ac", "#f06595", "#e64980", "#d6336c", "#c2255c", "#a61e4d"]
  , WZ = ["#f8f0fc", "#f3d9fa", "#eebefa", "#e599f7", "#da77f2", "#cc5de8", "#be4bdb", "#ae3ec9", "#9c36b5", "#862e9c"]
  , GZ = ["#f3f0ff", "#e5dbff", "#d0bfff", "#b197fc", "#9775fa", "#845ef7", "#7950f2", "#7048e8", "#6741d9", "#5f3dc4"]
  , VZ = ["#edf2ff", "#dbe4ff", "#bac8ff", "#91a7ff", "#748ffc", "#5c7cfa", "#4c6ef5", "#4263eb", "#3b5bdb", "#364fc7"]
  , YZ = ["#e7f5ff", "#d0ebff", "#a5d8ff", "#74c0fc", "#4dabf7", "#339af0", "#228be6", "#1c7ed6", "#1971c2", "#1864ab"]
  , jZ = ["#e3fafc", "#c5f6fa", "#99e9f2", "#66d9e8", "#3bc9db", "#22b8cf", "#15aabf", "#1098ad", "#0c8599", "#0b7285"]
  , KZ = ["#e6fcf5", "#c3fae8", "#96f2d7", "#63e6be", "#38d9a9", "#20c997", "#12b886", "#0ca678", "#099268", "#087f5b"]
  , XZ = ["#ebfbee", "#d3f9d8", "#b2f2bb", "#8ce99a", "#69db7c", "#51cf66", "#40c057", "#37b24d", "#2f9e44", "#2b8a3e"]
  , ZZ = ["#f4fce3", "#e9fac8", "#d8f5a2", "#c0eb75", "#a9e34b", "#94d82d", "#82c91e", "#74b816", "#66a80f", "#5c940d"]
  , qZ = ["#fff9db", "#fff3bf", "#ffec99", "#ffe066", "#ffd43b", "#fcc419", "#fab005", "#f59f00", "#f08c00", "#e67700"]
  , QZ = ["#fff4e6", "#ffe8cc", "#ffd8a8", "#ffc078", "#ffa94d", "#ff922b", "#fd7e14", "#f76707", "#e8590c", "#d9480f"]
  , Kn = {
    white: BZ,
    black: zZ,
    gray: $Z,
    red: UZ,
    pink: HZ,
    grape: WZ,
    violet: GZ,
    indigo: VZ,
    blue: YZ,
    cyan: jZ,
    teal: KZ,
    green: XZ,
    lime: ZZ,
    yellow: qZ,
    orange: QZ
}
  , JZ = (e,t)=>t.reduce((n,r)=>(r in e && (n[r] = e[r]),
n), {})
  , eq = 5
  , fd = 5
  , tq = 4
  , Vh = 4
  , Yh = 1
  , Io = [0, 2, 4, 6, 8]
  , Co = (e,t)=>t.map(n=>Kn[e][n])
  , Qe = {
    transparent: "transparent",
    black: "#1e1e1e",
    white: "#ffffff",
    gray: Co("gray", Io),
    red: Co("red", Io),
    pink: Co("pink", Io),
    grape: Co("grape", Io),
    violet: Co("violet", Io),
    blue: Co("blue", Io),
    cyan: Co("cyan", Io),
    teal: Co("teal", Io),
    green: Co("green", Io),
    yellow: Co("yellow", Io),
    orange: Co("orange", Io),
    bronze: ["#f8f1ee", "#eaddd7", "#d2bab0", "#a18072", "#846358"]
}
  , DP = JZ(Qe, ["cyan", "blue", "violet", "grape", "pink", "green", "teal", "yellow", "orange", "red"])
  , OP = [Qe.black, Qe.red[Vh], Qe.green[Vh], Qe.blue[Vh], Qe.yellow[Vh]]
  , NP = [Qe.transparent, Qe.red[Yh], Qe.green[Yh], Qe.blue[Yh], Qe.yellow[Yh]]
  , FP = [Qe.white, "#f8f9fa", "#f5faff", "#fffce8", "#fdf8f6"]
  , nq = {
    transparent: Qe.transparent,
    white: Qe.white,
    gray: Qe.gray,
    black: Qe.black,
    bronze: Qe.bronze,
    ...DP
}
  , rq = {
    transparent: Qe.transparent,
    white: Qe.white,
    gray: Qe.gray,
    black: Qe.black,
    bronze: Qe.bronze,
    ...DP
}
  , iq = e=>[Qe.cyan[e], Qe.blue[e], Qe.violet[e], Qe.grape[e], Qe.pink[e], Qe.green[e], Qe.teal[e], Qe.yellow[e], Qe.orange[e], Qe.red[e]]
  , oq = (e,t,n)=>`#${((1 << 24) + (e << 16) + (t << 8) + n).toString(16).slice(1)}`
  , sq = "invert(93%) hue-rotate(180deg)"
  , aq = "302px"
  , BP = {
    themeFilter: sq,
    rightSidebarWidth: aq
}
  , Ts = /Mac|iPod|iPhone|iPad/.test(navigator.platform)
  , zP = /^Win/.test(navigator.platform)
  , lq = /\b(android)\b/i.test(navigator.userAgent)
  , qg = "netscape"in window && navigator.userAgent.indexOf("rv:") > 1 && navigator.userAgent.indexOf("Gecko") > 1
  , cq = navigator.userAgent.indexOf("Chrome") !== -1
  , uq = !cq && navigator.userAgent.indexOf("Safari") !== -1
  , $P = /iPad|iPhone/.test(navigator.platform) || navigator.userAgent.includes("Mac") && "ontouchend"in document
  , dq = ()=>{
    var e, t;
    return ((t = (e = navigator.brave) == null ? void 0 : e.isBrave) == null ? void 0 : t.name) === "isBrave"
}
  , O3 = typeof window < "u" && "ResizeObserver"in window
  , fa = "Excalidraw"
  , fq = 36
  , wc = 10
  , rm = 8
  , hq = 5
  , SE = 1
  , gq = 30
  , Ul = Math.PI / 12
  , pq = "red"
  , It = {
    TEXT: "text",
    CROSSHAIR: "crosshair",
    GRABBING: "grabbing",
    GRAB: "grab",
    POINTER: "pointer",
    MOVE: "move",
    AUTO: ""
}
  , fc = {
    MAIN: 0,
    WHEEL: 1,
    SECONDARY: 2,
    TOUCH: -1,
    ERASER: 5
}
  , Ec = {
    enabled: "all",
    disabled: "none",
    inheritFromUI: "var(--ui-pointerEvents)"
};
var ce = (e=>(e.COPY = "copy",
e.PASTE = "paste",
e.CUT = "cut",
e.KEYDOWN = "keydown",
e.KEYUP = "keyup",
e.MOUSE_MOVE = "mousemove",
e.RESIZE = "resize",
e.UNLOAD = "unload",
e.FOCUS = "focus",
e.BLUR = "blur",
e.DRAG_OVER = "dragover",
e.DROP = "drop",
e.GESTURE_END = "gestureend",
e.BEFORE_UNLOAD = "beforeunload",
e.GESTURE_START = "gesturestart",
e.GESTURE_CHANGE = "gesturechange",
e.POINTER_MOVE = "pointermove",
e.POINTER_DOWN = "pointerdown",
e.POINTER_UP = "pointerup",
e.STATE_CHANGE = "statechange",
e.WHEEL = "wheel",
e.TOUCH_START = "touchstart",
e.TOUCH_END = "touchend",
e.HASHCHANGE = "hashchange",
e.VISIBILITY_CHANGE = "visibilitychange",
e.SCROLL = "scroll",
e.EXCALIDRAW_LINK = "excalidraw-link",
e.MENU_ITEM_SELECT = "menu.itemSelect",
e.MESSAGE = "message",
e.FULLSCREENCHANGE = "fullscreenchange",
e))(ce || {});
const d0 = {
    UNSTARTED: -1,
    ENDED: 0,
    PLAYING: 1,
    PAUSED: 2,
    BUFFERING: 3,
    CUED: 5
}
  , UP = {
    TEST: "test",
    DEVELOPMENT: "development"
}
  , HP = {
    SHAPE_ACTIONS_MENU: "App-menu__left"
}
  , Lt = {
    Virgil: 1,
    Helvetica: 2,
    Cascadia: 3,
    Excalifont: 5,
    Nunito: 6,
    "Lilita One": 7,
    "Comic Shanns": 8,
    "Liberation Sans": 9
}
  , Oe = {
    LIGHT: "light",
    DARK: "dark"
}
  , pn = {
    strokeColor: "#bbb",
    strokeWidth: 2,
    strokeStyle: "solid",
    fillStyle: "solid",
    roughness: 0,
    roundness: null,
    backgroundColor: "transparent",
    radius: 8,
    nameOffsetY: 3,
    nameColorLightTheme: "#999999",
    nameColorDarkTheme: "#7a7a7a",
    nameFontSize: 14,
    nameLineHeight: 1.25
}
  , vk = "Segoe UI Emoji"
  , g6 = 1
  , Ra = 20
  , ec = Lt.Excalifont
  , Np = "left"
  , e2 = "top"
  , WP = "{version}"
  , au = 2
  , p6 = 2 * au
  , mq = 1e-5
  , vq = 2 * p6 - mq
  , f0 = "#ffffff"
  , yq = "#1e1e1e"
  , wq = "#a2f1a6"
  , t2 = 20
  , GP = 5
  , m6 = {
    svg: "image/svg+xml",
    png: "image/png",
    jpg: "image/jpeg",
    gif: "image/gif",
    webp: "image/webp",
    bmp: "image/bmp",
    ico: "image/x-icon",
    avif: "image/avif",
    jfif: "image/jfif"
}
  , Eq = ["text/plain", "text/html"]
  , Re = {
    json: "application/json",
    excalidraw: "application/vnd.excalidraw+json",
    excalidrawlib: "application/vnd.excalidrawlib+json",
    "excalidraw.svg": "image/svg+xml",
    "excalidraw.png": "image/png",
    binary: "application/octet-stream",
    ...m6
}
  , IE = {
    png: "png",
    svg: "svg",
    clipboard: "clipboard"
}
  , so = {
    excalidraw: "excalidraw",
    excalidrawClipboard: "excalidraw/clipboard",
    excalidrawLibrary: "excalidrawlib",
    excalidrawClipboardWithAPI: "excalidraw-api/clipboard"
}
  , v6 = window.EXCALIDRAW_EXPORT_SOURCE || window.location.origin
  , bq = 500
  , _q = 300
  , xq = 500
  , Sq = 1e4
  , Iq = 3e4
  , Cq = 100
  , Qg = .1
  , VP = .1
  , YP = 30
  , kq = 300
  , yk = 6e4
  , wk = 3e3
  , y6 = BP.themeFilter
  , N3 = {
    addLibrary: "addLibrary"
}
  , F3 = {
    addLibrary: "addLibrary"
}
  , Ek = {
    canvasActions: {
        changeViewBackgroundColor: !0,
        clearCanvas: !0,
        export: {
            saveFileToDisk: !0
        },
        loadScene: !0,
        saveToActiveFile: !0,
        toggleTheme: null,
        saveAsImage: !0
    },
    tools: {
        image: !0
    }
}
  , Tq = 730
  , Aq = 1e3
  , Mq = 500
  , Lq = 1229
  , Pq = parseInt(BP.rightSidebarWidth)
  , wh = 2
  , w6 = [1, 2, 3]
  , Mf = 10
  , Rq = 1440
  , bk = 4 * 1024 * 1024
  , $t = "http://www.w3.org/2000/svg"
  , jP = 128
  , Cv = {
    excalidraw: 2,
    excalidrawLibrary: 2
}
  , Tn = 5
  , Dq = .7
  , Oq = 11
  , Ai = {
    TOP: "top",
    MIDDLE: "middle",
    BOTTOM: "bottom"
}
  , Jg = {
    LEFT: "left",
    CENTER: "center",
    RIGHT: "right"
}
  , Nq = 20
  , CE = .25
  , Fq = 32
  , An = {
    LEGACY: 1,
    PROPORTIONAL_RADIUS: 2,
    ADAPTIVE_RADIUS: 3
}
  , KP = {
    architect: 0,
    artist: 1,
    cartoonist: 2
}
  , kE = {
    thin: 1,
    bold: 2,
    extraBold: 4
}
  , ln = {
    strokeColor: Qe.black,
    backgroundColor: Qe.transparent,
    fillStyle: "solid",
    strokeWidth: 2,
    strokeStyle: "solid",
    roughness: KP.artist,
    opacity: 100,
    locked: !1
}
  , E6 = "library"
  , Ll = {
    name: "default",
    defaultTab: E6
}
  , XP = new Set(["iframe", "embeddable", "image"])
  , Fn = {
    selection: "selection",
    rectangle: "rectangle",
    diamond: "diamond",
    ellipse: "ellipse",
    arrow: "arrow",
    line: "line",
    freedraw: "freedraw",
    text: "text",
    image: "image",
    eraser: "eraser",
    hand: "hand",
    frame: "frame",
    magicframe: "magicframe",
    embeddable: "embeddable",
    laser: "laser"
}
  , Pl = {
    OAI_API_KEY: "excalidraw-oai-api-key",
    MERMAID_TO_EXCALIDRAW: "mermaid-to-excalidraw",
    PUBLISH_LIBRARY: "publish-library-data"
}
  , ZP = "Untitled"
  , Ad = {
    generalStats: 1,
    elementProperties: 2
}
  , qi = 1
  , nr = {
    sharp: "sharp",
    round: "round",
    elbow: "elbow"
}
  , Bq = w6.includes(devicePixelRatio) ? devicePixelRatio : 1
  , ho = ()=>({
    showWelcomeScreen: !1,
    theme: Oe.LIGHT,
    collaborators: new Map,
    currentChartType: "bar",
    currentItemBackgroundColor: ln.backgroundColor,
    currentItemEndArrowhead: "arrow",
    currentItemFillStyle: ln.fillStyle,
    currentItemFontFamily: ec,
    currentItemFontSize: Ra,
    currentItemOpacity: ln.opacity,
    currentItemRoughness: ln.roughness,
    currentItemStartArrowhead: null,
    currentItemStrokeColor: ln.strokeColor,
    currentItemRoundness: "round",
    currentItemArrowType: nr.round,
    currentItemStrokeStyle: ln.strokeStyle,
    currentItemStrokeWidth: ln.strokeWidth,
    currentItemTextAlign: Np,
    currentHoveredFontFamily: null,
    cursorButton: "up",
    activeEmbeddable: null,
    newElement: null,
    editingElement: null,
    editingGroupId: null,
    editingLinearElement: null,
    activeTool: {
        type: "selection",
        customType: null,
        locked: ln.locked,
        lastActiveTool: null
    },
    penMode: !1,
    penDetected: !1,
    errorMessage: null,
    exportBackground: !0,
    exportScale: Bq,
    exportEmbedScene: !1,
    exportWithDarkMode: !1,
    fileHandle: null,
    gridSize: t2,
    gridStep: GP,
    gridModeEnabled: !1,
    isBindingEnabled: !0,
    defaultSidebarDockedPreference: !1,
    isLoading: !1,
    isResizing: !1,
    isRotating: !1,
    lastPointerDownWith: "mouse",
    multiElement: null,
    name: null,
    contextMenu: null,
    openMenu: null,
    openPopup: null,
    openSidebar: null,
    openDialog: null,
    pasteDialog: {
        shown: !1,
        data: null
    },
    previousSelectedElementIds: {},
    resizingElement: null,
    scrolledOutside: !1,
    scrollX: 0,
    scrollY: 0,
    selectedElementIds: {},
    selectedGroupIds: {},
    selectedElementsAreBeingDragged: !1,
    selectionElement: null,
    shouldCacheIgnoreZoom: !1,
    stats: {
        open: !1,
        panels: Ad.generalStats | Ad.elementProperties
    },
    startBoundElement: null,
    suggestedBindings: [],
    frameRendering: {
        enabled: !0,
        clip: !0,
        name: !0,
        outline: !0
    },
    frameToHighlight: null,
    editingFrame: null,
    elementsToHighlight: null,
    toast: null,
    viewBackgroundColor: Qe.white,
    zenModeEnabled: !1,
    zoom: {
        value: 1
    },
    viewModeEnabled: !1,
    pendingImageElementId: null,
    showHyperlinkPopup: !1,
    selectedLinearElement: null,
    snapLines: [],
    originSnapOffset: {
        x: 0,
        y: 0
    },
    objectsSnapModeEnabled: !1,
    userToFollow: null,
    followedBy: new Set
})
  , zq = (e=>e)({
    showWelcomeScreen: {
        browser: !0,
        export: !1,
        server: !1
    },
    theme: {
        browser: !0,
        export: !1,
        server: !1
    },
    collaborators: {
        browser: !1,
        export: !1,
        server: !1
    },
    currentChartType: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemBackgroundColor: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemEndArrowhead: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemFillStyle: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemFontFamily: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemFontSize: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemRoundness: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemArrowType: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemOpacity: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemRoughness: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemStartArrowhead: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemStrokeColor: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemStrokeStyle: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemStrokeWidth: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentItemTextAlign: {
        browser: !0,
        export: !1,
        server: !1
    },
    currentHoveredFontFamily: {
        browser: !1,
        export: !1,
        server: !1
    },
    cursorButton: {
        browser: !0,
        export: !1,
        server: !1
    },
    activeEmbeddable: {
        browser: !1,
        export: !1,
        server: !1
    },
    newElement: {
        browser: !1,
        export: !1,
        server: !1
    },
    editingElement: {
        browser: !1,
        export: !1,
        server: !1
    },
    editingGroupId: {
        browser: !0,
        export: !1,
        server: !1
    },
    editingLinearElement: {
        browser: !1,
        export: !1,
        server: !1
    },
    activeTool: {
        browser: !0,
        export: !1,
        server: !1
    },
    penMode: {
        browser: !0,
        export: !1,
        server: !1
    },
    penDetected: {
        browser: !0,
        export: !1,
        server: !1
    },
    errorMessage: {
        browser: !1,
        export: !1,
        server: !1
    },
    exportBackground: {
        browser: !0,
        export: !1,
        server: !1
    },
    exportEmbedScene: {
        browser: !0,
        export: !1,
        server: !1
    },
    exportScale: {
        browser: !0,
        export: !1,
        server: !1
    },
    exportWithDarkMode: {
        browser: !0,
        export: !1,
        server: !1
    },
    fileHandle: {
        browser: !1,
        export: !1,
        server: !1
    },
    gridSize: {
        browser: !0,
        export: !0,
        server: !0
    },
    gridStep: {
        browser: !0,
        export: !0,
        server: !0
    },
    gridModeEnabled: {
        browser: !0,
        export: !0,
        server: !0
    },
    height: {
        browser: !1,
        export: !1,
        server: !1
    },
    isBindingEnabled: {
        browser: !1,
        export: !1,
        server: !1
    },
    defaultSidebarDockedPreference: {
        browser: !0,
        export: !1,
        server: !1
    },
    isLoading: {
        browser: !1,
        export: !1,
        server: !1
    },
    isResizing: {
        browser: !1,
        export: !1,
        server: !1
    },
    isRotating: {
        browser: !1,
        export: !1,
        server: !1
    },
    lastPointerDownWith: {
        browser: !0,
        export: !1,
        server: !1
    },
    multiElement: {
        browser: !1,
        export: !1,
        server: !1
    },
    name: {
        browser: !0,
        export: !1,
        server: !1
    },
    offsetLeft: {
        browser: !1,
        export: !1,
        server: !1
    },
    offsetTop: {
        browser: !1,
        export: !1,
        server: !1
    },
    contextMenu: {
        browser: !1,
        export: !1,
        server: !1
    },
    openMenu: {
        browser: !0,
        export: !1,
        server: !1
    },
    openPopup: {
        browser: !1,
        export: !1,
        server: !1
    },
    openSidebar: {
        browser: !0,
        export: !1,
        server: !1
    },
    openDialog: {
        browser: !1,
        export: !1,
        server: !1
    },
    pasteDialog: {
        browser: !1,
        export: !1,
        server: !1
    },
    previousSelectedElementIds: {
        browser: !0,
        export: !1,
        server: !1
    },
    resizingElement: {
        browser: !1,
        export: !1,
        server: !1
    },
    scrolledOutside: {
        browser: !0,
        export: !1,
        server: !1
    },
    scrollX: {
        browser: !0,
        export: !1,
        server: !1
    },
    scrollY: {
        browser: !0,
        export: !1,
        server: !1
    },
    selectedElementIds: {
        browser: !0,
        export: !1,
        server: !1
    },
    selectedGroupIds: {
        browser: !0,
        export: !1,
        server: !1
    },
    selectedElementsAreBeingDragged: {
        browser: !1,
        export: !1,
        server: !1
    },
    selectionElement: {
        browser: !1,
        export: !1,
        server: !1
    },
    shouldCacheIgnoreZoom: {
        browser: !0,
        export: !1,
        server: !1
    },
    stats: {
        browser: !0,
        export: !1,
        server: !1
    },
    startBoundElement: {
        browser: !1,
        export: !1,
        server: !1
    },
    suggestedBindings: {
        browser: !1,
        export: !1,
        server: !1
    },
    frameRendering: {
        browser: !1,
        export: !1,
        server: !1
    },
    frameToHighlight: {
        browser: !1,
        export: !1,
        server: !1
    },
    editingFrame: {
        browser: !1,
        export: !1,
        server: !1
    },
    elementsToHighlight: {
        browser: !1,
        export: !1,
        server: !1
    },
    toast: {
        browser: !1,
        export: !1,
        server: !1
    },
    viewBackgroundColor: {
        browser: !0,
        export: !0,
        server: !0
    },
    width: {
        browser: !1,
        export: !1,
        server: !1
    },
    zenModeEnabled: {
        browser: !0,
        export: !1,
        server: !1
    },
    zoom: {
        browser: !0,
        export: !1,
        server: !1
    },
    viewModeEnabled: {
        browser: !1,
        export: !1,
        server: !1
    },
    pendingImageElementId: {
        browser: !1,
        export: !1,
        server: !1
    },
    showHyperlinkPopup: {
        browser: !1,
        export: !1,
        server: !1
    },
    selectedLinearElement: {
        browser: !0,
        export: !1,
        server: !1
    },
    snapLines: {
        browser: !1,
        export: !1,
        server: !1
    },
    originSnapOffset: {
        browser: !1,
        export: !1,
        server: !1
    },
    objectsSnapModeEnabled: {
        browser: !0,
        export: !1,
        server: !1
    },
    userToFollow: {
        browser: !1,
        export: !1,
        server: !1
    },
    followedBy: {
        browser: !1,
        export: !1,
        server: !1
    }
})
  , b6 = (e,t)=>{
    const n = {};
    for (const r of Object.keys(e)) {
        const i = zq[r];
        if (i != null && i[t]) {
            const o = e[r];
            n[r] = o
        }
    }
    return n
}
  , qP = e=>b6(e, "browser")
  , QP = e=>b6(e, "export")
  , $q = e=>b6(e, "server")
  , fs = ({activeTool: e})=>e.type === "eraser"
  , lf = ({activeTool: e})=>e.type === "hand"
  , Uq = "modulepreload"
  , Hq = function(e) {
    return "/" + e
}
  , _k = {}
  , _e = function(t, n, r) {
    let i = Promise.resolve();
    return n && n.length > 0 && (document.getElementsByTagName("link"),
    i = Promise.all(n.map(o=>{
        if (o = Hq(o),
        o in _k)
            return;
        _k[o] = !0;
        const s = o.endsWith(".css")
          , a = s ? '[rel="stylesheet"]' : "";
        if (document.querySelector(`link[href="${o}"]${a}`))
            return;
        const l = document.createElement("link");
        if (l.rel = s ? "stylesheet" : Uq,
        s || (l.as = "script",
        l.crossOrigin = ""),
        l.href = o,
        document.head.appendChild(l),
        s)
            return new Promise((c,u)=>{
                l.addEventListener("load", c),
                l.addEventListener("error", ()=>u(new Error(`Unable to preload CSS for ${o}`)))
            }
            )
    }
    ))),
    i.then(()=>t()).catch(o=>{
        const s = new Event("vite:preloadError",{
            cancelable: !0
        });
        if (s.payload = o,
        window.dispatchEvent(s),
        !s.defaultPrevented)
            throw o
    }
    )
}
  , Wq = (e,t)=>{
    const n = e[t];
    return n ? typeof n == "function" ? n() : Promise.resolve(n) : new Promise((r,i)=>{
        (typeof queueMicrotask == "function" ? queueMicrotask : setTimeout)(i.bind(null, new Error("Unknown variable dynamic import: " + t)))
    }
    )
}
  , JP = {
    paste: "Paste",
    pasteAsPlaintext: "Paste as plaintext",
    pasteCharts: "Paste charts",
    selectAll: "Select all",
    multiSelect: "Add element to selection",
    moveCanvas: "Move canvas",
    cut: "Cut",
    copy: "Copy",
    copyAsPng: "Copy to clipboard as PNG",
    copyAsSvg: "Copy to clipboard as SVG",
    copyText: "Copy to clipboard as text",
    copySource: "Copy source to clipboard",
    convertToCode: "Convert to code",
    bringForward: "Bring forward",
    sendToBack: "Send to back",
    bringToFront: "Bring to front",
    sendBackward: "Send backward",
    delete: "Delete",
    copyStyles: "Copy styles",
    pasteStyles: "Paste styles",
    stroke: "Stroke",
    changeStroke: "Change stroke color",
    background: "Background",
    changeBackground: "Change background color",
    fill: "Fill",
    strokeWidth: "Stroke width",
    strokeStyle: "Stroke style",
    strokeStyle_solid: "Solid",
    strokeStyle_dashed: "Dashed",
    strokeStyle_dotted: "Dotted",
    sloppiness: "Sloppiness",
    opacity: "Opacity",
    textAlign: "Text align",
    edges: "Edges",
    sharp: "Sharp",
    round: "Round",
    arrowheads: "Arrowheads",
    arrowhead_none: "None",
    arrowhead_arrow: "Arrow",
    arrowhead_bar: "Bar",
    arrowhead_circle: "Circle",
    arrowhead_circle_outline: "Circle (outline)",
    arrowhead_triangle: "Triangle",
    arrowhead_triangle_outline: "Triangle (outline)",
    arrowhead_diamond: "Diamond",
    arrowhead_diamond_outline: "Diamond (outline)",
    arrowtypes: "Arrow type",
    arrowtype_sharp: "Sharp arrow",
    arrowtype_round: "Curved arrow",
    arrowtype_elbowed: "Elbow arrow",
    fontSize: "Font size",
    fontFamily: "Font family",
    addWatermark: 'Add "Made with Excalidraw"',
    handDrawn: "Hand-drawn",
    normal: "Normal",
    code: "Code",
    small: "Small",
    medium: "Medium",
    large: "Large",
    veryLarge: "Very large",
    solid: "Solid",
    hachure: "Hachure",
    zigzag: "Zigzag",
    crossHatch: "Cross-hatch",
    thin: "Thin",
    bold: "Bold",
    left: "Left",
    center: "Center",
    right: "Right",
    extraBold: "Extra bold",
    architect: "Architect",
    artist: "Artist",
    cartoonist: "Cartoonist",
    fileTitle: "File name",
    colorPicker: "Color picker",
    canvasColors: "Used on canvas",
    canvasBackground: "Canvas background",
    drawingCanvas: "Drawing canvas",
    clearCanvas: "Clear canvas",
    layers: "Layers",
    actions: "Actions",
    language: "Language",
    liveCollaboration: "Live collaboration...",
    duplicateSelection: "Duplicate",
    untitled: "Untitled",
    name: "Name",
    yourName: "Your name",
    madeWithExcalidraw: "Made with Excalidraw",
    group: "Group selection",
    ungroup: "Ungroup selection",
    collaborators: "Collaborators",
    toggleGrid: "Toggle grid",
    addToLibrary: "Add to library",
    removeFromLibrary: "Remove from library",
    libraryLoadingMessage: "Loading library…",
    libraries: "Browse libraries",
    loadingScene: "Loading scene…",
    loadScene: "Load scene from file",
    align: "Align",
    alignTop: "Align top",
    alignBottom: "Align bottom",
    alignLeft: "Align left",
    alignRight: "Align right",
    centerVertically: "Center vertically",
    centerHorizontally: "Center horizontally",
    distributeHorizontally: "Distribute horizontally",
    distributeVertically: "Distribute vertically",
    flipHorizontal: "Flip horizontal",
    flipVertical: "Flip vertical",
    viewMode: "View mode",
    share: "Share",
    showStroke: "Show stroke color picker",
    showBackground: "Show background color picker",
    showFonts: "Show font picker",
    toggleTheme: "Toggle light/dark theme",
    theme: "Theme",
    personalLib: "Personal Library",
    excalidrawLib: "Excalidraw Library",
    decreaseFontSize: "Decrease font size",
    increaseFontSize: "Increase font size",
    unbindText: "Unbind text",
    bindText: "Bind text to the container",
    createContainerFromText: "Wrap text in a container",
    link: {
        edit: "Edit link",
        editEmbed: "Edit link & embed",
        create: "Create link",
        createEmbed: "Create link & embed",
        label: "Link",
        labelEmbed: "Link & embed",
        empty: "No link is set"
    },
    lineEditor: {
        edit: "Edit line",
        editArrow: "Edit arrow"
    },
    elementLock: {
        lock: "Lock",
        unlock: "Unlock",
        lockAll: "Lock all",
        unlockAll: "Unlock all"
    },
    statusPublished: "Published",
    sidebarLock: "Keep sidebar open",
    selectAllElementsInFrame: "Select all elements in frame",
    removeAllElementsFromFrame: "Remove all elements from frame",
    eyeDropper: "Pick color from canvas",
    textToDiagram: "Text to diagram",
    prompt: "Prompt",
    followUs: "Follow us",
    discordChat: "Discord chat",
    zoomToFitViewport: "Zoom to fit in viewport",
    zoomToFitSelection: "Zoom to fit selection",
    zoomToFit: "Zoom to fit all elements",
    installPWA: "Install Excalidraw locally (PWA)",
    autoResize: "Enable text auto-resizing"
}
  , eR = {
    noItems: "No items added yet...",
    hint_emptyLibrary: "Select an item on canvas to add it here, or install a library from the public repository, below.",
    hint_emptyPrivateLibrary: "Select an item on canvas to add it here."
}
  , tR = {
    clearReset: "Reset the canvas",
    exportJSON: "Export to file",
    exportImage: "Export image...",
    export: "Save to...",
    copyToClipboard: "Copy to clipboard",
    save: "Save to current file",
    saveAs: "Save as",
    load: "Open",
    getShareableLink: "Get shareable link",
    close: "Close",
    selectLanguage: "Select language",
    scrollBackToContent: "Scroll back to content",
    zoomIn: "Zoom in",
    zoomOut: "Zoom out",
    resetZoom: "Reset zoom",
    menu: "Menu",
    done: "Done",
    edit: "Edit",
    undo: "Undo",
    redo: "Redo",
    resetLibrary: "Reset library",
    createNewRoom: "Create new room",
    fullScreen: "Full screen",
    darkMode: "Dark mode",
    lightMode: "Light mode",
    systemMode: "System mode",
    zenMode: "Zen mode",
    objectsSnapMode: "Snap to objects",
    exitZenMode: "Exit zen mode",
    cancel: "Cancel",
    clear: "Clear",
    remove: "Remove",
    embed: "Toggle embedding",
    publishLibrary: "Publish",
    submit: "Submit",
    confirm: "Confirm",
    embeddableInteractionButton: "Click to interact"
}
  , nR = {
    clearReset: "This will clear the whole canvas. Are you sure?",
    couldNotCreateShareableLink: "Couldn't create shareable link.",
    couldNotCreateShareableLinkTooBig: "Couldn't create shareable link: the scene is too big",
    couldNotLoadInvalidFile: "Couldn't load invalid file",
    importBackendFailed: "Importing from backend failed.",
    cannotExportEmptyCanvas: "Cannot export empty canvas.",
    couldNotCopyToClipboard: "Couldn't copy to clipboard.",
    decryptFailed: "Couldn't decrypt data.",
    uploadedSecurly: "The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",
    loadSceneOverridePrompt: "Loading external drawing will replace your existing content. Do you wish to continue?",
    collabStopOverridePrompt: `Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`,
    errorAddingToLibrary: "Couldn't add item to the library",
    errorRemovingFromLibrary: "Couldn't remove item from the library",
    confirmAddLibrary: "This will add {{numShapes}} shape(s) to your library. Are you sure?",
    imageDoesNotContainScene: "This image does not seem to contain any scene data. Have you enabled scene embedding during export?",
    cannotRestoreFromImage: "Scene couldn't be restored from this image file",
    invalidSceneUrl: "Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",
    resetLibrary: "This will clear your library. Are you sure?",
    removeItemsFromsLibrary: "Delete {{count}} item(s) from library?",
    invalidEncryptionKey: "Encryption key must be of 22 characters. Live collaboration is disabled.",
    collabOfflineWarning: `No internet connection available.
Your changes will not be saved!`
}
  , rR = {
    unsupportedFileType: "Unsupported file type.",
    imageInsertError: "Couldn't insert image. Try again later...",
    fileTooBig: "File is too big. Maximum allowed size is {{maxSize}}.",
    svgImageInsertError: "Couldn't insert SVG image. The SVG markup looks invalid.",
    failedToFetchImage: "Failed to fetch image.",
    cannotResolveCollabServer: "Couldn't connect to the collab server. Please reload the page and try again.",
    importLibraryError: "Couldn't load library",
    saveLibraryError: "Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.",
    collabSaveFailed: "Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",
    collabSaveFailed_sizeExceeded: "Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",
    imageToolNotSupported: "Images are disabled.",
    brave_measure_text_error: {
        line1: "Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",
        line2: "This could result in breaking the <bold>Text Elements</bold> in your drawings.",
        line3: "We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",
        line4: "If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"
    },
    libraryElementTypeError: {
        embeddable: "Embeddable elements cannot be added to the library.",
        iframe: "IFrame elements cannot be added to the library.",
        image: "Support for adding images to the library coming soon!"
    },
    asyncPasteFailedOnRead: "Couldn't paste (couldn't read from system clipboard).",
    asyncPasteFailedOnParse: "Couldn't paste.",
    copyToSystemClipboardFailed: "Couldn't copy to clipboard."
}
  , iR = {
    selection: "Selection",
    image: "Insert image",
    rectangle: "Rectangle",
    diamond: "Diamond",
    ellipse: "Ellipse",
    arrow: "Arrow",
    line: "Line",
    freedraw: "Draw",
    text: "Text",
    library: "Library",
    lock: "Keep selected tool active after drawing",
    penMode: "Pen mode - prevent touch",
    link: "Add / Update link for a selected shape",
    eraser: "Eraser",
    frame: "Frame tool",
    magicframe: "Wireframe to code",
    embeddable: "Web Embed",
    laser: "Laser pointer",
    hand: "Hand (panning tool)",
    extraTools: "More tools",
    mermaidToExcalidraw: "Mermaid to Excalidraw",
    magicSettings: "AI settings"
}
  , oR = {
    rectangle: "Rectangle",
    diamond: "Diamond",
    ellipse: "Ellipse",
    arrow: "Arrow",
    line: "Line",
    freedraw: "Freedraw",
    text: "Text",
    image: "Image",
    group: "Group",
    frame: "Frame",
    magicframe: "Wireframe to code",
    embeddable: "Web Embed",
    selection: "Selection",
    iframe: "IFrame"
}
  , sR = {
    canvasActions: "Canvas actions",
    selectedShapeActions: "Selected shape actions",
    shapes: "Shapes"
}
  , aR = {
    canvasPanning: "To move canvas, hold mouse wheel or spacebar while dragging, or use the hand tool",
    linearElement: "Click to start multiple points, drag for single line",
    arrowTool: "Click to start multiple points, drag for single line. Press {{arrowShortcut}} again to change arrow type.",
    freeDraw: "Click and drag, release when you're finished",
    text: "Tip: you can also add text by double-clicking anywhere with the selection tool",
    embeddable: "Click-drag to create a website embed",
    text_selected: "Double-click or press ENTER to edit text",
    text_editing: "Press Escape or CtrlOrCmd+ENTER to finish editing",
    linearElementMulti: "Click on last point or press Escape or Enter to finish",
    lockAngle: "You can constrain angle by holding SHIFT",
    resize: `You can constrain proportions by holding SHIFT while resizing,
hold ALT to resize from the center`,
    resizeImage: `You can resize freely by holding SHIFT,
hold ALT to resize from the center`,
    rotate: "You can constrain angles by holding SHIFT while rotating",
    lineEditor_info: "Hold CtrlOrCmd and Double-click or press CtrlOrCmd + Enter to edit points",
    lineEditor_pointSelected: `Press Delete to remove point(s),
CtrlOrCmd+D to duplicate, or drag to move`,
    lineEditor_nothingSelected: `Select a point to edit (hold SHIFT to select multiple),
or hold Alt and click to add new points`,
    placeImage: "Click to place the image, or click and drag to set its size manually",
    publishLibrary: "Publish your own library",
    bindTextToElement: "Press enter to add text",
    createFlowchart: "Hold CtrlOrCmd and Arrow key to create a flowchart",
    deepBoxSelect: "Hold CtrlOrCmd to deep select, and to prevent dragging",
    eraserRevert: "Hold Alt to revert the elements marked for deletion",
    firefox_clipboard_write: 'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',
    disableSnapping: "Hold CtrlOrCmd to disable snapping"
}
  , lR = {
    cannotShowPreview: "Cannot show preview",
    canvasTooBig: "The canvas may be too big.",
    canvasTooBigTip: "Tip: try moving the farthest elements a bit closer together."
}
  , cR = {
    headingMain: "Encountered an error. Try <button>reloading the page</button>.",
    clearCanvasMessage: "If reloading doesn't work, try <button>clearing the canvas</button>.",
    clearCanvasCaveat: " This will result in loss of work ",
    trackedToSentry: "The error with identifier {{eventId}} was tracked on our system.",
    openIssueMessage: "We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",
    sceneContent: "Scene content:"
}
  , uR = {
    or: "Or"
}
  , dR = {
    desc_intro: "Invite people to collaborate on your drawing.",
    desc_privacy: "Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.",
    button_startSession: "Start session",
    button_stopSession: "Stop session",
    desc_inProgressIntro: "Live-collaboration session is now in progress.",
    desc_shareLink: "Share this link with anyone you want to collaborate with:",
    desc_exitSession: "Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",
    shareTitle: "Join a live collaboration session on Excalidraw"
}
  , fR = {
    title: "Error"
}
  , hR = {
    disk_title: "Save to disk",
    disk_details: "Export the scene data to a file from which you can import later.",
    disk_button: "Save to file",
    link_title: "Shareable link",
    link_details: "Export as a read-only link.",
    link_button: "Export to Link",
    excalidrawplus_description: "Save the scene to your Excalidraw+ workspace.",
    excalidrawplus_button: "Export",
    excalidrawplus_exportError: "Couldn't export to Excalidraw+ at this moment..."
}
  , gR = {
    blog: "Read our blog",
    click: "click",
    deepSelect: "Deep select",
    deepBoxSelect: "Deep select within box, and prevent dragging",
    createFlowchart: "Create a flowchart from a generic element",
    navigateFlowchart: "Navigate a flowchart",
    curvedArrow: "Curved arrow",
    curvedLine: "Curved line",
    documentation: "Documentation",
    doubleClick: "double-click",
    drag: "drag",
    editor: "Editor",
    editLineArrowPoints: "Edit line/arrow points",
    editText: "Edit text / add label",
    github: "Found an issue? Submit",
    howto: "Follow our guides",
    or: "or",
    preventBinding: "Prevent arrow binding",
    tools: "Tools",
    shortcuts: "Keyboard shortcuts",
    textFinish: "Finish editing (text editor)",
    textNewLine: "Add new line (text editor)",
    title: "Help",
    view: "View",
    zoomToFit: "Zoom to fit all elements",
    zoomToSelection: "Zoom to selection",
    toggleElementLock: "Lock/unlock selection",
    movePageUpDown: "Move page up/down",
    movePageLeftRight: "Move page left/right"
}
  , pR = {
    title: "Clear canvas"
}
  , mR = {
    title: "Publish library",
    itemName: "Item name",
    authorName: "Author name",
    githubUsername: "GitHub username",
    twitterUsername: "Twitter username",
    libraryName: "Library name",
    libraryDesc: "Library description",
    website: "Website",
    placeholder: {
        authorName: "Your name or username",
        libraryName: "Name of your library",
        libraryDesc: "Description of your library to help people understand its usage",
        githubHandle: "GitHub handle (optional), so you can edit the library once submitted for review",
        twitterHandle: "Twitter username (optional), so we know who to credit when promoting over Twitter",
        website: "Link to your personal website or elsewhere (optional)"
    },
    errors: {
        required: "Required",
        website: "Enter a valid URL"
    },
    noteDescription: "Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",
    noteGuidelines: "The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",
    noteLicense: "By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",
    noteItems: "Each library item must have its own name so it's filterable. The following library items will be included:",
    atleastOneLibItem: "Please select at least one library item to get started",
    republishWarning: "Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."
}
  , vR = {
    title: "Library submitted",
    content: "Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"
}
  , yR = {
    resetLibrary: "Reset library",
    removeItemsFromLib: "Remove selected items from library"
}
  , wR = {
    header: "Export image",
    label: {
        withBackground: "Background",
        onlySelected: "Only selected",
        darkMode: "Dark mode",
        embedScene: "Embed scene",
        scale: "Scale",
        padding: "Padding"
    },
    tooltip: {
        embedScene: `Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.`
    },
    title: {
        exportToPng: "Export to PNG",
        exportToSvg: "Export to SVG",
        copyPngToClipboard: "Copy PNG to clipboard"
    },
    button: {
        exportToPng: "PNG",
        exportToSvg: "SVG",
        copyPngToClipboard: "Copy to clipboard"
    }
}
  , ER = {
    tooltip: "Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",
    link: "Blog post on end-to-end encryption in Excalidraw"
}
  , bR = {
    angle: "Angle",
    shapes: "Shapes",
    height: "Height",
    scene: "Scene",
    selected: "Selected",
    storage: "Storage",
    fullTitle: "Canvas & Shape properties",
    title: "Properties",
    generalStats: "General",
    elementProperties: "Shape properties",
    total: "Total",
    version: "Version",
    versionCopy: "Click to copy",
    versionNotAvailable: "Version not available",
    width: "Width"
}
  , _R = {
    addedToLibrary: "Added to library",
    copyStyles: "Copied styles.",
    copyToClipboard: "Copied to clipboard.",
    copyToClipboardAsPng: `Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`,
    fileSaved: "File saved.",
    fileSavedToFilename: "Saved to {filename}",
    canvas: "canvas",
    selection: "selection",
    pasteAsSingleElement: `Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`,
    unableToEmbed: "Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",
    unrecognizedLinkFormat: "The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site"
}
  , xR = {
    transparent: "Transparent",
    black: "Black",
    white: "White",
    red: "Red",
    pink: "Pink",
    grape: "Grape",
    violet: "Violet",
    gray: "Gray",
    blue: "Blue",
    cyan: "Cyan",
    teal: "Teal",
    green: "Green",
    yellow: "Yellow",
    orange: "Orange",
    bronze: "Bronze"
}
  , SR = {
    app: {
        center_heading: "All your data is saved locally in your browser.",
        center_heading_plus: "Did you want to go to the Excalidraw+ instead?",
        menuHint: "Export, preferences, languages, ..."
    },
    defaults: {
        menuHint: "Export, preferences, and more...",
        center_heading: "Diagrams. Made. Simple.",
        toolbarHint: "Pick a tool & Start drawing!",
        helpHint: "Shortcuts & help"
    }
}
  , IR = {
    mostUsedCustomColors: "Most used custom colors",
    colors: "Colors",
    shades: "Shades",
    hexCode: "Hex code",
    noShades: "No shades available for this color"
}
  , CR = {
    action: {
        exportToImage: {
            title: "Export as image",
            button: "Export as image",
            description: "Export the scene data as an image from which you can import later."
        },
        saveToDisk: {
            title: "Save to disk",
            button: "Save to disk",
            description: "Export the scene data to a file from which you can import later."
        },
        excalidrawPlus: {
            title: "Excalidraw+",
            button: "Export to Excalidraw+",
            description: "Save the scene to your Excalidraw+ workspace."
        }
    },
    modal: {
        loadFromFile: {
            title: "Load from file",
            button: "Load from file",
            description: "Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."
        },
        shareableLink: {
            title: "Load from link",
            button: "Replace my content",
            description: "Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."
        }
    }
}
  , kR = {
    title: "Mermaid to Excalidraw",
    button: "Insert",
    description: "Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.",
    syntax: "Mermaid Syntax",
    preview: "Preview"
}
  , TR = {
    placeholder: "Quick search"
}
  , AR = {
    badge: {
        old: "old"
    },
    sceneFonts: "In this scene",
    availableFonts: "Available fonts",
    empty: "No fonts found"
}
  , MR = {
    empty: "No users found",
    hint: {
        text: "Click on user to follow",
        followStatus: "You're currently following this user",
        inCall: "User is in a voice call",
        micMuted: "User's microphone is muted",
        isSpeaking: "User is speaking"
    }
}
  , LR = {
    title: "Command palette",
    shortcuts: {
        select: "Select",
        confirm: "Confirm",
        close: "Close"
    },
    recents: "Recently used",
    search: {
        placeholder: "Search menus, commands, and discover hidden gems",
        noMatch: "No matching commands..."
    },
    itemNotAvailable: "Command is not available...",
    shortcutHint: "For Command palette, use {{shortcut}}"
}
  , _6 = {
    labels: JP,
    library: eR,
    buttons: tR,
    alerts: nR,
    errors: rR,
    toolBar: iR,
    element: oR,
    headings: sR,
    hints: aR,
    canvasError: lR,
    errorSplash: cR,
    shareDialog: uR,
    roomDialog: dR,
    errorDialog: fR,
    exportDialog: hR,
    helpDialog: gR,
    clearCanvasDialog: pR,
    publishDialog: mR,
    publishSuccessDialog: vR,
    confirmDialog: yR,
    imageExportDialog: wR,
    encrypted: ER,
    stats: bR,
    toast: _R,
    colors: xR,
    welcomeScreen: SR,
    colorPicker: IR,
    overwriteConfirm: CR,
    mermaid: kR,
    quickSearch: TR,
    fontList: AR,
    userList: MR,
    commandPalette: LR
}
  , Gq = Object.freeze(Object.defineProperty({
    __proto__: null,
    alerts: nR,
    buttons: tR,
    canvasError: lR,
    clearCanvasDialog: pR,
    colorPicker: IR,
    colors: xR,
    commandPalette: LR,
    confirmDialog: yR,
    default: _6,
    element: oR,
    encrypted: ER,
    errorDialog: fR,
    errorSplash: cR,
    errors: rR,
    exportDialog: hR,
    fontList: AR,
    headings: sR,
    helpDialog: gR,
    hints: aR,
    imageExportDialog: wR,
    labels: JP,
    library: eR,
    mermaid: kR,
    overwriteConfirm: CR,
    publishDialog: mR,
    publishSuccessDialog: vR,
    quickSearch: TR,
    roomDialog: dR,
    shareDialog: uR,
    stats: bR,
    toast: _R,
    toolBar: iR,
    userList: MR,
    welcomeScreen: SR
}, Symbol.toStringTag, {
    value: "Module"
}))
  , PR = 100
  , RR = 36
  , DR = {
    "ar-SA": 94,
    "az-AZ": 17,
    "bg-BG": 71,
    "bn-BD": 52,
    "ca-ES": 83,
    "cs-CZ": 86,
    "da-DK": 61,
    "de-DE": 100,
    "el-GR": 80,
    en: PR,
    "es-ES": 96,
    "eu-ES": 97,
    "fa-IR": 84,
    "fi-FI": 76,
    "fr-FR": 99,
    "gl-ES": 86,
    "he-IL": 77,
    "hi-IN": 76,
    "hu-HU": 76,
    "id-ID": 91,
    "it-IT": 98,
    "ja-JP": 90,
    kaa: RR,
    "kab-KAB": 76,
    "kk-KZ": 18,
    "km-KH": 83,
    "ko-KR": 100,
    "ku-TR": 87,
    "lt-LT": 48,
    "lv-LV": 77,
    "mr-IN": 98,
    "my-MM": 35,
    "nb-NO": 93,
    "nl-NL": 75,
    "nn-NO": 67,
    "oc-FR": 92,
    "pa-IN": 78,
    "pl-PL": 99,
    "pt-BR": 91,
    "pt-PT": 83,
    "ro-RO": 99,
    "ru-RU": 92,
    "si-LK": 7,
    "sk-SK": 100,
    "sl-SI": 100,
    "sv-SE": 100,
    "ta-IN": 81,
    "th-TH": 44,
    "tr-TR": 87,
    "uk-UA": 93,
    "vi-VN": 49,
    "zh-CN": 100,
    "zh-HK": 22,
    "zh-TW": 100
}
  , Vq = Object.freeze(Object.defineProperty({
    __proto__: null,
    default: DR,
    en: PR,
    kaa: RR
}, Symbol.toStringTag, {
    value: "Module"
}));
let Yq = 0;
function jq(e, t) {
    const n = `atom${++Yq}`
      , r = {
        toString: ()=>n
    };
    return typeof e == "function" ? r.read = e : (r.init = e,
    r.read = i=>i(r),
    r.write = (i,o,s)=>o(r, typeof s == "function" ? s(i(r)) : s)),
    r
}
var Si = {
    VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
    VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
    VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
    VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
    VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
    VITE_APP_PLUS_APP: "https://app.excalidraw.com",
    VITE_APP_AI_BACKEND: "https://oss-ai.excalidraw.com",
    VITE_APP_WS_SERVER_URL: "https://oss-collab.excalidraw.com",
    VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
    VITE_APP_ENABLE_TRACKING: "true",
    VITE_APP_GIT_SHA: "fb4bb29aa5d9f03c60afc9984b01f25bcd117970",
    BASE_URL: "/",
    MODE: "production",
    DEV: !1,
    PROD: !0,
    SSR: !1
};
const Hl = Symbol()
  , B3 = e=>!!e[Hl]
  , h0 = e=>!e[Hl].c
  , Eh = e=>{
    var t;
    const {b: n, c: r} = e[Hl];
    r && (r(),
    (t = Xq.get(n)) == null || t())
}
  , im = (e,t)=>{
    const n = e[Hl].o
      , r = t[Hl].o;
    return n === r || e === r || B3(n) && im(n, t)
}
  , z3 = (e,t)=>{
    const n = {
        b: e,
        o: t,
        c: null
    }
      , r = new Promise(i=>{
        n.c = ()=>{
            n.c = null,
            i()
        }
        ,
        t.finally(n.c)
    }
    );
    return r[Hl] = n,
    r
}
  , Kq = e=>z3(e[Hl].b, e[Hl].o)
  , Xq = new WeakMap
  , g0 = e=>"init"in e
  , ep = "r"
  , n2 = "w"
  , tp = "c"
  , r2 = "s"
  , xk = "h"
  , Zq = "n"
  , qq = "l"
  , Qq = "a"
  , Jq = "m"
  , OR = e=>{
    const t = new WeakMap
      , n = new WeakMap
      , r = new Map;
    let i, o;
    if ((Si && "production") !== "production" && (i = new Set,
    o = new Set),
    e)
        for (const [G,H] of e) {
            const J = {
                v: H,
                r: 0,
                y: !0,
                d: new Map
            };
            (Si && "production") !== "production" && (Object.freeze(J),
            g0(G) || console.warn("Found initial value for derived atom which can cause unexpected behavior", G)),
            t.set(G, J)
        }
    const s = new WeakMap
      , a = (G,H,J)=>{
        let te = s.get(H);
        te || (te = new Map,
        s.set(H, te)),
        J.then(()=>{
            te.get(G) === J && (te.delete(G),
            te.size || s.delete(H))
        }
        ),
        te.set(G, J)
    }
      , l = G=>{
        const H = new Set
          , J = s.get(G);
        return J && (s.delete(G),
        J.forEach((te,oe)=>{
            Eh(te),
            H.add(oe)
        }
        )),
        H
    }
      , c = new WeakMap
      , u = G=>{
        let H = c.get(G);
        return H || (H = new Map,
        c.set(G, H)),
        H
    }
      , f = (G,H)=>{
        if (G) {
            const J = u(G);
            let te = J.get(H);
            return te || (te = f(G.p, H),
            te && "p"in te && h0(te.p) && (te = void 0),
            te && J.set(H, te)),
            te
        }
        return t.get(H)
    }
      , h = (G,H,J)=>{
        if ((Si && "production") !== "production" && Object.freeze(J),
        G)
            u(G).set(H, J);
        else {
            const te = t.get(H);
            t.set(H, J),
            r.has(H) || r.set(H, te)
        }
    }
      , m = (G,H=new Map,J)=>{
        if (!J)
            return H;
        const te = new Map;
        let oe = !1;
        return J.forEach(de=>{
            var pe;
            const be = ((pe = f(G, de)) == null ? void 0 : pe.r) || 0;
            te.set(de, be),
            H.get(de) !== be && (oe = !0)
        }
        ),
        H.size === te.size && !oe ? H : te
    }
      , v = (G,H,J,te,oe)=>{
        const de = f(G, H);
        if (de) {
            if (oe && (!("p"in de) || !im(de.p, oe)))
                return de;
            "p"in de && Eh(de.p)
        }
        const pe = {
            v: J,
            r: (de == null ? void 0 : de.r) || 0,
            y: !0,
            d: m(G, de == null ? void 0 : de.d, te)
        };
        let be = !(de != null && de.y);
        return !de || !("v"in de) || !Object.is(de.v, J) ? (be = !0,
        ++pe.r,
        pe.d.has(H) && (pe.d = new Map(pe.d).set(H, pe.r))) : pe.d !== de.d && (pe.d.size !== de.d.size || !Array.from(pe.d.keys()).every(tt=>de.d.has(tt))) && (be = !0,
        Promise.resolve().then(()=>{
            re(G)
        }
        )),
        de && !be ? de : (h(G, H, pe),
        pe)
    }
      , y = (G,H,J,te,oe)=>{
        const de = f(G, H);
        if (de) {
            if (oe && (!("p"in de) || !im(de.p, oe)))
                return de;
            "p"in de && Eh(de.p)
        }
        const pe = {
            e: J,
            r: ((de == null ? void 0 : de.r) || 0) + 1,
            y: !0,
            d: m(G, de == null ? void 0 : de.d, te)
        };
        return h(G, H, pe),
        pe
    }
      , E = (G,H,J,te)=>{
        const oe = f(G, H);
        if (oe && "p"in oe) {
            if (im(oe.p, J) && !h0(oe.p))
                return oe.y ? oe : {
                    ...oe,
                    y: !0
                };
            Eh(oe.p)
        }
        a(G, H, J);
        const de = {
            p: J,
            r: ((oe == null ? void 0 : oe.r) || 0) + 1,
            y: !0,
            d: m(G, oe == null ? void 0 : oe.d, te)
        };
        return h(G, H, de),
        de
    }
      , b = (G,H,J,te)=>{
        if (J instanceof Promise) {
            const oe = z3(J, J.then(de=>{
                v(G, H, de, te, oe)
            }
            ).catch(de=>{
                if (de instanceof Promise)
                    return B3(de) ? de.then(()=>{
                        x(G, H, !0)
                    }
                    ) : de;
                y(G, H, de, te, oe)
            }
            ));
            return E(G, H, oe, te)
        }
        return v(G, H, J, te)
    }
      , _ = (G,H)=>{
        const J = f(G, H);
        if (J) {
            const te = {
                ...J,
                y: !1
            };
            h(G, H, te)
        } else
            (Si && "production") !== "production" && console.warn("[Bug] could not invalidate non existing atom", H)
    }
      , x = (G,H,J)=>{
        if (!J) {
            const oe = f(G, H);
            if (oe) {
                if (oe.y && "p"in oe && !h0(oe.p))
                    return oe;
                if (oe.d.forEach((de,pe)=>{
                    if (pe !== H)
                        if (!n.has(pe))
                            x(G, pe);
                        else {
                            const be = f(G, pe);
                            be && !be.y && x(G, pe)
                        }
                }
                ),
                Array.from(oe.d).every(([de,pe])=>{
                    const be = f(G, de);
                    return be && !("p"in be) && be.r === pe
                }
                ))
                    return oe.y ? oe : {
                        ...oe,
                        y: !0
                    }
            }
        }
        const te = new Set;
        try {
            const oe = H.read(de=>{
                te.add(de);
                const pe = de === H ? f(G, de) : x(G, de);
                if (pe) {
                    if ("e"in pe)
                        throw pe.e;
                    if ("p"in pe)
                        throw pe.p;
                    return pe.v
                }
                if (g0(de))
                    return de.init;
                throw new Error("no atom init")
            }
            );
            return b(G, H, oe, te)
        } catch (oe) {
            if (oe instanceof Promise) {
                const de = B3(oe) && h0(oe) ? Kq(oe) : z3(oe, oe);
                return E(G, H, de, te)
            }
            return y(G, H, oe, te)
        }
    }
      , C = (G,H)=>x(H, G)
      , P = (G,H)=>{
        let J = n.get(H);
        return J || (J = V(G, H)),
        J
    }
      , M = (G,H)=>!H.l.size && (!H.t.size || H.t.size === 1 && H.t.has(G))
      , A = (G,H)=>{
        const J = n.get(H);
        J && M(H, J) && z(G, H)
    }
      , I = (G,H)=>{
        const J = n.get(H);
        J == null || J.t.forEach(te=>{
            te !== H && (_(G, te),
            I(G, te))
        }
        )
    }
      , O = (G,H,J)=>{
        let te = !0;
        const oe = (be,tt)=>{
            const Je = x(G, be);
            if ("e"in Je)
                throw Je.e;
            if ("p"in Je) {
                if (tt != null && tt.unstable_promise)
                    return Je.p.then(()=>{
                        const nt = f(G, be);
                        return nt && "p"in nt && nt.p === Je.p ? new Promise(ot=>setTimeout(ot)).then(()=>oe(be, tt)) : oe(be, tt)
                    }
                    );
                throw (Si && "production") !== "production" && console.info("Reading pending atom state in write operation. We throw a promise for now.", be),
                Je.p
            }
            if ("v"in Je)
                return Je.v;
            throw (Si && "production") !== "production" && console.warn("[Bug] no value found while reading atom in write operation. This is probably a bug.", be),
            new Error("no value found")
        }
          , de = (be,tt)=>{
            let Je;
            if (be === H) {
                if (!g0(be))
                    throw new Error("atom not writable");
                l(be).forEach(dr=>{
                    dr !== G && b(dr, be, tt)
                }
                );
                const ot = f(G, be)
                  , kt = b(G, be, tt);
                ot !== kt && I(G, be)
            } else
                Je = O(G, be, tt);
            return te || re(G),
            Je
        }
          , pe = H.write(oe, de, J);
        return te = !1,
        pe
    }
      , N = (G,H,J)=>{
        const te = O(J, G, H);
        return re(J),
        te
    }
      , $ = G=>!!G.write
      , V = (G,H,J)=>{
        const te = {
            t: new Set(J && [J]),
            l: new Set
        };
        if (n.set(H, te),
        (Si && "production") !== "production" && o.add(H),
        x(void 0, H).d.forEach((de,pe)=>{
            const be = n.get(pe);
            be ? be.t.add(H) : pe !== H && V(G, pe, H)
        }
        ),
        $(H) && H.onMount) {
            const de = be=>N(H, be, G)
              , pe = H.onMount(de);
            G = void 0,
            pe && (te.u = pe)
        }
        return te
    }
      , z = (G,H)=>{
        var J;
        const te = (J = n.get(H)) == null ? void 0 : J.u;
        te && te(),
        n.delete(H),
        (Si && "production") !== "production" && o.delete(H);
        const oe = f(G, H);
        oe ? ("p"in oe && Eh(oe.p),
        oe.d.forEach((de,pe)=>{
            if (pe !== H) {
                const be = n.get(pe);
                be && (be.t.delete(H),
                M(pe, be) && z(G, pe))
            }
        }
        )) : (Si && "production") !== "production" && console.warn("[Bug] could not find atom state to unmount", H)
    }
      , j = (G,H,J,te)=>{
        const oe = new Set(J.d.keys());
        te == null || te.forEach((de,pe)=>{
            if (oe.has(pe)) {
                oe.delete(pe);
                return
            }
            const be = n.get(pe);
            be && (be.t.delete(H),
            M(pe, be) && z(G, pe))
        }
        ),
        oe.forEach(de=>{
            const pe = n.get(de);
            pe ? pe.t.add(H) : n.has(H) && V(G, de, H)
        }
        )
    }
      , re = G=>{
        if (G) {
            u(G).forEach((J,te)=>{
                const oe = t.get(te);
                if (J !== oe) {
                    const de = n.get(te);
                    de == null || de.l.forEach(pe=>pe(G))
                }
            }
            );
            return
        }
        for (; r.size; ) {
            const H = Array.from(r);
            r.clear(),
            H.forEach(([J,te])=>{
                const oe = f(void 0, J);
                if (oe && oe.d !== (te == null ? void 0 : te.d) && j(void 0, J, oe, te == null ? void 0 : te.d),
                te && !te.y && (oe != null && oe.y))
                    return;
                const de = n.get(J);
                de == null || de.l.forEach(pe=>pe())
            }
            )
        }
        (Si && "production") !== "production" && i.forEach(H=>H())
    }
      , se = G=>{
        u(G).forEach((J,te)=>{
            const oe = t.get(te);
            (!oe || J.r > oe.r || J.y !== oe.y || J.r === oe.r && J.d !== oe.d) && (t.set(te, J),
            J.d !== (oe == null ? void 0 : oe.d) && j(G, te, J, oe == null ? void 0 : oe.d))
        }
        )
    }
      , ae = (G,H)=>{
        H && se(H),
        re(void 0)
    }
      , q = (G,H,J)=>{
        const oe = P(J, G).l;
        return oe.add(H),
        ()=>{
            oe.delete(H),
            A(J, G)
        }
    }
      , K = (G,H)=>{
        for (const [J,te] of G)
            g0(J) && (b(H, J, te),
            I(H, J));
        re(H)
    }
    ;
    return (Si && "production") !== "production" ? {
        [ep]: C,
        [n2]: N,
        [tp]: ae,
        [r2]: q,
        [xk]: K,
        [Zq]: G=>(i.add(G),
        ()=>{
            i.delete(G)
        }
        ),
        [qq]: ()=>o.values(),
        [Qq]: G=>t.get(G),
        [Jq]: G=>n.get(G)
    } : {
        [ep]: C,
        [n2]: N,
        [tp]: ae,
        [r2]: q,
        [xk]: K
    }
}
  , NR = e=>{
    const t = OR(e)
      , n = s=>{
        const a = t[ep](s);
        if ("e"in a)
            throw a.e;
        if (!("p"in a))
            return a.v
    }
      , r = s=>new Promise((a,l)=>{
        const c = t[ep](s);
        "e"in c ? l(c.e) : "p"in c ? a(c.p.then(()=>r(s))) : a(c.v)
    }
    );
    return {
        get: n,
        asyncGet: r,
        set: (s,a)=>t[n2](s, a),
        sub: (s,a)=>t[r2](s, a),
        SECRET_INTERNAL_store: t
    }
}
  , FR = (e,t)=>({
    s: t ? t(e).SECRET_INTERNAL_store : OR(e)
})
  , TE = new Map
  , x6 = e=>(TE.has(e) || TE.set(e, T.createContext(FR())),
TE.get(e))
  , S6 = ({children: e, initialValues: t, scope: n, unstable_createStore: r, unstable_enableVersionedWrite: i})=>{
    const [o,s] = T.useState({});
    T.useEffect(()=>{
        const c = a.current;
        c.w && (c.s[tp](null, o),
        delete o.p,
        c.v = o)
    }
    , [o]);
    const a = T.useRef();
    if (!a.current) {
        const c = FR(t, r);
        if (i) {
            let u = 0;
            c.w = f=>{
                s(h=>{
                    const m = u ? h : {
                        p: h
                    };
                    return f(m),
                    m
                }
                )
            }
            ,
            c.v = o,
            c.r = f=>{
                ++u,
                f(),
                --u
            }
        }
        a.current = c
    }
    const l = x6(n);
    return T.createElement(l.Provider, {
        value: a.current
    }, e)
}
;
function mn(e, t) {
    return jq(e)
}
function cf(e, t) {
    const n = x6(t)
      , r = T.useContext(n)
      , {s: i, v: o} = r
      , s = h=>{
        const m = i[ep](e, h);
        if ((Si && "production") !== "production" && !m.y)
            throw new Error("should not be invalidated");
        if ("e"in m)
            throw m.e;
        if ("p"in m)
            throw m.p;
        if ("v"in m)
            return m.v;
        throw new Error("no atom value")
    }
      , [[a,l,c],u] = T.useReducer((h,m)=>{
        const v = s(m);
        return Object.is(h[1], v) && h[2] === e ? h : [m, v, e]
    }
    , o, h=>{
        const m = s(h);
        return [h, m, e]
    }
    );
    let f = l;
    return c !== e && (u(a),
    f = s(a)),
    T.useEffect(()=>{
        const {v: h} = r;
        h && i[tp](e, h);
        const m = i[r2](e, u, h);
        return u(h),
        m
    }
    , [i, e, r]),
    T.useEffect(()=>{
        i[tp](e, a)
    }
    ),
    T.useDebugValue(f),
    f
}
function Lf(e, t) {
    const n = x6(t)
      , {s: r, w: i} = T.useContext(n);
    return T.useCallback(s=>{
        if ((Si && "production") !== "production" && !("write"in e))
            throw new Error("not writable atom");
        const a = l=>r[n2](e, s, l);
        return i ? i(a) : a()
    }
    , [r, i, e])
}
function Ot(e, t) {
    return "scope"in e && (console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),
    t = e.scope),
    [cf(e, t), Lf(e, t)]
}
const cr = Symbol()
  , Ss = NR()
  , eQ = (e,t)=>{
    const [n,r] = Ot(e);
    return T.useLayoutEffect(()=>{
        r(typeof t == "function" ? t() : t)
    }
    , []),
    [n, r]
}
  , tQ = 85
  , ku = {
    code: "en",
    label: "English"
}
  , kv = [ku, ...[{
    code: "ar-SA",
    label: "العربية",
    rtl: !0
}, {
    code: "bg-BG",
    label: "Български"
}, {
    code: "ca-ES",
    label: "Català"
}, {
    code: "cs-CZ",
    label: "Česky"
}, {
    code: "de-DE",
    label: "Deutsch"
}, {
    code: "el-GR",
    label: "Ελληνικά"
}, {
    code: "es-ES",
    label: "Español"
}, {
    code: "eu-ES",
    label: "Euskara"
}, {
    code: "fa-IR",
    label: "فارسی",
    rtl: !0
}, {
    code: "fi-FI",
    label: "Suomi"
}, {
    code: "fr-FR",
    label: "Français"
}, {
    code: "gl-ES",
    label: "Galego"
}, {
    code: "he-IL",
    label: "עברית",
    rtl: !0
}, {
    code: "hi-IN",
    label: "हिन्दी"
}, {
    code: "hu-HU",
    label: "Magyar"
}, {
    code: "id-ID",
    label: "Bahasa Indonesia"
}, {
    code: "it-IT",
    label: "Italiano"
}, {
    code: "ja-JP",
    label: "日本語"
}, {
    code: "kab-KAB",
    label: "Taqbaylit"
}, {
    code: "kk-KZ",
    label: "Қазақ тілі"
}, {
    code: "ko-KR",
    label: "한국어"
}, {
    code: "ku-TR",
    label: "Kurdî"
}, {
    code: "lt-LT",
    label: "Lietuvių"
}, {
    code: "lv-LV",
    label: "Latviešu"
}, {
    code: "my-MM",
    label: "Burmese"
}, {
    code: "nb-NO",
    label: "Norsk bokmål"
}, {
    code: "nl-NL",
    label: "Nederlands"
}, {
    code: "nn-NO",
    label: "Norsk nynorsk"
}, {
    code: "oc-FR",
    label: "Occitan"
}, {
    code: "pa-IN",
    label: "ਪੰਜਾਬੀ"
}, {
    code: "pl-PL",
    label: "Polski"
}, {
    code: "pt-BR",
    label: "Português Brasileiro"
}, {
    code: "pt-PT",
    label: "Português"
}, {
    code: "ro-RO",
    label: "Română"
}, {
    code: "ru-RU",
    label: "Русский"
}, {
    code: "sk-SK",
    label: "Slovenčina"
}, {
    code: "sv-SE",
    label: "Svenska"
}, {
    code: "sl-SI",
    label: "Slovenščina"
}, {
    code: "tr-TR",
    label: "Türkçe"
}, {
    code: "uk-UA",
    label: "Українська"
}, {
    code: "zh-CN",
    label: "简体中文"
}, {
    code: "zh-TW",
    label: "繁體中文"
}, {
    code: "vi-VN",
    label: "Tiếng Việt"
}, {
    code: "mr-IN",
    label: "मराठी"
}].filter(e=>DR[e.code] >= tQ).sort((e,t)=>e.label > t.label ? 1 : -1)]
  , BR = "__test__";
let Md = ku
  , om = {};
const zR = async e=>{
    if (Md = e,
    document.documentElement.dir = Md.rtl ? "rtl" : "ltr",
    document.documentElement.lang = Md.code,
    e.code.startsWith(BR))
        om = {};
    else
        try {
            om = await Wq(Object.assign({
                "./locales/ar-SA.json": ()=>_e(()=>import("./locales/ar-SA.json-D_jDFH8k.js"), __vite__mapDeps([])),
                "./locales/az-AZ.json": ()=>_e(()=>import("./locales/az-AZ.json-BV3iXazI.js"), __vite__mapDeps([])),
                "./locales/bg-BG.json": ()=>_e(()=>import("./locales/bg-BG.json-CFqJeJis.js"), __vite__mapDeps([])),
                "./locales/bn-BD.json": ()=>_e(()=>import("./locales/bn-BD.json-Dg0jTBuU.js"), __vite__mapDeps([])),
                "./locales/ca-ES.json": ()=>_e(()=>import("./locales/ca-ES.json-B_rqfBtq.js"), __vite__mapDeps([])),
                "./locales/cs-CZ.json": ()=>_e(()=>import("./locales/cs-CZ.json-Cd3Jrse6.js"), __vite__mapDeps([])),
                "./locales/da-DK.json": ()=>_e(()=>import("./locales/da-DK.json-DIUMM5f1.js"), __vite__mapDeps([])),
                "./locales/de-DE.json": ()=>_e(()=>import("./locales/de-DE.json-BF0RlQMn.js"), __vite__mapDeps([])),
                "./locales/el-GR.json": ()=>_e(()=>import("./locales/el-GR.json-DU1ye1AH.js"), __vite__mapDeps([])),
                "./locales/en.json": ()=>_e(()=>Promise.resolve().then(()=>Gq), void 0),
                "./locales/es-ES.json": ()=>_e(()=>import("./locales/es-ES.json-xlQfaHzf.js"), __vite__mapDeps([])),
                "./locales/eu-ES.json": ()=>_e(()=>import("./locales/eu-ES.json-DHzY6Edt.js"), __vite__mapDeps([])),
                "./locales/fa-IR.json": ()=>_e(()=>import("./locales/fa-IR.json-dG0Oexeb.js"), __vite__mapDeps([])),
                "./locales/fi-FI.json": ()=>_e(()=>import("./locales/fi-FI.json-Bujb5Dw7.js"), __vite__mapDeps([])),
                "./locales/fr-FR.json": ()=>_e(()=>import("./locales/fr-FR.json-XQSU67Np.js"), __vite__mapDeps([])),
                "./locales/gl-ES.json": ()=>_e(()=>import("./locales/gl-ES.json-DtDal_zw.js"), __vite__mapDeps([])),
                "./locales/he-IL.json": ()=>_e(()=>import("./locales/he-IL.json-DVcgm2lM.js"), __vite__mapDeps([])),
                "./locales/hi-IN.json": ()=>_e(()=>import("./locales/hi-IN.json-C8kzCSp9.js"), __vite__mapDeps([])),
                "./locales/hu-HU.json": ()=>_e(()=>import("./locales/hu-HU.json-DAfvrv_C.js"), __vite__mapDeps([])),
                "./locales/id-ID.json": ()=>_e(()=>import("./locales/id-ID.json-CBiVsIt-.js"), __vite__mapDeps([])),
                "./locales/it-IT.json": ()=>_e(()=>import("./locales/it-IT.json-WpaAwjln.js"), __vite__mapDeps([])),
                "./locales/ja-JP.json": ()=>_e(()=>import("./locales/ja-JP.json-lTAhYhc8.js"), __vite__mapDeps([])),
                "./locales/kaa.json": ()=>_e(()=>import("./locales/kaa.json-FVrrRyw0.js"), __vite__mapDeps([])),
                "./locales/kab-KAB.json": ()=>_e(()=>import("./locales/kab-KAB.json-BrNis2fB.js"), __vite__mapDeps([])),
                "./locales/kk-KZ.json": ()=>_e(()=>import("./locales/kk-KZ.json-D22q2uZy.js"), __vite__mapDeps([])),
                "./locales/km-KH.json": ()=>_e(()=>import("./locales/km-KH.json-c8LT4rcW.js"), __vite__mapDeps([])),
                "./locales/ko-KR.json": ()=>_e(()=>import("./locales/ko-KR.json-Be74AxMq.js"), __vite__mapDeps([])),
                "./locales/ku-TR.json": ()=>_e(()=>import("./locales/ku-TR.json-DnNoknS4.js"), __vite__mapDeps([])),
                "./locales/lt-LT.json": ()=>_e(()=>import("./locales/lt-LT.json-Bezae7cb.js"), __vite__mapDeps([])),
                "./locales/lv-LV.json": ()=>_e(()=>import("./locales/lv-LV.json-DjX28ylN.js"), __vite__mapDeps([])),
                "./locales/mr-IN.json": ()=>_e(()=>import("./locales/mr-IN.json-oZ81g7ZD.js"), __vite__mapDeps([])),
                "./locales/my-MM.json": ()=>_e(()=>import("./locales/my-MM.json-DYr6nfRL.js"), __vite__mapDeps([])),
                "./locales/nb-NO.json": ()=>_e(()=>import("./locales/nb-NO.json-KO5Ap4Cw.js"), __vite__mapDeps([])),
                "./locales/nl-NL.json": ()=>_e(()=>import("./locales/nl-NL.json-CF-IsFrk.js"), __vite__mapDeps([])),
                "./locales/nn-NO.json": ()=>_e(()=>import("./locales/nn-NO.json-BUxdfyBP.js"), __vite__mapDeps([])),
                "./locales/oc-FR.json": ()=>_e(()=>import("./locales/oc-FR.json-DJSOwdjr.js"), __vite__mapDeps([])),
                "./locales/pa-IN.json": ()=>_e(()=>import("./locales/pa-IN.json-CWeXowf0.js"), __vite__mapDeps([])),
                "./locales/percentages.json": ()=>_e(()=>Promise.resolve().then(()=>Vq), void 0),
                "./locales/pl-PL.json": ()=>_e(()=>import("./locales/pl-PL.json-DC_Gtqyg.js"), __vite__mapDeps([])),
                "./locales/pt-BR.json": ()=>_e(()=>import("./locales/pt-BR.json-BP870iwO.js"), __vite__mapDeps([])),
                "./locales/pt-PT.json": ()=>_e(()=>import("./locales/pt-PT.json-BCiUoe7O.js"), __vite__mapDeps([])),
                "./locales/ro-RO.json": ()=>_e(()=>import("./locales/ro-RO.json-DDtEzs-o.js"), __vite__mapDeps([])),
                "./locales/ru-RU.json": ()=>_e(()=>import("./locales/ru-RU.json-Cu66rc7c.js"), __vite__mapDeps([])),
                "./locales/si-LK.json": ()=>_e(()=>import("./locales/si-LK.json-D8rbKfZA.js"), __vite__mapDeps([])),
                "./locales/sk-SK.json": ()=>_e(()=>import("./locales/sk-SK.json-B-lk308q.js"), __vite__mapDeps([])),
                "./locales/sl-SI.json": ()=>_e(()=>import("./locales/sl-SI.json-C9l50axt.js"), __vite__mapDeps([])),
                "./locales/sv-SE.json": ()=>_e(()=>import("./locales/sv-SE.json-S0z3nuUO.js"), __vite__mapDeps([])),
                "./locales/ta-IN.json": ()=>_e(()=>import("./locales/ta-IN.json-Bb4XJg6y.js"), __vite__mapDeps([])),
                "./locales/th-TH.json": ()=>_e(()=>import("./locales/th-TH.json-D-2txP3v.js"), __vite__mapDeps([])),
                "./locales/tr-TR.json": ()=>_e(()=>import("./locales/tr-TR.json-C8iTlMZv.js"), __vite__mapDeps([])),
                "./locales/uk-UA.json": ()=>_e(()=>import("./locales/uk-UA.json-BmimCNFT.js"), __vite__mapDeps([])),
                "./locales/vi-VN.json": ()=>_e(()=>import("./locales/vi-VN.json-Cs9mO6qO.js"), __vite__mapDeps([])),
                "./locales/zh-CN.json": ()=>_e(()=>import("./locales/zh-CN.json-D5rso2fJ.js"), __vite__mapDeps([])),
                "./locales/zh-HK.json": ()=>_e(()=>import("./locales/zh-HK.json-Cr1Xzg-X.js"), __vite__mapDeps([])),
                "./locales/zh-TW.json": ()=>_e(()=>import("./locales/zh-TW.json-BhXss3zf.js"), __vite__mapDeps([]))
            }), `./locales/${Md.code}.json`)
        } catch (t) {
            console.error(`Failed to load language ${e.code}:`, t.message),
            om = _6
        }
    Ss.set($R, e.code)
}
  , uf = ()=>Md
  , Sk = (e,t)=>{
    for (let n = 0; n < t.length; ++n) {
        const r = t[n];
        if (e[r] === void 0)
            return;
        e = e[r]
    }
    if (typeof e == "string")
        return e
}
  , k = (e,t,n)=>{
    if (Md.code.startsWith(BR))
        return `‪[[${t ? `${e}(${JSON.stringify(t).slice(1, -1)})` : e}]]‬`;
    const r = e.split(".");
    let i = Sk(om, r) || Sk(_6, r) || n;
    if (i === void 0) {
        const o = `Can't find translation for ${e}`;
        return console.warn(o),
        ""
    }
    if (t)
        for (const o in t)
            i = i.replace(`{{${o}}}`, String(t[o]));
    return i
}
  , $R = mn(ku.code)
  , vn = ()=>{
    const e = cf($R, cr);
    return {
        t: k,
        langCode: e
    }
}
;
function UR(e) {
    var t, n, r = "";
    if (typeof e == "string" || typeof e == "number")
        r += e;
    else if (typeof e == "object")
        if (Array.isArray(e))
            for (t = 0; t < e.length; t++)
                e[t] && (n = UR(e[t])) && (r && (r += " "),
                r += n);
        else
            for (t in e)
                e[t] && (r && (r += " "),
                r += t);
    return r
}
function xe() {
    for (var e = 0, t, n, r = ""; e < arguments.length; )
        (t = arguments[e++]) && (n = UR(t)) && (r && (r += " "),
        r += n);
    return r
}
const HR = ()=>{
    const [e,t] = T.useState(null)
      , n = T.useCallback(r=>t(r), []);
    return [e, n]
}
;
function $3(e, t, n) {
    if (e && e.length) {
        const [r,i] = t
          , o = Math.PI / 180 * n
          , s = Math.cos(o)
          , a = Math.sin(o);
        for (const l of e) {
            const [c,u] = l;
            l[0] = (c - r) * s - (u - i) * a + r,
            l[1] = (c - r) * a + (u - i) * s + i
        }
    }
}
function nQ(e, t, n) {
    const r = [];
    e.forEach(i=>r.push(...i)),
    $3(r, t, n)
}
function rQ(e, t) {
    return e[0] === t[0] && e[1] === t[1]
}
function iQ(e, t, n, r=1) {
    const i = n
      , o = Math.max(t, .1)
      , s = e[0] && e[0][0] && typeof e[0][0] == "number" ? [e] : e
      , a = [0, 0];
    if (i)
        for (const c of s)
            $3(c, a, i);
    const l = oQ(s, o, r);
    if (i) {
        for (const c of s)
            $3(c, a, -i);
        nQ(l, a, -i)
    }
    return l
}
function oQ(e, t, n) {
    const r = [];
    for (const c of e) {
        const u = [...c];
        rQ(u[0], u[u.length - 1]) || u.push([u[0][0], u[0][1]]),
        u.length > 2 && r.push(u)
    }
    const i = [];
    t = Math.max(t, .1);
    const o = [];
    for (const c of r)
        for (let u = 0; u < c.length - 1; u++) {
            const f = c[u]
              , h = c[u + 1];
            if (f[1] !== h[1]) {
                const m = Math.min(f[1], h[1]);
                o.push({
                    ymin: m,
                    ymax: Math.max(f[1], h[1]),
                    x: m === f[1] ? f[0] : h[0],
                    islope: (h[0] - f[0]) / (h[1] - f[1])
                })
            }
        }
    if (o.sort((c,u)=>c.ymin < u.ymin ? -1 : c.ymin > u.ymin ? 1 : c.x < u.x ? -1 : c.x > u.x ? 1 : c.ymax === u.ymax ? 0 : (c.ymax - u.ymax) / Math.abs(c.ymax - u.ymax)),
    !o.length)
        return i;
    let s = []
      , a = o[0].ymin
      , l = 0;
    for (; s.length || o.length; ) {
        if (o.length) {
            let c = -1;
            for (let f = 0; f < o.length && !(o[f].ymin > a); f++)
                c = f;
            o.splice(0, c + 1).forEach(f=>{
                s.push({
                    s: a,
                    edge: f
                })
            }
            )
        }
        if (s = s.filter(c=>!(c.edge.ymax <= a)),
        s.sort((c,u)=>c.edge.x === u.edge.x ? 0 : (c.edge.x - u.edge.x) / Math.abs(c.edge.x - u.edge.x)),
        (n !== 1 || l % t === 0) && s.length > 1)
            for (let c = 0; c < s.length; c = c + 2) {
                const u = c + 1;
                if (u >= s.length)
                    break;
                const f = s[c].edge
                  , h = s[u].edge;
                i.push([[Math.round(f.x), a], [Math.round(h.x), a]])
            }
        a += n,
        s.forEach(c=>{
            c.edge.x = c.edge.x + n * c.edge.islope
        }
        ),
        l++
    }
    return i
}
function Fp(e, t) {
    var n;
    const r = t.hachureAngle + 90;
    let i = t.hachureGap;
    i < 0 && (i = t.strokeWidth * 4),
    i = Math.max(i, .1);
    let o = 1;
    return t.roughness >= 1 && (((n = t.randomizer) === null || n === void 0 ? void 0 : n.next()) || Math.random()) > .7 && (o = i),
    iQ(e, i, r, o || 1)
}
class I6 {
    constructor(t) {
        this.helper = t
    }
    fillPolygons(t, n) {
        return this._fillPolygons(t, n)
    }
    _fillPolygons(t, n) {
        const r = Fp(t, n);
        return {
            type: "fillSketch",
            ops: this.renderLines(r, n)
        }
    }
    renderLines(t, n) {
        const r = [];
        for (const i of t)
            r.push(...this.helper.doubleLineOps(i[0][0], i[0][1], i[1][0], i[1][1], n));
        return r
    }
}
function Tv(e) {
    const t = e[0]
      , n = e[1];
    return Math.sqrt(Math.pow(t[0] - n[0], 2) + Math.pow(t[1] - n[1], 2))
}
class sQ extends I6 {
    fillPolygons(t, n) {
        let r = n.hachureGap;
        r < 0 && (r = n.strokeWidth * 4),
        r = Math.max(r, .1);
        const i = Object.assign({}, n, {
            hachureGap: r
        })
          , o = Fp(t, i)
          , s = Math.PI / 180 * n.hachureAngle
          , a = []
          , l = r * .5 * Math.cos(s)
          , c = r * .5 * Math.sin(s);
        for (const [f,h] of o)
            Tv([f, h]) && a.push([[f[0] - l, f[1] + c], [...h]], [[f[0] + l, f[1] - c], [...h]]);
        return {
            type: "fillSketch",
            ops: this.renderLines(a, n)
        }
    }
}
class aQ extends I6 {
    fillPolygons(t, n) {
        const r = this._fillPolygons(t, n)
          , i = Object.assign({}, n, {
            hachureAngle: n.hachureAngle + 90
        })
          , o = this._fillPolygons(t, i);
        return r.ops = r.ops.concat(o.ops),
        r
    }
}
class lQ {
    constructor(t) {
        this.helper = t
    }
    fillPolygons(t, n) {
        n = Object.assign({}, n, {
            hachureAngle: 0
        });
        const r = Fp(t, n);
        return this.dotsOnLines(r, n)
    }
    dotsOnLines(t, n) {
        const r = [];
        let i = n.hachureGap;
        i < 0 && (i = n.strokeWidth * 4),
        i = Math.max(i, .1);
        let o = n.fillWeight;
        o < 0 && (o = n.strokeWidth / 2);
        const s = i / 4;
        for (const a of t) {
            const l = Tv(a)
              , c = l / i
              , u = Math.ceil(c) - 1
              , f = l - u * i
              , h = (a[0][0] + a[1][0]) / 2 - i / 4
              , m = Math.min(a[0][1], a[1][1]);
            for (let v = 0; v < u; v++) {
                const y = m + f + v * i
                  , E = h - s + Math.random() * 2 * s
                  , b = y - s + Math.random() * 2 * s
                  , _ = this.helper.ellipse(E, b, o, o, n);
                r.push(..._.ops)
            }
        }
        return {
            type: "fillSketch",
            ops: r
        }
    }
}
class cQ {
    constructor(t) {
        this.helper = t
    }
    fillPolygons(t, n) {
        const r = Fp(t, n);
        return {
            type: "fillSketch",
            ops: this.dashedLine(r, n)
        }
    }
    dashedLine(t, n) {
        const r = n.dashOffset < 0 ? n.hachureGap < 0 ? n.strokeWidth * 4 : n.hachureGap : n.dashOffset
          , i = n.dashGap < 0 ? n.hachureGap < 0 ? n.strokeWidth * 4 : n.hachureGap : n.dashGap
          , o = [];
        return t.forEach(s=>{
            const a = Tv(s)
              , l = Math.floor(a / (r + i))
              , c = (a + i - l * (r + i)) / 2;
            let u = s[0]
              , f = s[1];
            u[0] > f[0] && (u = s[1],
            f = s[0]);
            const h = Math.atan((f[1] - u[1]) / (f[0] - u[0]));
            for (let m = 0; m < l; m++) {
                const v = m * (r + i)
                  , y = v + r
                  , E = [u[0] + v * Math.cos(h) + c * Math.cos(h), u[1] + v * Math.sin(h) + c * Math.sin(h)]
                  , b = [u[0] + y * Math.cos(h) + c * Math.cos(h), u[1] + y * Math.sin(h) + c * Math.sin(h)];
                o.push(...this.helper.doubleLineOps(E[0], E[1], b[0], b[1], n))
            }
        }
        ),
        o
    }
}
class uQ {
    constructor(t) {
        this.helper = t
    }
    fillPolygons(t, n) {
        const r = n.hachureGap < 0 ? n.strokeWidth * 4 : n.hachureGap
          , i = n.zigzagOffset < 0 ? r : n.zigzagOffset;
        n = Object.assign({}, n, {
            hachureGap: r + i
        });
        const o = Fp(t, n);
        return {
            type: "fillSketch",
            ops: this.zigzagLines(o, i, n)
        }
    }
    zigzagLines(t, n, r) {
        const i = [];
        return t.forEach(o=>{
            const s = Tv(o)
              , a = Math.round(s / (2 * n));
            let l = o[0]
              , c = o[1];
            l[0] > c[0] && (l = o[1],
            c = o[0]);
            const u = Math.atan((c[1] - l[1]) / (c[0] - l[0]));
            for (let f = 0; f < a; f++) {
                const h = f * 2 * n
                  , m = (f + 1) * 2 * n
                  , v = Math.sqrt(2 * Math.pow(n, 2))
                  , y = [l[0] + h * Math.cos(u), l[1] + h * Math.sin(u)]
                  , E = [l[0] + m * Math.cos(u), l[1] + m * Math.sin(u)]
                  , b = [y[0] + v * Math.cos(u + Math.PI / 4), y[1] + v * Math.sin(u + Math.PI / 4)];
                i.push(...this.helper.doubleLineOps(y[0], y[1], b[0], b[1], r), ...this.helper.doubleLineOps(b[0], b[1], E[0], E[1], r))
            }
        }
        ),
        i
    }
}
const ei = {};
function dQ(e, t) {
    let n = e.fillStyle || "hachure";
    if (!ei[n])
        switch (n) {
        case "zigzag":
            ei[n] || (ei[n] = new sQ(t));
            break;
        case "cross-hatch":
            ei[n] || (ei[n] = new aQ(t));
            break;
        case "dots":
            ei[n] || (ei[n] = new lQ(t));
            break;
        case "dashed":
            ei[n] || (ei[n] = new cQ(t));
            break;
        case "zigzag-line":
            ei[n] || (ei[n] = new uQ(t));
            break;
        case "hachure":
        default:
            n = "hachure",
            ei[n] || (ei[n] = new I6(t));
            break
        }
    return ei[n]
}
function fQ() {
    return Math.floor(Math.random() * 2 ** 31)
}
class WR {
    constructor(t) {
        this.seed = t
    }
    next() {
        return this.seed ? (2 ** 31 - 1 & (this.seed = Math.imul(48271, this.seed))) / 2 ** 31 : Math.random()
    }
}
const hQ = 0
  , U3 = 1
  , GR = 2
  , p0 = {
    A: 7,
    a: 7,
    C: 6,
    c: 6,
    H: 1,
    h: 1,
    L: 2,
    l: 2,
    M: 2,
    m: 2,
    Q: 4,
    q: 4,
    S: 4,
    s: 4,
    T: 2,
    t: 2,
    V: 1,
    v: 1,
    Z: 0,
    z: 0
};
function gQ(e) {
    const t = new Array;
    for (; e !== ""; )
        if (e.match(/^([ \t\r\n,]+)/))
            e = e.substr(RegExp.$1.length);
        else if (e.match(/^([aAcChHlLmMqQsStTvVzZ])/))
            t[t.length] = {
                type: hQ,
                text: RegExp.$1
            },
            e = e.substr(RegExp.$1.length);
        else if (e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))
            t[t.length] = {
                type: U3,
                text: `${parseFloat(RegExp.$1)}`
            },
            e = e.substr(RegExp.$1.length);
        else
            return [];
    return t[t.length] = {
        type: GR,
        text: ""
    },
    t
}
function AE(e, t) {
    return e.type === t
}
function C6(e) {
    const t = []
      , n = gQ(e);
    let r = "BOD"
      , i = 0
      , o = n[i];
    for (; !AE(o, GR); ) {
        let s = 0;
        const a = [];
        if (r === "BOD")
            if (o.text === "M" || o.text === "m")
                i++,
                s = p0[o.text],
                r = o.text;
            else
                return C6("M0,0" + e);
        else
            AE(o, U3) ? s = p0[r] : (i++,
            s = p0[o.text],
            r = o.text);
        if (i + s < n.length) {
            for (let l = i; l < i + s; l++) {
                const c = n[l];
                if (AE(c, U3))
                    a[a.length] = +c.text;
                else
                    throw new Error("Param not a number: " + r + "," + c.text)
            }
            if (typeof p0[r] == "number") {
                const l = {
                    key: r,
                    data: a
                };
                t.push(l),
                i += s,
                o = n[i],
                r === "M" && (r = "L"),
                r === "m" && (r = "l")
            } else
                throw new Error("Bad segment: " + r)
        } else
            throw new Error("Path data ended short")
    }
    return t
}
function VR(e) {
    let t = 0
      , n = 0
      , r = 0
      , i = 0;
    const o = [];
    for (const {key: s, data: a} of e)
        switch (s) {
        case "M":
            o.push({
                key: "M",
                data: [...a]
            }),
            [t,n] = a,
            [r,i] = a;
            break;
        case "m":
            t += a[0],
            n += a[1],
            o.push({
                key: "M",
                data: [t, n]
            }),
            r = t,
            i = n;
            break;
        case "L":
            o.push({
                key: "L",
                data: [...a]
            }),
            [t,n] = a;
            break;
        case "l":
            t += a[0],
            n += a[1],
            o.push({
                key: "L",
                data: [t, n]
            });
            break;
        case "C":
            o.push({
                key: "C",
                data: [...a]
            }),
            t = a[4],
            n = a[5];
            break;
        case "c":
            {
                const l = a.map((c,u)=>u % 2 ? c + n : c + t);
                o.push({
                    key: "C",
                    data: l
                }),
                t = l[4],
                n = l[5];
                break
            }
        case "Q":
            o.push({
                key: "Q",
                data: [...a]
            }),
            t = a[2],
            n = a[3];
            break;
        case "q":
            {
                const l = a.map((c,u)=>u % 2 ? c + n : c + t);
                o.push({
                    key: "Q",
                    data: l
                }),
                t = l[2],
                n = l[3];
                break
            }
        case "A":
            o.push({
                key: "A",
                data: [...a]
            }),
            t = a[5],
            n = a[6];
            break;
        case "a":
            t += a[5],
            n += a[6],
            o.push({
                key: "A",
                data: [a[0], a[1], a[2], a[3], a[4], t, n]
            });
            break;
        case "H":
            o.push({
                key: "H",
                data: [...a]
            }),
            t = a[0];
            break;
        case "h":
            t += a[0],
            o.push({
                key: "H",
                data: [t]
            });
            break;
        case "V":
            o.push({
                key: "V",
                data: [...a]
            }),
            n = a[0];
            break;
        case "v":
            n += a[0],
            o.push({
                key: "V",
                data: [n]
            });
            break;
        case "S":
            o.push({
                key: "S",
                data: [...a]
            }),
            t = a[2],
            n = a[3];
            break;
        case "s":
            {
                const l = a.map((c,u)=>u % 2 ? c + n : c + t);
                o.push({
                    key: "S",
                    data: l
                }),
                t = l[2],
                n = l[3];
                break
            }
        case "T":
            o.push({
                key: "T",
                data: [...a]
            }),
            t = a[0],
            n = a[1];
            break;
        case "t":
            t += a[0],
            n += a[1],
            o.push({
                key: "T",
                data: [t, n]
            });
            break;
        case "Z":
        case "z":
            o.push({
                key: "Z",
                data: []
            }),
            t = r,
            n = i;
            break
        }
    return o
}
function YR(e) {
    const t = [];
    let n = ""
      , r = 0
      , i = 0
      , o = 0
      , s = 0
      , a = 0
      , l = 0;
    for (const {key: c, data: u} of e) {
        switch (c) {
        case "M":
            t.push({
                key: "M",
                data: [...u]
            }),
            [r,i] = u,
            [o,s] = u;
            break;
        case "C":
            t.push({
                key: "C",
                data: [...u]
            }),
            r = u[4],
            i = u[5],
            a = u[2],
            l = u[3];
            break;
        case "L":
            t.push({
                key: "L",
                data: [...u]
            }),
            [r,i] = u;
            break;
        case "H":
            r = u[0],
            t.push({
                key: "L",
                data: [r, i]
            });
            break;
        case "V":
            i = u[0],
            t.push({
                key: "L",
                data: [r, i]
            });
            break;
        case "S":
            {
                let f = 0
                  , h = 0;
                n === "C" || n === "S" ? (f = r + (r - a),
                h = i + (i - l)) : (f = r,
                h = i),
                t.push({
                    key: "C",
                    data: [f, h, ...u]
                }),
                a = u[0],
                l = u[1],
                r = u[2],
                i = u[3];
                break
            }
        case "T":
            {
                const [f,h] = u;
                let m = 0
                  , v = 0;
                n === "Q" || n === "T" ? (m = r + (r - a),
                v = i + (i - l)) : (m = r,
                v = i);
                const y = r + 2 * (m - r) / 3
                  , E = i + 2 * (v - i) / 3
                  , b = f + 2 * (m - f) / 3
                  , _ = h + 2 * (v - h) / 3;
                t.push({
                    key: "C",
                    data: [y, E, b, _, f, h]
                }),
                a = m,
                l = v,
                r = f,
                i = h;
                break
            }
        case "Q":
            {
                const [f,h,m,v] = u
                  , y = r + 2 * (f - r) / 3
                  , E = i + 2 * (h - i) / 3
                  , b = m + 2 * (f - m) / 3
                  , _ = v + 2 * (h - v) / 3;
                t.push({
                    key: "C",
                    data: [y, E, b, _, m, v]
                }),
                a = f,
                l = h,
                r = m,
                i = v;
                break
            }
        case "A":
            {
                const f = Math.abs(u[0])
                  , h = Math.abs(u[1])
                  , m = u[2]
                  , v = u[3]
                  , y = u[4]
                  , E = u[5]
                  , b = u[6];
                f === 0 || h === 0 ? (t.push({
                    key: "C",
                    data: [r, i, E, b, E, b]
                }),
                r = E,
                i = b) : (r !== E || i !== b) && (jR(r, i, E, b, f, h, m, v, y).forEach(function(x) {
                    t.push({
                        key: "C",
                        data: x
                    })
                }),
                r = E,
                i = b);
                break
            }
        case "Z":
            t.push({
                key: "Z",
                data: []
            }),
            r = o,
            i = s;
            break
        }
        n = c
    }
    return t
}
function pQ(e) {
    return Math.PI * e / 180
}
function bh(e, t, n) {
    const r = e * Math.cos(n) - t * Math.sin(n)
      , i = e * Math.sin(n) + t * Math.cos(n);
    return [r, i]
}
function jR(e, t, n, r, i, o, s, a, l, c) {
    const u = pQ(s);
    let f = []
      , h = 0
      , m = 0
      , v = 0
      , y = 0;
    if (c)
        [h,m,v,y] = c;
    else {
        [e,t] = bh(e, t, -u),
        [n,r] = bh(n, r, -u);
        const V = (e - n) / 2
          , z = (t - r) / 2;
        let j = V * V / (i * i) + z * z / (o * o);
        j > 1 && (j = Math.sqrt(j),
        i = j * i,
        o = j * o);
        const re = a === l ? -1 : 1
          , se = i * i
          , ae = o * o
          , q = se * ae - se * z * z - ae * V * V
          , K = se * z * z + ae * V * V
          , G = re * Math.sqrt(Math.abs(q / K));
        v = G * i * z / o + (e + n) / 2,
        y = G * -o * V / i + (t + r) / 2,
        h = Math.asin(parseFloat(((t - y) / o).toFixed(9))),
        m = Math.asin(parseFloat(((r - y) / o).toFixed(9))),
        e < v && (h = Math.PI - h),
        n < v && (m = Math.PI - m),
        h < 0 && (h = Math.PI * 2 + h),
        m < 0 && (m = Math.PI * 2 + m),
        l && h > m && (h = h - Math.PI * 2),
        !l && m > h && (m = m - Math.PI * 2)
    }
    let E = m - h;
    if (Math.abs(E) > Math.PI * 120 / 180) {
        const V = m
          , z = n
          , j = r;
        l && m > h ? m = h + Math.PI * 120 / 180 * 1 : m = h + Math.PI * 120 / 180 * -1,
        n = v + i * Math.cos(m),
        r = y + o * Math.sin(m),
        f = jR(n, r, z, j, i, o, s, 0, l, [m, V, v, y])
    }
    E = m - h;
    const b = Math.cos(h)
      , _ = Math.sin(h)
      , x = Math.cos(m)
      , C = Math.sin(m)
      , P = Math.tan(E / 4)
      , M = 4 / 3 * i * P
      , A = 4 / 3 * o * P
      , I = [e, t]
      , O = [e + M * _, t - A * b]
      , N = [n + M * C, r - A * x]
      , $ = [n, r];
    if (O[0] = 2 * I[0] - O[0],
    O[1] = 2 * I[1] - O[1],
    c)
        return [O, N, $].concat(f);
    {
        f = [O, N, $].concat(f);
        const V = [];
        for (let z = 0; z < f.length; z += 3) {
            const j = bh(f[z][0], f[z][1], u)
              , re = bh(f[z + 1][0], f[z + 1][1], u)
              , se = bh(f[z + 2][0], f[z + 2][1], u);
            V.push([j[0], j[1], re[0], re[1], se[0], se[1]])
        }
        return V
    }
}
const mQ = {
    randOffset: bQ,
    randOffsetWithRange: _Q,
    ellipse: wQ,
    doubleLineOps: xQ
};
function KR(e, t, n, r, i) {
    return {
        type: "path",
        ops: _a(e, t, n, r, i)
    }
}
function sm(e, t, n) {
    const r = (e || []).length;
    if (r > 2) {
        const i = [];
        for (let o = 0; o < r - 1; o++)
            i.push(..._a(e[o][0], e[o][1], e[o + 1][0], e[o + 1][1], n));
        return t && i.push(..._a(e[r - 1][0], e[r - 1][1], e[0][0], e[0][1], n)),
        {
            type: "path",
            ops: i
        }
    } else if (r === 2)
        return KR(e[0][0], e[0][1], e[1][0], e[1][1], n);
    return {
        type: "path",
        ops: []
    }
}
function vQ(e, t) {
    return sm(e, !0, t)
}
function yQ(e, t, n, r, i) {
    const o = [[e, t], [e + n, t], [e + n, t + r], [e, t + r]];
    return vQ(o, i)
}
function Ik(e, t) {
    let n = Ak(e, 1 * (1 + t.roughness * .2), t);
    if (!t.disableMultiStroke) {
        const r = Ak(e, 1.5 * (1 + t.roughness * .22), SQ(t));
        n = n.concat(r)
    }
    return {
        type: "path",
        ops: n
    }
}
function wQ(e, t, n, r, i) {
    const o = XR(n, r, i);
    return H3(e, t, i, o).opset
}
function XR(e, t, n) {
    const r = Math.sqrt(Math.PI * 2 * Math.sqrt((Math.pow(e / 2, 2) + Math.pow(t / 2, 2)) / 2))
      , i = Math.ceil(Math.max(n.curveStepCount, n.curveStepCount / Math.sqrt(200) * r))
      , o = Math.PI * 2 / i;
    let s = Math.abs(e / 2)
      , a = Math.abs(t / 2);
    const l = 1 - n.curveFitting;
    return s += We(s * l, n),
    a += We(a * l, n),
    {
        increment: o,
        rx: s,
        ry: a
    }
}
function H3(e, t, n, r) {
    const [i,o] = Mk(r.increment, e, t, r.rx, r.ry, 1, r.increment * i2(.1, i2(.4, 1, n), n), n);
    let s = o2(i, null, n);
    if (!n.disableMultiStroke && n.roughness !== 0) {
        const [a] = Mk(r.increment, e, t, r.rx, r.ry, 1.5, 0, n)
          , l = o2(a, null, n);
        s = s.concat(l)
    }
    return {
        estimatedPoints: o,
        opset: {
            type: "path",
            ops: s
        }
    }
}
function Ck(e, t, n, r, i, o, s, a, l) {
    const c = e
      , u = t;
    let f = Math.abs(n / 2)
      , h = Math.abs(r / 2);
    f += We(f * .01, l),
    h += We(h * .01, l);
    let m = i
      , v = o;
    for (; m < 0; )
        m += Math.PI * 2,
        v += Math.PI * 2;
    v - m > Math.PI * 2 && (m = 0,
    v = Math.PI * 2);
    const y = Math.PI * 2 / l.curveStepCount
      , E = Math.min(y / 2, (v - m) / 2)
      , b = Lk(E, c, u, f, h, m, v, 1, l);
    if (!l.disableMultiStroke) {
        const _ = Lk(E, c, u, f, h, m, v, 1.5, l);
        b.push(..._)
    }
    return s && (a ? b.push(..._a(c, u, c + f * Math.cos(m), u + h * Math.sin(m), l), ..._a(c, u, c + f * Math.cos(v), u + h * Math.sin(v), l)) : b.push({
        op: "lineTo",
        data: [c, u]
    }, {
        op: "lineTo",
        data: [c + f * Math.cos(m), u + h * Math.sin(m)]
    })),
    {
        type: "path",
        ops: b
    }
}
function kk(e, t) {
    const n = YR(VR(C6(e)))
      , r = [];
    let i = [0, 0]
      , o = [0, 0];
    for (const {key: s, data: a} of n)
        switch (s) {
        case "M":
            {
                o = [a[0], a[1]],
                i = [a[0], a[1]];
                break
            }
        case "L":
            r.push(..._a(o[0], o[1], a[0], a[1], t)),
            o = [a[0], a[1]];
            break;
        case "C":
            {
                const [l,c,u,f,h,m] = a;
                r.push(...IQ(l, c, u, f, h, m, o, t)),
                o = [h, m];
                break
            }
        case "Z":
            r.push(..._a(o[0], o[1], i[0], i[1], t)),
            o = [i[0], i[1]];
            break
        }
    return {
        type: "path",
        ops: r
    }
}
function ME(e, t) {
    const n = [];
    for (const r of e)
        if (r.length) {
            const i = t.maxRandomnessOffset || 0
              , o = r.length;
            if (o > 2) {
                n.push({
                    op: "move",
                    data: [r[0][0] + We(i, t), r[0][1] + We(i, t)]
                });
                for (let s = 1; s < o; s++)
                    n.push({
                        op: "lineTo",
                        data: [r[s][0] + We(i, t), r[s][1] + We(i, t)]
                    })
            }
        }
    return {
        type: "fillPath",
        ops: n
    }
}
function hd(e, t) {
    return dQ(t, mQ).fillPolygons(e, t)
}
function EQ(e, t, n, r, i, o, s) {
    const a = e
      , l = t;
    let c = Math.abs(n / 2)
      , u = Math.abs(r / 2);
    c += We(c * .01, s),
    u += We(u * .01, s);
    let f = i
      , h = o;
    for (; f < 0; )
        f += Math.PI * 2,
        h += Math.PI * 2;
    h - f > Math.PI * 2 && (f = 0,
    h = Math.PI * 2);
    const m = (h - f) / s.curveStepCount
      , v = [];
    for (let y = f; y <= h; y = y + m)
        v.push([a + c * Math.cos(y), l + u * Math.sin(y)]);
    return v.push([a + c * Math.cos(h), l + u * Math.sin(h)]),
    v.push([a, l]),
    hd([v], s)
}
function bQ(e, t) {
    return We(e, t)
}
function _Q(e, t, n) {
    return i2(e, t, n)
}
function xQ(e, t, n, r, i) {
    return _a(e, t, n, r, i, !0)
}
function SQ(e) {
    const t = Object.assign({}, e);
    return t.randomizer = void 0,
    e.seed && (t.seed = e.seed + 1),
    t
}
function ZR(e) {
    return e.randomizer || (e.randomizer = new WR(e.seed || 0)),
    e.randomizer.next()
}
function i2(e, t, n, r=1) {
    return n.roughness * r * (ZR(n) * (t - e) + e)
}
function We(e, t, n=1) {
    return i2(-e, e, t, n)
}
function _a(e, t, n, r, i, o=!1) {
    const s = o ? i.disableMultiStrokeFill : i.disableMultiStroke
      , a = Tk(e, t, n, r, i, !0, !1);
    if (s)
        return a;
    const l = Tk(e, t, n, r, i, !0, !0);
    return a.concat(l)
}
function Tk(e, t, n, r, i, o, s) {
    const a = Math.pow(e - n, 2) + Math.pow(t - r, 2)
      , l = Math.sqrt(a);
    let c = 1;
    l < 200 ? c = 1 : l > 500 ? c = .4 : c = -.0016668 * l + 1.233334;
    let u = i.maxRandomnessOffset || 0;
    u * u * 100 > a && (u = l / 10);
    const f = u / 2
      , h = .2 + ZR(i) * .2;
    let m = i.bowing * i.maxRandomnessOffset * (r - t) / 200
      , v = i.bowing * i.maxRandomnessOffset * (e - n) / 200;
    m = We(m, i, c),
    v = We(v, i, c);
    const y = []
      , E = ()=>We(f, i, c)
      , b = ()=>We(u, i, c)
      , _ = i.preserveVertices;
    return s ? y.push({
        op: "move",
        data: [e + (_ ? 0 : E()), t + (_ ? 0 : E())]
    }) : y.push({
        op: "move",
        data: [e + (_ ? 0 : We(u, i, c)), t + (_ ? 0 : We(u, i, c))]
    }),
    s ? y.push({
        op: "bcurveTo",
        data: [m + e + (n - e) * h + E(), v + t + (r - t) * h + E(), m + e + 2 * (n - e) * h + E(), v + t + 2 * (r - t) * h + E(), n + (_ ? 0 : E()), r + (_ ? 0 : E())]
    }) : y.push({
        op: "bcurveTo",
        data: [m + e + (n - e) * h + b(), v + t + (r - t) * h + b(), m + e + 2 * (n - e) * h + b(), v + t + 2 * (r - t) * h + b(), n + (_ ? 0 : b()), r + (_ ? 0 : b())]
    }),
    y
}
function Ak(e, t, n) {
    const r = [];
    r.push([e[0][0] + We(t, n), e[0][1] + We(t, n)]),
    r.push([e[0][0] + We(t, n), e[0][1] + We(t, n)]);
    for (let i = 1; i < e.length; i++)
        r.push([e[i][0] + We(t, n), e[i][1] + We(t, n)]),
        i === e.length - 1 && r.push([e[i][0] + We(t, n), e[i][1] + We(t, n)]);
    return o2(r, null, n)
}
function o2(e, t, n) {
    const r = e.length
      , i = [];
    if (r > 3) {
        const o = []
          , s = 1 - n.curveTightness;
        i.push({
            op: "move",
            data: [e[1][0], e[1][1]]
        });
        for (let a = 1; a + 2 < r; a++) {
            const l = e[a];
            o[0] = [l[0], l[1]],
            o[1] = [l[0] + (s * e[a + 1][0] - s * e[a - 1][0]) / 6, l[1] + (s * e[a + 1][1] - s * e[a - 1][1]) / 6],
            o[2] = [e[a + 1][0] + (s * e[a][0] - s * e[a + 2][0]) / 6, e[a + 1][1] + (s * e[a][1] - s * e[a + 2][1]) / 6],
            o[3] = [e[a + 1][0], e[a + 1][1]],
            i.push({
                op: "bcurveTo",
                data: [o[1][0], o[1][1], o[2][0], o[2][1], o[3][0], o[3][1]]
            })
        }
    } else
        r === 3 ? (i.push({
            op: "move",
            data: [e[1][0], e[1][1]]
        }),
        i.push({
            op: "bcurveTo",
            data: [e[1][0], e[1][1], e[2][0], e[2][1], e[2][0], e[2][1]]
        })) : r === 2 && i.push(..._a(e[0][0], e[0][1], e[1][0], e[1][1], n));
    return i
}
function Mk(e, t, n, r, i, o, s, a) {
    const l = a.roughness === 0
      , c = []
      , u = [];
    if (l) {
        e = e / 4,
        u.push([t + r * Math.cos(-e), n + i * Math.sin(-e)]);
        for (let f = 0; f <= Math.PI * 2; f = f + e) {
            const h = [t + r * Math.cos(f), n + i * Math.sin(f)];
            c.push(h),
            u.push(h)
        }
        u.push([t + r * Math.cos(0), n + i * Math.sin(0)]),
        u.push([t + r * Math.cos(e), n + i * Math.sin(e)])
    } else {
        const f = We(.5, a) - Math.PI / 2;
        u.push([We(o, a) + t + .9 * r * Math.cos(f - e), We(o, a) + n + .9 * i * Math.sin(f - e)]);
        const h = Math.PI * 2 + f - .01;
        for (let m = f; m < h; m = m + e) {
            const v = [We(o, a) + t + r * Math.cos(m), We(o, a) + n + i * Math.sin(m)];
            c.push(v),
            u.push(v)
        }
        u.push([We(o, a) + t + r * Math.cos(f + Math.PI * 2 + s * .5), We(o, a) + n + i * Math.sin(f + Math.PI * 2 + s * .5)]),
        u.push([We(o, a) + t + .98 * r * Math.cos(f + s), We(o, a) + n + .98 * i * Math.sin(f + s)]),
        u.push([We(o, a) + t + .9 * r * Math.cos(f + s * .5), We(o, a) + n + .9 * i * Math.sin(f + s * .5)])
    }
    return [u, c]
}
function Lk(e, t, n, r, i, o, s, a, l) {
    const c = o + We(.1, l)
      , u = [];
    u.push([We(a, l) + t + .9 * r * Math.cos(c - e), We(a, l) + n + .9 * i * Math.sin(c - e)]);
    for (let f = c; f <= s; f = f + e)
        u.push([We(a, l) + t + r * Math.cos(f), We(a, l) + n + i * Math.sin(f)]);
    return u.push([t + r * Math.cos(s), n + i * Math.sin(s)]),
    u.push([t + r * Math.cos(s), n + i * Math.sin(s)]),
    o2(u, null, l)
}
function IQ(e, t, n, r, i, o, s, a) {
    const l = []
      , c = [a.maxRandomnessOffset || 1, (a.maxRandomnessOffset || 1) + .3];
    let u = [0, 0];
    const f = a.disableMultiStroke ? 1 : 2
      , h = a.preserveVertices;
    for (let m = 0; m < f; m++)
        m === 0 ? l.push({
            op: "move",
            data: [s[0], s[1]]
        }) : l.push({
            op: "move",
            data: [s[0] + (h ? 0 : We(c[0], a)), s[1] + (h ? 0 : We(c[0], a))]
        }),
        u = h ? [i, o] : [i + We(c[m], a), o + We(c[m], a)],
        l.push({
            op: "bcurveTo",
            data: [e + We(c[m], a), t + We(c[m], a), n + We(c[m], a), r + We(c[m], a), u[0], u[1]]
        });
    return l
}
function _h(e) {
    return [...e]
}
function CQ(e, t=0) {
    const n = e.length;
    if (n < 3)
        throw new Error("A curve must have at least three points.");
    const r = [];
    if (n === 3)
        r.push(_h(e[0]), _h(e[1]), _h(e[2]), _h(e[2]));
    else {
        const i = [];
        i.push(e[0], e[0]);
        for (let a = 1; a < e.length; a++)
            i.push(e[a]),
            a === e.length - 1 && i.push(e[a]);
        const o = []
          , s = 1 - t;
        r.push(_h(i[0]));
        for (let a = 1; a + 2 < i.length; a++) {
            const l = i[a];
            o[0] = [l[0], l[1]],
            o[1] = [l[0] + (s * i[a + 1][0] - s * i[a - 1][0]) / 6, l[1] + (s * i[a + 1][1] - s * i[a - 1][1]) / 6],
            o[2] = [i[a + 1][0] + (s * i[a][0] - s * i[a + 2][0]) / 6, i[a + 1][1] + (s * i[a][1] - s * i[a + 2][1]) / 6],
            o[3] = [i[a + 1][0], i[a + 1][1]],
            r.push(o[1], o[2], o[3])
        }
    }
    return r
}
function kQ(e, t) {
    return Math.sqrt(am(e, t))
}
function am(e, t) {
    return Math.pow(e[0] - t[0], 2) + Math.pow(e[1] - t[1], 2)
}
function TQ(e, t, n) {
    const r = am(t, n);
    if (r === 0)
        return am(e, t);
    let i = ((e[0] - t[0]) * (n[0] - t[0]) + (e[1] - t[1]) * (n[1] - t[1])) / r;
    return i = Math.max(0, Math.min(1, i)),
    am(e, bc(t, n, i))
}
function bc(e, t, n) {
    return [e[0] + (t[0] - e[0]) * n, e[1] + (t[1] - e[1]) * n]
}
function AQ(e, t) {
    const n = e[t + 0]
      , r = e[t + 1]
      , i = e[t + 2]
      , o = e[t + 3];
    let s = 3 * r[0] - 2 * n[0] - o[0];
    s *= s;
    let a = 3 * r[1] - 2 * n[1] - o[1];
    a *= a;
    let l = 3 * i[0] - 2 * o[0] - n[0];
    l *= l;
    let c = 3 * i[1] - 2 * o[1] - n[1];
    return c *= c,
    s < l && (s = l),
    a < c && (a = c),
    s + a
}
function W3(e, t, n, r) {
    const i = r || [];
    if (AQ(e, t) < n) {
        const o = e[t + 0];
        i.length ? kQ(i[i.length - 1], o) > 1 && i.push(o) : i.push(o),
        i.push(e[t + 3])
    } else {
        const s = e[t + 0]
          , a = e[t + 1]
          , l = e[t + 2]
          , c = e[t + 3]
          , u = bc(s, a, .5)
          , f = bc(a, l, .5)
          , h = bc(l, c, .5)
          , m = bc(u, f, .5)
          , v = bc(f, h, .5)
          , y = bc(m, v, .5);
        W3([s, u, m, y], 0, n, i),
        W3([y, v, h, c], 0, n, i)
    }
    return i
}
function MQ(e, t) {
    return s2(e, 0, e.length, t)
}
function s2(e, t, n, r, i) {
    const o = i || []
      , s = e[t]
      , a = e[n - 1];
    let l = 0
      , c = 1;
    for (let u = t + 1; u < n - 1; ++u) {
        const f = TQ(e[u], s, a);
        f > l && (l = f,
        c = u)
    }
    return Math.sqrt(l) > r ? (s2(e, t, c + 1, r, o),
    s2(e, c, n, r, o)) : (o.length || o.push(s),
    o.push(a)),
    o
}
function k6(e, t=.15, n) {
    const r = []
      , i = (e.length - 1) / 3;
    for (let o = 0; o < i; o++) {
        const s = o * 3;
        W3(e, s, t, r)
    }
    return n && n > 0 ? s2(r, 0, r.length, n) : r
}
function LQ(e, t, n) {
    const r = C6(e)
      , i = YR(VR(r))
      , o = [];
    let s = []
      , a = [0, 0]
      , l = [];
    const c = ()=>{
        l.length >= 4 && s.push(...k6(l, t)),
        l = []
    }
      , u = ()=>{
        c(),
        s.length && (o.push(s),
        s = [])
    }
    ;
    for (const {key: h, data: m} of i)
        switch (h) {
        case "M":
            u(),
            a = [m[0], m[1]],
            s.push(a);
            break;
        case "L":
            c(),
            s.push([m[0], m[1]]);
            break;
        case "C":
            if (!l.length) {
                const v = s.length ? s[s.length - 1] : a;
                l.push([v[0], v[1]])
            }
            l.push([m[0], m[1]]),
            l.push([m[2], m[3]]),
            l.push([m[4], m[5]]);
            break;
        case "Z":
            c(),
            s.push([a[0], a[1]]);
            break
        }
    if (u(),
    !n)
        return o;
    const f = [];
    for (const h of o) {
        const m = MQ(h, n);
        m.length && f.push(m)
    }
    return f
}
const xi = "none";
class np {
    constructor(t) {
        this.defaultOptions = {
            maxRandomnessOffset: 2,
            roughness: 1,
            bowing: 1,
            stroke: "#000",
            strokeWidth: 1,
            curveTightness: 0,
            curveFitting: .95,
            curveStepCount: 9,
            fillStyle: "hachure",
            fillWeight: -1,
            hachureAngle: -41,
            hachureGap: -1,
            dashOffset: -1,
            dashGap: -1,
            zigzagOffset: -1,
            seed: 0,
            disableMultiStroke: !1,
            disableMultiStrokeFill: !1,
            preserveVertices: !1,
            fillShapeRoughnessGain: .8
        },
        this.config = t || {},
        this.config.options && (this.defaultOptions = this._o(this.config.options))
    }
    static newSeed() {
        return fQ()
    }
    _o(t) {
        return t ? Object.assign({}, this.defaultOptions, t) : this.defaultOptions
    }
    _d(t, n, r) {
        return {
            shape: t,
            sets: n || [],
            options: r || this.defaultOptions
        }
    }
    line(t, n, r, i, o) {
        const s = this._o(o);
        return this._d("line", [KR(t, n, r, i, s)], s)
    }
    rectangle(t, n, r, i, o) {
        const s = this._o(o)
          , a = []
          , l = yQ(t, n, r, i, s);
        if (s.fill) {
            const c = [[t, n], [t + r, n], [t + r, n + i], [t, n + i]];
            s.fillStyle === "solid" ? a.push(ME([c], s)) : a.push(hd([c], s))
        }
        return s.stroke !== xi && a.push(l),
        this._d("rectangle", a, s)
    }
    ellipse(t, n, r, i, o) {
        const s = this._o(o)
          , a = []
          , l = XR(r, i, s)
          , c = H3(t, n, s, l);
        if (s.fill)
            if (s.fillStyle === "solid") {
                const u = H3(t, n, s, l).opset;
                u.type = "fillPath",
                a.push(u)
            } else
                a.push(hd([c.estimatedPoints], s));
        return s.stroke !== xi && a.push(c.opset),
        this._d("ellipse", a, s)
    }
    circle(t, n, r, i) {
        const o = this.ellipse(t, n, r, r, i);
        return o.shape = "circle",
        o
    }
    linearPath(t, n) {
        const r = this._o(n);
        return this._d("linearPath", [sm(t, !1, r)], r)
    }
    arc(t, n, r, i, o, s, a=!1, l) {
        const c = this._o(l)
          , u = []
          , f = Ck(t, n, r, i, o, s, a, !0, c);
        if (a && c.fill)
            if (c.fillStyle === "solid") {
                const h = Object.assign({}, c);
                h.disableMultiStroke = !0;
                const m = Ck(t, n, r, i, o, s, !0, !1, h);
                m.type = "fillPath",
                u.push(m)
            } else
                u.push(EQ(t, n, r, i, o, s, c));
        return c.stroke !== xi && u.push(f),
        this._d("arc", u, c)
    }
    curve(t, n) {
        const r = this._o(n)
          , i = []
          , o = Ik(t, r);
        if (r.fill && r.fill !== xi && t.length >= 3)
            if (r.fillStyle === "solid") {
                const s = Ik(t, Object.assign(Object.assign({}, r), {
                    disableMultiStroke: !0,
                    roughness: r.roughness ? r.roughness + r.fillShapeRoughnessGain : 0
                }));
                i.push({
                    type: "fillPath",
                    ops: this._mergedShape(s.ops)
                })
            } else {
                const s = CQ(t)
                  , a = k6(s, 10, (1 + r.roughness) / 2);
                i.push(hd([a], r))
            }
        return r.stroke !== xi && i.push(o),
        this._d("curve", i, r)
    }
    polygon(t, n) {
        const r = this._o(n)
          , i = []
          , o = sm(t, !0, r);
        return r.fill && (r.fillStyle === "solid" ? i.push(ME([t], r)) : i.push(hd([t], r))),
        r.stroke !== xi && i.push(o),
        this._d("polygon", i, r)
    }
    path(t, n) {
        const r = this._o(n)
          , i = [];
        if (!t)
            return this._d("path", i, r);
        t = (t || "").replace(/\n/g, " ").replace(/(-\s)/g, "-").replace("/(ss)/g", " ");
        const o = r.fill && r.fill !== "transparent" && r.fill !== xi
          , s = r.stroke !== xi
          , a = !!(r.simplification && r.simplification < 1)
          , l = a ? 4 - 4 * (r.simplification || 1) : (1 + r.roughness) / 2
          , c = LQ(t, 1, l)
          , u = kk(t, r);
        if (o)
            if (r.fillStyle === "solid")
                if (c.length === 1) {
                    const f = kk(t, Object.assign(Object.assign({}, r), {
                        disableMultiStroke: !0,
                        roughness: r.roughness ? r.roughness + r.fillShapeRoughnessGain : 0
                    }));
                    i.push({
                        type: "fillPath",
                        ops: this._mergedShape(f.ops)
                    })
                } else
                    i.push(ME(c, r));
            else
                i.push(hd(c, r));
        return s && (a ? c.forEach(f=>{
            i.push(sm(f, !1, r))
        }
        ) : i.push(u)),
        this._d("path", i, r)
    }
    opsToPath(t, n) {
        let r = "";
        for (const i of t.ops) {
            const o = typeof n == "number" && n >= 0 ? i.data.map(s=>+s.toFixed(n)) : i.data;
            switch (i.op) {
            case "move":
                r += `M${o[0]} ${o[1]} `;
                break;
            case "bcurveTo":
                r += `C${o[0]} ${o[1]}, ${o[2]} ${o[3]}, ${o[4]} ${o[5]} `;
                break;
            case "lineTo":
                r += `L${o[0]} ${o[1]} `;
                break
            }
        }
        return r.trim()
    }
    toPaths(t) {
        const n = t.sets || []
          , r = t.options || this.defaultOptions
          , i = [];
        for (const o of n) {
            let s = null;
            switch (o.type) {
            case "path":
                s = {
                    d: this.opsToPath(o),
                    stroke: r.stroke,
                    strokeWidth: r.strokeWidth,
                    fill: xi
                };
                break;
            case "fillPath":
                s = {
                    d: this.opsToPath(o),
                    stroke: xi,
                    strokeWidth: 0,
                    fill: r.fill || xi
                };
                break;
            case "fillSketch":
                s = this.fillSketch(o, r);
                break
            }
            s && i.push(s)
        }
        return i
    }
    fillSketch(t, n) {
        let r = n.fillWeight;
        return r < 0 && (r = n.strokeWidth / 2),
        {
            d: this.opsToPath(t),
            stroke: n.fill || xi,
            strokeWidth: r,
            fill: xi
        }
    }
    _mergedShape(t) {
        return t.filter((n,r)=>r === 0 ? !0 : n.op !== "move")
    }
}
class PQ {
    constructor(t, n) {
        this.canvas = t,
        this.ctx = this.canvas.getContext("2d"),
        this.gen = new np(n)
    }
    draw(t) {
        const n = t.sets || []
          , r = t.options || this.getDefaultOptions()
          , i = this.ctx
          , o = t.options.fixedDecimalPlaceDigits;
        for (const s of n)
            switch (s.type) {
            case "path":
                i.save(),
                i.strokeStyle = r.stroke === "none" ? "transparent" : r.stroke,
                i.lineWidth = r.strokeWidth,
                r.strokeLineDash && i.setLineDash(r.strokeLineDash),
                r.strokeLineDashOffset && (i.lineDashOffset = r.strokeLineDashOffset),
                this._drawToContext(i, s, o),
                i.restore();
                break;
            case "fillPath":
                {
                    i.save(),
                    i.fillStyle = r.fill || "";
                    const a = t.shape === "curve" || t.shape === "polygon" || t.shape === "path" ? "evenodd" : "nonzero";
                    this._drawToContext(i, s, o, a),
                    i.restore();
                    break
                }
            case "fillSketch":
                this.fillSketch(i, s, r);
                break
            }
    }
    fillSketch(t, n, r) {
        let i = r.fillWeight;
        i < 0 && (i = r.strokeWidth / 2),
        t.save(),
        r.fillLineDash && t.setLineDash(r.fillLineDash),
        r.fillLineDashOffset && (t.lineDashOffset = r.fillLineDashOffset),
        t.strokeStyle = r.fill || "",
        t.lineWidth = i,
        this._drawToContext(t, n, r.fixedDecimalPlaceDigits),
        t.restore()
    }
    _drawToContext(t, n, r, i="nonzero") {
        t.beginPath();
        for (const o of n.ops) {
            const s = typeof r == "number" && r >= 0 ? o.data.map(a=>+a.toFixed(r)) : o.data;
            switch (o.op) {
            case "move":
                t.moveTo(s[0], s[1]);
                break;
            case "bcurveTo":
                t.bezierCurveTo(s[0], s[1], s[2], s[3], s[4], s[5]);
                break;
            case "lineTo":
                t.lineTo(s[0], s[1]);
                break
            }
        }
        n.type === "fillPath" ? t.fill(i) : t.stroke()
    }
    get generator() {
        return this.gen
    }
    getDefaultOptions() {
        return this.gen.defaultOptions
    }
    line(t, n, r, i, o) {
        const s = this.gen.line(t, n, r, i, o);
        return this.draw(s),
        s
    }
    rectangle(t, n, r, i, o) {
        const s = this.gen.rectangle(t, n, r, i, o);
        return this.draw(s),
        s
    }
    ellipse(t, n, r, i, o) {
        const s = this.gen.ellipse(t, n, r, i, o);
        return this.draw(s),
        s
    }
    circle(t, n, r, i) {
        const o = this.gen.circle(t, n, r, i);
        return this.draw(o),
        o
    }
    linearPath(t, n) {
        const r = this.gen.linearPath(t, n);
        return this.draw(r),
        r
    }
    polygon(t, n) {
        const r = this.gen.polygon(t, n);
        return this.draw(r),
        r
    }
    arc(t, n, r, i, o, s, a=!1, l) {
        const c = this.gen.arc(t, n, r, i, o, s, a, l);
        return this.draw(c),
        c
    }
    curve(t, n) {
        const r = this.gen.curve(t, n);
        return this.draw(r),
        r
    }
    path(t, n) {
        const r = this.gen.path(t, n);
        return this.draw(r),
        r
    }
}
const m0 = "http://www.w3.org/2000/svg";
class RQ {
    constructor(t, n) {
        this.svg = t,
        this.gen = new np(n)
    }
    draw(t) {
        const n = t.sets || []
          , r = t.options || this.getDefaultOptions()
          , i = this.svg.ownerDocument || window.document
          , o = i.createElementNS(m0, "g")
          , s = t.options.fixedDecimalPlaceDigits;
        for (const a of n) {
            let l = null;
            switch (a.type) {
            case "path":
                {
                    l = i.createElementNS(m0, "path"),
                    l.setAttribute("d", this.opsToPath(a, s)),
                    l.setAttribute("stroke", r.stroke),
                    l.setAttribute("stroke-width", r.strokeWidth + ""),
                    l.setAttribute("fill", "none"),
                    r.strokeLineDash && l.setAttribute("stroke-dasharray", r.strokeLineDash.join(" ").trim()),
                    r.strokeLineDashOffset && l.setAttribute("stroke-dashoffset", `${r.strokeLineDashOffset}`);
                    break
                }
            case "fillPath":
                {
                    l = i.createElementNS(m0, "path"),
                    l.setAttribute("d", this.opsToPath(a, s)),
                    l.setAttribute("stroke", "none"),
                    l.setAttribute("stroke-width", "0"),
                    l.setAttribute("fill", r.fill || ""),
                    (t.shape === "curve" || t.shape === "polygon") && l.setAttribute("fill-rule", "evenodd");
                    break
                }
            case "fillSketch":
                {
                    l = this.fillSketch(i, a, r);
                    break
                }
            }
            l && o.appendChild(l)
        }
        return o
    }
    fillSketch(t, n, r) {
        let i = r.fillWeight;
        i < 0 && (i = r.strokeWidth / 2);
        const o = t.createElementNS(m0, "path");
        return o.setAttribute("d", this.opsToPath(n, r.fixedDecimalPlaceDigits)),
        o.setAttribute("stroke", r.fill || ""),
        o.setAttribute("stroke-width", i + ""),
        o.setAttribute("fill", "none"),
        r.fillLineDash && o.setAttribute("stroke-dasharray", r.fillLineDash.join(" ").trim()),
        r.fillLineDashOffset && o.setAttribute("stroke-dashoffset", `${r.fillLineDashOffset}`),
        o
    }
    get generator() {
        return this.gen
    }
    getDefaultOptions() {
        return this.gen.defaultOptions
    }
    opsToPath(t, n) {
        return this.gen.opsToPath(t, n)
    }
    line(t, n, r, i, o) {
        const s = this.gen.line(t, n, r, i, o);
        return this.draw(s)
    }
    rectangle(t, n, r, i, o) {
        const s = this.gen.rectangle(t, n, r, i, o);
        return this.draw(s)
    }
    ellipse(t, n, r, i, o) {
        const s = this.gen.ellipse(t, n, r, i, o);
        return this.draw(s)
    }
    circle(t, n, r, i) {
        const o = this.gen.circle(t, n, r, i);
        return this.draw(o)
    }
    linearPath(t, n) {
        const r = this.gen.linearPath(t, n);
        return this.draw(r)
    }
    polygon(t, n) {
        const r = this.gen.polygon(t, n);
        return this.draw(r)
    }
    arc(t, n, r, i, o, s, a=!1, l) {
        const c = this.gen.arc(t, n, r, i, o, s, a, l);
        return this.draw(c)
    }
    curve(t, n) {
        const r = this.gen.curve(t, n);
        return this.draw(r)
    }
    path(t, n) {
        const r = this.gen.path(t, n);
        return this.draw(r)
    }
}
const tc = {
    canvas(e, t) {
        return new PQ(e,t)
    },
    svg(e, t) {
        return new RQ(e,t)
    },
    generator(e) {
        return new np(e)
    },
    newSeed() {
        return np.newSeed()
    }
};
let T6 = (e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n &= 63,
n < 36 ? t += n.toString(36) : n < 62 ? t += (n - 26).toString(36).toUpperCase() : n > 62 ? t += "-" : t += "_",
t), "");
var qR = "Expected a function"
  , Pk = NaN
  , DQ = "[object Symbol]"
  , OQ = /^\s+|\s+$/g
  , NQ = /^[-+]0x[0-9a-f]+$/i
  , FQ = /^0b[01]+$/i
  , BQ = /^0o[0-7]+$/i
  , zQ = parseInt
  , $Q = typeof oa == "object" && oa && oa.Object === Object && oa
  , UQ = typeof self == "object" && self && self.Object === Object && self
  , HQ = $Q || UQ || Function("return this")()
  , WQ = Object.prototype
  , GQ = WQ.toString
  , VQ = Math.max
  , YQ = Math.min
  , LE = function() {
    return HQ.Date.now()
};
function jQ(e, t, n) {
    var r, i, o, s, a, l, c = 0, u = !1, f = !1, h = !0;
    if (typeof e != "function")
        throw new TypeError(qR);
    t = Rk(t) || 0,
    a2(n) && (u = !!n.leading,
    f = "maxWait"in n,
    o = f ? VQ(Rk(n.maxWait) || 0, t) : o,
    h = "trailing"in n ? !!n.trailing : h);
    function m(M) {
        var A = r
          , I = i;
        return r = i = void 0,
        c = M,
        s = e.apply(I, A),
        s
    }
    function v(M) {
        return c = M,
        a = setTimeout(b, t),
        u ? m(M) : s
    }
    function y(M) {
        var A = M - l
          , I = M - c
          , O = t - A;
        return f ? YQ(O, o - I) : O
    }
    function E(M) {
        var A = M - l
          , I = M - c;
        return l === void 0 || A >= t || A < 0 || f && I >= o
    }
    function b() {
        var M = LE();
        if (E(M))
            return _(M);
        a = setTimeout(b, y(M))
    }
    function _(M) {
        return a = void 0,
        h && r ? m(M) : (r = i = void 0,
        s)
    }
    function x() {
        a !== void 0 && clearTimeout(a),
        c = 0,
        r = l = i = a = void 0
    }
    function C() {
        return a === void 0 ? s : _(LE())
    }
    function P() {
        var M = LE()
          , A = E(M);
        if (r = arguments,
        i = this,
        l = M,
        A) {
            if (a === void 0)
                return v(l);
            if (f)
                return a = setTimeout(b, t),
                m(l)
        }
        return a === void 0 && (a = setTimeout(b, t)),
        s
    }
    return P.cancel = x,
    P.flush = C,
    P
}
function KQ(e, t, n) {
    var r = !0
      , i = !0;
    if (typeof e != "function")
        throw new TypeError(qR);
    return a2(n) && (r = "leading"in n ? !!n.leading : r,
    i = "trailing"in n ? !!n.trailing : i),
    jQ(e, t, {
        leading: r,
        maxWait: t,
        trailing: i
    })
}
function a2(e) {
    var t = typeof e;
    return !!e && (t == "object" || t == "function")
}
function XQ(e) {
    return !!e && typeof e == "object"
}
function ZQ(e) {
    return typeof e == "symbol" || XQ(e) && GQ.call(e) == DQ
}
function Rk(e) {
    if (typeof e == "number")
        return e;
    if (ZQ(e))
        return Pk;
    if (a2(e)) {
        var t = typeof e.valueOf == "function" ? e.valueOf() : e;
        e = a2(t) ? t + "" : t
    }
    if (typeof e != "string")
        return e === 0 ? e : +e;
    e = e.replace(OQ, "");
    var n = FQ.test(e);
    return n || BQ.test(e) ? zQ(e.slice(2), n ? 2 : 8) : NQ.test(e) ? Pk : +e
}
var qQ = KQ;
const ca = Su(qQ)
  , Dk = ()=>{
    const e = new Date
      , t = e.getFullYear()
      , n = `${e.getMonth() + 1}`.padStart(2, "0")
      , r = `${e.getDate()}`.padStart(2, "0")
      , i = `${e.getHours()}`.padStart(2, "0")
      , o = `${e.getMinutes()}`.padStart(2, "0");
    return `${t}-${n}-${r}-${i}${o}`
}
  , hg = e=>e.charAt(0).toUpperCase() + e.slice(1)
  , QQ = e=>e instanceof HTMLElement && e.className.includes("ToolIcon")
  , G3 = e=>e instanceof HTMLElement && e.dataset.type === "wysiwyg" || e instanceof HTMLBRElement || e instanceof HTMLInputElement || e instanceof HTMLTextAreaElement || e instanceof HTMLSelectElement
  , JQ = e=>G3(e) || e instanceof Element && !!e.closest("label, button")
  , Cc = e=>e instanceof HTMLElement && e.dataset.type === "wysiwyg" || e instanceof HTMLBRElement || e instanceof HTMLTextAreaElement || e instanceof HTMLInputElement && (e.type === "text" || e.type === "number" || e.type === "password")
  , Bp = ({fontFamily: e})=>{
    for (const [t,n] of Object.entries(Lt))
        if (n === e)
            return `${t}, ${vk}`;
    return vk
}
  , Ht = ({fontSize: e, fontFamily: t})=>`${e}px ${Bp({
    fontFamily: t
})}`
  , Wl = (e,t)=>{
    let n = 0
      , r = null;
    const i = (...o)=>{
        r = o,
        clearTimeout(n),
        n = window.setTimeout(()=>{
            r = null,
            e(...o)
        }
        , t)
    }
    ;
    return i.flush = ()=>{
        if (clearTimeout(n),
        r) {
            const o = r;
            r = null,
            e(...o)
        }
    }
    ,
    i.cancel = ()=>{
        r = null,
        clearTimeout(n)
    }
    ,
    i
}
  , Av = (e,t)=>{
    let n = null
      , r = null
      , i = null;
    const o = a=>{
        n = window.requestAnimationFrame(()=>{
            n = null,
            e(...a),
            r = null,
            i && (r = i,
            i = null,
            o(r))
        }
        )
    }
      , s = (...a)=>{
        r = a,
        n === null ? o(r) : t != null && t.trailing && (i = a)
    }
    ;
    return s.flush = ()=>{
        n !== null && (cancelAnimationFrame(n),
        n = null),
        r && (e(...i || r),
        r = i = null)
    }
    ,
    s.cancel = ()=>{
        r = i = null,
        n !== null && (cancelAnimationFrame(n),
        n = null)
    }
    ,
    s
}
  , Kc = e=>1 - Math.pow(1 - e, 4)
  , Ok = (e,t,n)=>(t - e) * Kc(n) + e
  , eJ = ({fromValues: e, toValues: t, onStep: n, duration: r=250, interpolateValue: i, onStart: o, onEnd: s, onCancel: a})=>{
    let l = !1, c = 0, u;
    function f(h) {
        if (l)
            return;
        u === void 0 && (u = h,
        o == null || o());
        const m = Math.min(h - u, r)
          , v = Kc(m / r)
          , y = {};
        if (Object.keys(e).forEach(E=>{
            const b = E
              , _ = (t[b] - e[b]) * v + e[b];
            y[b] = _
        }
        ),
        n(y),
        m < r) {
            const E = m / r
              , b = {};
            Object.keys(e).forEach(_=>{
                const x = _
                  , C = e[x]
                  , P = t[x];
                let M;
                M = i ? i(C, P, E, x) : Ok(C, P, E),
                M == null && (M = Ok(C, P, E)),
                b[x] = M
            }
            ),
            n(b),
            c = window.requestAnimationFrame(f)
        } else
            n(t),
            s == null || s()
    }
    return c = window.requestAnimationFrame(f),
    ()=>{
        a == null || a(),
        l = !0,
        window.cancelAnimationFrame(c)
    }
}
  , tJ = (e,t)=>{
    if (!e.length || t < 1)
        return [];
    let n = 0
      , r = 0;
    const i = Array(Math.ceil(e.length / t));
    for (; n < e.length; )
        i[r++] = e.slice(n, n += t);
    return i
}
  , xr = (e,t)=>Math.abs(e - t)
  , bn = (e,t)=>t.type === "custom" ? {
    ...e.activeTool,
    type: "custom",
    customType: t.customType,
    locked: t.locked ?? e.activeTool.locked
} : {
    ...e.activeTool,
    lastActiveTool: t.lastActiveToolBeforeEraser === void 0 ? e.activeTool.lastActiveTool : t.lastActiveToolBeforeEraser,
    type: t.type,
    customType: null,
    locked: t.locked ?? e.activeTool.locked
}
  , ie = e=>(e = e.replace(/\bAlt\b/i, "Alt").replace(/\bShift\b/i, "Shift").replace(/\b(Enter|Return)\b/i, "Enter"),
Ts ? e.replace(/\bCtrlOrCmd\b/gi, "Cmd").replace(/\bAlt\b/i, "Option") : e.replace(/\bCtrlOrCmd\b/gi, "Ctrl"))
  , zt = ({clientX: e, clientY: t},{zoom: n, offsetLeft: r, offsetTop: i, scrollX: o, scrollY: s})=>{
    const a = (e - r) / n.value - o
      , l = (t - i) / n.value - s;
    return {
        x: a,
        y: l
    }
}
  , Bo = ({sceneX: e, sceneY: t},{zoom: n, offsetLeft: r, offsetTop: i, scrollX: o, scrollY: s})=>{
    const a = (e + o) * n.value + r
      , l = (t + s) * n.value + i;
    return {
        x: a,
        y: l
    }
}
  , v0 = e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`)
  , nJ = "A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿"
  , rJ = "֑-߿יִ-﷽ﹰ-ﻼ"
  , iJ = new RegExp(`^[^${nJ}]*[${rJ}]`)
  , QR = e=>iJ.test(e)
  , no = e=>{
    const [t,n] = e;
    return {
        x: t,
        y: n
    }
}
  , JR = e=>{
    if ((e == null ? void 0 : e.name) === "AbortError") {
        console.warn(e);
        return
    }
    throw e
}
  , eD = (e,t,n=0)=>{
    n < 0 && (n = e.length + n),
    n = Math.min(e.length, Math.max(n, 0));
    let r = n - 1;
    for (; ++r < e.length; )
        if (t(e[r], r, e))
            return r;
    return -1
}
  , tD = (e,t,n=e.length - 1)=>{
    n < 0 && (n = e.length + n),
    n = Math.min(e.length - 1, Math.max(n, 0));
    let r = n + 1;
    for (; --r > -1; )
        if (t(e[r], r, e))
            return r;
    return -1
}
  , Es = e=>{
    const t = e.length === 5 && e.substr(4, 1) === "0"
      , n = e.length === 9 && e.substr(7, 2) === "00";
    return t || n || e === Qe.transparent
}
  , Mv = ()=>{
    let e, t;
    const n = new Promise((r,i)=>{
        e = r,
        t = i
    }
    );
    return n.resolve = e,
    n.reject = t,
    n
}
  , Nk = (e,t)=>{
    const n = [{
        value: 1,
        symbol: "b"
    }, {
        value: 1e3,
        symbol: "k"
    }, {
        value: 1e6,
        symbol: "M"
    }, {
        value: 1e9,
        symbol: "G"
    }]
      , r = /\.0+$|(\.[0-9]*[1-9])0+$/;
    let i;
    for (i = n.length - 1; i > 0 && !(e >= n[i].value); i--)
        ;
    return (e / n[i].value).toFixed(t).replace(r, "$1") + n[i].symbol
}
  , V3 = ()=>{
    var e;
    return ((e = document.querySelector('meta[name="version"]')) == null ? void 0 : e.content) || WP
}
  , oJ = e=>{
    let t = e.parentElement;
    for (; t; ) {
        if (t === document.body)
            return document;
        const {overflowY: n} = window.getComputedStyle(t);
        if (t.scrollHeight > t.clientHeight && (n === "auto" || n === "scroll" || n === "overlay"))
            return t;
        t = t.parentElement
    }
    return document
}
  , sJ = e=>{
    let t = e.parentElement;
    for (; t; ) {
        if (t.tabIndex > -1) {
            t.focus();
            return
        }
        t = t.parentElement
    }
}
  , A6 = e=>{
    e.preventDefault(),
    e.returnValue = ""
}
  , nD = e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join("")
  , Pf = ()=>Date.now()
  , De = e=>e instanceof Map ? e : e.reduce((t,n)=>(t.set(typeof n == "string" ? n : n.id, n),
t), new Map)
  , aJ = e=>e.reduce((t,n,r)=>(t.set(n.id, [n, r]),
t), new Map)
  , Ys = (e,t)=>e.reduce((n,r)=>(n[t ? t(r) : String(r)] = r,
n), {})
  , lJ = e=>e.reduce((t,n,r)=>{
    const i = {
        ...n,
        prev: null,
        next: null
    };
    if (r !== 0) {
        const o = t[r - 1];
        if (i.prev = o,
        o.next = i,
        r === e.length - 1) {
            const s = t[0];
            i.next = s,
            s.prev = i
        }
    }
    return t.push(i),
    t
}
, [])
  , cJ = ()=>!1
  , rD = (e,t)=>new CustomEvent(e,{
    detail: {
        nativeEvent: t
    },
    cancelable: !0
})
  , lm = (e,t)=>{
    let n = !1;
    for (const r in t) {
        const i = t[r];
        if (typeof i < "u") {
            if (e[r] === i && (typeof i != "object" || i === null))
                continue;
            n = !0
        }
    }
    return n ? {
        ...e,
        ...t
    } : e
}
  , zp = ()=>{
    try {
        return window.self === window.top ? "top" : "iframe"
    } catch {
        return "iframe"
    }
}
  , uJ = ()=>zp() === "iframe"
  , $p = e=>!!e && typeof e == "object" && "then"in e && "catch"in e && "finally"in e
  , Y3 = e=>{
    const t = e == null ? void 0 : e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");
    return t ? Array.from(t).filter(n=>n.tabIndex > -1 && !n.disabled) : []
}
  , Fk = (e,t)=>Array.isArray(e) && Array.isArray(t) && e.length === 0 && t.length === 0 ? !0 : e === t
  , Xn = (e,t,n,r=!1)=>{
    const i = Object.keys(e)
      , o = Object.keys(t);
    if (i.length !== o.length)
        return r && console.warn("%cisShallowEqual: objects don't have same properties ->", "color: #8B4000", e, t),
        !1;
    if (n && Array.isArray(n)) {
        for (const s of n)
            if (!(e[s] === t[s] || Fk(e[s], t[s])))
                return r && console.warn(`%cisShallowEqual: ${s} not equal ->`, "color: #8B4000", e[s], t[s]),
                !1;
        return !0
    }
    return i.every(s=>{
        const a = n == null ? void 0 : n[s]
          , l = a ? a(e[s], t[s]) : e[s] === t[s] || Fk(e[s], t[s]);
        return !l && r && console.warn(`%cisShallowEqual: ${s} not equal ->`, "color: #8B4000", e[s], t[s]),
        l
    }
    )
}
  , Lv = (e,t,{checkForDefaultPrevented: n=!0}={})=>function(i) {
    if (e == null || e(i),
    !n || !(i != null && i.defaultPrevented))
        return t == null ? void 0 : t(i)
}
  , Gl = (e,t,n)=>{
    if (!t)
        return e;
    if (n)
        return console.error(t),
        e;
    throw new Error(t)
}
;
function Pv(e, t) {
    if (!e)
        throw new Error(t)
}
const dJ = e=>{
    let t, n;
    const r = function(i) {
        const o = Object.entries(i);
        if (t) {
            let a = !0;
            for (const [l,c] of o)
                if (t.get(l) !== c) {
                    a = !1;
                    break
                }
            if (a)
                return n
        }
        const s = e(i);
        return t = new Map(o),
        n = s,
        s
    };
    return r.clear = ()=>{
        t = void 0,
        n = void 0
    }
    ,
    r
}
  , j3 = (e,t)=>e instanceof Set || e instanceof Map ? e.has(t) : "includes"in e ? e.includes(t) : e.hasOwnProperty(t)
  , ha = e=>JSON.parse(JSON.stringify(e))
  , gg = e=>typeof e == "number" && Number.isFinite(e)
  , PE = (e,t)=>Xn(e, t) ? e : t;
function fn(e, t, n, r) {
    var i;
    return e ? ((i = e == null ? void 0 : e.addEventListener) == null || i.call(e, t, n, r),
    ()=>{
        var o;
        (o = e == null ? void 0 : e.removeEventListener) == null || o.call(e, t, n, r)
    }
    ) : ()=>{}
}
const y0 = (e,t)=>(e + t) / 2;
function fJ(e, t=!0) {
    const n = e.length;
    if (n < 4)
        return "";
    let r = e[0]
      , i = e[1];
    const o = e[2];
    let s = `M${r[0].toFixed(2)},${r[1].toFixed(2)} Q${i[0].toFixed(2)},${i[1].toFixed(2)} ${y0(i[0], o[0]).toFixed(2)},${y0(i[1], o[1]).toFixed(2)} T`;
    for (let a = 2, l = n - 1; a < l; a++)
        r = e[a],
        i = e[a + 1],
        s += `${y0(r[0], i[0]).toFixed(2)},${y0(r[1], i[1]).toFixed(2)} `;
    return t && (s += "Z"),
    s
}
const iD = e=>e.replace(/\r?\n|\r/g, `
`)
  , As = e=>e
  , K3 = async(e,...t)=>new Promise(n=>{
    n(e(...t))
}
)
  , hJ = (...e)=>Math.max(...e.map(t=>t ? 1 : 0)) > 0
  , Hn = e=>!!e && e.type === "image" && !!e.fileId
  , ga = e=>!!e && e.type === "image"
  , Br = e=>!!e && e.type === "embeddable"
  , rl = e=>!!e && e.type === "iframe"
  , eo = e=>!!e && (e.type === "iframe" || e.type === "embeddable")
  , ye = e=>e != null && e.type === "text"
  , oD = e=>e != null && e.type === "frame"
  , jh = e=>e != null && e.type === "magicframe"
  , Ue = e=>e != null && (e.type === "frame" || e.type === "magicframe")
  , Di = e=>e != null && gJ(e.type)
  , gJ = e=>e === "freedraw"
  , je = e=>e != null && M6(e.type)
  , Be = e=>e != null && e.type === "arrow"
  , He = e=>Be(e) && e.elbowed
  , M6 = e=>e === "arrow" || e === "line"
  , ms = (e,t=!0)=>e != null && (!e.locked || t === !0) && sD(e.type)
  , sD = e=>e === "arrow"
  , xa = (e,t=!0)=>e != null && (!e.locked || t === !0) && (e.type === "rectangle" || e.type === "diamond" || e.type === "ellipse" || e.type === "image" || e.type === "iframe" || e.type === "embeddable" || e.type === "frame" || e.type === "magicframe" || e.type === "text" && !e.containerId)
  , pJ = e=>e != null && (e.type === "rectangle" || e.type === "diamond" || e.type === "image" || e.type === "iframe" || e.type === "embeddable" || e.type === "frame" || e.type === "magicframe" || e.type === "text" && !e.containerId)
  , mJ = e=>e != null && (e.type === "rectangle" || e.type === "image" || e.type === "text" || e.type === "iframe" || e.type === "embeddable" || e.type === "frame" || e.type === "magicframe")
  , Xc = (e,t=!0)=>e != null && (!e.locked || t === !0) && (e.type === "rectangle" || e.type === "diamond" || e.type === "ellipse" || Be(e))
  , aD = e=>{
    const t = e == null ? void 0 : e.type;
    if (!t)
        return !1;
    switch (t) {
    case "text":
    case "diamond":
    case "rectangle":
    case "iframe":
    case "embeddable":
    case "ellipse":
    case "arrow":
    case "freedraw":
    case "line":
    case "frame":
    case "magicframe":
    case "image":
    case "selection":
        return !0;
    default:
        return Gl(t, null),
        !1
    }
}
  , Rv = e=>e.type === "rectangle" || e.type === "ellipse" || e.type === "diamond"
  , go = e=>{
    var t;
    return Xc(e) && !!((t = e.boundElements) != null && t.some(({type: n})=>n === "text"))
}
  , Sn = e=>e !== null && "containerId"in e && e.containerId !== null && ye(e)
  , Rf = e=>e === "rectangle" || e === "embeddable" || e === "iframe" || e === "image"
  , lD = e=>e === "line" || e === "arrow" || e === "diamond"
  , vJ = (e,t)=>!!((e === An.ADAPTIVE_RADIUS || e === An.LEGACY) && Rf(t.type) || e === An.PROPORTIONAL_RADIUS && lD(t.type))
  , yJ = e=>lD(e.type) ? {
    type: An.PROPORTIONAL_RADIUS
} : Rf(e.type) ? {
    type: An.ADAPTIVE_RADIUS
} : null
  , Bk = e=>e.fixedPoint != null;
let wJ = new WR(Date.now());
const nc = ()=>Math.floor(wJ.next() * 2 ** 31)
  , po = ()=>T6()
  , cD = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
function Ld(e, t, n) {
    const r = n[0];
    if (t != null && e >= t)
        throw new Error(e + " >= " + t);
    if (e.slice(-1) === r || t && t.slice(-1) === r)
        throw new Error("trailing zero");
    if (t) {
        let s = 0;
        for (; (e[s] || r) === t[s]; )
            s++;
        if (s > 0)
            return t.slice(0, s) + Ld(e.slice(s), t.slice(s), n)
    }
    const i = e ? n.indexOf(e[0]) : 0
      , o = t != null ? n.indexOf(t[0]) : n.length;
    if (o - i > 1) {
        const s = Math.round(.5 * (i + o));
        return n[s]
    } else
        return t && t.length > 1 ? t.slice(0, 1) : n[i] + Ld(e.slice(1), null, n)
}
function uD(e) {
    if (e.length !== dD(e[0]))
        throw new Error("invalid integer part of order key: " + e)
}
function dD(e) {
    if (e >= "a" && e <= "z")
        return e.charCodeAt(0) - 97 + 2;
    if (e >= "A" && e <= "Z")
        return 90 - e.charCodeAt(0) + 2;
    throw new Error("invalid order key head: " + e)
}
function Kh(e) {
    const t = dD(e[0]);
    if (t > e.length)
        throw new Error("invalid order key: " + e);
    return e.slice(0, t)
}
function zk(e, t) {
    if (e === "A" + t[0].repeat(26))
        throw new Error("invalid order key: " + e);
    const n = Kh(e);
    if (e.slice(n.length).slice(-1) === t[0])
        throw new Error("invalid order key: " + e)
}
function $k(e, t) {
    uD(e);
    const [n,...r] = e.split("");
    let i = !0;
    for (let o = r.length - 1; i && o >= 0; o--) {
        const s = t.indexOf(r[o]) + 1;
        s === t.length ? r[o] = t[0] : (r[o] = t[s],
        i = !1)
    }
    if (i) {
        if (n === "Z")
            return "a" + t[0];
        if (n === "z")
            return null;
        const o = String.fromCharCode(n.charCodeAt(0) + 1);
        return o > "a" ? r.push(t[0]) : r.pop(),
        o + r.join("")
    } else
        return n + r.join("")
}
function EJ(e, t) {
    uD(e);
    const [n,...r] = e.split("");
    let i = !0;
    for (let o = r.length - 1; i && o >= 0; o--) {
        const s = t.indexOf(r[o]) - 1;
        s === -1 ? r[o] = t.slice(-1) : (r[o] = t[s],
        i = !1)
    }
    if (i) {
        if (n === "a")
            return "Z" + t.slice(-1);
        if (n === "A")
            return null;
        const o = String.fromCharCode(n.charCodeAt(0) - 1);
        return o < "Z" ? r.push(t.slice(-1)) : r.pop(),
        o + r.join("")
    } else
        return n + r.join("")
}
function Ju(e, t, n=cD) {
    if (e != null && zk(e, n),
    t != null && zk(t, n),
    e != null && t != null && e >= t)
        throw new Error(e + " >= " + t);
    if (e == null) {
        if (t == null)
            return "a" + n[0];
        const l = Kh(t)
          , c = t.slice(l.length);
        if (l === "A" + n[0].repeat(26))
            return l + Ld("", c, n);
        if (l < t)
            return l;
        const u = EJ(l, n);
        if (u == null)
            throw new Error("cannot decrement any more");
        return u
    }
    if (t == null) {
        const l = Kh(e)
          , c = e.slice(l.length)
          , u = $k(l, n);
        return u ?? l + Ld(c, null, n)
    }
    const r = Kh(e)
      , i = e.slice(r.length)
      , o = Kh(t)
      , s = t.slice(o.length);
    if (r === o)
        return r + Ld(i, s, n);
    const a = $k(r, n);
    if (a == null)
        throw new Error("cannot increment any more");
    return a < t ? a : r + Ld(i, null, n)
}
function X3(e, t, n, r=cD) {
    if (n === 0)
        return [];
    if (n === 1)
        return [Ju(e, t, r)];
    if (t == null) {
        let s = Ju(e, t, r);
        const a = [s];
        for (let l = 0; l < n - 1; l++)
            s = Ju(s, t, r),
            a.push(s);
        return a
    }
    if (e == null) {
        let s = Ju(e, t, r);
        const a = [s];
        for (let l = 0; l < n - 1; l++)
            s = Ju(e, s, r),
            a.push(s);
        return a.reverse(),
        a
    }
    const i = Math.floor(n / 2)
      , o = Ju(e, t, r);
    return [...X3(e, o, i, r), o, ...X3(o, t, n - i - 1, r)]
}
class bJ extends Error {
    constructor(t="Couldn't export canvas.", n="CANVAS_ERROR") {
        super(),
        this.name = n,
        this.message = t
    }
}
class df extends DOMException {
    constructor(t="Request Aborted") {
        super(t, "AbortError")
    }
}
class Nc extends Error {
    constructor(n="Image Scene Data Error", r="IMAGE_SCENE_DATA_ERROR") {
        super(n);
        D(this, "code");
        this.name = "EncodingError",
        this.code = r
    }
}
class _J extends Error {
    constructor() {
        super(...arguments);
        D(this, "code", "ELEMENT_HAS_INVALID_INDEX")
    }
}
function Uk(e, t, n, r=i=>i) {
    return e * r(.5 - t * (.5 - n))
}
function xJ(e) {
    return [-e[0], -e[1]]
}
function Po(e, t) {
    return [e[0] + t[0], e[1] + t[1]]
}
function Zi(e, t) {
    return [e[0] - t[0], e[1] - t[1]]
}
function To(e, t) {
    return [e[0] * t, e[1] * t]
}
function SJ(e, t) {
    return [e[0] / t, e[1] / t]
}
function xh(e) {
    return [e[1], -e[0]]
}
function Hk(e, t) {
    return e[0] * t[0] + e[1] * t[1]
}
function IJ(e, t) {
    return e[0] === t[0] && e[1] === t[1]
}
function CJ(e) {
    return Math.hypot(e[0], e[1])
}
function kJ(e) {
    return e[0] * e[0] + e[1] * e[1]
}
function Wk(e, t) {
    return kJ(Zi(e, t))
}
function fD(e) {
    return SJ(e, CJ(e))
}
function TJ(e, t) {
    return Math.hypot(e[1] - t[1], e[0] - t[0])
}
function Sh(e, t, n) {
    let r = Math.sin(n)
      , i = Math.cos(n)
      , o = e[0] - t[0]
      , s = e[1] - t[1]
      , a = o * i - s * r
      , l = o * r + s * i;
    return [a + t[0], l + t[1]]
}
function Z3(e, t, n) {
    return Po(e, To(Zi(t, e), n))
}
function Gk(e, t, n) {
    return Po(e, To(t, n))
}
var {min: ed, PI: AJ} = Math
  , Vk = .275
  , Ih = AJ + 1e-4;
function MJ(e, t={}) {
    let {size: n=16, smoothing: r=.5, thinning: i=.5, simulatePressure: o=!0, easing: s=ae=>ae, start: a={}, end: l={}, last: c=!1} = t
      , {cap: u=!0, easing: f=ae=>ae * (2 - ae)} = a
      , {cap: h=!0, easing: m=ae=>--ae * ae * ae + 1} = l;
    if (e.length === 0 || n <= 0)
        return [];
    let v = e[e.length - 1].runningLength, y = a.taper === !1 ? 0 : a.taper === !0 ? Math.max(n, v) : a.taper, E = l.taper === !1 ? 0 : l.taper === !0 ? Math.max(n, v) : l.taper, b = Math.pow(n * r, 2), _ = [], x = [], C = e.slice(0, 10).reduce((ae,q)=>{
        let K = q.pressure;
        if (o) {
            let G = ed(1, q.distance / n)
              , H = ed(1, 1 - G);
            K = ed(1, ae + (H - ae) * (G * Vk))
        }
        return (ae + K) / 2
    }
    , e[0].pressure), P = Uk(n, i, e[e.length - 1].pressure, s), M, A = e[0].vector, I = e[0].point, O = I, N = I, $ = O, V = !1;
    for (let ae = 0; ae < e.length; ae++) {
        let {pressure: q} = e[ae]
          , {point: K, vector: G, distance: H, runningLength: J} = e[ae];
        if (ae < e.length - 1 && v - J < 3)
            continue;
        if (i) {
            if (o) {
                let nt = ed(1, H / n)
                  , ot = ed(1, 1 - nt);
                q = ed(1, C + (ot - C) * (nt * Vk))
            }
            P = Uk(n, i, q, s)
        } else
            P = n / 2;
        M === void 0 && (M = P);
        let te = J < y ? f(J / y) : 1
          , oe = v - J < E ? m((v - J) / E) : 1;
        P = Math.max(.01, P * Math.min(te, oe));
        let de = (ae < e.length - 1 ? e[ae + 1] : e[ae]).vector
          , pe = ae < e.length - 1 ? Hk(G, de) : 1
          , be = Hk(G, A) < 0 && !V
          , tt = pe !== null && pe < 0;
        if (be || tt) {
            let nt = To(xh(A), P);
            for (let ot = 1 / 13, kt = 0; kt <= 1; kt += ot)
                N = Sh(Zi(K, nt), K, Ih * kt),
                _.push(N),
                $ = Sh(Po(K, nt), K, Ih * -kt),
                x.push($);
            I = N,
            O = $,
            tt && (V = !0);
            continue
        }
        if (V = !1,
        ae === e.length - 1) {
            let nt = To(xh(G), P);
            _.push(Zi(K, nt)),
            x.push(Po(K, nt));
            continue
        }
        let Je = To(xh(Z3(de, G, pe)), P);
        N = Zi(K, Je),
        (ae <= 1 || Wk(I, N) > b) && (_.push(N),
        I = N),
        $ = Po(K, Je),
        (ae <= 1 || Wk(O, $) > b) && (x.push($),
        O = $),
        C = q,
        A = G
    }
    let z = e[0].point.slice(0, 2)
      , j = e.length > 1 ? e[e.length - 1].point.slice(0, 2) : Po(e[0].point, [1, 1])
      , re = []
      , se = [];
    if (e.length === 1) {
        if (!(y || E) || c) {
            let ae = Gk(z, fD(xh(Zi(z, j))), -(M || P))
              , q = [];
            for (let K = 1 / 13, G = K; G <= 1; G += K)
                q.push(Sh(ae, z, Ih * 2 * G));
            return q
        }
    } else {
        if (!(y || E && e.length === 1))
            if (u)
                for (let q = 1 / 13, K = q; K <= 1; K += q) {
                    let G = Sh(x[0], z, Ih * K);
                    re.push(G)
                }
            else {
                let q = Zi(_[0], x[0])
                  , K = To(q, .5)
                  , G = To(q, .51);
                re.push(Zi(z, K), Zi(z, G), Po(z, G), Po(z, K))
            }
        let ae = xh(xJ(e[e.length - 1].vector));
        if (E || y && e.length === 1)
            se.push(j);
        else if (h) {
            let q = Gk(j, ae, P);
            for (let K = 1 / 29, G = K; G < 1; G += K)
                se.push(Sh(q, j, Ih * 3 * G))
        } else
            se.push(Po(j, To(ae, P)), Po(j, To(ae, P * .99)), Zi(j, To(ae, P * .99)), Zi(j, To(ae, P)))
    }
    return _.concat(se, x.reverse(), re)
}
function LJ(e, t={}) {
    var n;
    let {streamline: r=.5, size: i=16, last: o=!1} = t;
    if (e.length === 0)
        return [];
    let s = .15 + (1 - r) * .85
      , a = Array.isArray(e[0]) ? e : e.map(({x: m, y: v, pressure: y=.5})=>[m, v, y]);
    if (a.length === 2) {
        let m = a[1];
        a = a.slice(0, -1);
        for (let v = 1; v < 5; v++)
            a.push(Z3(a[0], m, v / 4))
    }
    a.length === 1 && (a = [...a, [...Po(a[0], [1, 1]), ...a[0].slice(2)]]);
    let l = [{
        point: [a[0][0], a[0][1]],
        pressure: a[0][2] >= 0 ? a[0][2] : .25,
        vector: [1, 1],
        distance: 0,
        runningLength: 0
    }]
      , c = !1
      , u = 0
      , f = l[0]
      , h = a.length - 1;
    for (let m = 1; m < a.length; m++) {
        let v = o && m === h ? a[m].slice(0, 2) : Z3(f.point, a[m], s);
        if (IJ(f.point, v))
            continue;
        let y = TJ(v, f.point);
        if (u += y,
        m < h && !c) {
            if (u < i)
                continue;
            c = !0
        }
        f = {
            point: v,
            pressure: a[m][2] >= 0 ? a[m][2] : .5,
            vector: fD(Zi(f.point, v)),
            distance: y,
            runningLength: u
        },
        l.push(f)
    }
    return l[0].vector = ((n = l[1]) == null ? void 0 : n.vector) || [0, 0],
    l
}
function PJ(e, t={}) {
    return MJ(LJ(e, t), t)
}
const hD = (e,t,n)=>{
    const r = n.reduce((i,o)=>(o.groupIds.includes(e) && (i[o.id] = !0),
    i), {});
    return Object.keys(r).length < 2 ? t.selectedGroupIds[e] || t.editingGroupId === e ? {
        selectedElementIds: t.selectedElementIds,
        selectedGroupIds: {
            ...t.selectedGroupIds,
            [e]: !1
        },
        editingGroupId: null
    } : t : {
        editingGroupId: t.editingGroupId,
        selectedGroupIds: {
            ...t.selectedGroupIds,
            [e]: !0
        },
        selectedElementIds: {
            ...t.selectedElementIds,
            ...r
        }
    }
}
  , Ii = function() {
    let e = null
      , t = null
      , n = null;
    const r = (o,s,a,l)=>{
        if (n !== void 0 && s === t && o === e && a.editingGroupId === (n == null ? void 0 : n.editingGroupId))
            return n;
        const c = {};
        for (const h of o) {
            let m = h.groupIds;
            if (a.editingGroupId) {
                const v = m.indexOf(a.editingGroupId);
                v > -1 && (m = m.slice(0, v))
            }
            if (m.length > 0) {
                const v = m[m.length - 1];
                c[v] = !0
            }
        }
        const u = {}
          , f = s.reduce((h,m)=>{
            const v = m.groupIds.find(y=>c[y]);
            return v && (h[m.id] = !0,
            Array.isArray(u[v]) ? u[v].push(m.id) : u[v] = [m.id]),
            h
        }
        , {});
        for (const h of Object.keys(u))
            u[h].length < 2 && c[h] && (c[h] = !1);
        return t = s,
        e = o,
        n = {
            editingGroupId: a.editingGroupId,
            selectedGroupIds: c,
            selectedElementIds: vt({
                ...a.selectedElementIds,
                ...f
            }, l)
        },
        n
    }
      , i = (o,s,a,l)=>{
        const c = l ? l.scene.getSelectedElements({
            selectedElementIds: o.selectedElementIds,
            elements: s
        }) : dt(s, o);
        return c.length ? r(c, s, o, a) : {
            selectedGroupIds: {},
            editingGroupId: null,
            selectedElementIds: vt(o.selectedElementIds, a)
        }
    }
    ;
    return i.clearCache = ()=>{
        t = null,
        e = null,
        n = null
    }
    ,
    i
}()
  , gD = (e,t)=>pD(e, t) != null
  , pD = (e,t)=>t.groupIds.filter(n=>n !== e.editingGroupId).find(n=>e.selectedGroupIds[n])
  , Zc = e=>Object.entries(e.selectedGroupIds).filter(([t,n])=>n).map(([t,n])=>t)
  , mD = (e,t)=>{
    let n = {
        ...t,
        selectedGroupIds: {}
    };
    for (const r of e) {
        let i = r.groupIds;
        if (t.editingGroupId) {
            const o = i.indexOf(t.editingGroupId);
            o > -1 && (i = i.slice(0, o))
        }
        if (i.length > 0) {
            const o = i[i.length - 1];
            n = {
                ...n,
                ...hD(o, n, e)
            }
        }
    }
    return n.selectedGroupIds
}
  , RJ = (e,t)=>({
    ...e,
    editingGroupId: t.groupIds.length ? t.groupIds[0] : null,
    selectedGroupIds: {},
    selectedElementIds: {
        [t.id]: !0
    }
})
  , rp = (e,t)=>e.groupIds.includes(t)
  , xn = (e,t)=>{
    const n = [];
    for (const r of e.values())
        rp(r, t) && n.push(r);
    return n
}
  , DJ = (e,t)=>e.groupIds.find(n=>t[n])
  , OJ = (e,t,n)=>{
    const r = [...e]
      , i = t ? e.indexOf(t) : -1
      , o = i > -1 ? i : e.length;
    for (let s = 0; s < o; s++)
        r[s] = n(r[s]);
    return r
}
  , NJ = (e,t,n)=>{
    const r = [...e]
      , i = n ? r.indexOf(n) : -1
      , o = i > -1 ? i : r.length;
    return r.splice(o, 0, t),
    r
}
  , FJ = (e,t)=>e.filter(n=>!t[n])
  , Dv = (e,t)=>{
    const n = new Map;
    return e.forEach(r=>{
        const i = r.groupIds.length === 0 ? r.id : r.groupIds[r.groupIds.length - 1]
          , o = n.get(i) || []
          , s = Ge(r, t);
        s && o.push(s),
        n.set(i, [...o, r])
    }
    ),
    Array.from(n.values())
}
  , BJ = e=>{
    const t = new Set;
    for (const [,n] of e)
        if (!n.isDeleted)
            for (const r of n.groupIds ?? [])
                t.add(r);
    return t
}
  , zJ = e=>{
    const t = e.flatMap(i=>i.groupIds)
      , n = new Map;
    let r = 0;
    for (const i of t)
        n.set(i, (n.get(i) ?? 0) + 1),
        n.get(i) > r && (r = n.get(i));
    return r === e.length
}
  , ff = e=>e.groupIds.length > 0;
var L6 = {};
Object.defineProperty(L6, "__esModule", {
    value: !0
});
var vD = L6.sanitizeUrl = void 0
  , $J = /^([^\w]*)(javascript|data|vbscript)/im
  , UJ = /&#(\w+)(^\w|;)?/g
  , HJ = /&(newline|tab);/gi
  , WJ = /[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim
  , GJ = /^.+(:|&colon;)/gim
  , VJ = [".", "/"];
function YJ(e) {
    return VJ.indexOf(e[0]) > -1
}
function jJ(e) {
    return e.replace(UJ, function(t, n) {
        return String.fromCharCode(n)
    })
}
function KJ(e) {
    var t = jJ(e || "").replace(HJ, "").replace(WJ, "").trim();
    if (!t)
        return "about:blank";
    if (YJ(t))
        return t;
    var n = t.match(GJ);
    if (!n)
        return t;
    var r = n[0];
    return $J.test(r) ? "about:blank" : t
}
vD = L6.sanitizeUrl = KJ;
const q3 = e=>e.replace(/"/g, "&quot;")
  , Is = e=>(e = e.trim(),
e && vD(q3(e)))
  , yD = e=>!!(e != null && e.includes(location.origin) || e != null && e.startsWith("/"))
  , wD = e=>{
    if (e = Is(e),
    e.startsWith("/"))
        return `${location.origin}${e}`;
    try {
        new URL(e)
    } catch {
        return "about:blank"
    }
    return e
}
;
let Q3 = [];
const we = e=>(Q3 = Q3.concat(e),
e)
  , ED = '<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">'
  , XJ = '<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>'
  , bD = '<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>'
  , ZJ = `data:${Re.svg},${encodeURIComponent(`${ED}${bD}</svg>`)}`
  , qJ = `data:${Re.svg},${encodeURIComponent(`${ED}${XJ}${bD}</svg>`)}`
  , Ao = e=>{
    e && (e.style.cursor = "")
}
  , At = (e,t)=>{
    e && (e.style.cursor = t)
}
;
let ns, Yk;
const _D = (e,t)=>{
    const r = ()=>{
        const i = t === Oe.DARK;
        ns = document.createElement("canvas"),
        ns.theme = t,
        ns.height = 20,
        ns.width = 20;
        const o = ns.getContext("2d");
        o.lineWidth = 1,
        o.beginPath(),
        o.arc(ns.width / 2, ns.height / 2, 5, 0, 2 * Math.PI),
        o.fillStyle = i ? Kn.black : Kn.white,
        o.fill(),
        o.strokeStyle = i ? Kn.white : Kn.black,
        o.stroke(),
        Yk = ns.toDataURL(Re.svg)
    }
    ;
    (!ns || ns.theme !== t) && r(),
    At(e, `url(${Yk}) ${20 / 2} ${20 / 2}, auto`)
}
  , ls = (e,t)=>{
    if (e)
        if (t.activeTool.type === "selection")
            Ao(e);
        else if (lf(t))
            e.style.cursor = It.GRAB;
        else if (fs(t))
            _D(e, t.theme);
        else if (t.activeTool.type === "laser") {
            const n = t.theme === Oe.LIGHT ? ZJ : qJ;
            e.style.cursor = `url(${n}), auto`
        } else
            ["image", "custom"].includes(t.activeTool.type) ? t.activeTool.type !== "image" && (e.style.cursor = It.AUTO) : e.style.cursor = It.CROSSHAIR
}
  , yr = class yr {
}
;
D(yr, "rg", new np),
D(yr, "cache", new WeakMap),
D(yr, "get", t=>yr.cache.get(t)),
D(yr, "set", (t,n)=>yr.cache.set(t, n)),
D(yr, "delete", t=>yr.cache.delete(t)),
D(yr, "destroy", ()=>{
    yr.cache = new WeakMap
}
),
D(yr, "generateElementShape", (t,n)=>{
    const r = n != null && n.isExporting ? void 0 : yr.get(t);
    if (r !== void 0)
        return r;
    S_.delete(t);
    const i = hae(t, yr.rg, n || {
        isExporting: !1,
        canvasBackgroundColor: Qe.white,
        embedsValidationStatus: null
    });
    return yr.cache.set(t, i),
    i
}
);
let Yt = yr;
const Fo = e=>"var(--icon-fill-color)"
  , xD = e=>e === Oe.LIGHT ? Kn.white : "#1e1e1e"
  , Q = (e,t=512)=>{
    const {width: n=512, height: r=n, mirror: i, style: o, ...s} = typeof t == "number" ? {
        width: t
    } : t;
    return g("svg", {
        "aria-hidden": "true",
        focusable: "false",
        role: "img",
        viewBox: `0 0 ${n} ${r}`,
        className: xe({
            "rtl-mirror": i
        }),
        style: o,
        ...s,
        children: typeof e == "string" ? g("path", {
            fill: "currentColor",
            d: e
        }) : e
    })
}
  , Ee = {
    width: 24,
    height: 24,
    fill: "none",
    strokeWidth: 2,
    stroke: "currentColor",
    strokeLinecap: "round",
    strokeLinejoin: "round"
}
  , Ye = {
    width: 20,
    height: 20,
    fill: "none",
    stroke: "currentColor",
    strokeLinecap: "round",
    strokeLinejoin: "round"
};
Q(L("g", {
    strokeWidth: "1.5",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("rect", {
        x: 3,
        y: 8,
        width: 18,
        height: 4,
        rx: 1
    }), g("line", {
        x1: 12,
        y1: 8,
        x2: 12,
        y2: 21
    }), g("path", {
        d: "M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"
    }), g("path", {
        d: "M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"
    })]
}), Ee);
const SD = Q(L("g", {
    strokeWidth: "1.25",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"
    }), g("path", {
        d: "M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"
    }), g("line", {
        x1: "3",
        y1: "6",
        x2: "3",
        y2: "19"
    }), g("line", {
        x1: "12",
        y1: "6",
        x2: "12",
        y2: "19"
    }), g("line", {
        x1: "21",
        y1: "6",
        x2: "21",
        y2: "19"
    })]
}), Ee)
  , QJ = Q(L("svg", {
    strokeWidth: "1.5",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("line", {
        x1: "12",
        y1: "5",
        x2: "12",
        y2: "19"
    }), g("line", {
        x1: "5",
        y1: "12",
        x2: "19",
        y2: "12"
    })]
}), Ee)
  , JJ = Q(L("g", {
    strokeWidth: "1.5",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("circle", {
        cx: "12",
        cy: "12",
        r: "1"
    }), g("circle", {
        cx: "12",
        cy: "19",
        r: "1"
    }), g("circle", {
        cx: "12",
        cy: "5",
        r: "1"
    })]
}), Ee)
  , eee = Q(L("svg", {
    strokeWidth: "1.5",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M9 4v6l-2 4v2h10v-2l-2 -4v-6"
    }), g("line", {
        x1: "12",
        y1: "16",
        x2: "12",
        y2: "21"
    }), g("line", {
        x1: "8",
        y1: "4",
        x2: "16",
        y2: "4"
    })]
}), Ee)
  , Ov = Q(L("g", {
    children: [g("path", {
        d: "M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",
        stroke: "currentColor",
        strokeWidth: "1.25"
    }), g("path", {
        d: "M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",
        stroke: "currentColor",
        strokeWidth: "1.25"
    }), g("mask", {
        id: "UnlockedIcon",
        style: {
            maskType: "alpha"
        },
        maskUnits: "userSpaceOnUse",
        x: 6,
        y: 1,
        width: 9,
        height: 9,
        children: g("path", {
            stroke: "none",
            d: "M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",
            fill: "#fff"
        })
    }), g("g", {
        mask: "url(#UnlockedIcon)",
        children: g("path", {
            stroke: "none",
            d: "M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",
            fill: "currentColor"
        })
    })]
}), Ye)
  , P6 = Q(L("g", {
    strokeWidth: "1.25",
    children: [g("path", {
        d: "M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"
    }), g("path", {
        d: "M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"
    }), g("path", {
        d: "M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"
    })]
}), Ye)
  , tee = Q(L(Se, {
    children: [g("path", {
        d: "M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",
        stroke: "currentColor",
        strokeWidth: 2,
        strokeLinecap: "round"
    }), g("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",
        fill: "currentColor"
    }), g("path", {
        d: "M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",
        stroke: "currentColor",
        strokeWidth: 2,
        strokeLinecap: "round"
    })]
}), {
    width: 41,
    height: 94,
    fill: "none"
})
  , nee = Q(L(Se, {
    children: [g("path", {
        d: "M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",
        stroke: "currentColor",
        strokeWidth: 2,
        strokeLinecap: "round"
    }), g("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",
        fill: "currentColor"
    }), g("path", {
        d: "M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",
        stroke: "currentColor",
        strokeWidth: 2,
        strokeLinecap: "round"
    })]
}), {
    width: 85,
    height: 71,
    fill: "none"
})
  , ree = Q(L(Se, {
    children: [g("path", {
        d: "M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",
        stroke: "currentColor",
        strokeWidth: 2,
        strokeLinecap: "round"
    }), g("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",
        fill: "currentColor"
    }), g("path", {
        d: "M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",
        stroke: "currentColor",
        strokeWidth: 2,
        strokeLinecap: "round"
    })]
}), {
    width: 38,
    height: 78,
    fill: "none"
})
  , J3 = Q(g("g", {
    fill: "currentColor",
    children: g("path", {
        d: "M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",
        fill: "currentColor"
    })
}), {
    width: 40,
    height: 40,
    fill: "none"
})
  , iee = Q(L("g", {
    stroke: "currentColor",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"
    }), g("path", {
        d: "M13.5 13.5l4.5 4.5"
    })]
}), {
    fill: "none",
    width: 22,
    height: 22,
    strokeWidth: 1.25
})
  , oee = Q(L("g", {
    strokeWidth: "1.5",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("rect", {
        x: "4",
        y: "4",
        width: "16",
        height: "16",
        rx: "2"
    })]
}), Ee)
  , see = Q(L("g", {
    strokeWidth: "1.5",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"
    })]
}), Ee)
  , aee = Q(L("g", {
    strokeWidth: "1.5",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("circle", {
        cx: "12",
        cy: "12",
        r: "9"
    })]
}), Ee)
  , lee = Q(L("g", {
    strokeWidth: "1.5",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("line", {
        x1: "5",
        y1: "12",
        x2: "19",
        y2: "12"
    }), g("line", {
        x1: "15",
        y1: "16",
        x2: "19",
        y2: "12"
    }), g("line", {
        x1: "15",
        y1: "8",
        x2: "19",
        y2: "12"
    })]
}), Ee)
  , cee = Q(g("path", {
    d: "M4.167 10h11.666",
    strokeWidth: "1.5"
}), Ye)
  , uee = Q(L("g", {
    strokeWidth: "1.25",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"
    }), g("path", {
        d: "M16 7h4"
    }), g("path", {
        d: "M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"
    })]
}), Ee)
  , ip = Q(L("g", {
    strokeWidth: "1.25",
    children: [g("path", {
        clipRule: "evenodd",
        d: "m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"
    }), g("path", {
        d: "m11.25 5.417 3.333 3.333"
    })]
}), Ye)
  , ID = Q(L("g", {
    strokeWidth: "1.5",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("line", {
        x1: "4",
        y1: "20",
        x2: "7",
        y2: "20"
    }), g("line", {
        x1: "14",
        y1: "20",
        x2: "21",
        y2: "20"
    }), g("line", {
        x1: "6.9",
        y1: "15",
        x2: "13.8",
        y2: "15"
    }), g("line", {
        x1: "10.2",
        y1: "6.3",
        x2: "16",
        y2: "20"
    }), g("polyline", {
        points: "5 20 11 4 13 4 20 20"
    })]
}), Ee)
  , dee = Q(L("g", {
    strokeWidth: "1.25",
    children: [g("path", {
        d: "M12.5 6.667h.01"
    }), g("path", {
        d: "M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"
    }), g("path", {
        d: "m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"
    }), g("path", {
        d: "m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"
    })]
}), Ye)
  , fee = Q(L("g", {
    strokeWidth: "1.5",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"
    }), g("path", {
        d: "M18 13.3l-6.3 -6.3"
    })]
}), Ee)
  , jk = Q(g("path", {
    strokeWidth: "1.25",
    d: "M10 4.167v11.666M4.167 10h11.666"
}), Ye)
  , Kk = Q(g("path", {
    d: "M5 10h10",
    strokeWidth: "1.25"
}), Ye)
  , hee = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M21 21l-6 -6"
    }), g("path", {
        d: "M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"
    }), g("path", {
        d: "M3 4v4h4"
    })]
}), Ee)
  , hf = Q(g("path", {
    strokeWidth: "1.25",
    d: "M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"
}), Ye)
  , gee = Q(L("g", {
    strokeWidth: "1.25",
    children: [g("polyline", {
        points: "12 16 18 10 12 4"
    }), g("polyline", {
        points: "8 4 2 10 8 16"
    })]
}), Ye)
  , e_ = Q(L("g", {
    strokeWidth: "1.25",
    children: [g("path", {
        d: "M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"
    }), g("path", {
        clipRule: "evenodd",
        d: "M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"
    })]
}), Ye)
  , t_ = Q(g("path", {
    clipRule: "evenodd",
    d: "M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",
    stroke: "currentColor"
}), Ye)
  , n_ = Q(g("g", {
    stroke: "currentColor",
    strokeLinejoin: "round",
    children: g("path", {
        d: "M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"
    })
}), {
    ...Ye,
    strokeWidth: 1.5
})
  , CD = Q(L("g", {
    strokeWidth: "1.5",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("line", {
        x1: "4",
        y1: "6",
        x2: "20",
        y2: "6"
    }), g("line", {
        x1: "4",
        y1: "12",
        x2: "20",
        y2: "12"
    }), g("line", {
        x1: "4",
        y1: "18",
        x2: "20",
        y2: "18"
    })]
}), Ee)
  , Nv = Q(g("path", {
    strokeWidth: "1.25",
    d: "M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"
}), Ye)
  , R6 = Q(L("g", {
    strokeWidth: "1.5",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("circle", {
        cx: "12",
        cy: "12",
        r: "9"
    }), g("line", {
        x1: "12",
        y1: "17",
        x2: "12",
        y2: "17.01"
    }), g("path", {
        d: "M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"
    })]
}), Ee)
  , pee = Q(L("g", {
    strokeWidth: "1.25",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("circle", {
        cx: "12",
        cy: "12",
        r: "9"
    }), g("line", {
        x1: "12",
        y1: "17",
        x2: "12",
        y2: "17.01"
    }), g("path", {
        d: "M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"
    })]
}), Ee)
  , Xk = Q(g("path", {
    strokeWidth: "1.25",
    d: "M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"
}), Ye)
  , D6 = Q(g("path", {
    d: "M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",
    strokeWidth: "1.25"
}), Ye)
  , kD = Q(L("g", {
    strokeWidth: "1.25",
    children: [g("path", {
        d: "M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"
    }), g("path", {
        d: "M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"
    })]
}), Ye)
  , TD = Q(L("g", {
    strokeWidth: "1.25",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M4 4l11.733 16h4.267l-11.733 -16z"
    }), g("path", {
        d: "M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"
    })]
}), Ee)
  , mee = Q(g("polyline", {
    fill: "none",
    stroke: "currentColor",
    points: "20 6 9 17 4 12"
}), {
    width: 24,
    height: 24
})
  , l2 = Q(L("g", {
    strokeWidth: "1.25",
    children: [g("path", {
        d: "M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"
    }), g("path", {
        d: "M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"
    })]
}), Ye)
  , vee = Q("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z", {
    width: 448,
    height: 512
})
  , yee = Q("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z", {
    width: 448,
    height: 512
})
  , O6 = Q(g("path", {
    d: "m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",
    strokeWidth: "1.25"
}), Ye);
Q("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z", {
    width: 384,
    height: 512
});
const wee = Q("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z")
  , RE = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"
    }), g("path", {
        d: "M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"
    }), g("path", {
        d: "M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"
    })]
}), Ee)
  , AD = Q(L("g", {
    strokeWidth: "1.25",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M15 8h.01"
    }), g("path", {
        d: "M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"
    }), g("path", {
        d: "M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"
    }), g("path", {
        d: "M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"
    }), g("path", {
        d: "M19 16v6"
    }), g("path", {
        d: "M22 19l-3 3l-3 -3"
    })]
}), Ee)
  , Eee = Q("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z", {
    width: 512,
    height: 512
});
Q("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z", {
    width: 448,
    height: 512
});
Q("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z", {
    width: 448,
    height: 512
});
const bee = Q("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");
Q("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");
const Zk = Q(g("path", {
    d: "M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",
    strokeWidth: "1.25"
}), Ye)
  , qk = Q(g("path", {
    d: "M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",
    strokeWidth: "1.25"
}), Ye)
  , _ee = Q("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z", {
    mirror: !0
})
  , N6 = Q(g("path", {
    d: "M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",
    strokeWidth: "1.5"
}), Ye)
  , xee = Q("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z")
  , See = Q("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z", {
    width: 24,
    height: 24
})
  , Iee = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"
    }), g("path", {
        d: "M12 14v-11"
    }), g("path", {
        d: "M9 6l3 -3l3 3"
    })]
}), Ee)
  , Cee = Q(L(Se, {
    children: [g("path", {
        fill: "currentColor",
        d: "M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"
    }), g("path", {
        stroke: "currentColor",
        fill: "currentColor",
        d: "M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"
    })]
}), {
    width: 64,
    height: 64
});
Q(g("path", {
    stroke: "currentColor",
    strokeWidth: "40",
    fill: "currentColor",
    d: "M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"
}), {
    width: 1024
});
const MD = L("g", {
    strokeWidth: 1.5,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M12 10l0 10"
    }), g("path", {
        d: "M12 10l4 4"
    }), g("path", {
        d: "M12 10l-4 4"
    }), g("path", {
        d: "M4 4l16 0"
    })]
})
  , LD = L("g", {
    strokeWidth: 1.5,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M12 5l0 14"
    }), g("path", {
        d: "M16 9l-4 -4"
    }), g("path", {
        d: "M8 9l4 -4"
    })]
})
  , Qk = Q(LD, Ee)
  , Jk = Q(LD, {
    ...Ee,
    style: {
        transform: "rotate(180deg)"
    }
})
  , eT = Q(MD, Ee)
  , tT = Q(MD, {
    ...Ee,
    style: {
        transform: "rotate(180deg)"
    }
})
  , nT = Q(L(Se, {
    children: [L("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        children: [g("path", {
            d: "M3.333 3.333h13.334",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), g("path", {
            d: "M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"
        })]
    }), g("defs", {
        children: g("clipPath", {
            id: "a",
            children: g("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), Ye)
  , rT = Q(L(Se, {
    children: [L("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        children: [g("path", {
            d: "M3.333 16.667h13.334",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), g("path", {
            d: "M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"
        })]
    }), g("defs", {
        children: g("clipPath", {
            id: "a",
            children: g("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), Ye)
  , iT = Q(L(Se, {
    children: [L("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        children: [g("path", {
            d: "M3.333 3.333v13.334",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), g("path", {
            d: "M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"
        })]
    }), g("defs", {
        children: g("clipPath", {
            id: "a",
            children: g("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), Ye)
  , oT = Q(L(Se, {
    children: [L("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        children: [g("path", {
            d: "M16.667 3.333v13.334",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), g("path", {
            d: "M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"
        })]
    }), g("defs", {
        children: g("clipPath", {
            id: "a",
            children: g("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), Ye)
  , kee = Q(L(Se, {
    children: [L("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        children: [g("path", {
            d: "M16.667 3.333v13.334M3.333 3.333v13.334",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), g("path", {
            d: "M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"
        })]
    }), g("defs", {
        children: g("clipPath", {
            id: "a",
            children: g("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), Ye)
  , Tee = Q(L(Se, {
    children: [L("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        children: [g("path", {
            d: "M3.333 3.333h13.334M3.333 16.667h13.334",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), g("path", {
            d: "M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"
        })]
    }), g("defs", {
        children: g("clipPath", {
            id: "a",
            children: g("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), Ye)
  , sT = Q(L("g", {
    stroke: "currentColor",
    strokeWidth: "1.25",
    children: [g("path", {
        d: "M1.667 10h2.916",
        strokeLinecap: "round",
        strokeLinejoin: "round"
    }), g("path", {
        d: "M8.333 10h3.334",
        strokeLinejoin: "round"
    }), g("path", {
        d: "M15.417 10h2.916",
        strokeLinecap: "round",
        strokeLinejoin: "round"
    }), g("path", {
        d: "M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"
    })]
}), Ye)
  , aT = Q(L("g", {
    stroke: "currentColor",
    strokeWidth: "1.25",
    children: [g("path", {
        d: "M10 18.333v-2.916",
        strokeLinecap: "round",
        strokeLinejoin: "round"
    }), g("path", {
        d: "M10 11.667V8.333",
        strokeLinejoin: "round"
    }), g("path", {
        d: "M10 4.583V1.667",
        strokeLinecap: "round",
        strokeLinejoin: "round"
    }), g("path", {
        d: "M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"
    })]
}), Ye)
  , F6 = Q(L("g", {
    strokeWidth: "1.5",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("circle", {
        cx: "9",
        cy: "7",
        r: "4"
    }), g("path", {
        d: "M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"
    }), g("path", {
        d: "M16 3.13a4 4 0 0 1 0 7.75"
    }), g("path", {
        d: "M21 21v-2a4 4 0 0 0 -3 -3.85"
    })]
}), Ee);
Q("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");
Q("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");
const Df = Q(L(Se, {
    children: [g("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        strokeLinecap: "round",
        strokeLinejoin: "round",
        children: g("path", {
            d: "M15 5 5 15M5 5l10 10"
        })
    }), g("defs", {
        children: g("clipPath", {
            id: "a",
            children: g("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), Ye);
Q("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z", {
    mirror: !0
});
const Aee = Q("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z", {
    width: 24
});
Q("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z", {
    width: 384,
    height: 512
});
const lT = ve.memo(({theme: e})=>Q(L(Se, {
    children: [g("path", {
        d: "M25 26H111V111H25",
        fill: Fo()
    }), g("path", {
        d: "M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",
        stroke: Fo(),
        strokeWidth: "2"
    }), g("path", {
        d: "M100 100H160V160H100",
        fill: Fo()
    }), g("path", {
        d: "M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",
        stroke: Fo(),
        strokeWidth: "2"
    }), L("g", {
        fill: xD(e),
        stroke: Fo(),
        strokeWidth: "6",
        children: [g("rect", {
            x: "2.5",
            y: "2.5",
            width: "30",
            height: "30"
        }), g("rect", {
            x: "2.5",
            y: "149.5",
            width: "30",
            height: "30"
        }), g("rect", {
            x: "147.5",
            y: "149.5",
            width: "30",
            height: "30"
        }), g("rect", {
            x: "147.5",
            y: "2.5",
            width: "30",
            height: "30"
        })]
    })]
}), {
    width: 182,
    height: 182,
    mirror: !0
}))
  , cT = ve.memo(({theme: e})=>Q(L(Se, {
    children: [g("path", {
        d: "M25 26H111V111H25",
        fill: Fo()
    }), g("path", {
        d: "M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",
        stroke: Fo(),
        strokeWidth: "2"
    }), g("path", {
        d: "M100 100H160V160H100",
        fill: Fo()
    }), g("path", {
        d: "M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",
        stroke: Fo(),
        strokeWidth: "2"
    }), L("g", {
        fill: xD(e),
        stroke: Fo(),
        strokeWidth: "6",
        children: [g("rect", {
            x: "2.5",
            y: "2.5",
            width: "30",
            height: "30"
        }), g("rect", {
            x: "78.5",
            y: "149.5",
            width: "30",
            height: "30"
        }), g("rect", {
            x: "147.5",
            y: "149.5",
            width: "30",
            height: "30"
        }), g("rect", {
            x: "147.5",
            y: "78.5",
            width: "30",
            height: "30"
        }), g("rect", {
            x: "105.5",
            y: "2.5",
            width: "30",
            height: "30"
        }), g("rect", {
            x: "2.5",
            y: "102.5",
            width: "30",
            height: "30"
        })]
    })]
}), {
    width: 182,
    height: 182,
    mirror: !0
}))
  , Mee = Q(g("g", {
    strokeWidth: 1.25,
    children: g("path", {
        d: "M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"
    })
}), Ye)
  , Lee = Q(L(Se, {
    children: [g("path", {
        d: "M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",
        stroke: "currentColor",
        strokeWidth: "1.25"
    }), g("mask", {
        id: "FillHachureIcon",
        style: {
            maskType: "alpha"
        },
        maskUnits: "userSpaceOnUse",
        x: 2,
        y: 2,
        width: 16,
        height: 16,
        children: g("path", {
            d: "M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",
            fill: "currentColor",
            stroke: "currentColor",
            strokeWidth: "1.25"
        })
    }), g("g", {
        mask: "url(#FillHachureIcon)",
        children: g("path", {
            d: "M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",
            stroke: "currentColor",
            strokeWidth: "1.25",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        })
    })]
}), Ye)
  , Pee = Q(L(Se, {
    children: [L("g", {
        clipPath: "url(#a)",
        children: [g("path", {
            d: "M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",
            stroke: "currentColor",
            strokeWidth: "1.25"
        }), g("mask", {
            id: "FillCrossHatchIcon",
            style: {
                maskType: "alpha"
            },
            maskUnits: "userSpaceOnUse",
            x: -1,
            y: -1,
            width: 22,
            height: 22,
            children: g("path", {
                d: "M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",
                stroke: "currentColor",
                strokeWidth: "1.25",
                strokeLinecap: "round",
                strokeLinejoin: "round"
            })
        }), g("g", {
            mask: "url(#FillCrossHatchIcon)",
            children: g("path", {
                d: "M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",
                fill: "currentColor"
            })
        })]
    }), g("defs", {
        children: g("clipPath", {
            id: "a",
            children: g("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), Ye)
  , Ree = Q(L(Se, {
    children: [g("g", {
        clipPath: "url(#a)",
        children: g("path", {
            d: "M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",
            stroke: "currentColor",
            strokeWidth: "1.25"
        })
    }), g("defs", {
        children: g("clipPath", {
            id: "a",
            children: g("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), {
    ...Ye,
    fill: "currentColor"
})
  , PD = Q(g(Se, {
    children: g("path", {
        d: "M4.167 10h11.666",
        stroke: "currentColor",
        strokeWidth: "1.25",
        strokeLinecap: "round",
        strokeLinejoin: "round"
    })
}), Ye)
  , Dee = Q(g("path", {
    d: "M5 10h10",
    stroke: "currentColor",
    strokeWidth: "2.5",
    strokeLinecap: "round",
    strokeLinejoin: "round"
}), Ye)
  , Oee = Q(g("path", {
    d: "M5 10h10",
    stroke: "currentColor",
    strokeWidth: "3.75",
    strokeLinecap: "round",
    strokeLinejoin: "round"
}), Ye);
ve.memo(({theme: e})=>Q(g("path", {
    d: "M6 10H34",
    stroke: Fo(),
    strokeWidth: 2,
    fill: "none",
    strokeLinecap: "round"
}), {
    width: 40,
    height: 20
}));
const Nee = Q(L("g", {
    strokeWidth: "2",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M5 12h2"
    }), g("path", {
        d: "M17 12h2"
    }), g("path", {
        d: "M11 12h2"
    })]
}), Ee)
  , Fee = Q(L("g", {
    strokeWidth: "2",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M4 12v.01"
    }), g("path", {
        d: "M8 12v.01"
    }), g("path", {
        d: "M12 12v.01"
    }), g("path", {
        d: "M16 12v.01"
    }), g("path", {
        d: "M20 12v.01"
    })]
}), Ee)
  , Bee = Q(g("path", {
    d: "M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",
    strokeWidth: "1.25"
}), Ye)
  , zee = Q(g("path", {
    d: "M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",
    strokeWidth: "1.25"
}), Ye)
  , $ee = Q(g("path", {
    d: "M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",
    strokeWidth: "1.25"
}), Ye)
  , Uee = Q(L("svg", {
    strokeWidth: "1.5",
    children: [g("path", {
        d: "M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"
    }), g("path", {
        d: "M13.3333 3.33331V3.34331"
    }), g("path", {
        d: "M16.6667 3.33331V3.34331"
    }), g("path", {
        d: "M16.6667 6.66669V6.67669"
    }), g("path", {
        d: "M16.6667 10V10.01"
    }), g("path", {
        d: "M3.33334 13.3333V13.3433"
    }), g("path", {
        d: "M16.6667 13.3333V13.3433"
    }), g("path", {
        d: "M3.33334 16.6667V16.6767"
    }), g("path", {
        d: "M6.66666 16.6667V16.6767"
    }), g("path", {
        d: "M10 16.6667V16.6767"
    }), g("path", {
        d: "M13.3333 16.6667V16.6767"
    }), g("path", {
        d: "M16.6667 16.6667V16.6767"
    })]
}), Ye)
  , Hee = Q(L("g", {
    strokeWidth: "1.5",
    stroke: "currentColor",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M4 12v-4a4 4 0 0 1 4 -4h4"
    }), g("line", {
        x1: "16",
        y1: "4",
        x2: "16",
        y2: "4.01"
    }), g("line", {
        x1: "20",
        y1: "4",
        x2: "20",
        y2: "4.01"
    }), g("line", {
        x1: "20",
        y1: "8",
        x2: "20",
        y2: "8.01"
    }), g("line", {
        x1: "20",
        y1: "12",
        x2: "20",
        y2: "12.01"
    }), g("line", {
        x1: "4",
        y1: "16",
        x2: "4",
        y2: "16.01"
    }), g("line", {
        x1: "20",
        y1: "16",
        x2: "20",
        y2: "16.01"
    }), g("line", {
        x1: "4",
        y1: "20",
        x2: "4",
        y2: "20.01"
    }), g("line", {
        x1: "8",
        y1: "20",
        x2: "8",
        y2: "20.01"
    }), g("line", {
        x1: "12",
        y1: "20",
        x2: "12",
        y2: "20.01"
    }), g("line", {
        x1: "16",
        y1: "20",
        x2: "16",
        y2: "20.01"
    }), g("line", {
        x1: "20",
        y1: "20",
        x2: "20",
        y2: "20.01"
    })]
}), Ee)
  , Wee = Q(g("path", {
    d: "M6 10H34",
    stroke: "currentColor",
    strokeWidth: 2,
    fill: "none"
}), {
    width: 40,
    height: 20
})
  , Gee = ve.memo(({flip: e=!1})=>Q(L("g", {
    transform: e ? "translate(40, 0) scale(-1, 1)" : "",
    stroke: "currentColor",
    strokeWidth: 2,
    fill: "none",
    children: [g("path", {
        d: "M34 10H6M34 10L27 5M34 10L27 15"
    }), g("path", {
        d: "M27.5 5L34.5 10L27.5 15"
    })]
}), {
    width: 40,
    height: 20
}))
  , uT = ve.memo(({flip: e=!1})=>Q(L("g", {
    stroke: "currentColor",
    fill: "currentColor",
    transform: e ? "translate(40, 0) scale(-1, 1)" : "",
    children: [g("path", {
        d: "M32 10L6 10",
        strokeWidth: 2
    }), g("circle", {
        r: "4",
        transform: "matrix(-1 0 0 1 30 10)"
    })]
}), {
    width: 40,
    height: 20
}))
  , Vee = ve.memo(({flip: e=!1})=>Q(L("g", {
    stroke: "currentColor",
    fill: "none",
    transform: e ? "translate(40, 0) scale(-1, 1)" : "",
    strokeWidth: 2,
    children: [g("path", {
        d: "M26 10L6 10"
    }), g("circle", {
        r: "4",
        transform: "matrix(-1 0 0 1 30 10)"
    })]
}), {
    width: 40,
    height: 20
}))
  , Yee = ve.memo(({flip: e=!1})=>Q(g("g", {
    transform: e ? "translate(40, 0) scale(-1, 1)" : "",
    children: g("path", {
        d: "M34 10H5.99996M34 10L34 5M34 10L34 15",
        stroke: "currentColor",
        strokeWidth: 2,
        fill: "none"
    })
}), {
    width: 40,
    height: 20
}))
  , jee = ve.memo(({flip: e=!1})=>Q(L("g", {
    stroke: "currentColor",
    fill: "currentColor",
    transform: e ? "translate(40, 0) scale(-1, 1)" : "",
    children: [g("path", {
        d: "M32 10L6 10",
        strokeWidth: 2
    }), g("path", {
        d: "M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"
    })]
}), {
    width: 40,
    height: 20
}))
  , Kee = ve.memo(({flip: e=!1})=>Q(L("g", {
    stroke: "currentColor",
    fill: "none",
    transform: e ? "translate(40, 0) scale(-1, 1)" : "",
    strokeWidth: 2,
    strokeLinejoin: "round",
    children: [g("path", {
        d: "M6,9.5H27"
    }), g("path", {
        d: "M27,5L34,10L27,14Z",
        fill: "none"
    })]
}), {
    width: 40,
    height: 20
}))
  , Xee = ve.memo(({flip: e=!1})=>Q(L("g", {
    stroke: "currentColor",
    fill: "currentColor",
    transform: e ? "translate(40, 0) scale(-1, 1)" : "",
    strokeLinejoin: "round",
    strokeWidth: 2,
    children: [g("path", {
        d: "M6,9.5H20"
    }), g("path", {
        d: "M27,5L34,10L27,14L20,9.5Z"
    })]
}), {
    width: 40,
    height: 20
}))
  , Zee = ve.memo(({flip: e=!1})=>Q(L("g", {
    stroke: "currentColor",
    fill: "none",
    transform: e ? "translate(40, 0) scale(-1, 1)" : "",
    strokeLinejoin: "round",
    strokeWidth: 2,
    children: [g("path", {
        d: "M6,9.5H20"
    }), g("path", {
        d: "M27,5L34,10L27,14L20,9.5Z"
    })]
}), {
    width: 40,
    height: 20
}))
  , qee = Q(L(Se, {
    children: [g("g", {
        clipPath: "url(#a)",
        children: g("path", {
            d: "M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",
            stroke: "currentColor",
            strokeWidth: "1.25",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        })
    }), g("defs", {
        children: g("clipPath", {
            id: "a",
            children: g("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), Ye)
  , Qee = Q(L(Se, {
    children: [g("g", {
        clipPath: "url(#a)",
        children: g("path", {
            d: "M5 16.667V3.333L10 15l5-11.667v13.334",
            stroke: "currentColor",
            strokeWidth: "1.25",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        })
    }), g("defs", {
        children: g("clipPath", {
            id: "a",
            children: g("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), Ye)
  , Jee = Q(L(Se, {
    children: [g("g", {
        clipPath: "url(#a)",
        children: g("path", {
            d: "M5.833 3.333v13.334h8.334",
            stroke: "currentColor",
            strokeWidth: "1.25",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        })
    }), g("defs", {
        children: g("clipPath", {
            id: "a",
            children: g("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), Ye)
  , ete = Q(g(Se, {
    children: g("path", {
        d: "m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",
        stroke: "currentColor",
        strokeWidth: "1.25",
        strokeLinecap: "round",
        strokeLinejoin: "round"
    })
}), Ye)
  , Fv = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M3 7v-2h13v2"
    }), g("path", {
        d: "M10 5v14"
    }), g("path", {
        d: "M12 19h-4"
    }), g("path", {
        d: "M15 13v-1h6v1"
    }), g("path", {
        d: "M18 12v7"
    }), g("path", {
        d: "M17 19h2"
    })]
}), Ee)
  , tte = Q(g(Se, {
    children: L("g", {
        stroke: "currentColor",
        strokeWidth: "1.25",
        strokeLinecap: "round",
        strokeLinejoin: "round",
        children: [g("path", {
            stroke: "none",
            d: "M0 0h24v24H0z",
            fill: "none"
        }), g("path", {
            d: "M7 12h10"
        }), g("path", {
            d: "M7 5v14"
        }), g("path", {
            d: "M17 5v14"
        }), g("path", {
            d: "M15 19h4"
        }), g("path", {
            d: "M15 5h4"
        }), g("path", {
            d: "M5 19h4"
        }), g("path", {
            d: "M5 5h4"
        })]
    })
}), Ee)
  , cm = Q(g(Se, {
    children: g("g", {
        stroke: "currentColor",
        strokeWidth: "1.25",
        strokeLinecap: "round",
        strokeLinejoin: "round",
        children: g("path", {
            d: "M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"
        })
    })
}), Ye)
  , r_ = Q(L(Se, {
    children: [g("g", {
        clipPath: "url(#a)",
        stroke: "currentColor",
        strokeWidth: "1.25",
        strokeLinecap: "round",
        strokeLinejoin: "round",
        children: g("path", {
            d: "M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"
        })
    }), g("defs", {
        children: g("clipPath", {
            id: "a",
            children: g("path", {
                fill: "#fff",
                d: "M0 0h20v20H0z"
            })
        })
    })]
}), Ye)
  , nte = Q(L("g", {
    stroke: "currentColor",
    fill: "none",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    strokeWidth: 2,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("line", {
        x1: "4",
        y1: "8",
        x2: "20",
        y2: "8"
    }), g("line", {
        x1: "4",
        y1: "12",
        x2: "12",
        y2: "12"
    }), g("line", {
        x1: "4",
        y1: "16",
        x2: "16",
        y2: "16"
    })]
}), Ee)
  , rte = Q(L("g", {
    stroke: "currentColor",
    fill: "none",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("line", {
        x1: "4",
        y1: "8",
        x2: "20",
        y2: "8"
    }), g("line", {
        x1: "8",
        y1: "12",
        x2: "16",
        y2: "12"
    }), g("line", {
        x1: "6",
        y1: "16",
        x2: "18",
        y2: "16"
    })]
}), Ee)
  , ite = Q(L("g", {
    stroke: "currentColor",
    fill: "none",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("line", {
        x1: "4",
        y1: "8",
        x2: "20",
        y2: "8"
    }), g("line", {
        x1: "10",
        y1: "12",
        x2: "20",
        y2: "12"
    }), g("line", {
        x1: "8",
        y1: "16",
        x2: "20",
        y2: "16"
    })]
}), Ee)
  , ote = ve.memo(({theme: e})=>Q(L("g", {
    strokeWidth: "1.5",
    stroke: "currentColor",
    fill: "none",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("line", {
        x1: "4",
        y1: "4",
        x2: "20",
        y2: "4"
    }), g("rect", {
        x: "9",
        y: "8",
        width: "6",
        height: "12",
        rx: "2"
    })]
}), Ee))
  , ste = ve.memo(({theme: e})=>Q(L("g", {
    strokeWidth: "2",
    stroke: "currentColor",
    fill: "none",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("line", {
        x1: "4",
        y1: "20",
        x2: "20",
        y2: "20"
    }), g("rect", {
        x: "9",
        y: "4",
        width: "6",
        height: "12",
        rx: "2"
    })]
}), Ee))
  , ate = ve.memo(({theme: e})=>Q(L("g", {
    strokeWidth: "1.5",
    stroke: "currentColor",
    fill: "none",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("line", {
        x1: "4",
        y1: "12",
        x2: "9",
        y2: "12"
    }), g("line", {
        x1: "15",
        y1: "12",
        x2: "20",
        y2: "12"
    }), g("rect", {
        x: "9",
        y: "6",
        width: "6",
        height: "12",
        rx: "2"
    })]
}), Ee))
  , RD = Q(L("g", {
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M21 19h-18l9 -15"
    }), g("path", {
        d: "M20.615 15.171h.015"
    }), g("path", {
        d: "M19.515 11.771h.015"
    }), g("path", {
        d: "M17.715 8.671h.015"
    }), g("path", {
        d: "M15.415 5.971h.015"
    })]
}), Ee)
  , lte = Q(g("path", {
    d: "M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",
    fill: "currentColor"
}), {
    width: 640,
    height: 512
});
Q(g("path", {
    d: "M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"
}));
const DD = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"
    }), g("path", {
        d: "M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"
    }), g("path", {
        d: "M14 5.5a1.5 1.5 0 0 1 3 0v6.5"
    }), g("path", {
        d: "M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"
    })]
}), Ee)
  , dT = Q(L(Se, {
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"
    }), g("path", {
        d: "M7 11l5 5l5 -5"
    }), g("path", {
        d: "M12 4l0 12"
    })]
}), Ee)
  , Bv = Q(L(Se, {
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"
    }), g("path", {
        d: "M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"
    })]
}), Ee)
  , cte = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"
    }), g("path", {
        d: "M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"
    }), g("path", {
        d: "M9.15 14.85l8.85 -10.85"
    }), g("path", {
        d: "M6 4l8.85 10.85"
    })]
}), Ee)
  , ute = Q(L(Se, {
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"
    }), g("path", {
        d: "M12 17l0 .01"
    }), g("path", {
        d: "M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"
    })]
}), Ee)
  , dte = Q(L(Se, {
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M7 4v16l13 -8z"
    })]
}), Ee)
  , fte = Q(L(Se, {
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",
        strokeWidth: "0",
        fill: "currentColor"
    })]
}), Ee)
  , OD = Q(L(Se, {
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M5 12l5 5l10 -10"
    })]
}), Ee)
  , hte = Q(L(Se, {
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"
    }), g("path", {
        d: "M12 9v4"
    }), g("path", {
        d: "M12 17h.01"
    })]
}), Ee)
  , gte = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M11 7l6 6"
    }), g("path", {
        d: "M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"
    })]
}), Ee)
  , pte = Q(L("g", {
    strokeWidth: 1.5,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M12 3l-4 7h8z"
    }), g("path", {
        d: "M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"
    }), g("path", {
        d: "M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"
    })]
}), Ee)
  , ND = Q(L("g", {
    strokeWidth: 1.5,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M4 7l16 0"
    }), g("path", {
        d: "M4 17l16 0"
    }), g("path", {
        d: "M7 4l0 16"
    }), g("path", {
        d: "M17 4l0 16"
    })]
}), Ee)
  , FD = Q(g("path", {
    fill: "currentColor",
    d: "M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"
}))
  , um = Q(L("g", {
    strokeWidth: "1.25",
    children: [g("path", {
        d: "M4.16602 10H15.8327"
    }), g("path", {
        d: "M12.5 13.3333L15.8333 10"
    }), g("path", {
        d: "M12.5 6.66666L15.8333 9.99999"
    })]
}), Ye)
  , BD = Q(L("g", {
    fill: "none",
    stroke: "currentColor",
    strokeWidth: "1.25",
    strokeLinecap: "round",
    strokeLinejoin: "round",
    transform: "rotate(90 10 10)",
    children: [g("path", {
        clipRule: "evenodd",
        d: "m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"
    }), g("path", {
        d: "m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"
    })]
}), 20)
  , B6 = Q(L("g", {
    stroke: "currentColor",
    fill: "none",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z"
    }), g("path", {
        d: "M6 21l15 -15l-3 -3l-15 15l3 3"
    }), g("path", {
        d: "M15 6l3 3"
    }), g("path", {
        d: "M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"
    }), g("path", {
        d: "M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"
    })]
}), Ee);
Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z"
    }), g("path", {
        d: "M6 21l15 -15l-3 -3l-15 15l3 3"
    }), g("path", {
        d: "M15 6l3 3"
    }), g("path", {
        d: "M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"
    }), g("path", {
        d: "M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"
    })]
}), Ee);
const i_ = Q(L("g", {
    stroke: "currentColor",
    fill: "none",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"
    }), g("path", {
        d: "M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"
    }), g("path", {
        d: "M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"
    }), g("path", {
        d: "M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"
    }), g("path", {
        d: "M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"
    }), g("path", {
        d: "M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"
    })]
}), Ee)
  , mte = Q(L("g", {
    stroke: "currentColor",
    fill: "none",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M4 8v-2a2 2 0 0 1 2 -2h2"
    }), g("path", {
        d: "M4 16v2a2 2 0 0 0 2 2h2"
    }), g("path", {
        d: "M16 4h2a2 2 0 0 1 2 2v2"
    }), g("path", {
        d: "M16 20h2a2 2 0 0 0 2 -2v-2"
    })]
}), Ee)
  , z6 = Q(L("g", {
    stroke: "currentColor",
    fill: "none",
    strokeWidth: 1.5,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"
    }), g("path", {
        d: "M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"
    })]
}), Ee)
  , vte = Q(L("g", {
    stroke: "currentColor",
    fill: "none",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M10.585 10.587a2 2 0 0 0 2.829 2.828"
    }), g("path", {
        d: "M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"
    }), g("path", {
        d: "M3 3l18 18"
    })]
}), Ee)
  , yte = Q(L("g", {
    stroke: "currentColor",
    fill: "none",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"
    }), g("path", {
        d: "M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"
    }), g("path", {
        d: "M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"
    }), g("path", {
        d: "M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"
    }), g("path", {
        d: "M6.5 16a3.5 3.5 0 0 1 0 -7h.5"
    }), g("path", {
        d: "M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"
    })]
}), Ee)
  , wte = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"
    }), g("path", {
        d: "M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"
    }), g("path", {
        d: "M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"
    }), g("path", {
        d: "M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"
    }), g("path", {
        d: "M6.5 16a3.5 3.5 0 0 1 0 -7h.5"
    }), g("path", {
        d: "M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"
    })]
}), Ee)
  , zD = Q(L("g", {
    strokeWidth: 1.5,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"
    }), g("path", {
        d: "M21 21l-6 -6"
    })]
}), Ee)
  , Ete = Q(L("g", {
    strokeWidth: 1.5,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M20.984 12.53a9 9 0 1 0 -7.552 8.355"
    }), g("path", {
        d: "M12 7v5l3 3"
    }), g("path", {
        d: "M19 16l-2 3h4l-2 3"
    })]
}), Ee)
  , bte = Q(L("g", {
    strokeWidth: 1.5,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"
    }), g("path", {
        d: "M5 10a7 7 0 0 0 14 0"
    }), g("path", {
        d: "M8 21l8 0"
    }), g("path", {
        d: "M12 17l0 4"
    })]
}), Ee)
  , _te = Q(L("g", {
    strokeWidth: 1.5,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M3 3l18 18"
    }), g("path", {
        d: "M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"
    }), g("path", {
        d: "M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"
    }), g("path", {
        d: "M8 21l8 0"
    }), g("path", {
        d: "M12 17l0 4"
    })]
}), Ee)
  , $D = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"
    })]
}), Ee)
  , xte = Q(L("g", {
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"
    }), g("path", {
        d: "M12 20v.01"
    }), g("path", {
        d: "M16 20v.01"
    }), g("path", {
        d: "M8 20v.01"
    }), g("path", {
        d: "M4 20v.01"
    }), g("path", {
        d: "M4 16v.01"
    }), g("path", {
        d: "M4 12v.01"
    }), g("path", {
        d: "M4 8v.01"
    }), g("path", {
        d: "M4 4v.01"
    }), g("path", {
        d: "M8 4v.01"
    }), g("path", {
        d: "M12 4v.01"
    }), g("path", {
        d: "M16 4v.01"
    }), g("path", {
        d: "M20 4v.01"
    }), g("path", {
        d: "M20 8v.01"
    }), g("path", {
        d: "M20 12v.01"
    }), g("path", {
        d: "M20 16v.01"
    }), g("path", {
        d: "M20 20v.01"
    })]
}), Ee)
  , Ste = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M5 3v18"
    }), g("path", {
        d: "M19 21v-18"
    }), g("path", {
        d: "M5 7h14"
    }), g("path", {
        d: "M5 15h14"
    }), g("path", {
        d: "M8 13v4"
    }), g("path", {
        d: "M11 13v4"
    }), g("path", {
        d: "M16 13v4"
    }), g("path", {
        d: "M14 5v4"
    }), g("path", {
        d: "M11 5v4"
    }), g("path", {
        d: "M8 5v4"
    }), g("path", {
        d: "M3 21h18"
    })]
}), Ee)
  , Ite = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M3 12l18 0"
    }), g("path", {
        d: "M7 16l10 0l-10 5l0 -5"
    }), g("path", {
        d: "M7 8l10 0l-10 -5l0 5"
    })]
}), Ee)
  , Cte = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M12 3l0 18"
    }), g("path", {
        d: "M16 7l0 10l5 0l-5 -10"
    }), g("path", {
        d: "M8 7l0 10l-5 0l5 -10"
    })]
}), Ee)
  , UD = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"
    }), g("path", {
        d: "M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"
    }), g("path", {
        d: "M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"
    })]
}), Ee)
  , $6 = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"
    }), g("path", {
        d: "M22 22l-3 -3"
    }), g("path", {
        d: "M6 18h-1a2 2 0 0 1 -2 -2v-1"
    }), g("path", {
        d: "M3 11v-1"
    }), g("path", {
        d: "M3 6v-1a2 2 0 0 1 2 -2h1"
    }), g("path", {
        d: "M10 3h1"
    }), g("path", {
        d: "M15 3h1a2 2 0 0 1 2 2v1"
    })]
}), Ee)
  , kte = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M14 3v4a1 1 0 0 0 1 1h4"
    }), g("path", {
        d: "M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"
    }), g("path", {
        d: "M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"
    }), g("path", {
        d: "M10 15l2 6l2 -6"
    }), g("path", {
        d: "M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"
    })]
}), Ee)
  , Tte = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M14 3v4a1 1 0 0 0 1 1h4"
    }), g("path", {
        d: "M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"
    }), g("path", {
        d: "M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"
    }), g("path", {
        d: "M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"
    }), g("path", {
        d: "M11 21v-6l3 6v-6"
    })]
}), Ee)
  , Ate = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"
    }), g("path", {
        d: "M4 8l5 0"
    }), g("path", {
        d: "M15 8l4 0"
    })]
}), Ee)
  , Mte = Q(L("g", {
    strokeWidth: 1.25,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"
    }), g("path", {
        d: "M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"
    }), g("path", {
        d: "M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"
    }), g("path", {
        d: "M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"
    }), g("path", {
        d: "M16.746 16.726a3 3 0 1 0 .252 -5.555"
    })]
}), Ee)
  , Lte = Q(L("g", {
    stroke: "currentColor",
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"
    })]
}), {
    ...Ee,
    strokeWidth: 1.5
})
  , HD = Q(L("g", {
    strokeWidth: 1.5,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"
    }), g("path", {
        d: "M21 12h-13l3 -3"
    }), g("path", {
        d: "M11 15l-3 -3"
    })]
}), Ee)
  , WD = Q(L("g", {
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"
    }), g("path", {
        d: "M10 9l5 3l-5 3z"
    })]
}), Ee)
  , Pte = Q(L("g", {
    strokeWidth: 1.5,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M3 6h18"
    }), g("path", {
        d: "M3 12h18"
    }), g("path", {
        d: "M3 18h18"
    }), g("path", {
        d: "M6 3v18"
    }), g("path", {
        d: "M12 3v18"
    }), g("path", {
        d: "M18 3v18"
    })]
}), Ee)
  , Rte = Q(L("g", {
    strokeWidth: 1.5,
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"
    }), g("path", {
        d: "M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"
    }), g("path", {
        d: "M17 5c-6.627 0 -12 5.373 -12 12"
    })]
}), Ee)
  , Dte = Q(L("g", {
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M6 18l12 -12"
    }), g("path", {
        d: "M18 10v-4h-4"
    })]
}), Ee)
  , Ote = Q(L("g", {
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7"
    }), g("path", {
        d: "M18 4l3 3l-3 3"
    })]
}), Ee)
  , Nte = Q(L("g", {
    children: [g("path", {
        d: "M16,12L20,9L16,6"
    }), g("path", {
        d: "M6 20c0 -6.075 4.925 -11 11 -11h3"
    })]
}), Ee)
  , Fte = Q(L("g", {
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M6 9l6 6l6 -6"
    })]
}), Ee)
  , Bte = Q(L("g", {
    children: [g("path", {
        stroke: "none",
        d: "M0 0h24v24H0z",
        fill: "none"
    }), g("path", {
        d: "M6 15l6 -6l6 6"
    })]
}), Ee)
  , cs = {
    [Lt.Excalifont]: {
        metrics: {
            unitsPerEm: 1e3,
            ascender: 886,
            descender: -374,
            lineHeight: 1.25
        },
        icon: ip
    },
    [Lt.Nunito]: {
        metrics: {
            unitsPerEm: 1e3,
            ascender: 1011,
            descender: -353,
            lineHeight: 1.35
        },
        icon: cm
    },
    [Lt["Lilita One"]]: {
        metrics: {
            unitsPerEm: 1e3,
            ascender: 923,
            descender: -220,
            lineHeight: 1.15
        },
        icon: tte
    },
    [Lt["Comic Shanns"]]: {
        metrics: {
            unitsPerEm: 1e3,
            ascender: 750,
            descender: -250,
            lineHeight: 1.25
        },
        icon: r_
    },
    [Lt.Virgil]: {
        metrics: {
            unitsPerEm: 1e3,
            ascender: 886,
            descender: -374,
            lineHeight: 1.25
        },
        icon: ip,
        deprecated: !0
    },
    [Lt.Helvetica]: {
        metrics: {
            unitsPerEm: 2048,
            ascender: 1577,
            descender: -471,
            lineHeight: 1.15
        },
        icon: cm,
        deprecated: !0,
        local: !0
    },
    [Lt.Cascadia]: {
        metrics: {
            unitsPerEm: 2048,
            ascender: 1900,
            descender: -480,
            lineHeight: 1.2
        },
        icon: r_,
        deprecated: !0
    },
    [Lt["Liberation Sans"]]: {
        metrics: {
            unitsPerEm: 2048,
            ascender: 1854,
            descender: -434,
            lineHeight: 1.15
        },
        icon: cm,
        serverSide: !0
    }
}
  , hc = {
    LATIN: "U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",
    LATIN_EXT: "U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",
    CYRILIC_EXT: "U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",
    CYRILIC: "U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",
    VIETNAMESE: "U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"
}
  , GD = "local:";
var Da = {};
(function(e) {
    var t = typeof Uint8Array < "u" && typeof Uint16Array < "u" && typeof Int32Array < "u";
    function n(o, s) {
        return Object.prototype.hasOwnProperty.call(o, s)
    }
    e.assign = function(o) {
        for (var s = Array.prototype.slice.call(arguments, 1); s.length; ) {
            var a = s.shift();
            if (a) {
                if (typeof a != "object")
                    throw new TypeError(a + "must be non-object");
                for (var l in a)
                    n(a, l) && (o[l] = a[l])
            }
        }
        return o
    }
    ,
    e.shrinkBuf = function(o, s) {
        return o.length === s ? o : o.subarray ? o.subarray(0, s) : (o.length = s,
        o)
    }
    ;
    var r = {
        arraySet: function(o, s, a, l, c) {
            if (s.subarray && o.subarray) {
                o.set(s.subarray(a, a + l), c);
                return
            }
            for (var u = 0; u < l; u++)
                o[c + u] = s[a + u]
        },
        flattenChunks: function(o) {
            var s, a, l, c, u, f;
            for (l = 0,
            s = 0,
            a = o.length; s < a; s++)
                l += o[s].length;
            for (f = new Uint8Array(l),
            c = 0,
            s = 0,
            a = o.length; s < a; s++)
                u = o[s],
                f.set(u, c),
                c += u.length;
            return f
        }
    }
      , i = {
        arraySet: function(o, s, a, l, c) {
            for (var u = 0; u < l; u++)
                o[c + u] = s[a + u]
        },
        flattenChunks: function(o) {
            return [].concat.apply([], o)
        }
    };
    e.setTyped = function(o) {
        o ? (e.Buf8 = Uint8Array,
        e.Buf16 = Uint16Array,
        e.Buf32 = Int32Array,
        e.assign(e, r)) : (e.Buf8 = Array,
        e.Buf16 = Array,
        e.Buf32 = Array,
        e.assign(e, i))
    }
    ,
    e.setTyped(t)
}
)(Da);
var Up = {}
  , Rs = {}
  , Of = {}
  , zte = Da
  , $te = 4
  , fT = 0
  , hT = 1
  , Ute = 2;
function Nf(e) {
    for (var t = e.length; --t >= 0; )
        e[t] = 0
}
var Hte = 0
  , VD = 1
  , Wte = 2
  , Gte = 3
  , Vte = 258
  , U6 = 29
  , Hp = 256
  , op = Hp + 1 + U6
  , Vd = 30
  , H6 = 19
  , YD = 2 * op + 1
  , Fc = 15
  , DE = 16
  , Yte = 7
  , W6 = 256
  , jD = 16
  , KD = 17
  , XD = 18
  , o_ = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]
  , dm = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]
  , jte = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]
  , ZD = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]
  , Kte = 512
  , na = new Array((op + 2) * 2);
Nf(na);
var pg = new Array(Vd * 2);
Nf(pg);
var sp = new Array(Kte);
Nf(sp);
var ap = new Array(Vte - Gte + 1);
Nf(ap);
var G6 = new Array(U6);
Nf(G6);
var c2 = new Array(Vd);
Nf(c2);
function OE(e, t, n, r, i) {
    this.static_tree = e,
    this.extra_bits = t,
    this.extra_base = n,
    this.elems = r,
    this.max_length = i,
    this.has_stree = e && e.length
}
var qD, QD, JD;
function NE(e, t) {
    this.dyn_tree = e,
    this.max_code = 0,
    this.stat_desc = t
}
function e9(e) {
    return e < 256 ? sp[e] : sp[256 + (e >>> 7)]
}
function lp(e, t) {
    e.pending_buf[e.pending++] = t & 255,
    e.pending_buf[e.pending++] = t >>> 8 & 255
}
function ai(e, t, n) {
    e.bi_valid > DE - n ? (e.bi_buf |= t << e.bi_valid & 65535,
    lp(e, e.bi_buf),
    e.bi_buf = t >> DE - e.bi_valid,
    e.bi_valid += n - DE) : (e.bi_buf |= t << e.bi_valid & 65535,
    e.bi_valid += n)
}
function vs(e, t, n) {
    ai(e, n[t * 2], n[t * 2 + 1])
}
function t9(e, t) {
    var n = 0;
    do
        n |= e & 1,
        e >>>= 1,
        n <<= 1;
    while (--t > 0);
    return n >>> 1
}
function Xte(e) {
    e.bi_valid === 16 ? (lp(e, e.bi_buf),
    e.bi_buf = 0,
    e.bi_valid = 0) : e.bi_valid >= 8 && (e.pending_buf[e.pending++] = e.bi_buf & 255,
    e.bi_buf >>= 8,
    e.bi_valid -= 8)
}
function Zte(e, t) {
    var n = t.dyn_tree, r = t.max_code, i = t.stat_desc.static_tree, o = t.stat_desc.has_stree, s = t.stat_desc.extra_bits, a = t.stat_desc.extra_base, l = t.stat_desc.max_length, c, u, f, h, m, v, y = 0;
    for (h = 0; h <= Fc; h++)
        e.bl_count[h] = 0;
    for (n[e.heap[e.heap_max] * 2 + 1] = 0,
    c = e.heap_max + 1; c < YD; c++)
        u = e.heap[c],
        h = n[n[u * 2 + 1] * 2 + 1] + 1,
        h > l && (h = l,
        y++),
        n[u * 2 + 1] = h,
        !(u > r) && (e.bl_count[h]++,
        m = 0,
        u >= a && (m = s[u - a]),
        v = n[u * 2],
        e.opt_len += v * (h + m),
        o && (e.static_len += v * (i[u * 2 + 1] + m)));
    if (y !== 0) {
        do {
            for (h = l - 1; e.bl_count[h] === 0; )
                h--;
            e.bl_count[h]--,
            e.bl_count[h + 1] += 2,
            e.bl_count[l]--,
            y -= 2
        } while (y > 0);
        for (h = l; h !== 0; h--)
            for (u = e.bl_count[h]; u !== 0; )
                f = e.heap[--c],
                !(f > r) && (n[f * 2 + 1] !== h && (e.opt_len += (h - n[f * 2 + 1]) * n[f * 2],
                n[f * 2 + 1] = h),
                u--)
    }
}
function n9(e, t, n) {
    var r = new Array(Fc + 1), i = 0, o, s;
    for (o = 1; o <= Fc; o++)
        r[o] = i = i + n[o - 1] << 1;
    for (s = 0; s <= t; s++) {
        var a = e[s * 2 + 1];
        a !== 0 && (e[s * 2] = t9(r[a]++, a))
    }
}
function qte() {
    var e, t, n, r, i, o = new Array(Fc + 1);
    for (n = 0,
    r = 0; r < U6 - 1; r++)
        for (G6[r] = n,
        e = 0; e < 1 << o_[r]; e++)
            ap[n++] = r;
    for (ap[n - 1] = r,
    i = 0,
    r = 0; r < 16; r++)
        for (c2[r] = i,
        e = 0; e < 1 << dm[r]; e++)
            sp[i++] = r;
    for (i >>= 7; r < Vd; r++)
        for (c2[r] = i << 7,
        e = 0; e < 1 << dm[r] - 7; e++)
            sp[256 + i++] = r;
    for (t = 0; t <= Fc; t++)
        o[t] = 0;
    for (e = 0; e <= 143; )
        na[e * 2 + 1] = 8,
        e++,
        o[8]++;
    for (; e <= 255; )
        na[e * 2 + 1] = 9,
        e++,
        o[9]++;
    for (; e <= 279; )
        na[e * 2 + 1] = 7,
        e++,
        o[7]++;
    for (; e <= 287; )
        na[e * 2 + 1] = 8,
        e++,
        o[8]++;
    for (n9(na, op + 1, o),
    e = 0; e < Vd; e++)
        pg[e * 2 + 1] = 5,
        pg[e * 2] = t9(e, 5);
    qD = new OE(na,o_,Hp + 1,op,Fc),
    QD = new OE(pg,dm,0,Vd,Fc),
    JD = new OE(new Array(0),jte,0,H6,Yte)
}
function r9(e) {
    var t;
    for (t = 0; t < op; t++)
        e.dyn_ltree[t * 2] = 0;
    for (t = 0; t < Vd; t++)
        e.dyn_dtree[t * 2] = 0;
    for (t = 0; t < H6; t++)
        e.bl_tree[t * 2] = 0;
    e.dyn_ltree[W6 * 2] = 1,
    e.opt_len = e.static_len = 0,
    e.last_lit = e.matches = 0
}
function i9(e) {
    e.bi_valid > 8 ? lp(e, e.bi_buf) : e.bi_valid > 0 && (e.pending_buf[e.pending++] = e.bi_buf),
    e.bi_buf = 0,
    e.bi_valid = 0
}
function Qte(e, t, n, r) {
    i9(e),
    lp(e, n),
    lp(e, ~n),
    zte.arraySet(e.pending_buf, e.window, t, n, e.pending),
    e.pending += n
}
function gT(e, t, n, r) {
    var i = t * 2
      , o = n * 2;
    return e[i] < e[o] || e[i] === e[o] && r[t] <= r[n]
}
function FE(e, t, n) {
    for (var r = e.heap[n], i = n << 1; i <= e.heap_len && (i < e.heap_len && gT(t, e.heap[i + 1], e.heap[i], e.depth) && i++,
    !gT(t, r, e.heap[i], e.depth)); )
        e.heap[n] = e.heap[i],
        n = i,
        i <<= 1;
    e.heap[n] = r
}
function pT(e, t, n) {
    var r, i, o = 0, s, a;
    if (e.last_lit !== 0)
        do
            r = e.pending_buf[e.d_buf + o * 2] << 8 | e.pending_buf[e.d_buf + o * 2 + 1],
            i = e.pending_buf[e.l_buf + o],
            o++,
            r === 0 ? vs(e, i, t) : (s = ap[i],
            vs(e, s + Hp + 1, t),
            a = o_[s],
            a !== 0 && (i -= G6[s],
            ai(e, i, a)),
            r--,
            s = e9(r),
            vs(e, s, n),
            a = dm[s],
            a !== 0 && (r -= c2[s],
            ai(e, r, a)));
        while (o < e.last_lit);
    vs(e, W6, t)
}
function s_(e, t) {
    var n = t.dyn_tree, r = t.stat_desc.static_tree, i = t.stat_desc.has_stree, o = t.stat_desc.elems, s, a, l = -1, c;
    for (e.heap_len = 0,
    e.heap_max = YD,
    s = 0; s < o; s++)
        n[s * 2] !== 0 ? (e.heap[++e.heap_len] = l = s,
        e.depth[s] = 0) : n[s * 2 + 1] = 0;
    for (; e.heap_len < 2; )
        c = e.heap[++e.heap_len] = l < 2 ? ++l : 0,
        n[c * 2] = 1,
        e.depth[c] = 0,
        e.opt_len--,
        i && (e.static_len -= r[c * 2 + 1]);
    for (t.max_code = l,
    s = e.heap_len >> 1; s >= 1; s--)
        FE(e, n, s);
    c = o;
    do
        s = e.heap[1],
        e.heap[1] = e.heap[e.heap_len--],
        FE(e, n, 1),
        a = e.heap[1],
        e.heap[--e.heap_max] = s,
        e.heap[--e.heap_max] = a,
        n[c * 2] = n[s * 2] + n[a * 2],
        e.depth[c] = (e.depth[s] >= e.depth[a] ? e.depth[s] : e.depth[a]) + 1,
        n[s * 2 + 1] = n[a * 2 + 1] = c,
        e.heap[1] = c++,
        FE(e, n, 1);
    while (e.heap_len >= 2);
    e.heap[--e.heap_max] = e.heap[1],
    Zte(e, t),
    n9(n, l, e.bl_count)
}
function mT(e, t, n) {
    var r, i = -1, o, s = t[0 * 2 + 1], a = 0, l = 7, c = 4;
    for (s === 0 && (l = 138,
    c = 3),
    t[(n + 1) * 2 + 1] = 65535,
    r = 0; r <= n; r++)
        o = s,
        s = t[(r + 1) * 2 + 1],
        !(++a < l && o === s) && (a < c ? e.bl_tree[o * 2] += a : o !== 0 ? (o !== i && e.bl_tree[o * 2]++,
        e.bl_tree[jD * 2]++) : a <= 10 ? e.bl_tree[KD * 2]++ : e.bl_tree[XD * 2]++,
        a = 0,
        i = o,
        s === 0 ? (l = 138,
        c = 3) : o === s ? (l = 6,
        c = 3) : (l = 7,
        c = 4))
}
function vT(e, t, n) {
    var r, i = -1, o, s = t[0 * 2 + 1], a = 0, l = 7, c = 4;
    for (s === 0 && (l = 138,
    c = 3),
    r = 0; r <= n; r++)
        if (o = s,
        s = t[(r + 1) * 2 + 1],
        !(++a < l && o === s)) {
            if (a < c)
                do
                    vs(e, o, e.bl_tree);
                while (--a !== 0);
            else
                o !== 0 ? (o !== i && (vs(e, o, e.bl_tree),
                a--),
                vs(e, jD, e.bl_tree),
                ai(e, a - 3, 2)) : a <= 10 ? (vs(e, KD, e.bl_tree),
                ai(e, a - 3, 3)) : (vs(e, XD, e.bl_tree),
                ai(e, a - 11, 7));
            a = 0,
            i = o,
            s === 0 ? (l = 138,
            c = 3) : o === s ? (l = 6,
            c = 3) : (l = 7,
            c = 4)
        }
}
function Jte(e) {
    var t;
    for (mT(e, e.dyn_ltree, e.l_desc.max_code),
    mT(e, e.dyn_dtree, e.d_desc.max_code),
    s_(e, e.bl_desc),
    t = H6 - 1; t >= 3 && e.bl_tree[ZD[t] * 2 + 1] === 0; t--)
        ;
    return e.opt_len += 3 * (t + 1) + 5 + 5 + 4,
    t
}
function ene(e, t, n, r) {
    var i;
    for (ai(e, t - 257, 5),
    ai(e, n - 1, 5),
    ai(e, r - 4, 4),
    i = 0; i < r; i++)
        ai(e, e.bl_tree[ZD[i] * 2 + 1], 3);
    vT(e, e.dyn_ltree, t - 1),
    vT(e, e.dyn_dtree, n - 1)
}
function tne(e) {
    var t = 4093624447, n;
    for (n = 0; n <= 31; n++,
    t >>>= 1)
        if (t & 1 && e.dyn_ltree[n * 2] !== 0)
            return fT;
    if (e.dyn_ltree[9 * 2] !== 0 || e.dyn_ltree[10 * 2] !== 0 || e.dyn_ltree[13 * 2] !== 0)
        return hT;
    for (n = 32; n < Hp; n++)
        if (e.dyn_ltree[n * 2] !== 0)
            return hT;
    return fT
}
var yT = !1;
function nne(e) {
    yT || (qte(),
    yT = !0),
    e.l_desc = new NE(e.dyn_ltree,qD),
    e.d_desc = new NE(e.dyn_dtree,QD),
    e.bl_desc = new NE(e.bl_tree,JD),
    e.bi_buf = 0,
    e.bi_valid = 0,
    r9(e)
}
function o9(e, t, n, r) {
    ai(e, (Hte << 1) + (r ? 1 : 0), 3),
    Qte(e, t, n)
}
function rne(e) {
    ai(e, VD << 1, 3),
    vs(e, W6, na),
    Xte(e)
}
function ine(e, t, n, r) {
    var i, o, s = 0;
    e.level > 0 ? (e.strm.data_type === Ute && (e.strm.data_type = tne(e)),
    s_(e, e.l_desc),
    s_(e, e.d_desc),
    s = Jte(e),
    i = e.opt_len + 3 + 7 >>> 3,
    o = e.static_len + 3 + 7 >>> 3,
    o <= i && (i = o)) : i = o = n + 5,
    n + 4 <= i && t !== -1 ? o9(e, t, n, r) : e.strategy === $te || o === i ? (ai(e, (VD << 1) + (r ? 1 : 0), 3),
    pT(e, na, pg)) : (ai(e, (Wte << 1) + (r ? 1 : 0), 3),
    ene(e, e.l_desc.max_code + 1, e.d_desc.max_code + 1, s + 1),
    pT(e, e.dyn_ltree, e.dyn_dtree)),
    r9(e),
    r && i9(e)
}
function one(e, t, n) {
    return e.pending_buf[e.d_buf + e.last_lit * 2] = t >>> 8 & 255,
    e.pending_buf[e.d_buf + e.last_lit * 2 + 1] = t & 255,
    e.pending_buf[e.l_buf + e.last_lit] = n & 255,
    e.last_lit++,
    t === 0 ? e.dyn_ltree[n * 2]++ : (e.matches++,
    t--,
    e.dyn_ltree[(ap[n] + Hp + 1) * 2]++,
    e.dyn_dtree[e9(t) * 2]++),
    e.last_lit === e.lit_bufsize - 1
}
Of._tr_init = nne;
Of._tr_stored_block = o9;
Of._tr_flush_block = ine;
Of._tr_tally = one;
Of._tr_align = rne;
function sne(e, t, n, r) {
    for (var i = e & 65535 | 0, o = e >>> 16 & 65535 | 0, s = 0; n !== 0; ) {
        s = n > 2e3 ? 2e3 : n,
        n -= s;
        do
            i = i + t[r++] | 0,
            o = o + i | 0;
        while (--s);
        i %= 65521,
        o %= 65521
    }
    return i | o << 16 | 0
}
var s9 = sne;
function ane() {
    for (var e, t = [], n = 0; n < 256; n++) {
        e = n;
        for (var r = 0; r < 8; r++)
            e = e & 1 ? 3988292384 ^ e >>> 1 : e >>> 1;
        t[n] = e
    }
    return t
}
var lne = ane();
function cne(e, t, n, r) {
    var i = lne
      , o = r + n;
    e ^= -1;
    for (var s = r; s < o; s++)
        e = e >>> 8 ^ i[(e ^ t[s]) & 255];
    return e ^ -1
}
var a9 = cne
  , V6 = {
    2: "need dictionary",
    1: "stream end",
    0: "",
    "-1": "file error",
    "-2": "stream error",
    "-3": "data error",
    "-4": "insufficient memory",
    "-5": "buffer error",
    "-6": "incompatible version"
}
  , $r = Da
  , ao = Of
  , l9 = s9
  , Qa = a9
  , une = V6
  , Tu = 0
  , dne = 1
  , fne = 3
  , Rl = 4
  , wT = 5
  , ys = 0
  , ET = 1
  , lo = -2
  , hne = -3
  , BE = -5
  , gne = -1
  , pne = 1
  , w0 = 2
  , mne = 3
  , vne = 4
  , yne = 0
  , wne = 2
  , zv = 8
  , Ene = 9
  , bne = 15
  , _ne = 8
  , xne = 29
  , Sne = 256
  , a_ = Sne + 1 + xne
  , Ine = 30
  , Cne = 19
  , kne = 2 * a_ + 1
  , Tne = 15
  , gt = 3
  , pl = 258
  , Uo = pl + gt + 1
  , Ane = 32
  , $v = 42
  , l_ = 69
  , fm = 73
  , hm = 91
  , gm = 103
  , Bc = 113
  , Xh = 666
  , zn = 1
  , Wp = 2
  , lu = 3
  , Ff = 4
  , Mne = 3;
function ml(e, t) {
    return e.msg = une[t],
    t
}
function bT(e) {
    return (e << 1) - (e > 4 ? 9 : 0)
}
function cl(e) {
    for (var t = e.length; --t >= 0; )
        e[t] = 0
}
function Ja(e) {
    var t = e.state
      , n = t.pending;
    n > e.avail_out && (n = e.avail_out),
    n !== 0 && ($r.arraySet(e.output, t.pending_buf, t.pending_out, n, e.next_out),
    e.next_out += n,
    t.pending_out += n,
    e.total_out += n,
    e.avail_out -= n,
    t.pending -= n,
    t.pending === 0 && (t.pending_out = 0))
}
function sr(e, t) {
    ao._tr_flush_block(e, e.block_start >= 0 ? e.block_start : -1, e.strstart - e.block_start, t),
    e.block_start = e.strstart,
    Ja(e.strm)
}
function wt(e, t) {
    e.pending_buf[e.pending++] = t
}
function Ch(e, t) {
    e.pending_buf[e.pending++] = t >>> 8 & 255,
    e.pending_buf[e.pending++] = t & 255
}
function Lne(e, t, n, r) {
    var i = e.avail_in;
    return i > r && (i = r),
    i === 0 ? 0 : (e.avail_in -= i,
    $r.arraySet(t, e.input, e.next_in, i, n),
    e.state.wrap === 1 ? e.adler = l9(e.adler, t, i, n) : e.state.wrap === 2 && (e.adler = Qa(e.adler, t, i, n)),
    e.next_in += i,
    e.total_in += i,
    i)
}
function c9(e, t) {
    var n = e.max_chain_length, r = e.strstart, i, o, s = e.prev_length, a = e.nice_match, l = e.strstart > e.w_size - Uo ? e.strstart - (e.w_size - Uo) : 0, c = e.window, u = e.w_mask, f = e.prev, h = e.strstart + pl, m = c[r + s - 1], v = c[r + s];
    e.prev_length >= e.good_match && (n >>= 2),
    a > e.lookahead && (a = e.lookahead);
    do
        if (i = t,
        !(c[i + s] !== v || c[i + s - 1] !== m || c[i] !== c[r] || c[++i] !== c[r + 1])) {
            r += 2,
            i++;
            do
                ;
            while (c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && c[++r] === c[++i] && r < h);
            if (o = pl - (h - r),
            r = h - pl,
            o > s) {
                if (e.match_start = t,
                s = o,
                o >= a)
                    break;
                m = c[r + s - 1],
                v = c[r + s]
            }
        }
    while ((t = f[t & u]) > l && --n !== 0);
    return s <= e.lookahead ? s : e.lookahead
}
function cu(e) {
    var t = e.w_size, n, r, i, o, s;
    do {
        if (o = e.window_size - e.lookahead - e.strstart,
        e.strstart >= t + (t - Uo)) {
            $r.arraySet(e.window, e.window, t, t, 0),
            e.match_start -= t,
            e.strstart -= t,
            e.block_start -= t,
            r = e.hash_size,
            n = r;
            do
                i = e.head[--n],
                e.head[n] = i >= t ? i - t : 0;
            while (--r);
            r = t,
            n = r;
            do
                i = e.prev[--n],
                e.prev[n] = i >= t ? i - t : 0;
            while (--r);
            o += t
        }
        if (e.strm.avail_in === 0)
            break;
        if (r = Lne(e.strm, e.window, e.strstart + e.lookahead, o),
        e.lookahead += r,
        e.lookahead + e.insert >= gt)
            for (s = e.strstart - e.insert,
            e.ins_h = e.window[s],
            e.ins_h = (e.ins_h << e.hash_shift ^ e.window[s + 1]) & e.hash_mask; e.insert && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[s + gt - 1]) & e.hash_mask,
            e.prev[s & e.w_mask] = e.head[e.ins_h],
            e.head[e.ins_h] = s,
            s++,
            e.insert--,
            !(e.lookahead + e.insert < gt)); )
                ;
    } while (e.lookahead < Uo && e.strm.avail_in !== 0)
}
function Pne(e, t) {
    var n = 65535;
    for (n > e.pending_buf_size - 5 && (n = e.pending_buf_size - 5); ; ) {
        if (e.lookahead <= 1) {
            if (cu(e),
            e.lookahead === 0 && t === Tu)
                return zn;
            if (e.lookahead === 0)
                break
        }
        e.strstart += e.lookahead,
        e.lookahead = 0;
        var r = e.block_start + n;
        if ((e.strstart === 0 || e.strstart >= r) && (e.lookahead = e.strstart - r,
        e.strstart = r,
        sr(e, !1),
        e.strm.avail_out === 0) || e.strstart - e.block_start >= e.w_size - Uo && (sr(e, !1),
        e.strm.avail_out === 0))
            return zn
    }
    return e.insert = 0,
    t === Rl ? (sr(e, !0),
    e.strm.avail_out === 0 ? lu : Ff) : (e.strstart > e.block_start && (sr(e, !1),
    e.strm.avail_out === 0),
    zn)
}
function zE(e, t) {
    for (var n, r; ; ) {
        if (e.lookahead < Uo) {
            if (cu(e),
            e.lookahead < Uo && t === Tu)
                return zn;
            if (e.lookahead === 0)
                break
        }
        if (n = 0,
        e.lookahead >= gt && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + gt - 1]) & e.hash_mask,
        n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h],
        e.head[e.ins_h] = e.strstart),
        n !== 0 && e.strstart - n <= e.w_size - Uo && (e.match_length = c9(e, n)),
        e.match_length >= gt)
            if (r = ao._tr_tally(e, e.strstart - e.match_start, e.match_length - gt),
            e.lookahead -= e.match_length,
            e.match_length <= e.max_lazy_match && e.lookahead >= gt) {
                e.match_length--;
                do
                    e.strstart++,
                    e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + gt - 1]) & e.hash_mask,
                    n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h],
                    e.head[e.ins_h] = e.strstart;
                while (--e.match_length !== 0);
                e.strstart++
            } else
                e.strstart += e.match_length,
                e.match_length = 0,
                e.ins_h = e.window[e.strstart],
                e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + 1]) & e.hash_mask;
        else
            r = ao._tr_tally(e, 0, e.window[e.strstart]),
            e.lookahead--,
            e.strstart++;
        if (r && (sr(e, !1),
        e.strm.avail_out === 0))
            return zn
    }
    return e.insert = e.strstart < gt - 1 ? e.strstart : gt - 1,
    t === Rl ? (sr(e, !0),
    e.strm.avail_out === 0 ? lu : Ff) : e.last_lit && (sr(e, !1),
    e.strm.avail_out === 0) ? zn : Wp
}
function td(e, t) {
    for (var n, r, i; ; ) {
        if (e.lookahead < Uo) {
            if (cu(e),
            e.lookahead < Uo && t === Tu)
                return zn;
            if (e.lookahead === 0)
                break
        }
        if (n = 0,
        e.lookahead >= gt && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + gt - 1]) & e.hash_mask,
        n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h],
        e.head[e.ins_h] = e.strstart),
        e.prev_length = e.match_length,
        e.prev_match = e.match_start,
        e.match_length = gt - 1,
        n !== 0 && e.prev_length < e.max_lazy_match && e.strstart - n <= e.w_size - Uo && (e.match_length = c9(e, n),
        e.match_length <= 5 && (e.strategy === pne || e.match_length === gt && e.strstart - e.match_start > 4096) && (e.match_length = gt - 1)),
        e.prev_length >= gt && e.match_length <= e.prev_length) {
            i = e.strstart + e.lookahead - gt,
            r = ao._tr_tally(e, e.strstart - 1 - e.prev_match, e.prev_length - gt),
            e.lookahead -= e.prev_length - 1,
            e.prev_length -= 2;
            do
                ++e.strstart <= i && (e.ins_h = (e.ins_h << e.hash_shift ^ e.window[e.strstart + gt - 1]) & e.hash_mask,
                n = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h],
                e.head[e.ins_h] = e.strstart);
            while (--e.prev_length !== 0);
            if (e.match_available = 0,
            e.match_length = gt - 1,
            e.strstart++,
            r && (sr(e, !1),
            e.strm.avail_out === 0))
                return zn
        } else if (e.match_available) {
            if (r = ao._tr_tally(e, 0, e.window[e.strstart - 1]),
            r && sr(e, !1),
            e.strstart++,
            e.lookahead--,
            e.strm.avail_out === 0)
                return zn
        } else
            e.match_available = 1,
            e.strstart++,
            e.lookahead--
    }
    return e.match_available && (r = ao._tr_tally(e, 0, e.window[e.strstart - 1]),
    e.match_available = 0),
    e.insert = e.strstart < gt - 1 ? e.strstart : gt - 1,
    t === Rl ? (sr(e, !0),
    e.strm.avail_out === 0 ? lu : Ff) : e.last_lit && (sr(e, !1),
    e.strm.avail_out === 0) ? zn : Wp
}
function Rne(e, t) {
    for (var n, r, i, o, s = e.window; ; ) {
        if (e.lookahead <= pl) {
            if (cu(e),
            e.lookahead <= pl && t === Tu)
                return zn;
            if (e.lookahead === 0)
                break
        }
        if (e.match_length = 0,
        e.lookahead >= gt && e.strstart > 0 && (i = e.strstart - 1,
        r = s[i],
        r === s[++i] && r === s[++i] && r === s[++i])) {
            o = e.strstart + pl;
            do
                ;
            while (r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && r === s[++i] && i < o);
            e.match_length = pl - (o - i),
            e.match_length > e.lookahead && (e.match_length = e.lookahead)
        }
        if (e.match_length >= gt ? (n = ao._tr_tally(e, 1, e.match_length - gt),
        e.lookahead -= e.match_length,
        e.strstart += e.match_length,
        e.match_length = 0) : (n = ao._tr_tally(e, 0, e.window[e.strstart]),
        e.lookahead--,
        e.strstart++),
        n && (sr(e, !1),
        e.strm.avail_out === 0))
            return zn
    }
    return e.insert = 0,
    t === Rl ? (sr(e, !0),
    e.strm.avail_out === 0 ? lu : Ff) : e.last_lit && (sr(e, !1),
    e.strm.avail_out === 0) ? zn : Wp
}
function Dne(e, t) {
    for (var n; ; ) {
        if (e.lookahead === 0 && (cu(e),
        e.lookahead === 0)) {
            if (t === Tu)
                return zn;
            break
        }
        if (e.match_length = 0,
        n = ao._tr_tally(e, 0, e.window[e.strstart]),
        e.lookahead--,
        e.strstart++,
        n && (sr(e, !1),
        e.strm.avail_out === 0))
            return zn
    }
    return e.insert = 0,
    t === Rl ? (sr(e, !0),
    e.strm.avail_out === 0 ? lu : Ff) : e.last_lit && (sr(e, !1),
    e.strm.avail_out === 0) ? zn : Wp
}
function rs(e, t, n, r, i) {
    this.good_length = e,
    this.max_lazy = t,
    this.nice_length = n,
    this.max_chain = r,
    this.func = i
}
var Pd;
Pd = [new rs(0,0,0,0,Pne), new rs(4,4,8,4,zE), new rs(4,5,16,8,zE), new rs(4,6,32,32,zE), new rs(4,4,16,16,td), new rs(8,16,32,32,td), new rs(8,16,128,128,td), new rs(8,32,128,256,td), new rs(32,128,258,1024,td), new rs(32,258,258,4096,td)];
function One(e) {
    e.window_size = 2 * e.w_size,
    cl(e.head),
    e.max_lazy_match = Pd[e.level].max_lazy,
    e.good_match = Pd[e.level].good_length,
    e.nice_match = Pd[e.level].nice_length,
    e.max_chain_length = Pd[e.level].max_chain,
    e.strstart = 0,
    e.block_start = 0,
    e.lookahead = 0,
    e.insert = 0,
    e.match_length = e.prev_length = gt - 1,
    e.match_available = 0,
    e.ins_h = 0
}
function Nne() {
    this.strm = null,
    this.status = 0,
    this.pending_buf = null,
    this.pending_buf_size = 0,
    this.pending_out = 0,
    this.pending = 0,
    this.wrap = 0,
    this.gzhead = null,
    this.gzindex = 0,
    this.method = zv,
    this.last_flush = -1,
    this.w_size = 0,
    this.w_bits = 0,
    this.w_mask = 0,
    this.window = null,
    this.window_size = 0,
    this.prev = null,
    this.head = null,
    this.ins_h = 0,
    this.hash_size = 0,
    this.hash_bits = 0,
    this.hash_mask = 0,
    this.hash_shift = 0,
    this.block_start = 0,
    this.match_length = 0,
    this.prev_match = 0,
    this.match_available = 0,
    this.strstart = 0,
    this.match_start = 0,
    this.lookahead = 0,
    this.prev_length = 0,
    this.max_chain_length = 0,
    this.max_lazy_match = 0,
    this.level = 0,
    this.strategy = 0,
    this.good_match = 0,
    this.nice_match = 0,
    this.dyn_ltree = new $r.Buf16(kne * 2),
    this.dyn_dtree = new $r.Buf16((2 * Ine + 1) * 2),
    this.bl_tree = new $r.Buf16((2 * Cne + 1) * 2),
    cl(this.dyn_ltree),
    cl(this.dyn_dtree),
    cl(this.bl_tree),
    this.l_desc = null,
    this.d_desc = null,
    this.bl_desc = null,
    this.bl_count = new $r.Buf16(Tne + 1),
    this.heap = new $r.Buf16(2 * a_ + 1),
    cl(this.heap),
    this.heap_len = 0,
    this.heap_max = 0,
    this.depth = new $r.Buf16(2 * a_ + 1),
    cl(this.depth),
    this.l_buf = 0,
    this.lit_bufsize = 0,
    this.last_lit = 0,
    this.d_buf = 0,
    this.opt_len = 0,
    this.static_len = 0,
    this.matches = 0,
    this.insert = 0,
    this.bi_buf = 0,
    this.bi_valid = 0
}
function u9(e) {
    var t;
    return !e || !e.state ? ml(e, lo) : (e.total_in = e.total_out = 0,
    e.data_type = wne,
    t = e.state,
    t.pending = 0,
    t.pending_out = 0,
    t.wrap < 0 && (t.wrap = -t.wrap),
    t.status = t.wrap ? $v : Bc,
    e.adler = t.wrap === 2 ? 0 : 1,
    t.last_flush = Tu,
    ao._tr_init(t),
    ys)
}
function d9(e) {
    var t = u9(e);
    return t === ys && One(e.state),
    t
}
function Fne(e, t) {
    return !e || !e.state || e.state.wrap !== 2 ? lo : (e.state.gzhead = t,
    ys)
}
function f9(e, t, n, r, i, o) {
    if (!e)
        return lo;
    var s = 1;
    if (t === gne && (t = 6),
    r < 0 ? (s = 0,
    r = -r) : r > 15 && (s = 2,
    r -= 16),
    i < 1 || i > Ene || n !== zv || r < 8 || r > 15 || t < 0 || t > 9 || o < 0 || o > vne)
        return ml(e, lo);
    r === 8 && (r = 9);
    var a = new Nne;
    return e.state = a,
    a.strm = e,
    a.wrap = s,
    a.gzhead = null,
    a.w_bits = r,
    a.w_size = 1 << a.w_bits,
    a.w_mask = a.w_size - 1,
    a.hash_bits = i + 7,
    a.hash_size = 1 << a.hash_bits,
    a.hash_mask = a.hash_size - 1,
    a.hash_shift = ~~((a.hash_bits + gt - 1) / gt),
    a.window = new $r.Buf8(a.w_size * 2),
    a.head = new $r.Buf16(a.hash_size),
    a.prev = new $r.Buf16(a.w_size),
    a.lit_bufsize = 1 << i + 6,
    a.pending_buf_size = a.lit_bufsize * 4,
    a.pending_buf = new $r.Buf8(a.pending_buf_size),
    a.d_buf = 1 * a.lit_bufsize,
    a.l_buf = 3 * a.lit_bufsize,
    a.level = t,
    a.strategy = o,
    a.method = n,
    d9(e)
}
function Bne(e, t) {
    return f9(e, t, zv, bne, _ne, yne)
}
function zne(e, t) {
    var n, r, i, o;
    if (!e || !e.state || t > wT || t < 0)
        return e ? ml(e, lo) : lo;
    if (r = e.state,
    !e.output || !e.input && e.avail_in !== 0 || r.status === Xh && t !== Rl)
        return ml(e, e.avail_out === 0 ? BE : lo);
    if (r.strm = e,
    n = r.last_flush,
    r.last_flush = t,
    r.status === $v)
        if (r.wrap === 2)
            e.adler = 0,
            wt(r, 31),
            wt(r, 139),
            wt(r, 8),
            r.gzhead ? (wt(r, (r.gzhead.text ? 1 : 0) + (r.gzhead.hcrc ? 2 : 0) + (r.gzhead.extra ? 4 : 0) + (r.gzhead.name ? 8 : 0) + (r.gzhead.comment ? 16 : 0)),
            wt(r, r.gzhead.time & 255),
            wt(r, r.gzhead.time >> 8 & 255),
            wt(r, r.gzhead.time >> 16 & 255),
            wt(r, r.gzhead.time >> 24 & 255),
            wt(r, r.level === 9 ? 2 : r.strategy >= w0 || r.level < 2 ? 4 : 0),
            wt(r, r.gzhead.os & 255),
            r.gzhead.extra && r.gzhead.extra.length && (wt(r, r.gzhead.extra.length & 255),
            wt(r, r.gzhead.extra.length >> 8 & 255)),
            r.gzhead.hcrc && (e.adler = Qa(e.adler, r.pending_buf, r.pending, 0)),
            r.gzindex = 0,
            r.status = l_) : (wt(r, 0),
            wt(r, 0),
            wt(r, 0),
            wt(r, 0),
            wt(r, 0),
            wt(r, r.level === 9 ? 2 : r.strategy >= w0 || r.level < 2 ? 4 : 0),
            wt(r, Mne),
            r.status = Bc);
        else {
            var s = zv + (r.w_bits - 8 << 4) << 8
              , a = -1;
            r.strategy >= w0 || r.level < 2 ? a = 0 : r.level < 6 ? a = 1 : r.level === 6 ? a = 2 : a = 3,
            s |= a << 6,
            r.strstart !== 0 && (s |= Ane),
            s += 31 - s % 31,
            r.status = Bc,
            Ch(r, s),
            r.strstart !== 0 && (Ch(r, e.adler >>> 16),
            Ch(r, e.adler & 65535)),
            e.adler = 1
        }
    if (r.status === l_)
        if (r.gzhead.extra) {
            for (i = r.pending; r.gzindex < (r.gzhead.extra.length & 65535) && !(r.pending === r.pending_buf_size && (r.gzhead.hcrc && r.pending > i && (e.adler = Qa(e.adler, r.pending_buf, r.pending - i, i)),
            Ja(e),
            i = r.pending,
            r.pending === r.pending_buf_size)); )
                wt(r, r.gzhead.extra[r.gzindex] & 255),
                r.gzindex++;
            r.gzhead.hcrc && r.pending > i && (e.adler = Qa(e.adler, r.pending_buf, r.pending - i, i)),
            r.gzindex === r.gzhead.extra.length && (r.gzindex = 0,
            r.status = fm)
        } else
            r.status = fm;
    if (r.status === fm)
        if (r.gzhead.name) {
            i = r.pending;
            do {
                if (r.pending === r.pending_buf_size && (r.gzhead.hcrc && r.pending > i && (e.adler = Qa(e.adler, r.pending_buf, r.pending - i, i)),
                Ja(e),
                i = r.pending,
                r.pending === r.pending_buf_size)) {
                    o = 1;
                    break
                }
                r.gzindex < r.gzhead.name.length ? o = r.gzhead.name.charCodeAt(r.gzindex++) & 255 : o = 0,
                wt(r, o)
            } while (o !== 0);
            r.gzhead.hcrc && r.pending > i && (e.adler = Qa(e.adler, r.pending_buf, r.pending - i, i)),
            o === 0 && (r.gzindex = 0,
            r.status = hm)
        } else
            r.status = hm;
    if (r.status === hm)
        if (r.gzhead.comment) {
            i = r.pending;
            do {
                if (r.pending === r.pending_buf_size && (r.gzhead.hcrc && r.pending > i && (e.adler = Qa(e.adler, r.pending_buf, r.pending - i, i)),
                Ja(e),
                i = r.pending,
                r.pending === r.pending_buf_size)) {
                    o = 1;
                    break
                }
                r.gzindex < r.gzhead.comment.length ? o = r.gzhead.comment.charCodeAt(r.gzindex++) & 255 : o = 0,
                wt(r, o)
            } while (o !== 0);
            r.gzhead.hcrc && r.pending > i && (e.adler = Qa(e.adler, r.pending_buf, r.pending - i, i)),
            o === 0 && (r.status = gm)
        } else
            r.status = gm;
    if (r.status === gm && (r.gzhead.hcrc ? (r.pending + 2 > r.pending_buf_size && Ja(e),
    r.pending + 2 <= r.pending_buf_size && (wt(r, e.adler & 255),
    wt(r, e.adler >> 8 & 255),
    e.adler = 0,
    r.status = Bc)) : r.status = Bc),
    r.pending !== 0) {
        if (Ja(e),
        e.avail_out === 0)
            return r.last_flush = -1,
            ys
    } else if (e.avail_in === 0 && bT(t) <= bT(n) && t !== Rl)
        return ml(e, BE);
    if (r.status === Xh && e.avail_in !== 0)
        return ml(e, BE);
    if (e.avail_in !== 0 || r.lookahead !== 0 || t !== Tu && r.status !== Xh) {
        var l = r.strategy === w0 ? Dne(r, t) : r.strategy === mne ? Rne(r, t) : Pd[r.level].func(r, t);
        if ((l === lu || l === Ff) && (r.status = Xh),
        l === zn || l === lu)
            return e.avail_out === 0 && (r.last_flush = -1),
            ys;
        if (l === Wp && (t === dne ? ao._tr_align(r) : t !== wT && (ao._tr_stored_block(r, 0, 0, !1),
        t === fne && (cl(r.head),
        r.lookahead === 0 && (r.strstart = 0,
        r.block_start = 0,
        r.insert = 0))),
        Ja(e),
        e.avail_out === 0))
            return r.last_flush = -1,
            ys
    }
    return t !== Rl ? ys : r.wrap <= 0 ? ET : (r.wrap === 2 ? (wt(r, e.adler & 255),
    wt(r, e.adler >> 8 & 255),
    wt(r, e.adler >> 16 & 255),
    wt(r, e.adler >> 24 & 255),
    wt(r, e.total_in & 255),
    wt(r, e.total_in >> 8 & 255),
    wt(r, e.total_in >> 16 & 255),
    wt(r, e.total_in >> 24 & 255)) : (Ch(r, e.adler >>> 16),
    Ch(r, e.adler & 65535)),
    Ja(e),
    r.wrap > 0 && (r.wrap = -r.wrap),
    r.pending !== 0 ? ys : ET)
}
function $ne(e) {
    var t;
    return !e || !e.state ? lo : (t = e.state.status,
    t !== $v && t !== l_ && t !== fm && t !== hm && t !== gm && t !== Bc && t !== Xh ? ml(e, lo) : (e.state = null,
    t === Bc ? ml(e, hne) : ys))
}
function Une(e, t) {
    var n = t.length, r, i, o, s, a, l, c, u;
    if (!e || !e.state || (r = e.state,
    s = r.wrap,
    s === 2 || s === 1 && r.status !== $v || r.lookahead))
        return lo;
    for (s === 1 && (e.adler = l9(e.adler, t, n, 0)),
    r.wrap = 0,
    n >= r.w_size && (s === 0 && (cl(r.head),
    r.strstart = 0,
    r.block_start = 0,
    r.insert = 0),
    u = new $r.Buf8(r.w_size),
    $r.arraySet(u, t, n - r.w_size, r.w_size, 0),
    t = u,
    n = r.w_size),
    a = e.avail_in,
    l = e.next_in,
    c = e.input,
    e.avail_in = n,
    e.next_in = 0,
    e.input = t,
    cu(r); r.lookahead >= gt; ) {
        i = r.strstart,
        o = r.lookahead - (gt - 1);
        do
            r.ins_h = (r.ins_h << r.hash_shift ^ r.window[i + gt - 1]) & r.hash_mask,
            r.prev[i & r.w_mask] = r.head[r.ins_h],
            r.head[r.ins_h] = i,
            i++;
        while (--o);
        r.strstart = i,
        r.lookahead = gt - 1,
        cu(r)
    }
    return r.strstart += r.lookahead,
    r.block_start = r.strstart,
    r.insert = r.lookahead,
    r.lookahead = 0,
    r.match_length = r.prev_length = gt - 1,
    r.match_available = 0,
    e.next_in = l,
    e.input = c,
    e.avail_in = a,
    r.wrap = s,
    ys
}
Rs.deflateInit = Bne;
Rs.deflateInit2 = f9;
Rs.deflateReset = d9;
Rs.deflateResetKeep = u9;
Rs.deflateSetHeader = Fne;
Rs.deflate = zne;
Rs.deflateEnd = $ne;
Rs.deflateSetDictionary = Une;
Rs.deflateInfo = "pako deflate (from Nodeca project)";
var Au = {}
  , Uv = Da
  , h9 = !0
  , g9 = !0;
try {
    String.fromCharCode.apply(null, [0])
} catch {
    h9 = !1
}
try {
    String.fromCharCode.apply(null, new Uint8Array(1))
} catch {
    g9 = !1
}
var cp = new Uv.Buf8(256);
for (var Xa = 0; Xa < 256; Xa++)
    cp[Xa] = Xa >= 252 ? 6 : Xa >= 248 ? 5 : Xa >= 240 ? 4 : Xa >= 224 ? 3 : Xa >= 192 ? 2 : 1;
cp[254] = cp[254] = 1;
Au.string2buf = function(e) {
    var t, n, r, i, o, s = e.length, a = 0;
    for (i = 0; i < s; i++)
        n = e.charCodeAt(i),
        (n & 64512) === 55296 && i + 1 < s && (r = e.charCodeAt(i + 1),
        (r & 64512) === 56320 && (n = 65536 + (n - 55296 << 10) + (r - 56320),
        i++)),
        a += n < 128 ? 1 : n < 2048 ? 2 : n < 65536 ? 3 : 4;
    for (t = new Uv.Buf8(a),
    o = 0,
    i = 0; o < a; i++)
        n = e.charCodeAt(i),
        (n & 64512) === 55296 && i + 1 < s && (r = e.charCodeAt(i + 1),
        (r & 64512) === 56320 && (n = 65536 + (n - 55296 << 10) + (r - 56320),
        i++)),
        n < 128 ? t[o++] = n : n < 2048 ? (t[o++] = 192 | n >>> 6,
        t[o++] = 128 | n & 63) : n < 65536 ? (t[o++] = 224 | n >>> 12,
        t[o++] = 128 | n >>> 6 & 63,
        t[o++] = 128 | n & 63) : (t[o++] = 240 | n >>> 18,
        t[o++] = 128 | n >>> 12 & 63,
        t[o++] = 128 | n >>> 6 & 63,
        t[o++] = 128 | n & 63);
    return t
}
;
function p9(e, t) {
    if (t < 65534 && (e.subarray && g9 || !e.subarray && h9))
        return String.fromCharCode.apply(null, Uv.shrinkBuf(e, t));
    for (var n = "", r = 0; r < t; r++)
        n += String.fromCharCode(e[r]);
    return n
}
Au.buf2binstring = function(e) {
    return p9(e, e.length)
}
;
Au.binstring2buf = function(e) {
    for (var t = new Uv.Buf8(e.length), n = 0, r = t.length; n < r; n++)
        t[n] = e.charCodeAt(n);
    return t
}
;
Au.buf2string = function(e, t) {
    var n, r, i, o, s = t || e.length, a = new Array(s * 2);
    for (r = 0,
    n = 0; n < s; ) {
        if (i = e[n++],
        i < 128) {
            a[r++] = i;
            continue
        }
        if (o = cp[i],
        o > 4) {
            a[r++] = 65533,
            n += o - 1;
            continue
        }
        for (i &= o === 2 ? 31 : o === 3 ? 15 : 7; o > 1 && n < s; )
            i = i << 6 | e[n++] & 63,
            o--;
        if (o > 1) {
            a[r++] = 65533;
            continue
        }
        i < 65536 ? a[r++] = i : (i -= 65536,
        a[r++] = 55296 | i >> 10 & 1023,
        a[r++] = 56320 | i & 1023)
    }
    return p9(a, r)
}
;
Au.utf8border = function(e, t) {
    var n;
    for (t = t || e.length,
    t > e.length && (t = e.length),
    n = t - 1; n >= 0 && (e[n] & 192) === 128; )
        n--;
    return n < 0 || n === 0 ? t : n + cp[e[n]] > t ? n : t
}
;
function Hne() {
    this.input = null,
    this.next_in = 0,
    this.avail_in = 0,
    this.total_in = 0,
    this.output = null,
    this.next_out = 0,
    this.avail_out = 0,
    this.total_out = 0,
    this.msg = "",
    this.state = null,
    this.data_type = 2,
    this.adler = 0
}
var m9 = Hne
  , mg = Rs
  , vg = Da
  , c_ = Au
  , u_ = V6
  , Wne = m9
  , v9 = Object.prototype.toString
  , Gne = 0
  , $E = 4
  , Yd = 0
  , _T = 1
  , xT = 2
  , Vne = -1
  , Yne = 0
  , jne = 8;
function uu(e) {
    if (!(this instanceof uu))
        return new uu(e);
    this.options = vg.assign({
        level: Vne,
        method: jne,
        chunkSize: 16384,
        windowBits: 15,
        memLevel: 8,
        strategy: Yne,
        to: ""
    }, e || {});
    var t = this.options;
    t.raw && t.windowBits > 0 ? t.windowBits = -t.windowBits : t.gzip && t.windowBits > 0 && t.windowBits < 16 && (t.windowBits += 16),
    this.err = 0,
    this.msg = "",
    this.ended = !1,
    this.chunks = [],
    this.strm = new Wne,
    this.strm.avail_out = 0;
    var n = mg.deflateInit2(this.strm, t.level, t.method, t.windowBits, t.memLevel, t.strategy);
    if (n !== Yd)
        throw new Error(u_[n]);
    if (t.header && mg.deflateSetHeader(this.strm, t.header),
    t.dictionary) {
        var r;
        if (typeof t.dictionary == "string" ? r = c_.string2buf(t.dictionary) : v9.call(t.dictionary) === "[object ArrayBuffer]" ? r = new Uint8Array(t.dictionary) : r = t.dictionary,
        n = mg.deflateSetDictionary(this.strm, r),
        n !== Yd)
            throw new Error(u_[n]);
        this._dict_set = !0
    }
}
uu.prototype.push = function(e, t) {
    var n = this.strm, r = this.options.chunkSize, i, o;
    if (this.ended)
        return !1;
    o = t === ~~t ? t : t === !0 ? $E : Gne,
    typeof e == "string" ? n.input = c_.string2buf(e) : v9.call(e) === "[object ArrayBuffer]" ? n.input = new Uint8Array(e) : n.input = e,
    n.next_in = 0,
    n.avail_in = n.input.length;
    do {
        if (n.avail_out === 0 && (n.output = new vg.Buf8(r),
        n.next_out = 0,
        n.avail_out = r),
        i = mg.deflate(n, o),
        i !== _T && i !== Yd)
            return this.onEnd(i),
            this.ended = !0,
            !1;
        (n.avail_out === 0 || n.avail_in === 0 && (o === $E || o === xT)) && (this.options.to === "string" ? this.onData(c_.buf2binstring(vg.shrinkBuf(n.output, n.next_out))) : this.onData(vg.shrinkBuf(n.output, n.next_out)))
    } while ((n.avail_in > 0 || n.avail_out === 0) && i !== _T);
    return o === $E ? (i = mg.deflateEnd(this.strm),
    this.onEnd(i),
    this.ended = !0,
    i === Yd) : (o === xT && (this.onEnd(Yd),
    n.avail_out = 0),
    !0)
}
;
uu.prototype.onData = function(e) {
    this.chunks.push(e)
}
;
uu.prototype.onEnd = function(e) {
    e === Yd && (this.options.to === "string" ? this.result = this.chunks.join("") : this.result = vg.flattenChunks(this.chunks)),
    this.chunks = [],
    this.err = e,
    this.msg = this.strm.msg
}
;
function Y6(e, t) {
    var n = new uu(t);
    if (n.push(e, !0),
    n.err)
        throw n.msg || u_[n.err];
    return n.result
}
function Kne(e, t) {
    return t = t || {},
    t.raw = !0,
    Y6(e, t)
}
function Xne(e, t) {
    return t = t || {},
    t.gzip = !0,
    Y6(e, t)
}
Up.Deflate = uu;
Up.deflate = Y6;
Up.deflateRaw = Kne;
Up.gzip = Xne;
var Gp = {}
  , Zo = {}
  , E0 = 30
  , Zne = 12
  , qne = function(t, n) {
    var r, i, o, s, a, l, c, u, f, h, m, v, y, E, b, _, x, C, P, M, A, I, O, N, $;
    r = t.state,
    i = t.next_in,
    N = t.input,
    o = i + (t.avail_in - 5),
    s = t.next_out,
    $ = t.output,
    a = s - (n - t.avail_out),
    l = s + (t.avail_out - 257),
    c = r.dmax,
    u = r.wsize,
    f = r.whave,
    h = r.wnext,
    m = r.window,
    v = r.hold,
    y = r.bits,
    E = r.lencode,
    b = r.distcode,
    _ = (1 << r.lenbits) - 1,
    x = (1 << r.distbits) - 1;
    e: do {
        y < 15 && (v += N[i++] << y,
        y += 8,
        v += N[i++] << y,
        y += 8),
        C = E[v & _];
        t: for (; ; ) {
            if (P = C >>> 24,
            v >>>= P,
            y -= P,
            P = C >>> 16 & 255,
            P === 0)
                $[s++] = C & 65535;
            else if (P & 16) {
                M = C & 65535,
                P &= 15,
                P && (y < P && (v += N[i++] << y,
                y += 8),
                M += v & (1 << P) - 1,
                v >>>= P,
                y -= P),
                y < 15 && (v += N[i++] << y,
                y += 8,
                v += N[i++] << y,
                y += 8),
                C = b[v & x];
                n: for (; ; ) {
                    if (P = C >>> 24,
                    v >>>= P,
                    y -= P,
                    P = C >>> 16 & 255,
                    P & 16) {
                        if (A = C & 65535,
                        P &= 15,
                        y < P && (v += N[i++] << y,
                        y += 8,
                        y < P && (v += N[i++] << y,
                        y += 8)),
                        A += v & (1 << P) - 1,
                        A > c) {
                            t.msg = "invalid distance too far back",
                            r.mode = E0;
                            break e
                        }
                        if (v >>>= P,
                        y -= P,
                        P = s - a,
                        A > P) {
                            if (P = A - P,
                            P > f && r.sane) {
                                t.msg = "invalid distance too far back",
                                r.mode = E0;
                                break e
                            }
                            if (I = 0,
                            O = m,
                            h === 0) {
                                if (I += u - P,
                                P < M) {
                                    M -= P;
                                    do
                                        $[s++] = m[I++];
                                    while (--P);
                                    I = s - A,
                                    O = $
                                }
                            } else if (h < P) {
                                if (I += u + h - P,
                                P -= h,
                                P < M) {
                                    M -= P;
                                    do
                                        $[s++] = m[I++];
                                    while (--P);
                                    if (I = 0,
                                    h < M) {
                                        P = h,
                                        M -= P;
                                        do
                                            $[s++] = m[I++];
                                        while (--P);
                                        I = s - A,
                                        O = $
                                    }
                                }
                            } else if (I += h - P,
                            P < M) {
                                M -= P;
                                do
                                    $[s++] = m[I++];
                                while (--P);
                                I = s - A,
                                O = $
                            }
                            for (; M > 2; )
                                $[s++] = O[I++],
                                $[s++] = O[I++],
                                $[s++] = O[I++],
                                M -= 3;
                            M && ($[s++] = O[I++],
                            M > 1 && ($[s++] = O[I++]))
                        } else {
                            I = s - A;
                            do
                                $[s++] = $[I++],
                                $[s++] = $[I++],
                                $[s++] = $[I++],
                                M -= 3;
                            while (M > 2);
                            M && ($[s++] = $[I++],
                            M > 1 && ($[s++] = $[I++]))
                        }
                    } else if (P & 64) {
                        t.msg = "invalid distance code",
                        r.mode = E0;
                        break e
                    } else {
                        C = b[(C & 65535) + (v & (1 << P) - 1)];
                        continue n
                    }
                    break
                }
            } else if (P & 64)
                if (P & 32) {
                    r.mode = Zne;
                    break e
                } else {
                    t.msg = "invalid literal/length code",
                    r.mode = E0;
                    break e
                }
            else {
                C = E[(C & 65535) + (v & (1 << P) - 1)];
                continue t
            }
            break
        }
    } while (i < o && s < l);
    M = y >> 3,
    i -= M,
    y -= M << 3,
    v &= (1 << y) - 1,
    t.next_in = i,
    t.next_out = s,
    t.avail_in = i < o ? 5 + (o - i) : 5 - (i - o),
    t.avail_out = s < l ? 257 + (l - s) : 257 - (s - l),
    r.hold = v,
    r.bits = y
}
  , ST = Da
  , nd = 15
  , IT = 852
  , CT = 592
  , kT = 0
  , UE = 1
  , TT = 2
  , Qne = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]
  , Jne = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]
  , ere = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]
  , tre = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64]
  , nre = function(t, n, r, i, o, s, a, l) {
    var c = l.bits, u = 0, f = 0, h = 0, m = 0, v = 0, y = 0, E = 0, b = 0, _ = 0, x = 0, C, P, M, A, I, O = null, N = 0, $, V = new ST.Buf16(nd + 1), z = new ST.Buf16(nd + 1), j = null, re = 0, se, ae, q;
    for (u = 0; u <= nd; u++)
        V[u] = 0;
    for (f = 0; f < i; f++)
        V[n[r + f]]++;
    for (v = c,
    m = nd; m >= 1 && V[m] === 0; m--)
        ;
    if (v > m && (v = m),
    m === 0)
        return o[s++] = 1 << 24 | 64 << 16 | 0,
        o[s++] = 1 << 24 | 64 << 16 | 0,
        l.bits = 1,
        0;
    for (h = 1; h < m && V[h] === 0; h++)
        ;
    for (v < h && (v = h),
    b = 1,
    u = 1; u <= nd; u++)
        if (b <<= 1,
        b -= V[u],
        b < 0)
            return -1;
    if (b > 0 && (t === kT || m !== 1))
        return -1;
    for (z[1] = 0,
    u = 1; u < nd; u++)
        z[u + 1] = z[u] + V[u];
    for (f = 0; f < i; f++)
        n[r + f] !== 0 && (a[z[n[r + f]]++] = f);
    if (t === kT ? (O = j = a,
    $ = 19) : t === UE ? (O = Qne,
    N -= 257,
    j = Jne,
    re -= 257,
    $ = 256) : (O = ere,
    j = tre,
    $ = -1),
    x = 0,
    f = 0,
    u = h,
    I = s,
    y = v,
    E = 0,
    M = -1,
    _ = 1 << v,
    A = _ - 1,
    t === UE && _ > IT || t === TT && _ > CT)
        return 1;
    for (; ; ) {
        se = u - E,
        a[f] < $ ? (ae = 0,
        q = a[f]) : a[f] > $ ? (ae = j[re + a[f]],
        q = O[N + a[f]]) : (ae = 96,
        q = 0),
        C = 1 << u - E,
        P = 1 << y,
        h = P;
        do
            P -= C,
            o[I + (x >> E) + P] = se << 24 | ae << 16 | q | 0;
        while (P !== 0);
        for (C = 1 << u - 1; x & C; )
            C >>= 1;
        if (C !== 0 ? (x &= C - 1,
        x += C) : x = 0,
        f++,
        --V[u] === 0) {
            if (u === m)
                break;
            u = n[r + a[f]]
        }
        if (u > v && (x & A) !== M) {
            for (E === 0 && (E = v),
            I += h,
            y = u - E,
            b = 1 << y; y + E < m && (b -= V[y + E],
            !(b <= 0)); )
                y++,
                b <<= 1;
            if (_ += 1 << y,
            t === UE && _ > IT || t === TT && _ > CT)
                return 1;
            M = x & A,
            o[M] = v << 24 | y << 16 | I - s | 0
        }
    }
    return x !== 0 && (o[I + x] = u - E << 24 | 64 << 16 | 0),
    l.bits = v,
    0
}
  , Mi = Da
  , d_ = s9
  , is = a9
  , rre = qne
  , yg = nre
  , ire = 0
  , y9 = 1
  , w9 = 2
  , AT = 4
  , ore = 5
  , b0 = 6
  , du = 0
  , sre = 1
  , are = 2
  , mo = -2
  , E9 = -3
  , b9 = -4
  , lre = -5
  , MT = 8
  , _9 = 1
  , LT = 2
  , PT = 3
  , RT = 4
  , DT = 5
  , OT = 6
  , NT = 7
  , FT = 8
  , BT = 9
  , zT = 10
  , u2 = 11
  , js = 12
  , HE = 13
  , $T = 14
  , WE = 15
  , UT = 16
  , HT = 17
  , WT = 18
  , GT = 19
  , _0 = 20
  , x0 = 21
  , VT = 22
  , YT = 23
  , jT = 24
  , KT = 25
  , XT = 26
  , GE = 27
  , ZT = 28
  , qT = 29
  , Jt = 30
  , x9 = 31
  , cre = 32
  , ure = 852
  , dre = 592
  , fre = 15
  , hre = fre;
function QT(e) {
    return (e >>> 24 & 255) + (e >>> 8 & 65280) + ((e & 65280) << 8) + ((e & 255) << 24)
}
function gre() {
    this.mode = 0,
    this.last = !1,
    this.wrap = 0,
    this.havedict = !1,
    this.flags = 0,
    this.dmax = 0,
    this.check = 0,
    this.total = 0,
    this.head = null,
    this.wbits = 0,
    this.wsize = 0,
    this.whave = 0,
    this.wnext = 0,
    this.window = null,
    this.hold = 0,
    this.bits = 0,
    this.length = 0,
    this.offset = 0,
    this.extra = 0,
    this.lencode = null,
    this.distcode = null,
    this.lenbits = 0,
    this.distbits = 0,
    this.ncode = 0,
    this.nlen = 0,
    this.ndist = 0,
    this.have = 0,
    this.next = null,
    this.lens = new Mi.Buf16(320),
    this.work = new Mi.Buf16(288),
    this.lendyn = null,
    this.distdyn = null,
    this.sane = 0,
    this.back = 0,
    this.was = 0
}
function S9(e) {
    var t;
    return !e || !e.state ? mo : (t = e.state,
    e.total_in = e.total_out = t.total = 0,
    e.msg = "",
    t.wrap && (e.adler = t.wrap & 1),
    t.mode = _9,
    t.last = 0,
    t.havedict = 0,
    t.dmax = 32768,
    t.head = null,
    t.hold = 0,
    t.bits = 0,
    t.lencode = t.lendyn = new Mi.Buf32(ure),
    t.distcode = t.distdyn = new Mi.Buf32(dre),
    t.sane = 1,
    t.back = -1,
    du)
}
function I9(e) {
    var t;
    return !e || !e.state ? mo : (t = e.state,
    t.wsize = 0,
    t.whave = 0,
    t.wnext = 0,
    S9(e))
}
function C9(e, t) {
    var n, r;
    return !e || !e.state || (r = e.state,
    t < 0 ? (n = 0,
    t = -t) : (n = (t >> 4) + 1,
    t < 48 && (t &= 15)),
    t && (t < 8 || t > 15)) ? mo : (r.window !== null && r.wbits !== t && (r.window = null),
    r.wrap = n,
    r.wbits = t,
    I9(e))
}
function k9(e, t) {
    var n, r;
    return e ? (r = new gre,
    e.state = r,
    r.window = null,
    n = C9(e, t),
    n !== du && (e.state = null),
    n) : mo
}
function pre(e) {
    return k9(e, hre)
}
var JT = !0, VE, YE;
function mre(e) {
    if (JT) {
        var t;
        for (VE = new Mi.Buf32(512),
        YE = new Mi.Buf32(32),
        t = 0; t < 144; )
            e.lens[t++] = 8;
        for (; t < 256; )
            e.lens[t++] = 9;
        for (; t < 280; )
            e.lens[t++] = 7;
        for (; t < 288; )
            e.lens[t++] = 8;
        for (yg(y9, e.lens, 0, 288, VE, 0, e.work, {
            bits: 9
        }),
        t = 0; t < 32; )
            e.lens[t++] = 5;
        yg(w9, e.lens, 0, 32, YE, 0, e.work, {
            bits: 5
        }),
        JT = !1
    }
    e.lencode = VE,
    e.lenbits = 9,
    e.distcode = YE,
    e.distbits = 5
}
function T9(e, t, n, r) {
    var i, o = e.state;
    return o.window === null && (o.wsize = 1 << o.wbits,
    o.wnext = 0,
    o.whave = 0,
    o.window = new Mi.Buf8(o.wsize)),
    r >= o.wsize ? (Mi.arraySet(o.window, t, n - o.wsize, o.wsize, 0),
    o.wnext = 0,
    o.whave = o.wsize) : (i = o.wsize - o.wnext,
    i > r && (i = r),
    Mi.arraySet(o.window, t, n - r, i, o.wnext),
    r -= i,
    r ? (Mi.arraySet(o.window, t, n - r, r, 0),
    o.wnext = r,
    o.whave = o.wsize) : (o.wnext += i,
    o.wnext === o.wsize && (o.wnext = 0),
    o.whave < o.wsize && (o.whave += i))),
    0
}
function vre(e, t) {
    var n, r, i, o, s, a, l, c, u, f, h, m, v, y, E = 0, b, _, x, C, P, M, A, I, O = new Mi.Buf8(4), N, $, V = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
    if (!e || !e.state || !e.output || !e.input && e.avail_in !== 0)
        return mo;
    n = e.state,
    n.mode === js && (n.mode = HE),
    s = e.next_out,
    i = e.output,
    l = e.avail_out,
    o = e.next_in,
    r = e.input,
    a = e.avail_in,
    c = n.hold,
    u = n.bits,
    f = a,
    h = l,
    I = du;
    e: for (; ; )
        switch (n.mode) {
        case _9:
            if (n.wrap === 0) {
                n.mode = HE;
                break
            }
            for (; u < 16; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            if (n.wrap & 2 && c === 35615) {
                n.check = 0,
                O[0] = c & 255,
                O[1] = c >>> 8 & 255,
                n.check = is(n.check, O, 2, 0),
                c = 0,
                u = 0,
                n.mode = LT;
                break
            }
            if (n.flags = 0,
            n.head && (n.head.done = !1),
            !(n.wrap & 1) || (((c & 255) << 8) + (c >> 8)) % 31) {
                e.msg = "incorrect header check",
                n.mode = Jt;
                break
            }
            if ((c & 15) !== MT) {
                e.msg = "unknown compression method",
                n.mode = Jt;
                break
            }
            if (c >>>= 4,
            u -= 4,
            A = (c & 15) + 8,
            n.wbits === 0)
                n.wbits = A;
            else if (A > n.wbits) {
                e.msg = "invalid window size",
                n.mode = Jt;
                break
            }
            n.dmax = 1 << A,
            e.adler = n.check = 1,
            n.mode = c & 512 ? zT : js,
            c = 0,
            u = 0;
            break;
        case LT:
            for (; u < 16; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            if (n.flags = c,
            (n.flags & 255) !== MT) {
                e.msg = "unknown compression method",
                n.mode = Jt;
                break
            }
            if (n.flags & 57344) {
                e.msg = "unknown header flags set",
                n.mode = Jt;
                break
            }
            n.head && (n.head.text = c >> 8 & 1),
            n.flags & 512 && (O[0] = c & 255,
            O[1] = c >>> 8 & 255,
            n.check = is(n.check, O, 2, 0)),
            c = 0,
            u = 0,
            n.mode = PT;
        case PT:
            for (; u < 32; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            n.head && (n.head.time = c),
            n.flags & 512 && (O[0] = c & 255,
            O[1] = c >>> 8 & 255,
            O[2] = c >>> 16 & 255,
            O[3] = c >>> 24 & 255,
            n.check = is(n.check, O, 4, 0)),
            c = 0,
            u = 0,
            n.mode = RT;
        case RT:
            for (; u < 16; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            n.head && (n.head.xflags = c & 255,
            n.head.os = c >> 8),
            n.flags & 512 && (O[0] = c & 255,
            O[1] = c >>> 8 & 255,
            n.check = is(n.check, O, 2, 0)),
            c = 0,
            u = 0,
            n.mode = DT;
        case DT:
            if (n.flags & 1024) {
                for (; u < 16; ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                n.length = c,
                n.head && (n.head.extra_len = c),
                n.flags & 512 && (O[0] = c & 255,
                O[1] = c >>> 8 & 255,
                n.check = is(n.check, O, 2, 0)),
                c = 0,
                u = 0
            } else
                n.head && (n.head.extra = null);
            n.mode = OT;
        case OT:
            if (n.flags & 1024 && (m = n.length,
            m > a && (m = a),
            m && (n.head && (A = n.head.extra_len - n.length,
            n.head.extra || (n.head.extra = new Array(n.head.extra_len)),
            Mi.arraySet(n.head.extra, r, o, m, A)),
            n.flags & 512 && (n.check = is(n.check, r, m, o)),
            a -= m,
            o += m,
            n.length -= m),
            n.length))
                break e;
            n.length = 0,
            n.mode = NT;
        case NT:
            if (n.flags & 2048) {
                if (a === 0)
                    break e;
                m = 0;
                do
                    A = r[o + m++],
                    n.head && A && n.length < 65536 && (n.head.name += String.fromCharCode(A));
                while (A && m < a);
                if (n.flags & 512 && (n.check = is(n.check, r, m, o)),
                a -= m,
                o += m,
                A)
                    break e
            } else
                n.head && (n.head.name = null);
            n.length = 0,
            n.mode = FT;
        case FT:
            if (n.flags & 4096) {
                if (a === 0)
                    break e;
                m = 0;
                do
                    A = r[o + m++],
                    n.head && A && n.length < 65536 && (n.head.comment += String.fromCharCode(A));
                while (A && m < a);
                if (n.flags & 512 && (n.check = is(n.check, r, m, o)),
                a -= m,
                o += m,
                A)
                    break e
            } else
                n.head && (n.head.comment = null);
            n.mode = BT;
        case BT:
            if (n.flags & 512) {
                for (; u < 16; ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                if (c !== (n.check & 65535)) {
                    e.msg = "header crc mismatch",
                    n.mode = Jt;
                    break
                }
                c = 0,
                u = 0
            }
            n.head && (n.head.hcrc = n.flags >> 9 & 1,
            n.head.done = !0),
            e.adler = n.check = 0,
            n.mode = js;
            break;
        case zT:
            for (; u < 32; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            e.adler = n.check = QT(c),
            c = 0,
            u = 0,
            n.mode = u2;
        case u2:
            if (n.havedict === 0)
                return e.next_out = s,
                e.avail_out = l,
                e.next_in = o,
                e.avail_in = a,
                n.hold = c,
                n.bits = u,
                are;
            e.adler = n.check = 1,
            n.mode = js;
        case js:
            if (t === ore || t === b0)
                break e;
        case HE:
            if (n.last) {
                c >>>= u & 7,
                u -= u & 7,
                n.mode = GE;
                break
            }
            for (; u < 3; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            switch (n.last = c & 1,
            c >>>= 1,
            u -= 1,
            c & 3) {
            case 0:
                n.mode = $T;
                break;
            case 1:
                if (mre(n),
                n.mode = _0,
                t === b0) {
                    c >>>= 2,
                    u -= 2;
                    break e
                }
                break;
            case 2:
                n.mode = HT;
                break;
            case 3:
                e.msg = "invalid block type",
                n.mode = Jt
            }
            c >>>= 2,
            u -= 2;
            break;
        case $T:
            for (c >>>= u & 7,
            u -= u & 7; u < 32; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            if ((c & 65535) !== (c >>> 16 ^ 65535)) {
                e.msg = "invalid stored block lengths",
                n.mode = Jt;
                break
            }
            if (n.length = c & 65535,
            c = 0,
            u = 0,
            n.mode = WE,
            t === b0)
                break e;
        case WE:
            n.mode = UT;
        case UT:
            if (m = n.length,
            m) {
                if (m > a && (m = a),
                m > l && (m = l),
                m === 0)
                    break e;
                Mi.arraySet(i, r, o, m, s),
                a -= m,
                o += m,
                l -= m,
                s += m,
                n.length -= m;
                break
            }
            n.mode = js;
            break;
        case HT:
            for (; u < 14; ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            if (n.nlen = (c & 31) + 257,
            c >>>= 5,
            u -= 5,
            n.ndist = (c & 31) + 1,
            c >>>= 5,
            u -= 5,
            n.ncode = (c & 15) + 4,
            c >>>= 4,
            u -= 4,
            n.nlen > 286 || n.ndist > 30) {
                e.msg = "too many length or distance symbols",
                n.mode = Jt;
                break
            }
            n.have = 0,
            n.mode = WT;
        case WT:
            for (; n.have < n.ncode; ) {
                for (; u < 3; ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                n.lens[V[n.have++]] = c & 7,
                c >>>= 3,
                u -= 3
            }
            for (; n.have < 19; )
                n.lens[V[n.have++]] = 0;
            if (n.lencode = n.lendyn,
            n.lenbits = 7,
            N = {
                bits: n.lenbits
            },
            I = yg(ire, n.lens, 0, 19, n.lencode, 0, n.work, N),
            n.lenbits = N.bits,
            I) {
                e.msg = "invalid code lengths set",
                n.mode = Jt;
                break
            }
            n.have = 0,
            n.mode = GT;
        case GT:
            for (; n.have < n.nlen + n.ndist; ) {
                for (; E = n.lencode[c & (1 << n.lenbits) - 1],
                b = E >>> 24,
                _ = E >>> 16 & 255,
                x = E & 65535,
                !(b <= u); ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                if (x < 16)
                    c >>>= b,
                    u -= b,
                    n.lens[n.have++] = x;
                else {
                    if (x === 16) {
                        for ($ = b + 2; u < $; ) {
                            if (a === 0)
                                break e;
                            a--,
                            c += r[o++] << u,
                            u += 8
                        }
                        if (c >>>= b,
                        u -= b,
                        n.have === 0) {
                            e.msg = "invalid bit length repeat",
                            n.mode = Jt;
                            break
                        }
                        A = n.lens[n.have - 1],
                        m = 3 + (c & 3),
                        c >>>= 2,
                        u -= 2
                    } else if (x === 17) {
                        for ($ = b + 3; u < $; ) {
                            if (a === 0)
                                break e;
                            a--,
                            c += r[o++] << u,
                            u += 8
                        }
                        c >>>= b,
                        u -= b,
                        A = 0,
                        m = 3 + (c & 7),
                        c >>>= 3,
                        u -= 3
                    } else {
                        for ($ = b + 7; u < $; ) {
                            if (a === 0)
                                break e;
                            a--,
                            c += r[o++] << u,
                            u += 8
                        }
                        c >>>= b,
                        u -= b,
                        A = 0,
                        m = 11 + (c & 127),
                        c >>>= 7,
                        u -= 7
                    }
                    if (n.have + m > n.nlen + n.ndist) {
                        e.msg = "invalid bit length repeat",
                        n.mode = Jt;
                        break
                    }
                    for (; m--; )
                        n.lens[n.have++] = A
                }
            }
            if (n.mode === Jt)
                break;
            if (n.lens[256] === 0) {
                e.msg = "invalid code -- missing end-of-block",
                n.mode = Jt;
                break
            }
            if (n.lenbits = 9,
            N = {
                bits: n.lenbits
            },
            I = yg(y9, n.lens, 0, n.nlen, n.lencode, 0, n.work, N),
            n.lenbits = N.bits,
            I) {
                e.msg = "invalid literal/lengths set",
                n.mode = Jt;
                break
            }
            if (n.distbits = 6,
            n.distcode = n.distdyn,
            N = {
                bits: n.distbits
            },
            I = yg(w9, n.lens, n.nlen, n.ndist, n.distcode, 0, n.work, N),
            n.distbits = N.bits,
            I) {
                e.msg = "invalid distances set",
                n.mode = Jt;
                break
            }
            if (n.mode = _0,
            t === b0)
                break e;
        case _0:
            n.mode = x0;
        case x0:
            if (a >= 6 && l >= 258) {
                e.next_out = s,
                e.avail_out = l,
                e.next_in = o,
                e.avail_in = a,
                n.hold = c,
                n.bits = u,
                rre(e, h),
                s = e.next_out,
                i = e.output,
                l = e.avail_out,
                o = e.next_in,
                r = e.input,
                a = e.avail_in,
                c = n.hold,
                u = n.bits,
                n.mode === js && (n.back = -1);
                break
            }
            for (n.back = 0; E = n.lencode[c & (1 << n.lenbits) - 1],
            b = E >>> 24,
            _ = E >>> 16 & 255,
            x = E & 65535,
            !(b <= u); ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            if (_ && !(_ & 240)) {
                for (C = b,
                P = _,
                M = x; E = n.lencode[M + ((c & (1 << C + P) - 1) >> C)],
                b = E >>> 24,
                _ = E >>> 16 & 255,
                x = E & 65535,
                !(C + b <= u); ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                c >>>= C,
                u -= C,
                n.back += C
            }
            if (c >>>= b,
            u -= b,
            n.back += b,
            n.length = x,
            _ === 0) {
                n.mode = XT;
                break
            }
            if (_ & 32) {
                n.back = -1,
                n.mode = js;
                break
            }
            if (_ & 64) {
                e.msg = "invalid literal/length code",
                n.mode = Jt;
                break
            }
            n.extra = _ & 15,
            n.mode = VT;
        case VT:
            if (n.extra) {
                for ($ = n.extra; u < $; ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                n.length += c & (1 << n.extra) - 1,
                c >>>= n.extra,
                u -= n.extra,
                n.back += n.extra
            }
            n.was = n.length,
            n.mode = YT;
        case YT:
            for (; E = n.distcode[c & (1 << n.distbits) - 1],
            b = E >>> 24,
            _ = E >>> 16 & 255,
            x = E & 65535,
            !(b <= u); ) {
                if (a === 0)
                    break e;
                a--,
                c += r[o++] << u,
                u += 8
            }
            if (!(_ & 240)) {
                for (C = b,
                P = _,
                M = x; E = n.distcode[M + ((c & (1 << C + P) - 1) >> C)],
                b = E >>> 24,
                _ = E >>> 16 & 255,
                x = E & 65535,
                !(C + b <= u); ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                c >>>= C,
                u -= C,
                n.back += C
            }
            if (c >>>= b,
            u -= b,
            n.back += b,
            _ & 64) {
                e.msg = "invalid distance code",
                n.mode = Jt;
                break
            }
            n.offset = x,
            n.extra = _ & 15,
            n.mode = jT;
        case jT:
            if (n.extra) {
                for ($ = n.extra; u < $; ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                n.offset += c & (1 << n.extra) - 1,
                c >>>= n.extra,
                u -= n.extra,
                n.back += n.extra
            }
            if (n.offset > n.dmax) {
                e.msg = "invalid distance too far back",
                n.mode = Jt;
                break
            }
            n.mode = KT;
        case KT:
            if (l === 0)
                break e;
            if (m = h - l,
            n.offset > m) {
                if (m = n.offset - m,
                m > n.whave && n.sane) {
                    e.msg = "invalid distance too far back",
                    n.mode = Jt;
                    break
                }
                m > n.wnext ? (m -= n.wnext,
                v = n.wsize - m) : v = n.wnext - m,
                m > n.length && (m = n.length),
                y = n.window
            } else
                y = i,
                v = s - n.offset,
                m = n.length;
            m > l && (m = l),
            l -= m,
            n.length -= m;
            do
                i[s++] = y[v++];
            while (--m);
            n.length === 0 && (n.mode = x0);
            break;
        case XT:
            if (l === 0)
                break e;
            i[s++] = n.length,
            l--,
            n.mode = x0;
            break;
        case GE:
            if (n.wrap) {
                for (; u < 32; ) {
                    if (a === 0)
                        break e;
                    a--,
                    c |= r[o++] << u,
                    u += 8
                }
                if (h -= l,
                e.total_out += h,
                n.total += h,
                h && (e.adler = n.check = n.flags ? is(n.check, i, h, s - h) : d_(n.check, i, h, s - h)),
                h = l,
                (n.flags ? c : QT(c)) !== n.check) {
                    e.msg = "incorrect data check",
                    n.mode = Jt;
                    break
                }
                c = 0,
                u = 0
            }
            n.mode = ZT;
        case ZT:
            if (n.wrap && n.flags) {
                for (; u < 32; ) {
                    if (a === 0)
                        break e;
                    a--,
                    c += r[o++] << u,
                    u += 8
                }
                if (c !== (n.total & 4294967295)) {
                    e.msg = "incorrect length check",
                    n.mode = Jt;
                    break
                }
                c = 0,
                u = 0
            }
            n.mode = qT;
        case qT:
            I = sre;
            break e;
        case Jt:
            I = E9;
            break e;
        case x9:
            return b9;
        case cre:
        default:
            return mo
        }
    return e.next_out = s,
    e.avail_out = l,
    e.next_in = o,
    e.avail_in = a,
    n.hold = c,
    n.bits = u,
    (n.wsize || h !== e.avail_out && n.mode < Jt && (n.mode < GE || t !== AT)) && T9(e, e.output, e.next_out, h - e.avail_out),
    f -= e.avail_in,
    h -= e.avail_out,
    e.total_in += f,
    e.total_out += h,
    n.total += h,
    n.wrap && h && (e.adler = n.check = n.flags ? is(n.check, i, h, e.next_out - h) : d_(n.check, i, h, e.next_out - h)),
    e.data_type = n.bits + (n.last ? 64 : 0) + (n.mode === js ? 128 : 0) + (n.mode === _0 || n.mode === WE ? 256 : 0),
    (f === 0 && h === 0 || t === AT) && I === du && (I = lre),
    I
}
function yre(e) {
    if (!e || !e.state)
        return mo;
    var t = e.state;
    return t.window && (t.window = null),
    e.state = null,
    du
}
function wre(e, t) {
    var n;
    return !e || !e.state || (n = e.state,
    !(n.wrap & 2)) ? mo : (n.head = t,
    t.done = !1,
    du)
}
function Ere(e, t) {
    var n = t.length, r, i, o;
    return !e || !e.state || (r = e.state,
    r.wrap !== 0 && r.mode !== u2) ? mo : r.mode === u2 && (i = 1,
    i = d_(i, t, n, 0),
    i !== r.check) ? E9 : (o = T9(e, t, n, n),
    o ? (r.mode = x9,
    b9) : (r.havedict = 1,
    du))
}
Zo.inflateReset = I9;
Zo.inflateReset2 = C9;
Zo.inflateResetKeep = S9;
Zo.inflateInit = pre;
Zo.inflateInit2 = k9;
Zo.inflate = vre;
Zo.inflateEnd = yre;
Zo.inflateGetHeader = wre;
Zo.inflateSetDictionary = Ere;
Zo.inflateInfo = "pako inflate (from Nodeca project)";
var A9 = {
    Z_NO_FLUSH: 0,
    Z_PARTIAL_FLUSH: 1,
    Z_SYNC_FLUSH: 2,
    Z_FULL_FLUSH: 3,
    Z_FINISH: 4,
    Z_BLOCK: 5,
    Z_TREES: 6,
    Z_OK: 0,
    Z_STREAM_END: 1,
    Z_NEED_DICT: 2,
    Z_ERRNO: -1,
    Z_STREAM_ERROR: -2,
    Z_DATA_ERROR: -3,
    Z_BUF_ERROR: -5,
    Z_NO_COMPRESSION: 0,
    Z_BEST_SPEED: 1,
    Z_BEST_COMPRESSION: 9,
    Z_DEFAULT_COMPRESSION: -1,
    Z_FILTERED: 1,
    Z_HUFFMAN_ONLY: 2,
    Z_RLE: 3,
    Z_FIXED: 4,
    Z_DEFAULT_STRATEGY: 0,
    Z_BINARY: 0,
    Z_TEXT: 1,
    Z_UNKNOWN: 2,
    Z_DEFLATED: 8
};
function bre() {
    this.text = 0,
    this.time = 0,
    this.xflags = 0,
    this.os = 0,
    this.extra = null,
    this.extra_len = 0,
    this.name = "",
    this.comment = "",
    this.hcrc = 0,
    this.done = !1
}
var _re = bre
  , jd = Zo
  , wg = Da
  , pm = Au
  , En = A9
  , f_ = V6
  , xre = m9
  , Sre = _re
  , M9 = Object.prototype.toString;
function fu(e) {
    if (!(this instanceof fu))
        return new fu(e);
    this.options = wg.assign({
        chunkSize: 16384,
        windowBits: 0,
        to: ""
    }, e || {});
    var t = this.options;
    t.raw && t.windowBits >= 0 && t.windowBits < 16 && (t.windowBits = -t.windowBits,
    t.windowBits === 0 && (t.windowBits = -15)),
    t.windowBits >= 0 && t.windowBits < 16 && !(e && e.windowBits) && (t.windowBits += 32),
    t.windowBits > 15 && t.windowBits < 48 && (t.windowBits & 15 || (t.windowBits |= 15)),
    this.err = 0,
    this.msg = "",
    this.ended = !1,
    this.chunks = [],
    this.strm = new xre,
    this.strm.avail_out = 0;
    var n = jd.inflateInit2(this.strm, t.windowBits);
    if (n !== En.Z_OK)
        throw new Error(f_[n]);
    if (this.header = new Sre,
    jd.inflateGetHeader(this.strm, this.header),
    t.dictionary && (typeof t.dictionary == "string" ? t.dictionary = pm.string2buf(t.dictionary) : M9.call(t.dictionary) === "[object ArrayBuffer]" && (t.dictionary = new Uint8Array(t.dictionary)),
    t.raw && (n = jd.inflateSetDictionary(this.strm, t.dictionary),
    n !== En.Z_OK)))
        throw new Error(f_[n])
}
fu.prototype.push = function(e, t) {
    var n = this.strm, r = this.options.chunkSize, i = this.options.dictionary, o, s, a, l, c, u = !1;
    if (this.ended)
        return !1;
    s = t === ~~t ? t : t === !0 ? En.Z_FINISH : En.Z_NO_FLUSH,
    typeof e == "string" ? n.input = pm.binstring2buf(e) : M9.call(e) === "[object ArrayBuffer]" ? n.input = new Uint8Array(e) : n.input = e,
    n.next_in = 0,
    n.avail_in = n.input.length;
    do {
        if (n.avail_out === 0 && (n.output = new wg.Buf8(r),
        n.next_out = 0,
        n.avail_out = r),
        o = jd.inflate(n, En.Z_NO_FLUSH),
        o === En.Z_NEED_DICT && i && (o = jd.inflateSetDictionary(this.strm, i)),
        o === En.Z_BUF_ERROR && u === !0 && (o = En.Z_OK,
        u = !1),
        o !== En.Z_STREAM_END && o !== En.Z_OK)
            return this.onEnd(o),
            this.ended = !0,
            !1;
        n.next_out && (n.avail_out === 0 || o === En.Z_STREAM_END || n.avail_in === 0 && (s === En.Z_FINISH || s === En.Z_SYNC_FLUSH)) && (this.options.to === "string" ? (a = pm.utf8border(n.output, n.next_out),
        l = n.next_out - a,
        c = pm.buf2string(n.output, a),
        n.next_out = l,
        n.avail_out = r - l,
        l && wg.arraySet(n.output, n.output, a, l, 0),
        this.onData(c)) : this.onData(wg.shrinkBuf(n.output, n.next_out))),
        n.avail_in === 0 && n.avail_out === 0 && (u = !0)
    } while ((n.avail_in > 0 || n.avail_out === 0) && o !== En.Z_STREAM_END);
    return o === En.Z_STREAM_END && (s = En.Z_FINISH),
    s === En.Z_FINISH ? (o = jd.inflateEnd(this.strm),
    this.onEnd(o),
    this.ended = !0,
    o === En.Z_OK) : (s === En.Z_SYNC_FLUSH && (this.onEnd(En.Z_OK),
    n.avail_out = 0),
    !0)
}
;
fu.prototype.onData = function(e) {
    this.chunks.push(e)
}
;
fu.prototype.onEnd = function(e) {
    e === En.Z_OK && (this.options.to === "string" ? this.result = this.chunks.join("") : this.result = wg.flattenChunks(this.chunks)),
    this.chunks = [],
    this.err = e,
    this.msg = this.strm.msg
}
;
function j6(e, t) {
    var n = new fu(t);
    if (n.push(e, !0),
    n.err)
        throw n.msg || f_[n.err];
    return n.result
}
function Ire(e, t) {
    return t = t || {},
    t.raw = !0,
    j6(e, t)
}
Gp.Inflate = fu;
Gp.inflate = j6;
Gp.inflateRaw = Ire;
Gp.ungzip = j6;
var Cre = Da.assign
  , kre = Up
  , Tre = Gp
  , Are = A9
  , L9 = {};
Cre(L9, kre, Tre, Are);
var Hv = L9;
const Mu = (()=>{
    if (typeof self > "u")
        return !1;
    if ("top"in self && self !== top)
        try {} catch {
            return !1
        }
    else if ("showOpenFilePicker"in self)
        return "showOpenFilePicker";
    return !1
}
)()
  , Mre = _e(Mu ? ()=>import("./file-open-002ab408-CQ9a1yTP.js") : ()=>import("./file-open-7c801643-CD3BRLr1.js"), __vite__mapDeps([]));
async function Lre(...e) {
    return (await Mre).default(...e)
}
_e(Mu ? ()=>import("./directory-open-4ed118d0-BNgAhb94.js") : ()=>import("./directory-open-01563666-DWU9wJ6I.js"), __vite__mapDeps([]));
const Pre = _e(Mu ? ()=>import("./file-save-745eba88-D6MGJDcB.js") : ()=>import("./file-save-3189631c-x92wctJd.js"), __vite__mapDeps([]));
async function Rre(...e) {
    return (await Pre).default(...e)
}
const e8 = 500
  , K6 = e=>{
    var r, i;
    const t = (r = e.extensions) == null ? void 0 : r.reduce((o,s)=>(o.push(Re[s]),
    o), [])
      , n = (i = e.extensions) == null ? void 0 : i.reduce((o,s)=>s === "jpg" ? o.concat(".jpg", ".jpeg") : o.concat(`.${s}`), []);
    return Lre({
        description: e.description,
        extensions: n,
        mimeTypes: t,
        multiple: e.multiple ?? !1,
        legacySetup: (o,s,a)=>{
            const l = Wl(s, e8)
              , c = ()=>{
                u(),
                document.addEventListener(ce.KEYUP, l),
                document.addEventListener(ce.POINTER_UP, l),
                l()
            }
              , u = ()=>{
                var h;
                if ((h = a.files) != null && h.length) {
                    const m = e.multiple ? [...a.files] : a.files[0];
                    o(m)
                }
            }
            ;
            requestAnimationFrame(()=>{
                window.addEventListener(ce.FOCUS, c)
            }
            );
            const f = window.setInterval(()=>{
                u()
            }
            , e8);
            return h=>{
                clearInterval(f),
                l.cancel(),
                window.removeEventListener(ce.FOCUS, c),
                document.removeEventListener(ce.KEYUP, l),
                document.removeEventListener(ce.POINTER_UP, l),
                h && (console.warn("Opening the file was canceled (legacy-fs)."),
                h(new df))
            }
        }
    })
}
  , d2 = (e,t)=>Rre(e, {
    fileName: `${t.name}.${t.extension}`,
    description: t.description,
    extensions: [`.${t.extension}`]
}, t.fileHandle)
  , Dre = (e,t)=>{
    const n = {};
    for (const r of e)
        !r.isDeleted && "fileId"in r && r.fileId && t[r.fileId] && (n[r.fileId] = t[r.fileId]);
    return n
}
  , Bf = (e,t,n,r)=>{
    const i = {
        type: so.excalidraw,
        version: Cv.excalidraw,
        source: v6,
        elements: r === "local" ? PN(e) : Ele(e),
        appState: r === "local" ? QP(t) : $q(t),
        files: r === "local" ? Dre(e, n) : void 0
    };
    return JSON.stringify(i, null, 2)
}
  , P9 = async(e,t,n,r=t.name || ZP)=>{
    const i = Bf(e, t, n, "local")
      , o = new Blob([i],{
        type: Re.excalidraw
    });
    return {
        fileHandle: await d2(o, {
            name: r,
            extension: "excalidraw",
            description: "Excalidraw file",
            fileHandle: n4(t.fileHandle) ? null : t.fileHandle
        })
    }
}
  , Ore = async(e,t)=>{
    const n = await K6({
        description: "Excalidraw files"
    });
    return r4(await i4(n), e, t, n.handle)
}
  , Nre = e=>(e == null ? void 0 : e.type) === so.excalidraw && (!e.elements || Array.isArray(e.elements) && (!e.appState || typeof e.appState == "object"))
  , R9 = e=>typeof e == "object" && e && e.type === so.excalidrawLibrary && (e.version === 1 || e.version === 2)
  , D9 = e=>{
    const t = {
        type: so.excalidrawLibrary,
        version: Cv.excalidrawLibrary,
        source: v6,
        libraryItems: e
    };
    return JSON.stringify(t, null, 2)
}
  , Fre = async e=>{
    const t = D9(e);
    await d2(new Blob([t],{
        type: Re.excalidrawlib
    }), {
        name: "library",
        extension: "excalidrawlib",
        description: "Excalidraw library file"
    })
}
  , up = e=>{
    const t = e.map(r=>r[0])
      , n = e.map(r=>r[1]);
    return {
        width: Math.max(...t) - Math.min(...t),
        height: Math.max(...n) - Math.min(...n)
    }
}
  , gf = (e,t,n,r)=>{
    const i = n.map(m=>m[e])
      , o = Math.max(...i)
      , s = Math.min(...i)
      , a = o - s
      , l = a === 0 ? 1 : t / a;
    let c = 1 / 0;
    const u = n.map(m=>{
        const v = m[e] * l
          , y = [...m];
        return y[e] = v,
        v < c && (c = v),
        y
    }
    );
    if (!r || u.length === 2)
        return u;
    const f = s - c;
    return u.map(m=>m.map((v,y)=>y === e ? v + f : v))
}
  , zr = (e,t)=>[0, 0, 0, 0, t, e, 1, 0]
  , Bre = (e,t)=>[0, 0, 0, 0, t, e, 0, 0]
  , Lu = (e=0,t=0)=>{
    const n = [0, 0, 0, 0, 0, 0, 0, 0];
    if (t < 0 || t > 7)
        throw new Error(`Expected \`index\` between 0 and 7, got \`${t}\``);
    return e !== 0 && (n[t] = e),
    n
}
  , Wv = e=>[e[0], e[1], e[2], e[3], -e[4], -e[5], -e[6], -e[7]]
  , zre = (e,t)=>X6(t) ? [e[0] + t, e[1], e[2], e[3], e[4], e[5], e[6], e[7]] : [e[0] + t[0], e[1] + t[1], e[2] + t[2], e[3] + t[3], e[4] + t[4], e[5] + t[5], e[6] + t[6], e[7] + t[7]]
  , t8 = (e,t)=>X6(t) ? [e[0] - t, e[1], e[2], e[3], e[4], e[5], e[6], e[7]] : [e[0] - t[0], e[1] - t[1], e[2] - t[2], e[3] - t[3], e[4] - t[4], e[5] - t[5], e[6] - t[6], e[7] - t[7]]
  , pf = (e,t)=>X6(t) ? [e[0] * t, e[1] * t, e[2] * t, e[3] * t, e[4] * t, e[5] * t, e[6] * t, e[7] * t] : [$re(e, t), t[1] * e[0] + t[0] * e[1] - t[4] * e[2] + t[5] * e[3] + t[2] * e[4] - t[3] * e[5] - t[7] * e[6] - t[6] * e[7], t[2] * e[0] + t[0] * e[2] - t[6] * e[3] + t[3] * e[6], t[3] * e[0] + t[6] * e[2] + t[0] * e[3] - t[2] * e[6], t[4] * e[0] + t[2] * e[1] - t[1] * e[2] + t[7] * e[3] + t[0] * e[4] + t[6] * e[5] - t[5] * e[6] + t[3] * e[7], t[5] * e[0] - t[3] * e[1] + t[7] * e[2] + t[1] * e[3] - t[6] * e[4] + t[0] * e[5] + t[4] * e[6] + t[2] * e[7], t[6] * e[0] + t[3] * e[2] - t[2] * e[3] + t[0] * e[6], t[7] * e[0] + t[6] * e[1] + t[5] * e[2] + t[4] * e[3] + t[3] * e[4] + t[2] * e[5] + t[1] * e[6] + t[0] * e[7]]
  , $re = (e,t)=>t[0] * e[0] + t[2] * e[2] + t[3] * e[3] - t[6] * e[6]
  , Ure = (e,t)=>[t[0] * e[0], t[1] * e[0] + t[0] * e[1], t[2] * e[0] + t[0] * e[2], t[3] * e[0] + t[0] * e[3], t[4] * e[0] + t[2] * e[1] - t[1] * e[2] + t[0] * e[4], t[5] * e[0] - t[3] * e[1] + t[1] * e[3] + t[0] * e[5], t[6] * e[0] + t[3] * e[2] - t[2] * e[3] + t[0] * e[6], t[7] * e[0] + t[6] * e[1] + t[5] * e[2] + t[4] * e[3] + t[3] * e[4] + t[2] * e[5] + t[1] * e[6]]
  , O9 = (e,t)=>[N9(e, t), e[1] * t[7] + e[4] * t[5] - e[5] * t[4] + e[7] * t[1], e[2] * t[7] - e[4] * t[6] + e[6] * t[4] + e[7] * t[2], e[3] * t[7] + e[5] * t[6] - e[6] * t[5] + e[7] * t[3], e[4] * t[7] + e[7] * t[4], e[5] * t[7] + e[7] * t[5], e[6] * t[7] + e[7] * t[6], e[7] * t[7]]
  , N9 = (e,t)=>e[0] * t[7] + e[1] * t[6] + e[2] * t[5] + e[3] * t[4] + e[4] * t[3] + e[5] * t[2] + e[6] * t[1] + e[7] * t[0]
  , Hre = (e,t)=>[t[0] * e[0] + t[2] * e[2] + t[3] * e[3] - t[6] * e[6], t[1] * e[0] + t[0] * e[1] - t[4] * e[2] + t[5] * e[3] + t[2] * e[4] - t[3] * e[5] - t[7] * e[6] - t[6] * e[7], t[2] * e[0] + t[0] * e[2] - t[6] * e[3] + t[3] * e[6], t[3] * e[0] + t[6] * e[2] + t[0] * e[3] - t[2] * e[6], t[4] * e[0] + t[7] * e[3] + t[0] * e[4] + t[3] * e[7], t[5] * e[0] + t[7] * e[2] + t[0] * e[5] + t[2] * e[7], t[6] * e[0] + t[0] * e[6], t[7] * e[0] + t[0] * e[7]]
  , F9 = e=>Math.sqrt(Math.abs(e[0] * e[0] - e[2] * e[2] - e[3] * e[3] + e[6] * e[6]))
  , Wre = e=>Math.sqrt(Math.abs(e[7] * e[7] - e[5] * e[5] - e[4] * e[4] + e[1] * e[1]))
  , Gv = e=>{
    const t = F9(e);
    if (t === 0 || t === 1)
        return e;
    const n = e[6] < 0 ? -1 : 1;
    return pf(e, n / t)
}
  , Gre = e=>{
    const t = Wre(e);
    return t === 0 || t === 1 ? e : pf(e, 1 / t)
}
  , X6 = e=>typeof e == "number";
Lu(1, 1);
Lu(1, 2);
Lu(1, 3);
Lu(1, 4);
Lu(1, 5);
Lu(1, 6);
Lu(1, 7);
const h_ = (e,t,n)=>Gv([0, n, e, t, 0, 0, 0, 0])
  , Vp = (e,t)=>Gv(O9(t, e))
  , Vre = (e,t)=>Hre(e, t)
  , Yre = (e,t)=>Vre(Vp(e, t), t)
  , jre = e=>Math.sign(e[1])
  , mf = ([e,t])=>[0, 0, 0, 0, t, e, 1, 0]
  , vf = e=>[e[5], e[4]]
  , Kre = e=>[0, 0, 0, 0, Math.abs(e[4]), Math.abs(e[5]), 1, 0]
  , Xre = (e,t)=>Gv(Ure(e, t))
  , n8 = (e,t)=>F9(O9(e, t))
  , hu = (e,t)=>N9(e, t)
  , B9 = e=>[0, 0, 0, 0, e[4], e[5], 0, 0]
  , Zre = (e,t)=>Gre([0, 0, 0, 0, t[4] - e[4], t[5] - e[5], 0, 0])
  , z9 = (e,t)=>zre(pf(e, Math.sin(t / 2)), Math.cos(t / 2))
  , qre = e=>[1, 0, 0, 0, -(.5 * e[5]), .5 * e[4], 0, 0]
  , Qre = (e,t)=>{
    const n = .5 * t;
    return [1, 0, 0, 0, n * e[4], n * e[5], 0, 0]
}
  , Jre = (e,t)=>pf(t, e)
  , Cs = (e,t)=>Gv(pf(pf(e, t), Wv(e)));
function r8(e) {
    return [Math.min(e[0][0], e[1][0]), Math.min(e[0][1], e[1][1]), Math.max(e[0][0], e[1][0]), Math.max(e[0][1], e[1][1])]
}
function Eg(e, t) {
    return e[0] * t[1] - t[0] * e[1]
}
function eie(e, t) {
    return e[0] <= t[2] && e[2] >= t[0] && e[1] <= t[3] && e[3] >= t[1]
}
function f2(e, t) {
    return [e[0] - t[0], e[1] - t[1]]
}
const tie = 1e-6;
function i8(e, t) {
    const n = f2(e[1], e[0])
      , r = f2(t, e[0])
      , i = Eg(n, r);
    return Math.abs(i) < tie
}
function jE(e, t) {
    const n = f2(e[1], e[0])
      , r = f2(t, e[0]);
    return Eg(n, r) < 0
}
function o8(e, t) {
    return i8(e, t[0]) || i8(e, t[1]) || (jE(e, t[0]) ? !jE(e, t[1]) : jE(e, t[1]))
}
function nie(e, t) {
    return eie(r8(e), r8(t)) && o8(e, t) && o8(t, e)
}
const zf = 1e-4
  , S0 = (e,t,n)=>(e[0] - n[0]) * (t[1] - n[1]) - (e[1] - n[1]) * (t[0] - n[0])
  , rie = e=>{
    const t = e[0]
      , n = e[e.length - 1];
    return t[0] === n[0] && t[1] === n[1]
}
  , Vv = e=>rie(e) ? e : [...e, e[0]]
  , Oa = e=>{
    const t = e * 180 / Math.PI;
    return t < 0 ? 360 + t : t
}
  , iie = e=>e / 180 * Math.PI
  , s8 = (e,t)=>[e[0] * Math.cos(t) - e[1] * Math.sin(t), e[0] * Math.sin(t) + e[1] * Math.cos(t)]
  , oie = e=>e[0] === 0 && e[1] === 0
  , Cn = (e,t,n)=>{
    const r = iie(t);
    return !n || oie(n) ? s8(e, r) : s8(e.map((i,o)=>i - n[o]), r).map((i,o)=>i + n[o])
}
  , sie = e=>[-e[0], -e[1]]
  , $9 = (e,t)=>[e[0] + t[0], e[1] + t[1]]
  , aie = (e,t)=>ir(...e, ...t)
  , lie = e=>Oa(Math.atan2(e[1][1] - e[0][1], e[1][0] - e[0][0]))
  , U9 = (e,t,n)=>{
    const r = $9(e, sie(t));
    return Cn(r, -Oa(n))
}
  , cie = (e,t)=>{
    const [n,r] = e
      , [[i,o],[s,a]] = t
      , l = n - i
      , c = r - o
      , u = s - i
      , f = a - o
      , h = l * u + c * f
      , m = u * u + f * f;
    let v = -1;
    m !== 0 && (v = h / m);
    let y, E;
    v < 0 ? (y = i,
    E = o) : v > 1 ? (y = s,
    E = a) : (y = i + v * u,
    E = o + v * f);
    const b = n - y
      , _ = r - E;
    return Math.sqrt(b * b + _ * _)
}
  , Yp = (e,t,n=zf)=>{
    const r = cie(e, t);
    return r === 0 ? !0 : r < n
}
  , H9 = (e,t,n=zf)=>t.some(r=>Yp(e, r, n))
  , uie = e=>{
    const [t,n,r,i] = e;
    return (o,s)=>Math.pow(1 - o, 3) * i[s] + 3 * o * Math.pow(1 - o, 2) * r[s] + 3 * Math.pow(o, 2) * (1 - o) * n[s] + t[s] * Math.pow(o, 3)
}
  , die = (e,t=10)=>{
    const n = uie(e);
    let r = [n(0, 0), n(0, 1)];
    const i = [];
    let o = 0;
    const s = 1 / t;
    for (let a = 0; a < t; a++)
        if (o += s,
        o <= 1) {
            const l = [n(o, 0), n(o, 1)];
            i.push([r, l]),
            r = l
        }
    return i
}
  , W9 = (e,t,n=zf)=>H9(e, die(t), n)
  , fie = (e,t,n=zf)=>t.some(r=>W9(e, r, n))
  , a8 = (e,t)=>{
    const n = e[0]
      , r = e[1];
    let i = !1;
    for (let o = 0, s = t.length - 1; o < t.length; s = o++) {
        const a = t[o][0]
          , l = t[o][1]
          , c = t[s][0]
          , u = t[s][1];
        (l > r && u <= r || l <= r && u > r) && n < (c - a) * (r - l) / (u - l) + a && (i = !i)
    }
    return i
}
  , hie = (e,t,n=zf)=>{
    let r = !1;
    const i = Vv(t);
    for (let o = 0, s = i.length - 1; o < s; o++)
        if (Yp(e, [i[o], i[o + 1]], n)) {
            r = !0;
            break
        }
    return r
}
  , gie = (e,t)=>{
    const {angle: n, halfWidth: r, halfHeight: i, center: o} = t
      , s = r
      , a = i
      , [l,c] = U9(e, o, n)
      , u = Math.abs(l)
      , f = Math.abs(c);
    let h = .707
      , m = .707;
    for (let E = 0; E < 3; E++) {
        const b = s * h
          , _ = a * m
          , x = (s * s - a * a) * h ** 3 / s
          , C = (a * a - s * s) * m ** 3 / a
          , P = b - x
          , M = _ - C
          , A = u - x
          , I = f - C
          , O = Math.hypot(M, P)
          , N = Math.hypot(I, A);
        h = Math.min(1, Math.max(0, (A * O / N + x) / s)),
        m = Math.min(1, Math.max(0, (I * O / N + C) / a));
        const $ = Math.hypot(m, h);
        h /= $,
        m /= $
    }
    const [v,y] = [s * h * Math.sign(l), a * m * Math.sign(c)];
    return aie([l, c], [v, y])
}
  , pie = (e,t,n=zf)=>gie(e, t) <= n
  , mie = (e,t)=>{
    const {center: n, angle: r, halfWidth: i, halfHeight: o} = t
      , [s,a] = U9(e, n, r);
    return s / i * (s / i) + a / o * (a / o) <= 1
}
  , vie = (e,t)=>{
    const n = rb(e[1], e[0])
      , r = rb(t[1], t[0])
      , i = Eg(n, r);
    if (i === 0)
        return null;
    const o = rb(t[0], e[0])
      , s = Eg(o, n) / i
      , a = Eg(o, r) / i;
    if (s === 0)
        return null;
    const l = Aae(e[0], y4(n, a));
    return a >= 0 && a < 1 && s >= 0 && s < 1 ? l : null
}
  , yie = (e,t,n=0)=>{
    const r = [e.x - n, e.y - n, e.x + e.width + n, e.y + e.height + n]
      , i = [(r[0] + r[2]) / 2, (r[1] + r[3]) / 2];
    return [[Ae([r[0], r[1]], i, e.angle), Ae([r[2], r[1]], i, e.angle)], [Ae([r[2], r[1]], i, e.angle), Ae([r[2], r[3]], i, e.angle)], [Ae([r[2], r[3]], i, e.angle), Ae([r[0], r[3]], i, e.angle)], [Ae([r[0], r[3]], i, e.angle), Ae([r[0], r[1]], i, e.angle)]].map(o=>vie(t, o)).filter(o=>!!o)
}
  , g_ = (e,t,n=0)=>{
    switch (t.type) {
    case "polygon":
        return hie(e, t.data, n);
    case "ellipse":
        return pie(e, t.data, n);
    case "line":
        return Yp(e, t.data, n);
    case "polyline":
        return H9(e, t.data, n);
    case "curve":
        return W9(e, t.data, n);
    case "polycurve":
        return fie(e, t.data, n);
    default:
        throw Error(`shape ${t} is not implemented`)
    }
}
  , h2 = (e,t)=>{
    switch (t.type) {
    case "polygon":
        return a8(e, t.data);
    case "line":
        return !1;
    case "curve":
        return !1;
    case "ellipse":
        return mie(e, t.data);
    case "polyline":
        {
            const n = Vv(t.data.flat());
            return a8(e, n)
        }
    case "polycurve":
        return !1;
    default:
        throw Error(`shape ${t} is not implemented`)
    }
}
  , pt = {
    EQUAL: "Equal",
    MINUS: "Minus",
    NUM_ADD: "NumpadAdd",
    NUM_SUBTRACT: "NumpadSubtract",
    NUM_ZERO: "Numpad0",
    BRACKET_RIGHT: "BracketRight",
    BRACKET_LEFT: "BracketLeft",
    ONE: "Digit1",
    TWO: "Digit2",
    THREE: "Digit3",
    NINE: "Digit9",
    QUOTE: "Quote",
    ZERO: "Digit0",
    SLASH: "Slash",
    C: "KeyC",
    D: "KeyD",
    H: "KeyH",
    V: "KeyV",
    Z: "KeyZ",
    R: "KeyR",
    S: "KeyS"
}
  , U = {
    ARROW_DOWN: "ArrowDown",
    ARROW_LEFT: "ArrowLeft",
    ARROW_RIGHT: "ArrowRight",
    ARROW_UP: "ArrowUp",
    PAGE_UP: "PageUp",
    PAGE_DOWN: "PageDown",
    BACKSPACE: "Backspace",
    ALT: "Alt",
    CTRL_OR_CMD: Ts ? "metaKey" : "ctrlKey",
    DELETE: "Delete",
    ENTER: "Enter",
    ESCAPE: "Escape",
    QUESTION_MARK: "?",
    SPACE: " ",
    TAB: "Tab",
    CHEVRON_LEFT: "<",
    CHEVRON_RIGHT: ">",
    PERIOD: ".",
    COMMA: ",",
    SUBTRACT: "-",
    SLASH: "/",
    A: "a",
    C: "c",
    D: "d",
    E: "e",
    F: "f",
    G: "g",
    H: "h",
    I: "i",
    L: "l",
    O: "o",
    P: "p",
    Q: "q",
    R: "r",
    S: "s",
    T: "t",
    V: "v",
    X: "x",
    Y: "y",
    Z: "z",
    K: "k",
    W: "w",
    0: "0",
    1: "1",
    2: "2",
    3: "3",
    4: "4",
    5: "5",
    6: "6",
    7: "7",
    8: "8",
    9: "9"
}
  , Zh = e=>e === U.ARROW_LEFT || e === U.ARROW_RIGHT || e === U.ARROW_DOWN || e === U.ARROW_UP
  , KE = e=>e.altKey
  , kh = e=>e.shiftKey
  , bg = e=>e.shiftKey
  , G9 = e=>{
    const {angle: t, width: n, height: r, x: i, y: o} = e
      , s = Oa(t)
      , a = i + n / 2
      , l = o + r / 2
      , c = [a, l];
    let u = [];
    return e.type === "diamond" ? u = [Cn([a, o], s, c), Cn([i + n, l], s, c), Cn([a, o + r], s, c), Cn([i, l], s, c)] : u = [Cn([i, o], s, c), Cn([i + n, o], s, c), Cn([i + n, o + r], s, c), Cn([i, o + r], s, c)],
    {
        type: "polygon",
        data: u
    }
}
  , wie = (e,t,n=10)=>{
    let[r,i,o,s,a,l] = Ke(e, t, !0);
    r -= n,
    o += n,
    i -= n,
    s += n;
    const c = Oa(e.angle)
      , u = [a, l]
      , f = Cn([r, i], c, u)
      , h = Cn([o, i], c, u)
      , m = Cn([r, s], c, u)
      , v = Cn([o, s], c, u);
    return {
        type: "polygon",
        data: [f, h, v, m]
    }
}
  , Eie = e=>{
    const {width: t, height: n, angle: r, x: i, y: o} = e;
    return {
        type: "ellipse",
        data: {
            center: [i + t / 2, o + n / 2],
            angle: r,
            halfWidth: t / 2,
            halfHeight: n / 2
        }
    }
}
  , V9 = e=>{
    for (const t of e.sets)
        if (t.type === "path")
            return t.ops;
    return e.sets[0].ops
}
  , bie = (e,t=[0, 0],n,r)=>{
    const i = l=>Cn([l[0] + t[0], l[1] + t[1]], Oa(n), r)
      , o = V9(e)
      , s = [];
    let a = [0, 0];
    for (const l of o)
        if (l.op === "move" && (a = i(l.data)),
        l.op === "bcurveTo") {
            const c = i([l.data[0], l.data[1]])
              , u = i([l.data[2], l.data[3]])
              , f = i([l.data[4], l.data[5]]);
            s.push([a, c, u, f]),
            a = f
        }
    return {
        type: "polycurve",
        data: s
    }
}
  , _ie = e=>{
    let t = e[0];
    const n = [];
    for (let r = 1; r < e.length; r++) {
        const i = e[r];
        n.push([t, i]),
        t = i
    }
    return n
}
  , xie = (e,t,n=!1)=>{
    const r = Oa(e.angle)
      , i = s=>Cn($9(s, [e.x, e.y]), r, t)
      , o = _ie(e.points.map(s=>i(s)));
    return n ? {
        type: "polygon",
        data: Vv(o.flat())
    } : {
        type: "polyline",
        data: o
    }
}
  , Sie = (e,t,n=[0, 0],r,i)=>{
    const o = u=>Cn([u[0] + n[0], u[1] + n[1]], Oa(r), i);
    if (e.roundness === null)
        return {
            type: "polygon",
            data: Vv(e.points.map(u=>o(u)))
        };
    const s = V9(t)
      , a = [];
    let l = !1;
    for (const u of s)
        u.op === "move" ? (l = !l,
        l && a.push([u.data[0], u.data[1]])) : u.op === "bcurveTo" ? l && (a.push([u.data[0], u.data[1]]),
        a.push([u.data[2], u.data[3]]),
        a.push([u.data[4], u.data[5]])) : u.op === "lineTo" && l && a.push([u.data[0], u.data[1]]);
    return {
        type: "polygon",
        data: k6(a, 10, 5).map(u=>o(u))
    }
}
  , p_ = e=>{
    if (e.type === "arrow")
        return !1;
    const t = !Es(e.backgroundColor) || go(e) || eo(e) || ye(e);
    return e.type === "line" || e.type === "freedraw" ? t && Ca(e.points) : t || ga(e)
}
  , gd = ({x: e, y: t, element: n, shape: r, threshold: i=10, frameNameBound: o=null})=>{
    let s = p_(n) ? h2([e, t], r) || g_([e, t], r, i) : g_([e, t], r, i);
    return !s && o && (s = h2([e, t], {
        type: "polygon",
        data: G9(o).data
    })),
    s
}
  , Z6 = (e,t,n,r,i=0)=>{
    let[o,s,a,l] = Yl(n, r);
    return o -= i,
    s -= i,
    a += i,
    l += i,
    hN([o, s], [e, t], [a, l])
}
  , Iie = (e,t)=>!gd(e) && !Y9(e.x, e.y, j9(e.element, t)) && Z6(e.x, e.y, e.element, t)
  , Y9 = (e,t,n)=>!!n && h2([e, t], n)
  , q6 = [{
    icon: iee,
    value: "selection",
    key: U.V,
    numericKey: U[1],
    fillable: !0
}, {
    icon: oee,
    value: "rectangle",
    key: U.R,
    numericKey: U[2],
    fillable: !0
}, {
    icon: see,
    value: "diamond",
    key: U.D,
    numericKey: U[3],
    fillable: !0
}, {
    icon: aee,
    value: "ellipse",
    key: U.O,
    numericKey: U[4],
    fillable: !0
}, {
    icon: lee,
    value: "arrow",
    key: U.A,
    numericKey: U[5],
    fillable: !0
}, {
    icon: cee,
    value: "line",
    key: U.L,
    numericKey: U[6],
    fillable: !0
}, {
    icon: ip,
    value: "freedraw",
    key: [U.P, U.X],
    numericKey: U[7],
    fillable: !1
}, {
    icon: ID,
    value: "text",
    key: U.T,
    numericKey: U[8],
    fillable: !1
}, {
    icon: dee,
    value: "image",
    key: null,
    numericKey: U[9],
    fillable: !1
}, {
    icon: fee,
    value: "eraser",
    key: U.E,
    numericKey: U[0],
    fillable: !1
}]
  , Cie = e=>{
    const t = q6.find((n,r)=>n.numericKey != null && e === n.numericKey.toString() || n.key && (typeof n.key == "string" ? n.key === e : n.key.includes(e)));
    return (t == null ? void 0 : t.value) || null
}
  , ra = (e,t)=>{
    var n;
    switch (e.type) {
    case "rectangle":
    case "diamond":
    case "frame":
    case "magicframe":
    case "embeddable":
    case "image":
    case "iframe":
    case "text":
    case "selection":
        return G9(e);
    case "arrow":
    case "line":
        {
            const r = ((n = Yt.get(e)) == null ? void 0 : n[0]) ?? Yt.generateElementShape(e, null)[0]
              , [,,,,i,o] = Ke(e, t);
            return p_(e) ? Sie(e, r, [e.x, e.y], e.angle, [i, o]) : bie(r, [e.x, e.y], e.angle, [i, o])
        }
    case "ellipse":
        return Eie(e);
    case "freedraw":
        {
            const [,,,,r,i] = Ke(e, t);
            return xie(e, [r, i], p_(e))
        }
    }
}
  , j9 = (e,t)=>{
    const n = Ge(e, t);
    return n ? e.type === "arrow" ? ra({
        ...n,
        ...ke.getBoundTextElementPosition(e, n, t)
    }, t) : ra(n, t) : null
}
  , $n = [1, 0]
  , ni = [0, 1]
  , ri = [-1, 0]
  , ii = [0, -1]
  , I0 = (e,t)=>{
    const n = lie([e, t]);
    return n >= 315 || n < 45 ? ii : n >= 45 && n < 135 ? $n : n >= 135 && n < 225 ? ni : ri
}
  , yf = e=>{
    const [t,n] = e
      , r = Math.abs(t)
      , i = Math.abs(n);
    return t > i ? $n : t <= -i ? ri : n > r ? ni : ii
}
  , ua = (e,t)=>e[0] === t[0] && e[1] === t[1]
  , Q6 = (e,t,n)=>{
    const i = vN(t);
    if (e.type === "diamond") {
        if (n[0] < e.x)
            return ri;
        if (n[1] < e.y)
            return ii;
        if (n[0] > e.x + e.width)
            return $n;
        if (n[1] > e.y + e.height)
            return ni;
        const c = Ae(Qs([e.x + e.width / 2, e.y], i, 2), i, e.angle)
          , u = Ae(Qs([e.x + e.width, e.y + e.height / 2], i, 2), i, e.angle)
          , f = Ae(Qs([e.x + e.width / 2, e.y + e.height], i, 2), i, e.angle)
          , h = Ae(Qs([e.x, e.y + e.height / 2], i, 2), i, e.angle);
        return id(n, c, u, i) ? I0(c, u) : id(n, u, f, i) ? I0(u, f) : id(n, f, h, i) ? I0(f, h) : I0(h, c)
    }
    const o = Qs([t[0], t[1]], i, 2)
      , s = Qs([t[2], t[1]], i, 2)
      , a = Qs([t[0], t[3]], i, 2)
      , l = Qs([t[2], t[3]], i, 2);
    return id(n, o, s, i) ? ii : id(n, s, l, i) ? $n : id(n, l, a, i) ? ni : ri
}
  , kie = e=>!e[U.CTRL_OR_CMD]
  , zc = e=>e.isBindingEnabled
  , Ut = 5
  , Tie = (e,t)=>{
    const n = [];
    return t.forEach(r=>{
        const i = e.getNonDeletedElement(r);
        i != null && n.push(i)
    }
    ),
    n
}
  , Yv = (e,t,n,r,i)=>{
    const o = new Set
      , s = new Set;
    l8(e, t, n, "start", o, s, r),
    l8(e, n, t, "end", o, s, r);
    const a = Array.from(s).filter(l=>!o.has(l));
    Tie(i, a).forEach(l=>{
        var c;
        ue(l, {
            boundElements: (c = l.boundElements) == null ? void 0 : c.filter(u=>u.type !== "arrow" || u.id !== e.id)
        })
    }
    )
}
  , l8 = (e,t,n,r,i,o,s)=>{
    if (t !== "keep") {
        if (t === null) {
            const a = Pie(e, r);
            a != null && o.add(a);
            return
        }
        q9(e) ? (n == null || (n === "keep" ? !X9(e, t, r) : r === "start" || n.id !== t.id)) && (Ms(e, t, r, s),
        i.add(t.id)) : (Ms(e, t, r, s),
        i.add(t.id))
    }
}
  , Aie = (e,t,n)=>{
    var o, s;
    const r = Q9(e, t, n)
      , i = t === "start" ? (o = e.startBinding) == null ? void 0 : o.elementId : (s = e.endBinding) == null ? void 0 : s.elementId;
    if (i) {
        const a = n.get(i);
        if (xa(a) && tO(a, r, n))
            return a
    }
    return null
}
  , K9 = (e,t)=>["start", "end"].map(n=>Aie(e, n, t))
  , Mie = (e,t,n,r,i)=>{
    const s = e.points.length - 1
      , a = n.findIndex(f=>f === 0) > -1
      , l = n.findIndex(f=>f === s) > -1
      , c = a ? t ? Rd(e, "start", r, i) : null : Rd(e, "start", r, i)
      , u = l ? t ? Rd(e, "end", r, i) : null : Rd(e, "end", r, i);
    return [c, u]
}
  , Lie = (e,t,n,r)=>{
    const [i,o] = K9(e, t)
      , s = i && r ? Rd(e, "start", t, n) : null
      , a = o && r ? Rd(e, "end", t, n) : null;
    return [s, a]
}
  , g2 = (e,t,n,r,i,o)=>{
    e.forEach(s=>{
        const [a,l] = o != null && o.length ? Mie(s, i, o ?? [], t, n) : Lie(s, t, n, i);
        Yv(s, a, l, t, r)
    }
    )
}
  , XE = (e,t)=>e.length > 50 ? [] : e.filter(je).flatMap(n=>K9(n, t)).filter(n=>n !== null).filter(n=>e.filter(r=>r.id === (n == null ? void 0 : n.id)).length === 0)
  , m_ = (e,t,n,r,i)=>{
    t.startBoundElement != null && Ms(e, t.startBoundElement, "start", r);
    const o = ro(n, i, r, He(e) && He(e));
    o !== null && (X9(e, o, "end") || Ms(e, o, "end", r))
}
  , Ms = (e,t,n,r)=>{
    if (!Be(e))
        return;
    const i = {
        elementId: t.id,
        ...Rie(e, t, n, r),
        ...He(e) ? m2(e, t, n, r) : {
            fixedPoint: null
        }
    };
    ue(e, {
        [n === "start" ? "startBinding" : "endBinding"]: i
    }),
    De(t.boundElements || []).has(e.id) || ue(t, {
        boundElements: (t.boundElements || []).concat({
            id: e.id,
            type: "arrow"
        })
    })
}
  , X9 = (e,t,n)=>{
    const r = e[n === "start" ? "endBinding" : "startBinding"];
    return Z9(e, r == null ? void 0 : r.elementId, t)
}
  , Z9 = (e,t,n)=>t === n.id && q9(e)
  , q9 = e=>e.points.length < 3
  , Pie = (e,t)=>{
    const n = t === "start" ? "startBinding" : "endBinding"
      , r = e[n];
    return r == null ? null : (ue(e, {
        [n]: null
    }),
    r.elementId)
}
  , ro = (e,t,n,r)=>uae(t, o=>xa(o, !1) && tO(o, e, n, r && !Ue(o)))
  , Rie = (e,t,n,r)=>{
    const i = n === "start" ? -1 : 1
      , o = i === -1 ? 0 : e.points.length - 1
      , s = o - i
      , a = ke.getPointAtIndexGlobalCoordinates(e, o, r)
      , l = ke.getPointAtIndexGlobalCoordinates(e, s, r);
    return {
        focus: Yie(t, l, a, r),
        gap: Math.max(1, jp(t, a, r))
    }
}
  , vo = (e,t,n)=>{
    const {oldSize: r, simultaneouslyUpdated: i, changedElements: o} = n ?? {}
      , s = Oie(i);
    xa(e) && v2(t, e, a=>{
        var f, h;
        if (!je(a) || a.isDeleted || !Die(a, e))
            return;
        const l = {
            startBinding: c8(e, a.startBinding, r),
            endBinding: c8(e, a.endBinding, r)
        };
        if (s.has(a.id)) {
            ue(a, l);
            return
        }
        const c = y2(t, a, (m,v)=>{
            var y;
            if (m && xa(m) && (v === "startBinding" || v === "endBinding") && e.id === ((y = a[v]) == null ? void 0 : y.elementId)) {
                const E = Uie(a, v, l[v], m, t);
                if (E)
                    return {
                        index: v === "startBinding" ? 0 : a.points.length - 1,
                        point: E
                    }
            }
            return null
        }
        ).filter(m=>m !== null);
        ke.movePoints(a, c, t, {
            ...e.id === ((f = a.startBinding) == null ? void 0 : f.elementId) ? {
                startBinding: l.startBinding
            } : {},
            ...e.id === ((h = a.endBinding) == null ? void 0 : h.elementId) ? {
                endBinding: l.endBinding
            } : {}
        }, {
            changedElements: o
        });
        const u = Ge(a, t);
        u && !u.isDeleted && Hf(a, t, !1)
    }
    )
}
  , Die = (e,t)=>{
    var n, r;
    return ((n = e.startBinding) == null ? void 0 : n.elementId) === t.id || ((r = e.endBinding) == null ? void 0 : r.elementId) === t.id
}
  , Oie = e=>new Set((e || []).map(t=>t.id))
  , Nie = (e,t,n,r,i,o)=>{
    const s = yf(vu(t, e));
    return !n || !r ? s : Fie(o, n, i) ? Q6(n, r, e) : yf(vu(e, w4(n)))
}
  , Fie = (e,t,n)=>{
    const r = jp(t, e, n)
      , i = jv(t, t.width, t.height);
    return r > i ? null : r
}
  , p2 = (e,t,n,r)=>{
    const i = n && yl(n);
    if (n && i) {
        const o = Q6(n, i, e)
          , s = [...v_(n, [e[0], e[1] - 2 * n.height], [e[0], e[1] + 2 * n.height], Ut, r), ...v_(n, [e[0] - 2 * n.width, e[1]], [e[0] + 2 * n.width, e[1]], Ut, r)]
          , a = ua(o, ri) || ua(o, $n)
          , l = Math.abs(jp(n, e, r))
          , c = a ? l < n.width * -.1 : l < n.height * -.1;
        return s.sort((u,f)=>M2(u, e) - M2(f, e)),
        c ? Bie(t, n, i) : s.filter(u=>a ? Math.abs(e[1] - u[1]) < .1 : Math.abs(e[0] - u[0]) < .1)[0] ?? e
    }
    return e
}
  , Bie = (e,t,n)=>{
    const r = vN(n)
      , i = yf(vu(e, r));
    switch (!0) {
    case ua(i, ii):
        return Ae([(n[0] + n[2]) / 2 + .1, n[1]], r, t.angle);
    case ua(i, $n):
        return Ae([n[2], (n[1] + n[3]) / 2 + .1], r, t.angle);
    case ua(i, ni):
        return Ae([(n[0] + n[2]) / 2 - .1, n[3]], r, t.angle);
    default:
        return Ae([n[0], (n[1] + n[3]) / 2 - .1], r, t.angle)
    }
}
  , zie = (e,t)=>{
    const n = w4(e)
      , r = Ae(t, n, -e.angle);
    return r[0] < e.x && r[1] < e.y ? r[1] - e.y > -Ut ? Ae([e.x - Ut, e.y], n, e.angle) : Ae([e.x, e.y - Ut], n, e.angle) : r[0] < e.x && r[1] > e.y + e.height ? r[0] - e.x > -Ut ? Ae([e.x, e.y + e.height + Ut], n, e.angle) : Ae([e.x - Ut, e.y + e.height], n, e.angle) : r[0] > e.x + e.width && r[1] > e.y + e.height ? r[0] - e.x < e.width + Ut ? Ae([e.x + e.width, e.y + e.height + Ut], n, e.angle) : Ae([e.x + e.width + Ut, e.y + e.height], n, e.angle) : r[0] > e.x + e.width && r[1] < e.y ? r[0] - e.x < e.width + Ut ? Ae([e.x + e.width, e.y - Ut], n, e.angle) : Ae([e.x + e.width + Ut, e.y], n, e.angle) : t
}
  , $ie = (e,t,n=.05)=>{
    const {x: r, y: i, width: o, height: s, angle: a} = e
      , l = [r + o / 2 - .1, i + s / 2 - .1]
      , c = Ae(t, l, -a)
      , u = yu(n * s, 5, 80)
      , f = yu(n * o, 5, 80);
    return c[0] <= r + o / 2 && c[1] > l[1] - u && c[1] < l[1] + u ? Ae([r - Ut, l[1]], l, a) : c[1] <= i + s / 2 && c[0] > l[0] - f && c[0] < l[0] + f ? Ae([l[0], i - Ut], l, a) : c[0] >= r + o / 2 && c[1] > l[1] - u && c[1] < l[1] + u ? Ae([r + o + Ut, l[1]], l, a) : c[1] >= i + s / 2 && c[0] > l[0] - f && c[0] < l[0] + f ? Ae([l[0], i + s + Ut], l, a) : t
}
  , Uie = (e,t,n,r,i)=>{
    if (n == null || n.elementId !== r.id && e.points.length > 2)
        return null;
    const o = t === "startBinding" ? -1 : 1
      , s = o === -1 ? 0 : e.points.length - 1;
    if (He(e)) {
        const f = Kv(n.fixedPoint) ?? m2(e, r, t === "startBinding" ? "start" : "end", i).fixedPoint
          , h = [r.x + r.width / 2, r.y + r.height / 2]
          , m = [r.x + f[0] * r.width, r.y + f[1] * r.height]
          , v = Ae(m, h, r.angle);
        return ke.pointFromAbsoluteCoords(e, v, i)
    }
    const a = s - o
      , l = ke.getPointAtIndexGlobalCoordinates(e, a, i)
      , c = jie(r, n.focus, l, i);
    let u;
    if (n.gap === 0)
        u = c;
    else {
        const f = v_(r, l, c, n.gap, i);
        f.length === 0 ? u = c : u = f[0]
    }
    return ke.pointFromAbsoluteCoords(e, u, i)
}
  , m2 = (e,t,n,r)=>{
    const i = [t.x, t.y, t.x + t.width, t.y + t.height]
      , o = n === "start" ? 0 : e.points.length - 1
      , s = ke.getPointAtIndexGlobalCoordinates(e, o, r)
      , a = ke.getPointAtIndexGlobalCoordinates(e, o, r)
      , l = p2(s, a, t, r)
      , c = [i[0] + (i[2] - i[0]) / 2, i[1] + (i[3] - i[1]) / 2]
      , u = Ae(l, c, -t.angle);
    return {
        fixedPoint: Kv([(u[0] - t.x) / t.width, (u[1] - t.y) / t.height])
    }
}
  , c8 = (e,t,n)=>{
    if (t == null || n == null)
        return t;
    const {width: r, height: i} = n
      , {width: o, height: s} = e
      , a = Math.max(1, Math.min(jv(e, r, i), t.gap * (r < i ? r / o : i / s)));
    return {
        ...t,
        gap: a
    }
}
  , Rd = (e,t,n,r)=>ro(Q9(e, t, n), r, n)
  , Q9 = (e,t,n)=>{
    const r = t === "start" ? 0 : -1;
    return no(ke.getPointAtIndexGlobalCoordinates(e, r, n))
}
  , J9 = (e,t,n,r)=>{
    const i = new Set
      , o = new Set
      , s = r === "duplicatesServeAsOld"
      , a = new Map([...n].map(([l,c])=>[c, l]));
    t.forEach(l=>{
        const {boundElements: c} = l;
        if (c != null && c.length > 0 && (c.forEach(u=>{
            s && !n.has(u.id) && i.add(u.id)
        }
        ),
        o.add(n.get(l.id))),
        ms(l)) {
            if (l.startBinding != null) {
                const {elementId: u} = l.startBinding;
                s && !n.has(u) && o.add(u)
            }
            if (l.endBinding != null) {
                const {elementId: u} = l.endBinding;
                s && !n.has(u) && o.add(u)
            }
            (l.startBinding != null || l.endBinding != null) && i.add(n.get(l.id))
        }
    }
    ),
    e.filter(({id: l})=>i.has(l)).forEach(l=>{
        const {startBinding: c, endBinding: u} = l;
        ue(l, {
            startBinding: u8(c, n),
            endBinding: u8(u, n)
        })
    }
    ),
    e.filter(({id: l})=>o.has(l)).forEach(l=>{
        var f;
        const c = a.get(l.id)
          , u = (f = e.find(({id: h})=>h === c)) == null ? void 0 : f.boundElements;
        u && u.length > 0 && ue(l, {
            boundElements: u.map(h=>n.has(h.id) ? {
                id: n.get(h.id),
                type: h.type
            } : h)
        })
    }
    )
}
  , u8 = (e,t)=>e == null ? null : {
    ...e,
    elementId: t.get(e.elementId) ?? e.elementId
}
  , eO = (e,t)=>{
    const n = De(e);
    for (const r of t)
        Dd.unbindAffected(n, r, ue),
        Od.unbindAffected(n, r, ue)
}
  , _g = (e,t,n=[])=>{
    if (!e)
        return null;
    const r = e.filter(i=>!t.has(i.id));
    return r.push(...n.map(i=>({
        id: i.id,
        type: i.type
    }))),
    r
}
  , tO = (e,{x: t, y: n},r,i)=>{
    const o = jv(e, e.width, e.height)
      , s = ra(e, r);
    return g_([t, n], s, o) || i === !0 && Fd([t, n], yl(e))
}
  , jv = (e,t,n)=>{
    const i = (e.type === "diamond" ? 1 / Math.sqrt(2) : 1) * Math.min(t, n);
    return Math.max(16, Math.min(.25 * i, 32))
}
  , jp = (e,t,n)=>{
    switch (e.type) {
    case "rectangle":
    case "image":
    case "text":
    case "iframe":
    case "embeddable":
    case "frame":
    case "magicframe":
        return Hie(e, t, n);
    case "diamond":
        return Wie(e, t, n);
    case "ellipse":
        return Gie(e, t, n)
    }
}
  , Hie = (e,t,n)=>{
    const [,r,i,o] = J6(e, t, n);
    return Math.max(hu(r, h_(0, 1, -o)), hu(r, h_(1, 0, -i)))
}
  , Wie = (e,t,n)=>{
    const [,r,i,o] = J6(e, t, n)
      , s = h_(o, i, -o * i);
    return hu(r, s)
}
  , Gie = (e,t,n)=>{
    const [r,i] = Vie(e, t, n);
    return -jre(i) * hu(r, i)
}
  , Vie = (e,t,n)=>{
    const [,r,i,o] = J6(e, t, n)
      , [s,a] = vf(r);
    let l = .707
      , c = .707;
    const u = i
      , f = o;
    [0, 1, 2, 3].forEach(v=>{
        const y = u * l
          , E = f * c
          , b = (u * u - f * f) * l ** 3 / u
          , _ = (f * f - u * u) * c ** 3 / f
          , x = y - b
          , C = E - _
          , P = s - b
          , M = a - _
          , A = Math.hypot(C, x)
          , I = Math.hypot(M, P);
        l = Math.min(1, Math.max(0, (P * A / I + b) / u)),
        c = Math.min(1, Math.max(0, (M * A / I + _) / f));
        const O = Math.hypot(c, l);
        l /= O,
        c /= O
    }
    );
    const h = zr(u * l, f * c)
      , m = Yre(r, h);
    return [r, m]
}
  , J6 = (e,t,n)=>{
    const r = mf(t)
      , [i,o,s,a] = Ke(e, n)
      , l = t4(i, o, s, a)
      , c = z9(l, e.angle)
      , u = Cs(c, r)
      , f = t8(u, B9(l))
      , h = Kre(f)
      , m = Bre(e.x, e.y)
      , v = t8(u, m)
      , y = (s - i) / 2
      , E = (a - o) / 2;
    return [v, h, y, E]
}
  , e4 = (e,t)=>{
    const [n,r,i,o] = Ke(e, t)
      , s = t4(n, r, i, o)
      , a = z9(s, e.angle)
      , l = Wv(qre(B9(s)));
    return Jre(a, l)
}
  , t4 = (e,t,n,r)=>zr((e + n) / 2, (t + r) / 2)
  , Yie = (e,t,n,r)=>{
    const i = e4(e, r)
      , o = Cs(i, mf(t))
      , s = Cs(i, mf(n))
      , a = Vp(o, s)
      , l = e.height / e.width
      , c = e.width / 2
      , u = e.height / 2
      , f = a[2]
      , h = a[3]
      , m = a[1]
      , v = Math.abs(h)
      , y = Math.abs(f);
    let E;
    switch (e.type) {
    case "rectangle":
    case "image":
    case "text":
    case "iframe":
    case "embeddable":
    case "frame":
    case "magicframe":
        E = m / (c * (y + l * v));
        break;
    case "diamond":
        E = v < y ? m / (y * c) : m / (v * u);
        break;
    case "ellipse":
        E = m / (c * Math.sqrt(f ** 2 + l ** 2 * h ** 2));
        break
    }
    return E || 0
}
  , jie = (e,t,n,r)=>{
    if (t === 0) {
        const [l,c,u,f] = Ke(e, r)
          , h = t4(l, c, u, f);
        return vf(h)
    }
    const i = e4(e, r)
      , o = Cs(i, mf(n))
      , s = Wv(i);
    let a;
    switch (e.type) {
    case "rectangle":
    case "image":
    case "text":
    case "diamond":
    case "iframe":
    case "embeddable":
    case "frame":
    case "magicframe":
        a = eoe(e, t, o);
        break;
    case "ellipse":
        a = Jie(e, t, o);
        break
    }
    return vf(Cs(s, a))
}
  , v_ = (e,t,n,r=0,i)=>{
    if (mJ(e))
        return yie(e, [t, n], r);
    const o = e4(e, i)
      , s = Cs(o, mf(t))
      , a = Cs(o, mf(n))
      , l = Vp(s, a)
      , c = Wv(o);
    return Kie(e, l, s, r).map(f=>vf(Cs(c, f)))
}
  , Kie = (e,t,n,r=0)=>{
    let i;
    switch (e.type) {
    case "rectangle":
    case "image":
    case "text":
    case "diamond":
    case "iframe":
    case "embeddable":
    case "frame":
    case "magicframe":
        const s = nO(e);
        i = s.flatMap((a,l)=>{
            const c = [a, s[(l + 1) % 4]];
            return Xie(t, Zie(c, r))
        }
        ).concat(s.flatMap(a=>Qie(a, r, t)));
        break;
    case "ellipse":
        i = qie(e, r, t);
        break
    }
    if (i.length < 2)
        return [];
    const o = i.sort((s,a)=>n8(s, n) - n8(a, n));
    return [o[0], o[o.length - 1]]
}
  , nO = (e,t=1)=>{
    const n = t * e.width / 2
      , r = t * e.height / 2;
    switch (e.type) {
    case "rectangle":
    case "image":
    case "text":
    case "iframe":
    case "embeddable":
    case "frame":
    case "magicframe":
        return [zr(n, r), zr(n, -r), zr(-n, -r), zr(-n, r)];
    case "diamond":
        return [zr(0, r), zr(n, 0), zr(0, -r), zr(-n, 0)]
    }
}
  , Xie = (e,t)=>{
    const [n,r] = t
      , i = hu(n, e)
      , o = hu(r, e);
    return i * o >= 0 ? [] : [Xre(e, Vp(n, r))]
}
  , Zie = (e,t)=>{
    const [n,r] = e
      , i = Qre(Zre(n, r), t);
    return [Cs(i, n), Cs(i, r)]
}
  , qie = (e,t,n)=>{
    const r = e.width / 2 + t
      , i = e.height / 2 + t
      , o = n[2]
      , s = n[3]
      , a = n[1]
      , l = r * r * o * o + i * i * s * s
      , c = l - a * a;
    if (l === 0 || c <= 0)
        return [];
    const u = Math.sqrt(c)
      , f = -r * r * o * a
      , h = -i * i * s * a;
    return [zr((f + r * i * s * u) / l, (h - r * i * o * u) / l), zr((f - r * i * s * u) / l, (h + r * i * o * u) / l)]
}
  , Qie = (e,t,n)=>{
    if (t === 0)
        return hu(n, e) === 0 ? [e] : [];
    const r = n[2]
      , i = n[3]
      , o = n[1]
      , [s,a] = vf(e)
      , l = t
      , c = r * r + i * i
      , u = l * l * c - (r * s + i * a + o) ** 2;
    if (c === 0 || u <= 0)
        return [];
    const f = Math.sqrt(u)
      , h = s * i * i - a * r * i - r * o
      , m = a * r * r - s * r * i - i * o;
    return [zr((h + i * f) / c, (m - r * f) / c), zr((h - i * f) / c, (m + r * f) / c)]
}
  , Jie = (e,t,n)=>{
    const r = Math.abs(t)
      , i = e.width * r / 2
      , o = e.height * r / 2
      , s = Math.sign(t)
      , [a,l] = vf(n)
      , c = l === 0 ? 1e-4 : l
      , u = a ** 2 * o ** 2 + c ** 2 * i ** 2
      , f = (-a * o ** 2 + s * c * Math.sqrt(Math.max(0, u - i ** 2 * o ** 2))) / u;
    let h = (-f * a - 1) / c;
    h === 0 && (h = (Object.is(h, -0) ? -1 : 1) * .01);
    const m = -(i ** 2 * f) / (h ** 2 * o ** 2 + f ** 2 * i ** 2);
    return zr(m, (-f * m - 1) / h)
}
  , eoe = (e,t,n)=>{
    const r = Math.abs(t)
      , i = Math.sign(t)
      , o = nO(e, r);
    let s = 0
      , a = null;
    return o.forEach(l=>{
        const c = i * Vp(n, l)[1];
        c > s && (s = c,
        a = l)
    }
    ),
    a
}
  , toe = new Set(["boundElements", "frameId", "containerId", "startBinding", "endBinding"])
  , v2 = (e,t,n)=>{
    var r;
    xa(t) && (((r = t.boundElements) == null ? void 0 : r.slice()) ?? []).forEach(({id: o})=>{
        n(e.get(o), "boundElements", o)
    }
    )
}
  , y2 = (e,t,n)=>{
    const r = [];
    if (t.frameId) {
        const i = t.frameId;
        r.push(n(e.get(i), "frameId", i))
    }
    if (Sn(t)) {
        const i = t.containerId;
        r.push(n(e.get(i), "containerId", i))
    }
    if (Be(t)) {
        if (t.startBinding) {
            const i = t.startBinding.elementId;
            r.push(n(e.get(i), "startBinding", i))
        }
        if (t.endBinding) {
            const i = t.endBinding.elementId;
            r.push(n(e.get(i), "endBinding", i))
        }
    }
    return r
}
;
class Dd {
    static unbindAffected(t, n, r) {
        n && y2(t, n, i=>{
            !i || i.isDeleted || v2(t, i, (o,s,a)=>{
                a === n.id && r(i, {
                    boundElements: _g(i.boundElements, new Set([a]))
                })
            }
            )
        }
        )
    }
}
D(Dd, "rebindAffected", (t,n,r)=>{
    !n || n.isDeleted || y2(t, n, (i,o)=>{
        var s, a;
        if (!i || i.isDeleted) {
            r(n, {
                [o]: null
            });
            return
        }
        o !== "frameId" && ((s = i.boundElements) != null && s.find(l=>l.id === n.id) || (Be(n) && r(i, {
            boundElements: _g(i.boundElements, new Set, new Array(n))
        }),
        ye(n) && ((a = i.boundElements) != null && a.find(l=>l.type === "text") ? r(n, {
            [o]: null
        }) : r(i, {
            boundElements: _g(i.boundElements, new Set, new Array(n))
        }))))
    }
    )
}
);
class Od {
    static unbindAffected(t, n, r) {
        n && v2(t, n, i=>{
            !i || i.isDeleted || y2(t, i, (o,s,a)=>{
                a === n.id && r(i, {
                    [s]: null
                })
            }
            )
        }
        )
    }
}
D(Od, "rebindAffected", (t,n,r)=>{
    !n || n.isDeleted || v2(t, n, (i,o,s)=>{
        var a, l;
        if (!i || i.isDeleted) {
            r(n, {
                boundElements: _g(n.boundElements, new Set([s]))
            });
            return
        }
        ye(i) && (((l = (((a = n.boundElements) == null ? void 0 : a.slice()) ?? []).reverse().find(u=>u.type === "text")) == null ? void 0 : l.id) === i.id ? i.containerId !== n.id && r(i, {
            containerId: n.id
        }) : (i.containerId !== null && r(i, {
            containerId: null
        }),
        r(n, {
            boundElements: _g(n.boundElements, new Set([i.id]))
        })))
    }
    )
}
);
const y_ = (e,t)=>{
    const [n,r] = Kv(e);
    return Ae([t.x + t.width * n, t.y + t.height * r], w4(t), t.angle)
}
  , noe = (e,t)=>{
    const n = e.startBinding && t.get(e.startBinding.elementId)
      , r = e.endBinding && t.get(e.endBinding.elementId)
      , i = n && e.startBinding ? y_(e.startBinding.fixedPoint, n) : [e.x + e.points[0][0], e.y + e.points[0][1]]
      , o = r && e.endBinding ? y_(e.endBinding.fixedPoint, r) : [e.x + e.points[e.points.length - 1][0], e.y + e.points[e.points.length - 1][1]];
    return [i, o]
}
  , roe = (e,t)=>{
    const [n,r] = noe(e, t);
    return [ke.pointFromAbsoluteCoords(e, n, t), ke.pointFromAbsoluteCoords(e, r, t)]
}
  , Kv = e=>e && (e[0] === .5 || e[1] === .5) ? e.map(t=>t === .5 ? .5001 : t) : e
  , ioe = {
    selection: !0,
    text: !0,
    rectangle: !0,
    diamond: !0,
    ellipse: !0,
    line: !0,
    image: !0,
    arrow: !0,
    freedraw: !0,
    eraser: !1,
    custom: !0,
    frame: !0,
    embeddable: !0,
    hand: !0,
    laser: !1,
    magicframe: !1
}
  , ooe = e=>Object.keys(Lt).includes(e) ? Lt[e] : ec
  , C0 = (e,t)=>t ? {
    ...t,
    focus: t.focus || 0,
    fixedPoint: He(e) ? Kv(t.fixedPoint ?? [0, 0]) : null
} : null
  , gc = (e,t)=>{
    const n = {
        type: t.type || e.type,
        version: e.version || 1,
        versionNonce: e.versionNonce ?? 0,
        index: e.index ?? null,
        isDeleted: e.isDeleted ?? !1,
        id: e.id || po(),
        fillStyle: e.fillStyle || ln.fillStyle,
        strokeWidth: e.strokeWidth || ln.strokeWidth,
        strokeStyle: e.strokeStyle ?? ln.strokeStyle,
        roughness: e.roughness ?? ln.roughness,
        opacity: e.opacity == null ? ln.opacity : e.opacity,
        angle: e.angle || 0,
        x: t.x ?? e.x ?? 0,
        y: t.y ?? e.y ?? 0,
        strokeColor: e.strokeColor || ln.strokeColor,
        backgroundColor: e.backgroundColor || ln.backgroundColor,
        width: e.width || 0,
        height: e.height || 0,
        seed: e.seed ?? 1,
        groupIds: e.groupIds ?? [],
        frameId: e.frameId ?? null,
        roundness: e.roundness ? e.roundness : e.strokeSharpness === "round" ? {
            type: Rf(e.type) ? An.LEGACY : An.PROPORTIONAL_RADIUS
        } : null,
        boundElements: e.boundElementIds ? e.boundElementIds.map(r=>({
            type: "arrow",
            id: r
        })) : e.boundElements ?? [],
        updated: e.updated ?? Pf(),
        link: e.link ? Is(e.link) : null,
        locked: e.locked ?? !1
    };
    return ("customData"in e || "customData"in t) && (n.customData = "customData"in t ? t.customData : e.customData),
    {
        ...n,
        ...CN(n),
        ...t
    }
}
  , soe = e=>{
    switch (e.type) {
    case "text":
        let t = e.fontSize
          , n = e.fontFamily;
        if ("font"in e) {
            const [u,f] = e.font.split(" ");
            t = parseFloat(u),
            n = ooe(f)
        }
        const r = typeof e.text == "string" && e.text || ""
          , i = e.lineHeight || (e.height ? Gae(e) : mu(e.fontFamily));
        return e = gc(e, {
            fontSize: t,
            fontFamily: n,
            text: r,
            textAlign: e.textAlign || Np,
            verticalAlign: e.verticalAlign || e2,
            containerId: e.containerId ?? null,
            originalText: e.originalText || r,
            autoResize: e.autoResize ?? !0,
            lineHeight: i
        }),
        !r && !e.isDeleted && (e = {
            ...e,
            originalText: r,
            isDeleted: !0
        },
        e = sy(e)),
        e;
    case "freedraw":
        return gc(e, {
            points: e.points,
            lastCommittedPoint: null,
            simulatePressure: e.simulatePressure,
            pressures: e.pressures
        });
    case "image":
        return gc(e, {
            status: e.status || "pending",
            fileId: e.fileId,
            scale: e.scale || [1, 1]
        });
    case "line":
    case "draw":
        const {startArrowhead: o=null, endArrowhead: s=null} = e;
        let a = e.x
          , l = e.y
          , c = !Array.isArray(e.points) || e.points.length < 2 ? [[0, 0], [e.width, e.height]] : e.points;
        return (c[0][0] !== 0 || c[0][1] !== 0) && ({points: c, x: a, y: l} = ke.getNormalizedPoints(e)),
        gc(e, {
            type: e.type === "draw" ? "line" : e.type,
            startBinding: C0(e, e.startBinding),
            endBinding: C0(e, e.endBinding),
            lastCommittedPoint: null,
            startArrowhead: o,
            endArrowhead: s,
            points: c,
            x: a,
            y: l,
            ...up(c)
        });
    case "arrow":
        {
            const {startArrowhead: u=null, endArrowhead: f="arrow"} = e;
            let h = e.x
              , m = e.y
              , v = !Array.isArray(e.points) || e.points.length < 2 ? [[0, 0], [e.width, e.height]] : e.points;
            return (v[0][0] !== 0 || v[0][1] !== 0) && ({points: v, x: h, y: m} = ke.getNormalizedPoints(e)),
            gc(e, {
                type: e.type,
                startBinding: C0(e, e.startBinding),
                endBinding: C0(e, e.endBinding),
                lastCommittedPoint: null,
                startArrowhead: u,
                endArrowhead: f,
                points: v,
                x: h,
                y: m,
                elbowed: e.elbowed,
                ...up(v)
            })
        }
    case "ellipse":
    case "rectangle":
    case "diamond":
    case "iframe":
    case "embeddable":
        return gc(e, {});
    case "magicframe":
    case "frame":
        return gc(e, {
            name: e.name ?? null
        })
    }
    return null
}
  , aoe = (e,t)=>{
    if (e.boundElements) {
        const n = e.boundElements.slice()
          , r = new Set;
        e.boundElements = n.reduce((i,o)=>{
            const s = t.get(o.id);
            if (s && !r.has(o.id)) {
                if (r.add(o.id),
                s.isDeleted)
                    return i;
                i.push(o),
                ye(s) && !s.containerId && (s.containerId = e.id)
            }
            return i
        }
        , [])
    }
}
  , loe = (e,t)=>{
    const n = e.containerId ? t.get(e.containerId) : null;
    if (!n) {
        e.containerId = null;
        return
    }
    if (!e.isDeleted && n.boundElements && !n.boundElements.find(r=>r.id === e.id)) {
        const r = (n.boundElements || (n.boundElements = [])).slice();
        r.push({
            type: "text",
            id: e.id
        }),
        n.boundElements = r
    }
}
  , coe = (e,t)=>{
    e.frameId && (t.get(e.frameId) || (e.frameId = null))
}
  , gu = (e,t,n)=>{
    const r = new Set
      , i = t ? De(t) : null
      , o = ka((e || []).reduce((a,l)=>{
        if (l.type !== "selection" && !bu(l)) {
            let c = soe(l);
            if (c) {
                const u = i == null ? void 0 : i.get(l.id);
                u && u.version > c.version && (c = sy(c, u.version)),
                r.has(c.id) && (c = {
                    ...c,
                    id: po()
                }),
                r.add(c.id),
                a.push(c)
            }
        }
        return a
    }
    , []));
    if (!(n != null && n.repairBindings))
        return o;
    const s = De(o);
    for (const a of o)
        a.frameId && coe(a, s),
        ye(a) && a.containerId ? loe(a, s) : a.boundElements && aoe(a, s),
        n.refreshDimensions && ye(a) && Object.assign(a, EO(a, Hr(a, s), s)),
        je(a) && (a.startBinding && (!s.has(a.startBinding.elementId) || !Be(a)) && (a.startBinding = null),
        a.endBinding && (!s.has(a.endBinding.elementId) || !Be(a)) && (a.endBinding = null));
    return o
}
  , uoe = (e,t,n)=>{
    const r = t[e];
    return r !== void 0 ? r : n[e]
}
  , d8 = {
    isSidebarDocked: (e,t)=>["defaultSidebarDockedPreference", e.isSidebarDocked ?? uoe("defaultSidebarDockedPreference", e, t)]
}
  , rO = (e,t)=>{
    var i;
    e = e || {};
    const n = ho()
      , r = {};
    for (const o of Object.keys(d8))
        if (o in e) {
            const [s,a] = d8[o](e, n);
            r[s] = a
        }
    for (const [o,s] of Object.entries(n)) {
        const a = e[o]
          , l = t ? t[o] : void 0;
        r[o] = a !== void 0 ? a : l !== void 0 ? l : s
    }
    return {
        ...r,
        cursorButton: (t == null ? void 0 : t.cursorButton) || "up",
        penDetected: (t == null ? void 0 : t.penDetected) ?? (e.penMode ? e.penDetected ?? !1 : !1),
        activeTool: {
            ...bn(n, r.activeTool.type && ioe[r.activeTool.type] ? r.activeTool : {
                type: "selection"
            }),
            lastActiveTool: null,
            locked: r.activeTool.locked ?? !1
        },
        zoom: {
            value: bs(gg(e.zoom) ? e.zoom : ((i = e.zoom) == null ? void 0 : i.value) ?? n.zoom.value)
        },
        openSidebar: typeof e.openSidebar == "string" ? {
            name: Ll.name
        } : r.openSidebar,
        gridSize: xle(gg(e.gridSize) ? e.gridSize : t2),
        gridStep: FN(gg(e.gridStep) ? e.gridStep : GP)
    }
}
  , pu = (e,t,n,r)=>({
    elements: gu(e == null ? void 0 : e.elements, n, r),
    appState: rO(e == null ? void 0 : e.appState, t || null),
    files: (e == null ? void 0 : e.files) || {}
})
  , f8 = e=>{
    const t = gu(Nt(e.elements), null);
    return t.length ? {
        ...e,
        elements: t
    } : null
}
  , Xv = (e=[],t)=>{
    const n = [];
    for (const r of e)
        if (Array.isArray(r)) {
            const i = f8({
                status: t,
                elements: r,
                id: po(),
                created: Date.now()
            });
            i && n.push(i)
        } else {
            const i = r
              , o = f8({
                ...i,
                id: i.id || po(),
                status: i.status || t,
                created: i.created || Date.now()
            });
            o && n.push(o)
        }
    return n
}
  , iO = async e=>{
    let t;
    if (e.type === Re.png)
        try {
            return await (await _e(()=>Promise.resolve().then(()=>k2), void 0)).decodePngMetadata(e)
        } catch (n) {
            throw n.message === "INVALID" ? new Nc("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA") : new Nc("Error: cannot restore image")
        }
    else if ("text"in Blob ? t = await e.text() : t = await new Promise(n=>{
        const r = new FileReader;
        r.readAsText(e, "utf8"),
        r.onloadend = ()=>{
            r.readyState === FileReader.DONE && n(r.result)
        }
    }
    ),
    e.type === Re.svg)
        try {
            return await (await _e(()=>Promise.resolve().then(()=>k2), void 0)).decodeSvgMetadata({
                svg: t
            })
        } catch (n) {
            throw n.message === "INVALID" ? new Nc("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA") : new Nc("Error: cannot restore image")
        }
    return t
}
  , oO = e=>{
    var t;
    return e && ((t = e.name.match(/\.(json|excalidraw|png|svg)$/)) == null ? void 0 : t[1]) || null
}
  , doe = e=>e === "png" || e === "svg"
  , n4 = e=>{
    const t = oO(e);
    return t === "png" || t === "svg"
}
  , qc = e=>{
    const {type: t} = e || {};
    return !!t && Object.values(m6).includes(t)
}
  , sO = async(e,t,n,r)=>{
    const i = await iO(e);
    let o;
    try {
        try {
            o = JSON.parse(i)
        } catch (s) {
            throw qc(e) ? new Nc("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA") : s
        }
        if (Nre(o))
            return {
                type: Re.excalidraw,
                data: pu({
                    elements: PN(o.elements || []),
                    appState: {
                        theme: t == null ? void 0 : t.theme,
                        fileHandle: r || e.handle || null,
                        ...QP(o.appState || {}),
                        ...t ? mp(o.elements || [], t) : {}
                    },
                    files: o.files
                }, t, n, {
                    repairBindings: !0,
                    refreshDimensions: !1
                })
            };
        if (R9(o))
            return {
                type: Re.excalidrawlib,
                data: o
            };
        throw new Error("Error: invalid file")
    } catch (s) {
        throw s instanceof Nc ? s : new Error("Error: invalid file")
    }
}
  , r4 = async(e,t,n,r)=>{
    const i = await sO(e, t, n, r);
    if (i.type !== Re.excalidraw)
        throw new Error("Error: invalid file");
    return i.data
}
  , aO = (e,t="unpublished")=>{
    const n = JSON.parse(e);
    if (!R9(n))
        throw new Error("Invalid library");
    const r = n.libraryItems || n.library;
    return Xv(r, t)
}
  , foe = async(e,t="unpublished")=>aO(await iO(e), t)
  , dp = async e=>new Promise(async(t,n)=>{
    try {
        $p(e) && (e = await e),
        e.toBlob(r=>{
            if (!r)
                return n(new bJ("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));
            t(r)
        }
        )
    } catch (r) {
        n(r)
    }
}
)
  , hoe = async e=>{
    try {
        const t = await window.crypto.subtle.digest("SHA-1", await vl(e));
        return nD(new Uint8Array(t))
    } catch (t) {
        return console.error(t),
        T6(40)
    }
}
  , ZE = async e=>new Promise((t,n)=>{
    const r = new FileReader;
    r.onload = ()=>{
        const i = r.result;
        t(i)
    }
    ,
    r.onerror = i=>n(i),
    r.readAsDataURL(e)
}
)
  , goe = (e,t="")=>{
    const n = e.indexOf(",")
      , r = atob(e.slice(n + 1))
      , i = e.slice(0, n).split(":")[1].split(";")[0]
      , o = new ArrayBuffer(r.length)
      , s = new Uint8Array(o);
    for (let a = 0; a < r.length; a++)
        s[a] = r.charCodeAt(a);
    return new File([o],t,{
        type: i
    })
}
  , w_ = async(e,t)=>{
    if (e.type === Re.svg)
        return e;
    const [n,r] = await Promise.all([_e(()=>import("./pica-Ckuc2DK-.js").then(o=>o.p), __vite__mapDeps([0, 1])).then(o=>o.default), _e(()=>import("./image-blob-reduce.esm-xKov1Fz_.js"), __vite__mapDeps([])).then(o=>o.default)])
      , i = r({
        pica: n({
            features: ["js", "wasm"]
        })
    });
    if (t.outputType) {
        const {outputType: o} = t;
        i._create_blob = function(s) {
            return this.pica.toBlob(s.out_canvas, o, .8).then(a=>(s.out_blob = a,
            s))
        }
    }
    if (!qc(e))
        throw new Error("Error: unsupported file type",{
            cause: "UNSUPPORTED"
        });
    return new File([await i.toBlob(e, {
        max: t.maxWidthOrHeight
    })],e.name,{
        type: t.outputType || e.type
    })
}
  , h8 = (e,t="")=>new File([new TextEncoder().encode(e)],t,{
    type: Re.svg
})
  , poe = async(e,t="")=>{
    let n;
    try {
        n = await fetch(e)
    } catch {
        throw new Error("Error: failed to fetch image",{
            cause: "FETCH_ERROR"
        })
    }
    if (!n.ok)
        throw new Error("Error: failed to fetch image",{
            cause: "FETCH_ERROR"
        });
    const r = await n.blob();
    if (r.type && qc(r)) {
        const i = t || r.name || "";
        return new File([r],i,{
            type: r.type
        })
    }
    throw new Error("Error: unsupported file type",{
        cause: "UNSUPPORTED"
    })
}
  , moe = async e=>{
    const t = e.dataTransfer.files.item(0)
      , n = await voe(e);
    return {
        file: t ? await i4(t) : null,
        fileHandle: n
    }
}
  , voe = async e=>{
    if (Mu)
        try {
            return await e.dataTransfer.items[0].getAsFileSystemHandle() || null
        } catch (t) {
            return console.warn(t.name, t.message),
            null
        }
    return null
}
  , g8 = e=>{
    let t = null;
    const n = `${[...new Uint8Array(e).slice(0, 8)].join(" ")} `
      , r = {
        png: "137 80 78 71 13 10 26 10 ",
        jpg: "255 216 255 ",
        gif: "71 73 70 56 57 97 "
    };
    return n === r.png ? t = Re.png : n.startsWith(r.jpg) ? t = Re.jpg : n.startsWith(r.gif) && (t = Re.gif),
    t
}
  , k0 = (e,t,n)=>new File([e],n || "",{
    type: t
})
  , i4 = async e=>{
    var t, n;
    if (e.type) {
        if (qc(e)) {
            const r = await vl(e)
              , i = g8(r);
            i && i !== e.type && (e = k0(r, i, e.name))
        }
    } else if ((t = e == null ? void 0 : e.name) != null && t.endsWith(".excalidrawlib"))
        e = k0(await vl(e), Re.excalidrawlib, e.name);
    else if ((n = e == null ? void 0 : e.name) != null && n.endsWith(".excalidraw"))
        e = k0(await vl(e), Re.excalidraw, e.name);
    else {
        const r = await vl(e)
          , i = g8(r);
        i && (e = k0(r, i, e.name))
    }
    return e
}
  , vl = e=>"arrayBuffer"in e ? e.arrayBuffer() : new Promise((t,n)=>{
    const r = new FileReader;
    r.onload = i=>{
        var o;
        if (!((o = i.target) != null && o.result))
            return n(new Error("Couldn't convert blob to ArrayBuffer"));
        t(i.target.result)
    }
    ,
    r.readAsArrayBuffer(e)
}
)
  , mm = 12
  , yoe = ()=>{
    const e = new Uint8Array(mm);
    return window.crypto.getRandomValues(e)
}
  , o4 = async e=>{
    const t = await window.crypto.subtle.generateKey({
        name: "AES-GCM",
        length: jP
    }, !0, ["encrypt", "decrypt"]);
    return e === "cryptoKey" ? t : (await window.crypto.subtle.exportKey("jwk", t)).k
}
  , lO = (e,t)=>window.crypto.subtle.importKey("jwk", {
    alg: "A128GCM",
    ext: !0,
    k: e,
    key_ops: ["encrypt", "decrypt"],
    kty: "oct"
}, {
    name: "AES-GCM",
    length: jP
}, !1, [t])
  , Zv = async(e,t)=>{
    const n = typeof e == "string" ? await lO(e, "encrypt") : e
      , r = yoe()
      , i = typeof t == "string" ? new TextEncoder().encode(t) : t instanceof Uint8Array ? t : t instanceof Blob ? await vl(t) : t;
    return {
        encryptedBuffer: await window.crypto.subtle.encrypt({
            name: "AES-GCM",
            iv: r
        }, n, i),
        iv: r
    }
}
  , fp = async(e,t,n)=>{
    const r = await lO(n, "decrypt");
    return window.crypto.subtle.decrypt({
        name: "AES-GCM",
        iv: e
    }, r, t)
}
  , w2 = e=>new Promise((t,n)=>{
    const r = typeof e == "string" ? new Blob([new TextEncoder().encode(e)]) : new Blob([e instanceof Uint8Array ? e : new Uint8Array(e)])
      , i = new FileReader;
    i.onload = o=>{
        if (!o.target || typeof o.target.result != "string")
            return n(new Error("couldn't convert to byte string"));
        t(o.target.result)
    }
    ,
    i.readAsBinaryString(r)
}
)
  , cO = e=>{
    const t = new ArrayBuffer(e.length)
      , n = new Uint8Array(t);
    for (let r = 0, i = e.length; r < i; r++)
        n[r] = e.charCodeAt(r);
    return t
}
  , uO = e=>new TextDecoder("utf-8").decode(cO(e))
  , dO = async(e,t=!1)=>t ? window.btoa(e) : window.btoa(await w2(e))
  , woe = async(e,t=!1)=>t ? window.atob(e) : uO(window.atob(e))
  , fO = async({text: e, compress: t})=>{
    let n;
    if (t !== !1)
        try {
            n = await w2(Hv.deflate(e))
        } catch (r) {
            console.error("encode: cannot deflate", r)
        }
    return {
        version: "1",
        encoding: "bstring",
        compressed: !!n,
        encoded: n || await w2(e)
    }
}
  , hO = async e=>{
    let t;
    switch (e.encoding) {
    case "bstring":
        t = e.compressed ? e.encoded : await uO(e.encoded);
        break;
    default:
        throw new Error(`decode: unknown encoding "${e.encoding}"`)
    }
    return e.compressed ? Hv.inflate(new Uint8Array(cO(t)), {
        to: "string"
    }) : t
}
  , gO = 1
  , vm = 4
  , Kd = 4
  , qE = {
    1: 8,
    2: 16,
    4: 32
};
function E2(e, t, n, r) {
    if (r != null) {
        if (r > Math.pow(2, qE[t]) - 1)
            throw new Error(`attempting to set value higher than the allocated bytes (value: ${r}, bytes: ${t})`);
        const o = `setUint${qE[t]}`;
        return new DataView(e.buffer)[o](n, r),
        e
    }
    const i = `getUint${qE[t]}`;
    return new DataView(e.buffer)[i](n)
}
const p8 = (...e)=>{
    const t = new Uint8Array(vm + Kd * e.length + e.reduce((r,i)=>r + i.byteLength, 0));
    let n = 0;
    E2(t, vm, n, gO),
    n += vm;
    for (const r of e)
        E2(t, Kd, n, r.byteLength),
        n += Kd,
        t.set(r, n),
        n += r.byteLength;
    return t
}
  , m8 = e=>{
    const t = [];
    let n = 0;
    const r = E2(e, Kd, n);
    if (r > gO)
        throw new Error(`invalid version ${r}`);
    for (n += vm; ; ) {
        const i = E2(e, Kd, n);
        if (n += Kd,
        t.push(e.slice(n, n + i)),
        n += i,
        n >= e.byteLength)
            break
    }
    return t
}
  , Eoe = async(e,t)=>{
    const {encryptedBuffer: n, iv: r} = await Zv(t, Hv.deflate(e));
    return {
        iv: r,
        buffer: new Uint8Array(n)
    }
}
  , pO = async(e,t)=>{
    const n = {
        version: 2,
        compression: "pako@1",
        encryption: "AES-GCM"
    }
      , r = new TextEncoder().encode(JSON.stringify(n))
      , i = new TextEncoder().encode(JSON.stringify(t.metadata || null))
      , {iv: o, buffer: s} = await Eoe(p8(i, e), t.encryptionKey);
    return p8(r, o, s)
}
  , boe = async(e,t,n,r)=>(t = new Uint8Array(await fp(e, t, n)),
r ? Hv.inflate(t) : t)
  , mO = async(e,t)=>{
    const [n,r,i] = m8(e)
      , o = JSON.parse(new TextDecoder().decode(n));
    try {
        const [s,a] = m8(await boe(r, i, t.decryptionKey, !!o.compression));
        return {
            metadata: JSON.parse(new TextDecoder().decode(s)),
            data: a
        }
    } catch (s) {
        throw console.error("Error during decompressing and decrypting the file.", o),
        s
    }
}
;
var QE = {
    VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
    VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
    VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
    VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
    VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
    VITE_APP_PLUS_APP: "https://app.excalidraw.com",
    VITE_APP_AI_BACKEND: "https://oss-ai.excalidraw.com",
    VITE_APP_WS_SERVER_URL: "https://oss-collab.excalidraw.com",
    VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
    VITE_APP_ENABLE_TRACKING: "true",
    VITE_APP_GIT_SHA: "fb4bb29aa5d9f03c60afc9984b01f25bcd117970",
    BASE_URL: "/",
    MODE: "production",
    DEV: !1,
    PROD: !0,
    SSR: !1
};
const _oe = `https://unpkg.com/${QE.VITE_PKG_NAME ? `${QE.VITE_PKG_NAME}@${QE.PKG_VERSION}` : "@excalidraw/excalidraw"}/dist/prod/`;
class b2 {
    constructor(t, n, r) {
        D(this, "urls");
        D(this, "fontFace");
        this.urls = b2.createUrls(n);
        const i = this.urls.map(o=>`url(${o}) ${b2.getFormat(o)}`).join(", ");
        this.fontFace = new FontFace(t,i,{
            display: "swap",
            style: "normal",
            weight: "400",
            ...r
        })
    }
    async getContent() {
        let t = 0;
        const n = [];
        for (; t < this.urls.length; ) {
            const r = this.urls[t];
            if (r.protocol === "data:")
                return r.toString();
            try {
                const i = await fetch(r, {
                    headers: {
                        Accept: "font/woff2"
                    }
                });
                if (i.ok) {
                    const o = await i.headers.get("Content-Type")
                      , s = await i.arrayBuffer();
                    return `data:${o};base64,${await dO(await w2(s), !0)}`
                }
                n.push(`"${r.toString()}" returned status "${i.status}"`)
            } catch (i) {
                n.push(`"${r.toString()}" returned error "${i}"`)
            }
            t++
        }
        return console.error(`Failed to fetch font "${this.fontFace.family}" from urls "${this.urls.toString()}`, JSON.stringify(n, void 0, 2)),
        this.urls.length ? this.urls[this.urls.length - 1].toString() : ""
    }
    static createUrls(t) {
        if (t.startsWith(GD))
            return [];
        if (t.startsWith("http") || t.startsWith("data"))
            return [new URL(t)];
        const n = t.replace(/^\/+/, "")
          , r = [];
        if (typeof window.EXCALIDRAW_ASSET_PATH == "string") {
            const i = this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);
            r.push(new URL(n,i))
        } else
            Array.isArray(window.EXCALIDRAW_ASSET_PATH) && window.EXCALIDRAW_ASSET_PATH.forEach(i=>{
                const o = this.normalizeBaseUrl(i);
                r.push(new URL(n,o))
            }
            );
        return r.push(new URL(n,_oe)),
        r
    }
    static getFormat(t) {
        try {
            const r = new URL(t).pathname.split(".");
            return r.length === 1 ? "" : `format('${r.pop()}')`
        } catch {
            return ""
        }
    }
    static normalizeBaseUrl(t) {
        var r;
        let n = t;
        return /^\.?\//.test(n) && (n = new URL(n.replace(/^\.?\/+/, ""),(r = window == null ? void 0 : window.location) == null ? void 0 : r.origin).toString()),
        n = `${n.replace(/\/+$/, "")}/`,
        n
    }
}
const xoe = "/Virgil-Regular-hO16qHwV.woff2"
  , Soe = "/Excalifont-Regular-C9eKQy_N.woff2"
  , Ioe = "/CascadiaCode-Regular-B4uqZjLm.woff2"
  , Coe = "/ComicShanns-Regular-D0c8wzsC.woff2"
  , koe = "/LiberationSans-Regular-CIc5jr9A.woff2"
  , Toe = "https://fonts.gstatic.com/s/lilitaone/v15/i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2"
  , Aoe = "https://fonts.gstatic.com/s/lilitaone/v15/i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2"
  , Moe = "https://fonts.gstatic.com/s/nunito/v26/XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2"
  , Loe = "https://fonts.gstatic.com/s/nunito/v26/XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2"
  , Poe = "https://fonts.gstatic.com/s/nunito/v26/XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2"
  , Roe = "https://fonts.gstatic.com/s/nunito/v26/XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2"
  , Doe = "https://fonts.gstatic.com/s/nunito/v26/XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2"
  , en = class en {
    constructor({scene: t}) {
        D(this, "scene");
        D(this, "onLoaded", t=>{
            if (t.every(i=>{
                const o = `${i.family}-${i.style}-${i.weight}-${i.unicodeRange}`;
                return en.loadedFontsCache.has(o) ? !0 : (en.loadedFontsCache.add(o),
                !1)
            }
            ))
                return !1;
            let n = !1;
            const r = this.scene.getNonDeletedElementsMap();
            for (const i of this.scene.getNonDeletedElements())
                if (ye(i)) {
                    n = !0,
                    Yt.delete(i);
                    const o = Hr(i, r);
                    o && Yt.delete(o)
                }
            n && this.scene.triggerUpdate()
        }
        );
        D(this, "loadSceneFonts", async()=>{
            const t = this.getSceneFontFamilies()
              , n = await en.loadFontFaces(t);
            return this.onLoaded(n),
            n
        }
        );
        D(this, "getSceneFontFamilies", ()=>en.getFontFamilies(this.scene.getNonDeletedElements()));
        this.scene = t
    }
    static get registered() {
        return en._registered ? en._initialized || (en._registered = new Map([...en.init().entries(), ...en._registered.entries()])) : en._registered = en.init(),
        en._registered
    }
    get registered() {
        return en.registered
    }
    static async loadFontFaces(t) {
        for (const {fonts: r, metadata: i} of en.registered.values())
            if (!i.local)
                for (const {fontFace: o} of r)
                    window.document.fonts.has(o) || window.document.fonts.add(o);
        return (await Promise.all(t.map(async r=>{
            var o;
            const i = Ht({
                fontFamily: r,
                fontSize: 16
            });
            if (!window.document.fonts.check(i))
                try {
                    return await window.document.fonts.load(i)
                } catch (s) {
                    console.error(`Failed to load font "${i}" from urls "${(o = en.registered.get(r)) == null ? void 0 : o.fonts.map(a=>a.urls)}"`, s)
                }
            return Promise.resolve()
        }
        ))).flat().filter(Boolean)
    }
    static init() {
        const t = {
            registered: new Map
        }
          , n = Ooe.bind(t);
        return n("Virgil", cs[Lt.Virgil], {
            uri: xoe
        }),
        n("Excalifont", cs[Lt.Excalifont], {
            uri: Soe
        }),
        n("Helvetica", cs[Lt.Helvetica], {
            uri: GD
        }),
        n("Liberation Sans", cs[Lt["Liberation Sans"]], {
            uri: koe
        }),
        n("Cascadia", cs[Lt.Cascadia], {
            uri: Ioe
        }),
        n("Comic Shanns", cs[Lt["Comic Shanns"]], {
            uri: Coe
        }),
        n("Lilita One", cs[Lt["Lilita One"]], {
            uri: Aoe,
            descriptors: {
                unicodeRange: hc.LATIN_EXT
            }
        }, {
            uri: Toe,
            descriptors: {
                unicodeRange: hc.LATIN
            }
        }),
        n("Nunito", cs[Lt.Nunito], {
            uri: Roe,
            descriptors: {
                unicodeRange: hc.CYRILIC_EXT,
                weight: "500"
            }
        }, {
            uri: Poe,
            descriptors: {
                unicodeRange: hc.CYRILIC,
                weight: "500"
            }
        }, {
            uri: Doe,
            descriptors: {
                unicodeRange: hc.VIETNAMESE,
                weight: "500"
            }
        }, {
            uri: Loe,
            descriptors: {
                unicodeRange: hc.LATIN_EXT,
                weight: "500"
            }
        }, {
            uri: Moe,
            descriptors: {
                unicodeRange: hc.LATIN,
                weight: "500"
            }
        }),
        en._initialized = !0,
        t.registered
    }
    static getFontFamilies(t) {
        return Array.from(t.reduce((n,r)=>(ye(r) && n.add(r.fontFamily),
        n), new Set))
    }
}
;
D(en, "loadedFontsCache", new Set),
D(en, "_registered"),
D(en, "_initialized", !1),
D(en, "loadFontsForElements", async t=>{
    const n = en.getFontFamilies(t);
    return await en.loadFontFaces(n)
}
);
let Yo = en;
function Ooe(e, t, ...n) {
    const r = Lt[e];
    return this.registered.get(r) || this.registered.set(r, {
        metadata: t,
        fonts: n.map(({uri: o, descriptors: s})=>new b2(e,o,s))
    }),
    this.registered
}
const vO = (e,t,n)=>{
    var c;
    const {unitsPerEm: r, ascender: i, descender: o} = ((c = Yo.registered.get(e)) == null ? void 0 : c.metadata.metrics) || cs[Lt.Virgil].metrics
      , s = t / r
      , a = (n - s * i + s * o) / 2;
    return s * i + a
}
  , mu = e=>{
    var n;
    const {lineHeight: t} = ((n = Yo.registered.get(e)) == null ? void 0 : n.metadata.metrics) || cs[Lt.Excalifont].metrics;
    return t
}
  , Ds = (e,{x: t, y: n, strokeColor: r=ln.strokeColor, backgroundColor: i=ln.backgroundColor, fillStyle: o=ln.fillStyle, strokeWidth: s=ln.strokeWidth, strokeStyle: a=ln.strokeStyle, roughness: l=ln.roughness, opacity: c=ln.opacity, width: u=0, height: f=0, angle: h=0, groupIds: m=[], frameId: v=null, index: y=null, roundness: E=null, boundElements: b=null, link: _=null, locked: x=ln.locked, ...C})=>({
    id: C.id || po(),
    type: e,
    x: t,
    y: n,
    width: u,
    height: f,
    angle: h,
    strokeColor: r,
    backgroundColor: i,
    fillStyle: o,
    strokeWidth: s,
    strokeStyle: a,
    roughness: l,
    opacity: c,
    groupIds: m,
    frameId: v,
    index: y,
    roundness: E,
    seed: C.seed ?? nc(),
    version: C.version || 1,
    versionNonce: C.versionNonce ?? 0,
    isDeleted: !1,
    boundElements: b,
    updated: Pf(),
    link: _,
    locked: x,
    customData: C.customData
})
  , Sa = e=>Ds(e.type, e)
  , v8 = e=>Ds("embeddable", e)
  , Noe = e=>({
    ...Ds("iframe", e)
})
  , yO = e=>Ne({
    ...Ds("frame", e),
    type: "frame",
    name: (e == null ? void 0 : e.name) || null
}, {})
  , E_ = e=>Ne({
    ...Ds("magicframe", e),
    type: "magicframe",
    name: (e == null ? void 0 : e.name) || null
}, {})
  , wO = (e,t)=>({
    x: e.textAlign === "center" ? t.width / 2 : e.textAlign === "right" ? t.width : 0,
    y: e.verticalAlign === "middle" ? t.height / 2 : 0
})
  , yo = e=>{
    const t = e.fontFamily || ec
      , n = e.fontSize || Ra
      , r = e.lineHeight || mu(t)
      , i = _f(e.text)
      , o = Oi(i, Ht({
        fontFamily: t,
        fontSize: n
    }), r)
      , s = e.textAlign || Np
      , a = e.verticalAlign || e2
      , l = wO({
        textAlign: s,
        verticalAlign: a
    }, o)
      , c = {
        ...Ds("text", e),
        text: i,
        fontSize: n,
        fontFamily: t,
        textAlign: s,
        verticalAlign: a,
        x: e.x - l.x,
        y: e.y - l.y,
        width: o.width,
        height: o.height,
        containerId: e.containerId || null,
        originalText: e.originalText ?? i,
        autoResize: e.autoResize ?? !0,
        lineHeight: r
    };
    return Ne(c, {})
}
  , Foe = (e,t,n)=>{
    let {width: r, height: i} = Oi(n, Ht(e), e.lineHeight);
    e.autoResize || (r = e.width);
    const {textAlign: o, verticalAlign: s} = e;
    let a, l;
    if (o === "center" && s === Ai.MIDDLE && !e.containerId && e.autoResize) {
        const c = Oi(e.text, Ht(e), e.lineHeight)
          , u = wO(e, {
            width: r - c.width,
            height: i - c.height
        });
        a = e.x - u.x,
        l = e.y - u.y
    } else {
        const [c,u,f,h] = Ke(e, t)
          , [m,v,y,E] = Jc(e, r, i, !1)
          , b = (c - m) / 2
          , _ = (u - v) / 2
          , x = (f - y) / 2
          , C = (h - E) / 2;
        [a,l] = Sae({
            s: !0,
            e: o === "center" || o === "left",
            w: o === "center" || o === "right"
        }, e.x, e.y, e.angle, b, _, x, C)
    }
    return {
        width: r,
        height: i,
        x: Number.isFinite(a) ? a : e.x,
        y: Number.isFinite(l) ? l : e.y
    }
}
  , EO = (e,t,n,r=e.text)=>{
    if (e.isDeleted)
        return;
    (t || !e.autoResize) && (r = Ru(r, Ht(e), t ? jo(t, e) : e.width));
    const i = Foe(e, n, r);
    return {
        text: r,
        ...i
    }
}
  , Boe = e=>({
    ...Ds(e.type, e),
    points: e.points || [],
    pressures: [],
    simulatePressure: e.simulatePressure,
    lastCommittedPoint: null
})
  , Qc = e=>({
    ...Ds(e.type, e),
    points: e.points || [],
    lastCommittedPoint: null,
    startBinding: null,
    endBinding: null,
    startArrowhead: null,
    endArrowhead: null
})
  , s4 = e=>({
    ...Ds(e.type, e),
    points: e.points || [],
    lastCommittedPoint: null,
    startBinding: null,
    endBinding: null,
    startArrowhead: e.startArrowhead || null,
    endArrowhead: e.endArrowhead || null,
    elbowed: e.elbowed || !1
})
  , bO = e=>({
    ...Ds("image", e),
    strokeColor: "transparent",
    status: e.status ?? "pending",
    fileId: e.fileId ?? null,
    scale: e.scale ?? [1, 1]
})
  , _2 = (e,t=0)=>{
    if (e == null || typeof e != "object")
        return e;
    if (Object.prototype.toString.call(e) === "[object Object]") {
        const r = typeof e.constructor == "function" ? Object.create(Object.getPrototypeOf(e)) : {};
        for (const i in e)
            if (e.hasOwnProperty(i)) {
                if (t === 0 && (i === "shape" || i === "canvas"))
                    continue;
                r[i] = _2(e[i], t + 1)
            }
        return r
    }
    if (Array.isArray(e)) {
        let r = e.length;
        const i = new Array(r);
        for (; r--; )
            i[r] = _2(e[r], t + 1);
        return i
    }
    return e
}
  , $f = e=>_2(e)
  , x2 = e=>po()
  , _O = (e,t,n,r)=>{
    let i = $f(n);
    return i.id = x2(i.id),
    i.boundElements = null,
    i.updated = Pf(),
    i.seed = nc(),
    i.groupIds = OJ(i.groupIds, e, o=>(t.has(o) || t.set(o, x2()),
    t.get(o))),
    r && (i = Object.assign(i, r)),
    i
}
  , xO = (e,t)=>{
    const n = []
      , r = De(e)
      , i = new Map
      , o = a=>{
        if (i.has(a))
            return i.get(a);
        if (r.has(a)) {
            const l = x2();
            return i.set(a, l),
            l
        }
        return null
    }
      , s = new Map;
    for (const a of e) {
        const l = _2(a);
        if (l.id = o(a.id),
        t != null && t.randomizeSeed && (l.seed = nc(),
        sy(l)),
        l.groupIds && (l.groupIds = l.groupIds.map(c=>(s.has(c) || s.set(c, x2()),
        s.get(c)))),
        "containerId"in l && l.containerId) {
            const c = o(l.containerId);
            l.containerId = c
        }
        if ("boundElements"in l && l.boundElements && (l.boundElements = l.boundElements.reduce((c,u)=>{
            const f = o(u.id);
            return f && c.push({
                ...u,
                id: f
            }),
            c
        }
        , [])),
        "endBinding"in l && l.endBinding) {
            const c = o(l.endBinding.elementId);
            l.endBinding = c ? {
                ...l.endBinding,
                elementId: c
            } : null
        }
        if ("startBinding"in l && l.startBinding) {
            const c = o(l.startBinding.elementId);
            l.startBinding = c ? {
                ...l.startBinding,
                elementId: c
            } : null
        }
        l.frameId && (l.frameId = o(l.frameId)),
        n.push(l)
    }
    return n
}
;
class _t {
    constructor(t, n) {
        this.deleted = t,
        this.inserted = n
    }
    static create(t, n, r, i) {
        const o = r && i !== "inserted" ? r(t) : t
          , s = r && i !== "deleted" ? r(n) : n;
        return new _t(o,s)
    }
    static calculate(t, n, r, i) {
        if (t === n)
            return _t.empty();
        const o = {}
          , s = {};
        for (const c of this.distinctKeysIterator("full", t, n))
            o[c] = t[c],
            s[c] = n[c];
        const [a,l] = i ? i(o, s) : [o, s];
        return _t.create(a, l, r)
    }
    static empty() {
        return new _t({},{})
    }
    static isEmpty(t) {
        return !Object.keys(t.deleted).length && !Object.keys(t.inserted).length
    }
    static mergeObjects(t, n, r) {
        const i = {
            ...t
        };
        for (const o of Object.keys(r))
            delete i[o];
        return {
            ...i,
            ...n
        }
    }
    static mergeArrays(t, n, r, i) {
        return Object.values(_t.mergeObjects(Ys(t ?? [], i), Ys(n ?? [], i), Ys(r ?? [], i)))
    }
    static diffObjects(t, n, r, i) {
        if (!(!t[r] && !n[r]) && (typeof t[r] == "object" || typeof n[r] == "object")) {
            const o = t[r] ?? {}
              , s = n[r] ?? {}
              , a = _t.getLeftDifferences(o, s).reduce((c,u)=>(c[u] = i(o[u]),
            c), {})
              , l = _t.getRightDifferences(o, s).reduce((c,u)=>(c[u] = i(s[u]),
            c), {});
            Object.keys(a).length || Object.keys(l).length ? (Reflect.set(t, r, a),
            Reflect.set(n, r, l)) : (Reflect.deleteProperty(t, r),
            Reflect.deleteProperty(n, r))
        }
    }
    static diffArrays(t, n, r, i) {
        if (!(!t[r] && !n[r]) && (Array.isArray(t[r]) || Array.isArray(n[r]))) {
            const o = Array.isArray(t[r]) ? t[r] : []
              , s = Array.isArray(n[r]) ? n[r] : []
              , a = Ys(_t.getLeftDifferences(Ys(o, i), Ys(s, i)))
              , l = Ys(_t.getRightDifferences(Ys(o, i), Ys(s, i)));
            if (Object.keys(a).length || Object.keys(l).length) {
                const c = o.filter(f=>a[i ? i(f) : String(f)])
                  , u = s.filter(f=>l[i ? i(f) : String(f)]);
                Reflect.set(t, r, c),
                Reflect.set(n, r, u)
            } else
                Reflect.deleteProperty(t, r),
                Reflect.deleteProperty(n, r)
        }
    }
    static isLeftDifferent(t, n, r=!1) {
        return !!this.distinctKeysIterator("left", t, n, r).next().value
    }
    static isRightDifferent(t, n, r=!1) {
        return !!this.distinctKeysIterator("right", t, n, r).next().value
    }
    static getLeftDifferences(t, n, r=!1) {
        return Array.from(this.distinctKeysIterator("left", t, n, r))
    }
    static getRightDifferences(t, n, r=!1) {
        return Array.from(this.distinctKeysIterator("right", t, n, r))
    }
    static*distinctKeysIterator(t, n, r, i=!1) {
        if (n === r)
            return;
        let o = [];
        t === "left" ? o = Object.keys(n) : t === "right" ? o = Object.keys(r) : t === "full" ? o = Array.from(new Set([...Object.keys(n), ...Object.keys(r)])) : Gl(t, `Unknown distinctKeysIterator's join param "${t}"`, !0);
        for (const s of o) {
            const a = n[s]
              , l = r[s];
            if (a !== l) {
                if (!i && typeof a == "object" && typeof l == "object" && a !== null && l !== null && Xn(a, l))
                    continue;
                yield s
            }
        }
    }
}
class wr {
    constructor(t) {
        this.delta = t
    }
    static calculate(t, n) {
        const r = _t.calculate(t, n, void 0, wr.postProcess);
        return new wr(r)
    }
    static empty() {
        return new wr(_t.create({}, {}))
    }
    inverse() {
        const t = _t.create(this.delta.inserted, this.delta.deleted);
        return new wr(t)
    }
    applyTo(t, n) {
        try {
            const {selectedElementIds: r={}, selectedGroupIds: i={}} = this.delta.deleted
              , {selectedElementIds: o={}, selectedGroupIds: s={}, selectedLinearElementId: a, editingLinearElementId: l, ...c} = this.delta.inserted
              , u = _t.mergeObjects(t.selectedElementIds, o, r)
              , f = _t.mergeObjects(t.selectedGroupIds, s, i)
              , h = a && n.has(a) ? new ke(n.get(a)) : null
              , m = l && n.has(l) ? new ke(n.get(l)) : null
              , v = {
                ...t,
                ...c,
                selectedElementIds: u,
                selectedGroupIds: f,
                selectedLinearElement: typeof a < "u" ? h : t.selectedLinearElement,
                editingLinearElement: typeof l < "u" ? m : t.editingLinearElement
            }
              , y = this.filterInvisibleChanges(t, v, n);
            return [v, y]
        } catch (r) {
            return console.error("Couldn't apply appstate change", r),
            [t, !1]
        }
    }
    isEmpty() {
        return _t.isEmpty(this.delta)
    }
    static postProcess(t, n) {
        try {
            _t.diffObjects(t, n, "selectedElementIds", r=>!0),
            _t.diffObjects(t, n, "selectedGroupIds", r=>r ?? !1)
        } catch {
            console.error("Couldn't postprocess appstate change deltas.")
        } finally {
            return [t, n]
        }
    }
    filterInvisibleChanges(t, n, r) {
        const i = I2(t)
          , o = I2(n)
          , s = _t.isRightDifferent(wr.stripElementsProps(i), wr.stripElementsProps(o))
          , a = _t.isRightDifferent(wr.stripStandaloneProps(i), wr.stripStandaloneProps(o));
        if (!s && !a)
            return !1;
        const l = {
            value: s
        };
        if (a) {
            const c = _t.getRightDifferences(wr.stripStandaloneProps(i), wr.stripStandaloneProps(o));
            let u = new Set;
            (c.includes("editingGroupId") || c.includes("selectedGroupIds")) && (u = BJ(r));
            for (const f of c)
                switch (f) {
                case "selectedElementIds":
                    n[f] = wr.filterSelectedElements(n[f], r, l);
                    break;
                case "selectedGroupIds":
                    n[f] = wr.filterSelectedGroups(n[f], u, l);
                    break;
                case "editingGroupId":
                    const h = n[f];
                    h ? u.has(h) ? l.value = !0 : n[f] = null : l.value = !0;
                    break;
                case "selectedLinearElementId":
                case "editingLinearElementId":
                    const m = wr.convertToAppStateKey(f)
                      , v = n[m];
                    if (!v)
                        l.value = !0;
                    else {
                        const y = r.get(v.elementId);
                        y && !y.isDeleted ? l.value = !0 : n[m] = null
                    }
                    break;
                default:
                    Gl(f, `Unknown ObservedElementsAppState's key "${f}"`, !0)
                }
        }
        return l.value
    }
    static convertToAppStateKey(t) {
        switch (t) {
        case "selectedLinearElementId":
            return "selectedLinearElement";
        case "editingLinearElementId":
            return "editingLinearElement"
        }
    }
    static filterSelectedElements(t, n, r) {
        const i = Object.keys(t);
        if (!i.length)
            return r.value = !0,
            t;
        const o = {
            ...t
        };
        for (const s of i) {
            const a = n.get(s);
            a && !a.isDeleted ? r.value = !0 : delete o[s]
        }
        return o
    }
    static filterSelectedGroups(t, n, r) {
        if (!Object.keys(t).length)
            return r.value = !0,
            t;
        const o = {
            ...t
        };
        for (const s of Object.keys(o))
            n.has(s) ? r.value = !0 : delete o[s];
        return o
    }
    static stripElementsProps(t) {
        const {editingGroupId: n, selectedGroupIds: r, selectedElementIds: i, editingLinearElementId: o, selectedLinearElementId: s, ...a} = t;
        return a
    }
    static stripStandaloneProps(t) {
        const {name: n, viewBackgroundColor: r, ...i} = t;
        return i
    }
}
const Mt = class Mt {
    constructor(t, n, r) {
        this.added = t,
        this.removed = n,
        this.updated = r
    }
    static create(t, n, r, i={
        shouldRedistribute: !1
    }) {
        let o;
        if (i.shouldRedistribute) {
            const s = new Map
              , a = new Map
              , l = new Map
              , c = [...t, ...n, ...r];
            for (const [u,f] of c)
                this.satisfiesAddition(f) ? s.set(u, f) : this.satisfiesRemoval(f) ? a.set(u, f) : l.set(u, f);
            o = new Mt(s,a,l)
        } else
            o = new Mt(t,n,r);
        return o
    }
    static validate(t, n, r) {
        for (const [i,o] of t[n].entries())
            if (!r(o))
                throw console.error(`Broken invariant for "${n}" delta, element "${i}", delta:`, o),
                new Error(`ElementsChange invariant broken for element "${i}".`)
    }
    static calculate(t, n) {
        if (t === n)
            return Mt.empty();
        const r = new Map
          , i = new Map
          , o = new Map;
        for (const s of t.values())
            if (!n.get(s.id)) {
                const l = {
                    ...s,
                    isDeleted: !1
                }
                  , c = {
                    isDeleted: !0
                }
                  , u = _t.create(l, c, Mt.stripIrrelevantProps);
                i.set(s.id, u)
            }
        for (const s of n.values()) {
            const a = t.get(s.id);
            if (!a) {
                const l = {
                    isDeleted: !0
                }
                  , c = {
                    ...s,
                    isDeleted: !1
                }
                  , u = _t.create(l, c, Mt.stripIrrelevantProps);
                r.set(s.id, u);
                continue
            }
            if (a.versionNonce !== s.versionNonce) {
                const l = _t.calculate(a, s, Mt.stripIrrelevantProps, Mt.postProcess);
                if (typeof a.isDeleted == "boolean" && typeof s.isDeleted == "boolean" && a.isDeleted !== s.isDeleted) {
                    a.isDeleted && !s.isDeleted ? r.set(s.id, l) : i.set(s.id, l);
                    continue
                }
                _t.isEmpty(l) || o.set(s.id, l)
            }
        }
        return Mt.create(r, i, o)
    }
    static empty() {
        return Mt.create(new Map, new Map, new Map)
    }
    inverse() {
        const t = o=>{
            const s = new Map;
            for (const [a,l] of o.entries())
                s.set(a, _t.create(l.inserted, l.deleted));
            return s
        }
          , n = t(this.added)
          , r = t(this.removed)
          , i = t(this.updated);
        return Mt.create(r, n, i)
    }
    isEmpty() {
        return this.added.size === 0 && this.removed.size === 0 && this.updated.size === 0
    }
    applyLatestChanges(t) {
        const n = a=>l=>{
            const c = {};
            for (const u of Object.keys(l))
                switch (u) {
                case "boundElements":
                    c[u] = l[u];
                    break;
                default:
                    c[u] = a[u]
                }
            return c
        }
          , r = a=>{
            const l = new Map;
            for (const [c,u] of a.entries()) {
                const f = t.get(c);
                if (f) {
                    const h = _t.create(u.deleted, u.inserted, n(f), "inserted");
                    l.set(c, h)
                } else
                    l.set(c, u)
            }
            return l
        }
          , i = r(this.added)
          , o = r(this.removed)
          , s = r(this.updated);
        return Mt.create(i, o, s, {
            shouldRedistribute: !0
        })
    }
    applyTo(t, n) {
        let r = As(new Map(t)), i;
        const o = {
            containsVisibleDifference: !1,
            containsZindexDifference: !1
        };
        try {
            const s = Mt.createApplier(r, n, o)
              , a = s(this.added)
              , l = s(this.removed)
              , c = s(this.updated)
              , u = this.resolveConflicts(t, r);
            i = new Map([...a, ...l, ...c, ...u])
        } catch (s) {
            return console.error("Couldn't apply elements change", s),
            [t, !0]
        }
        try {
            Mt.redrawTextBoundingBoxes(r, i),
            r = Mt.reorderElements(r, i, o),
            Mt.redrawBoundArrows(r, i)
        } catch (s) {
            console.error("Couldn't mutate elements after applying elements change", s)
        } finally {
            return [r, o.containsVisibleDifference]
        }
    }
    static applyDelta(t, n, r={
        containsVisibleDifference: !0,
        containsZindexDifference: !0
    }) {
        var s, a;
        const {boundElements: i, ...o} = n.inserted;
        if ((s = n.deleted.boundElements) != null && s.length || (a = n.inserted.boundElements) != null && a.length) {
            const l = _t.mergeArrays(t.boundElements, n.inserted.boundElements, n.deleted.boundElements, c=>c.id);
            Object.assign(o, {
                boundElements: l
            })
        }
        if (!r.containsVisibleDifference) {
            const {index: l, ...c} = o
              , u = Mt.checkForVisibleDifference(t, c);
            r.containsVisibleDifference = u
        }
        return r.containsZindexDifference || (r.containsZindexDifference = n.deleted.index !== n.inserted.index),
        Ne(t, o)
    }
    static checkForVisibleDifference(t, n) {
        return t.isDeleted && n.isDeleted !== !1 ? !1 : t.isDeleted && n.isDeleted === !1 || t.isDeleted === !1 && n.isDeleted ? !0 : _t.isRightDifferent(t, n)
    }
    resolveConflicts(t, n) {
        const r = new Map
          , i = (c,u)=>{
            const f = n.get(c.id);
            if (!f)
                return;
            let h;
            t.get(c.id) === f ? h = Ne(f, u) : h = ue(f, u),
            r.set(h.id, h),
            n.set(h.id, h)
        }
        ;
        for (const [c] of this.removed)
            Mt.unbindAffected(t, n, c, i);
        for (const [c] of this.added)
            Mt.rebindAffected(t, n, c, i);
        for (const [c] of Array.from(this.updated).filter(([u,f])=>Object.keys({
            ...f.deleted,
            ...f.inserted
        }).find(h=>toe.has(h)))) {
            const u = n.get(c);
            !u || u.isDeleted || Mt.rebindAffected(t, n, c, i)
        }
        const o = new Map(Array.from(t).filter(([c])=>r.has(c)))
          , {added: s, removed: a, updated: l} = Mt.calculate(o, r);
        for (const [c,u] of s)
            this.added.set(c, u);
        for (const [c,u] of a)
            this.removed.set(c, u);
        for (const [c,u] of l)
            this.updated.set(c, u);
        return r
    }
    static unbindAffected(t, n, r, i) {
        const o = ()=>t.get(r)
          , s = ()=>n.get(r);
        Dd.unbindAffected(n, o(), i),
        Dd.unbindAffected(n, s(), i),
        Od.unbindAffected(n, o(), i),
        Od.unbindAffected(n, s(), i)
    }
    static rebindAffected(t, n, r, i) {
        const o = ()=>t.get(r)
          , s = ()=>n.get(r);
        Dd.unbindAffected(n, o(), i),
        Dd.rebindAffected(n, s(), i),
        Od.unbindAffected(n, o(), (a,l)=>{
            ye(a) && i(a, l)
        }
        ),
        Od.rebindAffected(n, s(), i)
    }
    static redrawTextBoundingBoxes(t, n) {
        const r = new Map;
        for (const i of n.values()) {
            if (Sn(i)) {
                const {containerId: o} = i
                  , s = o ? t.get(o) : void 0;
                s && r.set(s.id, {
                    container: s,
                    boundText: i
                })
            }
            if (go(i)) {
                const o = jl(i)
                  , s = o ? t.get(o) : void 0;
                s && r.set(i.id, {
                    container: i,
                    boundText: s
                })
            }
        }
        for (const {container: i, boundText: o} of r.values())
            i.isDeleted || o.isDeleted || Wr(o, i, t, !1)
    }
    static redrawBoundArrows(t, n) {
        for (const r of n.values())
            !r.isDeleted && xa(r) && vo(r, t, {
                changedElements: n
            })
    }
    static reorderElements(t, n, r) {
        if (!r.containsZindexDifference)
            return t;
        const i = Array.from(t.values())
          , o = SN([...i])
          , s = _t.getRightDifferences(i, o, !0).reduce((a,l)=>{
            const c = i[Number(l)];
            return c && n.has(c.id) && a.set(c.id, c),
            a
        }
        , new Map);
        return !r.containsVisibleDifference && s.size && (r.containsVisibleDifference = !0),
        De(Ko(o, s))
    }
    static postProcess(t, n) {
        try {
            _t.diffArrays(t, n, "boundElements", r=>r.id)
        } catch {
            console.error("Couldn't postprocess elements change deltas.")
        } finally {
            return [t, n]
        }
    }
    static stripIrrelevantProps(t) {
        const {id: n, updated: r, version: i, versionNonce: o, seed: s, ...a} = t;
        return a
    }
}
;
D(Mt, "satisfiesAddition", ({deleted: t, inserted: n})=>t.isDeleted === !0 && !n.isDeleted),
D(Mt, "satisfiesRemoval", ({deleted: t, inserted: n})=>!t.isDeleted && n.isDeleted === !0),
D(Mt, "satisfiesUpdate", ({deleted: t, inserted: n})=>!!t.isDeleted == !!n.isDeleted),
D(Mt, "createApplier", (t,n,r)=>{
    const i = Mt.createGetter(t, n, r);
    return o=>Array.from(o.entries()).reduce((s,[a,l])=>{
        const c = i(a, l.inserted);
        if (c) {
            const u = Mt.applyDelta(c, l, r);
            t.set(u.id, u),
            s.set(u.id, u)
        }
        return s
    }
    , new Map)
}
),
D(Mt, "createGetter", (t,n,r)=>(i,o)=>{
    let s = t.get(i);
    return s || (s = n.get(i),
    s && (r.containsZindexDifference = !0,
    (o.isDeleted === !1 || o.isDeleted !== !0 && s.isDeleted === !1) && (r.containsVisibleDifference = !0))),
    s
}
);
let S2 = Mt;
class hs {
    constructor() {
        D(this, "subscribers", [])
    }
    on(...t) {
        const n = t.flat().filter(r=>typeof r == "function");
        return this.subscribers.push(...n),
        ()=>this.off(n)
    }
    once(...t) {
        const n = t.flat().filter(i=>typeof i == "function");
        n.push(()=>r());
        const r = this.on(...n);
        return r
    }
    off(...t) {
        const n = t.flat();
        this.subscribers = this.subscribers.filter(r=>!n.includes(r))
    }
    trigger(...t) {
        for (const n of this.subscribers)
            n(...t);
        return this
    }
    clear() {
        this.subscribers = []
    }
}
const SO = "__observedAppState"
  , I2 = e=>{
    var n, r;
    const t = {
        name: e.name,
        editingGroupId: e.editingGroupId,
        viewBackgroundColor: e.viewBackgroundColor,
        selectedElementIds: e.selectedElementIds,
        selectedGroupIds: e.selectedGroupIds,
        editingLinearElementId: ((n = e.editingLinearElement) == null ? void 0 : n.elementId) || null,
        selectedLinearElementId: ((r = e.selectedLinearElement) == null ? void 0 : r.elementId) || null
    };
    return Reflect.defineProperty(t, SO, {
        value: !0,
        enumerable: !1
    }),
    t
}
  , zoe = e=>!!Reflect.get(e, SO)
  , ee = {
    CAPTURE: "capture",
    UPDATE: "update",
    NONE: "none"
};
class $oe {
    constructor(t, n) {
        this.elementsChange = t,
        this.appStateChange = n
    }
}
class Uoe {
    constructor() {
        D(this, "onStoreIncrementEmitter", new hs);
        D(this, "scheduledActions", new Set);
        D(this, "_snapshot", hp.empty());
        D(this, "shouldCaptureIncrement", ()=>{
            this.scheduleAction(ee.CAPTURE)
        }
        );
        D(this, "shouldUpdateSnapshot", ()=>{
            this.scheduleAction(ee.UPDATE)
        }
        );
        D(this, "scheduleAction", t=>{
            this.scheduledActions.add(t),
            this.satisfiesScheduledActionsInvariant()
        }
        );
        D(this, "commit", (t,n)=>{
            try {
                this.scheduledActions.has(ee.CAPTURE) ? this.captureIncrement(t, n) : this.scheduledActions.has(ee.UPDATE) && this.updateSnapshot(t, n)
            } finally {
                this.satisfiesScheduledActionsInvariant(),
                this.scheduledActions = new Set
            }
        }
        );
        D(this, "captureIncrement", (t,n)=>{
            const r = this.snapshot
              , i = this.snapshot.maybeClone(t, n);
            if (r !== i) {
                const o = i.meta.didElementsChange ? S2.calculate(r.elements, i.elements) : S2.empty()
                  , s = i.meta.didAppStateChange ? wr.calculate(r.appState, i.appState) : wr.empty();
                (!o.isEmpty() || !s.isEmpty()) && this.onStoreIncrementEmitter.trigger(new $oe(o,s)),
                this.snapshot = i
            }
        }
        );
        D(this, "updateSnapshot", (t,n)=>{
            const r = this.snapshot.maybeClone(t, n);
            this.snapshot !== r && (this.snapshot = r)
        }
        );
        D(this, "filterUncomittedElements", (t,n)=>{
            for (const [r,i] of t.entries()) {
                if (!n.get(r))
                    continue;
                const s = this.snapshot.elements.get(r);
                s ? s.version < i.version && n.set(r, s) : n.delete(r)
            }
            return n
        }
        );
        D(this, "clear", ()=>{
            this.snapshot = hp.empty(),
            this.scheduledActions = new Set
        }
        );
        D(this, "satisfiesScheduledActionsInvariant", ()=>{
            if (!(this.scheduledActions.size >= 0 && this.scheduledActions.size <= 3)) {
                const t = `There can be at most three store actions scheduled at the same time, but there are "${this.scheduledActions.size}".`;
                console.error(t, this.scheduledActions.values())
            }
        }
        )
    }
    get snapshot() {
        return this._snapshot
    }
    set snapshot(t) {
        this._snapshot = t
    }
}
class hp {
    constructor(t, n, r={
        didElementsChange: !1,
        didAppStateChange: !1,
        isEmpty: !1
    }) {
        this.elements = t,
        this.appState = n,
        this.meta = r
    }
    static empty() {
        return new hp(new Map,I2(ho()),{
            didElementsChange: !1,
            didAppStateChange: !1,
            isEmpty: !0
        })
    }
    isEmpty() {
        return this.meta.isEmpty
    }
    maybeClone(t, n) {
        const r = this.maybeCreateElementsSnapshot(t)
          , i = this.maybeCreateAppStateSnapshot(n);
        let o = !1
          , s = !1;
        return this.elements !== r && (o = !0),
        this.appState !== i && (s = !0),
        !o && !s ? this : new hp(r,i,{
            didElementsChange: o,
            didAppStateChange: s
        })
    }
    maybeCreateAppStateSnapshot(t) {
        if (!t)
            return this.appState;
        const n = zoe(t) ? t : I2(t);
        return this.detectChangedAppState(n) ? n : this.appState
    }
    detectChangedAppState(t) {
        return !Xn(this.appState, t, {
            selectedElementIds: Xn,
            selectedGroupIds: Xn
        })
    }
    maybeCreateElementsSnapshot(t) {
        return t ? this.detectChangedElements(t) ? this.createElementsSnapshot(t) : this.elements : this.elements
    }
    detectChangedElements(t) {
        if (this.elements === t)
            return !1;
        if (this.elements.size !== t.size)
            return !0;
        const n = Array.from(t.keys());
        for (let r = n.length - 1; r >= 0; r--) {
            const i = this.elements.get(n[r])
              , o = t.get(n[r]);
            if (!i || !o || i.id !== o.id || i.versionNonce !== o.versionNonce)
                return !0
        }
        return !1
    }
    createElementsSnapshot(t) {
        const n = new Map;
        for (const [r,i] of this.elements.entries())
            t.get(r) ? n.set(r, i) : n.set(r, Ne(i, {
                isDeleted: !0
            }));
        for (const [r,i] of t.entries()) {
            const o = n.get(r);
            (!o || o && o.versionNonce !== i.versionNonce) && n.set(r, $f(i))
        }
        return n
    }
}
const Ks = new Map
  , Hoe = /^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)(?:\?t=|&t=|\?start=|&start=)?([a-zA-Z0-9_-]+)?[^\s]*$/
  , Woe = /^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/
  , Goe = /^https:\/\/(?:www\.)?figma\.com/
  , y8 = /^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/
  , Voe = /^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i
  , w8 = /(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/
  , Yoe = /^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i
  , joe = /^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/
  , Koe = /^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i
  , E8 = /giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/
  , b_ = new Set(["youtube.com", "youtu.be", "vimeo.com", "player.vimeo.com", "figma.com", "link.excalidraw.com", "gist.github.com", "twitter.com", "x.com", "*.simplepdf.eu", "stackblitz.com", "val.town", "giphy.com"])
  , b8 = new Set(["youtube.com", "youtu.be", "vimeo.com", "player.vimeo.com", "figma.com", "twitter.com", "x.com", "*.simplepdf.eu", "stackblitz.com"])
  , C2 = e=>`<html><body>${e}</body></html>`
  , Nd = e=>{
    if (!e)
        return null;
    if (Ks.has(e))
        return Ks.get(e);
    const t = e
      , n = b8.has(__(e, b8) || "");
    let r = "generic"
      , i = {
        w: 560,
        h: 840
    };
    const o = e.match(Hoe);
    if (o != null && o[2]) {
        const c = o[3] ? `&start=${o[3]}` : ""
          , u = e.includes("shorts");
        switch (r = "video",
        o[1]) {
        case "embed/":
        case "watch?v=":
        case "shorts/":
            e = `https://www.youtube.com/embed/${o[2]}?enablejsapi=1${c}`;
            break;
        case "playlist?list=":
        case "embed/videoseries?list=":
            e = `https://www.youtube.com/embed/videoseries?list=${o[2]}&enablejsapi=1${c}`;
            break;
        default:
            e = `https://www.youtube.com/embed/${o[2]}?enablejsapi=1${c}`;
            break
        }
        return i = u ? {
            w: 315,
            h: 560
        } : {
            w: 560,
            h: 315
        },
        Ks.set(t, {
            link: e,
            intrinsicSize: i,
            type: r,
            sandbox: {
                allowSameOrigin: n
            }
        }),
        {
            link: e,
            intrinsicSize: i,
            type: r,
            sandbox: {
                allowSameOrigin: n
            }
        }
    }
    const s = e.match(Woe);
    if (s != null && s[1]) {
        const c = s == null ? void 0 : s[1]
          , u = /^\d+$/.test(c) ? void 0 : new URIError("Invalid embed link format");
        return r = "video",
        e = `https://player.vimeo.com/video/${c}?api=1`,
        i = {
            w: 560,
            h: 315
        },
        Ks.set(t, {
            link: e,
            intrinsicSize: i,
            type: r,
            sandbox: {
                allowSameOrigin: n
            }
        }),
        {
            link: e,
            intrinsicSize: i,
            type: r,
            error: u,
            sandbox: {
                allowSameOrigin: n
            }
        }
    }
    if (e.match(Goe))
        return r = "generic",
        e = `https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,
        i = {
            w: 550,
            h: 550
        },
        Ks.set(t, {
            link: e,
            intrinsicSize: i,
            type: r,
            sandbox: {
                allowSameOrigin: n
            }
        }),
        {
            link: e,
            intrinsicSize: i,
            type: r,
            sandbox: {
                allowSameOrigin: n
            }
        };
    const l = e.match(joe);
    if (l)
        return e = l[1] === "embed" ? l[0] : l[0].replace("/v", "/embed"),
        Ks.set(t, {
            link: e,
            intrinsicSize: i,
            type: r,
            sandbox: {
                allowSameOrigin: n
            }
        }),
        {
            link: e,
            intrinsicSize: i,
            type: r,
            sandbox: {
                allowSameOrigin: n
            }
        };
    if (w8.test(e)) {
        const c = e.match(w8)[1]
          , u = q3(`https://twitter.com/x/status/${c}`)
          , f = {
            type: "document",
            srcdoc: h=>C2(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${h}"><a href="${u}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),
            intrinsicSize: {
                w: 480,
                h: 480
            },
            sandbox: {
                allowSameOrigin: n
            }
        };
        return Ks.set(t, f),
        f
    }
    if (y8.test(e)) {
        const [,c,u] = e.match(y8)
          , f = q3(`https://gist.github.com/${c}/${u}`)
          , h = {
            type: "document",
            srcdoc: ()=>C2(`
          <script src="${f}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),
            intrinsicSize: {
                w: 550,
                h: 720
            },
            sandbox: {
                allowSameOrigin: n
            }
        };
        return Ks.set(e, h),
        h
    }
    return Ks.set(e, {
        link: e,
        intrinsicSize: i,
        type: r,
        sandbox: {
            allowSameOrigin: n
        }
    }),
    {
        link: e,
        intrinsicSize: i,
        type: r,
        sandbox: {
            allowSameOrigin: n
        }
    }
}
  , IO = e=>{
    let t;
    rl(e) ? t = "IFrame element" : t = !e.link || (e == null ? void 0 : e.link) === "" ? "Empty Web-Embed" : e.link;
    const n = Math.max(Math.min(e.width / 2, e.width / t.length), e.width / 30)
      , r = Lt.Helvetica
      , i = Ht({
        fontSize: n,
        fontFamily: r
    });
    return yo({
        x: e.x + e.width / 2,
        y: e.y + e.height / 2,
        strokeColor: e.strokeColor !== "transparent" ? e.strokeColor : "black",
        backgroundColor: "transparent",
        fontFamily: r,
        fontSize: n,
        text: Ru(t, i, e.width - 20),
        textAlign: "center",
        verticalAlign: Ai.MIDDLE,
        angle: e.angle ?? 0
    })
}
;
we({
    name: "setEmbeddableAsActiveTool",
    trackEvent: {
        category: "toolbar"
    },
    target: "Tool",
    label: "toolBar.embeddable",
    perform: (e,t,n,r)=>{
        const i = bn(t, {
            type: "embeddable"
        });
        return ls(r.canvas, {
            ...t,
            activeTool: i
        }),
        {
            elements: e,
            appState: {
                ...t,
                activeTool: bn(t, {
                    type: "embeddable"
                })
            },
            storeAction: ee.NONE
        }
    }
});
const __ = (e,t)=>{
    try {
        const {hostname: n} = new URL(e)
          , r = n.replace(/^www\./, "");
        if (t instanceof Set) {
            if (b_.has(r))
                return r;
            const o = r.replace(/^([^.]+)/, "*");
            return b_.has(o) ? o : null
        }
        const i = t.replace(/^www\./, "");
        if (r === i)
            return i
    } catch {}
    return null
}
  , Xoe = e=>{
    const t = e.match(Yoe);
    if (t && t.length === 2)
        return t[1];
    const n = e.match(Voe);
    if (n && n.length === 2)
        return n[1];
    if (E8.test(e))
        return `https://giphy.com/embed/${E8.exec(e)[1]}`;
    const r = e.match(Koe);
    return r && r.length === 2 ? r[1] : e
}
  , ym = (e,t)=>{
    if (!e)
        return !1;
    if (t != null)
        if (typeof t == "function") {
            const n = t(e);
            if (typeof n == "boolean")
                return n
        } else {
            if (typeof t == "boolean")
                return t;
            if (t instanceof RegExp)
                return t.test(e);
            if (Array.isArray(t)) {
                for (const n of t)
                    if (n instanceof RegExp) {
                        if (e.match(n))
                            return !0
                    } else if (__(e, n))
                        return !0;
                return !1
            }
        }
    return !!__(e, b_)
}
  , Th = (e,t,n)=>{
    const r = {
        sets: t.sets,
        shape: t.shape,
        options: {
            ...t.options,
            fixedDecimalPlaceDigits: n
        }
    };
    return e.draw(r)
}
  , Ah = (e,t,n,r,i)=>{
    if (!r.enabled || !r.clip)
        return null;
    const o = Pi(e, i);
    if (o) {
        const s = t.ownerDocument.createElementNS($t, "g");
        return s.setAttributeNS($t, "clip-path", `url(#${o.id})`),
        n.forEach(a=>s.appendChild(a)),
        s
    }
    return null
}
  , wm = (e,t,n,r,i,o,s,a)=>{
    var x;
    const l = {
        x: o,
        y: s
    }
      , [c,u,f,h] = Ke(e, t);
    let m = (f - c) / 2 - (e.x - c)
      , v = (h - u) / 2 - (e.y - u);
    if (ye(e)) {
        const C = Hr(e, t);
        if (Be(C)) {
            const [P,M,A,I] = Ke(C, t)
              , O = ke.getBoundTextElementPosition(C, e, t);
            m = (A - P) / 2 - (O.x - P),
            v = (I - M) / 2 - (O.y - M),
            o = o + O.x - e.x,
            s = s + O.y - e.y
        }
    }
    const y = 180 * e.angle / Math.PI;
    let E = r;
    if (e.link) {
        const C = r.ownerDocument.createElementNS($t, "a");
        C.setAttribute("href", Is(e.link)),
        E.appendChild(C),
        E = C
    }
    const b = (C,P)=>{
        E.appendChild(C)
    }
      , _ = (((x = Pi(e, t)) == null ? void 0 : x.opacity) ?? 100) * e.opacity / 1e4;
    switch (e.type) {
    case "selection":
        throw new Error("Selection rendering is not supported for SVG");
    case "rectangle":
    case "diamond":
    case "ellipse":
        {
            const C = Yt.generateElementShape(e, null)
              , P = Th(n, C, wh);
            _ !== 1 && (P.setAttribute("stroke-opacity", `${_}`),
            P.setAttribute("fill-opacity", `${_}`)),
            P.setAttribute("stroke-linecap", "round"),
            P.setAttribute("transform", `translate(${o || 0} ${s || 0}) rotate(${y} ${m} ${v})`);
            const M = Ah(e, E, [P], a.frameRendering, t);
            b(M || P);
            break
        }
    case "iframe":
    case "embeddable":
        {
            const C = Yt.generateElementShape(e, a)
              , P = Th(n, C, wh)
              , M = e.opacity / 100;
            M !== 1 && (P.setAttribute("stroke-opacity", `${M}`),
            P.setAttribute("fill-opacity", `${M}`)),
            P.setAttribute("stroke-linecap", "round"),
            P.setAttribute("transform", `translate(${o || 0} ${s || 0}) rotate(${y} ${m} ${v})`),
            b(P);
            const A = IO(e);
            wm(A, t, n, E, i, A.x + l.x - e.x, A.y + l.y - e.y, a);
            const I = Th(n, C, wh);
            for (I.setAttribute("stroke-linecap", "round"),
            I.setAttribute("transform", `translate(${o || 0} ${s || 0}) rotate(${y} ${m} ${v})`); I.firstChild; )
                I.removeChild(I.firstChild);
            const O = Ol(Math.min(e.width, e.height), e)
              , N = Nd(wD(e.link || ""));
            if (a.renderEmbeddables === !1 || (N == null ? void 0 : N.type) === "document") {
                const $ = r.ownerDocument.createElementNS($t, "a");
                $.setAttribute("href", Is(e.link || "")),
                $.setAttribute("target", "_blank"),
                $.setAttribute("rel", "noopener noreferrer"),
                $.style.borderRadius = `${O}px`,
                I.appendChild($)
            } else {
                const $ = r.ownerDocument.createElementNS($t, "foreignObject");
                $.style.width = `${e.width}px`,
                $.style.height = `${e.height}px`,
                $.style.border = "none";
                const V = $.ownerDocument.createElementNS($t, "div");
                V.setAttribute("xmlns", "http://www.w3.org/1999/xhtml"),
                V.style.width = "100%",
                V.style.height = "100%";
                const z = V.ownerDocument.createElement("iframe");
                z.src = (N == null ? void 0 : N.link) ?? "",
                z.style.width = "100%",
                z.style.height = "100%",
                z.style.border = "none",
                z.style.borderRadius = `${O}px`,
                z.style.top = "0",
                z.style.left = "0",
                z.allowFullscreen = !0,
                V.appendChild(z),
                $.appendChild(V),
                I.appendChild($)
            }
            b(I);
            break
        }
    case "line":
    case "arrow":
        {
            const C = Ge(e, t)
              , P = r.ownerDocument.createElementNS($t, "mask");
            if (C) {
                P.setAttribute("id", `mask-${e.id}`);
                const O = r.ownerDocument.createElementNS($t, "rect");
                o = o || 0,
                s = s || 0,
                O.setAttribute("x", "0"),
                O.setAttribute("y", "0"),
                O.setAttribute("fill", "#fff"),
                O.setAttribute("width", `${e.width + 100 + o}`),
                O.setAttribute("height", `${e.height + 100 + s}`),
                P.appendChild(O);
                const N = r.ownerDocument.createElementNS($t, "rect")
                  , $ = ke.getBoundTextElementPosition(e, C, t)
                  , V = o + $.x - e.x
                  , z = s + $.y - e.y;
                N.setAttribute("x", V.toString()),
                N.setAttribute("y", z.toString()),
                N.setAttribute("fill", "#000"),
                N.setAttribute("width", `${C.width}`),
                N.setAttribute("height", `${C.height}`),
                N.setAttribute("opacity", "1"),
                P.appendChild(N)
            }
            const M = r.ownerDocument.createElementNS($t, "g");
            C && M.setAttribute("mask", `url(#mask-${e.id})`),
            M.setAttribute("stroke-linecap", "round"),
            Yt.generateElementShape(e, a).forEach(O=>{
                const N = Th(n, O, wh);
                _ !== 1 && (N.setAttribute("stroke-opacity", `${_}`),
                N.setAttribute("fill-opacity", `${_}`)),
                N.setAttribute("transform", `translate(${o || 0} ${s || 0}) rotate(${y} ${m} ${v})`),
                e.type === "line" && Ca(e.points) && e.backgroundColor !== "transparent" && N.setAttribute("fill-rule", "evenodd"),
                M.appendChild(N)
            }
            );
            const I = Ah(e, E, [M, P], a.frameRendering, t);
            I ? (b(I),
            E.appendChild(I)) : (b(M),
            E.append(P));
            break
        }
    case "freedraw":
        {
            const C = Yt.generateElementShape(e, a)
              , P = C ? Th(n, C, wh) : r.ownerDocument.createElementNS($t, "g");
            _ !== 1 && (P.setAttribute("stroke-opacity", `${_}`),
            P.setAttribute("fill-opacity", `${_}`)),
            P.setAttribute("transform", `translate(${o || 0} ${s || 0}) rotate(${y} ${m} ${v})`),
            P.setAttribute("stroke", "none");
            const M = r.ownerDocument.createElementNS($t, "path");
            M.setAttribute("fill", e.strokeColor),
            M.setAttribute("d", uN(e)),
            P.appendChild(M);
            const A = Ah(e, E, [P], a.frameRendering, t);
            b(A || P);
            break
        }
    case "image":
        {
            const C = Math.round(e.width)
              , P = Math.round(e.height)
              , M = Hn(e) && i[e.fileId];
            if (M) {
                const A = `image-${M.id}`;
                let I = r.querySelector(`#${A}`);
                if (!I) {
                    I = r.ownerDocument.createElementNS($t, "symbol"),
                    I.id = A;
                    const V = r.ownerDocument.createElementNS($t, "image");
                    V.setAttribute("width", "100%"),
                    V.setAttribute("height", "100%"),
                    V.setAttribute("href", M.dataURL),
                    I.appendChild(V),
                    E.prepend(I)
                }
                const O = r.ownerDocument.createElementNS($t, "use");
                if (O.setAttribute("href", `#${A}`),
                a.exportWithDarkMode && M.mimeType !== Re.svg && O.setAttribute("filter", rN),
                O.setAttribute("width", `${C}`),
                O.setAttribute("height", `${P}`),
                O.setAttribute("opacity", `${_}`),
                e.scale[0] !== 1 || e.scale[1] !== 1) {
                    const V = e.scale[0] !== 1 ? -C : 0
                      , z = e.scale[1] !== 1 ? -P : 0;
                    O.setAttribute("transform", `scale(${e.scale[0]}, ${e.scale[1]}) translate(${V} ${z})`)
                }
                const N = r.ownerDocument.createElementNS($t, "g");
                if (N.appendChild(O),
                N.setAttribute("transform", `translate(${o || 0} ${s || 0}) rotate(${y} ${m} ${v})`),
                e.roundness) {
                    const V = r.ownerDocument.createElementNS($t, "clipPath");
                    V.id = `image-clipPath-${e.id}`;
                    const z = r.ownerDocument.createElementNS($t, "rect")
                      , j = Ol(Math.min(e.width, e.height), e);
                    z.setAttribute("width", `${e.width}`),
                    z.setAttribute("height", `${e.height}`),
                    z.setAttribute("rx", `${j}`),
                    z.setAttribute("ry", `${j}`),
                    V.appendChild(z),
                    b(V),
                    N.setAttributeNS($t, "clip-path", `url(#${V.id})`)
                }
                const $ = Ah(e, E, [N], a.frameRendering, t);
                b($ || N)
            }
            break
        }
    case "frame":
    case "magicframe":
        {
            if (a.frameRendering.enabled && a.frameRendering.outline) {
                const C = document.createElementNS($t, "rect");
                C.setAttribute("transform", `translate(${o || 0} ${s || 0}) rotate(${y} ${m} ${v})`),
                C.setAttribute("width", `${e.width}px`),
                C.setAttribute("height", `${e.height}px`),
                C.setAttribute("rx", pn.radius.toString()),
                C.setAttribute("ry", pn.radius.toString()),
                C.setAttribute("fill", "none"),
                C.setAttribute("stroke", pn.strokeColor),
                C.setAttribute("stroke-width", pn.strokeWidth.toString()),
                b(C)
            }
            break
        }
    default:
        if (ye(e)) {
            const C = r.ownerDocument.createElementNS($t, "g");
            _ !== 1 && (C.setAttribute("stroke-opacity", `${_}`),
            C.setAttribute("fill-opacity", `${_}`)),
            C.setAttribute("transform", `translate(${o || 0} ${s || 0}) rotate(${y} ${m} ${v})`);
            const P = e.text.replace(/\r\n?/g, `
`).split(`
`)
              , M = Kp(e.fontSize, e.lineHeight)
              , A = e.textAlign === "center" ? e.width / 2 : e.textAlign === "right" ? e.width : 0
              , I = vO(e.fontFamily, e.fontSize, M)
              , O = QR(e.text) ? "rtl" : "ltr"
              , N = e.textAlign === "center" ? "middle" : e.textAlign === "right" || O === "rtl" ? "end" : "start";
            for (let V = 0; V < P.length; V++) {
                const z = r.ownerDocument.createElementNS($t, "text");
                z.textContent = P[V],
                z.setAttribute("x", `${A}`),
                z.setAttribute("y", `${V * M + I}`),
                z.setAttribute("font-family", Bp(e)),
                z.setAttribute("font-size", `${e.fontSize}px`),
                z.setAttribute("fill", e.strokeColor),
                z.setAttribute("text-anchor", N),
                z.setAttribute("style", "white-space: pre;"),
                z.setAttribute("direction", O),
                z.setAttribute("dominant-baseline", "alphabetic"),
                C.appendChild(z)
            }
            const $ = Ah(e, E, [C], a.frameRendering, t);
            b($ || C)
        } else
            throw new Error(`Unimplemented type ${e.type}`)
    }
}
  , Zoe = (e,t,n,r,i,o)=>{
    r && (e.filter(s=>!eo(s)).forEach(s=>{
        if (!s.isDeleted) {
            if (ye(s) && s.containerId && t.has(s.containerId))
                return;
            try {
                wm(s, t, n, r, i, s.x + o.offsetX, s.y + o.offsetY, o);
                const a = Ge(s, t);
                a && wm(a, t, n, r, i, a.x + o.offsetX, a.y + o.offsetY, o)
            } catch (a) {
                console.error(a)
            }
        }
    }
    ),
    e.filter(s=>eo(s)).forEach(s=>{
        if (!s.isDeleted)
            try {
                wm(s, t, n, r, i, s.x + o.offsetX, s.y + o.offsetY, o)
            } catch (a) {
                console.error(a)
            }
    }
    ))
}
  , CO = e=>new Promise((t,n)=>{
    const r = new Image;
    r.onload = ()=>{
        t(r)
    }
    ,
    r.onerror = i=>{
        n(i)
    }
    ,
    r.src = e
}
)
  , kO = async({fileIds: e, files: t, imageCache: n})=>{
    const r = new Map
      , i = new Map;
    return await Promise.all(e.reduce((o,s)=>{
        const a = t[s];
        return a && !r.has(s) ? (r.set(s, !0),
        o.concat((async()=>{
            try {
                if (a.mimeType === Re.binary)
                    throw new Error("Only images can be added to ImageCache");
                const l = CO(a.dataURL)
                  , c = {
                    image: l,
                    mimeType: a.mimeType
                };
                n.set(s, c);
                const u = await l;
                n.set(s, {
                    ...c,
                    image: u
                })
            } catch {
                i.set(s, !0)
            }
        }
        )())) : o
    }
    , [])),
    {
        imageCache: n,
        updatedFiles: r,
        erroredFiles: i
    }
}
  , TO = e=>e.filter(t=>Hn(t))
  , qoe = e=>(e == null ? void 0 : e.nodeName.toLowerCase()) === "svg"
  , Qoe = async e=>{
    const t = new DOMParser().parseFromString(e, Re.svg)
      , n = t.querySelector("svg");
    if (t.querySelector("parsererror") || !qoe(n))
        throw new Error("Invalid SVG");
    if (n.hasAttribute("xmlns") || n.setAttribute("xmlns", $t),
    !n.hasAttribute("width") || !n.hasAttribute("height")) {
        const i = n.getAttribute("viewBox");
        let o = n.getAttribute("width") || "50"
          , s = n.getAttribute("height") || "50";
        if (i) {
            const a = i.match(/\d+ +\d+ +(\d+) +(\d+)/);
            a && ([,o,s] = a)
        }
        n.setAttribute("width", o),
        n.setAttribute("height", s)
    }
    return n.outerHTML
}
  , AO = document.createElement("img");
AO.src = `data:${Re.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;
const a4 = ([e,t,n,r],i,o)=>{
    const s = eae
      , a = s / o.zoom.value
      , l = s / o.zoom.value
      , c = s / o.zoom.value
      , u = (e + n) / 2
      , f = (t + r) / 2
      , h = (s - 8) / (2 * o.zoom.value)
      , m = 4 / o.zoom.value
      , v = n + m - h
      , y = t - m - c + h
      , [E,b] = Xe(v + a / 2, y + l / 2, u, f, i);
    return [E - a / 2, b - l / 2, a, l]
}
  , MO = (e,t,n,[r,i])=>{
    const o = 4 / n.zoom.value
      , [s,a,l,c] = Ke(e, t)
      , [u,f,h,m] = a4([s, a, l, c], e.angle, n);
    return r > u - o && r < u + o + h && i > f - o && i < f + m + o
}
  , JE = (e,t,n,[r,i],o)=>!e.link || n.selectedElementIds[e.id] ? !1 : !o && n.viewModeEnabled && Z6(r, i, e, t) ? !0 : MO(e, t, n, [r, i])
  , qv = (e,t,n,r,i=!0)=>{
    e.beginPath(),
    e.arc(t, n, r, 0, Math.PI * 2),
    e.fill(),
    i && e.stroke()
}
  , LO = (e,t)=>[e.width / t, e.height / t]
  , PO = ({canvas: e, scale: t, normalizedWidth: n, normalizedHeight: r, theme: i, isExporting: o, viewBackgroundColor: s})=>{
    const a = e.getContext("2d");
    return a.setTransform(1, 0, 0, 1, 0, 0),
    a.scale(t, t),
    o && i === Oe.DARK && (a.filter = y6),
    typeof s == "string" ? ((s === "transparent" || s.length === 5 || s.length === 9 || /(hsla|rgba)\(/.test(s)) && a.clearRect(0, 0, n, r),
    a.save(),
    a.fillStyle = s,
    a.fillRect(0, 0, n, r),
    a.restore()) : a.clearRect(0, 0, n, r),
    a
}
  , T0 = {
    Bold: "#dddddd",
    Regular: "#e5e5e5"
}
  , Joe = (e,t,n,r,i,o,s,a)=>{
    const l = r % t - t
      , c = i % t - t
      , u = t * o.value
      , f = 1 / o.value;
    e.save(),
    o.value === 1 && e.translate(l % 1 ? 0 : .5, c % 1 ? 0 : .5);
    for (let h = l; h < l + s + t * 2; h += t) {
        const m = n > 1 && Math.round(h - r) % (n * t) === 0;
        if (!m && u < 10)
            continue;
        const v = Math.min(1 / o.value, m ? 4 : 1);
        e.lineWidth = v;
        const y = [v * 3, f + (v + f)];
        e.beginPath(),
        e.setLineDash(m ? [] : y),
        e.strokeStyle = m ? T0.Bold : T0.Regular,
        e.moveTo(h, c - t),
        e.lineTo(h, Math.ceil(c + a + t * 2)),
        e.stroke()
    }
    for (let h = c; h < c + a + t * 2; h += t) {
        const m = n > 1 && Math.round(h - i) % (n * t) === 0;
        if (!m && u < 10)
            continue;
        const v = Math.min(1 / o.value, m ? 4 : 1);
        e.lineWidth = v;
        const y = [v * 3, f + (v + f)];
        e.beginPath(),
        e.setLineDash(m ? [] : y),
        e.strokeStyle = m ? T0.Bold : T0.Regular,
        e.moveTo(l - t, h),
        e.lineTo(Math.ceil(l + s + t * 2), h),
        e.stroke()
    }
    e.restore()
}
  , _8 = (e,t,n,r)=>{
    t.translate(e.x + r.scrollX, e.y + r.scrollY),
    t.beginPath(),
    t.roundRect ? t.roundRect(0, 0, e.width, e.height, pn.radius / r.zoom.value) : t.rect(0, 0, e.width, e.height),
    t.clip(),
    t.translate(-(e.x + r.scrollX), -(e.y + r.scrollY))
}
;
let Xs;
const x8 = (e,t,n,r)=>{
    if (e.link && !n.selectedElementIds[e.id]) {
        const [i,o,s,a] = Ke(e, r)
          , [l,c,u,f] = a4([i, o, s, a], e.angle, n)
          , h = l + u / 2
          , m = c + f / 2;
        if (t.save(),
        t.translate(n.scrollX + h, n.scrollY + m),
        t.rotate(e.angle),
        !Xs || Xs.zoom !== n.zoom.value) {
            Xs = document.createElement("canvas"),
            Xs.zoom = n.zoom.value,
            Xs.width = u * window.devicePixelRatio * n.zoom.value,
            Xs.height = f * window.devicePixelRatio * n.zoom.value;
            const v = Xs.getContext("2d");
            v.scale(window.devicePixelRatio * n.zoom.value, window.devicePixelRatio * n.zoom.value),
            v.fillStyle = "#fff",
            v.fillRect(0, 0, u, f),
            v.drawImage(AO, 0, 0, u, f),
            v.restore(),
            t.drawImage(Xs, l - h, c - m, u, f)
        } else
            t.drawImage(Xs, l - h, c - m, u, f);
        t.restore()
    }
}
  , RO = ({canvas: e, rc: t, elementsMap: n, allElementsMap: r, visibleElements: i, scale: o, appState: s, renderConfig: a})=>{
    var v;
    if (e === null)
        return;
    const {renderGrid: l=!0, isExporting: c} = a
      , [u,f] = LO(e, o)
      , h = PO({
        canvas: e,
        scale: o,
        normalizedWidth: u,
        normalizedHeight: f,
        theme: s.theme,
        isExporting: c,
        viewBackgroundColor: s.viewBackgroundColor
    });
    h.scale(s.zoom.value, s.zoom.value),
    l && Joe(h, s.gridSize, s.gridStep, s.scrollX, s.scrollY, s.zoom, u / s.zoom.value, f / s.zoom.value);
    const m = new Set;
    i.forEach(y=>{
        y.groupIds.length > 0 && s.frameToHighlight && s.selectedElementIds[y.id] && (Vl(y, s.frameToHighlight, n) || y.groupIds.find(E=>m.has(E))) && y.groupIds.forEach(E=>m.add(E))
    }
    ),
    i.filter(y=>!eo(y)).forEach(y=>{
        var E;
        try {
            const b = y.frameId || ((E = s.frameToHighlight) == null ? void 0 : E.id);
            if (ye(y) && y.containerId && n.has(y.containerId))
                return;
            if (h.save(),
            b && s.frameRendering.enabled && s.frameRendering.clip) {
                const x = x_(y, n, s);
                x && pp(y, n, s) && _8(x, h, a, s),
                rd(y, n, r, t, h, a, s)
            } else
                rd(y, n, r, t, h, a, s);
            const _ = Ge(y, n);
            _ && rd(_, n, r, t, h, a, s),
            h.restore(),
            c || x8(y, h, s, n)
        } catch (b) {
            console.error(b)
        }
    }
    ),
    i.filter(y=>eo(y)).forEach(y=>{
        var E;
        try {
            const b = ()=>{
                if (rd(y, n, r, t, h, a, s),
                eo(y) && (c || Br(y) && a.embedsValidationStatus.get(y.id) !== !0) && y.width && y.height) {
                    const x = IO(y);
                    rd(x, n, r, t, h, a, s)
                }
                c || x8(y, h, s, n)
            }
            ;
            if ((y.frameId || ((E = s.frameToHighlight) == null ? void 0 : E.id)) && s.frameRendering.enabled && s.frameRendering.clip) {
                h.save();
                const x = x_(y, n, s);
                x && pp(y, n, s) && _8(x, h, a, s),
                b(),
                h.restore()
            } else
                b()
        } catch (b) {
            console.error(b)
        }
    }
    ),
    (v = a.pendingFlowchartNodes) == null || v.forEach(y=>{
        try {
            rd(y, n, r, t, h, a, s)
        } catch (E) {
            console.error(E)
        }
    }
    )
}
  , DO = Av(e=>{
    RO(e)
}
, {
    trailing: !0
})
  , OO = (e,t)=>{
    if (t) {
        DO(e);
        return
    }
    RO(e)
}
  , ese = "<!-- svg-source:excalidraw -->"
  , tse = (e,t)=>{
    if (e.width <= t)
        return e;
    const r = document.createElement("canvas").getContext("2d");
    r.font = Ht({
        fontFamily: e.fontFamily,
        fontSize: e.fontSize
    });
    let i = e.text;
    if (r.measureText(i).width > t)
        for (let s = i.length; s > 0; s--) {
            const a = `${i.slice(0, s)}...`;
            if (r.measureText(a).width <= t) {
                i = a;
                break
            }
        }
    return Ne(e, {
        text: i,
        width: t
    })
}
  , nse = (e,t)=>{
    const n = [];
    for (const r of e) {
        if (Ue(r)) {
            let i = yo({
                x: r.x,
                y: r.y - pn.nameOffsetY,
                fontFamily: Lt.Helvetica,
                fontSize: pn.nameFontSize,
                lineHeight: pn.nameLineHeight,
                strokeColor: t.exportWithDarkMode ? pn.nameColorDarkTheme : pn.nameColorLightTheme,
                text: nN(r)
            });
            i.y -= i.height,
            i = tse(i, r.width),
            n.push(i)
        }
        n.push(r)
    }
    return n
}
  , NO = (e,t)=>(t = t || ho().frameRendering,
{
    enabled: e ? !0 : t.enabled,
    outline: e ? !1 : t.outline,
    name: e ? !1 : t.name,
    clip: e ? !0 : t.clip
})
  , FO = ({elements: e, exportingFrame: t, frameRendering: n, exportWithDarkMode: r})=>{
    let i;
    return t ? i = p4(e, t) : n.enabled && n.name ? i = nse(e, {
        exportWithDarkMode: r
    }) : i = e,
    i
}
  , BO = async(e,t,n,{exportBackground: r, exportPadding: i=Mf, viewBackgroundColor: o, exportingFrame: s},a=(c,u)=>{
    const f = document.createElement("canvas");
    return f.width = c * t.exportScale,
    f.height = u * t.exportScale,
    {
        canvas: f,
        scale: t.exportScale
    }
}
,l=async()=>{
    await Yo.loadFontsForElements(e)
}
)=>{
    await l();
    const c = NO(s ?? null, t.frameRendering ?? null)
      , u = FO({
        elements: e,
        exportingFrame: s,
        exportWithDarkMode: t.exportWithDarkMode,
        frameRendering: c
    });
    s && (i = 0);
    const [f,h,m,v] = c4(s ? [s] : JO(u), i)
      , {canvas: y, scale: E=1} = a(m, v)
      , b = ho()
      , {imageCache: _} = await kO({
        imageCache: new Map,
        fileIds: TO(u).map(x=>x.fileId),
        files: n
    });
    return OO({
        canvas: y,
        rc: tc.canvas(y),
        elementsMap: As(De(u)),
        allElementsMap: As(De(ka(e))),
        visibleElements: u,
        scale: E,
        appState: {
            ...t,
            frameRendering: c,
            viewBackgroundColor: r ? o : null,
            scrollX: -f + i,
            scrollY: -h + i,
            zoom: b.zoom,
            shouldCacheIgnoreZoom: !1,
            theme: t.exportWithDarkMode ? Oe.DARK : Oe.LIGHT
        },
        renderConfig: {
            canvasBackgroundColor: o,
            imageCache: _,
            renderGrid: !1,
            isExporting: !0,
            embedsValidationStatus: new Map,
            elementsPendingErasure: new Set,
            pendingFlowchartNodes: null
        }
    }),
    y
}
  , l4 = async(e,t,n,r)=>{
    const i = NO((r == null ? void 0 : r.exportingFrame) ?? null, t.frameRendering ?? null);
    let {exportPadding: o=Mf, exportWithDarkMode: s=!1, viewBackgroundColor: a, exportScale: l=1, exportEmbedScene: c} = t;
    const {exportingFrame: u=null} = r || {}
      , f = FO({
        elements: e,
        exportingFrame: u,
        exportWithDarkMode: s,
        frameRendering: i
    });
    u && (o = 0);
    let h = "";
    if (c)
        try {
            h = await (await _e(()=>Promise.resolve().then(()=>k2), void 0)).encodeSvgMetadata({
                text: Bf(e, t, n || {}, "local")
            })
        } catch ($) {
            console.error($)
        }
    const [m,v,y,E] = c4(u ? [u] : JO(f), o)
      , b = document.createElementNS($t, "svg");
    b.setAttribute("version", "1.1"),
    b.setAttribute("xmlns", $t),
    b.setAttribute("viewBox", `0 0 ${y} ${E}`),
    b.setAttribute("width", `${y * l}`),
    b.setAttribute("height", `${E * l}`),
    s && b.setAttribute("filter", y6);
    const _ = -m + o
      , x = -v + o
      , C = g4(e);
    let P = "";
    const M = De(e);
    for (const $ of C) {
        const [V,z,j,re] = Ke($, M)
          , se = (j - V) / 2 - ($.x - V)
          , ae = (re - z) / 2 - ($.y - z);
        P += `<clipPath id=${$.id}>
            <rect transform="translate(${$.x + _} ${$.y + x}) rotate(${$.angle} ${se} ${ae})"
          width="${$.width}"
          height="${$.height}"
          >
          </rect>
        </clipPath>`
    }
    const A = e.reduce(($,V)=>(ye(V) && $.add(V.fontFamily),
    $), new Set)
      , I = r != null && r.skipInliningFonts ? [] : await Promise.all(Array.from(A).map(async $=>{
        const {fonts: V, metadata: z} = Yo.registered.get($) ?? {};
        if (!Array.isArray(V)) {
            console.error(`Couldn't find registered fonts for font-family "${$}"`, Yo.registered);
            return
        }
        if (!(z != null && z.local))
            return Promise.all(V.map(async j=>`@font-face {
        font-family: ${j.fontFace.family};
        src: url(${await j.getContent()});
          }`))
    }
    ));
    if (b.innerHTML = `
  ${ese}
  ${h}
  <defs>
    <style class="style-fonts">
      ${I.flat().filter(Boolean).join(`
`)}
    </style>
    ${P}
  </defs>
  `,
    t.exportBackground && a) {
        const $ = b.ownerDocument.createElementNS($t, "rect");
        $.setAttribute("x", "0"),
        $.setAttribute("y", "0"),
        $.setAttribute("width", `${y}`),
        $.setAttribute("height", `${E}`),
        $.setAttribute("fill", a),
        b.appendChild($)
    }
    const O = tc.svg(b)
      , N = (r == null ? void 0 : r.renderEmbeddables) ?? !1;
    return Zoe(f, As(De(f)), O, b, n || {}, {
        offsetX: _,
        offsetY: x,
        isExporting: !0,
        exportWithDarkMode: s,
        renderEmbeddables: N,
        frameRendering: i,
        canvasBackgroundColor: a,
        embedsValidationStatus: N ? new Map(f.filter($=>Ue($)).map($=>[$.id, !0])) : new Map
    }),
    b
}
  , c4 = (e,t)=>{
    const [n,r,i,o] = xt(e)
      , s = xr(n, i) + t * 2
      , a = xr(r, o) + t * 2;
    return [n, r, s, a]
}
  , rse = (e,t,n)=>{
    const [,,r,i] = c4(e, t).map(o=>Math.trunc(o * n));
    return [r, i]
}
;
var u4 = {};
(function(e) {
    (function(t) {
        t(typeof DO_NOT_EXPORT_CRC > "u" ? e : {})
    }
    )(function(t) {
        t.version = "0.3.0";
        function n() {
            for (var c = 0, u = new Array(256), f = 0; f != 256; ++f)
                c = f,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                c = c & 1 ? -306674912 ^ c >>> 1 : c >>> 1,
                u[f] = c;
            return typeof Int32Array < "u" ? new Int32Array(u) : u
        }
        var r = n()
          , i = typeof Buffer < "u";
        function o(c) {
            if (c.length > 32768 && i)
                return a(new Buffer(c));
            for (var u = -1, f = c.length - 1, h = 0; h < f; )
                u = r[(u ^ c.charCodeAt(h++)) & 255] ^ u >>> 8,
                u = r[(u ^ c.charCodeAt(h++)) & 255] ^ u >>> 8;
            return h === f && (u = u >>> 8 ^ r[(u ^ c.charCodeAt(h)) & 255]),
            u ^ -1
        }
        function s(c) {
            if (c.length > 1e4)
                return a(c);
            for (var u = -1, f = 0, h = c.length - 3; f < h; )
                u = u >>> 8 ^ r[(u ^ c[f++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[f++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[f++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[f++]) & 255];
            for (; f < h + 3; )
                u = u >>> 8 ^ r[(u ^ c[f++]) & 255];
            return u ^ -1
        }
        function a(c) {
            for (var u = -1, f = 0, h = c.length - 7; f < h; )
                u = u >>> 8 ^ r[(u ^ c[f++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[f++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[f++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[f++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[f++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[f++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[f++]) & 255],
                u = u >>> 8 ^ r[(u ^ c[f++]) & 255];
            for (; f < h + 7; )
                u = u >>> 8 ^ r[(u ^ c[f++]) & 255];
            return u ^ -1
        }
        function l(c) {
            for (var u = -1, f = 0, h = c.length, m, v; f < h; )
                m = c.charCodeAt(f++),
                m < 128 ? u = u >>> 8 ^ r[(u ^ m) & 255] : m < 2048 ? (u = u >>> 8 ^ r[(u ^ (192 | m >> 6 & 31)) & 255],
                u = u >>> 8 ^ r[(u ^ (128 | m & 63)) & 255]) : m >= 55296 && m < 57344 ? (m = (m & 1023) + 64,
                v = c.charCodeAt(f++) & 1023,
                u = u >>> 8 ^ r[(u ^ (240 | m >> 8 & 7)) & 255],
                u = u >>> 8 ^ r[(u ^ (128 | m >> 2 & 63)) & 255],
                u = u >>> 8 ^ r[(u ^ (128 | v >> 6 & 15 | m & 3)) & 255],
                u = u >>> 8 ^ r[(u ^ (128 | v & 63)) & 255]) : (u = u >>> 8 ^ r[(u ^ (224 | m >> 12 & 15)) & 255],
                u = u >>> 8 ^ r[(u ^ (128 | m >> 6 & 63)) & 255],
                u = u >>> 8 ^ r[(u ^ (128 | m & 63)) & 255]);
            return u ^ -1
        }
        t.table = r,
        t.bstr = o,
        t.buf = s,
        t.str = l
    })
}
)(u4);
var ise = u4
  , ose = lse
  , us = new Uint8Array(4)
  , sse = new Int32Array(us.buffer)
  , ase = new Uint32Array(us.buffer);
function lse(e) {
    if (e[0] !== 137)
        throw new Error("Invalid .png file header");
    if (e[1] !== 80)
        throw new Error("Invalid .png file header");
    if (e[2] !== 78)
        throw new Error("Invalid .png file header");
    if (e[3] !== 71)
        throw new Error("Invalid .png file header");
    if (e[4] !== 13)
        throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");
    if (e[5] !== 10)
        throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");
    if (e[6] !== 26)
        throw new Error("Invalid .png file header");
    if (e[7] !== 10)
        throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");
    for (var t = !1, n = [], r = 8; r < e.length; ) {
        us[3] = e[r++],
        us[2] = e[r++],
        us[1] = e[r++],
        us[0] = e[r++];
        var i = ase[0] + 4
          , o = new Uint8Array(i);
        o[0] = e[r++],
        o[1] = e[r++],
        o[2] = e[r++],
        o[3] = e[r++];
        var s = String.fromCharCode(o[0]) + String.fromCharCode(o[1]) + String.fromCharCode(o[2]) + String.fromCharCode(o[3]);
        if (!n.length && s !== "IHDR")
            throw new Error("IHDR header missing");
        if (s === "IEND") {
            t = !0,
            n.push({
                name: s,
                data: new Uint8Array(0)
            });
            break
        }
        for (var a = 4; a < i; a++)
            o[a] = e[r++];
        us[3] = e[r++],
        us[2] = e[r++],
        us[1] = e[r++],
        us[0] = e[r++];
        var l = sse[0]
          , c = ise.buf(o);
        if (c !== l)
            throw new Error("CRC values for " + s + " header do not match, PNG file is likely corrupted");
        var u = new Uint8Array(o.buffer.slice(4));
        n.push({
            name: s,
            data: u
        })
    }
    if (!t)
        throw new Error(".png file ended prematurely: no IEND header was found");
    return n
}
const zO = Su(ose);
var Qv = {}
  , cse = use;
function use(e, t) {
    if (e = String(e),
    t = String(t),
    !/^[\x00-\xFF]+$/.test(e) || !/^[\x00-\xFF]+$/.test(t))
        throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");
    if (e.length >= 80)
        throw new Error('Keyword "' + e + '" is longer than the 79-character limit imposed by the PNG specification');
    for (var n = e.length + t.length + 1, r = new Uint8Array(n), i = 0, o, s = 0; s < e.length; s++) {
        if (!(o = e.charCodeAt(s)))
            throw new Error("0x00 character is not permitted in tEXt keywords");
        r[i++] = o
    }
    r[i++] = 0;
    for (var a = 0; a < t.length; a++) {
        if (!(o = t.charCodeAt(a)))
            throw new Error("0x00 character is not permitted in tEXt content");
        r[i++] = o
    }
    return {
        name: "tEXt",
        data: r
    }
}
var dse = fse;
function fse(e) {
    e.data && e.name && (e = e.data);
    for (var t = !0, n = "", r = "", i = 0; i < e.length; i++) {
        var o = e[i];
        if (t)
            o ? r += String.fromCharCode(o) : t = !1;
        else if (o)
            n += String.fromCharCode(o);
        else
            throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")
    }
    return {
        keyword: r,
        text: n
    }
}
Qv.encode = cse;
Qv.decode = dse;
var hse = function(e, t, n) {
    var r = []
      , i = e.length;
    if (i === 0)
        return r;
    var o = t < 0 ? Math.max(0, t + i) : t || 0;
    for (n !== void 0 && (i = n < 0 ? n + i : n); i-- > o; )
        r[i - o] = e[i];
    return r
}
  , gse = hse
  , pse = u4
  , mse = wse
  , ds = new Uint8Array(4)
  , vse = new Int32Array(ds.buffer)
  , yse = new Uint32Array(ds.buffer);
function wse(e) {
    var t = 8, n = t, r;
    for (r = 0; r < e.length; r++)
        t += e[r].data.length,
        t += 12;
    var i = new Uint8Array(t);
    for (i[0] = 137,
    i[1] = 80,
    i[2] = 78,
    i[3] = 71,
    i[4] = 13,
    i[5] = 10,
    i[6] = 26,
    i[7] = 10,
    r = 0; r < e.length; r++) {
        var o = e[r]
          , s = o.name
          , a = o.data
          , l = a.length
          , c = [s.charCodeAt(0), s.charCodeAt(1), s.charCodeAt(2), s.charCodeAt(3)];
        yse[0] = l,
        i[n++] = ds[3],
        i[n++] = ds[2],
        i[n++] = ds[1],
        i[n++] = ds[0],
        i[n++] = c[0],
        i[n++] = c[1],
        i[n++] = c[2],
        i[n++] = c[3];
        for (var u = 0; u < l; )
            i[n++] = a[u++];
        var f = c.concat(gse(a))
          , h = pse.buf(f);
        vse[0] = h,
        i[n++] = ds[3],
        i[n++] = ds[2],
        i[n++] = ds[1],
        i[n++] = ds[0]
    }
    return i
}
const Ese = Su(mse)
  , $O = async e=>{
    const n = zO(new Uint8Array(await vl(e))).find(r=>r.name === "tEXt");
    return n ? Qv.decode(n.data) : null
}
  , UO = async({blob: e, metadata: t})=>{
    const n = zO(new Uint8Array(await vl(e)))
      , r = Qv.encode(Re.excalidraw, JSON.stringify(await fO({
        text: t,
        compress: !0
    })));
    return n.splice(-1, 0, r),
    new Blob([Ese(n)],{
        type: Re.png
    })
}
  , bse = async e=>{
    const t = await $O(e);
    if ((t == null ? void 0 : t.keyword) === Re.excalidraw)
        try {
            const n = JSON.parse(t.text);
            if (!("encoded"in n)) {
                if ("type"in n && n.type === so.excalidraw)
                    return t.text;
                throw new Error("FAILED")
            }
            return await hO(n)
        } catch (n) {
            throw console.error(n),
            new Error("FAILED")
        }
    throw new Error("INVALID")
}
  , _se = async({text: e})=>{
    const t = await dO(JSON.stringify(await fO({
        text: e
    })), !0);
    let n = "";
    return n += `<!-- payload-type:${Re.excalidraw} -->`,
    n += "<!-- payload-version:2 -->",
    n += "<!-- payload-start -->",
    n += t,
    n += "<!-- payload-end -->",
    n
}
  , xse = async({svg: e})=>{
    if (e.includes(`payload-type:${Re.excalidraw}`)) {
        const t = e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);
        if (!t)
            throw new Error("INVALID");
        const n = e.match(/<!-- payload-version:(\d+) -->/)
          , i = ((n == null ? void 0 : n[1]) || "1") !== "1";
        try {
            const o = await woe(t[1], i)
              , s = JSON.parse(o);
            if (!("encoded"in s)) {
                if ("type"in s && s.type === so.excalidraw)
                    return o;
                throw new Error("FAILED")
            }
            return await hO(s)
        } catch (o) {
            throw console.error(o),
            new Error("FAILED")
        }
    }
    throw new Error("INVALID")
}
  , k2 = Object.freeze(Object.defineProperty({
    __proto__: null,
    decodePngMetadata: bse,
    decodeSvgMetadata: xse,
    encodePngMetadata: UO,
    encodeSvgMetadata: _se,
    getTEXtChunk: $O
}, Symbol.toStringTag, {
    value: "Module"
}))
  , No = 32
  , Rt = 12
  , Dl = 256
  , HO = 50
  , kc = "NOT_SPREADSHEET"
  , gp = "VALID_SPREADSHEET"
  , qh = e=>{
    const t = /^([-+]?)[$€£¥₩]?([-+]?)([\d.,]+)[%]?$/.exec(e);
    return t ? parseFloat(`${(t[1] || t[2]) + t[3]}`.replace(/,/g, "")) : null
}
  , eb = (e,t)=>e.slice(1).every(n=>qh(n[t]) !== null)
  , S8 = e=>{
    const t = e[0].length;
    if (t > 2)
        return {
            type: kc,
            reason: "More than 2 columns"
        };
    if (t === 1) {
        if (!eb(e, 0))
            return {
                type: kc,
                reason: "Value is not numeric"
            };
        const l = qh(e[0][0]) === null
          , c = (l ? e.slice(1) : e).map(u=>qh(u[0]));
        return c.length < 2 ? {
            type: kc,
            reason: "Less than two rows"
        } : {
            type: gp,
            spreadsheet: {
                title: l ? e[0][0] : null,
                labels: null,
                values: c
            }
        }
    }
    const n = eb(e, 0)
      , r = eb(e, 1);
    if (!n && !r)
        return {
            type: kc,
            reason: "Value is not numeric"
        };
    const [i,o] = r ? [0, 1] : [1, 0]
      , s = qh(e[0][o]) === null
      , a = s ? e.slice(1) : e;
    return a.length < 2 ? {
        type: kc,
        reason: "Less than 2 rows"
    } : {
        type: gp,
        spreadsheet: {
            title: s ? e[0][o] : null,
            labels: a.map(l=>l[i]),
            values: a.map(l=>qh(l[o]))
        }
    }
}
  , Sse = e=>{
    const t = [];
    for (let n = 0; n < e[0].length; n++) {
        const r = [];
        for (let i = 0; i < e.length; i++)
            r.push(e[i][n]);
        t.push(r)
    }
    return t
}
  , Ise = e=>{
    let t = e.trim().split(`
`).map(o=>o.trim().split("	"));
    if (t.length && t[0].length !== 2 && (t = e.trim().split(`
`).map(o=>o.trim().split(","))),
    t.length === 0)
        return {
            type: kc,
            reason: "No values"
        };
    const n = t[0].length;
    if (!t.every(o=>o.length === n))
        return {
            type: kc,
            reason: "All rows don't have same number of columns"
        };
    const i = S8(t);
    if (i.type !== gp) {
        const o = S8(Sse(t));
        if (o.type === gp)
            return o
    }
    return i
}
  , T2 = iq(tq)
  , Ho = {
    fillStyle: "hachure",
    fontFamily: ec,
    fontSize: Ra,
    opacity: 100,
    roughness: 1,
    strokeColor: Qe.black,
    roundness: null,
    strokeStyle: "solid",
    strokeWidth: 1,
    verticalAlign: Ai.MIDDLE,
    locked: !1
}
  , WO = e=>{
    const t = (No + Rt) * e.values.length + Rt
      , n = Dl + Rt * 2;
    return {
        chartWidth: t,
        chartHeight: n
    }
}
  , Cse = (e,t,n,r,i)=>{
    var o;
    return ((o = e.labels) == null ? void 0 : o.map((s,a)=>yo({
        groupIds: [r],
        backgroundColor: i,
        ...Ho,
        text: s.length > 8 ? `${s.slice(0, 5)}...` : s,
        x: t + a * (No + Rt) + Rt * 2,
        y: n + Rt / 2,
        width: No,
        angle: 5.87,
        fontSize: 16,
        textAlign: "center",
        verticalAlign: "top"
    }))) || []
}
  , kse = (e,t,n,r,i)=>{
    const o = yo({
        groupIds: [r],
        backgroundColor: i,
        ...Ho,
        x: t - Rt,
        y: n - Rt,
        text: "0",
        textAlign: "right"
    })
      , s = yo({
        groupIds: [r],
        backgroundColor: i,
        ...Ho,
        x: t - Rt,
        y: n - Dl - o.height / 2,
        text: Math.max(...e.values).toLocaleString(),
        textAlign: "right"
    });
    return [o, s]
}
  , Tse = (e,t,n,r,i)=>{
    const {chartWidth: o, chartHeight: s} = WO(e)
      , a = Qc({
        backgroundColor: i,
        groupIds: [r],
        ...Ho,
        type: "line",
        x: t,
        y: n,
        width: o,
        points: [[0, 0], [o, 0]]
    })
      , l = Qc({
        backgroundColor: i,
        groupIds: [r],
        ...Ho,
        type: "line",
        x: t,
        y: n,
        height: s,
        points: [[0, 0], [0, -s]]
    })
      , c = Qc({
        backgroundColor: i,
        groupIds: [r],
        ...Ho,
        type: "line",
        x: t,
        y: n - Dl - Rt,
        strokeStyle: "dotted",
        width: o,
        opacity: HO,
        points: [[0, 0], [o, 0]]
    });
    return [a, l, c]
}
  , GO = (e,t,n,r,i,o)=>{
    const {chartWidth: s, chartHeight: a} = WO(e)
      , l = e.title ? yo({
        backgroundColor: i,
        groupIds: [r],
        ...Ho,
        text: e.title,
        x: t + s / 2,
        y: n - Dl - Rt * 2 - Ra,
        roundness: null,
        textAlign: "center"
    }) : null;
    return [...l ? [l] : [], ...Cse(e, t, n, r, i), ...kse(e, t, n, r, i), ...Tse(e, t, n, r, i)]
}
  , Ase = (e,t,n)=>{
    const r = Math.max(...e.values)
      , i = po()
      , o = T2[Math.floor(Math.random() * T2.length)];
    return [...e.values.map((a,l)=>{
        const c = a / r * Dl;
        return Sa({
            backgroundColor: o,
            groupIds: [i],
            ...Ho,
            type: "rectangle",
            x: t + l * (No + Rt) + Rt,
            y: n - c - Rt,
            width: No,
            height: c
        })
    }
    ), ...GO(e, t, n, i, o)]
}
  , Mse = (e,t,n)=>{
    const r = Math.max(...e.values)
      , i = po()
      , o = T2[Math.floor(Math.random() * T2.length)];
    let s = 0;
    const a = [];
    for (const y of e.values) {
        const E = s * (No + Rt)
          , b = -(y / r) * Dl;
        a.push([E, b]),
        s++
    }
    const l = Math.max(...a.map(y=>y[0]))
      , c = Math.max(...a.map(y=>y[1]))
      , u = Math.min(...a.map(y=>y[0]))
      , f = Math.min(...a.map(y=>y[1]))
      , h = Qc({
        backgroundColor: o,
        groupIds: [i],
        ...Ho,
        type: "line",
        x: t + Rt + No / 2,
        y: n - Rt,
        height: c - f,
        width: l - u,
        strokeWidth: 2,
        points: a
    })
      , m = e.values.map((y,E)=>{
        const b = E * (No + Rt) + Rt / 2
          , _ = -(y / r) * Dl + Rt / 2;
        return Sa({
            backgroundColor: o,
            groupIds: [i],
            ...Ho,
            fillStyle: "solid",
            strokeWidth: 2,
            type: "ellipse",
            x: t + b + No / 2,
            y: n + _ - Rt * 2,
            width: Rt,
            height: Rt
        })
    }
    )
      , v = e.values.map((y,E)=>{
        const b = E * (No + Rt) + Rt / 2
          , _ = y / r * Dl + Rt / 2 + Rt;
        return Qc({
            backgroundColor: o,
            groupIds: [i],
            ...Ho,
            type: "line",
            x: t + b + No / 2 + Rt / 2,
            y: n - _,
            height: _,
            strokeStyle: "dotted",
            opacity: HO,
            points: [[0, 0], [0, _]]
        })
    }
    );
    return [...GO(e, t, n, i, o), h, ...v, ...m]
}
  , Lse = (e,t,n,r)=>e === "line" ? Mse(t, n, r) : Ase(t, n, r)
  , d4 = "clipboard"in navigator && "writeText"in navigator.clipboard
  , f4 = "clipboard"in navigator && "write"in navigator.clipboard && "ClipboardItem"in window && "toBlob"in HTMLCanvasElement.prototype
  , Pse = e=>!!([so.excalidraw, so.excalidrawClipboard, so.excalidrawClipboardWithAPI].includes(e == null ? void 0 : e.type) && Array.isArray(e.elements))
  , Rse = ({types: e, files: t})=>{
    var r, i, o, s;
    !e && !t && console.warn("createPasteEvent: no types or files provided");
    const n = new ClipboardEvent("paste",{
        clipboardData: new DataTransfer
    });
    if (e)
        for (const [a,l] of Object.entries(e))
            try {
                if ((r = n.clipboardData) == null || r.setData(a, l),
                ((i = n.clipboardData) == null ? void 0 : i.getData(a)) !== l)
                    throw new Error(`Failed to set "${a}" as clipboardData item`)
            } catch (c) {
                throw new Error(c.message)
            }
    if (t) {
        let a = -1;
        for (const l of t) {
            a++;
            try {
                if ((o = n.clipboardData) == null || o.items.add(l),
                ((s = n.clipboardData) == null ? void 0 : s.files[a]) !== l)
                    throw new Error(`Failed to set file "${l.name}" as clipboardData item`)
            } catch (c) {
                throw new Error(c.message)
            }
        }
    }
    return n
}
  , Dse = ({elements: e, files: t})=>{
    const n = De(e)
      , r = new Set(e.filter(a=>Ue(a)));
    let i = !1;
    const o = e.reduce((a,l)=>(Hn(l) && (i = !0,
    t && t[l.fileId] && (a[l.fileId] = t[l.fileId])),
    a), {});
    i && !t && console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");
    const s = {
        type: so.excalidrawClipboard,
        elements: e.map(a=>{
            if (Pi(a, n) && !r.has(Pi(a, n))) {
                const l = $f(a);
                return ue(l, {
                    frameId: null
                }),
                l
            }
            return a
        }
        ),
        files: t ? o : void 0
    };
    return JSON.stringify(s)
}
  , Ose = async(e,t,n)=>{
    await Pu(Dse({
        elements: e,
        files: t
    }), n)
}
  , Nse = e=>{
    const t = Ise(e);
    return t.type === gp ? {
        spreadsheet: t.spreadsheet
    } : null
}
;
function VO(e) {
    var n;
    let t = [];
    for (const r of e.childNodes)
        if (r.nodeType === 3) {
            const i = (n = r.textContent) == null ? void 0 : n.trim();
            i && t.push({
                type: "text",
                value: i
            })
        } else if (r instanceof HTMLImageElement) {
            const i = r.getAttribute("src");
            i && i.startsWith("http") && t.push({
                type: "imageUrl",
                value: i
            })
        } else
            t = t.concat(VO(r));
    return t
}
const Fse = e=>{
    var n;
    const t = (n = e.clipboardData) == null ? void 0 : n.getData("text/html");
    if (!t)
        return null;
    try {
        const r = new DOMParser().parseFromString(t, "text/html")
          , i = VO(r.body);
        if (i.length)
            return {
                type: "mixedContent",
                value: i
            }
    } catch (r) {
        console.error(`error in parseHTMLFromPaste: ${r.message}`)
    }
    return null
}
  , Bse = async()=>{
    var n, r, i, o;
    const e = {};
    try {
        if ((n = navigator.clipboard) != null && n.readText)
            return {
                "text/plain": await ((r = navigator.clipboard) == null ? void 0 : r.readText())
            }
    } catch (s) {
        if ((i = navigator.clipboard) != null && i.read)
            console.warn(`navigator.clipboard.readText() failed (${s.message}). Failling back to navigator.clipboard.read()`);
        else
            throw s
    }
    let t;
    try {
        t = await ((o = navigator.clipboard) == null ? void 0 : o.read())
    } catch (s) {
        if (s.name === "DataError")
            return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${s.message}`),
            e;
        throw s
    }
    for (const s of t)
        for (const a of s.types)
            if (j3(Eq, a))
                try {
                    e[a] = await (await s.getType(a)).text()
                } catch (l) {
                    console.warn(`Cannot retrieve ${a} from clipboardItem: ${l.message}`)
                }
    return Object.keys(e).length === 0 && console.warn("No clipboard data found from clipboard.read()."),
    e
}
  , zse = async(e,t=!1)=>{
    var n, r;
    try {
        const i = !t && e && Fse(e);
        return i ? i.value.every(s=>s.type === "text") ? {
            type: "text",
            value: ((n = e.clipboardData) == null ? void 0 : n.getData("text/plain")) || i.value.map(s=>s.value).join(`
`).trim()
        } : i : {
            type: "text",
            value: (((r = e.clipboardData) == null ? void 0 : r.getData("text/plain")) || "").trim()
        }
    } catch {
        return {
            type: "text",
            value: ""
        }
    }
}
  , YO = async(e,t=!1)=>{
    const n = await zse(e, t);
    if (n.type === "mixedContent")
        return {
            mixedContent: n.value
        };
    try {
        const r = !t && Nse(n.value);
        if (r)
            return r
    } catch (r) {
        console.error(r)
    }
    try {
        const r = JSON.parse(n.value)
          , i = r.type === so.excalidrawClipboardWithAPI;
        if (Pse(r))
            return {
                elements: r.elements,
                files: r.files,
                text: t ? JSON.stringify(r.elements, null, 2) : void 0,
                programmaticAPI: i
            }
    } catch {}
    return {
        text: n.value
    }
}
  , $se = async e=>{
    try {
        await navigator.clipboard.write([new window.ClipboardItem({
            [Re.png]: e
        })])
    } catch (t) {
        if ($p(e))
            await navigator.clipboard.write([new window.ClipboardItem({
                [Re.png]: await e
            })]);
        else
            throw t
    }
}
  , Pu = async(e,t)=>{
    var n, r;
    if (d4)
        try {
            await navigator.clipboard.writeText(e || "");
            return
        } catch (i) {
            console.error(i)
        }
    try {
        if (t) {
            if ((n = t.clipboardData) == null || n.setData("text/plain", e || ""),
            ((r = t.clipboardData) == null ? void 0 : r.getData("text/plain")) !== e)
                throw new Error("Failed to setData on clipboardEvent");
            return
        }
    } catch (i) {
        console.error(i)
    }
    if (!Use(e))
        throw new Error("Error copying to clipboard.")
}
  , Use = e=>{
    e || (e = " ");
    const t = document.documentElement.getAttribute("dir") === "rtl"
      , n = document.createElement("textarea");
    n.style.border = "0",
    n.style.padding = "0",
    n.style.margin = "0",
    n.style.position = "absolute",
    n.style[t ? "right" : "left"] = "-9999px";
    const r = window.pageYOffset || document.documentElement.scrollTop;
    n.style.top = `${r}px`,
    n.style.fontSize = "12pt",
    n.setAttribute("readonly", ""),
    n.value = e,
    document.body.appendChild(n);
    let i = !1;
    try {
        n.select(),
        n.setSelectionRange(0, n.value.length),
        i = document.execCommand("copy")
    } catch (o) {
        console.error(o)
    }
    return n.remove(),
    i
}
  , Jv = ({elements: e, appState: t, files: n, maxWidthOrHeight: r, getDimensions: i, exportPadding: o, exportingFrame: s})=>{
    const {elements: a, appState: l} = pu({
        elements: e,
        appState: t
    }, null, null)
      , {exportBackground: c, viewBackgroundColor: u} = l;
    return BO(a, {
        ...l,
        offsetTop: 0,
        offsetLeft: 0,
        width: 0,
        height: 0
    }, n || {}, {
        exportBackground: c,
        exportPadding: o,
        viewBackgroundColor: u,
        exportingFrame: s
    }, (f,h)=>{
        const m = document.createElement("canvas");
        if (r) {
            typeof i == "function" && console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");
            const y = Math.max(f, h)
              , E = r < y ? r / y : (t == null ? void 0 : t.exportScale) ?? 1;
            return m.width = f * E,
            m.height = h * E,
            {
                canvas: m,
                scale: E
            }
        }
        const v = (i == null ? void 0 : i(f, h)) || {
            width: f,
            height: h
        };
        return m.width = v.width,
        m.height = v.height,
        {
            canvas: m,
            scale: v.scale ?? 1
        }
    }
    )
}
  , Hse = async e=>{
    var i;
    let {mimeType: t=Re.png, quality: n} = e;
    t === Re.png && typeof n == "number" && console.warn(`"quality" will be ignored for "${Re.png}" mimeType`),
    t === "image/jpg" && (t = Re.jpg),
    t === Re.jpg && !((i = e.appState) != null && i.exportBackground) && (console.warn(`Defaulting "exportBackground" to "true" for "${Re.jpg}" mimeType`),
    e = {
        ...e,
        appState: {
            ...e.appState,
            exportBackground: !0
        }
    });
    const r = await Jv(e);
    return n = n || (/image\/jpe?g/.test(t) ? .92 : .8),
    new Promise((o,s)=>{
        r.toBlob(async a=>{
            var l;
            if (!a)
                return s(new Error("couldn't export to blob"));
            a && t === Re.png && ((l = e.appState) != null && l.exportEmbedScene) && (a = await UO({
                blob: a,
                metadata: Bf(e.elements, e.appState, e.files || {}, "local")
            })),
            o(a)
        }
        , t, n)
    }
    )
}
  , jO = async({elements: e, appState: t=ho(), files: n={}, exportPadding: r, renderEmbeddables: i, exportingFrame: o, skipInliningFonts: s})=>{
    const {elements: a, appState: l} = pu({
        elements: e,
        appState: t
    }, null, null)
      , c = {
        ...l,
        exportPadding: r
    };
    return l4(a, c, n, {
        exportingFrame: o,
        renderEmbeddables: i,
        skipInliningFonts: s
    })
}
  , Wse = e=>e.type === "diamond" ? [[e.width / 2, 0], [e.width, e.height / 2], [e.width / 2, e.height], [0, e.height / 2]] : [[0, 0], [0 + e.width, 0], [0 + e.width, e.height], [0, e.height]]
  , Gse = e=>je(e) || Di(e) ? e.points : Wse(e)
  , I8 = e=>{
    const t = e.reduce((n,[r,i])=>(n.minY = Math.min(n.minY, i),
    n.minX = Math.min(n.minX, r),
    n.maxX = Math.max(n.maxX, r),
    n.maxY = Math.max(n.maxY, i),
    n), {
        minX: 1 / 0,
        minY: 1 / 0,
        maxX: -1 / 0,
        maxY: -1 / 0,
        cx: 0,
        cy: 0
    });
    return t.cx = (t.maxX + t.minX) / 2,
    t.cy = (t.maxY + t.minY) / 2,
    t
}
  , KO = e=>{
    const t = Gse(e)
      , {cx: n, cy: r} = I8(t)
      , i = [n, r]
      , o = t.map(u=>Ae([u[0], u[1]], i, e.angle))
      , {minX: s, minY: a, maxX: l, maxY: c} = I8(o);
    return [s + e.x, a + e.y, l + e.x, c + e.y]
}
  , C8 = (e,t,n=!1)=>{
    const r = KO(e)
      , i = t[0] <= r[0] && t[2] >= r[2] && t[1] <= r[1] && t[3] >= r[3];
    return n ? i ? !0 : r[0] <= t[0] && r[2] >= t[2] && r[1] <= t[1] && r[3] >= t[3] : i
}
  , Vse = (e,t)=>{
    const n = KO(e);
    return (A0(n[0], t[0], t[2]) || A0(t[0], n[0], n[2])) && (A0(n[1], t[1], t[3]) || A0(t[1], n[1], n[3]))
}
  , Yse = ({elements: e, bounds: t, type: n, errorMargin: r=0})=>{
    var s;
    aD(t) && (t = Yl(t, De(e)));
    const i = [t[0] - r, t[1] - r, t[2] + r, t[3] + r]
      , o = new Set;
    for (const a of e) {
        if (o.has(a.id))
            continue;
        if (n === "overlap" ? Vse(a, i) : n === "inside" ? C8(a, i) : C8(a, i, !0)) {
            if (o.add(a.id),
            a.boundElements)
                for (const c of a.boundElements)
                    o.add(c.id);
            ye(a) && a.containerId && o.add(a.containerId),
            Be(a) && (a.startBinding && o.add(a.startBinding.elementId),
            a.endBinding && o.add((s = a.endBinding) == null ? void 0 : s.elementId))
        }
    }
    return e.filter(a=>o.has(a.id))
}
  , XO = (e,t,n)=>{
    const r = De(e);
    for (const i of t)
        if (i.frameId) {
            const o = n.get(i.id)
              , s = n.get(i.frameId);
            if (o) {
                const a = r.get(o);
                a && ue(a, {
                    frameId: s ?? i.frameId
                }, !1)
            }
        }
}
;
function ZO(e, t, n) {
    const r = N8(t, n)
      , i = N8(e, n);
    return r.some(s=>i.some(a=>nie(s, a)))
}
const qO = (e,t,n)=>ty(L4(e, t, n, !1)).filter(r=>!Ue(r) && !r.frameId || r.frameId === t.id)
  , QO = (e,t,n,r)=>L4(e, t, r).some(i=>i.id === n.id)
  , h4 = (e,t,n)=>{
    const [r,i,o,s] = Ke(t, n)
      , [a,l,c,u] = xt(e);
    return r <= a && i <= l && o >= c && s >= u
}
  , Vl = (e,t,n)=>h4([e], t, n) || ZO(e, t, n) || QO([t], e, t, n)
  , k8 = (e,t,n)=>{
    const [r,i,o,s] = Ke(t, n);
    return hN([r, i], [e.x, e.y], [o, s])
}
  , jse = e=>{
    const t = new Map;
    for (const n of e) {
        const r = Ue(n) ? n.id : n.frameId;
        r && !t.has(r) && t.set(r, Ia(e, r))
    }
    return t
}
  , Ia = (e,t)=>{
    const n = [];
    for (const r of e.values())
        r.frameId === t && n.push(r);
    return n
}
  , g4 = e=>e.filter(t=>Ue(t))
  , JO = e=>{
    const t = De(g4(e));
    return e.filter(n=>t.has(n.id) || !n.frameId || !t.has(n.frameId))
}
  , Em = (e,t,n,r)=>{
    const i = Ia(e, t.id)
      , o = new Set(i)
      , s = new Set([...qO(e, t, r), ...i.filter(h=>QO(e, h, t, r))])
      , a = i.filter(h=>!s.has(h))
      , l = new Set(Array.from(s).flatMap(h=>h.groupIds));
    for (const h of a)
        if (!ZO(h, t, r))
            h.groupIds.length === 0 && o.delete(h);
        else if (h.groupIds.length > 0)
            for (const m of h.groupIds)
                l.add(m);
    for (const h of a)
        if (h.groupIds.length > 0) {
            let m = !0;
            for (const v of h.groupIds)
                l.has(v) && (m = !1);
            m && o.delete(h)
        }
    const c = Array.from(s).filter(h=>h.groupIds.length === 0);
    for (const h of c)
        o.add(h);
    const u = Array.from(s).filter(h=>h.groupIds.length > 0)
      , f = mD(u, n);
    for (const [h,m] of Object.entries(f))
        if (m) {
            const v = xn(e, h);
            if (h4(v, t, r))
                for (const y of v)
                    o.add(y)
        }
    return [...o].filter(h=>!(ye(h) && h.containerId))
}
  , Kse = (e,t,n)=>ty(e, qO(e, t, n))
  , Pi = (e,t)=>e.frameId && t.get(e.frameId) || null
  , Xse = (e,t)=>{
    const n = new Set
      , r = De(e);
    e = ty(e);
    for (const s of e)
        Ue(s) && s.id !== t.id && n.add(s.id);
    const i = new Set
      , o = [];
    for (const s of e)
        if (!(Ue(s) || s.frameId && n.has(s.frameId)))
            if (s.groupIds.length) {
                const a = s.groupIds.at(-1);
                if (!i.has(a)) {
                    i.add(a);
                    const l = xn(e, a);
                    if (l.some(c=>Vl(c, t, r)))
                        for (const c of l)
                            o.push(c)
                }
            } else
                Vl(s, t, r) && o.push(s);
    return o
}
  , bm = (e,t,n)=>{
    const r = De(e)
      , i = new Map;
    for (const l of e.values())
        l.frameId === n.id && i.set(l.id, !0);
    const o = new Set(t.map(l=>l.id))
      , s = []
      , a = new Set;
    for (const l of t)
        Ue(l) && l.id !== n.id && a.add(l.id);
    for (const l of ty(e, t)) {
        if (Ue(l) || l.frameId && a.has(l.frameId))
            continue;
        i.has(l.id) || s.push(l);
        const c = Ge(l, r);
        c && !o.has(c.id) && !i.has(c.id) && s.push(c)
    }
    for (const l of s)
        ue(l, {
            frameId: n.id
        }, !1);
    return e
}
  , ey = (e,t)=>{
    const n = new Map
      , r = new Map;
    for (const i of e)
        if (i.frameId) {
            n.set(i.id, i);
            const o = r.get(i.frameId) || [];
            o.push(i);
            const s = Ge(i, t);
            s && (n.set(s.id, s),
            o.push(s)),
            r.set(i.frameId, o)
        }
    for (const [,i] of n)
        ue(i, {
            frameId: null
        }, !1)
}
  , eN = (e,t)=>{
    const n = Ia(e, t.id);
    return ey(n, De(e)),
    e
}
  , tN = (e,t,n,r)=>bm(eN(e, n), t, n).slice()
  , wf = (e,t,n)=>{
    const r = n.scene.getSelectedElements({
        selectedElementIds: t.selectedElementIds,
        elements: e
    })
      , i = new Set(r);
    if (t.editingGroupId)
        for (const a of r)
            a.groupIds.length === 0 ? i.add(a) : a.groupIds.flatMap(l=>xn(e, l)).forEach(l=>i.add(l));
    const o = new Set
      , s = De(e);
    return i.forEach(a=>{
        a.frameId && !Ue(a) && !pp(a, s, t) && o.add(a)
    }
    ),
    o.size > 0 && ey(o, s),
    e
}
  , ty = (e,t)=>{
    const n = new Set
      , r = t || e;
    for (const s of r.values()) {
        const a = s.groupIds[s.groupIds.length - 1];
        a && n.add(a)
    }
    const i = new Set;
    for (const s of n)
        xn(e, s).some(a=>Ue(a)) && i.add(s);
    const o = [];
    for (const s of r.values())
        i.has(s.groupIds[s.groupIds.length - 1]) || o.push(s);
    return o
}
  , x_ = (e,t,n)=>{
    const r = ye(e) && Hr(e, t) || e;
    return n.selectedElementIds[r.id] && n.selectedElementsAreBeingDragged ? n.frameToHighlight : Pi(r, t)
}
  , pp = (e,t,n)=>{
    const r = x_(e, t, n)
      , i = ye(e) && Hr(e, t) || e;
    if (r) {
        if (!n.selectedElementIds[e.id] || !n.selectedElementsAreBeingDragged)
            return !0;
        if (i.groupIds.length === 0)
            return Vl(i, r, t);
        const o = new Set(i.groupIds.flatMap(s=>xn(t, s)));
        if (n.editingGroupId && n.selectedElementsAreBeingDragged) {
            const s = new Set(dt(t, n));
            if (n.frameToHighlight !== null)
                return !0;
            s.forEach(l=>{
                o.delete(l)
            }
            )
        }
        for (const s of o)
            if (Ue(s))
                return !1;
        for (const s of o)
            if (Vl(s, r, t))
                return !0
    }
    return !1
}
  , nN = e=>e.name === null ? oD(e) ? "Frame" : "AI Frame" : e.name
  , p4 = (e,t)=>Yse({
    elements: e,
    bounds: t,
    type: "overlap"
}).filter(n=>!n.frameId || n.frameId === t.id);
var Zse = {
    VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
    VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
    VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
    VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
    VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
    VITE_APP_PLUS_APP: "https://app.excalidraw.com",
    VITE_APP_AI_BACKEND: "https://oss-ai.excalidraw.com",
    VITE_APP_WS_SERVER_URL: "https://oss-collab.excalidraw.com",
    VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
    VITE_APP_ENABLE_TRACKING: "true",
    VITE_APP_GIT_SHA: "fb4bb29aa5d9f03c60afc9984b01f25bcd117970",
    BASE_URL: "/",
    MODE: "production",
    DEV: !1,
    PROD: !0,
    SSR: !1
};
const rN = "invert(100%) hue-rotate(180deg) saturate(1.25)"
  , qse = ho()
  , iN = (e,t)=>Hn(e) && !t.imageCache.has(e.fileId)
  , oN = (e,t,n)=>{
    var r;
    return n.theme === Oe.DARK && Hn(e) && !iN(e, t) && ((r = t.imageCache.get(e.fileId)) == null ? void 0 : r.mimeType) !== Re.svg
}
  , ny = e=>{
    switch (e.type) {
    case "freedraw":
        return e.strokeWidth * 12;
    case "text":
        return e.fontSize / 2;
    default:
        return 20
    }
}
  , sN = (e,t,n,r)=>{
    let i = ((t == null ? void 0 : t.opacity) ?? 100) * e.opacity / 1e4;
    return (n.has(e.id) || r && r.some(o=>o.id === e.id) || t && n.has(t.id)) && (i *= Nq / 100),
    i
}
  , Qse = (e,t,n)=>{
    const o = ny(e)
      , [s,a,l,c] = Ke(e, t)
      , u = je(e) || Di(e) ? xr(s, l) : e.width
      , f = je(e) || Di(e) ? xr(a, c) : e.height;
    let h = u * window.devicePixelRatio + o * 2
      , m = f * window.devicePixelRatio + o * 2
      , v = n.value;
    return (h * v > 32767 || m * v > 32767) && (v = Math.min(32767 / h, 32767 / m)),
    h * m * v * v > 16777216 && (v = Math.sqrt(16777216 / (h * m))),
    h = Math.floor(h * v),
    m = Math.floor(m * v),
    {
        width: h,
        height: m,
        scale: v
    }
}
  , Jse = (e,t,n,r,i)=>{
    var b, _;
    const o = document.createElement("canvas")
      , s = o.getContext("2d")
      , a = ny(e)
      , {width: l, height: c, scale: u} = Qse(e, t, n);
    if (!l || !c)
        return null;
    o.width = l,
    o.height = c;
    let f = -100
      , h = 0;
    if (je(e) || Di(e)) {
        const [x,C] = Ke(e, t);
        f = e.x > x ? xr(e.x, x) * window.devicePixelRatio * u : 0,
        h = e.y > C ? xr(e.y, C) * window.devicePixelRatio * u : 0,
        s.translate(f, h)
    }
    s.save(),
    s.translate(a * u, a * u),
    s.scale(window.devicePixelRatio * u, window.devicePixelRatio * u);
    const m = tc.canvas(o);
    oN(e, r, i) && (s.filter = rN),
    _m(e, m, s, r),
    s.restore();
    const v = Ge(e, t)
      , y = document.createElement("canvas")
      , E = y.getContext("2d");
    if (Be(e) && v) {
        const [x,C,P,M] = Ke(e, t)
          , A = Math.max(xr(x, P), xr(C, M));
        y.width = A * window.devicePixelRatio * u + a * u * 10,
        y.height = A * window.devicePixelRatio * u + a * u * 10,
        E.translate(y.width / 2, y.height / 2),
        E.rotate(e.angle),
        E.drawImage(o, -o.width / 2, -o.height / 2, o.width, o.height);
        const [,,,,I,O] = Ke(v, t);
        E.rotate(-e.angle);
        const N = (y.width - o.width) / 2
          , $ = (y.height - o.height) / 2
          , V = y.width / 2 - (I - x) * window.devicePixelRatio * u - N - a * u
          , z = y.height / 2 - (O - C) * window.devicePixelRatio * u - $ - a * u;
        E.translate(-V, -z),
        E.clearRect(-(v.width / 2 + Tn) * window.devicePixelRatio * u, -(v.height / 2 + Tn) * window.devicePixelRatio * u, (v.width + Tn * 2) * window.devicePixelRatio * u, (v.height + Tn * 2) * window.devicePixelRatio * u)
    }
    return {
        element: e,
        canvas: o,
        theme: i.theme,
        scale: u,
        zoomValue: n.value,
        canvasOffsetX: f,
        canvasOffsetY: h,
        boundTextElementVersion: ((b = Ge(e, t)) == null ? void 0 : b.version) || null,
        containingFrameOpacity: ((_ = Pi(e, t)) == null ? void 0 : _.opacity) || 100,
        boundTextCanvas: y,
        angle: e.angle
    }
}
  , eae = 14
  , aN = document.createElement("img");
aN.src = `data:${Re.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;
const lN = document.createElement("img");
lN.src = `data:${Re.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;
const tae = (e,t)=>{
    t.fillStyle = "#E7E7E7",
    t.fillRect(0, 0, e.width, e.height);
    const n = Math.min(e.width, e.height)
      , r = Math.min(n, Math.min(n * .4, 100));
    t.drawImage(e.status === "error" ? lN : aN, e.width / 2 - r / 2, e.height / 2 - r / 2, r, r)
}
  , _m = (e,t,n,r,i)=>{
    var o;
    switch (e.type) {
    case "rectangle":
    case "iframe":
    case "embeddable":
    case "diamond":
    case "ellipse":
        {
            n.lineJoin = "round",
            n.lineCap = "round",
            t.draw(Yt.get(e));
            break
        }
    case "arrow":
    case "line":
        {
            n.lineJoin = "round",
            n.lineCap = "round",
            Yt.get(e).forEach(s=>{
                t.draw(s)
            }
            );
            break
        }
    case "freedraw":
        {
            n.save(),
            n.fillStyle = e.strokeColor;
            const s = iae(e)
              , a = Yt.get(e);
            a && t.draw(a),
            n.fillStyle = e.strokeColor,
            n.fill(s),
            n.restore();
            break
        }
    case "image":
        {
            const s = Hn(e) ? (o = r.imageCache.get(e.fileId)) == null ? void 0 : o.image : void 0;
            s != null && !(s instanceof Promise) ? (e.roundness && n.roundRect && (n.beginPath(),
            n.roundRect(0, 0, e.width, e.height, Ol(Math.min(e.width, e.height), e)),
            n.clip()),
            n.drawImage(s, 0, 0, e.width, e.height)) : tae(e, n);
            break
        }
    default:
        if (ye(e)) {
            const s = QR(e.text)
              , a = s && !n.canvas.isConnected;
            a && document.body.appendChild(n.canvas),
            n.canvas.setAttribute("dir", s ? "rtl" : "ltr"),
            n.save(),
            n.font = Ht(e),
            n.fillStyle = e.strokeColor,
            n.textAlign = e.textAlign;
            const l = e.text.replace(/\r\n?/g, `
`).split(`
`)
              , c = e.textAlign === "center" ? e.width / 2 : e.textAlign === "right" ? e.width : 0
              , u = Kp(e.fontSize, e.lineHeight)
              , f = vO(e.fontFamily, e.fontSize, u);
            for (let h = 0; h < l.length; h++)
                n.fillText(l[h], c, h * u + f);
            n.restore(),
            a && n.canvas.remove()
        } else
            throw new Error(`Unimplemented type ${e.type}`)
    }
}
  , S_ = new WeakMap
  , T8 = (e,t,n,r)=>{
    var u;
    const i = n ? r.zoom : qse.zoom
      , o = S_.get(e)
      , s = o && o.zoomValue !== i.value && !(r != null && r.shouldCacheIgnoreZoom)
      , a = Ge(e, t)
      , l = (a == null ? void 0 : a.version) || null
      , c = ((u = Pi(e, t)) == null ? void 0 : u.opacity) || 100;
    if (!o || s || o.theme !== r.theme || o.boundTextElementVersion !== l || o.containingFrameOpacity !== c || Be(e) && a && e.angle !== o.angle) {
        const f = Jse(e, t, i, n, r);
        return f ? (S_.set(e, f),
        f) : null
    }
    return o
}
  , A8 = (e,t,n,r,i)=>{
    const o = e.element
      , s = ny(o)
      , a = e.scale
      , [l,c,u,f] = Ke(o, i)
      , h = ((l + u) / 2 + r.scrollX) * window.devicePixelRatio
      , m = ((c + f) / 2 + r.scrollY) * window.devicePixelRatio;
    t.save(),
    t.scale(1 / window.devicePixelRatio, 1 / window.devicePixelRatio);
    const v = Ge(o, i);
    if (Be(o) && v) {
        const y = (e.boundTextCanvas.width - e.canvas.width) / 2
          , E = (e.boundTextCanvas.height - e.canvas.height) / 2;
        t.translate(h, m),
        t.drawImage(e.boundTextCanvas, -(u - l) / 2 * window.devicePixelRatio - y / a - s, -(f - c) / 2 * window.devicePixelRatio - E / a - s, e.boundTextCanvas.width / a, e.boundTextCanvas.height / a)
    } else if (t.translate(h, m),
    t.rotate(o.angle),
    "scale"in e.element && !iN(o, n) && t.scale(e.element.scale[0], e.element.scale[1]),
    t.translate(-h, -m),
    t.drawImage(e.canvas, (l + r.scrollX) * window.devicePixelRatio - s * e.scale / e.scale, (c + r.scrollY) * window.devicePixelRatio - s * e.scale / e.scale, e.canvas.width / e.scale, e.canvas.height / e.scale),
    Zse.VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX === "true" && go(o)) {
        const y = Ge(o, i)
          , E = xN(o);
        t.strokeStyle = "#c92a2a",
        t.lineWidth = 3,
        t.strokeRect((E.x + r.scrollX) * window.devicePixelRatio, (E.y + r.scrollY) * window.devicePixelRatio, jo(o, y) * window.devicePixelRatio, Xp(o, y) * window.devicePixelRatio)
    }
    t.restore()
}
  , nae = (e,t,n,r)=>{
    t.save(),
    t.translate(e.x + n.scrollX, e.y + n.scrollY),
    t.fillStyle = "rgba(0, 0, 200, 0.04)";
    const i = .5 / n.zoom.value;
    t.fillRect(i, i, e.width, e.height),
    t.lineWidth = 1 / n.zoom.value,
    t.strokeStyle = r,
    t.strokeRect(i, i, e.width, e.height),
    t.restore()
}
  , rd = (e,t,n,r,i,o,s)=>{
    switch (i.globalAlpha = sN(e, Pi(e, t), o.elementsPendingErasure, o.pendingFlowchartNodes),
    e.type) {
    case "magicframe":
    case "frame":
        {
            s.frameRendering.enabled && s.frameRendering.outline && (i.save(),
            i.translate(e.x + s.scrollX, e.y + s.scrollY),
            i.fillStyle = "rgba(0, 0, 200, 0.04)",
            i.lineWidth = pn.strokeWidth / s.zoom.value,
            i.strokeStyle = pn.strokeColor,
            jh(e) && (i.strokeStyle = s.theme === Oe.LIGHT ? "#7affd7" : "#1d8264"),
            i.roundRect ? (i.beginPath(),
            i.roundRect(0, 0, e.width, e.height, pn.radius / s.zoom.value),
            i.stroke(),
            i.closePath()) : i.strokeRect(0, 0, e.width, e.height),
            i.restore());
            break
        }
    case "freedraw":
        {
            if (Yt.generateElementShape(e, null),
            o.isExporting) {
                const [a,l,c,u] = Ke(e, t)
                  , f = (a + c) / 2 + s.scrollX
                  , h = (l + u) / 2 + s.scrollY
                  , m = (c - a) / 2 - (e.x - a)
                  , v = (u - l) / 2 - (e.y - l);
                i.save(),
                i.translate(f, h),
                i.rotate(e.angle),
                i.translate(-m, -v),
                _m(e, r, i, o),
                i.restore()
            } else {
                const a = T8(e, n, o, s);
                if (!a)
                    return;
                A8(a, i, o, s, n)
            }
            break
        }
    case "rectangle":
    case "diamond":
    case "ellipse":
    case "line":
    case "arrow":
    case "image":
    case "text":
    case "iframe":
    case "embeddable":
        {
            if (Yt.generateElementShape(e, o),
            o.isExporting) {
                const [a,l,c,u] = Ke(e, t)
                  , f = (a + c) / 2 + s.scrollX
                  , h = (l + u) / 2 + s.scrollY;
                let m = (c - a) / 2 - (e.x - a)
                  , v = (u - l) / 2 - (e.y - l);
                if (ye(e)) {
                    const E = Hr(e, t);
                    if (Be(E)) {
                        const b = ke.getBoundTextElementPosition(E, e, t);
                        m = (c - a) / 2 - (b.x - a),
                        v = (u - l) / 2 - (b.y - l)
                    }
                }
                i.save(),
                i.translate(f, h),
                oN(e, o, s) && (i.filter = "none");
                const y = Ge(e, t);
                if (Be(e) && y) {
                    const E = document.createElement("canvas")
                      , b = E.getContext("2d")
                      , _ = Math.max(xr(a, c), xr(l, u))
                      , x = ny(e);
                    E.width = _ * s.exportScale + x * 10 * s.exportScale,
                    E.height = _ * s.exportScale + x * 10 * s.exportScale,
                    b.translate(E.width / 2, E.height / 2),
                    b.scale(s.exportScale, s.exportScale),
                    m = e.width / 2 - (e.x - a),
                    v = e.height / 2 - (e.y - l),
                    b.rotate(e.angle);
                    const C = tc.canvas(E);
                    b.translate(-m, -v),
                    _m(e, C, b, o),
                    b.translate(m, v),
                    b.rotate(-e.angle);
                    const [,,,,P,M] = Ke(y, t)
                      , A = (a + c) / 2 - P
                      , I = (l + u) / 2 - M;
                    b.translate(-A, -I),
                    b.clearRect(-y.width / 2, -y.height / 2, y.width, y.height),
                    i.scale(1 / s.exportScale, 1 / s.exportScale),
                    i.drawImage(E, -E.width / 2, -E.height / 2, E.width, E.height)
                } else
                    i.rotate(e.angle),
                    e.type === "image" && i.scale(e.scale[0], e.scale[1]),
                    i.translate(-m, -v),
                    _m(e, r, i, o);
                i.restore()
            } else {
                const a = T8(e, n, o, s);
                if (!a)
                    return;
                const l = i.imageSmoothingEnabled;
                !(s != null && s.shouldCacheIgnoreZoom) && (!e.angle || Tae(e.angle)) && (i.imageSmoothingEnabled = !1),
                A8(a, i, o, s, n),
                i.imageSmoothingEnabled = l
            }
            break
        }
    default:
        throw new Error(`Unimplemented type ${e.type}`)
    }
    i.globalAlpha = 1
}
  , cN = new WeakMap([]);
function rae(e) {
    const t = uN(e)
      , n = new Path2D(t);
    return cN.set(e, n),
    n
}
function iae(e) {
    return cN.get(e)
}
function uN(e) {
    const t = e.simulatePressure ? e.points : e.points.length ? e.points.map(([r,i],o)=>[r, i, e.pressures[o]]) : [[0, 0, .5]]
      , n = {
        simulatePressure: e.simulatePressure,
        size: e.strokeWidth * 0.9,
        thinning: .2,
        smoothing: .5,
        streamline: .5,
        easing: r=>Math.sin(r * Math.PI / 2),
        last: !!e.lastCommittedPoint
    };
    return sae(PJ(t, n))
}
function M8(e, t) {
    return [(e[0] + t[0]) / 2, (e[1] + t[1]) / 2]
}
const oae = /(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;
function sae(e) {
    if (!e.length)
        return "";
    const t = e.length - 1;
    return e.reduce((n,r,i,o)=>(i === t ? n.push(r, M8(r, o[0]), "L", o[0], "Z") : n.push(r, M8(r, o[i + 1])),
    n), ["M", e[0], "Q"]).join(" ").replace(oae, "$1")
}
function tb(e, t) {
    return Math.pow(e[0] - t[0], 2) + Math.pow(e[1] - t[1], 2)
}
function aae(e, t, n) {
    const r = tb(t, n);
    if (r === 0)
        return tb(e, t);
    let i = ((e[0] - t[0]) * (n[0] - t[0]) + (e[1] - t[1]) * (n[1] - t[1])) / r;
    return i = Math.max(0, Math.min(1, i)),
    tb(e, lae(t, n, i))
}
function lae(e, t, n) {
    return [e[0] + (t[0] - e[0]) * n, e[1] + (t[1] - e[1]) * n]
}
function cae(e, t) {
    return I_(e, 0, e.length, t)
}
function I_(e, t, n, r, i) {
    const o = i || []
      , s = e[t]
      , a = e[n - 1];
    let l = 0
      , c = 1;
    for (let u = t + 1; u < n - 1; ++u) {
        const f = aae(e[u], s, a);
        f > l && (l = f,
        c = u)
    }
    return Math.sqrt(l) > r ? (I_(e, t, c + 1, r, o),
    I_(e, c, n, r, o)) : (o.length || o.push(s),
    o.push(a)),
    o
}
const Ef = e=>e === "rectangle" || e === "iframe" || e === "embeddable" || e === "ellipse" || e === "diamond" || e === "line" || e === "freedraw"
  , C_ = e=>e !== "image" && e !== "frame" && e !== "magicframe"
  , L8 = e=>e === "rectangle" || e === "iframe" || e === "embeddable" || e === "ellipse" || e === "diamond" || e === "freedraw" || e === "arrow" || e === "line"
  , P8 = e=>e === "rectangle" || e === "iframe" || e === "embeddable" || e === "ellipse" || e === "diamond" || e === "arrow" || e === "line"
  , k_ = e=>e === "rectangle" || e === "iframe" || e === "embeddable" || e === "line" || e === "diamond" || e === "image"
  , R8 = e=>e === "arrow"
  , A2 = e=>e === "arrow"
  , uae = (e,t)=>{
    let n = null;
    for (let r = e.length - 1; r >= 0; --r) {
        const i = e[r];
        if (!i.isDeleted && t(i)) {
            n = i;
            break
        }
    }
    return n
}
  , dae = e=>[8, 8 + e]
  , dN = e=>[1.5, 6 + e];
function fae(e) {
    const t = e.roughness
      , n = Math.max(e.width, e.height)
      , r = Math.min(e.width, e.height);
    return r >= 20 && n >= 50 || r >= 15 && e.roundness && k_(e.type) || je(e) && n >= 50 ? t : Math.min(t / (n < 10 ? 3 : 2), 2.5)
}
const ki = (e,t=!1)=>{
    const n = {
        seed: e.seed,
        strokeLineDash: e.strokeStyle === "dashed" ? dae(e.strokeWidth) : e.strokeStyle === "dotted" ? dN(e.strokeWidth) : void 0,
        disableMultiStroke: e.strokeStyle !== "solid",
        strokeWidth: e.strokeStyle !== "solid" ? e.strokeWidth + .5 : e.strokeWidth,
        fillWeight: e.strokeWidth / 2,
        hachureGap: e.strokeWidth * 4,
        roughness: fae(e),
        stroke: e.strokeColor,
        preserveVertices: t || e.roughness < KP.cartoonist
    };
    switch (e.type) {
    case "rectangle":
    case "iframe":
    case "embeddable":
    case "diamond":
    case "ellipse":
        return n.fillStyle = e.fillStyle,
        n.fill = Es(e.backgroundColor) ? void 0 : e.backgroundColor,
        e.type === "ellipse" && (n.curveFitting = 1),
        n;
    case "line":
    case "freedraw":
        return Ca(e.points) && (n.fillStyle = e.fillStyle,
        n.fill = e.backgroundColor === "transparent" ? void 0 : e.backgroundColor),
        n;
    case "arrow":
        return n;
    default:
        throw new Error(`Unimplemented type ${e.type}`)
    }
}
  , D8 = (e,t,n)=>eo(e) && (t || Br(e) && (n == null ? void 0 : n.get(e.id)) !== !0) && Es(e.backgroundColor) && Es(e.strokeColor) ? {
    ...e,
    roughness: 0,
    backgroundColor: "#d3d3d3",
    fillStyle: "solid"
} : rl(e) ? {
    ...e,
    strokeColor: Es(e.strokeColor) ? "#000000" : e.strokeColor,
    backgroundColor: Es(e.backgroundColor) ? "#f4f4f6" : e.backgroundColor
} : e
  , O8 = (e,t,n,r,i,o,s)=>{
    const a = Eae(e, t, n, r);
    if (a === null)
        return [];
    switch (r) {
    case "dot":
    case "circle":
    case "circle_outline":
        {
            const [l,c,u] = a;
            return delete o.strokeLineDash,
            [i.circle(l, c, u, {
                ...o,
                fill: r === "circle_outline" ? s : e.strokeColor,
                fillStyle: "solid",
                stroke: e.strokeColor,
                roughness: Math.min(.5, o.roughness || 0)
            })]
        }
    case "triangle":
    case "triangle_outline":
        {
            const [l,c,u,f,h,m] = a;
            return delete o.strokeLineDash,
            [i.polygon([[l, c], [u, f], [h, m], [l, c]], {
                ...o,
                fill: r === "triangle_outline" ? s : e.strokeColor,
                fillStyle: "solid",
                roughness: Math.min(1, o.roughness || 0)
            })]
        }
    case "diamond":
    case "diamond_outline":
        {
            const [l,c,u,f,h,m,v,y] = a;
            return delete o.strokeLineDash,
            [i.polygon([[l, c], [u, f], [h, m], [v, y], [l, c]], {
                ...o,
                fill: r === "diamond_outline" ? s : e.strokeColor,
                fillStyle: "solid",
                roughness: Math.min(1, o.roughness || 0)
            })]
        }
    case "bar":
    case "arrow":
    default:
        {
            const [l,c,u,f,h,m] = a;
            if (e.strokeStyle === "dotted") {
                const v = dN(e.strokeWidth - 1);
                o.strokeLineDash = [v[0], v[1] - 1]
            } else
                delete o.strokeLineDash;
            return o.roughness = Math.min(1, o.roughness || 0),
            [i.line(u, f, l, c, o), i.line(h, m, l, c, o)]
        }
    }
}
  , hae = (e,t,{isExporting: n, canvasBackgroundColor: r, embedsValidationStatus: i})=>{
    switch (e.type) {
    case "rectangle":
    case "iframe":
    case "embeddable":
        {
            let o;
            if (e.roundness) {
                const s = e.width
                  , a = e.height
                  , l = Ol(Math.min(s, a), e);
                o = t.path(`M ${l} 0 L ${s - l} 0 Q ${s} 0, ${s} ${l} L ${s} ${a - l} Q ${s} ${a}, ${s - l} ${a} L ${l} ${a} Q 0 ${a}, 0 ${a - l} L 0 ${l} Q 0 0, ${l} 0`, ki(D8(e, n, i), !0))
            } else
                o = t.rectangle(0, 0, e.width, e.height, ki(D8(e, n, i), !1));
            return o
        }
    case "diamond":
        {
            let o;
            const [s,a,l,c,u,f,h,m] = pae(e);
            if (e.roundness) {
                const v = Ol(Math.abs(s - h), e)
                  , y = Ol(Math.abs(c - a), e);
                o = t.path(`M ${s + v} ${a + y} L ${l - v} ${c - y}
            C ${l} ${c}, ${l} ${c}, ${l - v} ${c + y}
            L ${u + v} ${f - y}
            C ${u} ${f}, ${u} ${f}, ${u - v} ${f - y}
            L ${h + v} ${m + y}
            C ${h} ${m}, ${h} ${m}, ${h + v} ${m - y}
            L ${s - v} ${a + y}
            C ${s} ${a}, ${s} ${a}, ${s + v} ${a + y}`, ki(e, !0))
            } else
                o = t.polygon([[s, a], [l, c], [u, f], [h, m]], ki(e));
            return o
        }
    case "ellipse":
        return t.ellipse(e.width / 2, e.height / 2, e.width, e.height, ki(e));
    case "line":
    case "arrow":
        {
            let o;
            const s = ki(e)
              , a = e.points.length ? e.points : [[0, 0]];
            if (He(e) ? o = [t.path(gae(a, 16), ki(e, !0))] : e.roundness ? o = [t.curve(a, s)] : s.fill ? o = [t.polygon(a, s)] : o = [t.linearPath(a, s)],
            e.type === "arrow") {
                const {startArrowhead: l=null, endArrowhead: c="arrow"} = e;
                if (l !== null) {
                    const u = O8(e, o, "start", l, t, s, r);
                    o.push(...u)
                }
                if (c !== null) {
                    const u = O8(e, o, "end", c, t, s, r);
                    o.push(...u)
                }
            }
            return o
        }
    case "freedraw":
        {
            let o;
            if (rae(e),
            Ca(e.points)) {
                const s = cae(e.points, .75);
                o = t.curve(s, {
                    ...ki(e),
                    stroke: "none"
                })
            } else
                o = null;
            return o
        }
    case "frame":
    case "magicframe":
    case "text":
    case "image":
        return null;
    default:
        return Gl(e, `generateElementShape(): Unimplemented type ${e == null ? void 0 : e.type}`),
        null
    }
}
  , gae = (e,t)=>{
    const n = [];
    for (let i = 1; i < e.length - 1; i += 1) {
        const o = e[i - 1]
          , s = e[i + 1]
          , a = Math.min(t, Math.sqrt(M2(e[i], s)) / 2, Math.sqrt(M2(e[i], o)) / 2);
        o[0] < e[i][0] && o[1] === e[i][1] ? n.push([e[i][0] - a, e[i][1]]) : o[0] === e[i][0] && o[1] < e[i][1] ? n.push([e[i][0], e[i][1] - a]) : o[0] > e[i][0] && o[1] === e[i][1] ? n.push([e[i][0] + a, e[i][1]]) : n.push([e[i][0], e[i][1] + a]),
        n.push(e[i]),
        s[0] < e[i][0] && s[1] === e[i][1] ? n.push([e[i][0] - a, e[i][1]]) : s[0] === e[i][0] && s[1] < e[i][1] ? n.push([e[i][0], e[i][1] - a]) : s[0] > e[i][0] && s[1] === e[i][1] ? n.push([e[i][0] + a, e[i][1]]) : n.push([e[i][0], e[i][1] + a])
    }
    const r = [`M ${e[0][0]} ${e[0][1]}`];
    for (let i = 0; i < n.length; i += 3)
        r.push(`L ${n[i][0]} ${n[i][1]}`),
        r.push(`Q ${n[i + 1][0]} ${n[i + 1][1]}, ${n[i + 2][0]} ${n[i + 2][1]}`);
    return r.push(`L ${e[e.length - 1][0]} ${e[e.length - 1][1]}`),
    r.join(" ")
}
  , Bd = class Bd {
    static getBounds(t, n) {
        const r = Bd.boundsCache.get(t);
        if (r != null && r.version && r.version === t.version && !Sn(t))
            return r.bounds;
        const i = Bd.calculateBounds(t, n);
        return Bd.boundsCache.set(t, {
            version: t.version,
            bounds: i
        }),
        i
    }
    static calculateBounds(t, n) {
        let r;
        const [i,o,s,a,l,c] = Ke(t, n);
        if (Di(t)) {
            const [u,f,h,m] = m4(t.points.map(([v,y])=>Xe(v, y, l - t.x, c - t.y, t.angle)));
            return [u + t.x, f + t.y, h + t.x, m + t.y]
        } else if (je(t))
            r = _ae(t, l, c, n);
        else if (t.type === "diamond") {
            const [u,f] = Xe(l, o, l, c, t.angle)
              , [h,m] = Xe(l, a, l, c, t.angle)
              , [v,y] = Xe(i, c, l, c, t.angle)
              , [E,b] = Xe(s, c, l, c, t.angle)
              , _ = Math.min(u, h, v, E)
              , x = Math.min(f, m, y, b)
              , C = Math.max(u, h, v, E)
              , P = Math.max(f, m, y, b);
            r = [_, x, C, P]
        } else if (t.type === "ellipse") {
            const u = (s - i) / 2
              , f = (a - o) / 2
              , h = Math.cos(t.angle)
              , m = Math.sin(t.angle)
              , v = Math.hypot(u * h, f * m)
              , y = Math.hypot(f * h, u * m);
            r = [l - v, c - y, l + v, c + y]
        } else {
            const [u,f] = Xe(i, o, l, c, t.angle)
              , [h,m] = Xe(i, a, l, c, t.angle)
              , [v,y] = Xe(s, a, l, c, t.angle)
              , [E,b] = Xe(s, o, l, c, t.angle)
              , _ = Math.min(u, h, v, E)
              , x = Math.min(f, m, y, b)
              , C = Math.max(u, h, v, E)
              , P = Math.max(f, m, y, b);
            r = [_, x, C, P]
        }
        return r
    }
}
;
D(Bd, "boundsCache", new WeakMap);
let T_ = Bd;
const Ke = (e,t,n=!1)=>{
    if (Di(e))
        return vae(e);
    if (je(e))
        return ke.getElementAbsoluteCoords(e, t, n);
    if (ye(e)) {
        const r = t ? Hr(e, t) : null;
        if (Be(r)) {
            const i = ke.getBoundTextElementPosition(r, e, t);
            return [i.x, i.y, i.x + e.width, i.y + e.height, i.x + e.width / 2, i.y + e.height / 2]
        }
    }
    return [e.x, e.y, e.x + e.width, e.y + e.height, e.x + e.width / 2, e.y + e.height / 2]
}
  , N8 = (e,t)=>{
    const [n,r,i,o,s,a] = Ke(e, t)
      , l = [s, a];
    if (je(e) || Di(e)) {
        const b = [];
        let _ = 0;
        for (; _ < e.points.length - 1; )
            b.push([Ae([e.points[_][0] + e.x, e.points[_][1] + e.y], l, e.angle), Ae([e.points[_ + 1][0] + e.x, e.points[_ + 1][1] + e.y], l, e.angle)]),
            _++;
        return b
    }
    const [c,u,f,h,m,v,y,E] = [[n, r], [i, r], [n, o], [i, o], [s, r], [s, o], [n, a], [i, a]].map(b=>Ae(b, l, e.angle));
    return e.type === "diamond" ? [[m, y], [m, E], [v, y], [v, E]] : e.type === "ellipse" ? [[m, y], [m, E], [v, y], [v, E], [m, y], [m, E], [v, y], [v, E]] : [[c, u], [f, h], [c, f], [u, h], [c, E], [f, E], [u, y], [h, y]]
}
  , pae = e=>{
    const t = Math.floor(e.width / 2) + 1
      , n = 0
      , r = e.width
      , i = Math.floor(e.height / 2) + 1
      , o = t
      , s = e.height;
    return [t, n, r, i, o, s, 0, i]
}
  , Uf = e=>{
    for (const t of e.sets)
        if (t.type === "path")
            return t.ops;
    return e.sets[0].ops
}
  , F8 = (e,t,n,r,i)=>{
    const o = 1 - e;
    return Math.pow(o, 3) * t + 3 * Math.pow(o, 2) * e * n + 3 * o * Math.pow(e, 2) * r + Math.pow(e, 3) * i
}
  , B8 = (e,t,n,r)=>{
    const i = t - e
      , o = n - t
      , s = r - n
      , a = 3 * i - 6 * o + 3 * s
      , l = 6 * o - 6 * i
      , c = 3 * i
      , u = l * l - 4 * a * c;
    if (!(u >= 0))
        return !1;
    let h = null
      , m = null
      , v = 1 / 0
      , y = 1 / 0;
    return a === 0 ? v = y = -c / l : (v = (-l + Math.sqrt(u)) / (2 * a),
    y = (-l - Math.sqrt(u)) / (2 * a)),
    v >= 0 && v <= 1 && (h = F8(v, e, t, n, r)),
    y >= 0 && y <= 1 && (m = F8(y, e, t, n, r)),
    [h, m]
}
  , mae = (e,t,n,r)=>{
    const i = B8(e[0], t[0], n[0], r[0])
      , o = B8(e[1], t[1], n[1], r[1]);
    let s = Math.min(e[0], r[0])
      , a = Math.max(e[0], r[0]);
    if (i) {
        const u = i.filter(f=>f !== null);
        s = Math.min(s, ...u),
        a = Math.max(a, ...u)
    }
    let l = Math.min(e[1], r[1])
      , c = Math.max(e[1], r[1]);
    if (o) {
        const u = o.filter(f=>f !== null);
        l = Math.min(l, ...u),
        c = Math.max(c, ...u)
    }
    return [s, l, a, c]
}
  , ry = (e,t)=>{
    let n = [0, 0];
    const {minX: r, minY: i, maxX: o, maxY: s} = e.reduce((a,{op: l, data: c})=>{
        if (l === "move")
            n = c;
        else if (l === "bcurveTo") {
            const u = [c[0], c[1]]
              , f = [c[2], c[3]]
              , h = [c[4], c[5]]
              , m = t ? t(...u) : u
              , v = t ? t(...f) : f
              , y = t ? t(...h) : h
              , E = t ? t(...n) : n;
            n = h;
            const [b,_,x,C] = mae(E, m, v, y);
            a.minX = Math.min(a.minX, b),
            a.minY = Math.min(a.minY, _),
            a.maxX = Math.max(a.maxX, x),
            a.maxY = Math.max(a.maxY, C)
        }
        return a
    }
    , {
        minX: 1 / 0,
        minY: 1 / 0,
        maxX: -1 / 0,
        maxY: -1 / 0
    });
    return [r, i, o, s]
}
  , m4 = e=>{
    let t = 1 / 0
      , n = 1 / 0
      , r = -1 / 0
      , i = -1 / 0;
    for (const [o,s] of e)
        t = Math.min(t, o),
        n = Math.min(n, s),
        r = Math.max(r, o),
        i = Math.max(i, s);
    return [t, n, r, i]
}
  , vae = e=>{
    const [t,n,r,i] = m4(e.points)
      , o = t + e.x
      , s = n + e.y
      , a = r + e.x
      , l = i + e.y;
    return [o, s, a, l, (o + a) / 2, (s + l) / 2]
}
  , yae = e=>{
    switch (e) {
    case "arrow":
        return 25;
    case "diamond":
    case "diamond_outline":
        return 12;
    default:
        return 15
    }
}
  , wae = e=>{
    switch (e) {
    case "bar":
        return 90;
    case "arrow":
        return 20;
    default:
        return 25
    }
}
  , Eae = (e,t,n,r)=>{
    const i = Uf(t[0]);
    if (i.length < 1)
        return null;
    const o = n === "start" ? 1 : i.length - 1
      , s = i[o].data
      , a = [s[4], s[5]]
      , l = [s[2], s[3]]
      , c = [s[0], s[1]]
      , u = i[o - 1];
    let f = [0, 0];
    u.op === "move" ? f = u.data : u.op === "bcurveTo" && (f = [u.data[4], u.data[5]]);
    const h = (re,se)=>Math.pow(1 - re, 3) * a[se] + 3 * re * Math.pow(1 - re, 2) * l[se] + 3 * Math.pow(re, 2) * (1 - re) * c[se] + f[se] * Math.pow(re, 3)
      , [m,v] = n === "start" ? f : a
      , [y,E] = [h(.3, 0), h(.3, 1)]
      , b = Math.hypot(m - y, v - E)
      , _ = (m - y) / b
      , x = (v - E) / b
      , C = yae(r);
    let P = 0;
    {
        const [re,se] = n === "end" ? e.points[e.points.length - 1] : e.points[0]
          , [ae,q] = e.points.length > 1 ? n === "end" ? e.points[e.points.length - 2] : e.points[1] : [0, 0];
        P = Math.hypot(re - ae, se - q)
    }
    const A = Math.min(C, P * (r === "diamond" || r === "diamond_outline" ? .25 : .5))
      , I = m - _ * A
      , O = v - x * A;
    if (r === "dot" || r === "circle" || r === "circle_outline") {
        const re = Math.hypot(O - v, I - m) + e.strokeWidth - 2;
        return [m, v, re]
    }
    const N = wae(r)
      , [$,V] = Xe(I, O, m, v, -N * Math.PI / 180)
      , [z,j] = Xe(I, O, m, v, N * Math.PI / 180);
    if (r === "diamond" || r === "diamond_outline") {
        let re, se;
        if (n === "start") {
            const [ae,q] = e.points.length > 1 ? e.points[1] : [0, 0];
            [re,se] = Xe(m + A * 2, v, m, v, Math.atan2(q - v, ae - m))
        } else {
            const [ae,q] = e.points.length > 1 ? e.points[e.points.length - 2] : [0, 0];
            [re,se] = Xe(m - A * 2, v, m, v, Math.atan2(v - q, m - ae))
        }
        return [m, v, $, V, re, se, z, j]
    }
    return [m, v, $, V, z, j]
}
  , bae = e=>{
    const t = tc.generator()
      , n = ki(e)
      , r = e.roundness ? "curve" : n.fill ? "polygon" : "linearPath";
    return t[r](e.points, n)
}
  , _ae = (e,t,n,r)=>{
    var f;
    const i = Ge(e, r);
    if (e.points.length < 2) {
        const [h,m] = e.points[0]
          , [v,y] = Xe(e.x + h, e.y + m, t, n, e.angle);
        let E = [v, y, v, y];
        if (i) {
            const b = ke.getMinMaxXYWithBoundText(e, r, [v, y, v, y], i);
            E = [b[0], b[1], b[2], b[3]]
        }
        return E
    }
    const s = ((f = Yt.get(e)) == null ? void 0 : f[0]) ?? bae(e)
      , a = Uf(s)
      , c = ry(a, (h,m)=>Xe(e.x + h, e.y + m, t, n, e.angle));
    let u = [c[0], c[1], c[2], c[3]];
    if (i) {
        const h = ke.getMinMaxXYWithBoundText(e, r, u, i);
        u = [h[0], h[1], h[2], h[3]]
    }
    return u
}
  , Yl = (e,t)=>T_.getBounds(e, t)
  , xt = (e,t)=>{
    if (!e.length)
        return [0, 0, 0, 0];
    let n = 1 / 0
      , r = -1 / 0
      , i = 1 / 0
      , o = -1 / 0;
    return e.forEach(s=>{
        const [a,l,c,u] = Yl(s, t || De(e));
        n = Math.min(n, a),
        i = Math.min(i, l),
        r = Math.max(r, c),
        o = Math.max(o, u)
    }
    ),
    [n, i, r, o]
}
  , v4 = (e,t)=>{
    const [n,r,i,o] = xt(e);
    return [n + t.x, r + t.y, i + t.x, o + t.y]
}
  , Jc = (e,t,n,r)=>{
    if (!(je(e) || Di(e)))
        return [e.x, e.y, e.x + t, e.y + n];
    const i = gf(0, t, gf(1, n, e.points, r), r);
    let o;
    if (Di(e))
        o = m4(i);
    else {
        const u = tc.generator()
          , f = e.roundness ? u.curve(i, ki(e)) : u.linearPath(i, ki(e))
          , h = Uf(f);
        o = ry(h)
    }
    const [s,a,l,c] = o;
    return [s + e.x, a + e.y, l + e.x, c + e.y]
}
  , z8 = (e,t)=>{
    const n = tc.generator()
      , r = e.roundness == null ? n.linearPath(t, ki(e)) : n.curve(t, ki(e))
      , i = Uf(r)
      , [o,s,a,l] = ry(i);
    return [o + e.x, s + e.y, a + e.x, l + e.y]
}
  , xae = (e,t)=>{
    if (!e.length)
        return [0, 0, 0, 0];
    let n = 1 / 0
      , r = e[0];
    const i = De(e);
    return e.forEach(o=>{
        const [s,a,l,c] = Yl(o, i)
          , u = ir((s + l) / 2, (a + c) / 2, t.x, t.y);
        u < n && (n = u,
        r = o)
    }
    ),
    Yl(r, i)
}
  , pa = e=>{
    const [t,n,r,i] = xt(e);
    return {
        minX: t,
        minY: n,
        maxX: r,
        maxY: i,
        width: r - t,
        height: i - n,
        midX: (t + r) / 2,
        midY: (n + i) / 2
    }
}
  , fN = ({scrollX: e, scrollY: t, width: n, height: r, zoom: i})=>[-e, -t, -e + n / i.value, -t + r / i.value]
  , Xe = (e,t,n,r,i)=>[(e - n) * Math.cos(i) - (t - r) * Math.sin(i) + n, (e - n) * Math.sin(i) + (t - r) * Math.cos(i) + r]
  , Ae = (e,t,n)=>Xe(e[0], e[1], t[0], t[1], n)
  , Sae = (e,t,n,r,i,o,s,a)=>{
    const l = Math.cos(r)
      , c = Math.sin(r);
    return e.e && e.w ? t += i + s : e.e ? (t += i * (1 + l),
    n += i * c,
    t += s * (1 - l),
    n += s * -c) : e.w && (t += i * (1 - l),
    n += i * -c,
    t += s * (1 + l),
    n += s * c),
    e.n && e.s ? n += o + a : e.n ? (t += o * c,
    n += o * (1 - l),
    t += a * -c,
    n += a * (1 + l)) : (t += o * -c,
    n += o * (1 + l),
    t += a * c,
    n += a * (1 - l)),
    [t, n]
}
  , ir = (e,t,n,r)=>{
    const i = n - e
      , o = r - t;
    return Math.hypot(i, o)
}
  , M2 = (e,t)=>{
    const n = t[0] - e[0]
      , r = t[1] - e[1];
    return n * n + r * r
}
  , L2 = (e,t)=>[(e[0] + t[0]) / 2, (e[1] + t[1]) / 2]
  , Ca = (e,t=1)=>{
    if (e.length >= 3) {
        const [n,r] = [e[0], e[e.length - 1]];
        return ir(n[0], n[1], r[0], r[1]) <= rm / t
    }
    return !1
}
  , hN = (e,t,n)=>t[0] <= Math.max(e[0], n[0]) && t[0] >= Math.min(e[0], n[0]) && t[1] <= Math.max(e[1], n[1]) && t[1] >= Math.min(e[1], n[1])
  , er = (e,t,n)=>n ? [Math.round(e / n) * n, Math.round(t / n) * n] : [e, t]
  , Ol = (e,t)=>{
    var n, r, i, o;
    if (((n = t.roundness) == null ? void 0 : n.type) === An.PROPORTIONAL_RADIUS || ((r = t.roundness) == null ? void 0 : r.type) === An.LEGACY)
        return e * CE;
    if (((i = t.roundness) == null ? void 0 : i.type) === An.ADAPTIVE_RADIUS) {
        const s = ((o = t.roundness) == null ? void 0 : o.value) ?? Fq
          , a = s / CE;
        return e <= a ? e * CE : s
    }
    return 0
}
  , gN = (e,t)=>{
    const n = Yt.generateElementShape(e, null);
    if (!n)
        return null;
    const r = Uf(n[0]);
    let i = [0, 0]
      , o = 0
      , s = 1 / 0
      , a = null;
    for (; o < r.length; ) {
        const {op: l, data: c} = r[o];
        if (l === "move" && (i = c),
        l === "bcurveTo") {
            const u = i
              , f = [c[0], c[1]]
              , h = [c[2], c[3]]
              , m = [c[4], c[5]]
              , v = ir(m[0], m[1], t[0], t[1]);
            v < s && (s = v,
            a = [u, f, h, m]),
            i = m
        }
        o++
    }
    return a
}
  , pN = (e,t,n,r,i)=>{
    const o = (l,c)=>Math.pow(1 - l, 3) * r[c] + 3 * l * Math.pow(1 - l, 2) * n[c] + 3 * Math.pow(l, 2) * (1 - l) * t[c] + e[c] * Math.pow(l, 3)
      , s = o(i, 0)
      , a = o(i, 1);
    return [s, a]
}
  , Iae = (e,t)=>{
    const n = gN(e, t);
    if (!n)
        return [];
    const r = [];
    let i = 1;
    for (; i > 0; ) {
        const o = pN(n[0], n[1], n[2], n[3], i);
        r.push([o[0], o[1]]),
        i -= .05
    }
    return r.length && sa(r.at(-1), t) && r.push([t[0], t[1]]),
    r
}
  , mN = (e,t)=>{
    const n = [];
    n[0] = 0;
    const r = Iae(e, t);
    let i = 0
      , o = 0;
    for (; i < r.length - 1; ) {
        const s = ir(r[i][0], r[i][1], r[i + 1][0], r[i + 1][1]);
        o += s,
        n.push(o),
        i++
    }
    return n
}
  , Cae = (e,t)=>mN(e, t).at(-1)
  , kae = (e,t,n)=>{
    const r = mN(e, t)
      , i = r.length - 1
      , o = r.at(-1)
      , s = n * o;
    let a = 0
      , l = i
      , c = 0;
    for (; a < l; )
        c = Math.floor(a + (l - a) / 2),
        r[c] < s ? a = c + 1 : l = c;
    return r[c] > s && c--,
    r[c] === s ? c / i : 1 - (c + (s - r[c]) / (r[c + 1] - r[c])) / i
}
  , sa = (e,t)=>e[0] === t[0] && e[1] === t[1]
  , Tae = e=>Math.round(e / Math.PI * 1e4) % 5e3 === 0
  , iy = e=>e * 180 / Math.PI
  , P2 = e=>e / 180 * Math.PI
  , R2 = ([e,t],[n,r])=>e <= n ? t >= n : e >= n ? r >= e : !1
  , D2 = (e,t)=>{
    const n = Math.max(e[0], t[0])
      , r = Math.min(e[1], t[1]);
    return n <= r ? [n, r] : null
}
  , A0 = (e,t,n)=>e >= t && e <= n
  , A_ = (e,t)=>[e[0] + t[0], e[1] + t[1]]
  , y4 = (e,t)=>[e[0] * t, e[1] * t]
  , vu = (e,t=[0, 0])=>[e[0] - t[0], e[1] - t[1]]
  , Qs = (e,t,n)=>A_(t, y4(vu(e, t), n))
  , nb = (e,t,n)=>(e[0] - n[0]) * (t[1] - n[1]) - (t[0] - n[0]) * (e[1] - n[1])
  , id = (e,t,n,r)=>{
    const i = nb(e, t, n)
      , o = nb(e, n, r)
      , s = nb(e, r, t)
      , a = i < 0 || o < 0 || s < 0
      , l = i > 0 || o > 0 || s > 0;
    return !(a && l)
}
  , Aae = (e,t)=>[e[0] + t[0], e[1] + t[1]]
  , rb = (e,t)=>[e[0] - t[0], e[1] - t[1]]
  , Fd = (e,t)=>e[0] > t[0] && e[0] < t[2] && e[1] > t[1] && e[1] < t[3]
  , yl = (e,t)=>{
    const n = {
        minX: e.x,
        minY: e.y,
        maxX: e.x + e.width,
        maxY: e.y + e.height,
        midX: e.x + e.width / 2,
        midY: e.y + e.height / 2
    }
      , r = [n.midX, n.midY]
      , [i,o] = Ae([n.minX, n.minY], r, e.angle)
      , [s,a] = Ae([n.maxX, n.minY], r, e.angle)
      , [l,c] = Ae([n.maxX, n.maxY], r, e.angle)
      , [u,f] = Ae([n.minX, n.maxY], r, e.angle)
      , h = [Math.min(i, s, l, u), Math.min(o, a, c, f), Math.max(i, s, l, u), Math.max(o, a, c, f)];
    if (t) {
        const [m,v,y,E] = t;
        return [h[0] - E, h[1] - m, h[2] + v, h[3] + y]
    }
    return h
}
  , vN = e=>[e[0] + (e[2] - e[0]) / 2, e[1] + (e[3] - e[1]) / 2]
  , w4 = e=>[e.x + e.width / 2, e.y + e.height / 2]
  , yu = (e,t,n)=>Math.min(Math.max(e, t), n)
  , Mae = (e,t)=>{
    const n = Math.pow(10, t);
    return Math.round((e + Number.EPSILON) * n) / n
}
;
class Lae {
    constructor(t) {
        D(this, "content", []);
        this.scoreFunction = t
    }
    sinkDown(t) {
        const n = this.content[t];
        for (; t > 0; ) {
            const r = (t + 1 >> 1) - 1
              , i = this.content[r];
            if (this.scoreFunction(n) < this.scoreFunction(i))
                this.content[r] = n,
                this.content[t] = i,
                t = r;
            else
                break
        }
    }
    bubbleUp(t) {
        const n = this.content.length
          , r = this.content[t]
          , i = this.scoreFunction(r);
        for (; ; ) {
            const o = t + 1 << 1
              , s = o - 1;
            let a = null
              , l = 0;
            if (s < n) {
                const c = this.content[s];
                l = this.scoreFunction(c),
                l < i && (a = s)
            }
            if (o < n) {
                const c = this.content[o];
                this.scoreFunction(c) < (a === null ? i : l) && (a = o)
            }
            if (a !== null)
                this.content[t] = this.content[a],
                this.content[a] = r,
                t = a;
            else
                break
        }
    }
    push(t) {
        this.content.push(t),
        this.sinkDown(this.content.length - 1)
    }
    pop() {
        if (this.content.length === 0)
            return null;
        const t = this.content[0]
          , n = this.content.pop();
        return this.content.length > 0 && (this.content[0] = n,
        this.bubbleUp(0)),
        t
    }
    remove(t) {
        if (this.content.length === 0)
            return;
        const n = this.content.indexOf(t)
          , r = this.content.pop();
        n < this.content.length && (this.content[n] = r,
        this.scoreFunction(r) < this.scoreFunction(t) ? this.sinkDown(n) : this.bubbleUp(n))
    }
    size() {
        return this.content.length
    }
    rescoreElement(t) {
        this.sinkDown(this.content.indexOf(t))
    }
}
const os = 40
  , wu = (e,t,n,r,i,o)=>{
    var se, ae;
    const s = A_(n[0], [e.x + (r ? r[0] : 0), e.y + (r ? r[1] : 0)])
      , a = A_(n[n.length - 1], [e.x + (r ? r[0] : 0), e.y + (r ? r[1] : 0)])
      , l = e.startBinding && U8(e.startBinding.elementId, t)
      , c = e.endBinding && U8(e.endBinding.elementId, t)
      , [u,f] = o != null && o.isDragging ? Uae(s, a, t) : [l, c]
      , h = H8((se = e.startBinding) == null ? void 0 : se.fixedPoint, s, a, t, l, u, o == null ? void 0 : o.isDragging)
      , m = H8((ae = e.endBinding) == null ? void 0 : ae.fixedPoint, a, s, t, c, f, o == null ? void 0 : o.isDragging)
      , v = G8(h, m, t, u, s)
      , y = G8(m, h, t, f, a)
      , E = [h[0] - 2, h[1] - 2, h[0] + 2, h[1] + 2]
      , b = [m[0] - 2, m[1] - 2, m[0] + 2, m[1] + 2]
      , _ = u ? yl(u, Za(v, e.startArrowhead ? Ut * 6 : Ut * 2, 1)) : E
      , x = f ? yl(f, Za(y, e.endArrowhead ? Ut * 6 : Ut * 2, 1)) : b
      , C = Fd(h, f ? yl(f, Za(y, os, os)) : b) || Fd(m, u ? yl(u, Za(v, os, os)) : E)
      , P = yN(C ? [E, b] : [_, x])
      , M = Dae(C ? E : _, C ? b : x, P, C ? Za(v, !u && !f ? 0 : os, 0) : Za(v, !u && !f ? 0 : os - (e.startArrowhead ? Ut * 6 : Ut * 2), os), C ? Za(y, !u && !f ? 0 : os, 0) : Za(y, !u && !f ? 0 : os - (e.endArrowhead ? Ut * 6 : Ut * 2), os), C)
      , A = $8(M[0], v, h)
      , I = $8(M[1], y, m)
      , O = Oae(M, A || h, v, I || m, y, P)
      , N = A && M0(A, O)
      , $ = I && M0(I, O)
      , V = M0(m, O);
    V && f && (V.closed = !0);
    const z = M0(h, O);
    z && e.startBinding && (z.closed = !0);
    const j = N && $ && (Fd(N.pos, M[1]) || Fd($.pos, M[0]))
      , re = Pae(N || z, $ || V, O, v || $n, y || $n, j ? [] : M);
    if (re) {
        const q = re.map(K=>[K.pos[0], K.pos[1]]);
        N && q.unshift(h),
        $ && q.push(m),
        ue(e, {
            ...i,
            ...Bae(zae(q), 0, 0),
            angle: 0
        }, o == null ? void 0 : o.informMutation)
    } else
        console.error("Elbow arrow cannot find a route")
}
  , Za = (e,t,n)=>{
    switch (e) {
    case ii:
        return [t, n, n, n];
    case $n:
        return [n, t, n, n];
    case ni:
        return [n, n, t, n]
    }
    return [n, n, n, t]
}
  , Pae = (e,t,n,r,i,o)=>{
    const s = ib(e.pos, t.pos)
      , a = new Lae(l=>l.f);
    for (a.push(e); a.size() > 0; ) {
        const l = a.pop();
        if (!l || l.closed)
            continue;
        if (l === t)
            return Rae(e, l);
        l.closed = !0;
        const c = Fae(l.addr, n);
        for (let u = 0; u < 4; u++) {
            const f = c[u];
            if (!f || f.closed)
                continue;
            const h = Qs(f.pos, l.pos, .5);
            if (hJ(...o.map(C=>Fd(h, C))))
                continue;
            const m = $ae(u)
              , v = l.parent ? yf(vu(l.pos, l.parent.pos)) : r
              , y = y4(v, -1);
            if (sa(y, m) || sa(e.addr, f.addr) && sa(m, r) || sa(t.addr, f.addr) && sa(m, i))
                continue;
            const b = v !== m
              , _ = l.g + ib(f.pos, l.pos) + (b ? Math.pow(s, 3) : 0)
              , x = f.visited;
            if (!x || _ < f.g) {
                const C = Nae(f, t, m, i);
                f.visited = !0,
                f.parent = l,
                f.h = ib(t.pos, f.pos) + C * Math.pow(s, 2),
                f.g = _,
                f.f = f.g + f.h,
                x ? a.rescoreElement(f) : a.push(f)
            }
        }
    }
    return null
}
  , Rae = (e,t)=>{
    let n = t;
    const r = [];
    for (; n.parent; )
        r.unshift(n),
        n = n.parent;
    return r.unshift(e),
    r
}
  , ib = (e,t)=>Math.abs(e[0] - t[0]) + Math.abs(e[1] - t[1])
  , Dae = (e,t,n,r,i,o)=>{
    const [s,a,l,c] = r ?? [0, 0, 0, 0]
      , [u,f,h,m] = i ?? [0, 0, 0, 0]
      , v = [e[0] > t[2] ? e[1] > t[3] || e[3] < t[1] ? Math.min((e[0] + t[2]) / 2, e[0] - c) : (e[0] + t[2]) / 2 : e[0] > t[0] ? e[0] - c : n[0] - c, e[1] > t[3] ? e[0] > t[2] || e[2] < t[0] ? Math.min((e[1] + t[3]) / 2, e[1] - s) : (e[1] + t[3]) / 2 : e[1] > t[1] ? e[1] - s : n[1] - s, e[2] < t[0] ? e[1] > t[3] || e[3] < t[1] ? Math.max((e[2] + t[0]) / 2, e[2] + a) : (e[2] + t[0]) / 2 : e[2] < t[2] ? e[2] + a : n[2] + a, e[3] < t[1] ? e[0] > t[2] || e[2] < t[0] ? Math.max((e[3] + t[1]) / 2, e[3] + l) : (e[3] + t[1]) / 2 : e[3] < t[3] ? e[3] + l : n[3] + l]
      , y = [t[0] > e[2] ? t[1] > e[3] || t[3] < e[1] ? Math.min((t[0] + e[2]) / 2, t[0] - m) : (t[0] + e[2]) / 2 : t[0] > e[0] ? t[0] - m : n[0] - m, t[1] > e[3] ? t[0] > e[2] || t[2] < e[0] ? Math.min((t[1] + e[3]) / 2, t[1] - u) : (t[1] + e[3]) / 2 : t[1] > e[1] ? t[1] - u : n[1] - u, t[2] < e[0] ? t[1] > e[3] || t[3] < e[1] ? Math.max((t[2] + e[0]) / 2, t[2] + f) : (t[2] + e[0]) / 2 : t[2] < e[2] ? t[2] + f : n[2] + f, t[3] < e[1] ? t[0] > e[2] || t[2] < e[0] ? Math.max((t[3] + e[1]) / 2, t[3] + h) : (t[3] + e[1]) / 2 : t[3] < e[3] ? t[3] + h : n[3] + h]
      , E = yN([v, y]);
    if (!o && v[2] - v[0] + y[2] - y[0] > E[2] - E[0] + 1e-11 && v[3] - v[1] + y[3] - y[1] > E[3] - E[1] + 1e-11) {
        const [b,_] = [(y[0] + y[2]) / 2, (y[1] + y[3]) / 2];
        if (t[0] > e[2] && e[1] > t[3]) {
            const x = v[2] + (y[0] - v[2]) / 2
              , C = y[3] + (v[1] - y[3]) / 2;
            return S0([e[2], e[1]], [e[0], e[3]], [b, _]) > 0 ? [[v[0], v[1], x, v[3]], [x, y[1], y[2], y[3]]] : [[v[0], C, v[2], v[3]], [y[0], y[1], y[2], C]]
        } else if (e[2] < t[0] && e[3] < t[1]) {
            const x = v[2] + (y[0] - v[2]) / 2
              , C = v[3] + (y[1] - v[3]) / 2;
            return S0([e[0], e[1]], [e[2], e[3]], [b, _]) > 0 ? [[v[0], v[1], v[2], C], [y[0], C, y[2], y[3]]] : [[v[0], v[1], x, v[3]], [x, y[1], y[2], y[3]]]
        } else if (e[0] > t[2] && e[3] < t[1]) {
            const x = y[2] + (v[0] - y[2]) / 2
              , C = v[3] + (y[1] - v[3]) / 2;
            return S0([e[2], e[1]], [e[0], e[3]], [b, _]) > 0 ? [[x, v[1], v[2], v[3]], [y[0], y[1], x, y[3]]] : [[v[0], v[1], v[2], C], [y[0], C, y[2], y[3]]]
        } else if (e[0] > t[2] && e[1] > t[3]) {
            const x = y[2] + (v[0] - y[2]) / 2
              , C = y[3] + (v[1] - y[3]) / 2;
            return S0([e[0], e[1]], [e[2], e[3]], [b, _]) > 0 ? [[x, v[1], v[2], v[3]], [y[0], y[1], x, y[3]]] : [[v[0], C, v[2], v[3]], [y[0], y[1], y[2], C]]
        }
    }
    return [v, y]
}
  , Oae = (e,t,n,r,i,o)=>{
    const s = new Set
      , a = new Set;
    n === ri || n === $n ? a.add(t[1]) : s.add(t[0]),
    i === ri || i === $n ? a.add(r[1]) : s.add(r[0]),
    e.forEach(u=>{
        s.add(u[0]),
        s.add(u[2]),
        a.add(u[1]),
        a.add(u[3])
    }
    ),
    s.add(o[0]),
    s.add(o[2]),
    a.add(o[1]),
    a.add(o[3]);
    const l = Array.from(a).sort((u,f)=>u - f)
      , c = Array.from(s).sort((u,f)=>u - f);
    return {
        row: l.length,
        col: c.length,
        data: l.flatMap((u,f)=>c.map((h,m)=>({
            f: 0,
            g: 0,
            h: 0,
            closed: !1,
            visited: !1,
            parent: null,
            addr: [m, f],
            pos: [h, u]
        })))
    }
}
  , $8 = (e,t,n)=>{
    switch (t) {
    case ii:
        return [n[0], e[1]];
    case $n:
        return [e[2], n[1]];
    case ni:
        return [n[0], e[3]]
    }
    return [e[0], n[1]]
}
  , Nae = (e,t,n,r)=>{
    if (r === $n)
        switch (n) {
        case $n:
            return e.pos[0] >= t.pos[0] ? 4 : e.pos[1] === t.pos[1] ? 0 : 2;
        case ii:
            return e.pos[1] > t.pos[1] && e.pos[0] < t.pos[0] ? 1 : 3;
        case ni:
            return e.pos[1] < t.pos[1] && e.pos[0] < t.pos[0] ? 1 : 3;
        case ri:
            return e.pos[1] === t.pos[1] ? 4 : 2
        }
    else if (r === ri)
        switch (n) {
        case $n:
            return e.pos[1] === t.pos[1] ? 4 : 2;
        case ii:
            return e.pos[1] > t.pos[1] && e.pos[0] > t.pos[0] ? 1 : 3;
        case ni:
            return e.pos[1] < t.pos[1] && e.pos[0] > t.pos[0] ? 1 : 3;
        case ri:
            return e.pos[0] <= t.pos[0] ? 4 : e.pos[1] === t.pos[1] ? 0 : 2
        }
    else if (r === ii)
        switch (n) {
        case $n:
            return e.pos[1] > t.pos[1] && e.pos[0] < t.pos[0] ? 1 : 3;
        case ii:
            return e.pos[1] >= t.pos[1] ? 4 : e.pos[0] === t.pos[0] ? 0 : 2;
        case ni:
            return e.pos[0] === t.pos[0] ? 4 : 2;
        case ri:
            return e.pos[1] > t.pos[1] && e.pos[0] > t.pos[0] ? 1 : 3
        }
    else if (r === ni)
        switch (n) {
        case $n:
            return e.pos[1] < t.pos[1] && e.pos[0] < t.pos[0] ? 1 : 3;
        case ii:
            return e.pos[0] === t.pos[0] ? 4 : 2;
        case ni:
            return e.pos[1] <= t.pos[1] ? 4 : e.pos[0] === t.pos[0] ? 0 : 2;
        case ri:
            return e.pos[1] < t.pos[1] && e.pos[0] > t.pos[0] ? 1 : 3
        }
    return 0
}
  , Fae = ([e,t],n)=>[Qh([e, t - 1], n), Qh([e + 1, t], n), Qh([e, t + 1], n), Qh([e - 1, t], n)]
  , Qh = ([e,t],n)=>e < 0 || e >= n.col || t < 0 || t >= n.row ? null : n.data[t * n.col + e] ?? null
  , M0 = (e,t)=>{
    for (let n = 0; n < t.col; n++)
        for (let r = 0; r < t.row; r++) {
            const i = Qh([n, r], t);
            if (i && e[0] === i.pos[0] && e[1] === i.pos[1])
                return i
        }
    return null
}
  , yN = e=>[Math.min(...e.map(t=>t[0])), Math.min(...e.map(t=>t[1])), Math.max(...e.map(t=>t[2])), Math.max(...e.map(t=>t[3]))]
  , U8 = (e,t)=>{
    const n = t.get(e);
    return n && xa(n) ? n : null
}
  , Bae = (e,t,n)=>{
    const r = e[0][0]
      , i = e[0][1]
      , o = e.map(s=>[s[0] - r, s[1] - i]);
    return {
        points: o,
        x: r + t,
        y: i + n,
        ...up(o)
    }
}
  , zae = e=>e.slice(2).reduce((t,n)=>sa(yf(vu(t[t.length - 1], t[t.length - 2])), yf(vu(n, t[t.length - 1]))) ? [...t.slice(0, -1), n] : [...t, n], [e[0] ?? [0, 0], e[1] ?? [1, 0]])
  , $ae = e=>{
    switch (e) {
    case 0:
        return ii;
    case 1:
        return $n;
    case 2:
        return ni
    }
    return ri
}
  , H8 = (e,t,n,r,i,o,s)=>{
    if (s) {
        if (o) {
            const a = W8(t, n, o, r);
            return $ie(o, a)
        }
        return t
    }
    if (i) {
        const a = y_(e || [0, 0], i);
        return Math.abs(jp(i, a, r) - Ut) > .01 ? W8(t, n, i, r) : a
    }
    return t
}
  , W8 = (e,t,n,r)=>p2(pJ(n) ? zie(n, e) : e, t, n, r)
  , G8 = (e,t,n,r,i)=>Nie(e, t, r, r && yl(r, Array(4).fill(jp(r, e, n))), n, i)
  , Uae = (e,t,n)=>{
    const r = As(new Map([...n].filter(o=>!o[1].isDeleted)))
      , i = Array.from(n.values());
    return [ro(no(e), i, r, !0), ro(no(t), i, r, !0)]
}
  , Zs = {
    version: null,
    points: [],
    zoom: null
}
  , Le = class Le {
    constructor(t) {
        D(this, "elementId");
        D(this, "selectedPointsIndices");
        D(this, "pointerDownState");
        D(this, "isDragging");
        D(this, "lastUncommittedPoint");
        D(this, "pointerOffset");
        D(this, "startBindingElement");
        D(this, "endBindingElement");
        D(this, "hoverPointIndex");
        D(this, "segmentMidPointHoveredCoords");
        this.elementId = t.id,
        sa(t.points[0], [0, 0]) || console.error("Linear element is not normalized", Error().stack),
        this.selectedPointsIndices = null,
        this.lastUncommittedPoint = null,
        this.isDragging = !1,
        this.pointerOffset = {
            x: 0,
            y: 0
        },
        this.startBindingElement = "keep",
        this.endBindingElement = "keep",
        this.pointerDownState = {
            prevSelectedPointsIndices: null,
            lastClickedPoint: -1,
            lastClickedIsEndPoint: !1,
            origin: null,
            segmentMidpoint: {
                value: null,
                index: null,
                added: !1
            }
        },
        this.hoverPointIndex = -1,
        this.segmentMidPointHoveredCoords = null
    }
    static getElement(t, n) {
        const r = n.get(t);
        return r || null
    }
    static handleBoxSelection(t, n, r, i) {
        if (!n.editingLinearElement || !n.selectionElement)
            return !1;
        const {editingLinearElement: o} = n
          , {selectedPointsIndices: s, elementId: a} = o
          , l = Le.getElement(a, i);
        if (!l)
            return !1;
        const [c,u,f,h] = Ke(n.selectionElement, i)
          , v = Le.getPointsGlobalCoordinates(l, i).reduce((y,E,b)=>((E[0] >= c && E[0] <= f && E[1] >= u && E[1] <= h || t.shiftKey && (s != null && s.includes(b))) && y.push(b),
        y), []).filter(y=>!(He(l) && y !== 0 && y !== l.points.length - 1));
        r({
            editingLinearElement: {
                ...o,
                selectedPointsIndices: v.length ? v : null
            }
        })
    }
    static handlePointDragging(t, n, r, i, o, s, a) {
        var v;
        if (!s)
            return !1;
        const {elementId: l} = s
          , c = a.getNonDeletedElementsMap()
          , u = Le.getElement(l, c);
        if (!u || He(u) && !s.pointerDownState.lastClickedIsEndPoint && s.pointerDownState.lastClickedPoint !== 0)
            return !1;
        const f = He(u) ? (v = s.selectedPointsIndices) == null ? void 0 : v.reduce((y,E)=>E === 0 ? [0, y[1]] : [y[0], u.points.length - 1], [!1, !1]).filter(y=>typeof y == "number") : s.selectedPointsIndices
          , h = He(u) ? s.pointerDownState.lastClickedPoint > 0 ? u.points.length - 1 : 0 : s.pointerDownState.lastClickedPoint
          , m = u.points[h];
        if (f && m) {
            if (bg(t) && f.length === 1 && u.points.length > 1) {
                const E = f[0]
                  , b = u.points[E === 0 ? 1 : E - 1]
                  , [_,x] = Le._getShiftLockedDelta(u, c, b, [r, i], t[U.CTRL_OR_CMD] ? null : n.getEffectiveGridSize());
                Le.movePoints(u, [{
                    index: E,
                    point: [_ + b[0], x + b[1]],
                    isDragging: E === h
                }], c)
            } else {
                const E = Le.createPointAt(u, c, r - s.pointerOffset.x, i - s.pointerOffset.y, t[U.CTRL_OR_CMD] ? null : n.getEffectiveGridSize())
                  , b = E[0] - m[0]
                  , _ = E[1] - m[1];
                Le.movePoints(u, f.map(x=>{
                    const C = x === h ? Le.createPointAt(u, c, r - s.pointerOffset.x, i - s.pointerOffset.y, t[U.CTRL_OR_CMD] ? null : n.getEffectiveGridSize()) : [u.points[x][0] + b, u.points[x][1] + _];
                    return {
                        index: x,
                        point: C,
                        isDragging: x === h
                    }
                }
                ), c)
            }
            if (Ge(u, c) && Hf(u, c, !1),
            ms(u, !1)) {
                const E = [];
                f[0] === 0 && E.push(no(Le.getPointGlobalCoordinates(u, u.points[0], c)));
                const _ = f[f.length - 1];
                _ === u.points.length - 1 && E.push(no(Le.getPointGlobalCoordinates(u, u.points[_], c))),
                E.length && o(u, E)
            }
            return !0
        }
        return !1
    }
    static handlePointerUp(t, n, r, i) {
        var m;
        const o = i.getNonDeletedElementsMap()
          , s = i.getNonDeletedElements()
          , {elementId: a, selectedPointsIndices: l, isDragging: c, pointerDownState: u} = n
          , f = Le.getElement(a, o);
        if (!f)
            return n;
        const h = {};
        if (c && l) {
            for (const v of l)
                if (v === 0 || v === f.points.length - 1) {
                    Ca(f.points, r.zoom.value) && Le.movePoints(f, [{
                        index: v,
                        point: v === 0 ? f.points[f.points.length - 1] : f.points[0]
                    }], o);
                    const y = zc(r) ? ro(no(Le.getPointAtIndexGlobalCoordinates(f, v, o)), s, o) : null;
                    h[v === 0 ? "startBindingElement" : "endBindingElement"] = y
                }
        }
        return {
            ...n,
            ...h,
            selectedPointsIndices: c || t.shiftKey ? !c && t.shiftKey && ((m = u.prevSelectedPointsIndices) != null && m.includes(u.lastClickedPoint)) ? l && l.filter(v=>v !== u.lastClickedPoint) : l : l != null && l.includes(u.lastClickedPoint) ? [u.lastClickedPoint] : l,
            isDragging: !1,
            pointerOffset: {
                x: 0,
                y: 0
            }
        }
    }
    static isSegmentTooShort(t, n, r, i) {
        let o = ir(n[0], n[1], r[0], r[1]);
        return t.points.length > 2 && t.roundness && (o = Cae(t, r)),
        o * i.value < Le.POINT_HANDLE_SIZE * 4
    }
    static getSegmentMidPoint(t, n, r, i, o) {
        let s = L2(n, r);
        if (t.points.length > 2 && t.roundness) {
            const a = gN(t, t.points[i]);
            if (a) {
                const l = kae(t, t.points[i], .5)
                  , [c,u] = pN(a[0], a[1], a[2], a[3], l);
                s = Le.getPointGlobalCoordinates(t, [c, u], o)
            }
        }
        return s
    }
    static getSegmentMidPointIndex(t, n, r, i) {
        const o = Le.getElement(t.elementId, i);
        if (!o)
            return -1;
        const s = Le.getEditorMidPoints(o, i, n);
        let a = 0;
        for (; a < s.length; ) {
            if (Le.arePointsEqual(r, s[a]))
                return a + 1;
            a++
        }
        return -1
    }
    static handlePointerDown(t, n, r, i, o, s) {
        var I;
        const a = n.state
          , l = s.getNonDeletedElementsMap()
          , c = s.getNonDeletedElements()
          , u = {
            didAddPoint: !1,
            hitElement: null,
            linearElementEditor: null
        };
        if (!o)
            return u;
        const {elementId: f} = o
          , h = Le.getElement(f, l);
        if (!h)
            return u;
        const m = Le.getSegmentMidpointHitCoords(o, i, a, l);
        let v = null;
        if (m && (v = Le.getSegmentMidPointIndex(o, a, m, l)),
        t.altKey && a.editingLinearElement)
            return o.lastUncommittedPoint == null && !He(h) && (ue(h, {
                points: [...h.points, Le.createPointAt(h, l, i.x, i.y, t[U.CTRL_OR_CMD] ? null : n.getEffectiveGridSize())]
            }),
            u.didAddPoint = !0),
            r.shouldCaptureIncrement(),
            u.linearElementEditor = {
                ...o,
                pointerDownState: {
                    prevSelectedPointsIndices: o.selectedPointsIndices,
                    lastClickedPoint: -1,
                    lastClickedIsEndPoint: !1,
                    origin: {
                        x: i.x,
                        y: i.y
                    },
                    segmentMidpoint: {
                        value: m,
                        index: v,
                        added: !1
                    }
                },
                selectedPointsIndices: [h.points.length - 1],
                lastUncommittedPoint: null,
                endBindingElement: ro(i, c, l)
            },
            u.didAddPoint = !0,
            u;
        const y = Le.getPointIndexUnderCursor(h, l, a.zoom, i.x, i.y);
        if (y >= 0 || m)
            u.hitElement = h;
        else {
            const {startBindingElement: O, endBindingElement: N} = o;
            zc(a) && ms(h) && Yv(h, O, N, l, s)
        }
        const [E,b,_,x] = Ke(h, l)
          , C = (E + _) / 2
          , P = (b + x) / 2
          , M = y > -1 && Xe(h.x + h.points[y][0], h.y + h.points[y][1], C, P, h.angle)
          , A = y > -1 || t.shiftKey ? t.shiftKey || (I = o.selectedPointsIndices) != null && I.includes(y) ? Hae([...o.selectedPointsIndices || [], y]) : [y] : null;
        return u.linearElementEditor = {
            ...o,
            pointerDownState: {
                prevSelectedPointsIndices: o.selectedPointsIndices,
                lastClickedPoint: y,
                lastClickedIsEndPoint: y === h.points.length - 1,
                origin: {
                    x: i.x,
                    y: i.y
                },
                segmentMidpoint: {
                    value: m,
                    index: v,
                    added: !1
                }
            },
            selectedPointsIndices: A,
            pointerOffset: M ? {
                x: i.x - M[0],
                y: i.y - M[1]
            } : {
                x: 0,
                y: 0
            }
        },
        u
    }
    static arePointsEqual(t, n) {
        return !t && !n ? !0 : !t || !n ? !1 : sa(t, n)
    }
    static handlePointerMove(t, n, r, i, o) {
        const s = i.state;
        if (!s.editingLinearElement)
            return null;
        const {elementId: a, lastUncommittedPoint: l} = s.editingLinearElement
          , c = Le.getElement(a, o);
        if (!c)
            return s.editingLinearElement;
        const {points: u} = c
          , f = u[u.length - 1];
        if (!t.altKey)
            return f === l && Le.deletePoints(c, [u.length - 1], o),
            {
                ...s.editingLinearElement,
                lastUncommittedPoint: null
            };
        let h;
        if (bg(t) && u.length >= 2) {
            const m = u[u.length - 2]
              , [v,y] = Le._getShiftLockedDelta(c, o, m, [n, r], t[U.CTRL_OR_CMD] ? null : i.getEffectiveGridSize());
            h = [v + m[0], y + m[1]]
        } else
            h = Le.createPointAt(c, o, n - s.editingLinearElement.pointerOffset.x, r - s.editingLinearElement.pointerOffset.y, t[U.CTRL_OR_CMD] || He(c) ? null : i.getEffectiveGridSize());
        return f === l ? Le.movePoints(c, [{
            index: c.points.length - 1,
            point: h
        }], o) : Le.addPoints(c, [{
            point: h
        }], o),
        {
            ...s.editingLinearElement,
            lastUncommittedPoint: c.points[c.points.length - 1]
        }
    }
    static getPointGlobalCoordinates(t, n, r) {
        const [i,o,s,a] = Ke(t, r)
          , l = (i + s) / 2
          , c = (o + a) / 2;
        let {x: u, y: f} = t;
        return [u,f] = Xe(u + n[0], f + n[1], l, c, t.angle),
        [u, f]
    }
    static getPointsGlobalCoordinates(t, n) {
        const [r,i,o,s] = Ke(t, n)
          , a = (r + o) / 2
          , l = (i + s) / 2;
        return t.points.map(c=>{
            let {x: u, y: f} = t;
            return [u,f] = Xe(u + c[0], f + c[1], a, l, t.angle),
            [u, f]
        }
        )
    }
    static getPointAtIndexGlobalCoordinates(t, n, r) {
        const i = n < 0 ? t.points.length + n : n
          , [o,s,a,l] = Ke(t, r)
          , c = (o + a) / 2
          , u = (s + l) / 2
          , f = t.points[i]
          , {x: h, y: m} = t;
        return f ? Xe(h + f[0], m + f[1], c, u, t.angle) : Xe(h, m, c, u, t.angle)
    }
    static pointFromAbsoluteCoords(t, n, r) {
        if (He(t))
            return [n[0] - t.x, n[1] - t.y];
        const [i,o,s,a] = Ke(t, r)
          , l = (i + s) / 2
          , c = (o + a) / 2
          , [u,f] = Xe(n[0], n[1], l, c, -t.angle);
        return [u - t.x, f - t.y]
    }
    static getPointIndexUnderCursor(t, n, r, i, o) {
        const s = Le.getPointsGlobalCoordinates(t, n);
        let a = s.length;
        for (; --a > -1; ) {
            const l = s[a];
            if (ir(i, o, l[0], l[1]) * r.value < Le.POINT_HANDLE_SIZE + 1)
                return a
        }
        return -1
    }
    static createPointAt(t, n, r, i, o) {
        const s = er(r, i, o)
          , [a,l,c,u] = Ke(t, n)
          , f = (a + c) / 2
          , h = (l + u) / 2
          , [m,v] = Xe(s[0], s[1], f, h, -t.angle);
        return [m - t.x, v - t.y]
    }
    static getNormalizedPoints(t) {
        const {points: n} = t
          , r = n[0][0]
          , i = n[0][1];
        return {
            points: n.map(o=>[o[0] - r, o[1] - i]),
            x: t.x + r,
            y: t.y + i
        }
    }
    static normalizePoints(t) {
        ue(t, Le.getNormalizedPoints(t))
    }
    static duplicateSelectedPoints(t, n) {
        if (!t.editingLinearElement)
            return !1;
        const {selectedPointsIndices: r, elementId: i} = t.editingLinearElement
          , o = Le.getElement(i, n);
        if (!o || r === null)
            return !1;
        const {points: s} = o
          , a = [];
        let l = !1
          , c = -1;
        const u = s.reduce((f,h,m)=>{
            if (++c,
            f.push(h),
            r.includes(m)) {
                const y = s[m + 1];
                y || (l = !0),
                f.push(y ? [(h[0] + y[0]) / 2, (h[1] + y[1]) / 2] : [h[0], h[1]]),
                a.push(c + 1),
                ++c
            }
            return f
        }
        , []);
        if (ue(o, {
            points: u
        }),
        l) {
            const f = o.points[o.points.length - 1];
            Le.movePoints(o, [{
                index: o.points.length - 1,
                point: [f[0] + 30, f[1] + 30]
            }], n)
        }
        return {
            appState: {
                ...t,
                editingLinearElement: {
                    ...t.editingLinearElement,
                    selectedPointsIndices: a
                }
            }
        }
    }
    static deletePoints(t, n, r) {
        let i = 0
          , o = 0;
        if (n.includes(0)) {
            const l = t.points.find((c,u)=>!n.includes(u));
            l && (i = l[0],
            o = l[1])
        }
        const a = t.points.reduce((l,c,u)=>(n.includes(u) || l.push(l.length ? [c[0] - i, c[1] - o] : [0, 0]),
        l), []);
        Le._updatePoints(t, a, i, o, r)
    }
    static addPoints(t, n, r) {
        const s = [...t.points, ...n.map(a=>a.point)];
        Le._updatePoints(t, s, 0, 0, r)
    }
    static movePoints(t, n, r, i, o) {
        const {points: s} = t;
        let a = 0
          , l = 0;
        const c = n.find(({index: f})=>f === 0);
        c && (a = c.point[0] + s[c.index][0],
        l = c.point[1] + s[c.index][1]);
        const u = s.map((f,h)=>{
            const m = n.find(v=>v.index === h);
            if (m) {
                if (m.index === 0)
                    return f;
                const v = m.point[0] - s[m.index][0]
                  , y = m.point[1] - s[m.index][1];
                return [f[0] + v - a, f[1] + y - l]
            }
            return a || l ? [f[0] - a, f[1] - l] : f
        }
        );
        Le._updatePoints(t, u, a, l, r, i, {
            isDragging: n.reduce((f,h)=>f || h.isDragging === !0, !1),
            changedElements: o == null ? void 0 : o.changedElements
        })
    }
    static shouldAddMidpoint(t, n, r, i) {
        const o = Le.getElement(t.elementId, i);
        if (o && He(o) || !o)
            return !1;
        const {segmentMidpoint: s} = t.pointerDownState;
        if (s.added || s.value === null || s.index === null || t.pointerDownState.origin === null)
            return !1;
        const a = t.pointerDownState.origin
          , l = ir(a.x, a.y, n.x, n.y);
        return !(!r.editingLinearElement && l < wc / r.zoom.value)
    }
    static addMidpoint(t, n, r, i, o) {
        const s = Le.getElement(t.elementId, o);
        if (!s)
            return;
        const {segmentMidpoint: a} = t.pointerDownState
          , l = {
            pointerDownState: t.pointerDownState,
            selectedPointsIndices: t.selectedPointsIndices
        }
          , c = Le.createPointAt(s, o, n.x, n.y, i && !He(s) ? r.getEffectiveGridSize() : null)
          , u = [...s.points.slice(0, a.index), c, ...s.points.slice(a.index)];
        return ue(s, {
            points: u
        }),
        l.pointerDownState = {
            ...t.pointerDownState,
            segmentMidpoint: {
                ...t.pointerDownState.segmentMidpoint,
                added: !0
            },
            lastClickedPoint: a.index
        },
        l.selectedPointsIndices = [a.index],
        l
    }
    static _updatePoints(t, n, r, i, o, s, a) {
        if (He(t)) {
            const l = {};
            (s == null ? void 0 : s.startBinding) !== void 0 && (l.startBinding = s.startBinding !== null && Bk(s.startBinding) ? s.startBinding : null),
            (s == null ? void 0 : s.endBinding) !== void 0 && (l.endBinding = s.endBinding !== null && Bk(s.endBinding) ? s.endBinding : null);
            const c = a != null && a.changedElements ? As(new Map([...o, ...a.changedElements])) : o;
            wu(t, c, n, [r, i], l, a)
        } else {
            const l = z8(t, n)
              , c = z8(t, t.points)
              , u = (l[0] + l[2]) / 2
              , f = (l[1] + l[3]) / 2
              , h = (c[0] + c[2]) / 2
              , m = (c[1] + c[3]) / 2
              , v = h - u
              , y = m - f
              , E = Xe(r, i, v, y, t.angle);
            ue(t, {
                ...s,
                points: n,
                x: t.x + E[0],
                y: t.y + E[1]
            })
        }
    }
    static _getShiftLockedDelta(t, n, r, i, o) {
        const s = Le.getPointGlobalCoordinates(t, r, n);
        if (He(t))
            return [i[0] - s[0], i[1] - s[1]];
        const [a,l] = er(i[0], i[1], o)
          , {width: c, height: u} = L_(s[0], s[1], a, l);
        return Ae([c, u], [0, 0], -t.angle)
    }
}
;
D(Le, "POINT_HANDLE_SIZE", 10),
D(Le, "getEditorMidPoints", (t,n,r)=>{
    const i = Ge(t, n);
    return !r.editingLinearElement && t.points.length > 2 && !i ? [] : (Zs.version === t.version && Zs.zoom === r.zoom.value || Le.updateEditorMidPointsCache(t, n, r),
    Zs.points)
}
),
D(Le, "updateEditorMidPointsCache", (t,n,r)=>{
    const i = Le.getPointsGlobalCoordinates(t, n);
    let o = 0;
    const s = [];
    for (; o < i.length - 1; ) {
        if (Le.isSegmentTooShort(t, t.points[o], t.points[o + 1], r.zoom)) {
            s.push(null),
            o++;
            continue
        }
        const a = Le.getSegmentMidPoint(t, i[o], i[o + 1], o + 1, n);
        s.push(a),
        o++
    }
    Zs.points = s,
    Zs.version = t.version,
    Zs.zoom = r.zoom.value
}
),
D(Le, "getSegmentMidpointHitCoords", (t,n,r,i)=>{
    const {elementId: o} = t
      , s = Le.getElement(o, i);
    if (!s || Le.getPointIndexUnderCursor(s, i, r.zoom, n.x, n.y) >= 0 || Le.getPointsGlobalCoordinates(s, i).length >= 3 && !r.editingLinearElement)
        return null;
    const c = Le.POINT_HANDLE_SIZE / r.zoom.value
      , u = t.segmentMidPointHoveredCoords;
    if (u && ir(u[0], u[1], n.x, n.y) <= c)
        return u;
    let f = 0;
    const h = Le.getEditorMidPoints(s, i, r);
    for (; f < h.length; ) {
        if (h[f] !== null && ir(h[f][0], h[f][1], n.x, n.y) <= c)
            return h[f];
        f++
    }
    return null
}
),
D(Le, "getBoundTextElementPosition", (t,n,r)=>{
    const i = Le.getPointsGlobalCoordinates(t, r);
    i.length < 2 && ue(n, {
        isDeleted: !0
    });
    let o = 0
      , s = 0;
    if (t.points.length % 2 === 1) {
        const a = Math.floor(t.points.length / 2)
          , l = Le.getPointGlobalCoordinates(t, t.points[a], r);
        o = l[0] - n.width / 2,
        s = l[1] - n.height / 2
    } else {
        const a = t.points.length / 2 - 1;
        let l = Zs.points[a];
        t.points.length === 2 && (l = L2(i[0], i[1])),
        (!l || Zs.version !== t.version) && (l = Le.getSegmentMidPoint(t, i[a], i[a + 1], a + 1, r)),
        o = l[0] - n.width / 2,
        s = l[1] - n.height / 2
    }
    return {
        x: o,
        y: s
    }
}
),
D(Le, "getMinMaxXYWithBoundText", (t,n,r,i)=>{
    let[o,s,a,l] = r;
    const c = (o + a) / 2
      , u = (s + l) / 2
      , {x: f, y: h} = Le.getBoundTextElementPosition(t, i, n)
      , m = f + i.width
      , v = h + i.height
      , y = Ae([o, s], [c, u], t.angle)
      , E = Ae([a, s], [c, u], t.angle)
      , b = Ae([f, h], [c, u], -t.angle)
      , _ = Ae([m, h], [c, u], -t.angle)
      , x = Ae([f, v], [c, u], -t.angle)
      , C = Ae([m, v], [c, u], -t.angle);
    return y[0] < E[0] && y[1] >= E[1] ? (o = Math.min(o, x[0]),
    a = Math.max(a, Math.max(_[0], C[0])),
    s = Math.min(s, b[1]),
    l = Math.max(l, C[1])) : y[0] >= E[0] && y[1] > E[1] ? (o = Math.min(o, C[0]),
    a = Math.max(a, Math.max(b[0], _[0])),
    s = Math.min(s, x[1]),
    l = Math.max(l, _[1])) : y[0] >= E[0] ? (o = Math.min(o, _[0]),
    a = Math.max(a, x[0]),
    s = Math.min(s, C[1]),
    l = Math.max(l, b[1])) : y[1] <= E[1] && (o = Math.min(o, Math.min(_[0], b[0])),
    a = Math.max(a, C[0]),
    s = Math.min(s, _[1]),
    l = Math.max(l, x[1])),
    [o, s, a, l, c, u]
}
),
D(Le, "getElementAbsoluteCoords", (t,n,r=!1)=>{
    let i, o, s, a, l;
    if (t.points.length < 2 || !Yt.get(t)) {
        const {minX: h, minY: m, maxX: v, maxY: y} = t.points.reduce((E,[b,_])=>(E.minY = Math.min(E.minY, _),
        E.minX = Math.min(E.minX, b),
        E.maxX = Math.max(E.maxX, b),
        E.maxY = Math.max(E.maxY, _),
        E), {
            minX: 1 / 0,
            minY: 1 / 0,
            maxX: -1 / 0,
            maxY: -1 / 0
        });
        o = h + t.x,
        s = m + t.y,
        a = v + t.x,
        l = y + t.y
    } else {
        const h = Yt.generateElementShape(t, null)
          , m = Uf(h[0])
          , [v,y,E,b] = ry(m);
        o = v + t.x,
        s = y + t.y,
        a = E + t.x,
        l = b + t.y
    }
    const c = (o + a) / 2
      , u = (s + l) / 2;
    if (i = [o, s, a, l, c, u],
    !r)
        return i;
    const f = Ge(t, n);
    return f && (i = Le.getMinMaxXYWithBoundText(t, n, [o, s, a, l], f)),
    i
}
);
let ke = Le;
const Hae = e=>{
    let t = [...new Set(e.filter(n=>n !== null && n !== -1))];
    return t = t.sort((n,r)=>n - r),
    t.length ? t : null
}
  , bf = {}
  , O2 = (e,t)=>{
    const n = bf[e] || (bf[e] = {
        height: t
    });
    return n.height = t,
    n
}
  , wN = e=>{
    bf[e] && delete bf[e]
}
  , Wae = e=>{
    var t;
    return ((t = bf[e]) == null ? void 0 : t.height) ?? null
}
  , _f = e=>iD(e).replace(/\t/g, "        ")
  , E4 = e=>_f(e).split(`
`)
  , Wr = (e,t,n,r=!0)=>{
    let i;
    const o = {
        x: e.x,
        y: e.y,
        text: e.text,
        width: e.width,
        height: e.height,
        angle: (t == null ? void 0 : t.angle) ?? e.angle
    };
    o.text = e.text,
    (t || !e.autoResize) && (i = t ? jo(t, e) : e.width,
    o.text = Ru(e.originalText, Ht(e), i));
    const s = Oi(o.text, Ht(e), e.lineHeight);
    if (e.autoResize && (o.width = s.width),
    o.height = s.height,
    t) {
        const a = Xp(t, e)
          , l = jo(t, e);
        if (!Be(t) && s.height > a) {
            const h = Eu(s.height, t.type);
            ue(t, {
                height: h
            }, r),
            O2(t.id, h)
        }
        if (s.width > l) {
            const h = Eu(s.width, t.type);
            ue(t, {
                width: h
            }, r)
        }
        const c = {
            ...e,
            ...o
        }
          , {x: u, y: f} = oy(t, c, n);
        o.x = u,
        o.y = f
    }
    ue(e, o, r)
}
  , EN = (e,t,n)=>{
    const r = De(e);
    t.forEach(i=>{
        const o = n.get(i.id)
          , s = jl(i);
        if (s) {
            const a = n.get(s);
            if (a) {
                const l = r.get(o);
                l && ue(l, {
                    boundElements: (i.boundElements || []).filter(u=>u.id !== a && u.id !== s).concat({
                        type: "text",
                        id: a
                    })
                });
                const c = r.get(a);
                c && ye(c) && ue(c, {
                    containerId: l ? o : null
                })
            }
        }
    }
    )
}
  , Hf = (e,t,n,r=!1)=>{
    if (!jl(e))
        return;
    wN(e.id);
    const o = Ge(e, t);
    if (o && o.text) {
        if (!e)
            return;
        let s = o.text
          , a = o.height
          , l = o.width;
        const c = jo(e, o)
          , u = Xp(e, o);
        let f = e.height;
        if (r || n !== "n" && n !== "s") {
            s && (s = Ru(o.originalText, Ht(o), c));
            const h = Oi(s, Ht(o), o.lineHeight);
            a = h.height,
            l = h.width
        }
        if (a > u) {
            f = Eu(a, e.type);
            const h = f - e.height
              , m = !Be(e) && (n === "ne" || n === "nw" || n === "n") ? e.y - h : e.y;
            ue(e, {
                height: f,
                y: m
            })
        }
        ue(o, {
            text: s,
            width: l,
            height: a
        }),
        Be(e) || ue(o, oy(e, o, t))
    }
}
  , oy = (e,t,n)=>{
    if (Be(e))
        return ke.getBoundTextElementPosition(e, t, n);
    const r = xN(e)
      , i = Xp(e, t)
      , o = jo(e, t);
    let s, a;
    return t.verticalAlign === Ai.TOP ? a = r.y : t.verticalAlign === Ai.BOTTOM ? a = r.y + (i - t.height) : a = r.y + (i / 2 - t.height / 2),
    t.textAlign === Jg.LEFT ? s = r.x : t.textAlign === Jg.RIGHT ? s = r.x + (o - t.width) : s = r.x + (o / 2 - t.width / 2),
    {
        x: s,
        y: a
    }
}
  , Oi = (e,t,n)=>{
    e = e.split(`
`).map(s=>s || " ").join(`
`);
    const r = parseFloat(t)
      , i = Vae(e, r, n);
    return {
        width: _4(e, t),
        height: i
    }
}
  , Gae = e=>{
    const t = E4(e.text).length;
    return e.height / t / e.fontSize
}
  , Kp = (e,t)=>e * t
  , b4 = (e,t)=>Kp(e, t) + Tn * 2;
let ob;
const Tc = (e,t,n)=>{
    ob || (ob = document.createElement("canvas"));
    const r = ob.getContext("2d");
    r.font = t;
    const i = r.measureText(e)
      , o = i.width;
    if (!n && window.TextMetrics && "actualBoundingBoxLeft"in window.TextMetrics.prototype && "actualBoundingBoxRight"in window.TextMetrics.prototype) {
        const s = Math.abs(i.actualBoundingBoxLeft) + Math.abs(i.actualBoundingBoxRight);
        return Math.max(s, o)
    }
    return o
}
  , _4 = (e,t,n)=>{
    const r = E4(e);
    let i = 0;
    return r.forEach(o=>{
        i = Math.max(i, Tc(o, t, n))
    }
    ),
    i
}
  , Vae = (e,t,n)=>{
    const r = E4(e).length;
    return Kp(t, n) * r
}
  , Yae = e=>{
    const t = e.split("-");
    return t.length > 1 && t.forEach((n,r)=>{
        r !== t.length - 1 && (t[r] = n += "-")
    }
    ),
    t.join(" ").split(" ")
}
  , Ru = (e,t,n)=>{
    if (!Number.isFinite(n) || n < 0)
        return e;
    const r = []
      , i = e.split(`
`)
      , o = Tc(" ", t, !0);
    let s = ""
      , a = 0;
    const l = u=>{
        u.trim() && r.push(u)
    }
      , c = ()=>{
        s = "",
        a = 0
    }
    ;
    for (const u of i) {
        if (Tc(u, t, !0) <= n) {
            r.push(u);
            continue
        }
        const h = Yae(u);
        c();
        let m = 0;
        for (; m < h.length; ) {
            const v = Tc(h[m], t, !0);
            if (v === n)
                l(h[m]),
                m++;
            else if (v > n) {
                for (l(s),
                c(); h[m].length > 0; ) {
                    const y = String.fromCodePoint(h[m].codePointAt(0))
                      , E = s + y
                      , b = Tc(E, t, !0)
                      , _ = bN.calculate(y, t);
                    a = b,
                    h[m] = h[m].slice(y.length),
                    a >= n ? (l(s),
                    s = y,
                    a = _) : s = E
                }
                a + o >= n ? (l(s),
                c()) : s.endsWith("-") || (s += " ",
                a += o),
                m++
            } else
                for (; a < n && m < h.length; ) {
                    const y = h[m];
                    if (a = Tc(s + y, t, !0),
                    a > n) {
                        l(s),
                        c();
                        break
                    }
                    m++;
                    const E = !y.endsWith("-");
                    if (s += y,
                    E && (s += " "),
                    a + o >= n) {
                        E ? r.push(s.slice(0, -1)) : r.push(s),
                        c();
                        break
                    }
                }
        }
        s.slice(-1) === " " && (s = s.slice(0, -1),
        l(s))
    }
    return r.join(`
`)
}
  , bN = (()=>{
    const e = {};
    return {
        calculate: (r,i)=>{
            const o = r.charCodeAt(0);
            if (e[i] || (e[i] = []),
            !e[i][o]) {
                const s = Tc(r, i, !0);
                e[i][o] = s
            }
            return e[i][o]
        }
        ,
        getCache: r=>e[r]
    }
}
)()
  , _N = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase()
  , x4 = (e,t)=>{
    const n = jae(e);
    return n === 0 ? Oi(_N.split("").join(`
`), e, t).width + Tn * 2 : n + Tn * 2
}
  , jae = e=>{
    const t = bN.getCache(e);
    if (!t)
        return 0;
    const n = t.filter(r=>r !== void 0);
    return Math.max(...n)
}
  , jl = e=>{
    var t, n, r;
    return (t = e == null ? void 0 : e.boundElements) != null && t.length && ((r = (n = e == null ? void 0 : e.boundElements) == null ? void 0 : n.find(i=>i.type === "text")) == null ? void 0 : r.id) || null
}
  , Ge = (e,t)=>{
    if (!e)
        return null;
    const n = jl(e);
    return n && t.get(n) || null
}
  , Hr = (e,t)=>e && e.containerId && t.get(e.containerId) || null
  , sb = (e,t,n)=>{
    if (!Be(e))
        return {
            x: e.x + e.width / 2,
            y: e.y + e.height / 2
        };
    const r = ke.getPointsGlobalCoordinates(e, n);
    if (r.length % 2 === 1) {
        const s = Math.floor(e.points.length / 2)
          , a = ke.getPointGlobalCoordinates(e, e.points[s], n);
        return {
            x: a[0],
            y: a[1]
        }
    }
    const i = e.points.length / 2 - 1;
    let o = ke.getEditorMidPoints(e, n, t)[i];
    return o || (o = ke.getSegmentMidPoint(e, r[i], r[i + 1], i + 1, n)),
    {
        x: o[0],
        y: o[1]
    }
}
  , xN = e=>{
    let t = Tn
      , n = Tn;
    return e.type === "ellipse" && (t += e.width / 2 * (1 - Math.sqrt(2) / 2),
    n += e.height / 2 * (1 - Math.sqrt(2) / 2)),
    e.type === "diamond" && (t += e.width / 4,
    n += e.height / 4),
    {
        x: e.x + t,
        y: e.y + n
    }
}
  , Kae = (e,t)=>!t || Be(t) ? e.angle : t.angle
  , Xae = (e,t)=>e.some(n=>{
    if (Sn(n)) {
        const r = Hr(n, t);
        return !Be(r)
    }
    return !1
}
)
  , Zae = (e,t)=>e.some(n=>{
    if (Sn(n)) {
        const r = Hr(n, t);
        return !Be(r)
    }
    return ye(n)
}
)
  , qae = new Set(["rectangle", "ellipse", "diamond", "arrow"])
  , Qae = e=>qae.has(e.type)
  , Eu = (e,t)=>{
    e = Math.ceil(e);
    const n = Tn * 2;
    return t === "ellipse" ? Math.round((e + n) / Math.sqrt(2) * 2) : t === "arrow" ? e + n * 8 : t === "diamond" ? 2 * (e + n) : e + n
}
  , jo = (e,t)=>{
    const {width: n} = e;
    if (Be(e)) {
        const r = ((t == null ? void 0 : t.fontSize) ?? Ra) * Oq;
        return Math.max(Dq * n, r)
    }
    return e.type === "ellipse" ? Math.round(n / 2 * Math.sqrt(2)) - Tn * 2 : e.type === "diamond" ? Math.round(n / 2) - Tn * 2 : n - Tn * 2
}
  , Xp = (e,t)=>{
    const {height: n} = e;
    return Be(e) ? n - Tn * 8 * 2 <= 0 ? t.height : n : e.type === "ellipse" ? Math.round(n / 2 * Math.sqrt(2)) - Tn * 2 : e.type === "diamond" ? Math.round(n / 2) - Tn * 2 : n - Tn * 2
}
  , Jae = ()=>_4(_N, Ht({
    fontSize: Ra,
    fontFamily: ec
})) > 0
  , S4 = (e,t)=>Oi("", e, t).width + Tn * 2
  , I4 = (e,{shouldThrow: t=!1, includeBoundTextValidation: n=!1, ignoreLogs: r, reconciliationContext: i})=>{
    const o = []
      , s = l=>`${l == null ? void 0 : l.index}:${l == null ? void 0 : l.id}:${l == null ? void 0 : l.type}:${l == null ? void 0 : l.isDeleted}:${l == null ? void 0 : l.version}:${l == null ? void 0 : l.versionNonce}`
      , a = e.map(l=>l.index);
    for (const [l,c] of a.entries()) {
        const u = a[l - 1]
          , f = a[l + 1];
        if (M_(c, u, f) || o.push(`Fractional indices invariant has been compromised: "${s(e[l - 1])}", "${s(e[l])}", "${s(e[l + 1])}"`),
        n && go(e[l])) {
            const h = e[l]
              , m = Ge(h, De(e));
            m && m.index <= h.index && o.push(`Fractional indices invariant for bound elements has been compromised: "${s(m)}", "${s(h)}"`)
        }
    }
    if (o.length) {
        const l = new _J
          , c = [];
        if (i && (c.push("Additional reconciliation context:"),
        c.push(i.localElements.map(u=>s(u))),
        c.push(i.remoteElements.map(u=>s(u)))),
        r || console.error(o.join(`

`), l.stack, e.map(u=>s(u)), ...c),
        t)
            throw l
    }
}
  , SN = e=>e.sort((t,n)=>V8(t) && V8(n) ? t.index < n.index ? -1 : t.index > n.index ? 1 : t.id < n.id ? -1 : 1 : 1)
  , Ko = (e,t)=>{
    try {
        const n = ele(e, t)
          , r = IN(e, n)
          , i = e.map(o=>r.has(o) ? {
            ...o,
            ...r.get(o)
        } : o);
        I4(i, {
            includeBoundTextValidation: !1,
            shouldThrow: !0,
            ignoreLogs: !0
        });
        for (const [o,s] of r)
            ue(o, s, !1)
    } catch {
        ka(e)
    }
    return e
}
  , ka = e=>{
    const t = tle(e)
      , n = IN(e, t);
    for (const [r,i] of n)
        ue(r, i, !1);
    return e
}
  , ele = (e,t)=>{
    const n = [];
    let r = 0;
    for (; r < e.length; )
        if (t.has(e[r].id)) {
            const i = [r - 1, r];
            for (; ++r < e.length && t.has(e[r].id); )
                i.push(r);
            i.push(r),
            n.push(i)
        } else
            r++;
    return n
}
  , tle = e=>{
    const t = [];
    let n, r, i = -1, o = 0;
    const s = c=>{
        var h;
        const u = e[i] ? e[i].index : void 0
          , f = (h = e[c - 1]) == null ? void 0 : h.index;
        return !u && f || u && f && f > u ? [f, c - 1] : [u, i]
    }
      , a = c=>{
        var h;
        const u = e[o] ? e[o].index : void 0;
        if (u && c < o)
            return [u, o];
        let f = o;
        for (; ++f < e.length; ) {
            const m = (h = e[f]) == null ? void 0 : h.index;
            if (!u && m || u && m && m > u)
                return [m, f]
        }
        return [void 0, f]
    }
    ;
    let l = 0;
    for (; l < e.length; ) {
        const c = e[l].index;
        if ([n,i] = s(l),
        [r,o] = a(l),
        M_(c, n, r))
            l++;
        else {
            const u = [i, l];
            for (; ++l < e.length; ) {
                const f = e[l].index
                  , [h,m] = s(l)
                  , [v,y] = a(l);
                if (M_(f, h, v))
                    break;
                [n,i] = [h, m],
                [r,o] = [v, y],
                u.push(l)
            }
            u.push(o),
            t.push(u)
        }
    }
    return t
}
  , M_ = (e,t,n)=>e ? t && n ? t < e && e < n : !t && n ? e < n : t && !n ? t < e : !!e : !1
  , IN = (e,t)=>{
    var r, i;
    const n = new Map;
    for (const o of t) {
        const s = o.shift()
          , a = o.pop()
          , l = X3((r = e[s]) == null ? void 0 : r.index, (i = e[a]) == null ? void 0 : i.index, o.length);
        for (let c = 0; c < o.length; c++) {
            const u = e[o[c]];
            n.set(u, {
                index: l[c]
            })
        }
    }
    return n
}
  , V8 = e=>!!e.index
  , Y8 = e=>{
    const t = new Map
      , n = [];
    for (const r of e)
        r.isDeleted || (n.push(r),
        t.set(r.id, r));
    return {
        elementsMap: t,
        elements: n
    }
}
  , nle = ca(e=>{
    window != null && window.DEBUG_FRACTIONAL_INDICES && I4(e, {
        shouldThrow: UP.TEST === "production",
        includeBoundTextValidation: !0
    })
}
, 1e3 * 60, {
    leading: !0,
    trailing: !1
})
  , rle = e=>{
    const t = ["includeBoundTextElement", "includeElementsInFrames"];
    let n = "";
    for (const r of t)
        n += `${r}:${e[r] ? "1" : "0"}`;
    return n
}
  , j8 = e=>typeof e == "string"
  , Lc = class Lc {
    constructor() {
        D(this, "callbacks", new Set);
        D(this, "nonDeletedElements", []);
        D(this, "nonDeletedElementsMap", As(new Map));
        D(this, "elements", []);
        D(this, "nonDeletedFramesLikes", []);
        D(this, "frames", []);
        D(this, "elementsMap", As(new Map));
        D(this, "selectedElementsCache", {
            selectedElementIds: null,
            elements: null,
            cache: new Map
        });
        D(this, "sceneNonce");
        D(this, "insertElement", t=>{
            const n = t.frameId ? this.getElementIndex(t.frameId) : this.elements.length;
            this.insertElementAtIndex(t, n)
        }
        );
        D(this, "insertElements", t=>{
            var r;
            if (!t.length)
                return;
            const n = (r = t[0]) != null && r.frameId ? this.getElementIndex(t[0].frameId) : this.elements.length;
            this.insertElementsAtIndex(t, n)
        }
        );
        D(this, "getContainerElement", t=>t && t.containerId && this.getElement(t.containerId) || null)
    }
    static mapElementToScene(t, n) {
        j8(t) ? this.sceneMapById.set(t, n) : (this.sceneMapByElement.set(t, n),
        this.sceneMapById.set(t.id, n))
    }
    static getScene(t) {
        return j8(t) ? this.sceneMapById.get(t) || null : this.sceneMapByElement.get(t) || null
    }
    getSceneNonce() {
        return this.sceneNonce
    }
    getNonDeletedElementsMap() {
        return this.nonDeletedElementsMap
    }
    getElementsIncludingDeleted() {
        return this.elements
    }
    getElementsMapIncludingDeleted() {
        return this.elementsMap
    }
    getNonDeletedElements() {
        return this.nonDeletedElements
    }
    getFramesIncludingDeleted() {
        return this.frames
    }
    getSelectedElements(t) {
        const n = rle(t)
          , r = (t == null ? void 0 : t.elements) || this.nonDeletedElements;
        if (this.selectedElementsCache.elements === r && this.selectedElementsCache.selectedElementIds === t.selectedElementIds) {
            const o = this.selectedElementsCache.cache.get(n);
            if (o)
                return o
        } else
            (t == null ? void 0 : t.elements) == null && this.selectedElementsCache.cache.clear();
        const i = dt(r, {
            selectedElementIds: t.selectedElementIds
        }, t);
        return (t == null ? void 0 : t.elements) == null && (this.selectedElementsCache.selectedElementIds = t.selectedElementIds,
        this.selectedElementsCache.elements = this.nonDeletedElements,
        this.selectedElementsCache.cache.set(n, i)),
        i
    }
    getNonDeletedFramesLikes() {
        return this.nonDeletedFramesLikes
    }
    getElement(t) {
        return this.elementsMap.get(t) || null
    }
    getNonDeletedElement(t) {
        const n = this.getElement(t);
        return n && R_(n) ? n : null
    }
    mapElements(t) {
        let n = !1;
        const r = this.elements.map(i=>{
            const o = t(i);
            return o !== i && (n = !0),
            o
        }
        );
        return n && this.replaceAllElements(r),
        n
    }
    replaceAllElements(t) {
        const n = t instanceof Array ? t : Array.from(t.values())
          , r = [];
        nle(n),
        this.elements = ka(n),
        this.elementsMap.clear(),
        this.elements.forEach(o=>{
            Ue(o) && r.push(o),
            this.elementsMap.set(o.id, o),
            Lc.mapElementToScene(o, this)
        }
        );
        const i = Y8(this.elements);
        this.nonDeletedElements = i.elements,
        this.nonDeletedElementsMap = i.elementsMap,
        this.frames = r,
        this.nonDeletedFramesLikes = Y8(this.frames).elements,
        this.triggerUpdate()
    }
    triggerUpdate() {
        this.sceneNonce = nc();
        for (const t of Array.from(this.callbacks))
            t()
    }
    onUpdate(t) {
        if (this.callbacks.has(t))
            throw new Error;
        return this.callbacks.add(t),
        ()=>{
            if (!this.callbacks.has(t))
                throw new Error;
            this.callbacks.delete(t)
        }
    }
    destroy() {
        this.elements = [],
        this.nonDeletedElements = [],
        this.nonDeletedFramesLikes = [],
        this.frames = [],
        this.elementsMap.clear(),
        this.selectedElementsCache.selectedElementIds = null,
        this.selectedElementsCache.elements = null,
        this.selectedElementsCache.cache.clear(),
        Lc.sceneMapById.forEach((t,n)=>{
            t === this && Lc.sceneMapById.delete(n)
        }
        ),
        this.callbacks.clear()
    }
    insertElementAtIndex(t, n) {
        if (!Number.isFinite(n) || n < 0)
            throw new Error("insertElementAtIndex can only be called with index >= 0");
        const r = [...this.elements.slice(0, n), t, ...this.elements.slice(n)];
        Ko(r, De([t])),
        this.replaceAllElements(r)
    }
    insertElementsAtIndex(t, n) {
        if (!t.length)
            return;
        if (!Number.isFinite(n) || n < 0)
            throw new Error("insertElementAtIndex can only be called with index >= 0");
        const r = [...this.elements.slice(0, n), ...t, ...this.elements.slice(n)];
        Ko(r, De(t)),
        this.replaceAllElements(r)
    }
    getElementIndex(t) {
        return this.elements.findIndex(n=>n.id === t)
    }
}
;
D(Lc, "sceneMapByElement", new WeakMap),
D(Lc, "sceneMapById", new Map);
let hi = Lc;
const ue = (e,t,n=!0)=>{
    var s;
    let r = !1;
    const {points: i, fileId: o} = t;
    typeof i < "u" && (t = {
        ...up(i),
        ...t
    });
    for (const a in t) {
        const l = t[a];
        if (typeof l < "u") {
            if (e[a] === l && (typeof l != "object" || l === null || a === "groupIds" || a === "scale"))
                continue;
            if (a === "scale") {
                const c = e[a]
                  , u = l;
                if (c[0] === u[0] && c[1] === u[1])
                    continue
            } else if (a === "points") {
                const c = e[a]
                  , u = l;
                if (c.length === u.length) {
                    let f = !1
                      , h = c.length;
                    for (; --h; ) {
                        const m = c[h]
                          , v = u[h];
                        if (m[0] !== v[0] || m[1] !== v[1]) {
                            f = !0;
                            break
                        }
                    }
                    if (!f)
                        continue
                }
            }
            e[a] = l,
            r = !0
        }
    }
    return r && ((typeof t.height < "u" || typeof t.width < "u" || typeof o < "u" || typeof i < "u") && Yt.delete(e),
    e.version++,
    e.versionNonce = nc(),
    e.updated = Pf(),
    n && ((s = hi.getScene(e)) == null || s.triggerUpdate())),
    e
}
  , Ne = (e,t,n=!1)=>{
    let r = !1;
    for (const i in t) {
        const o = t[i];
        if (typeof o < "u") {
            if (e[i] === o && (typeof o != "object" || o === null))
                continue;
            r = !0
        }
    }
    return !r && !n ? e : {
        ...e,
        ...t,
        updated: Pf(),
        version: e.version + 1,
        versionNonce: nc()
    }
}
  , sy = (e,t)=>(e.version = (t ?? e.version) + 1,
e.versionNonce = nc(),
e.updated = Pf(),
e)
  , bu = e=>je(e) || Di(e) ? e.points.length < 2 : e.width === 0 && e.height === 0
  , N2 = (e,t,n,r,i)=>{
    const [o,s,a,l] = Yl(e, i)
      , c = zt({
        clientX: r.offsetLeft,
        clientY: r.offsetTop
    }, r)
      , u = zt({
        clientX: r.offsetLeft + t,
        clientY: r.offsetTop + n
    }, r);
    return c.x <= a && c.y <= l && u.x >= o && u.y >= s
}
  , ab = (e,t,n,r,i,o)=>{
    const [s,a,l,c] = xt(e, i)
      , u = zt({
        clientX: r.offsetLeft + ((o == null ? void 0 : o.left) || 0),
        clientY: r.offsetTop + ((o == null ? void 0 : o.top) || 0)
    }, r)
      , f = zt({
        clientX: r.offsetLeft + t - ((o == null ? void 0 : o.right) || 0),
        clientY: r.offsetTop + n - ((o == null ? void 0 : o.bottom) || 0)
    }, r);
    return s >= u.x && a >= u.y && l <= f.x && c <= f.y
}
  , K8 = (e,t,n)=>{
    const r = Math.abs(t)
      , i = Math.abs(n);
    if (e === "line" || e === "arrow" || e === "freedraw") {
        const o = Math.round(Math.atan(i / r) / Ul) * Ul;
        o === 0 ? n = 0 : o === Math.PI / 2 ? t = 0 : n = r * Math.tan(o) * Math.sign(n) || n
    } else
        e !== "selection" && (n = r * Math.sign(n));
    return {
        width: t,
        height: n
    }
}
  , L_ = (e,t,n,r)=>{
    let i = n - e
      , o = r - t;
    const s = Math.round(Math.atan(o / i) / Ul) * Ul;
    if (s === 0)
        o = 0;
    else if (s === Math.PI / 2)
        i = 0;
    else {
        const a = Math.tan(s)
          , l = -1
          , c = t - a * e
          , u = -1 / a
          , f = -1
          , h = r - u * n
          , m = (l * h - f * c) / (a * f - u * l)
          , v = (c * u - h * a) / (a * f - u * l);
        i = m - e,
        o = v - t
    }
    return {
        width: i,
        height: o
    }
}
  , CN = e=>{
    const t = {
        width: e.width,
        height: e.height,
        x: e.x,
        y: e.y
    };
    if (e.width < 0) {
        const n = Math.abs(e.width);
        t.width = n,
        t.x = e.x - n
    }
    if (e.height < 0) {
        const n = Math.abs(e.height);
        t.height = n,
        t.y = e.y - n
    }
    return t
}
  , X8 = {
    mouse: 8,
    pen: 16,
    touch: 28
}
  , ile = 16
  , kN = {
    e: !0,
    s: !0,
    n: !0,
    w: !0
}
  , Z8 = {
    e: !0,
    s: !0,
    n: !0,
    w: !0,
    nw: !0,
    se: !0
}
  , lb = {
    e: !0,
    s: !0,
    n: !0,
    w: !0
}
  , qs = (e,t,n,r,i,o,s)=>{
    const [a,l] = Xe(e + n / 2, t + r / 2, i, o, s);
    return [a - n / 2, l - r / 2, n, r]
}
  , C4 = e=>!(e.viewport.isMobile || e.isTouchScreen && (lq || $P))
  , xg = e=>C4(e) ? kN : {}
  , k4 = ([e,t,n,r,i,o],s,a,l,c={},u=4)=>{
    const f = X8[l]
      , h = f / a.value
      , m = f / a.value
      , v = f / a.value
      , y = f / a.value
      , E = n - e
      , b = r - t
      , _ = u / a.value
      , x = (f - au * 2) / (2 * a.value)
      , C = {
        nw: c.nw ? void 0 : qs(e - _ - v + x, t - _ - y + x, h, m, i, o, s),
        ne: c.ne ? void 0 : qs(n + _ - x, t - _ - y + x, h, m, i, o, s),
        sw: c.sw ? void 0 : qs(e - _ - v + x, r + _ - x, h, m, i, o, s),
        se: c.se ? void 0 : qs(n + _ - x, r + _ - x, h, m, i, o, s),
        rotation: c.rotation ? void 0 : qs(e + E / 2 - h / 2, t - _ - y + x - ile / a.value, h, m, i, o, s)
    }
      , P = 5 * X8.mouse / a.value;
    return Math.abs(E) > P && (c.n || (C.n = qs(e + E / 2 - h / 2, t - _ - y + x, h, m, i, o, s)),
    c.s || (C.s = qs(e + E / 2 - h / 2, r + _ - x, h, m, i, o, s))),
    Math.abs(b) > P && (c.w || (C.w = qs(e - _ - v + x, t + b / 2 - m / 2, h, m, i, o, s)),
    c.e || (C.e = qs(n + _ - x, t + b / 2 - m / 2, h, m, i, o, s))),
    C
}
  , TN = (e,t,n,r="mouse",i=kN)=>{
    if (e.locked || He(e))
        return {};
    if (e.type === "freedraw" || je(e)) {
        if (e.points.length === 2) {
            const [,s] = e.points;
            s[0] === 0 || s[1] === 0 ? i = lb : s[0] > 0 && s[1] < 0 ? i = Z8 : s[0] > 0 && s[1] > 0 ? i = lb : s[0] < 0 && s[1] > 0 ? i = Z8 : s[0] < 0 && s[1] < 0 && (i = lb)
        }
    } else
        Ue(e) && (i = {
            ...i,
            rotation: !0
        });
    const o = je(e) ? au + 8 : au;
    return k4(Ke(e, n, !0), e.angle, t, r, i, o)
}
  , AN = (e,t)=>{
    if (t.editingLinearElement)
        return !1;
    if (e.length > 1)
        return !0;
    const n = e[0];
    return He(n) ? !1 : je(n) ? n.points.length > 2 : !0
}
  , P_ = (e,t,n)=>t >= e[0] && t <= e[0] + e[2] && n >= e[1] && n <= e[1] + e[3]
  , ole = (e,t,n,r,i,o,s,a)=>{
    if (!n.selectedElementIds[e.id])
        return !1;
    const {rotation: l, ...c} = TN(e, o, t, s, xg(a));
    if (l && P_(l, r, i))
        return "rotation";
    const u = Object.keys(c).filter(f=>{
        const h = c[f];
        return h ? P_(h, r, i) : !1
    }
    );
    if (u.length > 0)
        return u[0];
    if (C4(a)) {
        const [f,h,m,v,y,E] = Ke(e, t);
        if (!(je(e) && e.points.length <= 2)) {
            const b = p6 / o.value
              , _ = MN([f - b, h - b], [m + b, v + b], [y, E], Oa(e.angle));
            for (const [x,C] of Object.entries(_))
                if (Yp([r, i], C, b))
                    return x
        }
    }
    return !1
}
  , q8 = (e,t,n,r,i,o,s,a)=>e.reduce((l,c)=>{
    if (l)
        return l;
    const u = ole(c, s, t, n, r, i, o, a);
    return u ? {
        element: c,
        transformHandleType: u
    } : null
}
, null)
  , Q8 = ([e,t,n,r],i,o,s,a,l)=>{
    const c = k4([e, t, n, r, (e + n) / 2, (t + r) / 2], 0, s, a, xg(l))
      , u = Object.keys(c).find(f=>{
        const h = c[f];
        return h && P_(h, i, o)
    }
    );
    if (u)
        return u;
    if (C4(l)) {
        const f = (e + n) / 2
          , h = (t + r) / 2
          , m = p6 / s.value
          , v = MN([e - m, t - m], [n + m, r + m], [f, h], Oa(0));
        for (const [y,E] of Object.entries(v))
            if (Yp([i, o], E, m))
                return y
    }
    return !1
}
  , cb = ["ns", "nesw", "ew", "nwse"]
  , sle = (e,t)=>{
    const n = cb.indexOf(e);
    if (n >= 0) {
        const r = Math.round(t / (Math.PI / 4));
        e = cb[(n + r) % cb.length]
    }
    return e
}
  , J8 = e=>{
    const {element: t, transformHandleType: n} = e
      , r = t && Math.sign(t.height) * Math.sign(t.width) === -1;
    let i = null;
    switch (n) {
    case "n":
    case "s":
        i = "ns";
        break;
    case "w":
    case "e":
        i = "ew";
        break;
    case "nw":
    case "se":
        r ? i = "nesw" : i = "nwse";
        break;
    case "ne":
    case "sw":
        r ? i = "nwse" : i = "nesw";
        break;
    case "rotation":
        return "grab"
    }
    return i && t && (i = sle(i, t.angle)),
    i ? `${i}-resize` : ""
}
  , MN = ([e,t],[n,r],i,o)=>{
    const s = Cn([e, t], o, i)
      , a = Cn([n, t], o, i)
      , l = Cn([e, r], o, i)
      , c = Cn([n, r], o, i);
    return {
        n: [s, a],
        e: [a, c],
        s: [c, l],
        w: [l, s]
    }
}
  , F2 = e=>e < 0 ? e + 2 * Math.PI : e >= 2 * Math.PI ? e - 2 * Math.PI : e
  , ale = (e,t,n,r,i,o,s,a,l,c,u)=>{
    if (n.length === 1) {
        const [f] = n;
        return t === "rotation" ? He(f) || (lle(f, r, a, l, i),
        vo(f, r)) : ye(f) && t ? (cle(e, f, r, t, o, a, l),
        vo(f, r)) : t && ule(e, s, f, r, t, o, a, l),
        !0
    } else if (n.length > 1) {
        if (t === "rotation")
            return dle(e, n, r, a, l, i, c, u),
            !0;
        if (t)
            return LN(e, n, r, t, o, s, a, l),
            !0
    }
    return !1
}
  , lle = (e,t,n,r,i)=>{
    var m;
    const [o,s,a,l] = Ke(e, t)
      , c = (o + a) / 2
      , u = (s + l) / 2;
    let f;
    Ue(e) ? f = 0 : (f = 5 * Math.PI / 2 + Math.atan2(r - u, n - c),
    i && (f += Ul / 2,
    f -= f % Ul),
    f = F2(f));
    const h = jl(e);
    if (ue(e, {
        angle: f
    }),
    h) {
        const v = (m = hi.getScene(e)) == null ? void 0 : m.getElement(h);
        v && !Be(e) && ue(v, {
            angle: f
        })
    }
}
  , T4 = (e,t,n,r)=>je(e) || Di(e) ? {
    points: gf(0, t, gf(1, n, e.points, r), r)
} : {}
  , ay = (e,t,n)=>{
    let r = e.width;
    if (Sn(e)) {
        const s = Hr(e, t);
        s && (r = jo(s, e))
    }
    const o = e.fontSize * (n / r);
    return o < g6 ? null : {
        size: o
    }
}
  , cle = (e,t,n,r,i,o,s)=>{
    const [a,l,c,u,f,h] = Ke(t, n)
      , [m,v] = Xe(o, s, f, h, -t.angle);
    let y = 0
      , E = 0;
    r !== "e" && r !== "w" && (r.includes("e") && (y = (m - a) / (c - a)),
    r.includes("w") && (y = (c - m) / (c - a)),
    r.includes("n") && (E = (u - v) / (u - l)),
    r.includes("s") && (E = (v - l) / (u - l)));
    const b = Math.max(y, E);
    if (b > 0) {
        const _ = t.width * b
          , x = t.height * b
          , C = ay(t, n, _);
        if (C === null)
            return;
        const P = [a, l]
          , M = [c, u]
          , A = [f, h];
        let I = [a, l];
        if (["n", "w", "nw"].includes(r) && (I = [M[0] - Math.abs(_), M[1] - Math.abs(x)]),
        r === "ne") {
            const re = [P[0], M[1]];
            I = [re[0], re[1] - Math.abs(x)]
        }
        if (r === "sw") {
            const re = [M[0], P[1]];
            I = [re[0] - Math.abs(_), re[1]]
        }
        ["s", "n"].includes(r) && (I[0] = A[0] - _ / 2),
        ["e", "w"].includes(r) && (I[1] = A[1] - x / 2),
        i && (I[0] = A[0] - Math.abs(_) / 2,
        I[1] = A[1] - Math.abs(x) / 2);
        const O = t.angle
          , N = Ae(I, [f, h], O)
          , $ = [I[0] + Math.abs(_) / 2, I[1] + Math.abs(x) / 2]
          , V = Ae($, [f, h], O);
        I = Ae(N, V, -O);
        const [z,j] = I;
        ue(t, {
            fontSize: C.size,
            width: _,
            height: x,
            x: z,
            y: j
        })
    }
    if (r === "e" || r === "w") {
        const _ = e.get(t.id)
          , [x,C,P,M] = Jc(_, _.width, _.height, !0)
          , A = [x, C]
          , I = [P, M]
          , O = L2(A, I)
          , N = Ae([o, s], O, -_.angle)
          , [$,,V] = Jc(t, t.width, t.height, !0)
          , z = V - $
          , j = I[0] - A[0]
          , re = S4(Ht({
            fontSize: t.fontSize,
            fontFamily: t.fontFamily
        }), t.lineHeight);
        let se = j / z;
        r.includes("e") && (se = (N[0] - A[0]) / z),
        r.includes("w") && (se = (I[0] - N[0]) / z);
        const ae = t.width * se < re ? re : t.width * se
          , q = Ru(t.originalText, Ht(t), Math.abs(ae))
          , K = Oi(q, Ht(t), t.lineHeight)
          , G = K.height
          , [H,J,te,oe] = Jc(_, ae, G, !0)
          , de = te - H
          , pe = oe - J;
        let be = [...A];
        ["n", "w", "nw"].includes(r) && (be = [I[0] - Math.abs(de), A[1]]);
        const tt = _.angle
          , Je = Ae(be, O, tt)
          , nt = [be[0] + Math.abs(de) / 2, be[1] + Math.abs(pe) / 2]
          , ot = Ae(nt, O, tt);
        be = Ae(Je, ot, -tt);
        const kt = {
            width: Math.abs(ae),
            height: Math.abs(K.height),
            x: be[0],
            y: be[1],
            text: q,
            autoResize: !1
        };
        ue(t, kt)
    }
}
  , ule = (e,t,n,r,i,o,s,a)=>{
    const l = e.get(n.id)
      , [c,u,f,h] = Jc(l, l.width, l.height, !0)
      , m = [c, u]
      , v = [f, h]
      , y = L2(m, v)
      , E = Ae([s, a], y, -l.angle)
      , [b,_,x,C] = Jc(n, n.width, n.height, !0)
      , P = x - b
      , M = C - _
      , A = v[0] - m[0]
      , I = v[1] - m[1];
    let O = A / P
      , N = I / M
      , $ = {};
    const V = Ge(n, r);
    i.includes("e") && (O = (E[0] - m[0]) / P),
    i.includes("s") && (N = (E[1] - m[1]) / M),
    i.includes("w") && (O = (v[0] - E[0]) / P),
    i.includes("n") && (N = (v[1] - E[1]) / M);
    const z = l.width
      , j = l.height;
    let re = n.width * O
      , se = n.height * N;
    if (o && (re = 2 * re - z,
    se = 2 * se - j),
    t) {
        const Rn = Math.abs(re) / z
          , Tr = Math.abs(se) / j;
        if (i.length === 1 && (se *= Rn,
        re *= Tr),
        i.length === 2) {
            const Dn = Math.max(Rn, Tr);
            re = z * Dn * Math.sign(re),
            se = j * Dn * Math.sign(se)
        }
    }
    if (V) {
        const Rn = e.get(V.id);
        if (Rn && ($ = {
            fontSize: Rn.fontSize
        }),
        t) {
            const Tr = {
                ...n,
                width: re,
                height: se
            }
              , Dn = ay(V, r, jo(Tr, V));
            if (Dn === null)
                return;
            $ = {
                fontSize: Dn.size
            }
        } else {
            const Tr = x4(Ht(V), V.lineHeight)
              , Dn = b4(V.fontSize, V.lineHeight);
            re = Math.max(re, Tr),
            se = Math.max(se, Dn)
        }
    }
    const [ae,q,K,G] = Jc(l, re, se, !0)
      , H = K - ae
      , J = G - q;
    let te = [...m];
    if (["n", "w", "nw"].includes(i) && (te = [v[0] - Math.abs(H), v[1] - Math.abs(J)]),
    i === "ne") {
        const Rn = [m[0], v[1]];
        te = [Rn[0], Rn[1] - Math.abs(J)]
    }
    if (i === "sw") {
        const Rn = [v[0], m[1]];
        te = [Rn[0] - Math.abs(H), Rn[1]]
    }
    t && (["s", "n"].includes(i) && (te[0] = y[0] - H / 2),
    ["e", "w"].includes(i) && (te[1] = y[1] - J / 2));
    const oe = re < 0
      , de = se < 0;
    oe && (i.includes("e") && (te[0] -= Math.abs(H)),
    i.includes("w") && (te[0] += Math.abs(H))),
    de && (i.includes("s") && (te[1] -= Math.abs(J)),
    i.includes("n") && (te[1] += Math.abs(J))),
    o && (te[0] = y[0] - Math.abs(H) / 2,
    te[1] = y[1] - Math.abs(J) / 2);
    const pe = l.angle
      , be = Ae(te, y, pe)
      , tt = [te[0] + Math.abs(H) / 2, te[1] + Math.abs(J) / 2]
      , Je = Ae(tt, y, pe);
    te = Ae(be, Je, -pe);
    const nt = [...te]
      , ot = l.x - ae
      , kt = l.y - q;
    nt[0] += ot,
    nt[1] += kt;
    const dr = nt[0]
      , Wt = nt[1];
    let fr, kr;
    (je(n) || Di(n)) && (fr = gf(1, se, l.points, !0),
    kr = gf(0, re, fr, !0));
    const Vn = {
        width: Math.abs(re),
        height: Math.abs(se),
        x: dr,
        y: Wt,
        points: kr
    };
    if ("scale"in n && "scale"in l && ue(n, {
        scale: [(Math.sign(K - l.x) || l.scale[0]) * l.scale[0], (Math.sign(G - l.y) || l.scale[1]) * l.scale[1]]
    }),
    Be(n) && V && t) {
        const Rn = Vn.width / n.width * V.fontSize;
        if (Rn < g6)
            return;
        $.fontSize = Rn
    }
    Vn.width !== 0 && Vn.height !== 0 && Number.isFinite(Vn.x) && Number.isFinite(Vn.y) && (ue(n, Vn),
    vo(n, r, {
        oldSize: {
            width: l.width,
            height: l.height
        }
    }),
    V && $ != null && ue(V, {
        fontSize: $.fontSize
    }),
    Hf(n, r, i, t))
}
  , LN = (e,t,n,r,i,o,s,a)=>{
    var q;
    const l = t.reduce((K,G)=>{
        const H = e.get(G.id);
        return H && K.push({
            orig: H,
            latest: G
        }),
        K
    }
    , [])
      , c = l.reduce((K,{orig: G})=>{
        if (!je(G))
            return K;
        const H = jl(G);
        if (!H)
            return K;
        const J = e.get(H) ?? null;
        if (!Sn(J))
            return K;
        const te = ke.getBoundTextElementPosition(G, J, n);
        return [...K, {
            ...J,
            ...te
        }]
    }
    , [])
      , {minX: u, minY: f, maxX: h, maxY: m, midX: v, midY: y} = pa(l.map(({orig: K})=>K).concat(c))
      , E = h - u
      , b = m - f
      , _ = r
      , x = {
        ne: [u, m],
        se: [u, f],
        sw: [h, f],
        nw: [h, m],
        e: [u, f + b / 2],
        w: [h, f + b / 2],
        n: [u + E / 2, m],
        s: [u + E / 2, f]
    }
      , [C,P] = i ? [v, y] : x[_]
      , M = i ? 2 : 1
      , A = Math.max(Math.abs(s - C) / E || 0, Math.abs(a - P) / b || 0) * M;
    if (A === 0)
        return;
    let I = _.includes("e") || _.includes("w") ? Math.abs(s - C) / E * M : 1
      , O = _.includes("n") || _.includes("s") ? Math.abs(a - P) / b * M : 1;
    const N = o || l.some(K=>K.latest.angle !== 0 || ye(K.latest) || ff(K.latest));
    N && (I = A,
    O = A);
    const $ = {
        ne: [s < C, a > P],
        se: [s < C, a < P],
        sw: [s > C, a < P],
        nw: [s > C, a > P],
        e: [s < C, !1],
        w: [s > C, !1],
        n: [!1, a > P],
        s: [!1, a < P]
    }
      , [V,z] = $[_].map(K=>K ? -1 : 1)
      , j = V < 0
      , re = z < 0
      , se = [];
    for (const {orig: K, latest: G} of l) {
        if (ye(K) && Sn(K))
            continue;
        const H = K.width * I
          , J = K.height * O
          , te = F2(K.angle * V * z)
          , oe = je(K) || Di(K)
          , de = K.x - C
          , pe = K.y - P
          , be = j && !oe ? H : 0
          , tt = re && !oe ? J : 0
          , Je = C + V * (de * I + be)
          , nt = P + z * (pe * O + tt)
          , ot = T4(K, H * V, J * z, !1)
          , kt = {
            x: Je,
            y: nt,
            width: H,
            height: J,
            angle: te,
            ...ot
        };
        if (ga(K) && (kt.scale = [K.scale[0] * V, K.scale[1] * z]),
        ye(K)) {
            const Wt = ay(K, n, H);
            if (!Wt)
                return;
            kt.fontSize = Wt.size
        }
        const dr = e.get(jl(K) ?? "");
        if (dr)
            if (N) {
                const Wt = dr.fontSize * A;
                if (Wt < g6)
                    return;
                kt.boundTextFontSize = Wt
            } else
                kt.boundTextFontSize = dr.fontSize;
        se.push({
            element: G,
            update: kt
        })
    }
    const ae = se.map(({element: K})=>K);
    for (const {element: K, update: {boundTextFontSize: G, ...H}} of se) {
        const {angle: J} = H
          , {width: te, height: oe} = K;
        ue(K, H, !1),
        Be(K) && He(K) && wu(K, n, K.points, void 0, void 0, {
            informMutation: !1
        }),
        vo(K, n, {
            simultaneouslyUpdated: ae,
            oldSize: {
                width: te,
                height: oe
            }
        });
        const de = Ge(K, n);
        de && G && (ue(de, {
            fontSize: G,
            angle: je(K) ? void 0 : J
        }, !1),
        Hf(K, n, r, !0))
    }
    (q = hi.getScene(se[0].element)) == null || q.triggerUpdate()
}
  , dle = (e,t,n,r,i,o,s,a)=>{
    var c;
    let l = 5 * Math.PI / 2 + Math.atan2(i - a, r - s);
    o && (l += Ul / 2,
    l -= l % Ul),
    t.filter(u=>!Ue(u)).forEach(u=>{
        var P;
        const [f,h,m,v] = Ke(u, n)
          , y = (f + m) / 2
          , E = (h + v) / 2
          , b = ((P = e.get(u.id)) == null ? void 0 : P.angle) ?? u.angle
          , [_,x] = Xe(y, E, s, a, l + b - u.angle);
        if (Be(u) && He(u)) {
            const M = roe(u, n);
            wu(u, n, M)
        } else
            ue(u, {
                x: u.x + (_ - y),
                y: u.y + (x - E),
                angle: F2(l + b)
            }, !1);
        vo(u, n, {
            simultaneouslyUpdated: t
        });
        const C = Ge(u, n);
        C && !Be(u) && ue(C, {
            x: C.x + (_ - y),
            y: C.y + (x - E),
            angle: F2(l + b)
        }, !1)
    }
    ),
    (c = hi.getScene(t[0])) == null || c.triggerUpdate()
}
  , fle = (e,t,n,r,i)=>{
    const [o,s,a,l] = t.length === 1 ? Ke(t[0], n) : xt(t)
      , c = (o + a) / 2
      , u = (s + l) / 2
      , f = t.length === 1 ? t[0].angle : 0;
    switch ([r,i] = Xe(r, i, c, u, -f),
    e) {
    case "n":
        return Xe(r - (o + a) / 2, i - s, 0, 0, f);
    case "s":
        return Xe(r - (o + a) / 2, i - l, 0, 0, f);
    case "w":
        return Xe(r - o, i - (s + l) / 2, 0, 0, f);
    case "e":
        return Xe(r - a, i - (s + l) / 2, 0, 0, f);
    case "nw":
        return Xe(r - o, i - s, 0, 0, f);
    case "ne":
        return Xe(r - a, i - s, 0, 0, f);
    case "sw":
        return Xe(r - o, i - l, 0, 0, f);
    case "se":
        return Xe(r - a, i - l, 0, 0, f);
    default:
        return [0, 0]
    }
}
  , hle = (e,t)=>{
    const [,[n,r]] = t.points;
    return e === "nw" && (n < 0 || r < 0) || e === "ne" && n >= 0 || e === "sw" && n <= 0 || e === "se" && (n > 0 || r > 0) ? "end" : "origin"
}
  , gle = (e,t,n,r,i,o)=>{
    if (t.length === 1 && Be(t[0]) && He(t[0]) && (t[0].startBinding || t[0].endBinding))
        return;
    const s = t.filter(f=>!(Be(f) && He(f) && f.startBinding && f.endBinding))
      , a = new Set(s)
      , l = s.filter(f=>Ue(f)).map(f=>f.id);
    if (l.length > 0)
        for (const f of r.getNonDeletedElements())
            f.frameId !== null && l.includes(f.frameId) && a.add(f);
    const c = xt(Array.from(a).map(f=>e.originalElements.get(f.id) ?? f))
      , u = ple(c, n, i, o);
    a.forEach(f=>{
        if (eA(e, f, u),
        !Be(f)) {
            const h = Ge(f, r.getNonDeletedElementsMap());
            h && eA(e, h, u)
        }
        vo(f, r.getElementsMapIncludingDeleted(), {
            simultaneouslyUpdated: Array.from(a)
        })
    }
    )
}
  , ple = (e,t,n,r)=>{
    const [i,o] = e;
    let s = i + t.x + n.x
      , a = o + t.y + n.y;
    if (n.x === 0 || n.y === 0) {
        const [l,c] = er(i + t.x, o + t.y, r);
        n.x === 0 && (s = l),
        n.y === 0 && (a = c)
    }
    return {
        x: s - i,
        y: a - o
    }
}
  , eA = (e,t,n)=>{
    const r = e.originalElements.get(t.id) ?? t
      , i = r.x + n.x
      , o = r.y + n.y;
    ue(t, {
        x: i,
        y: o
    })
}
  , mle = (e,t,n)=>{
    const [r,i] = xt(e);
    return [t - r, n - i]
}
  , tA = (e,t,n,r,i,o,s,a,l,c,u,f,h=null)=>{
    l && e.type !== "selection" && (f ? a = s / f : (Math.abs(o - r) > Math.abs(i - n) ? {width: s, height: a} = K8(t, a, i < n ? -s : s) : {width: s, height: a} = K8(t, s, o < r ? -a : a),
    a < 0 && (a = -a)));
    let m = i < n ? n - s : n
      , v = o < r ? r - a : r;
    c && (s += s,
    a += a,
    m = n - s / 2,
    v = r - a / 2);
    let y = null;
    if (ye(e)) {
        a = e.height;
        const E = S4(Ht({
            fontSize: e.fontSize,
            fontFamily: e.fontFamily
        }), e.lineHeight);
        s = Math.max(s, E),
        Math.abs(i - n) > fq / u && (y = {
            autoResize: !1
        }),
        v = r,
        c && (m = n - s / 2)
    }
    s !== 0 && a !== 0 && ue(e, {
        x: m + ((h == null ? void 0 : h.x) ?? 0),
        y: v + ((h == null ? void 0 : h.y) ?? 0),
        width: s,
        height: a,
        ...y
    })
}
  , A4 = (e,t)=>!!(!e.viewModeEnabled && (e.activeTool.type !== "custom" && (e.editingElement || e.activeTool.type !== "selection" && e.activeTool.type !== "eraser" && e.activeTool.type !== "hand" && e.activeTool.type !== "laser") || dt(t, e).length))
  , ul = e=>e.reduce((t,n)=>t + n.version, 0)
  , vle = e=>{
    let t = 5381;
    for (let n = 0; n < e.length; n++)
        t = (t << 5) + t + e[n].versionNonce;
    return t >>> 0
}
  , yle = e=>{
    let t = 5381;
    for (let n = 0; n < e.length; n++) {
        const r = e.charCodeAt(n);
        t = (t << 5) + t + r
    }
    return t >>> 0
}
  , wle = e=>e.filter(t=>!t.isDeleted && !bu(t))
  , Nt = e=>e.filter(t=>!t.isDeleted)
  , R_ = e=>!e.isDeleted
  , M4 = e=>Nt(e).map(t=>M6(t.type) ? {
    ...t,
    lastCommittedPoint: null
} : t)
  , Ele = e=>M4(e)
  , PN = e=>M4(e)
  , RN = e=>M4(e)
  , ly = e=>{
    const t = new Set;
    return e.forEach(n=>{
        Ue(n) && t.add(n.id)
    }
    ),
    e.filter(n=>!(n.frameId && t.has(n.frameId)))
}
  , L4 = (e,t,n,r=!0)=>{
    const [i,o,s,a] = Ke(t, n);
    let l = e.filter(c=>{
        let[u,f,h,m] = Yl(c, n);
        const v = Pi(c, n);
        if (v) {
            const [y,E,b,_] = Yl(v, n);
            u = Math.max(y, u),
            f = Math.max(E, f),
            h = Math.min(b, h),
            m = Math.min(_, m)
        }
        return c.locked === !1 && c.type !== "selection" && !Sn(c) && i <= u && o <= f && s >= h && a >= m
    }
    );
    return l = r ? ly(l) : l,
    l = l.filter(c=>{
        const u = Pi(c, n);
        return u ? Vl(c, u, n) : !0
    }
    ),
    l
}
  , DN = (e,t,n,r)=>{
    const i = new Set(t.map(o=>o.id));
    return e.filter(o=>{
        const s = N2(o, n.width, n.height, n, r);
        return !i.has(o.id) && s
    }
    )
}
  , Mn = function() {
    let e = null
      , t = null
      , n = null;
    const r = (i,o)=>(n != null && i === e && o.selectedElementIds === t || (n = i.some(s=>o.selectedElementIds[s.id]),
    e = i,
    t = o.selectedElementIds),
    n);
    return r.clearCache = ()=>{
        e = null,
        t = null,
        n = null
    }
    ,
    r
}()
  , ble = (e,t,n)=>{
    const r = Array.from(new Set(dt(e, t).map(i=>n(i))));
    return r.length === 1 ? r[0] : null
}
  , dt = (e,t,n)=>{
    const r = [];
    for (const i of e.values()) {
        if (t.selectedElementIds[i.id]) {
            r.push(i);
            continue
        }
        if (n != null && n.includeBoundTextElement && Sn(i) && t.selectedElementIds[i == null ? void 0 : i.containerId]) {
            r.push(i);
            continue
        }
    }
    if (n != null && n.includeElementsInFrames) {
        const i = [];
        return r.forEach(o=>{
            Ue(o) && Ia(e, o.id).forEach(s=>i.push(s)),
            i.push(o)
        }
        ),
        i
    }
    return r
}
  , ON = (e,t)=>t.editingElement ? [t.editingElement] : dt(e, t, {
    includeBoundTextElement: !0
})
  , vt = (e,t)=>Xn(t.selectedElementIds, e) ? t.selectedElementIds : e
  , _le = (e,t)=>{
    const [n,r,i,o] = t
      , {x: s, y: a} = Bo({
        sceneX: n,
        sceneY: r
    }, e)
      , {x: l, y: c} = Bo({
        sceneX: i,
        sceneY: o
    }, e);
    return l - s > e.width || c - a > e.height
}
  , NN = ({scenePoint: e, viewportDimensions: t, zoom: n})=>({
    scrollX: t.width / 2 / n.value - e.x,
    scrollY: t.height / 2 / n.value - e.y
})
  , mp = (e,t)=>{
    if (e = wle(e),
    !e.length)
        return {
            scrollX: 0,
            scrollY: 0
        };
    let[n,r,i,o] = xt(e);
    _le(t, [n, r, i, o]) && ([n,r,i,o] = xae(e, zt({
        clientX: t.scrollX,
        clientY: t.scrollY
    }, t)));
    const s = (n + i) / 2
      , a = (r + o) / 2;
    return NN({
        scenePoint: {
            x: s,
            y: a
        },
        viewportDimensions: {
            width: t.width,
            height: t.height
        },
        zoom: t.zoom
    })
}
  , bs = e=>yu(Mae(e, 6), VP, YP)
  , xle = e=>yu(Math.round(e), 1, 100)
  , FN = e=>yu(Math.round(e), 1, 100)
  , Ta = ({size: e="1em", circleWidth: t=8, synchronized: n=!1})=>{
    const i = -(ve.useRef(Date.now()).current % 1600);
    return g("div", {
        className: "Spinner",
        children: g("svg", {
            viewBox: "0 0 100 100",
            style: {
                width: e,
                height: e,
                "--spinner-delay": n ? `${i}ms` : 0
            },
            children: g("circle", {
                cx: "50",
                cy: "50",
                r: 50 - t / 2,
                strokeWidth: t,
                fill: "none",
                strokeMiterlimit: "10"
            })
        })
    })
}
  , lt = ve.forwardRef((e,t)=>{
    const {id: n} = Ns()
      , r = ve.useRef(null);
    ve.useImperativeHandle(t, ()=>r.current);
    const i = `ToolIcon_size_${e.size}`
      , [o,s] = T.useState(!1)
      , a = T.useRef(!0)
      , l = async u=>{
        var h;
        const f = "onClick"in e && ((h = e.onClick) == null ? void 0 : h.call(e, u));
        if ($p(f))
            try {
                s(!0),
                await f
            } catch (m) {
                if (m instanceof df)
                    console.warn(m);
                else
                    throw m
            } finally {
                a.current && s(!1)
            }
    }
    ;
    T.useEffect(()=>(a.current = !0,
    ()=>{
        a.current = !1
    }
    ), []);
    const c = T.useRef(null);
    if (e.type === "button" || e.type === "icon" || e.type === "submit") {
        const u = e.type === "icon" ? "button" : e.type;
        return L("button", {
            className: xe("ToolIcon_type_button", i, e.className, e.visible && !e.hidden ? "ToolIcon_type_button--show" : "ToolIcon_type_button--hide", {
                ToolIcon: !e.hidden,
                "ToolIcon--selected": e.selected,
                "ToolIcon--plain": e.type === "icon"
            }),
            style: e.style,
            "data-testid": e["data-testid"],
            hidden: e.hidden,
            title: e.title,
            "aria-label": e["aria-label"],
            type: u,
            onClick: l,
            ref: r,
            disabled: o || e.isLoading || !!e.disabled,
            children: [(e.icon || e.label) && L("div", {
                className: "ToolIcon__icon",
                "aria-hidden": "true",
                "aria-disabled": !!e.disabled,
                children: [e.icon || e.label, e.keyBindingLabel && g("span", {
                    className: "ToolIcon__keybinding",
                    children: e.keyBindingLabel
                }), e.isLoading && g(Ta, {})]
            }), e.showAriaLabel && L("div", {
                className: "ToolIcon__label",
                children: [e["aria-label"], " ", o && g(Ta, {})]
            }), e.children]
        })
    }
    return L("label", {
        className: xe("ToolIcon", e.className),
        title: e.title,
        onPointerDown: u=>{
            var f;
            c.current = u.pointerType || null,
            (f = e.onPointerDown) == null || f.call(e, {
                pointerType: u.pointerType || null
            })
        }
        ,
        onPointerUp: ()=>{
            requestAnimationFrame(()=>{
                c.current = null
            }
            )
        }
        ,
        children: [g("input", {
            className: `ToolIcon_type_radio ${i}`,
            type: "radio",
            name: e.name,
            "aria-label": e["aria-label"],
            "aria-keyshortcuts": e["aria-keyshortcuts"],
            "data-testid": e["data-testid"],
            id: `${n}-${e.id}`,
            onChange: ()=>{
                var u;
                (u = e.onChange) == null || u.call(e, {
                    pointerType: c.current
                })
            }
            ,
            checked: e.checked,
            ref: r
        }), L("div", {
            className: "ToolIcon__icon",
            children: [e.icon, e.keyBindingLabel && g("span", {
                className: "ToolIcon__keybinding",
                children: e.keyBindingLabel
            })]
        })]
    })
}
);
lt.defaultProps = {
    visible: !0,
    className: "",
    size: "medium"
};
lt.displayName = "ToolButton";
const Sle = (e,t,n)=>{
    const r = n.scene.getNonDeletedElementsMap()
      , i = new Set(dt(e.filter(o=>Ue(o)), t).map(o=>o.id));
    return {
        elements: e.map(o=>t.selectedElementIds[o.id] ? (o.boundElements && o.boundElements.forEach(s=>{
            var l, c;
            const a = n.scene.getNonDeletedElementsMap().get(s.id);
            a && He(a) && (ue(a, {
                startBinding: o.id === ((l = a.startBinding) == null ? void 0 : l.elementId) ? null : a.startBinding,
                endBinding: o.id === ((c = a.endBinding) == null ? void 0 : c.elementId) ? null : a.endBinding
            }),
            wu(a, r, a.points))
        }
        ),
        Ne(o, {
            isDeleted: !0
        })) : o.frameId && i.has(o.frameId) ? Ne(o, {
            isDeleted: !0
        }) : Sn(o) && t.selectedElementIds[o.containerId] ? Ne(o, {
            isDeleted: !0
        }) : o),
        appState: {
            ...t,
            selectedElementIds: {},
            selectedGroupIds: {}
        }
    }
}
  , nA = (e,t)=>{
    if (e.editingGroupId) {
        const n = xn(Nt(t), e.editingGroupId);
        if (n.length)
            return {
                ...e,
                selectedElementIds: {
                    [n[0].id]: !0
                }
            }
    }
    return e
}
  , BN = we({
    name: "deleteSelectedElements",
    label: "labels.delete",
    icon: hf,
    trackEvent: {
        category: "element",
        action: "delete"
    },
    perform: (e,t,n,r)=>{
        if (t.editingLinearElement) {
            const {elementId: s, selectedPointsIndices: a, startBindingElement: l, endBindingElement: c} = t.editingLinearElement
              , u = r.scene.getNonDeletedElementsMap()
              , f = ke.getElement(s, u);
            if (!f || a == null)
                return !1;
            if (f.points.length < 2) {
                const m = e.map(y=>y.id === f.id ? Ne(y, {
                    isDeleted: !0
                }) : y)
                  , v = nA(t, m);
                return {
                    elements: m,
                    appState: {
                        ...v,
                        editingLinearElement: null
                    },
                    storeAction: ee.CAPTURE
                }
            }
            const h = {
                startBindingElement: a != null && a.includes(0) ? null : l,
                endBindingElement: a != null && a.includes(f.points.length - 1) ? null : c
            };
            return ke.deletePoints(f, a, u),
            {
                elements: e,
                appState: {
                    ...t,
                    editingLinearElement: {
                        ...t.editingLinearElement,
                        ...h,
                        selectedPointsIndices: (a == null ? void 0 : a[0]) > 0 ? [a[0] - 1] : [0]
                    }
                },
                storeAction: ee.CAPTURE
            }
        }
        let {elements: i, appState: o} = Sle(e, t, r);
        return eO(i, e.filter(({id: s})=>t.selectedElementIds[s])),
        o = nA(o, i),
        {
            elements: i,
            appState: {
                ...o,
                activeTool: bn(t, {
                    type: "selection"
                }),
                multiElement: null,
                activeEmbeddable: null
            },
            storeAction: Mn(Nt(e), t) ? ee.CAPTURE : ee.NONE
        }
    }
    ,
    keyTest: (e,t,n)=>(e.key === U.BACKSPACE || e.key === U.DELETE) && !e[U.CTRL_OR_CMD],
    PanelComponent: ({elements: e, appState: t, updateData: n})=>g(lt, {
        type: "button",
        icon: hf,
        title: k("labels.delete"),
        "aria-label": k("labels.delete"),
        onClick: ()=>n(null),
        visible: Mn(Nt(e), t)
    })
})
  , D_ = (e,t)=>e.frameId === t || e.id === t
  , zN = (e,t,n)=>{
    let r = []
      , i = []
      , o = null
      , s = -1;
    const a = De(n || dt(e, t, {
        includeBoundTextElement: !0,
        includeElementsInFrames: !0
    }));
    for (; ++s < e.length; ) {
        const l = e[s];
        a.get(l.id) ? (i.length && (r = r.concat(i),
        i = []),
        r.push(s),
        o = s + 1) : l.isDeleted && o === s ? (o = s + 1,
        i.push(s)) : i = []
    }
    return r
}
  , Ile = e=>{
    let t = 0;
    return e.reduce((n,r,i)=>(i > 0 && e[i - 1] !== r - 1 && (t = ++t),
    (n[t] || (n[t] = [])).push(r),
    n), [])
}
  , rA = (e,t,n)=>{
    var r, i;
    if ("containerId"in e && e.containerId) {
        const o = hi.getScene(e).getElement(e.containerId);
        if (o)
            return n === "left" ? Math.min(t.indexOf(o), t.indexOf(e)) : Math.max(t.indexOf(o), t.indexOf(e))
    } else {
        const o = (i = (r = e.boundElements) == null ? void 0 : r.find(s=>s.type !== "arrow")) == null ? void 0 : i.id;
        if (o) {
            const s = hi.getScene(e).getElement(o);
            if (s)
                return n === "left" ? Math.min(t.indexOf(s), t.indexOf(e)) : Math.max(t.indexOf(s), t.indexOf(e))
        }
    }
}
  , Cle = (e,t)=>{
    let n = -1
      , r = -1;
    return e.forEach((i,o)=>{
        D_(i, t) && (n === -1 && (n = o),
        r = o)
    }
    ),
    n === -1 ? [] : e.slice(n, r + 1)
}
  , kle = (e,t,n,r,i)=>{
    const o = t[n]
      , s = f=>f.isDeleted ? !1 : i ? f.frameId === i : e.editingGroupId ? f.groupIds.includes(e.editingGroupId) : !0
      , a = r === "left" ? tD(t, f=>s(f), Math.max(0, n - 1)) : eD(t, f=>s(f), n + 1)
      , l = t[a];
    if (!l)
        return -1;
    if (e.editingGroupId) {
        if ((o == null ? void 0 : o.groupIds.join("")) === (l == null ? void 0 : l.groupIds.join("")))
            return rA(l, t, r) ?? a;
        if (!(l != null && l.groupIds.includes(e.editingGroupId)))
            return -1
    }
    if (!i && (l.frameId || Ue(l))) {
        const f = Cle(t, l.frameId || l.id);
        return r === "left" ? t.indexOf(f[0]) : t.indexOf(f[f.length - 1])
    }
    if (!l.groupIds.length)
        return rA(l, t, r) ?? a;
    const c = e.editingGroupId ? l.groupIds[l.groupIds.indexOf(e.editingGroupId) - 1] : l.groupIds[l.groupIds.length - 1]
      , u = xn(t, c);
    return u.length ? r === "left" ? t.indexOf(u[0]) : t.indexOf(u[u.length - 1]) : a
}
  , $N = (e,t)=>t.reduce((n,r)=>{
    const i = e[r];
    return n.set(i.id, i),
    n
}
, new Map)
  , UN = (e,t,n)=>{
    const r = zN(e, t)
      , i = $N(e, r);
    let o = Ile(r);
    n === "right" && (o = o.reverse());
    const s = new Set(r.filter(a=>Ue(e[a])).map(a=>e[a].id));
    return o.forEach((a,l)=>{
        var _;
        const c = a[0]
          , u = a[a.length - 1]
          , f = n === "left" ? c : u
          , h = a.some(x=>{
            const C = e[x];
            return C.frameId && s.has(C.frameId)
        }
        ) ? null : (_ = e[f]) == null ? void 0 : _.frameId
          , m = kle(t, e, f, n, h);
        if (m === -1 || f === m)
            return;
        const v = n === "left" ? e.slice(0, m) : e.slice(0, c)
          , y = e.slice(c, u + 1)
          , E = n === "left" ? e.slice(m, c) : e.slice(u + 1, m + 1)
          , b = n === "left" ? e.slice(u + 1) : e.slice(m + 1);
        e = n === "left" ? [...v, ...y, ...E, ...b] : [...v, ...E, ...y, ...b]
    }
    ),
    Ko(e, i),
    e
}
  , HN = (e,t,n,r,i)=>{
    const o = zN(e, t, i)
      , s = $N(e, o)
      , a = [];
    let l, c;
    if (n === "left") {
        if (r)
            l = eD(e, v=>D_(v, r));
        else if (t.editingGroupId) {
            const v = xn(e, t.editingGroupId);
            if (!v.length)
                return e;
            l = e.indexOf(v[0])
        } else
            l = 0;
        c = o[o.length - 1]
    } else {
        if (r)
            c = tD(e, v=>D_(v, r));
        else if (t.editingGroupId) {
            const v = xn(e, t.editingGroupId);
            if (!v.length)
                return e;
            c = e.indexOf(v[v.length - 1])
        } else
            c = e.length - 1;
        l = o[0]
    }
    l === -1 && (l = 0);
    for (let v = l; v < c + 1; v++)
        o.includes(v) || a.push(e[v]);
    const u = Array.from(s.values())
      , f = e.slice(0, l)
      , h = e.slice(c + 1)
      , m = n === "left" ? [...f, ...u, ...a, ...h] : [...f, ...a, ...u, ...h];
    return Ko(m, s),
    m
}
;
function WN(e, t, n, r) {
    const i = De(dt(e, t, {
        includeBoundTextElement: !0,
        includeElementsInFrames: !0
    }))
      , o = {
        regularElements: [],
        frameChildren: new Map
    }
      , s = new Set;
    for (const c of e)
        i.has(c.id) && Ue(c) && s.add(c.id);
    for (const c of e)
        if (i.has(c.id))
            if (Ue(c) || c.frameId && s.has(c.frameId))
                o.regularElements.push(c);
            else if (!c.frameId)
                o.regularElements.push(c);
            else {
                const u = o.frameChildren.get(c.frameId) || [];
                u.push(c),
                o.frameChildren.set(c.frameId, u)
            }
    let a = e;
    const l = Array.from(o.frameChildren.entries());
    for (const [c,u] of l)
        a = r(e, t, n, c, u);
    return r(a, t, n, null, o.regularElements)
}
const Tle = (e,t)=>UN(e, t, "left")
  , Ale = (e,t)=>UN(e, t, "right")
  , Mle = (e,t)=>WN(e, t, "left", HN)
  , Lle = (e,t)=>WN(e, t, "right", HN)
  , Ple = we({
    name: "sendBackward",
    label: "labels.sendBackward",
    keywords: ["move down", "zindex", "layer"],
    icon: Jk,
    trackEvent: {
        category: "element"
    },
    perform: (e,t)=>({
        elements: Tle(e, t),
        appState: t,
        storeAction: ee.CAPTURE
    }),
    keyPriority: 40,
    keyTest: e=>e[U.CTRL_OR_CMD] && !e.shiftKey && e.code === pt.BRACKET_LEFT,
    PanelComponent: ({updateData: e, appState: t})=>g("button", {
        type: "button",
        className: "zIndexButton",
        onClick: ()=>e(null),
        title: `${k("labels.sendBackward")} — ${ie("CtrlOrCmd+[")}`,
        children: Jk
    })
})
  , Rle = we({
    name: "bringForward",
    label: "labels.bringForward",
    keywords: ["move up", "zindex", "layer"],
    icon: Qk,
    trackEvent: {
        category: "element"
    },
    perform: (e,t)=>({
        elements: Ale(e, t),
        appState: t,
        storeAction: ee.CAPTURE
    }),
    keyPriority: 40,
    keyTest: e=>e[U.CTRL_OR_CMD] && !e.shiftKey && e.code === pt.BRACKET_RIGHT,
    PanelComponent: ({updateData: e, appState: t})=>g("button", {
        type: "button",
        className: "zIndexButton",
        onClick: ()=>e(null),
        title: `${k("labels.bringForward")} — ${ie("CtrlOrCmd+]")}`,
        children: Qk
    })
})
  , Dle = we({
    name: "sendToBack",
    label: "labels.sendToBack",
    keywords: ["move down", "zindex", "layer"],
    icon: tT,
    trackEvent: {
        category: "element"
    },
    perform: (e,t)=>({
        elements: Mle(e, t),
        appState: t,
        storeAction: ee.CAPTURE
    }),
    keyTest: e=>Ts ? e[U.CTRL_OR_CMD] && e.altKey && e.code === pt.BRACKET_LEFT : e[U.CTRL_OR_CMD] && e.shiftKey && e.code === pt.BRACKET_LEFT,
    PanelComponent: ({updateData: e, appState: t})=>g("button", {
        type: "button",
        className: "zIndexButton",
        onClick: ()=>e(null),
        title: `${k("labels.sendToBack")} — ${ie(Ts ? "CtrlOrCmd+Alt+[" : "CtrlOrCmd+Shift+[")}`,
        children: tT
    })
})
  , Ole = we({
    name: "bringToFront",
    label: "labels.bringToFront",
    keywords: ["move up", "zindex", "layer"],
    icon: eT,
    trackEvent: {
        category: "element"
    },
    perform: (e,t)=>({
        elements: Lle(e, t),
        appState: t,
        storeAction: ee.CAPTURE
    }),
    keyTest: e=>Ts ? e[U.CTRL_OR_CMD] && e.altKey && e.code === pt.BRACKET_RIGHT : e[U.CTRL_OR_CMD] && e.shiftKey && e.code === pt.BRACKET_RIGHT,
    PanelComponent: ({updateData: e, appState: t})=>g("button", {
        type: "button",
        className: "zIndexButton",
        onClick: n=>e(null),
        title: `${k("labels.bringToFront")} — ${ie(Ts ? "CtrlOrCmd+Alt+]" : "CtrlOrCmd+Shift+]")}`,
        children: eT
    })
})
  , Nle = we({
    name: "selectAll",
    label: "labels.selectAll",
    icon: xte,
    trackEvent: {
        category: "canvas"
    },
    viewMode: !1,
    perform: (e,t,n,r)=>{
        if (t.editingLinearElement)
            return !1;
        const i = ly(e.filter(o=>!o.isDeleted && !(ye(o) && o.containerId) && !o.locked)).reduce((o,s)=>(o[s.id] = !0,
        o), {});
        return {
            appState: {
                ...t,
                ...Ii({
                    editingGroupId: null,
                    selectedElementIds: i
                }, Nt(e), t, r),
                selectedLinearElement: Object.keys(i).length === 1 && je(e[0]) ? new ke(e[0]) : null
            },
            storeAction: ee.CAPTURE
        }
    }
    ,
    keyTest: e=>e[U.CTRL_OR_CMD] && e.key === U.A
})
  , Fle = e=>{
    const t = e.slice()
      , n = new Set
      , r = o=>{
        var c, u, f;
        const s = (u = (c = o[0]) == null ? void 0 : c.groupIds) == null ? void 0 : u.join("")
          , a = [o[0]]
          , l = [];
        for (const h of o.slice(1))
            ((f = h.groupIds) == null ? void 0 : f.join("")) === s ? a.push(h) : l.push(h);
        return l.length ? [...a, ...r(l)] : a
    }
      , i = new Map;
    return t.forEach((o,s)=>{
        var a;
        if (!i.has(o.id))
            if ((a = o.groupIds) != null && a.length) {
                const l = o.groupIds[o.groupIds.length - 1]
                  , c = t.slice(s).filter(u=>{
                    var h;
                    const f = (h = u == null ? void 0 : u.groupIds) == null ? void 0 : h.some(m=>m === l);
                    return f && i.set(u.id, !0),
                    f
                }
                );
                for (const u of r(c))
                    n.add(u)
            } else
                n.add(o)
    }
    ),
    n.size !== e.length ? (console.error("normalizeGroupElementOrder: lost some elements... bailing!"),
    e) : [...n]
}
  , Ble = e=>{
    const t = aJ(e)
      , n = e.slice()
      , r = new Set;
    return n.forEach((i,o)=>{
        var s, a;
        if (i)
            if ((s = i.boundElements) != null && s.length)
                r.add(i),
                n[o] = null,
                i.boundElements.forEach(l=>{
                    const c = t.get(l.id);
                    c && l.type === "text" && (r.add(c[0]),
                    n[c[1]] = null)
                }
                );
            else if (i.type === "text" && i.containerId) {
                const l = t.get(i.containerId);
                (a = l == null ? void 0 : l[0].boundElements) != null && a.find(c=>c.id === i.id) || (r.add(i),
                n[o] = null)
            } else
                r.add(i),
                n[o] = null
    }
    ),
    r.size !== e.length ? (console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),
    e) : [...r]
}
  , zle = e=>Ble(Fle(e))
  , $le = we({
    name: "duplicateSelection",
    label: "labels.duplicateSelection",
    icon: e_,
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>{
        if (t.editingLinearElement) {
            const i = ke.duplicateSelectedPoints(t, r.scene.getNonDeletedElementsMap());
            return i ? {
                elements: e,
                appState: i.appState,
                storeAction: ee.CAPTURE
            } : !1
        }
        return {
            ...Ule(e, t),
            storeAction: ee.CAPTURE
        }
    }
    ,
    keyTest: e=>e[U.CTRL_OR_CMD] && e.key === U.D,
    PanelComponent: ({elements: e, appState: t, updateData: n})=>g(lt, {
        type: "button",
        icon: e_,
        title: `${k("labels.duplicateSelection")} — ${ie("CtrlOrCmd+D")}`,
        "aria-label": k("labels.duplicateSelection"),
        onClick: ()=>n(null),
        visible: Mn(Nt(e), t)
    })
})
  , Ule = (e,t)=>{
    const n = zle(e)
      , r = new Map
      , i = []
      , o = []
      , s = new Map
      , a = new Map
      , l = _=>{
        const x = _O(t.editingGroupId, r, _, {
            x: _.x + t2 / 2,
            y: _.y + t2 / 2
        });
        return a.set(x.id, x),
        s.set(_.id, x.id),
        o.push(_),
        i.push(x),
        x
    }
      , c = De(dt(n, t, {
        includeBoundTextElement: !0,
        includeElementsInFrames: !0
    }))
      , u = new Map
      , f = _=>{
        for (const x of _)
            u.set(x.id, !0);
        return _
    }
      , h = [];
    let m = -1;
    for (; ++m < n.length; ) {
        const _ = n[m];
        if (u.get(_.id))
            continue;
        const x = Ge(_, De(e))
          , C = Ue(_);
        if (c.get(_.id)) {
            if (_.groupIds.length || x || C) {
                const P = pD(t, _);
                if (P) {
                    const M = xn(n, P).flatMap(A=>Ue(A) ? [...Ia(e, A.id), A] : [A]);
                    h.push(...f([...M, ...M.map(A=>l(A))]));
                    continue
                }
                if (x) {
                    h.push(...f([_, x, l(_), l(x)]));
                    continue
                }
                if (C) {
                    const M = Ia(n, _.id);
                    h.push(...f([...M, _, ...M.map(A=>l(A)), l(_)]));
                    continue
                }
            }
            (!_.frameId || !c.has(_.frameId)) && h.push(...f([_, l(_)]))
        } else
            h.push(...f([_]))
    }
    const v = []
      , y = new Map;
    for (m = h.length; --m >= 0; ) {
        const _ = h[m];
        y.get(_.id) || (y.set(_.id, !0),
        v.push(_))
    }
    const E = Ko(v.reverse(), De(i));
    EN(h, o, s),
    J9(h, o, s),
    XO(E, o, s);
    const b = ly(i);
    return {
        elements: E,
        appState: {
            ...t,
            ...Ii({
                editingGroupId: t.editingGroupId,
                selectedElementIds: b.reduce((_,x)=>(Sn(x) || (_[x.id] = !0),
                _), {})
            }, Nt(E), t, null)
        }
    }
}
  , GN = T.forwardRef((e,t)=>{
    const {title: n, className: r, testId: i, active: o, standalone: s, icon: a, onClick: l} = e;
    return g("button", {
        type: "button",
        ref: t,
        title: n,
        "data-testid": i,
        className: xe(r, {
            standalone: s,
            active: o
        }),
        onClick: l,
        children: a
    }, n)
}
)
  , Os = e=>g("div", {
    className: "buttonList",
    children: e.options.map(t=>e.type === "button" ? g(GN, {
        icon: t.icon,
        title: t.text,
        testId: t.testId,
        active: t.active ?? e.value === t.value,
        onClick: n=>e.onClick(t.value, n)
    }, t.text) : L("label", {
        className: xe({
            active: e.value === t.value
        }),
        title: t.text,
        children: [g("input", {
            type: "radio",
            name: e.group,
            onChange: ()=>e.onChange(t.value),
            checked: e.value === t.value,
            "data-testid": t.testId
        }), t.icon]
    }, t.text))
})
  , Hle = ({onChange: e, type: t, activeColor: n, topPicks: r})=>{
    let i;
    return t === "elementStroke" && (i = OP),
    t === "elementBackground" && (i = NP),
    t === "canvasBackground" && (i = FP),
    r && (i = r),
    i ? g("div", {
        className: "color-picker__top-picks",
        children: i.map(o=>g("button", {
            className: xe("color-picker__button", {
                active: o === n,
                "is-transparent": o === "transparent" || !o
            }),
            style: {
                "--swatch-color": o
            },
            type: "button",
            title: o,
            onClick: ()=>e(o),
            "data-testid": `color-top-pick-${o}`,
            children: g("div", {
                className: "color-picker__button-outline"
            })
        }, o))
    }) : (console.error("Invalid type for TopPicks"),
    null)
}
  , VN = ()=>g("div", {
    style: {
        width: 1,
        height: "1rem",
        backgroundColor: "var(--default-border-color)",
        margin: "0 auto"
    }
})
  , cy = ({palette: e, color: t})=>{
    for (const [n,r] of Object.entries(e))
        if (Array.isArray(r)) {
            const i = r.indexOf(t);
            if (i > -1)
                return {
                    colorName: n,
                    shade: i
                }
        } else if (r === t)
            return {
                colorName: n,
                shade: null
            };
    return null
}
  , O_ = [["q", "w", "e", "r", "t"], ["a", "s", "d", "f", "g"], ["z", "x", "c", "v", "b"]].flat()
  , YN = ({color: e, palette: t})=>!Object.values(t).flat().includes(e)
  , Wle = (e,t,n)=>{
    const r = {
        elementBackground: "backgroundColor",
        elementStroke: "strokeColor"
    }
      , i = e.filter(s=>{
        if (s.isDeleted)
            return !1;
        const a = s[r[t]];
        return YN({
            color: a,
            palette: n
        })
    }
    )
      , o = new Map;
    return i.forEach(s=>{
        const a = s[r[t]];
        o.has(a) ? o.set(a, o.get(a) + 1) : o.set(a, 1)
    }
    ),
    [...o.entries()].sort((s,a)=>a[1] - s[1]).map(s=>s[0]).slice(0, eq)
}
  , Wf = mn(null)
  , iA = (e,t,n)=>(e * 299 + t * 587 + n * 114) / 1e3 >= 160 ? "black" : "white"
  , Gle = (e,t)=>{
    if (t) {
        const o = new Option().style;
        if (o.color = e,
        o.color) {
            const s = o.color.replace(/^(rgb|rgba)\(/, "").replace(/\)$/, "").replace(/\s/g, "").split(",")
              , a = parseInt(s[0])
              , l = parseInt(s[1])
              , c = parseInt(s[2]);
            return iA(a, l, c)
        }
    }
    if (e === "transparent")
        return "black";
    const n = parseInt(e.substring(1, 3), 16)
      , r = parseInt(e.substring(3, 5), 16)
      , i = parseInt(e.substring(5, 7), 16);
    return iA(n, r, i)
}
  , P4 = ({color: e, keyLabel: t, isCustomColor: n=!1, isShade: r=!1})=>L("div", {
    className: "color-picker__button__hotkey-label",
    style: {
        color: Gle(e, n)
    },
    children: [r && "⇧", t]
})
  , Vle = ({hex: e, onChange: t, palette: n})=>{
    const r = cy({
        color: e || "transparent",
        palette: n
    })
      , [i,o] = Ot(Wf)
      , s = T.useRef(null);
    if (T.useEffect(()=>{
        s.current && i === "shades" && s.current.focus()
    }
    , [r, i]),
    r) {
        const {colorName: a, shade: l} = r
          , c = n[a];
        if (Array.isArray(c))
            return g("div", {
                className: "color-picker-content--default shades",
                children: c.map((u,f)=>L("button", {
                    ref: f === l && i === "shades" ? s : void 0,
                    tabIndex: -1,
                    type: "button",
                    className: xe("color-picker__button color-picker__button--large", {
                        active: f === l
                    }),
                    "aria-label": "Shade",
                    title: `${a} - ${f + 1}`,
                    style: u ? {
                        "--swatch-color": u
                    } : void 0,
                    onClick: ()=>{
                        t(u),
                        o("shades")
                    }
                    ,
                    children: [g("div", {
                        className: "color-picker__button-outline"
                    }), g(P4, {
                        color: u,
                        keyLabel: f + 1,
                        isShade: !0
                    })]
                }, f))
            })
    }
    return L("div", {
        className: "color-picker-content--default",
        style: {
            position: "relative"
        },
        tabIndex: -1,
        children: [g("button", {
            type: "button",
            tabIndex: -1,
            className: "color-picker__button color-picker__button--large color-picker__button--no-focus-visible"
        }), g("div", {
            tabIndex: -1,
            style: {
                position: "absolute",
                top: 0,
                left: 0,
                right: 0,
                bottom: 0,
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
                textAlign: "center",
                fontSize: "0.75rem"
            },
            children: k("colorPicker.noShades")
        })]
    })
}
  , Yle = ({palette: e, color: t, onChange: n, label: r, activeShade: i})=>{
    const o = cy({
        color: t || "transparent",
        palette: e
    })
      , [s,a] = Ot(Wf)
      , l = T.useRef(null);
    return T.useEffect(()=>{
        l.current && s === "baseColors" && l.current.focus()
    }
    , [o == null ? void 0 : o.colorName, s]),
    g("div", {
        className: "color-picker-content--default",
        children: Object.entries(e).map(([c,u],f)=>{
            const h = (Array.isArray(u) ? u[i] : u) || "transparent"
              , m = O_[f]
              , v = k(`colors.${c.replace(/\d+/, "")}`, null, "");
            return L("button", {
                ref: (o == null ? void 0 : o.colorName) === c ? l : void 0,
                tabIndex: -1,
                type: "button",
                className: xe("color-picker__button color-picker__button--large", {
                    active: (o == null ? void 0 : o.colorName) === c,
                    "is-transparent": h === "transparent" || !h
                }),
                onClick: ()=>{
                    n(h),
                    a("baseColors")
                }
                ,
                title: `${v}${h.startsWith("#") ? ` ${h}` : ""} — ${m}`,
                "aria-label": `${v} — ${m}`,
                style: h ? {
                    "--swatch-color": h
                } : void 0,
                "data-testid": `color-${c}`,
                children: [g("div", {
                    className: "color-picker__button-outline"
                }), g(P4, {
                    color: h,
                    keyLabel: m
                })]
            }, c)
        }
        )
    })
}
  , jle = ({colors: e, color: t, onChange: n, label: r})=>{
    const [i,o] = Ot(Wf)
      , s = T.useRef(null);
    return T.useEffect(()=>{
        s.current && s.current.focus()
    }
    , [t, i]),
    g("div", {
        className: "color-picker-content--default",
        children: e.map((a,l)=>L("button", {
            ref: t === a ? s : void 0,
            tabIndex: -1,
            type: "button",
            className: xe("color-picker__button color-picker__button--large", {
                active: t === a,
                "is-transparent": a === "transparent" || !a
            }),
            onClick: ()=>{
                n(a),
                o("custom")
            }
            ,
            title: a,
            "aria-label": r,
            style: {
                "--swatch-color": a
            },
            children: [g("div", {
                className: "color-picker__button-outline"
            }), g(P4, {
                color: a,
                keyLabel: l + 1,
                isCustomColor: !0
            })]
        }, l))
    })
}
  , ub = (e,t,n)=>{
    const r = Math.ceil(n / fd);
    switch (t = t ?? -1,
    e) {
    case "ArrowLeft":
        {
            const i = t - 1;
            return i < 0 ? n - 1 : i
        }
    case "ArrowRight":
        return (t + 1) % n;
    case "ArrowDown":
        {
            const i = t + fd;
            return i >= n ? t % fd : i
        }
    case "ArrowUp":
        {
            const i = t - fd
              , o = i < 0 ? fd * r + i : i;
            return o >= n ? void 0 : o
        }
    }
}
  , Kle = ({e, colorObj: t, onChange: n, palette: r, customColors: i, setActiveColorPickerSection: o, activeShade: s})=>{
    if ((t == null ? void 0 : t.shade) != null && ["Digit1", "Digit2", "Digit3", "Digit4", "Digit5"].includes(e.code) && e.shiftKey) {
        const a = Number(e.code.slice(-1)) - 1;
        return n(r[t.colorName][a]),
        o("shades"),
        !0
    }
    if (["1", "2", "3", "4", "5"].includes(e.key) && i[Number(e.key) - 1])
        return n(i[Number(e.key) - 1]),
        o("custom"),
        !0;
    if (O_.includes(e.key)) {
        const a = O_.indexOf(e.key)
          , l = Object.keys(r)[a]
          , c = r[l]
          , u = Array.isArray(c) ? c[s] : c;
        return n(u),
        o("baseColors"),
        !0
    }
    return !1
}
  , Xle = ({event: e, activeColorPickerSection: t, palette: n, color: r, onChange: i, customColors: o, setActiveColorPickerSection: s, updateData: a, activeShade: l, onEyeDropperToggle: c, onEscape: u})=>{
    if (e[U.CTRL_OR_CMD])
        return !1;
    if (e.key === U.ESCAPE)
        return u(e),
        !0;
    if (e.key === U.ALT)
        return c(!0),
        !0;
    if (e.key === U.I)
        return c(),
        !0;
    const f = cy({
        color: r,
        palette: n
    });
    if (e.key === U.TAB) {
        const h = {
            custom: !!o.length,
            baseColors: !0,
            shades: (f == null ? void 0 : f.shade) != null,
            hex: !0
        }
          , m = Object.entries(h).reduce((_,[x,C])=>(C && _.push(x),
        _), [])
          , v = m.indexOf(t)
          , y = e.shiftKey ? -1 : 1
          , E = v + y > m.length - 1 ? 0 : v + y < 0 ? m.length - 1 : v + y
          , b = m[E];
        return b && s(b),
        b === "custom" ? i(o[0]) : b === "baseColors" && (Object.entries(n).find(([x,C])=>Array.isArray(C) ? C.includes(r) : C === r ? x : null) || i(Qe.black)),
        e.preventDefault(),
        e.stopPropagation(),
        !0
    }
    if (Kle({
        e,
        colorObj: f,
        onChange: i,
        palette: n,
        customColors: o,
        setActiveColorPickerSection: s,
        activeShade: l
    }))
        return !0;
    if (t === "shades" && f) {
        const {shade: h} = f
          , m = ub(e.key, h, fd);
        if (m !== void 0)
            return i(n[f.colorName][m]),
            !0
    }
    if (t === "baseColors" && f) {
        const {colorName: h} = f
          , m = Object.keys(n)
          , v = m.indexOf(h)
          , y = ub(e.key, v, m.length);
        if (y !== void 0) {
            const E = m[y]
              , b = n[E];
            return i(Array.isArray(b) ? b[l] : b),
            !0
        }
    }
    if (t === "custom") {
        const h = o.indexOf(r)
          , m = ub(e.key, h, o.length);
        if (m !== void 0) {
            const v = o[m];
            return i(v),
            !0
        }
    }
    return !1
}
  , xm = ({children: e})=>g("div", {
    className: "color-picker__heading",
    children: e
})
  , Zle = ({color: e, onChange: t, label: n, type: r, elements: i, palette: o, updateData: s, children: a, onEyeDropperToggle: l, onEscape: c})=>{
    const [u] = ve.useState(()=>r === "canvasBackground" ? [] : Wle(i, r, o))
      , [f,h] = Ot(Wf)
      , m = cy({
        color: e,
        palette: o
    });
    T.useEffect(()=>{
        if (!f) {
            const b = YN({
                color: e,
                palette: o
            })
              , _ = b && !u.includes(e);
            h(_ ? "hex" : b ? "custom" : (m == null ? void 0 : m.shade) != null ? "shades" : "baseColors")
        }
    }
    , [f, e, o, h, m, u]);
    const [v,y] = T.useState((m == null ? void 0 : m.shade) ?? (r === "elementBackground" ? Yh : Vh));
    T.useEffect(()=>{
        (m == null ? void 0 : m.shade) != null && y(m.shade);
        const b = _=>{
            _.key === U.ALT && l(!1)
        }
        ;
        return document.addEventListener(ce.KEYUP, b, {
            capture: !0
        }),
        ()=>{
            document.removeEventListener(ce.KEYUP, b, {
                capture: !0
            })
        }
    }
    , [m, l]);
    const E = ve.useRef(null);
    return g("div", {
        role: "dialog",
        "aria-modal": "true",
        "aria-label": k("labels.colorPicker"),
        children: L("div", {
            ref: E,
            onKeyDown: b=>{
                Xle({
                    event: b,
                    activeColorPickerSection: f,
                    palette: o,
                    color: e,
                    onChange: t,
                    onEyeDropperToggle: l,
                    customColors: u,
                    setActiveColorPickerSection: h,
                    updateData: s,
                    activeShade: v,
                    onEscape: c
                }) && (b.preventDefault(),
                b.stopPropagation())
            }
            ,
            className: "color-picker-content properties-content",
            tabIndex: -1,
            children: [!!u.length && L("div", {
                children: [g(xm, {
                    children: k("colorPicker.mostUsedCustomColors")
                }), g(jle, {
                    colors: u,
                    color: e,
                    label: k("colorPicker.mostUsedCustomColors"),
                    onChange: t
                })]
            }), L("div", {
                children: [g(xm, {
                    children: k("colorPicker.colors")
                }), g(Yle, {
                    color: e,
                    label: n,
                    palette: o,
                    onChange: t,
                    activeShade: v
                })]
            }), L("div", {
                children: [g(xm, {
                    children: k("colorPicker.shades")
                }), g(Vle, {
                    hex: e,
                    onChange: t,
                    palette: o
                })]
            }), a]
        })
    })
}
;
function Ft() {
    return Ft = Object.assign ? Object.assign.bind() : function(e) {
        for (var t = 1; t < arguments.length; t++) {
            var n = arguments[t];
            for (var r in n)
                ({}).hasOwnProperty.call(n, r) && (e[r] = n[r])
        }
        return e
    }
    ,
    Ft.apply(null, arguments)
}
function Ir(e, t, {checkForDefaultPrevented: n=!0}={}) {
    return function(i) {
        if (e == null || e(i),
        n === !1 || !i.defaultPrevented)
            return t == null ? void 0 : t(i)
    }
}
function qle(e, t) {
    typeof e == "function" ? e(t) : e != null && (e.current = t)
}
function jN(...e) {
    return t=>e.forEach(n=>qle(n, t))
}
function Ls(...e) {
    return T.useCallback(jN(...e), e)
}
function Zp(e, t=[]) {
    let n = [];
    function r(o, s) {
        const a = T.createContext(s)
          , l = n.length;
        n = [...n, s];
        function c(f) {
            const {scope: h, children: m, ...v} = f
              , y = (h == null ? void 0 : h[e][l]) || a
              , E = T.useMemo(()=>v, Object.values(v));
            return T.createElement(y.Provider, {
                value: E
            }, m)
        }
        function u(f, h) {
            const m = (h == null ? void 0 : h[e][l]) || a
              , v = T.useContext(m);
            if (v)
                return v;
            if (s !== void 0)
                return s;
            throw new Error(`\`${f}\` must be used within \`${o}\``)
        }
        return c.displayName = o + "Provider",
        [c, u]
    }
    const i = ()=>{
        const o = n.map(s=>T.createContext(s));
        return function(a) {
            const l = (a == null ? void 0 : a[e]) || o;
            return T.useMemo(()=>({
                [`__scope${e}`]: {
                    ...a,
                    [e]: l
                }
            }), [a, l])
        }
    }
    ;
    return i.scopeName = e,
    [r, Qle(i, ...t)]
}
function Qle(...e) {
    const t = e[0];
    if (e.length === 1)
        return t;
    const n = ()=>{
        const r = e.map(i=>({
            useScope: i(),
            scopeName: i.scopeName
        }));
        return function(o) {
            const s = r.reduce((a,{useScope: l, scopeName: c})=>{
                const f = l(o)[`__scope${c}`];
                return {
                    ...a,
                    ...f
                }
            }
            , {});
            return T.useMemo(()=>({
                [`__scope${t.scopeName}`]: s
            }), [s])
        }
    }
    ;
    return n.scopeName = t.scopeName,
    n
}
const vp = T.forwardRef((e,t)=>{
    const {children: n, ...r} = e
      , i = T.Children.toArray(n)
      , o = i.find(ece);
    if (o) {
        const s = o.props.children
          , a = i.map(l=>l === o ? T.Children.count(s) > 1 ? T.Children.only(null) : T.isValidElement(s) ? s.props.children : null : l);
        return T.createElement(N_, Ft({}, r, {
            ref: t
        }), T.isValidElement(s) ? T.cloneElement(s, void 0, a) : null)
    }
    return T.createElement(N_, Ft({}, r, {
        ref: t
    }), n)
}
);
vp.displayName = "Slot";
const N_ = T.forwardRef((e,t)=>{
    const {children: n, ...r} = e;
    return T.isValidElement(n) ? T.cloneElement(n, {
        ...tce(r, n.props),
        ref: jN(t, n.ref)
    }) : T.Children.count(n) > 1 ? T.Children.only(null) : null
}
);
N_.displayName = "SlotClone";
const Jle = ({children: e})=>T.createElement(T.Fragment, null, e);
function ece(e) {
    return T.isValidElement(e) && e.type === Jle
}
function tce(e, t) {
    const n = {
        ...t
    };
    for (const r in t) {
        const i = e[r]
          , o = t[r];
        /^on[A-Z]/.test(r) ? i && o ? n[r] = (...a)=>{
            o(...a),
            i(...a)
        }
        : i && (n[r] = i) : r === "style" ? n[r] = {
            ...i,
            ...o
        } : r === "className" && (n[r] = [i, o].filter(Boolean).join(" "))
    }
    return {
        ...e,
        ...n
    }
}
const nce = ["a", "button", "div", "h2", "h3", "img", "label", "li", "nav", "ol", "p", "span", "svg", "ul"]
  , pi = nce.reduce((e,t)=>{
    const n = T.forwardRef((r,i)=>{
        const {asChild: o, ...s} = r
          , a = o ? vp : t;
        return T.useEffect(()=>{
            window[Symbol.for("radix-ui")] = !0
        }
        , []),
        T.createElement(a, Ft({}, s, {
            ref: i
        }))
    }
    );
    return n.displayName = `Primitive.${t}`,
    {
        ...e,
        [t]: n
    }
}
, {});
function rce(e, t) {
    e && si.flushSync(()=>e.dispatchEvent(t))
}
function Aa(e) {
    const t = T.useRef(e);
    return T.useEffect(()=>{
        t.current = e
    }
    ),
    T.useMemo(()=>(...n)=>{
        var r;
        return (r = t.current) === null || r === void 0 ? void 0 : r.call(t, ...n)
    }
    , [])
}
function ice(e, t=globalThis == null ? void 0 : globalThis.document) {
    const n = Aa(e);
    T.useEffect(()=>{
        const r = i=>{
            i.key === "Escape" && n(i)
        }
        ;
        return t.addEventListener("keydown", r),
        ()=>t.removeEventListener("keydown", r)
    }
    , [n, t])
}
const F_ = "dismissableLayer.update"
  , oce = "dismissableLayer.pointerDownOutside"
  , sce = "dismissableLayer.focusOutside";
let oA;
const ace = T.createContext({
    layers: new Set,
    layersWithOutsidePointerEventsDisabled: new Set,
    branches: new Set
})
  , lce = T.forwardRef((e,t)=>{
    var n;
    const {disableOutsidePointerEvents: r=!1, onEscapeKeyDown: i, onPointerDownOutside: o, onFocusOutside: s, onInteractOutside: a, onDismiss: l, ...c} = e
      , u = T.useContext(ace)
      , [f,h] = T.useState(null)
      , m = (n = f == null ? void 0 : f.ownerDocument) !== null && n !== void 0 ? n : globalThis == null ? void 0 : globalThis.document
      , [,v] = T.useState({})
      , y = Ls(t, I=>h(I))
      , E = Array.from(u.layers)
      , [b] = [...u.layersWithOutsidePointerEventsDisabled].slice(-1)
      , _ = E.indexOf(b)
      , x = f ? E.indexOf(f) : -1
      , C = u.layersWithOutsidePointerEventsDisabled.size > 0
      , P = x >= _
      , M = cce(I=>{
        const O = I.target
          , N = [...u.branches].some($=>$.contains(O));
        !P || N || (o == null || o(I),
        a == null || a(I),
        I.defaultPrevented || l == null || l())
    }
    , m)
      , A = uce(I=>{
        const O = I.target;
        [...u.branches].some($=>$.contains(O)) || (s == null || s(I),
        a == null || a(I),
        I.defaultPrevented || l == null || l())
    }
    , m);
    return ice(I=>{
        x === u.layers.size - 1 && (i == null || i(I),
        !I.defaultPrevented && l && (I.preventDefault(),
        l()))
    }
    , m),
    T.useEffect(()=>{
        if (f)
            return r && (u.layersWithOutsidePointerEventsDisabled.size === 0 && (oA = m.body.style.pointerEvents,
            m.body.style.pointerEvents = "none"),
            u.layersWithOutsidePointerEventsDisabled.add(f)),
            u.layers.add(f),
            sA(),
            ()=>{
                r && u.layersWithOutsidePointerEventsDisabled.size === 1 && (m.body.style.pointerEvents = oA)
            }
    }
    , [f, m, r, u]),
    T.useEffect(()=>()=>{
        f && (u.layers.delete(f),
        u.layersWithOutsidePointerEventsDisabled.delete(f),
        sA())
    }
    , [f, u]),
    T.useEffect(()=>{
        const I = ()=>v({});
        return document.addEventListener(F_, I),
        ()=>document.removeEventListener(F_, I)
    }
    , []),
    T.createElement(pi.div, Ft({}, c, {
        ref: y,
        style: {
            pointerEvents: C ? P ? "auto" : "none" : void 0,
            ...e.style
        },
        onFocusCapture: Ir(e.onFocusCapture, A.onFocusCapture),
        onBlurCapture: Ir(e.onBlurCapture, A.onBlurCapture),
        onPointerDownCapture: Ir(e.onPointerDownCapture, M.onPointerDownCapture)
    }))
}
);
function cce(e, t=globalThis == null ? void 0 : globalThis.document) {
    const n = Aa(e)
      , r = T.useRef(!1)
      , i = T.useRef(()=>{}
    );
    return T.useEffect(()=>{
        const o = a=>{
            if (a.target && !r.current) {
                let c = function() {
                    KN(oce, n, l, {
                        discrete: !0
                    })
                };
                const l = {
                    originalEvent: a
                };
                a.pointerType === "touch" ? (t.removeEventListener("click", i.current),
                i.current = c,
                t.addEventListener("click", i.current, {
                    once: !0
                })) : c()
            }
            r.current = !1
        }
          , s = window.setTimeout(()=>{
            t.addEventListener("pointerdown", o)
        }
        , 0);
        return ()=>{
            window.clearTimeout(s),
            t.removeEventListener("pointerdown", o),
            t.removeEventListener("click", i.current)
        }
    }
    , [t, n]),
    {
        onPointerDownCapture: ()=>r.current = !0
    }
}
function uce(e, t=globalThis == null ? void 0 : globalThis.document) {
    const n = Aa(e)
      , r = T.useRef(!1);
    return T.useEffect(()=>{
        const i = o=>{
            o.target && !r.current && KN(sce, n, {
                originalEvent: o
            }, {
                discrete: !1
            })
        }
        ;
        return t.addEventListener("focusin", i),
        ()=>t.removeEventListener("focusin", i)
    }
    , [t, n]),
    {
        onFocusCapture: ()=>r.current = !0,
        onBlurCapture: ()=>r.current = !1
    }
}
function sA() {
    const e = new CustomEvent(F_);
    document.dispatchEvent(e)
}
function KN(e, t, n, {discrete: r}) {
    const i = n.originalEvent.target
      , o = new CustomEvent(e,{
        bubbles: !1,
        cancelable: !0,
        detail: n
    });
    t && i.addEventListener(e, t, {
        once: !0
    }),
    r ? rce(i, o) : i.dispatchEvent(o)
}
let db = 0;
function dce() {
    T.useEffect(()=>{
        var e, t;
        const n = document.querySelectorAll("[data-radix-focus-guard]");
        return document.body.insertAdjacentElement("afterbegin", (e = n[0]) !== null && e !== void 0 ? e : aA()),
        document.body.insertAdjacentElement("beforeend", (t = n[1]) !== null && t !== void 0 ? t : aA()),
        db++,
        ()=>{
            db === 1 && document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),
            db--
        }
    }
    , [])
}
function aA() {
    const e = document.createElement("span");
    return e.setAttribute("data-radix-focus-guard", ""),
    e.tabIndex = 0,
    e.style.cssText = "outline: none; opacity: 0; position: fixed; pointer-events: none",
    e
}
const fb = "focusScope.autoFocusOnMount"
  , hb = "focusScope.autoFocusOnUnmount"
  , lA = {
    bubbles: !1,
    cancelable: !0
}
  , fce = T.forwardRef((e,t)=>{
    const {loop: n=!1, trapped: r=!1, onMountAutoFocus: i, onUnmountAutoFocus: o, ...s} = e
      , [a,l] = T.useState(null)
      , c = Aa(i)
      , u = Aa(o)
      , f = T.useRef(null)
      , h = Ls(t, y=>l(y))
      , m = T.useRef({
        paused: !1,
        pause() {
            this.paused = !0
        },
        resume() {
            this.paused = !1
        }
    }).current;
    T.useEffect(()=>{
        if (r) {
            let y = function(b) {
                if (m.paused || !a)
                    return;
                const _ = b.target;
                a.contains(_) ? f.current = _ : _c(f.current, {
                    select: !0
                })
            }
              , E = function(b) {
                m.paused || !a || a.contains(b.relatedTarget) || _c(f.current, {
                    select: !0
                })
            };
            return document.addEventListener("focusin", y),
            document.addEventListener("focusout", E),
            ()=>{
                document.removeEventListener("focusin", y),
                document.removeEventListener("focusout", E)
            }
        }
    }
    , [r, a, m.paused]),
    T.useEffect(()=>{
        if (a) {
            uA.add(m);
            const y = document.activeElement;
            if (!a.contains(y)) {
                const b = new CustomEvent(fb,lA);
                a.addEventListener(fb, c),
                a.dispatchEvent(b),
                b.defaultPrevented || (hce(yce(XN(a)), {
                    select: !0
                }),
                document.activeElement === y && _c(a))
            }
            return ()=>{
                a.removeEventListener(fb, c),
                setTimeout(()=>{
                    const b = new CustomEvent(hb,lA);
                    a.addEventListener(hb, u),
                    a.dispatchEvent(b),
                    b.defaultPrevented || _c(y ?? document.body, {
                        select: !0
                    }),
                    a.removeEventListener(hb, u),
                    uA.remove(m)
                }
                , 0)
            }
        }
    }
    , [a, c, u, m]);
    const v = T.useCallback(y=>{
        if (!n && !r || m.paused)
            return;
        const E = y.key === "Tab" && !y.altKey && !y.ctrlKey && !y.metaKey
          , b = document.activeElement;
        if (E && b) {
            const _ = y.currentTarget
              , [x,C] = gce(_);
            x && C ? !y.shiftKey && b === C ? (y.preventDefault(),
            n && _c(x, {
                select: !0
            })) : y.shiftKey && b === x && (y.preventDefault(),
            n && _c(C, {
                select: !0
            })) : b === _ && y.preventDefault()
        }
    }
    , [n, r, m.paused]);
    return T.createElement(pi.div, Ft({
        tabIndex: -1
    }, s, {
        ref: h,
        onKeyDown: v
    }))
}
);
function hce(e, {select: t=!1}={}) {
    const n = document.activeElement;
    for (const r of e)
        if (_c(r, {
            select: t
        }),
        document.activeElement !== n)
            return
}
function gce(e) {
    const t = XN(e)
      , n = cA(t, e)
      , r = cA(t.reverse(), e);
    return [n, r]
}
function XN(e) {
    const t = []
      , n = document.createTreeWalker(e, NodeFilter.SHOW_ELEMENT, {
        acceptNode: r=>{
            const i = r.tagName === "INPUT" && r.type === "hidden";
            return r.disabled || r.hidden || i ? NodeFilter.FILTER_SKIP : r.tabIndex >= 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP
        }
    });
    for (; n.nextNode(); )
        t.push(n.currentNode);
    return t
}
function cA(e, t) {
    for (const n of e)
        if (!pce(n, {
            upTo: t
        }))
            return n
}
function pce(e, {upTo: t}) {
    if (getComputedStyle(e).visibility === "hidden")
        return !0;
    for (; e; ) {
        if (t !== void 0 && e === t)
            return !1;
        if (getComputedStyle(e).display === "none")
            return !0;
        e = e.parentElement
    }
    return !1
}
function mce(e) {
    return e instanceof HTMLInputElement && "select"in e
}
function _c(e, {select: t=!1}={}) {
    if (e && e.focus) {
        const n = document.activeElement;
        e.focus({
            preventScroll: !0
        }),
        e !== n && mce(e) && t && e.select()
    }
}
const uA = vce();
function vce() {
    let e = [];
    return {
        add(t) {
            const n = e[0];
            t !== n && (n == null || n.pause()),
            e = dA(e, t),
            e.unshift(t)
        },
        remove(t) {
            var n;
            e = dA(e, t),
            (n = e[0]) === null || n === void 0 || n.resume()
        }
    }
}
function dA(e, t) {
    const n = [...e]
      , r = n.indexOf(t);
    return r !== -1 && n.splice(r, 1),
    n
}
function yce(e) {
    return e.filter(t=>t.tagName !== "A")
}
const wl = globalThis != null && globalThis.document ? T.useLayoutEffect : ()=>{}
  , wce = IK.useId || (()=>{}
);
let Ece = 0;
function R4(e) {
    const [t,n] = T.useState(wce());
    return wl(()=>{
        e || n(r=>r ?? String(Ece++))
    }
    , [e]),
    e || (t ? `radix-${t}` : "")
}
function Du(e) {
    return e.split("-")[0]
}
function qp(e) {
    return e.split("-")[1]
}
function Gf(e) {
    return ["top", "bottom"].includes(Du(e)) ? "x" : "y"
}
function D4(e) {
    return e === "y" ? "height" : "width"
}
function fA(e, t, n) {
    let {reference: r, floating: i} = e;
    const o = r.x + r.width / 2 - i.width / 2
      , s = r.y + r.height / 2 - i.height / 2
      , a = Gf(t)
      , l = D4(a)
      , c = r[l] / 2 - i[l] / 2
      , u = a === "x";
    let f;
    switch (Du(t)) {
    case "top":
        f = {
            x: o,
            y: r.y - i.height
        };
        break;
    case "bottom":
        f = {
            x: o,
            y: r.y + r.height
        };
        break;
    case "right":
        f = {
            x: r.x + r.width,
            y: s
        };
        break;
    case "left":
        f = {
            x: r.x - i.width,
            y: s
        };
        break;
    default:
        f = {
            x: r.x,
            y: r.y
        }
    }
    switch (qp(t)) {
    case "start":
        f[a] -= c * (n && u ? -1 : 1);
        break;
    case "end":
        f[a] += c * (n && u ? -1 : 1)
    }
    return f
}
const bce = async(e,t,n)=>{
    const {placement: r="bottom", strategy: i="absolute", middleware: o=[], platform: s} = n
      , a = await (s.isRTL == null ? void 0 : s.isRTL(t));
    let l = await s.getElementRects({
        reference: e,
        floating: t,
        strategy: i
    })
      , {x: c, y: u} = fA(l, r, a)
      , f = r
      , h = {}
      , m = 0;
    for (let v = 0; v < o.length; v++) {
        const {name: y, fn: E} = o[v]
          , {x: b, y: _, data: x, reset: C} = await E({
            x: c,
            y: u,
            initialPlacement: r,
            placement: f,
            strategy: i,
            middlewareData: h,
            rects: l,
            platform: s,
            elements: {
                reference: e,
                floating: t
            }
        });
        c = b ?? c,
        u = _ ?? u,
        h = {
            ...h,
            [y]: {
                ...h[y],
                ...x
            }
        },
        C && m <= 50 && (m++,
        typeof C == "object" && (C.placement && (f = C.placement),
        C.rects && (l = C.rects === !0 ? await s.getElementRects({
            reference: e,
            floating: t,
            strategy: i
        }) : C.rects),
        {x: c, y: u} = fA(l, f, a)),
        v = -1)
    }
    return {
        x: c,
        y: u,
        placement: f,
        strategy: i,
        middlewareData: h
    }
}
;
function ZN(e) {
    return typeof e != "number" ? function(t) {
        return {
            top: 0,
            right: 0,
            bottom: 0,
            left: 0,
            ...t
        }
    }(e) : {
        top: e,
        right: e,
        bottom: e,
        left: e
    }
}
function B2(e) {
    return {
        ...e,
        top: e.y,
        left: e.x,
        right: e.x + e.width,
        bottom: e.y + e.height
    }
}
async function yp(e, t) {
    var n;
    t === void 0 && (t = {});
    const {x: r, y: i, platform: o, rects: s, elements: a, strategy: l} = e
      , {boundary: c="clippingAncestors", rootBoundary: u="viewport", elementContext: f="floating", altBoundary: h=!1, padding: m=0} = t
      , v = ZN(m)
      , y = a[h ? f === "floating" ? "reference" : "floating" : f]
      , E = B2(await o.getClippingRect({
        element: (n = await (o.isElement == null ? void 0 : o.isElement(y))) == null || n ? y : y.contextElement || await (o.getDocumentElement == null ? void 0 : o.getDocumentElement(a.floating)),
        boundary: c,
        rootBoundary: u,
        strategy: l
    }))
      , b = B2(o.convertOffsetParentRelativeRectToViewportRelativeRect ? await o.convertOffsetParentRelativeRectToViewportRelativeRect({
        rect: f === "floating" ? {
            ...s.floating,
            x: r,
            y: i
        } : s.reference,
        offsetParent: await (o.getOffsetParent == null ? void 0 : o.getOffsetParent(a.floating)),
        strategy: l
    }) : s[f]);
    return {
        top: E.top - b.top + v.top,
        bottom: b.bottom - E.bottom + v.bottom,
        left: E.left - b.left + v.left,
        right: b.right - E.right + v.right
    }
}
const _ce = Math.min
  , xc = Math.max;
function B_(e, t, n) {
    return xc(e, _ce(t, n))
}
const hA = e=>({
    name: "arrow",
    options: e,
    async fn(t) {
        const {element: n, padding: r=0} = e ?? {}
          , {x: i, y: o, placement: s, rects: a, platform: l} = t;
        if (n == null)
            return {};
        const c = ZN(r)
          , u = {
            x: i,
            y: o
        }
          , f = Gf(s)
          , h = qp(s)
          , m = D4(f)
          , v = await l.getDimensions(n)
          , y = f === "y" ? "top" : "left"
          , E = f === "y" ? "bottom" : "right"
          , b = a.reference[m] + a.reference[f] - u[f] - a.floating[m]
          , _ = u[f] - a.reference[f]
          , x = await (l.getOffsetParent == null ? void 0 : l.getOffsetParent(n));
        let C = x ? f === "y" ? x.clientHeight || 0 : x.clientWidth || 0 : 0;
        C === 0 && (C = a.floating[m]);
        const P = b / 2 - _ / 2
          , M = c[y]
          , A = C - v[m] - c[E]
          , I = C / 2 - v[m] / 2 + P
          , O = B_(M, I, A)
          , N = (h === "start" ? c[y] : c[E]) > 0 && I !== O && a.reference[m] <= a.floating[m];
        return {
            [f]: u[f] - (N ? I < M ? M - I : A - I : 0),
            data: {
                [f]: O,
                centerOffset: I - O
            }
        }
    }
})
  , xce = {
    left: "right",
    right: "left",
    bottom: "top",
    top: "bottom"
};
function z2(e) {
    return e.replace(/left|right|bottom|top/g, t=>xce[t])
}
function Sce(e, t, n) {
    n === void 0 && (n = !1);
    const r = qp(e)
      , i = Gf(e)
      , o = D4(i);
    let s = i === "x" ? r === (n ? "end" : "start") ? "right" : "left" : r === "start" ? "bottom" : "top";
    return t.reference[o] > t.floating[o] && (s = z2(s)),
    {
        main: s,
        cross: z2(s)
    }
}
const Ice = {
    start: "end",
    end: "start"
};
function gA(e) {
    return e.replace(/start|end/g, t=>Ice[t])
}
const qN = ["top", "right", "bottom", "left"];
qN.reduce((e,t)=>e.concat(t, t + "-start", t + "-end"), []);
const Cce = function(e) {
    return e === void 0 && (e = {}),
    {
        name: "flip",
        options: e,
        async fn(t) {
            var n;
            const {placement: r, middlewareData: i, rects: o, initialPlacement: s, platform: a, elements: l} = t
              , {mainAxis: c=!0, crossAxis: u=!0, fallbackPlacements: f, fallbackStrategy: h="bestFit", flipAlignment: m=!0, ...v} = e
              , y = Du(r)
              , E = f || (y === s || !m ? [z2(s)] : function(I) {
                const O = z2(I);
                return [gA(I), O, gA(O)]
            }(s))
              , b = [s, ...E]
              , _ = await yp(t, v)
              , x = [];
            let C = ((n = i.flip) == null ? void 0 : n.overflows) || [];
            if (c && x.push(_[y]),
            u) {
                const {main: I, cross: O} = Sce(r, o, await (a.isRTL == null ? void 0 : a.isRTL(l.floating)));
                x.push(_[I], _[O])
            }
            if (C = [...C, {
                placement: r,
                overflows: x
            }],
            !x.every(I=>I <= 0)) {
                var P, M;
                const I = ((P = (M = i.flip) == null ? void 0 : M.index) != null ? P : 0) + 1
                  , O = b[I];
                if (O)
                    return {
                        data: {
                            index: I,
                            overflows: C
                        },
                        reset: {
                            placement: O
                        }
                    };
                let N = "bottom";
                switch (h) {
                case "bestFit":
                    {
                        var A;
                        const $ = (A = C.map(V=>[V, V.overflows.filter(z=>z > 0).reduce((z,j)=>z + j, 0)]).sort((V,z)=>V[1] - z[1])[0]) == null ? void 0 : A[0].placement;
                        $ && (N = $);
                        break
                    }
                case "initialPlacement":
                    N = s
                }
                if (r !== N)
                    return {
                        reset: {
                            placement: N
                        }
                    }
            }
            return {}
        }
    }
};
function pA(e, t) {
    return {
        top: e.top - t.height,
        right: e.right - t.width,
        bottom: e.bottom - t.height,
        left: e.left - t.width
    }
}
function mA(e) {
    return qN.some(t=>e[t] >= 0)
}
const kce = function(e) {
    let {strategy: t="referenceHidden", ...n} = e === void 0 ? {} : e;
    return {
        name: "hide",
        async fn(r) {
            const {rects: i} = r;
            switch (t) {
            case "referenceHidden":
                {
                    const o = pA(await yp(r, {
                        ...n,
                        elementContext: "reference"
                    }), i.reference);
                    return {
                        data: {
                            referenceHiddenOffsets: o,
                            referenceHidden: mA(o)
                        }
                    }
                }
            case "escaped":
                {
                    const o = pA(await yp(r, {
                        ...n,
                        altBoundary: !0
                    }), i.floating);
                    return {
                        data: {
                            escapedOffsets: o,
                            escaped: mA(o)
                        }
                    }
                }
            default:
                return {}
            }
        }
    }
}
  , Tce = function(e) {
    return e === void 0 && (e = 0),
    {
        name: "offset",
        options: e,
        async fn(t) {
            const {x: n, y: r} = t
              , i = await async function(o, s) {
                const {placement: a, platform: l, elements: c} = o
                  , u = await (l.isRTL == null ? void 0 : l.isRTL(c.floating))
                  , f = Du(a)
                  , h = qp(a)
                  , m = Gf(a) === "x"
                  , v = ["left", "top"].includes(f) ? -1 : 1
                  , y = u && m ? -1 : 1
                  , E = typeof s == "function" ? s(o) : s;
                let {mainAxis: b, crossAxis: _, alignmentAxis: x} = typeof E == "number" ? {
                    mainAxis: E,
                    crossAxis: 0,
                    alignmentAxis: null
                } : {
                    mainAxis: 0,
                    crossAxis: 0,
                    alignmentAxis: null,
                    ...E
                };
                return h && typeof x == "number" && (_ = h === "end" ? -1 * x : x),
                m ? {
                    x: _ * y,
                    y: b * v
                } : {
                    x: b * v,
                    y: _ * y
                }
            }(t, e);
            return {
                x: n + i.x,
                y: r + i.y,
                data: i
            }
        }
    }
};
function QN(e) {
    return e === "x" ? "y" : "x"
}
const Ace = function(e) {
    return e === void 0 && (e = {}),
    {
        name: "shift",
        options: e,
        async fn(t) {
            const {x: n, y: r, placement: i} = t
              , {mainAxis: o=!0, crossAxis: s=!1, limiter: a={
                fn: E=>{
                    let {x: b, y: _} = E;
                    return {
                        x: b,
                        y: _
                    }
                }
            }, ...l} = e
              , c = {
                x: n,
                y: r
            }
              , u = await yp(t, l)
              , f = Gf(Du(i))
              , h = QN(f);
            let m = c[f]
              , v = c[h];
            if (o) {
                const E = f === "y" ? "bottom" : "right";
                m = B_(m + u[f === "y" ? "top" : "left"], m, m - u[E])
            }
            if (s) {
                const E = h === "y" ? "bottom" : "right";
                v = B_(v + u[h === "y" ? "top" : "left"], v, v - u[E])
            }
            const y = a.fn({
                ...t,
                [f]: m,
                [h]: v
            });
            return {
                ...y,
                data: {
                    x: y.x - n,
                    y: y.y - r
                }
            }
        }
    }
}
  , Mce = function(e) {
    return e === void 0 && (e = {}),
    {
        options: e,
        fn(t) {
            const {x: n, y: r, placement: i, rects: o, middlewareData: s} = t
              , {offset: a=0, mainAxis: l=!0, crossAxis: c=!0} = e
              , u = {
                x: n,
                y: r
            }
              , f = Gf(i)
              , h = QN(f);
            let m = u[f]
              , v = u[h];
            const y = typeof a == "function" ? a({
                ...o,
                placement: i
            }) : a
              , E = typeof y == "number" ? {
                mainAxis: y,
                crossAxis: 0
            } : {
                mainAxis: 0,
                crossAxis: 0,
                ...y
            };
            if (l) {
                const P = f === "y" ? "height" : "width"
                  , M = o.reference[f] - o.floating[P] + E.mainAxis
                  , A = o.reference[f] + o.reference[P] - E.mainAxis;
                m < M ? m = M : m > A && (m = A)
            }
            if (c) {
                var b, _, x, C;
                const P = f === "y" ? "width" : "height"
                  , M = ["top", "left"].includes(Du(i))
                  , A = o.reference[h] - o.floating[P] + (M && (b = (_ = s.offset) == null ? void 0 : _[h]) != null ? b : 0) + (M ? 0 : E.crossAxis)
                  , I = o.reference[h] + o.reference[P] + (M ? 0 : (x = (C = s.offset) == null ? void 0 : C[h]) != null ? x : 0) - (M ? E.crossAxis : 0);
                v < A ? v = A : v > I && (v = I)
            }
            return {
                [f]: m,
                [h]: v
            }
        }
    }
}
  , Lce = function(e) {
    return e === void 0 && (e = {}),
    {
        name: "size",
        options: e,
        async fn(t) {
            const {placement: n, rects: r, platform: i, elements: o} = t
              , {apply: s, ...a} = e
              , l = await yp(t, a)
              , c = Du(n)
              , u = qp(n);
            let f, h;
            c === "top" || c === "bottom" ? (f = c,
            h = u === (await (i.isRTL == null ? void 0 : i.isRTL(o.floating)) ? "start" : "end") ? "left" : "right") : (h = c,
            f = u === "end" ? "top" : "bottom");
            const m = xc(l.left, 0)
              , v = xc(l.right, 0)
              , y = xc(l.top, 0)
              , E = xc(l.bottom, 0)
              , b = {
                availableHeight: r.floating.height - (["left", "right"].includes(n) ? 2 * (y !== 0 || E !== 0 ? y + E : xc(l.top, l.bottom)) : l[f]),
                availableWidth: r.floating.width - (["top", "bottom"].includes(n) ? 2 * (m !== 0 || v !== 0 ? m + v : xc(l.left, l.right)) : l[h])
            }
              , _ = await i.getDimensions(o.floating);
            s == null || s({
                ...t,
                ...b
            });
            const x = await i.getDimensions(o.floating);
            return _.width !== x.width || _.height !== x.height ? {
                reset: {
                    rects: !0
                }
            } : {}
        }
    }
};
function JN(e) {
    return e && e.document && e.location && e.alert && e.setInterval
}
function Na(e) {
    if (e == null)
        return window;
    if (!JN(e)) {
        const t = e.ownerDocument;
        return t && t.defaultView || window
    }
    return e
}
function Qp(e) {
    return Na(e).getComputedStyle(e)
}
function ma(e) {
    return JN(e) ? "" : e ? (e.nodeName || "").toLowerCase() : ""
}
function eF() {
    const e = navigator.userAgentData;
    return e != null && e.brands ? e.brands.map(t=>t.brand + "/" + t.version).join(" ") : navigator.userAgent
}
function Ps(e) {
    return e instanceof Na(e).HTMLElement
}
function Kl(e) {
    return e instanceof Na(e).Element
}
function O4(e) {
    return typeof ShadowRoot > "u" ? !1 : e instanceof Na(e).ShadowRoot || e instanceof ShadowRoot
}
function uy(e) {
    const {overflow: t, overflowX: n, overflowY: r} = Qp(e);
    return /auto|scroll|overlay|hidden/.test(t + r + n)
}
function Pce(e) {
    return ["table", "td", "th"].includes(ma(e))
}
function vA(e) {
    const t = /firefox/i.test(eF())
      , n = Qp(e);
    return n.transform !== "none" || n.perspective !== "none" || n.contain === "paint" || ["transform", "perspective"].includes(n.willChange) || t && n.willChange === "filter" || t && !!n.filter && n.filter !== "none"
}
function tF() {
    return !/^((?!chrome|android).)*safari/i.test(eF())
}
const yA = Math.min
  , Sg = Math.max
  , $2 = Math.round;
function va(e, t, n) {
    var r, i, o, s;
    t === void 0 && (t = !1),
    n === void 0 && (n = !1);
    const a = e.getBoundingClientRect();
    let l = 1
      , c = 1;
    t && Ps(e) && (l = e.offsetWidth > 0 && $2(a.width) / e.offsetWidth || 1,
    c = e.offsetHeight > 0 && $2(a.height) / e.offsetHeight || 1);
    const u = Kl(e) ? Na(e) : window
      , f = !tF() && n
      , h = (a.left + (f && (r = (i = u.visualViewport) == null ? void 0 : i.offsetLeft) != null ? r : 0)) / l
      , m = (a.top + (f && (o = (s = u.visualViewport) == null ? void 0 : s.offsetTop) != null ? o : 0)) / c
      , v = a.width / l
      , y = a.height / c;
    return {
        width: v,
        height: y,
        top: m,
        right: h + v,
        bottom: m + y,
        left: h,
        x: h,
        y: m
    }
}
function Nl(e) {
    return (t = e,
    (t instanceof Na(t).Node ? e.ownerDocument : e.document) || window.document).documentElement;
    var t
}
function dy(e) {
    return Kl(e) ? {
        scrollLeft: e.scrollLeft,
        scrollTop: e.scrollTop
    } : {
        scrollLeft: e.pageXOffset,
        scrollTop: e.pageYOffset
    }
}
function nF(e) {
    return va(Nl(e)).left + dy(e).scrollLeft
}
function Rce(e, t, n) {
    const r = Ps(t)
      , i = Nl(t)
      , o = va(e, r && function(l) {
        const c = va(l);
        return $2(c.width) !== l.offsetWidth || $2(c.height) !== l.offsetHeight
    }(t), n === "fixed");
    let s = {
        scrollLeft: 0,
        scrollTop: 0
    };
    const a = {
        x: 0,
        y: 0
    };
    if (r || !r && n !== "fixed")
        if ((ma(t) !== "body" || uy(i)) && (s = dy(t)),
        Ps(t)) {
            const l = va(t, !0);
            a.x = l.x + t.clientLeft,
            a.y = l.y + t.clientTop
        } else
            i && (a.x = nF(i));
    return {
        x: o.left + s.scrollLeft - a.x,
        y: o.top + s.scrollTop - a.y,
        width: o.width,
        height: o.height
    }
}
function rF(e) {
    return ma(e) === "html" ? e : e.assignedSlot || e.parentNode || (O4(e) ? e.host : null) || Nl(e)
}
function wA(e) {
    return Ps(e) && getComputedStyle(e).position !== "fixed" ? e.offsetParent : null
}
function z_(e) {
    const t = Na(e);
    let n = wA(e);
    for (; n && Pce(n) && getComputedStyle(n).position === "static"; )
        n = wA(n);
    return n && (ma(n) === "html" || ma(n) === "body" && getComputedStyle(n).position === "static" && !vA(n)) ? t : n || function(r) {
        let i = rF(r);
        for (O4(i) && (i = i.host); Ps(i) && !["html", "body"].includes(ma(i)); ) {
            if (vA(i))
                return i;
            i = i.parentNode
        }
        return null
    }(e) || t
}
function EA(e) {
    if (Ps(e))
        return {
            width: e.offsetWidth,
            height: e.offsetHeight
        };
    const t = va(e);
    return {
        width: t.width,
        height: t.height
    }
}
function iF(e) {
    const t = rF(e);
    return ["html", "body", "#document"].includes(ma(t)) ? e.ownerDocument.body : Ps(t) && uy(t) ? t : iF(t)
}
function U2(e, t) {
    var n;
    t === void 0 && (t = []);
    const r = iF(e)
      , i = r === ((n = e.ownerDocument) == null ? void 0 : n.body)
      , o = Na(r)
      , s = i ? [o].concat(o.visualViewport || [], uy(r) ? r : []) : r
      , a = t.concat(s);
    return i ? a : a.concat(U2(s))
}
function bA(e, t, n) {
    return t === "viewport" ? B2(function(r, i) {
        const o = Na(r)
          , s = Nl(r)
          , a = o.visualViewport;
        let l = s.clientWidth
          , c = s.clientHeight
          , u = 0
          , f = 0;
        if (a) {
            l = a.width,
            c = a.height;
            const h = tF();
            (h || !h && i === "fixed") && (u = a.offsetLeft,
            f = a.offsetTop)
        }
        return {
            width: l,
            height: c,
            x: u,
            y: f
        }
    }(e, n)) : Kl(t) ? function(r, i) {
        const o = va(r, !1, i === "fixed")
          , s = o.top + r.clientTop
          , a = o.left + r.clientLeft;
        return {
            top: s,
            left: a,
            x: a,
            y: s,
            right: a + r.clientWidth,
            bottom: s + r.clientHeight,
            width: r.clientWidth,
            height: r.clientHeight
        }
    }(t, n) : B2(function(r) {
        var i;
        const o = Nl(r)
          , s = dy(r)
          , a = (i = r.ownerDocument) == null ? void 0 : i.body
          , l = Sg(o.scrollWidth, o.clientWidth, a ? a.scrollWidth : 0, a ? a.clientWidth : 0)
          , c = Sg(o.scrollHeight, o.clientHeight, a ? a.scrollHeight : 0, a ? a.clientHeight : 0);
        let u = -s.scrollLeft + nF(r);
        const f = -s.scrollTop;
        return Qp(a || o).direction === "rtl" && (u += Sg(o.clientWidth, a ? a.clientWidth : 0) - l),
        {
            width: l,
            height: c,
            x: u,
            y: f
        }
    }(Nl(e)))
}
function Dce(e) {
    const t = U2(e)
      , n = ["absolute", "fixed"].includes(Qp(e).position) && Ps(e) ? z_(e) : e;
    return Kl(n) ? t.filter(r=>Kl(r) && function(i, o) {
        const s = o.getRootNode == null ? void 0 : o.getRootNode();
        if (i.contains(o))
            return !0;
        if (s && O4(s)) {
            let a = o;
            do {
                if (a && i === a)
                    return !0;
                a = a.parentNode || a.host
            } while (a)
        }
        return !1
    }(r, n) && ma(r) !== "body") : []
}
const Oce = {
    getClippingRect: function(e) {
        let {element: t, boundary: n, rootBoundary: r, strategy: i} = e;
        const o = [...n === "clippingAncestors" ? Dce(t) : [].concat(n), r]
          , s = o[0]
          , a = o.reduce((l,c)=>{
            const u = bA(t, c, i);
            return l.top = Sg(u.top, l.top),
            l.right = yA(u.right, l.right),
            l.bottom = yA(u.bottom, l.bottom),
            l.left = Sg(u.left, l.left),
            l
        }
        , bA(t, s, i));
        return {
            width: a.right - a.left,
            height: a.bottom - a.top,
            x: a.left,
            y: a.top
        }
    },
    convertOffsetParentRelativeRectToViewportRelativeRect: function(e) {
        let {rect: t, offsetParent: n, strategy: r} = e;
        const i = Ps(n)
          , o = Nl(n);
        if (n === o)
            return t;
        let s = {
            scrollLeft: 0,
            scrollTop: 0
        };
        const a = {
            x: 0,
            y: 0
        };
        if ((i || !i && r !== "fixed") && ((ma(n) !== "body" || uy(o)) && (s = dy(n)),
        Ps(n))) {
            const l = va(n, !0);
            a.x = l.x + n.clientLeft,
            a.y = l.y + n.clientTop
        }
        return {
            ...t,
            x: t.x - s.scrollLeft + a.x,
            y: t.y - s.scrollTop + a.y
        }
    },
    isElement: Kl,
    getDimensions: EA,
    getOffsetParent: z_,
    getDocumentElement: Nl,
    getElementRects: e=>{
        let {reference: t, floating: n, strategy: r} = e;
        return {
            reference: Rce(t, z_(n), r),
            floating: {
                ...EA(n),
                x: 0,
                y: 0
            }
        }
    }
    ,
    getClientRects: e=>Array.from(e.getClientRects()),
    isRTL: e=>Qp(e).direction === "rtl"
};
function Nce(e, t, n, r) {
    r === void 0 && (r = {});
    const {ancestorScroll: i=!0, ancestorResize: o=!0, elementResize: s=!0, animationFrame: a=!1} = r
      , l = i && !a
      , c = o && !a
      , u = l || c ? [...Kl(e) ? U2(e) : [], ...U2(t)] : [];
    u.forEach(v=>{
        l && v.addEventListener("scroll", n, {
            passive: !0
        }),
        c && v.addEventListener("resize", n)
    }
    );
    let f, h = null;
    if (s) {
        let v = !0;
        h = new ResizeObserver(()=>{
            v || n(),
            v = !1
        }
        ),
        Kl(e) && !a && h.observe(e),
        h.observe(t)
    }
    let m = a ? va(e) : null;
    return a && function v() {
        const y = va(e);
        !m || y.x === m.x && y.y === m.y && y.width === m.width && y.height === m.height || n(),
        m = y,
        f = requestAnimationFrame(v)
    }(),
    n(),
    ()=>{
        var v;
        u.forEach(y=>{
            l && y.removeEventListener("scroll", n),
            c && y.removeEventListener("resize", n)
        }
        ),
        (v = h) == null || v.disconnect(),
        h = null,
        a && cancelAnimationFrame(f)
    }
}
const Fce = (e,t,n)=>bce(e, t, {
    platform: Oce,
    ...n
});
var $_ = typeof document < "u" ? T.useLayoutEffect : T.useEffect;
function U_(e, t) {
    if (e === t)
        return !0;
    if (typeof e != typeof t)
        return !1;
    if (typeof e == "function" && e.toString() === t.toString())
        return !0;
    let n, r, i;
    if (e && t && typeof e == "object") {
        if (Array.isArray(e)) {
            if (n = e.length,
            n != t.length)
                return !1;
            for (r = n; r-- !== 0; )
                if (!U_(e[r], t[r]))
                    return !1;
            return !0
        }
        if (i = Object.keys(e),
        n = i.length,
        n !== Object.keys(t).length)
            return !1;
        for (r = n; r-- !== 0; )
            if (!Object.prototype.hasOwnProperty.call(t, i[r]))
                return !1;
        for (r = n; r-- !== 0; ) {
            const o = i[r];
            if (!(o === "_owner" && e.$$typeof) && !U_(e[o], t[o]))
                return !1
        }
        return !0
    }
    return e !== e && t !== t
}
function Bce(e) {
    const t = T.useRef(e);
    return $_(()=>{
        t.current = e
    }
    ),
    t
}
function zce(e) {
    let {middleware: t, placement: n="bottom", strategy: r="absolute", whileElementsMounted: i} = e === void 0 ? {} : e;
    const o = T.useRef(null)
      , s = T.useRef(null)
      , a = Bce(i)
      , l = T.useRef(null)
      , [c,u] = T.useState({
        x: null,
        y: null,
        strategy: r,
        placement: n,
        middlewareData: {}
    })
      , [f,h] = T.useState(t);
    U_(f == null ? void 0 : f.map(x=>{
        let {options: C} = x;
        return C
    }
    ), t == null ? void 0 : t.map(x=>{
        let {options: C} = x;
        return C
    }
    )) || h(t);
    const m = T.useCallback(()=>{
        !o.current || !s.current || Fce(o.current, s.current, {
            middleware: f,
            placement: n,
            strategy: r
        }).then(x=>{
            v.current && si.flushSync(()=>{
                u(x)
            }
            )
        }
        )
    }
    , [f, n, r]);
    $_(()=>{
        v.current && m()
    }
    , [m]);
    const v = T.useRef(!1);
    $_(()=>(v.current = !0,
    ()=>{
        v.current = !1
    }
    ), []);
    const y = T.useCallback(()=>{
        if (typeof l.current == "function" && (l.current(),
        l.current = null),
        o.current && s.current)
            if (a.current) {
                const x = a.current(o.current, s.current, m);
                l.current = x
            } else
                m()
    }
    , [m, a])
      , E = T.useCallback(x=>{
        o.current = x,
        y()
    }
    , [y])
      , b = T.useCallback(x=>{
        s.current = x,
        y()
    }
    , [y])
      , _ = T.useMemo(()=>({
        reference: o,
        floating: s
    }), []);
    return T.useMemo(()=>({
        ...c,
        update: m,
        refs: _,
        reference: E,
        floating: b
    }), [c, m, _, E, b])
}
const $ce = e=>{
    const {element: t, padding: n} = e;
    function r(i) {
        return Object.prototype.hasOwnProperty.call(i, "current")
    }
    return {
        name: "arrow",
        options: e,
        fn(i) {
            return r(t) ? t.current != null ? hA({
                element: t.current,
                padding: n
            }).fn(i) : {} : t ? hA({
                element: t,
                padding: n
            }).fn(i) : {}
        }
    }
}
  , Uce = T.forwardRef((e,t)=>{
    const {children: n, width: r=10, height: i=5, ...o} = e;
    return T.createElement(pi.svg, Ft({}, o, {
        ref: t,
        width: r,
        height: i,
        viewBox: "0 0 30 10",
        preserveAspectRatio: "none"
    }), e.asChild ? n : T.createElement("polygon", {
        points: "0,0 30,0 15,10"
    }))
}
)
  , Hce = Uce;
function Wce(e) {
    const [t,n] = T.useState(void 0);
    return wl(()=>{
        if (e) {
            n({
                width: e.offsetWidth,
                height: e.offsetHeight
            });
            const r = new ResizeObserver(i=>{
                if (!Array.isArray(i) || !i.length)
                    return;
                const o = i[0];
                let s, a;
                if ("borderBoxSize"in o) {
                    const l = o.borderBoxSize
                      , c = Array.isArray(l) ? l[0] : l;
                    s = c.inlineSize,
                    a = c.blockSize
                } else
                    s = e.offsetWidth,
                    a = e.offsetHeight;
                n({
                    width: s,
                    height: a
                })
            }
            );
            return r.observe(e, {
                box: "border-box"
            }),
            ()=>r.unobserve(e)
        } else
            n(void 0)
    }
    , [e]),
    t
}
const oF = "Popper"
  , [N4,sF] = Zp(oF)
  , [Gce,aF] = N4(oF)
  , Vce = e=>{
    const {__scopePopper: t, children: n} = e
      , [r,i] = T.useState(null);
    return T.createElement(Gce, {
        scope: t,
        anchor: r,
        onAnchorChange: i
    }, n)
}
  , Yce = "PopperAnchor"
  , jce = T.forwardRef((e,t)=>{
    const {__scopePopper: n, virtualRef: r, ...i} = e
      , o = aF(Yce, n)
      , s = T.useRef(null)
      , a = Ls(t, s);
    return T.useEffect(()=>{
        o.onAnchorChange((r == null ? void 0 : r.current) || s.current)
    }
    ),
    r ? null : T.createElement(pi.div, Ft({}, i, {
        ref: a
    }))
}
)
  , H2 = "PopperContent"
  , [Kce,Xce] = N4(H2)
  , [Zce,qce] = N4(H2, {
    hasParent: !1,
    positionUpdateFns: new Set
})
  , Qce = T.forwardRef((e,t)=>{
    var n, r, i, o, s, a, l, c;
    const {__scopePopper: u, side: f="bottom", sideOffset: h=0, align: m="center", alignOffset: v=0, arrowPadding: y=0, collisionBoundary: E=[], collisionPadding: b=0, sticky: _="partial", hideWhenDetached: x=!1, avoidCollisions: C=!0, onPlaced: P, ...M} = e
      , A = aF(H2, u)
      , [I,O] = T.useState(null)
      , N = Ls(t, $i=>O($i))
      , [$,V] = T.useState(null)
      , z = Wce($)
      , j = (n = z == null ? void 0 : z.width) !== null && n !== void 0 ? n : 0
      , re = (r = z == null ? void 0 : z.height) !== null && r !== void 0 ? r : 0
      , se = f + (m !== "center" ? "-" + m : "")
      , ae = typeof b == "number" ? b : {
        top: 0,
        right: 0,
        bottom: 0,
        left: 0,
        ...b
    }
      , q = Array.isArray(E) ? E : [E]
      , K = q.length > 0
      , G = {
        padding: ae,
        boundary: q.filter(rue),
        altBoundary: K
    }
      , {reference: H, floating: J, strategy: te, x: oe, y: de, placement: pe, middlewareData: be, update: tt} = zce({
        strategy: "fixed",
        placement: se,
        whileElementsMounted: Nce,
        middleware: [iue(), Tce({
            mainAxis: h + re,
            alignmentAxis: v
        }), C ? Ace({
            mainAxis: !0,
            crossAxis: !1,
            limiter: _ === "partial" ? Mce() : void 0,
            ...G
        }) : void 0, $ ? $ce({
            element: $,
            padding: y
        }) : void 0, C ? Cce({
            ...G
        }) : void 0, Lce({
            ...G,
            apply: ({elements: $i, availableWidth: Nu, availableHeight: My})=>{
                $i.floating.style.setProperty("--radix-popper-available-width", `${Nu}px`),
                $i.floating.style.setProperty("--radix-popper-available-height", `${My}px`)
            }
        }), oue({
            arrowWidth: j,
            arrowHeight: re
        }), x ? kce({
            strategy: "referenceHidden"
        }) : void 0].filter(nue)
    });
    wl(()=>{
        H(A.anchor)
    }
    , [H, A.anchor]);
    const Je = oe !== null && de !== null
      , [nt,ot] = lF(pe)
      , kt = Aa(P);
    wl(()=>{
        Je && (kt == null || kt())
    }
    , [Je, kt]);
    const dr = (i = be.arrow) === null || i === void 0 ? void 0 : i.x
      , Wt = (o = be.arrow) === null || o === void 0 ? void 0 : o.y
      , fr = ((s = be.arrow) === null || s === void 0 ? void 0 : s.centerOffset) !== 0
      , [kr,Vn] = T.useState();
    wl(()=>{
        I && Vn(window.getComputedStyle(I).zIndex)
    }
    , [I]);
    const {hasParent: Rn, positionUpdateFns: Tr} = qce(H2, u)
      , Dn = !Rn;
    T.useLayoutEffect(()=>{
        if (!Dn)
            return Tr.add(tt),
            ()=>{
                Tr.delete(tt)
            }
    }
    , [Dn, Tr, tt]),
    wl(()=>{
        Dn && Je && Array.from(Tr).reverse().forEach($i=>requestAnimationFrame($i))
    }
    , [Dn, Je, Tr]);
    const Xr = {
        "data-side": nt,
        "data-align": ot,
        ...M,
        ref: N,
        style: {
            ...M.style,
            animation: Je ? void 0 : "none",
            opacity: (a = be.hide) !== null && a !== void 0 && a.referenceHidden ? 0 : void 0
        }
    };
    return T.createElement("div", {
        ref: J,
        "data-radix-popper-content-wrapper": "",
        style: {
            position: te,
            left: 0,
            top: 0,
            transform: Je ? `translate3d(${Math.round(oe)}px, ${Math.round(de)}px, 0)` : "translate3d(0, -200%, 0)",
            minWidth: "max-content",
            zIndex: kr,
            "--radix-popper-transform-origin": [(l = be.transformOrigin) === null || l === void 0 ? void 0 : l.x, (c = be.transformOrigin) === null || c === void 0 ? void 0 : c.y].join(" ")
        },
        dir: e.dir
    }, T.createElement(Kce, {
        scope: u,
        placedSide: nt,
        onArrowChange: V,
        arrowX: dr,
        arrowY: Wt,
        shouldHideArrow: fr
    }, Dn ? T.createElement(Zce, {
        scope: u,
        hasParent: !0,
        positionUpdateFns: Tr
    }, T.createElement(pi.div, Xr)) : T.createElement(pi.div, Xr)))
}
)
  , Jce = "PopperArrow"
  , eue = {
    top: "bottom",
    right: "left",
    bottom: "top",
    left: "right"
}
  , tue = T.forwardRef(function(t, n) {
    const {__scopePopper: r, ...i} = t
      , o = Xce(Jce, r)
      , s = eue[o.placedSide];
    return T.createElement("span", {
        ref: o.onArrowChange,
        style: {
            position: "absolute",
            left: o.arrowX,
            top: o.arrowY,
            [s]: 0,
            transformOrigin: {
                top: "",
                right: "0 0",
                bottom: "center 0",
                left: "100% 0"
            }[o.placedSide],
            transform: {
                top: "translateY(100%)",
                right: "translateY(50%) rotate(90deg) translateX(-50%)",
                bottom: "rotate(180deg)",
                left: "translateY(50%) rotate(-90deg) translateX(50%)"
            }[o.placedSide],
            visibility: o.shouldHideArrow ? "hidden" : void 0
        }
    }, T.createElement(Hce, Ft({}, i, {
        ref: n,
        style: {
            ...i.style,
            display: "block"
        }
    })))
});
function nue(e) {
    return e !== void 0
}
function rue(e) {
    return e !== null
}
const iue = ()=>({
    name: "anchorCssProperties",
    fn(e) {
        const {rects: t, elements: n} = e
          , {width: r, height: i} = t.reference;
        return n.floating.style.setProperty("--radix-popper-anchor-width", `${r}px`),
        n.floating.style.setProperty("--radix-popper-anchor-height", `${i}px`),
        {}
    }
})
  , oue = e=>({
    name: "transformOrigin",
    options: e,
    fn(t) {
        var n, r, i, o, s;
        const {placement: a, rects: l, middlewareData: c} = t
          , f = ((n = c.arrow) === null || n === void 0 ? void 0 : n.centerOffset) !== 0
          , h = f ? 0 : e.arrowWidth
          , m = f ? 0 : e.arrowHeight
          , [v,y] = lF(a)
          , E = {
            start: "0%",
            center: "50%",
            end: "100%"
        }[y]
          , b = ((r = (i = c.arrow) === null || i === void 0 ? void 0 : i.x) !== null && r !== void 0 ? r : 0) + h / 2
          , _ = ((o = (s = c.arrow) === null || s === void 0 ? void 0 : s.y) !== null && o !== void 0 ? o : 0) + m / 2;
        let x = ""
          , C = "";
        return v === "bottom" ? (x = f ? E : `${b}px`,
        C = `${-m}px`) : v === "top" ? (x = f ? E : `${b}px`,
        C = `${l.floating.height + m}px`) : v === "right" ? (x = `${-m}px`,
        C = f ? E : `${_}px`) : v === "left" && (x = `${l.floating.width + m}px`,
        C = f ? E : `${_}px`),
        {
            data: {
                x,
                y: C
            }
        }
    }
});
function lF(e) {
    const [t,n="center"] = e.split("-");
    return [t, n]
}
const sue = Vce
  , aue = jce
  , lue = Qce
  , cue = tue
  , uue = T.forwardRef((e,t)=>{
    var n;
    const {container: r=globalThis == null || (n = globalThis.document) === null || n === void 0 ? void 0 : n.body, ...i} = e;
    return r ? OZ.createPortal(T.createElement(pi.div, Ft({}, i, {
        ref: t
    })), r) : null
}
);
function due(e, t) {
    return T.useReducer((n,r)=>{
        const i = t[n][r];
        return i ?? n
    }
    , e)
}
const fy = e=>{
    const {present: t, children: n} = e
      , r = fue(t)
      , i = typeof n == "function" ? n({
        present: r.isPresent
    }) : T.Children.only(n)
      , o = Ls(r.ref, i.ref);
    return typeof n == "function" || r.isPresent ? T.cloneElement(i, {
        ref: o
    }) : null
}
;
fy.displayName = "Presence";
function fue(e) {
    const [t,n] = T.useState()
      , r = T.useRef({})
      , i = T.useRef(e)
      , o = T.useRef("none")
      , s = e ? "mounted" : "unmounted"
      , [a,l] = due(s, {
        mounted: {
            UNMOUNT: "unmounted",
            ANIMATION_OUT: "unmountSuspended"
        },
        unmountSuspended: {
            MOUNT: "mounted",
            ANIMATION_END: "unmounted"
        },
        unmounted: {
            MOUNT: "mounted"
        }
    });
    return T.useEffect(()=>{
        const c = L0(r.current);
        o.current = a === "mounted" ? c : "none"
    }
    , [a]),
    wl(()=>{
        const c = r.current
          , u = i.current;
        if (u !== e) {
            const h = o.current
              , m = L0(c);
            e ? l("MOUNT") : m === "none" || (c == null ? void 0 : c.display) === "none" ? l("UNMOUNT") : l(u && h !== m ? "ANIMATION_OUT" : "UNMOUNT"),
            i.current = e
        }
    }
    , [e, l]),
    wl(()=>{
        if (t) {
            const c = f=>{
                const m = L0(r.current).includes(f.animationName);
                f.target === t && m && si.flushSync(()=>l("ANIMATION_END"))
            }
              , u = f=>{
                f.target === t && (o.current = L0(r.current))
            }
            ;
            return t.addEventListener("animationstart", u),
            t.addEventListener("animationcancel", c),
            t.addEventListener("animationend", c),
            ()=>{
                t.removeEventListener("animationstart", u),
                t.removeEventListener("animationcancel", c),
                t.removeEventListener("animationend", c)
            }
        } else
            l("ANIMATION_END")
    }
    , [t, l]),
    {
        isPresent: ["mounted", "unmountSuspended"].includes(a),
        ref: T.useCallback(c=>{
            c && (r.current = getComputedStyle(c)),
            n(c)
        }
        , [])
    }
}
function L0(e) {
    return (e == null ? void 0 : e.animationName) || "none"
}
function F4({prop: e, defaultProp: t, onChange: n=()=>{}
}) {
    const [r,i] = hue({
        defaultProp: t,
        onChange: n
    })
      , o = e !== void 0
      , s = o ? e : r
      , a = Aa(n)
      , l = T.useCallback(c=>{
        if (o) {
            const f = typeof c == "function" ? c(e) : c;
            f !== e && a(f)
        } else
            i(c)
    }
    , [o, e, i, a]);
    return [s, l]
}
function hue({defaultProp: e, onChange: t}) {
    const n = T.useState(e)
      , [r] = n
      , i = T.useRef(r)
      , o = Aa(t);
    return T.useEffect(()=>{
        i.current !== r && (o(r),
        i.current = r)
    }
    , [r, i, o]),
    n
}
var gue = function(e) {
    if (typeof document > "u")
        return null;
    var t = Array.isArray(e) ? e[0] : e;
    return t.ownerDocument.body
}
  , od = new WeakMap
  , P0 = new WeakMap
  , R0 = {}
  , gb = 0
  , cF = function(e) {
    return e && (e.host || cF(e.parentNode))
}
  , pue = function(e, t) {
    return t.map(function(n) {
        if (e.contains(n))
            return n;
        var r = cF(n);
        return r && e.contains(r) ? r : (console.error("aria-hidden", n, "in not contained inside", e, ". Doing nothing"),
        null)
    }).filter(function(n) {
        return !!n
    })
}
  , mue = function(e, t, n, r) {
    var i = pue(t, Array.isArray(e) ? e : [e]);
    R0[n] || (R0[n] = new WeakMap);
    var o = R0[n]
      , s = []
      , a = new Set
      , l = new Set(i)
      , c = function(f) {
        !f || a.has(f) || (a.add(f),
        c(f.parentNode))
    };
    i.forEach(c);
    var u = function(f) {
        !f || l.has(f) || Array.prototype.forEach.call(f.children, function(h) {
            if (a.has(h))
                u(h);
            else
                try {
                    var m = h.getAttribute(r)
                      , v = m !== null && m !== "false"
                      , y = (od.get(h) || 0) + 1
                      , E = (o.get(h) || 0) + 1;
                    od.set(h, y),
                    o.set(h, E),
                    s.push(h),
                    y === 1 && v && P0.set(h, !0),
                    E === 1 && h.setAttribute(n, "true"),
                    v || h.setAttribute(r, "true")
                } catch (b) {
                    console.error("aria-hidden: cannot operate on ", h, b)
                }
        })
    };
    return u(t),
    a.clear(),
    gb++,
    function() {
        s.forEach(function(f) {
            var h = od.get(f) - 1
              , m = o.get(f) - 1;
            od.set(f, h),
            o.set(f, m),
            h || (P0.has(f) || f.removeAttribute(r),
            P0.delete(f)),
            m || f.removeAttribute(n)
        }),
        gb--,
        gb || (od = new WeakMap,
        od = new WeakMap,
        P0 = new WeakMap,
        R0 = {})
    }
}
  , vue = function(e, t, n) {
    n === void 0 && (n = "data-aria-hidden");
    var r = Array.from(Array.isArray(e) ? e : [e])
      , i = gue(e);
    return i ? (r.push.apply(r, Array.from(i.querySelectorAll("[aria-live]"))),
    mue(r, i, n, "aria-hidden")) : function() {
        return null
    }
}
  , H_ = function(e, t) {
    return H_ = Object.setPrototypeOf || {
        __proto__: []
    }instanceof Array && function(n, r) {
        n.__proto__ = r
    }
    || function(n, r) {
        for (var i in r)
            Object.prototype.hasOwnProperty.call(r, i) && (n[i] = r[i])
    }
    ,
    H_(e, t)
};
function gve(e, t) {
    if (typeof t != "function" && t !== null)
        throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
    H_(e, t);
    function n() {
        this.constructor = e
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype,
    new n)
}
var ws = function() {
    return ws = Object.assign || function(t) {
        for (var n, r = 1, i = arguments.length; r < i; r++) {
            n = arguments[r];
            for (var o in n)
                Object.prototype.hasOwnProperty.call(n, o) && (t[o] = n[o])
        }
        return t
    }
    ,
    ws.apply(this, arguments)
};
function uF(e, t) {
    var n = {};
    for (var r in e)
        Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
    if (e != null && typeof Object.getOwnPropertySymbols == "function")
        for (var i = 0, r = Object.getOwnPropertySymbols(e); i < r.length; i++)
            t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]]);
    return n
}
function pve(e, t, n, r) {
    function i(o) {
        return o instanceof n ? o : new n(function(s) {
            s(o)
        }
        )
    }
    return new (n || (n = Promise))(function(o, s) {
        function a(u) {
            try {
                c(r.next(u))
            } catch (f) {
                s(f)
            }
        }
        function l(u) {
            try {
                c(r.throw(u))
            } catch (f) {
                s(f)
            }
        }
        function c(u) {
            u.done ? o(u.value) : i(u.value).then(a, l)
        }
        c((r = r.apply(e, t || [])).next())
    }
    )
}
function mve(e, t) {
    var n = {
        label: 0,
        sent: function() {
            if (o[0] & 1)
                throw o[1];
            return o[1]
        },
        trys: [],
        ops: []
    }, r, i, o, s;
    return s = {
        next: a(0),
        throw: a(1),
        return: a(2)
    },
    typeof Symbol == "function" && (s[Symbol.iterator] = function() {
        return this
    }
    ),
    s;
    function a(c) {
        return function(u) {
            return l([c, u])
        }
    }
    function l(c) {
        if (r)
            throw new TypeError("Generator is already executing.");
        for (; s && (s = 0,
        c[0] && (n = 0)),
        n; )
            try {
                if (r = 1,
                i && (o = c[0] & 2 ? i.return : c[0] ? i.throw || ((o = i.return) && o.call(i),
                0) : i.next) && !(o = o.call(i, c[1])).done)
                    return o;
                switch (i = 0,
                o && (c = [c[0] & 2, o.value]),
                c[0]) {
                case 0:
                case 1:
                    o = c;
                    break;
                case 4:
                    return n.label++,
                    {
                        value: c[1],
                        done: !1
                    };
                case 5:
                    n.label++,
                    i = c[1],
                    c = [0];
                    continue;
                case 7:
                    c = n.ops.pop(),
                    n.trys.pop();
                    continue;
                default:
                    if (o = n.trys,
                    !(o = o.length > 0 && o[o.length - 1]) && (c[0] === 6 || c[0] === 2)) {
                        n = 0;
                        continue
                    }
                    if (c[0] === 3 && (!o || c[1] > o[0] && c[1] < o[3])) {
                        n.label = c[1];
                        break
                    }
                    if (c[0] === 6 && n.label < o[1]) {
                        n.label = o[1],
                        o = c;
                        break
                    }
                    if (o && n.label < o[2]) {
                        n.label = o[2],
                        n.ops.push(c);
                        break
                    }
                    o[2] && n.ops.pop(),
                    n.trys.pop();
                    continue
                }
                c = t.call(e, n)
            } catch (u) {
                c = [6, u],
                i = 0
            } finally {
                r = o = 0
            }
        if (c[0] & 5)
            throw c[1];
        return {
            value: c[0] ? c[1] : void 0,
            done: !0
        }
    }
}
function vve(e) {
    var t = typeof Symbol == "function" && Symbol.iterator
      , n = t && e[t]
      , r = 0;
    if (n)
        return n.call(e);
    if (e && typeof e.length == "number")
        return {
            next: function() {
                return e && r >= e.length && (e = void 0),
                {
                    value: e && e[r++],
                    done: !e
                }
            }
        };
    throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.")
}
function yve(e, t) {
    var n = typeof Symbol == "function" && e[Symbol.iterator];
    if (!n)
        return e;
    var r = n.call(e), i, o = [], s;
    try {
        for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; )
            o.push(i.value)
    } catch (a) {
        s = {
            error: a
        }
    } finally {
        try {
            i && !i.done && (n = r.return) && n.call(r)
        } finally {
            if (s)
                throw s.error
        }
    }
    return o
}
function yue(e, t, n) {
    if (n || arguments.length === 2)
        for (var r = 0, i = t.length, o; r < i; r++)
            (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)),
            o[r] = t[r]);
    return e.concat(o || Array.prototype.slice.call(t))
}
var Sm = "right-scroll-bar-position"
  , Im = "width-before-scroll-bar"
  , wue = "with-scroll-bars-hidden"
  , Eue = "--removed-body-scroll-bar-size";
function pb(e, t) {
    return typeof e == "function" ? e(t) : e && (e.current = t),
    e
}
function bue(e, t) {
    var n = T.useState(function() {
        return {
            value: e,
            callback: t,
            facade: {
                get current() {
                    return n.value
                },
                set current(r) {
                    var i = n.value;
                    i !== r && (n.value = r,
                    n.callback(r, i))
                }
            }
        }
    })[0];
    return n.callback = t,
    n.facade
}
var _ue = typeof window < "u" ? T.useLayoutEffect : T.useEffect
  , _A = new WeakMap;
function xue(e, t) {
    var n = bue(null, function(r) {
        return e.forEach(function(i) {
            return pb(i, r)
        })
    });
    return _ue(function() {
        var r = _A.get(n);
        if (r) {
            var i = new Set(r)
              , o = new Set(e)
              , s = n.current;
            i.forEach(function(a) {
                o.has(a) || pb(a, null)
            }),
            o.forEach(function(a) {
                i.has(a) || pb(a, s)
            })
        }
        _A.set(n, e)
    }, [e]),
    n
}
function Sue(e) {
    return e
}
function Iue(e, t) {
    t === void 0 && (t = Sue);
    var n = []
      , r = !1
      , i = {
        read: function() {
            if (r)
                throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");
            return n.length ? n[n.length - 1] : e
        },
        useMedium: function(o) {
            var s = t(o, r);
            return n.push(s),
            function() {
                n = n.filter(function(a) {
                    return a !== s
                })
            }
        },
        assignSyncMedium: function(o) {
            for (r = !0; n.length; ) {
                var s = n;
                n = [],
                s.forEach(o)
            }
            n = {
                push: function(a) {
                    return o(a)
                },
                filter: function() {
                    return n
                }
            }
        },
        assignMedium: function(o) {
            r = !0;
            var s = [];
            if (n.length) {
                var a = n;
                n = [],
                a.forEach(o),
                s = n
            }
            var l = function() {
                var u = s;
                s = [],
                u.forEach(o)
            }
              , c = function() {
                return Promise.resolve().then(l)
            };
            c(),
            n = {
                push: function(u) {
                    s.push(u),
                    c()
                },
                filter: function(u) {
                    return s = s.filter(u),
                    n
                }
            }
        }
    };
    return i
}
function Cue(e) {
    e === void 0 && (e = {});
    var t = Iue(null);
    return t.options = ws({
        async: !0,
        ssr: !1
    }, e),
    t
}
var dF = function(e) {
    var t = e.sideCar
      , n = uF(e, ["sideCar"]);
    if (!t)
        throw new Error("Sidecar: please provide `sideCar` property to import the right car");
    var r = t.read();
    if (!r)
        throw new Error("Sidecar medium not found");
    return T.createElement(r, ws({}, n))
};
dF.isSideCarExport = !0;
function kue(e, t) {
    return e.useMedium(t),
    dF
}
var fF = Cue()
  , mb = function() {}
  , hy = T.forwardRef(function(e, t) {
    var n = T.useRef(null)
      , r = T.useState({
        onScrollCapture: mb,
        onWheelCapture: mb,
        onTouchMoveCapture: mb
    })
      , i = r[0]
      , o = r[1]
      , s = e.forwardProps
      , a = e.children
      , l = e.className
      , c = e.removeScrollBar
      , u = e.enabled
      , f = e.shards
      , h = e.sideCar
      , m = e.noIsolation
      , v = e.inert
      , y = e.allowPinchZoom
      , E = e.as
      , b = E === void 0 ? "div" : E
      , _ = uF(e, ["forwardProps", "children", "className", "removeScrollBar", "enabled", "shards", "sideCar", "noIsolation", "inert", "allowPinchZoom", "as"])
      , x = h
      , C = xue([n, t])
      , P = ws(ws({}, _), i);
    return T.createElement(T.Fragment, null, u && T.createElement(x, {
        sideCar: fF,
        removeScrollBar: c,
        shards: f,
        noIsolation: m,
        inert: v,
        setCallbacks: o,
        allowPinchZoom: !!y,
        lockRef: n
    }), s ? T.cloneElement(T.Children.only(a), ws(ws({}, P), {
        ref: C
    })) : T.createElement(b, ws({}, P, {
        className: l,
        ref: C
    }), a))
});
hy.defaultProps = {
    enabled: !0,
    removeScrollBar: !0,
    inert: !1
};
hy.classNames = {
    fullWidth: Im,
    zeroRight: Sm
};
var Tue = function() {
    if (typeof __webpack_nonce__ < "u")
        return __webpack_nonce__
};
function Aue() {
    if (!document)
        return null;
    var e = document.createElement("style");
    e.type = "text/css";
    var t = Tue();
    return t && e.setAttribute("nonce", t),
    e
}
function Mue(e, t) {
    e.styleSheet ? e.styleSheet.cssText = t : e.appendChild(document.createTextNode(t))
}
function Lue(e) {
    var t = document.head || document.getElementsByTagName("head")[0];
    t.appendChild(e)
}
var Pue = function() {
    var e = 0
      , t = null;
    return {
        add: function(n) {
            e == 0 && (t = Aue()) && (Mue(t, n),
            Lue(t)),
            e++
        },
        remove: function() {
            e--,
            !e && t && (t.parentNode && t.parentNode.removeChild(t),
            t = null)
        }
    }
}
  , Rue = function() {
    var e = Pue();
    return function(t, n) {
        T.useEffect(function() {
            return e.add(t),
            function() {
                e.remove()
            }
        }, [t && n])
    }
}
  , hF = function() {
    var e = Rue()
      , t = function(n) {
        var r = n.styles
          , i = n.dynamic;
        return e(r, i),
        null
    };
    return t
}
  , Due = {
    left: 0,
    top: 0,
    right: 0,
    gap: 0
}
  , vb = function(e) {
    return parseInt(e || "", 10) || 0
}
  , Oue = function(e) {
    var t = window.getComputedStyle(document.body)
      , n = t[e === "padding" ? "paddingLeft" : "marginLeft"]
      , r = t[e === "padding" ? "paddingTop" : "marginTop"]
      , i = t[e === "padding" ? "paddingRight" : "marginRight"];
    return [vb(n), vb(r), vb(i)]
}
  , Nue = function(e) {
    if (e === void 0 && (e = "margin"),
    typeof window > "u")
        return Due;
    var t = Oue(e)
      , n = document.documentElement.clientWidth
      , r = window.innerWidth;
    return {
        left: t[0],
        top: t[1],
        right: t[2],
        gap: Math.max(0, r - n + t[2] - t[0])
    }
}
  , Fue = hF()
  , Xd = "data-scroll-locked"
  , Bue = function(e, t, n, r) {
    var i = e.left
      , o = e.top
      , s = e.right
      , a = e.gap;
    return n === void 0 && (n = "margin"),
    `
  .`.concat(wue, ` {
   overflow: hidden `).concat(r, `;
   padding-right: `).concat(a, "px ").concat(r, `;
  }
  body[`).concat(Xd, `] {
    overflow: hidden `).concat(r, `;
    overscroll-behavior: contain;
    `).concat([t && "position: relative ".concat(r, ";"), n === "margin" && `
    padding-left: `.concat(i, `px;
    padding-top: `).concat(o, `px;
    padding-right: `).concat(s, `px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a, "px ").concat(r, `;
    `), n === "padding" && "padding-right: ".concat(a, "px ").concat(r, ";")].filter(Boolean).join(""), `
  }
  
  .`).concat(Sm, ` {
    right: `).concat(a, "px ").concat(r, `;
  }
  
  .`).concat(Im, ` {
    margin-right: `).concat(a, "px ").concat(r, `;
  }
  
  .`).concat(Sm, " .").concat(Sm, ` {
    right: 0 `).concat(r, `;
  }
  
  .`).concat(Im, " .").concat(Im, ` {
    margin-right: 0 `).concat(r, `;
  }
  
  body[`).concat(Xd, `] {
    `).concat(Eue, ": ").concat(a, `px;
  }
`)
}
  , xA = function() {
    var e = parseInt(document.body.getAttribute(Xd) || "0", 10);
    return isFinite(e) ? e : 0
}
  , zue = function() {
    T.useEffect(function() {
        return document.body.setAttribute(Xd, (xA() + 1).toString()),
        function() {
            var e = xA() - 1;
            e <= 0 ? document.body.removeAttribute(Xd) : document.body.setAttribute(Xd, e.toString())
        }
    }, [])
}
  , $ue = function(e) {
    var t = e.noRelative
      , n = e.noImportant
      , r = e.gapMode
      , i = r === void 0 ? "margin" : r;
    zue();
    var o = T.useMemo(function() {
        return Nue(i)
    }, [i]);
    return T.createElement(Fue, {
        styles: Bue(o, !t, i, n ? "" : "!important")
    })
}
  , W_ = !1;
if (typeof window < "u")
    try {
        var D0 = Object.defineProperty({}, "passive", {
            get: function() {
                return W_ = !0,
                !0
            }
        });
        window.addEventListener("test", D0, D0),
        window.removeEventListener("test", D0, D0)
    } catch {
        W_ = !1
    }
var sd = W_ ? {
    passive: !1
} : !1
  , Uue = function(e) {
    return e.tagName === "TEXTAREA"
}
  , gF = function(e, t) {
    var n = window.getComputedStyle(e);
    return n[t] !== "hidden" && !(n.overflowY === n.overflowX && !Uue(e) && n[t] === "visible")
}
  , Hue = function(e) {
    return gF(e, "overflowY")
}
  , Wue = function(e) {
    return gF(e, "overflowX")
}
  , SA = function(e, t) {
    var n = t;
    do {
        typeof ShadowRoot < "u" && n instanceof ShadowRoot && (n = n.host);
        var r = pF(e, n);
        if (r) {
            var i = mF(e, n)
              , o = i[1]
              , s = i[2];
            if (o > s)
                return !0
        }
        n = n.parentNode
    } while (n && n !== document.body);
    return !1
}
  , Gue = function(e) {
    var t = e.scrollTop
      , n = e.scrollHeight
      , r = e.clientHeight;
    return [t, n, r]
}
  , Vue = function(e) {
    var t = e.scrollLeft
      , n = e.scrollWidth
      , r = e.clientWidth;
    return [t, n, r]
}
  , pF = function(e, t) {
    return e === "v" ? Hue(t) : Wue(t)
}
  , mF = function(e, t) {
    return e === "v" ? Gue(t) : Vue(t)
}
  , Yue = function(e, t) {
    return e === "h" && t === "rtl" ? -1 : 1
}
  , jue = function(e, t, n, r, i) {
    var o = Yue(e, window.getComputedStyle(t).direction)
      , s = o * r
      , a = n.target
      , l = t.contains(a)
      , c = !1
      , u = s > 0
      , f = 0
      , h = 0;
    do {
        var m = mF(e, a)
          , v = m[0]
          , y = m[1]
          , E = m[2]
          , b = y - E - o * v;
        (v || b) && pF(e, a) && (f += b,
        h += v),
        a = a.parentNode
    } while (!l && a !== document.body || l && (t.contains(a) || t === a));
    return (u && (f === 0 || !i) || !u && (h === 0 || !i)) && (c = !0),
    c
}
  , O0 = function(e) {
    return "changedTouches"in e ? [e.changedTouches[0].clientX, e.changedTouches[0].clientY] : [0, 0]
}
  , IA = function(e) {
    return [e.deltaX, e.deltaY]
}
  , CA = function(e) {
    return e && "current"in e ? e.current : e
}
  , Kue = function(e, t) {
    return e[0] === t[0] && e[1] === t[1]
}
  , Xue = function(e) {
    return `
  .block-interactivity-`.concat(e, ` {pointer-events: none;}
  .allow-interactivity-`).concat(e, ` {pointer-events: all;}
`)
}
  , Zue = 0
  , ad = [];
function que(e) {
    var t = T.useRef([])
      , n = T.useRef([0, 0])
      , r = T.useRef()
      , i = T.useState(Zue++)[0]
      , o = T.useState(function() {
        return hF()
    })[0]
      , s = T.useRef(e);
    T.useEffect(function() {
        s.current = e
    }, [e]),
    T.useEffect(function() {
        if (e.inert) {
            document.body.classList.add("block-interactivity-".concat(i));
            var y = yue([e.lockRef.current], (e.shards || []).map(CA), !0).filter(Boolean);
            return y.forEach(function(E) {
                return E.classList.add("allow-interactivity-".concat(i))
            }),
            function() {
                document.body.classList.remove("block-interactivity-".concat(i)),
                y.forEach(function(E) {
                    return E.classList.remove("allow-interactivity-".concat(i))
                })
            }
        }
    }, [e.inert, e.lockRef.current, e.shards]);
    var a = T.useCallback(function(y, E) {
        if ("touches"in y && y.touches.length === 2)
            return !s.current.allowPinchZoom;
        var b = O0(y), _ = n.current, x = "deltaX"in y ? y.deltaX : _[0] - b[0], C = "deltaY"in y ? y.deltaY : _[1] - b[1], P, M = y.target, A = Math.abs(x) > Math.abs(C) ? "h" : "v";
        if ("touches"in y && A === "h" && M.type === "range")
            return !1;
        var I = SA(A, M);
        if (!I)
            return !0;
        if (I ? P = A : (P = A === "v" ? "h" : "v",
        I = SA(A, M)),
        !I)
            return !1;
        if (!r.current && "changedTouches"in y && (x || C) && (r.current = P),
        !P)
            return !0;
        var O = r.current || P;
        return jue(O, E, y, O === "h" ? x : C, !0)
    }, [])
      , l = T.useCallback(function(y) {
        var E = y;
        if (!(!ad.length || ad[ad.length - 1] !== o)) {
            var b = "deltaY"in E ? IA(E) : O0(E)
              , _ = t.current.filter(function(P) {
                return P.name === E.type && P.target === E.target && Kue(P.delta, b)
            })[0];
            if (_ && _.should) {
                E.cancelable && E.preventDefault();
                return
            }
            if (!_) {
                var x = (s.current.shards || []).map(CA).filter(Boolean).filter(function(P) {
                    return P.contains(E.target)
                })
                  , C = x.length > 0 ? a(E, x[0]) : !s.current.noIsolation;
                C && E.cancelable && E.preventDefault()
            }
        }
    }, [])
      , c = T.useCallback(function(y, E, b, _) {
        var x = {
            name: y,
            delta: E,
            target: b,
            should: _
        };
        t.current.push(x),
        setTimeout(function() {
            t.current = t.current.filter(function(C) {
                return C !== x
            })
        }, 1)
    }, [])
      , u = T.useCallback(function(y) {
        n.current = O0(y),
        r.current = void 0
    }, [])
      , f = T.useCallback(function(y) {
        c(y.type, IA(y), y.target, a(y, e.lockRef.current))
    }, [])
      , h = T.useCallback(function(y) {
        c(y.type, O0(y), y.target, a(y, e.lockRef.current))
    }, []);
    T.useEffect(function() {
        return ad.push(o),
        e.setCallbacks({
            onScrollCapture: f,
            onWheelCapture: f,
            onTouchMoveCapture: h
        }),
        document.addEventListener("wheel", l, sd),
        document.addEventListener("touchmove", l, sd),
        document.addEventListener("touchstart", u, sd),
        function() {
            ad = ad.filter(function(y) {
                return y !== o
            }),
            document.removeEventListener("wheel", l, sd),
            document.removeEventListener("touchmove", l, sd),
            document.removeEventListener("touchstart", u, sd)
        }
    }, []);
    var m = e.removeScrollBar
      , v = e.inert;
    return T.createElement(T.Fragment, null, v ? T.createElement(o, {
        styles: Xue(i)
    }) : null, m ? T.createElement($ue, {
        gapMode: "margin"
    }) : null)
}
const Que = kue(fF, que);
var vF = T.forwardRef(function(e, t) {
    return T.createElement(hy, ws({}, e, {
        ref: t,
        sideCar: Que
    }))
});
vF.classNames = hy.classNames;
const yF = "Popover"
  , [wF,wve] = Zp(yF, [sF])
  , gy = sF()
  , [Jue,Vf] = wF(yF)
  , ede = e=>{
    const {__scopePopover: t, children: n, open: r, defaultOpen: i, onOpenChange: o, modal: s=!1} = e
      , a = gy(t)
      , l = T.useRef(null)
      , [c,u] = T.useState(!1)
      , [f=!1,h] = F4({
        prop: r,
        defaultProp: i,
        onChange: o
    });
    return T.createElement(sue, a, T.createElement(Jue, {
        scope: t,
        contentId: R4(),
        triggerRef: l,
        open: f,
        onOpenChange: h,
        onOpenToggle: T.useCallback(()=>h(m=>!m), [h]),
        hasCustomAnchor: c,
        onCustomAnchorAdd: T.useCallback(()=>u(!0), []),
        onCustomAnchorRemove: T.useCallback(()=>u(!1), []),
        modal: s
    }, n))
}
  , tde = "PopoverTrigger"
  , nde = T.forwardRef((e,t)=>{
    const {__scopePopover: n, ...r} = e
      , i = Vf(tde, n)
      , o = gy(n)
      , s = Ls(t, i.triggerRef)
      , a = T.createElement(pi.button, Ft({
        type: "button",
        "aria-haspopup": "dialog",
        "aria-expanded": i.open,
        "aria-controls": i.contentId,
        "data-state": _F(i.open)
    }, r, {
        ref: s,
        onClick: Ir(e.onClick, i.onOpenToggle)
    }));
    return i.hasCustomAnchor ? a : T.createElement(aue, Ft({
        asChild: !0
    }, o), a)
}
)
  , EF = "PopoverPortal"
  , [rde,ide] = wF(EF, {
    forceMount: void 0
})
  , ode = e=>{
    const {__scopePopover: t, forceMount: n, children: r, container: i} = e
      , o = Vf(EF, t);
    return T.createElement(rde, {
        scope: t,
        forceMount: n
    }, T.createElement(fy, {
        present: n || o.open
    }, T.createElement(uue, {
        asChild: !0,
        container: i
    }, r)))
}
  , wp = "PopoverContent"
  , sde = T.forwardRef((e,t)=>{
    const n = ide(wp, e.__scopePopover)
      , {forceMount: r=n.forceMount, ...i} = e
      , o = Vf(wp, e.__scopePopover);
    return T.createElement(fy, {
        present: r || o.open
    }, o.modal ? T.createElement(ade, Ft({}, i, {
        ref: t
    })) : T.createElement(lde, Ft({}, i, {
        ref: t
    })))
}
)
  , ade = T.forwardRef((e,t)=>{
    const n = Vf(wp, e.__scopePopover)
      , r = T.useRef(null)
      , i = Ls(t, r)
      , o = T.useRef(!1);
    return T.useEffect(()=>{
        const s = r.current;
        if (s)
            return vue(s)
    }
    , []),
    T.createElement(vF, {
        as: vp,
        allowPinchZoom: !0
    }, T.createElement(bF, Ft({}, e, {
        ref: i,
        trapFocus: n.open,
        disableOutsidePointerEvents: !0,
        onCloseAutoFocus: Ir(e.onCloseAutoFocus, s=>{
            var a;
            s.preventDefault(),
            o.current || (a = n.triggerRef.current) === null || a === void 0 || a.focus()
        }
        ),
        onPointerDownOutside: Ir(e.onPointerDownOutside, s=>{
            const a = s.detail.originalEvent
              , l = a.button === 0 && a.ctrlKey === !0
              , c = a.button === 2 || l;
            o.current = c
        }
        , {
            checkForDefaultPrevented: !1
        }),
        onFocusOutside: Ir(e.onFocusOutside, s=>s.preventDefault(), {
            checkForDefaultPrevented: !1
        })
    })))
}
)
  , lde = T.forwardRef((e,t)=>{
    const n = Vf(wp, e.__scopePopover)
      , r = T.useRef(!1);
    return T.createElement(bF, Ft({}, e, {
        ref: t,
        trapFocus: !1,
        disableOutsidePointerEvents: !1,
        onCloseAutoFocus: i=>{
            var o;
            if ((o = e.onCloseAutoFocus) === null || o === void 0 || o.call(e, i),
            !i.defaultPrevented) {
                var s;
                r.current || (s = n.triggerRef.current) === null || s === void 0 || s.focus(),
                i.preventDefault()
            }
            r.current = !1
        }
        ,
        onInteractOutside: i=>{
            var o, s;
            (o = e.onInteractOutside) === null || o === void 0 || o.call(e, i),
            i.defaultPrevented || (r.current = !0);
            const a = i.target;
            ((s = n.triggerRef.current) === null || s === void 0 ? void 0 : s.contains(a)) && i.preventDefault()
        }
    }))
}
)
  , bF = T.forwardRef((e,t)=>{
    const {__scopePopover: n, trapFocus: r, onOpenAutoFocus: i, onCloseAutoFocus: o, disableOutsidePointerEvents: s, onEscapeKeyDown: a, onPointerDownOutside: l, onFocusOutside: c, onInteractOutside: u, ...f} = e
      , h = Vf(wp, n)
      , m = gy(n);
    return dce(),
    T.createElement(fce, {
        asChild: !0,
        loop: !0,
        trapped: r,
        onMountAutoFocus: i,
        onUnmountAutoFocus: o
    }, T.createElement(lce, {
        asChild: !0,
        disableOutsidePointerEvents: s,
        onInteractOutside: u,
        onEscapeKeyDown: a,
        onPointerDownOutside: l,
        onFocusOutside: c,
        onDismiss: ()=>h.onOpenChange(!1)
    }, T.createElement(lue, Ft({
        "data-state": _F(h.open),
        role: "dialog",
        id: h.contentId
    }, m, f, {
        ref: t,
        style: {
            ...f.style,
            "--radix-popover-content-transform-origin": "var(--radix-popper-transform-origin)"
        }
    }))))
}
)
  , cde = T.forwardRef((e,t)=>{
    const {__scopePopover: n, ...r} = e
      , i = gy(n);
    return T.createElement(cue, Ft({}, i, r, {
        ref: t
    }))
}
);
function _F(e) {
    return e ? "open" : "closed"
}
const Jp = ede
  , e1 = nde
  , ude = ode
  , py = sde
  , xF = cde
  , SF = ve.createContext(null)
  , Wn = ()=>ve.useContext(SF)
  , IF = e=>{
    const [t,n] = T.useState(null)
      , r = ur()
      , {theme: i} = Wn()
      , {container: o} = Ns();
    return T.useLayoutEffect(()=>{
        var s;
        t && (t.className = "",
        t.classList.add("excalidraw", ...((s = e == null ? void 0 : e.className) == null ? void 0 : s.split(/\s+/)) || []),
        t.classList.toggle("excalidraw--mobile", r.editor.isMobile),
        t.classList.toggle("theme--dark", i === Oe.DARK))
    }
    , [t, i, r.editor.isMobile, e == null ? void 0 : e.className]),
    T.useLayoutEffect(()=>{
        const s = e != null && e.parentSelector ? o == null ? void 0 : o.querySelector(e.parentSelector) : document.body;
        if (!s)
            return;
        const a = document.createElement("div");
        return s.appendChild(a),
        n(a),
        ()=>{
            s.removeChild(a)
        }
    }
    , [o, e == null ? void 0 : e.parentSelector]),
    t
}
;
function B4(e, t, n) {
    T.useEffect(()=>{
        function r(i) {
            const o = i;
            if (!e.current)
                return;
            const s = n == null ? void 0 : n(o, e.current);
            if (s === !0)
                return;
            if (s === !1)
                return t(o);
            e.current.contains(o.target) || !document.documentElement.contains(o.target) || o.target.closest("[data-radix-portal]") || o.target === document.documentElement && document.body.style.pointerEvents === "none" || o.target.closest("[data-prevent-outside-click]") || t(o)
        }
        return document.addEventListener(ce.POINTER_DOWN, r),
        document.addEventListener(ce.TOUCH_START, r),
        ()=>{
            document.removeEventListener(ce.POINTER_DOWN, r),
            document.removeEventListener(ce.TOUCH_START, r)
        }
    }
    , [e, t, n])
}
const z4 = e=>{
    const t = T.useRef(e);
    return Object.assign(t.current, e),
    t.current
}
  , my = mn(null)
  , dde = ({onCancel: e, onChange: t, onSelect: n, colorPickerType: r})=>{
    const i = IF({
        className: "excalidraw-eye-dropper-backdrop",
        parentSelector: ".excalidraw-eye-dropper-container"
    })
      , o = Wn()
      , s = Iy()
      , a = Ba()
      , l = dt(s, o)
      , c = z4({
        app: a,
        onCancel: e,
        onChange: t,
        onSelect: n,
        selectedElements: l
    })
      , {container: u} = Ns();
    T.useEffect(()=>{
        const h = f.current;
        if (!h || !a.canvas || !i)
            return;
        let m = !1;
        const v = a.canvas.getContext("2d")
          , y = ({clientX: M, clientY: A})=>{
            const I = v.getImageData((M - o.offsetLeft) * window.devicePixelRatio, (A - o.offsetTop) * window.devicePixelRatio, 1, 1).data;
            return oq(I[0], I[1], I[2])
        }
          , E = ({clientX: M, clientY: A, altKey: I})=>{
            h.style.top = `${A + 20}px`,
            h.style.left = `${M + 20}px`;
            const O = y({
                clientX: M,
                clientY: A
            });
            m && c.onChange(r, O, c.selectedElements, {
                altKey: I
            }),
            h.style.background = O
        }
          , b = ()=>{
            c.onCancel()
        }
          , _ = (M,A)=>{
            c.onSelect(M, A)
        }
          , x = M=>{
            m = !0,
            M.stopImmediatePropagation()
        }
          , C = M=>{
            m = !1,
            u == null || u.focus(),
            M.stopImmediatePropagation(),
            M.preventDefault(),
            _(y(M), M)
        }
          , P = M=>{
            M.key === U.ESCAPE && (M.preventDefault(),
            M.stopImmediatePropagation(),
            b())
        }
        ;
        return i.tabIndex = -1,
        i.focus(),
        E({
            clientX: c.app.lastViewportPosition.x,
            clientY: c.app.lastViewportPosition.y,
            altKey: !1
        }),
        i.addEventListener(ce.KEYDOWN, P),
        i.addEventListener(ce.POINTER_DOWN, x),
        i.addEventListener(ce.POINTER_UP, C),
        window.addEventListener("pointermove", E, {
            passive: !0
        }),
        window.addEventListener(ce.BLUR, b),
        ()=>{
            m = !1,
            i.removeEventListener(ce.KEYDOWN, P),
            i.removeEventListener(ce.POINTER_DOWN, x),
            i.removeEventListener(ce.POINTER_UP, C),
            window.removeEventListener("pointermove", E),
            window.removeEventListener(ce.BLUR, b)
        }
    }
    , [c, a.canvas, i, r, u, o.offsetLeft, o.offsetTop]);
    const f = T.useRef(null);
    return B4(f, ()=>{
        e()
    }
    , h=>!!h.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),
    i ? si.createPortal(g("div", {
        ref: f,
        className: "excalidraw-eye-dropper-preview"
    }), i) : null
}
  , fde = ({color: e, onChange: t, label: n, colorPickerType: r})=>{
    const i = ur()
      , [o,s] = T.useState(e)
      , [a,l] = Ot(Wf);
    T.useEffect(()=>{
        s(e)
    }
    , [e]);
    const c = T.useCallback(v=>{
        const y = v.toLowerCase()
          , E = hde(y);
        E && t(E),
        s(y)
    }
    , [t])
      , u = T.useRef(null)
      , f = T.useRef(null);
    T.useEffect(()=>{
        u.current && u.current.focus()
    }
    , [a]);
    const [h,m] = Ot(my, cr);
    return T.useEffect(()=>()=>{
        m(null)
    }
    , [m]),
    L("div", {
        className: "color-picker__input-label",
        children: [g("div", {
            className: "color-picker__input-hash",
            children: "#"
        }), g("input", {
            ref: a === "hex" ? u : void 0,
            style: {
                border: 0,
                padding: 0
            },
            spellCheck: !1,
            className: "color-picker-input",
            "aria-label": n,
            onChange: v=>{
                c(v.target.value)
            }
            ,
            value: (o || "").replace(/^#/, ""),
            onBlur: ()=>{
                s(e)
            }
            ,
            tabIndex: -1,
            onFocus: ()=>l("hex"),
            onKeyDown: v=>{
                var y;
                v.key !== U.TAB && (v.key === U.ESCAPE && ((y = f.current) == null || y.focus()),
                v.stopPropagation())
            }
        }), !i.editor.isMobile && L(Se, {
            children: [g("div", {
                style: {
                    width: "1px",
                    height: "1.25rem",
                    backgroundColor: "var(--default-border-color)"
                }
            }), g("div", {
                ref: f,
                className: xe("excalidraw-eye-dropper-trigger", {
                    selected: h
                }),
                onClick: ()=>m(v=>v ? null : {
                    keepOpenOnAlt: !1,
                    onSelect: y=>t(y),
                    colorPickerType: r
                }),
                title: `${k("labels.eyeDropper")} — ${U.I.toLocaleUpperCase()} or ${ie("Alt")} `,
                children: gte
            })]
        })]
    })
}
  , Wo = ve.forwardRef(({children: e, padding: t, className: n, style: r},i)=>g("div", {
    className: xe("Island", n),
    style: {
        "--padding": t,
        ...r
    },
    ref: i,
    children: e
}))
  , CF = ve.forwardRef(({className: e, container: t, children: n, style: r, onClose: i, onKeyDown: o, onFocusOutside: s, onPointerLeave: a, onPointerDownOutside: l},c)=>{
    const u = ur();
    return g(ude, {
        container: t,
        children: L(py, {
            ref: c,
            className: xe("focus-visible-none", e),
            "data-prevent-outside-click": !0,
            side: u.editor.isMobile && !u.viewport.isLandscape ? "bottom" : "right",
            align: u.editor.isMobile && !u.viewport.isLandscape ? "center" : "start",
            alignOffset: -16,
            sideOffset: 20,
            style: {
                zIndex: "var(--zIndex-popup)"
            },
            onPointerLeave: a,
            onKeyDown: o,
            onFocusOutside: s,
            onPointerDownOutside: l,
            onCloseAutoFocus: f=>{
                f.stopPropagation(),
                f.preventDefault(),
                t && !JQ(document.activeElement) && t.focus(),
                i()
            }
            ,
            children: [g(Wo, {
                padding: 3,
                style: r,
                children: n
            }), g(xF, {
                width: 20,
                height: 10,
                style: {
                    fill: "var(--popup-bg-color)",
                    filter: "drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"
                }
            })]
        })
    })
}
)
  , kA = e=>{
    const t = new Option().style;
    return t.color = e,
    !!t.color
}
  , hde = e=>Es(e) ? e : kA(`#${e}`) ? `#${e}` : kA(e) ? e : null
  , gde = ({type: e, color: t, onChange: n, label: r, elements: i, palette: o=Qe, updateData: s})=>{
    const {container: a} = Ns()
      , [,l] = Ot(Wf)
      , [c,u] = Ot(my, cr)
      , f = L("div", {
        children: [g(xm, {
            children: k("colorPicker.hexCode")
        }), g(fde, {
            color: t,
            label: r,
            onChange: v=>{
                n(v)
            }
            ,
            colorPickerType: e
        })]
    })
      , h = T.useRef(null)
      , m = ()=>{
        var v, y;
        (y = (v = h.current) == null ? void 0 : v.querySelector(".color-picker-content")) == null || y.focus()
    }
    ;
    return g(CF, {
        container: a,
        style: {
            maxWidth: "208px"
        },
        onFocusOutside: v=>{
            m(),
            v.preventDefault()
        }
        ,
        onPointerDownOutside: v=>{
            c && v.preventDefault()
        }
        ,
        onClose: ()=>{
            s({
                openPopup: null
            }),
            l(null)
        }
        ,
        children: o ? g(Zle, {
            palette: o,
            color: t,
            onChange: v=>{
                n(v)
            }
            ,
            onEyeDropperToggle: v=>{
                u(y=>v ? (y = y || {
                    keepOpenOnAlt: !0,
                    onSelect: n,
                    colorPickerType: e
                },
                y.keepOpenOnAlt = !0,
                y) : v === !1 || y ? null : {
                    keepOpenOnAlt: !1,
                    onSelect: n,
                    colorPickerType: e
                })
            }
            ,
            onEscape: v=>{
                c ? u(null) : s({
                    openPopup: null
                })
            }
            ,
            label: r,
            type: e,
            elements: i,
            updateData: s,
            children: f
        }) : f
    })
}
  , pde = ({label: e, color: t, type: n})=>g(e1, {
    type: "button",
    className: xe("color-picker__button active-color properties-trigger", {
        "is-transparent": t === "transparent" || !t
    }),
    "aria-label": e,
    style: t ? {
        "--swatch-color": t
    } : void 0,
    title: k(n === "elementStroke" ? "labels.showStroke" : "labels.showBackground"),
    children: g("div", {
        className: "color-picker__button-outline"
    })
})
  , $4 = ({type: e, color: t, onChange: n, label: r, elements: i, palette: o=Qe, topPicks: s, updateData: a, appState: l})=>g("div", {
    children: L("div", {
        role: "dialog",
        "aria-modal": "true",
        className: "color-picker-container",
        children: [g(Hle, {
            activeColor: t,
            onChange: n,
            type: e,
            topPicks: s
        }), g(VN, {}), L(Jp, {
            open: l.openPopup === e,
            onOpenChange: c=>{
                a({
                    openPopup: c ? e : null
                })
            }
            ,
            children: [g(pde, {
                color: t,
                label: r,
                type: e
            }), l.openPopup === e && g(gde, {
                type: e,
                color: t,
                onChange: n,
                label: r,
                elements: i,
                palette: o,
                updateData: a
            })]
        })]
    })
})
  , kF = ({children: e, left: t, top: n, onCloseRequest: r, fitInViewport: i=!1, offsetLeft: o=0, offsetTop: s=0, viewportWidth: a=window.innerWidth, viewportHeight: l=window.innerHeight})=>{
    const c = T.useRef(null);
    T.useEffect(()=>{
        const f = c.current;
        if (!f)
            return;
        f.contains(document.activeElement) || f.focus();
        const h = m=>{
            var v, y, E;
            if (m.key === U.TAB) {
                const b = Y3(f)
                  , {activeElement: _} = document
                  , x = b.findIndex(C=>C === _);
                _ === f ? (m.shiftKey ? (v = b[b.length - 1]) == null || v.focus() : b[0].focus(),
                m.preventDefault(),
                m.stopImmediatePropagation()) : x === 0 && m.shiftKey ? ((y = b[b.length - 1]) == null || y.focus(),
                m.preventDefault(),
                m.stopImmediatePropagation()) : x === b.length - 1 && !m.shiftKey && ((E = b[0]) == null || E.focus(),
                m.preventDefault(),
                m.stopImmediatePropagation())
            }
        }
        ;
        return f.addEventListener("keydown", h),
        ()=>f.removeEventListener("keydown", h)
    }
    , []);
    const u = T.useRef(null);
    return T.useLayoutEffect(()=>{
        var f, h;
        if (i && c.current && n != null && t != null) {
            const m = c.current
              , {width: v, height: y} = m.getBoundingClientRect();
            if (((f = u.current) == null ? void 0 : f.top) === n && ((h = u.current) == null ? void 0 : h.left) === t)
                return;
            u.current = {
                top: n,
                left: t
            },
            v >= a ? (m.style.width = `${a}px`,
            m.style.left = "0px",
            m.style.overflowX = "scroll") : t + v - o > a ? m.style.left = `${a - v - 10}px` : m.style.left = `${t}px`,
            y >= l ? (m.style.height = `${l - 20}px`,
            m.style.top = "10px",
            m.style.overflowY = "scroll") : n + y - s > l ? m.style.top = `${l - y}px` : m.style.top = `${n}px`
        }
    }
    , [n, t, i, a, l, o, s]),
    T.useEffect(()=>{
        if (r) {
            const f = h=>{
                var m;
                (m = c.current) != null && m.contains(h.target) || si.unstable_batchedUpdates(()=>r(h))
            }
            ;
            return document.addEventListener("pointerdown", f, !1),
            ()=>document.removeEventListener("pointerdown", f, !1)
        }
    }
    , [r]),
    g("div", {
        className: "popover",
        ref: c,
        tabIndex: -1,
        children: e
    })
}
;
function mde({options: e, value: t, label: n, onChange: r, onClose: i}) {
    const o = ve.useRef()
      , s = ve.useRef()
      , a = ve.useRef(null);
    return ve.useEffect(()=>{
        s.current ? s.current.focus() : a.current && a.current.focus()
    }
    , []),
    g("div", {
        className: "picker",
        role: "dialog",
        "aria-modal": "true",
        "aria-label": n,
        onKeyDown: c=>{
            const u = e.find(f=>f.keyBinding === c.key.toLowerCase());
            if (!(c.metaKey || c.altKey || c.ctrlKey) && u) {
                const f = e.indexOf(u);
                a.current.children[f].focus(),
                c.preventDefault()
            } else if (c.key === U.TAB)
                setTimeout(()=>{
                    const f = s.current
                      , h = document.activeElement;
                    f !== h && i()
                }
                , 0);
            else if (Zh(c.key)) {
                const {activeElement: f} = document
                  , h = uf().rtl
                  , m = Array.prototype.indexOf.call(a.current.children, f);
                if (m !== -1) {
                    const v = e.length;
                    let y = m;
                    switch (c.key) {
                    case (h ? U.ARROW_LEFT : U.ARROW_RIGHT):
                    case U.ARROW_DOWN:
                        {
                            y = (m + 1) % v;
                            break
                        }
                    case (h ? U.ARROW_RIGHT : U.ARROW_LEFT):
                    case U.ARROW_UP:
                        {
                            y = (v + m - 1) % v;
                            break
                        }
                    }
                    a.current.children[y].focus()
                }
                c.preventDefault()
            } else
                (c.key === U.ESCAPE || c.key === U.ENTER) && (c.preventDefault(),
                i());
            c.nativeEvent.stopImmediatePropagation(),
            c.stopPropagation()
        }
        ,
        children: g("div", {
            className: "picker-content",
            ref: a,
            children: e.map((c,u)=>L("button", {
                type: "button",
                className: xe("picker-option", {
                    active: t === c.value
                }),
                onClick: f=>{
                    f.currentTarget.focus(),
                    r(c.value)
                }
                ,
                title: `${c.text} ${c.keyBinding && `— ${c.keyBinding.toUpperCase()}`}`,
                "aria-label": c.text || "none",
                "aria-keyshortcuts": c.keyBinding || void 0,
                ref: f=>{
                    f && u === 0 && (o.current = f),
                    f && c.value === t && (s.current = f)
                }
                ,
                onFocus: ()=>{
                    r(c.value)
                }
                ,
                children: [c.icon, c.keyBinding && g("span", {
                    className: "picker-keybinding",
                    children: c.keyBinding
                })]
            }, c.text))
        })
    })
}
function TA({value: e, label: t, options: n, onChange: r, group: i=""}) {
    var c;
    const [o,s] = ve.useState(!1)
      , a = ve.useRef(null)
      , l = uf().rtl;
    return L("div", {
        children: [g("button", {
            name: i,
            type: "button",
            className: o ? "active" : "",
            "aria-label": t,
            onClick: ()=>s(!o),
            ref: a,
            children: (c = n.find(u=>u.value === e)) == null ? void 0 : c.icon
        }), g(ve.Suspense, {
            fallback: "",
            children: o ? L(Se, {
                children: [g(kF, {
                    onCloseRequest: u=>u.target !== a.current && s(!1),
                    ...l ? {
                        right: 5.5
                    } : {
                        left: -5.5
                    },
                    children: g(mde, {
                        options: n.filter(u=>u.showInPicker !== !1),
                        value: e,
                        label: t,
                        onChange: r,
                        onClose: ()=>{
                            var u;
                            s(!1),
                            (u = a.current) == null || u.focus()
                        }
                    })
                }), g("div", {
                    className: "picker-triangle"
                })]
            }) : null
        })]
    })
}
const TF = ve.forwardRef(({className: e, placeholder: t, onChange: n},r)=>L("div", {
    className: xe("QuickSearch__wrapper", e),
    children: [zD, g("input", {
        ref: r,
        className: "QuickSearch__input",
        type: "text",
        placeholder: t,
        onChange: i=>n(i.target.value.trim().toLowerCase())
    })]
}))
  , AF = ({className: e, placeholder: t, children: n})=>{
    const r = !T.Children.count(n);
    return g("div", {
        className: xe("ScrollableList__wrapper", e),
        role: "menu",
        children: r ? g("div", {
            className: "empty",
            children: t
        }) : n
    })
}
  , W2 = ({children: e, className: t="", style: n, title: r})=>L("div", {
    className: `dropdown-menu-group ${t}`,
    style: n,
    children: [r && g("p", {
        className: "dropdown-menu-group-title",
        children: r
    }), e]
});
W2.displayName = "DropdownMenuGroup";
const MF = ve.createContext({})
  , LF = (e="",t=!1,n=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e}
  ${t ? "dropdown-menu-item--selected" : ""} ${n ? "dropdown-menu-item--hovered" : ""}`.trim()
  , PF = (e,t)=>{
    const n = T.useContext(MF);
    return Lv(e, r=>{
        var o;
        const i = new CustomEvent(ce.MENU_ITEM_SELECT,{
            bubbles: !0,
            cancelable: !0
        });
        t == null || t(i),
        i.defaultPrevented || (o = n.onSelect) == null || o.call(n, i)
    }
    )
}
  , RF = ({textStyle: e, icon: t, shortcut: n, children: r})=>{
    const i = ur();
    return L(Se, {
        children: [t && g("div", {
            className: "dropdown-menu-item__icon",
            children: t
        }), g("div", {
            style: e,
            className: "dropdown-menu-item__text",
            children: r
        }), n && !i.editor.isMobile && g("div", {
            className: "dropdown-menu-item__shortcut",
            children: n
        })]
    })
}
  , Bi = ({icon: e, value: t, order: n, children: r, shortcut: i, className: o, hovered: s, selected: a, textStyle: l, onSelect: c, onClick: u, ...f})=>{
    const h = PF(u, c)
      , m = T.useRef(null);
    return T.useEffect(()=>{
        var v, y;
        s && (n === 0 ? (v = m.current) == null || v.scrollIntoView({
            block: "end"
        }) : (y = m.current) == null || y.scrollIntoView({
            block: "nearest"
        }))
    }
    , [s, n]),
    g("button", {
        ...f,
        ref: m,
        value: t,
        onClick: h,
        className: LF(o, a, s),
        title: f.title ?? f["aria-label"],
        children: g(RF, {
            textStyle: l,
            icon: e,
            shortcut: i,
            children: r
        })
    })
}
;
Bi.displayName = "DropdownMenuItem";
const Jh = {
    GREEN: "green",
    RED: "red",
    BLUE: "blue"
}
  , U4 = ({type: e=Jh.BLUE, children: t})=>{
    const {theme: n} = o1()
      , r = {
        display: "inline-flex",
        marginLeft: "auto",
        padding: "2px 4px",
        borderRadius: 6,
        fontSize: 9,
        fontFamily: "Cascadia, monospace",
        border: n === Oe.LIGHT ? "1.5px solid white" : "none"
    };
    switch (e) {
    case Jh.GREEN:
        Object.assign(r, {
            backgroundColor: "var(--background-color-badge)",
            color: "var(--color-badge)"
        });
        break;
    case Jh.RED:
        Object.assign(r, {
            backgroundColor: "pink",
            color: "darkred"
        });
        break;
    case Jh.BLUE:
    default:
        Object.assign(r, {
            background: "var(--color-promo)",
            color: "var(--color-surface-lowest)"
        })
    }
    return g("div", {
        className: "DropDownMenuItemBadge",
        style: r,
        children: t
    })
}
;
U4.displayName = "DropdownMenuItemBadge";
Bi.Badge = U4;
const vde = ({event: e, inputRef: t, hoveredFont: n, filteredFonts: r, onClose: i, onSelect: o, onHover: s})=>{
    var a, l, c;
    if (!e[U.CTRL_OR_CMD] && e.shiftKey && e.key.toLowerCase() === U.F)
        return (a = t.current) == null || a.focus(),
        !0;
    if (e.key === U.ESCAPE)
        return i(),
        !0;
    if (e.key === U.ENTER)
        return n != null && n.value && o(n.value),
        !0;
    if (e.key === U.ARROW_DOWN)
        return n != null && n.next ? s(n.next.value) : (l = r[0]) != null && l.value && s(r[0].value),
        !0;
    if (e.key === U.ARROW_UP)
        return n != null && n.prev ? s(n.prev.value) : (c = r[r.length - 1]) != null && c.value && s(r[r.length - 1].value),
        !0
}
  , yde = ve.memo(({selectedFontFamily: e, hoveredFontFamily: t, onSelect: n, onHover: r, onLeave: i, onOpen: o, onClose: s})=>{
    const {container: a} = Ns()
      , {fonts: l} = Ba()
      , {showDeprecatedFonts: c} = i1()
      , [u,f] = T.useState("")
      , h = T.useRef(null)
      , m = T.useMemo(()=>Array.from(Yo.registered.entries()).filter(([I,{metadata: O}])=>!O.serverSide).map(([I,{metadata: O, fonts: N}])=>{
        const $ = {
            value: I,
            icon: O.icon,
            text: N[0].fontFace.family
        };
        return O.deprecated && Object.assign($, {
            deprecated: O.deprecated,
            badge: {
                type: Jh.RED,
                placeholder: k("fontList.badge.old")
            }
        }),
        $
    }
    ).sort((I,O)=>I.text.toLowerCase() > O.text.toLowerCase() ? 1 : -1), [])
      , v = T.useMemo(()=>new Set(l.getSceneFontFamilies()), [e])
      , y = T.useMemo(()=>m.filter(I=>v.has(I.value)), [m, v])
      , E = T.useMemo(()=>m.filter(I=>!v.has(I.value) && (c || !I.deprecated)), [m, v, c])
      , b = T.useMemo(()=>lJ([...y, ...E].filter(I=>{
        var O;
        return (O = I.text) == null ? void 0 : O.toLowerCase().includes(u)
    }
    )), [y, E, u])
      , _ = T.useMemo(()=>{
        var O;
        let I;
        return t ? I = b.find(N=>N.value === t) : e && (I = b.find(N=>N.value === e)),
        !I && u && ((O = b[0]) != null && O.value ? r(b[0].value) : i()),
        I
    }
    , [t, e, u, b, r, i])
      , x = T.useCallback(I=>{
        vde({
            event: I,
            inputRef: h,
            hoveredFont: _,
            filteredFonts: b,
            onSelect: n,
            onHover: r,
            onClose: s
        }) && (I.preventDefault(),
        I.stopPropagation())
    }
    , [_, b, n, r, s]);
    T.useEffect(()=>(o(),
    ()=>{
        s()
    }
    ), []);
    const C = T.useMemo(()=>b.filter(I=>v.has(I.value)), [b, v])
      , P = T.useMemo(()=>b.filter(I=>!v.has(I.value)), [b, v])
      , M = (I,O)=>L(Bi, {
        icon: I.icon,
        value: I.value,
        order: O,
        textStyle: {
            fontFamily: Bp({
                fontFamily: I.value
            })
        },
        hovered: I.value === (_ == null ? void 0 : _.value),
        selected: I.value === e,
        tabIndex: I.value === e ? 0 : -1,
        onClick: N=>{
            n(Number(N.currentTarget.value))
        }
        ,
        onMouseMove: ()=>{
            (_ == null ? void 0 : _.value) !== I.value && r(I.value)
        }
        ,
        children: [I.text, I.badge && g(U4, {
            type: I.badge.type,
            children: I.badge.placeholder
        })]
    }, I.value)
      , A = [];
    return C.length && A.push(g(W2, {
        title: k("fontList.sceneFonts"),
        children: C.map(M)
    }, "group_1")),
    P.length && A.push(g(W2, {
        title: k("fontList.availableFonts"),
        children: P.map((I,O)=>M(I, O + C.length))
    }, "group_2")),
    L(CF, {
        className: "properties-content",
        container: a,
        style: {
            width: "15rem"
        },
        onClose: s,
        onPointerLeave: i,
        onKeyDown: x,
        children: [g(TF, {
            ref: h,
            placeholder: k("quickSearch.placeholder"),
            onChange: Wl(f, 20)
        }), g(AF, {
            className: "dropdown-menu fonts manual-hover",
            placeholder: k("fontList.empty"),
            children: A.length ? A : null
        })]
    })
}
, (e,t)=>e.selectedFontFamily === t.selectedFontFamily && e.hoveredFontFamily === t.hoveredFontFamily)
  , wde = ({selectedFontFamily: e})=>{
    const t = T.useMemo(()=>!!(e && !bde(e)), [e]);
    return g(e1, {
        asChild: !0,
        children: g("div", {
            children: g(GN, {
                standalone: !0,
                icon: ID,
                title: k("labels.showFonts"),
                className: "properties-trigger",
                testId: "font-family-show-fonts",
                active: t,
                onClick: ()=>{}
            })
        })
    })
}
  , DF = [{
    value: Lt.Excalifont,
    icon: ip,
    text: k("labels.handDrawn"),
    testId: "font-family-handrawn"
}, {
    value: Lt.Nunito,
    icon: cm,
    text: k("labels.normal"),
    testId: "font-family-normal"
}, {
    value: Lt["Comic Shanns"],
    icon: r_,
    text: k("labels.code"),
    testId: "font-family-code"
}]
  , Ede = new Set(DF.map(e=>e.value))
  , bde = e=>e ? Ede.has(e) : !1
  , _de = ve.memo(({isOpened: e, selectedFontFamily: t, hoveredFontFamily: n, onSelect: r, onHover: i, onLeave: o, onPopupChange: s})=>{
    const a = T.useMemo(()=>DF, [])
      , l = T.useCallback(c=>{
        c && r(c)
    }
    , [r]);
    return L("div", {
        role: "dialog",
        "aria-modal": "true",
        className: "FontPicker__container",
        children: [g(Os, {
            type: "button",
            options: a,
            value: t,
            onClick: l
        }), g(VN, {}), L(Jp, {
            open: e,
            onOpenChange: s,
            children: [g(wde, {
                selectedFontFamily: t
            }), e && g(yde, {
                selectedFontFamily: t,
                hoveredFontFamily: n,
                onSelect: l,
                onHover: i,
                onLeave: o,
                onOpen: ()=>s(!0),
                onClose: ()=>s(!1)
            })]
        })]
    })
}
, (e,t)=>e.isOpened === t.isOpened && e.selectedFontFamily === t.selectedFontFamily && e.hoveredFontFamily === t.hoveredFontFamily)
  , OF = .1
  , Gr = (e,t,n,r=!1)=>{
    const i = De(dt(e, t, {
        includeBoundTextElement: r
    }));
    return e.map(o=>{
        var s;
        return i.get(o.id) || o.id === ((s = t.editingElement) == null ? void 0 : s.id) ? n(o) : o
    }
    )
}
  , Vr = function(e, t, n, r, i) {
    const o = t.editingElement
      , s = Nt(e);
    let a = null;
    return o && (a = n(o)),
    a || (Mn(s, t) ? a = ble(r === !0 ? s : s.filter(c=>r(c)), t, n) ?? (typeof i == "function" ? i(!0) : i) : a = typeof i == "function" ? i(!1) : i),
    a
}
  , xde = (e,t)=>Sn(t) || !t.autoResize ? t : ue(t, {
    x: e.textAlign === "left" ? e.x : e.x + (e.width - t.width) / (e.textAlign === "center" ? 2 : 1),
    y: e.y + (e.height - t.height) / 2
}, !1)
  , H4 = (e,t,n,r,i)=>{
    const o = new Set;
    return {
        elements: Gr(e, t, s=>{
            if (ye(s)) {
                const a = r(s);
                o.add(a);
                let l = Ne(s, {
                    fontSize: a
                });
                return Wr(l, n.scene.getContainerElement(s), n.scene.getNonDeletedElementsMap()),
                l = xde(s, l),
                l
            }
            return s
        }
        , !0),
        appState: {
            ...t,
            currentItemFontSize: o.size === 1 ? [...o][0] : i ?? t.currentItemFontSize
        },
        storeAction: ee.CAPTURE
    }
}
;
we({
    name: "changeStrokeColor",
    label: "labels.stroke",
    trackEvent: !1,
    perform: (e,t,n)=>({
        ...n.currentItemStrokeColor && {
            elements: Gr(e, t, r=>C_(r.type) ? Ne(r, {
                strokeColor: n.currentItemStrokeColor
            }) : r, !0)
        },
        appState: {
            ...t,
            ...n
        },
        storeAction: n.currentItemStrokeColor ? ee.CAPTURE : ee.NONE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n, appProps: r})=>L(Se, {
        children: [g("h3", {
            "aria-hidden": "true",
            children: k("labels.stroke")
        }), g($4, {
            topPicks: OP,
            palette: nq,
            type: "elementStroke",
            label: k("labels.stroke"),
            color: Vr(e, t, i=>i.strokeColor, !0, t.currentItemStrokeColor),
            onChange: i=>n({
                currentItemStrokeColor: i
            }),
            elements: e,
            appState: t,
            updateData: n
        })]
    })
});
we({
    name: "changeBackgroundColor",
    label: "labels.changeBackground",
    trackEvent: !1,
    perform: (e,t,n)=>({
        ...n.currentItemBackgroundColor && {
            elements: Gr(e, t, r=>Ne(r, {
                backgroundColor: n.currentItemBackgroundColor
            }))
        },
        appState: {
            ...t,
            ...n
        },
        storeAction: n.currentItemBackgroundColor ? ee.CAPTURE : ee.NONE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n, appProps: r})=>L(Se, {
        children: [g("h3", {
            "aria-hidden": "true",
            children: k("labels.background")
        }), g($4, {
            topPicks: NP,
            palette: rq,
            type: "elementBackground",
            label: k("labels.background"),
            color: Vr(e, t, i=>i.backgroundColor, !0, t.currentItemBackgroundColor),
            onChange: i=>n({
                currentItemBackgroundColor: i
            }),
            elements: e,
            appState: t,
            updateData: n
        })]
    })
});
we({
    name: "changeFillStyle",
    label: "labels.fill",
    trackEvent: !1,
    perform: (e,t,n,r)=>(at("element", "changeFillStyle", `${n} (${r.device.editor.isMobile ? "mobile" : "desktop"})`),
    {
        elements: Gr(e, t, i=>Ne(i, {
            fillStyle: n
        })),
        appState: {
            ...t,
            currentItemFillStyle: n
        },
        storeAction: ee.CAPTURE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>{
        const r = dt(e, t)
          , i = r.length > 0 && r.every(o=>o.fillStyle === "zigzag");
        return L("fieldset", {
            children: [g("legend", {
                children: k("labels.fill")
            }), g(Os, {
                type: "button",
                options: [{
                    value: "hachure",
                    text: `${k(i ? "labels.zigzag" : "labels.hachure")} (${ie("Alt-Click")})`,
                    icon: i ? Mee : Lee,
                    active: i ? !0 : void 0,
                    testId: "fill-hachure"
                }, {
                    value: "cross-hatch",
                    text: k("labels.crossHatch"),
                    icon: Pee,
                    testId: "fill-cross-hatch"
                }, {
                    value: "solid",
                    text: k("labels.solid"),
                    icon: Ree,
                    testId: "fill-solid"
                }],
                value: Vr(e, t, o=>o.fillStyle, o=>o.hasOwnProperty("fillStyle"), o=>o ? null : t.currentItemFillStyle),
                onClick: (o,s)=>{
                    const a = s.altKey && o === "hachure" && r.every(l=>l.fillStyle === "hachure") ? "zigzag" : o;
                    n(a)
                }
            })]
        })
    }
});
we({
    name: "changeStrokeWidth",
    label: "labels.strokeWidth",
    trackEvent: !1,
    perform: (e,t,n)=>({
        elements: Gr(e, t, r=>Ne(r, {
            strokeWidth: n
        })),
        appState: {
            ...t,
            currentItemStrokeWidth: n
        },
        storeAction: ee.CAPTURE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>L("fieldset", {
        children: [g("legend", {
            children: k("labels.strokeWidth")
        }), g(Os, {
            group: "stroke-width",
            options: [{
                value: kE.thin,
                text: k("labels.thin"),
                icon: PD,
                testId: "strokeWidth-thin"
            }, {
                value: kE.bold,
                text: k("labels.bold"),
                icon: Dee,
                testId: "strokeWidth-bold"
            }, {
                value: kE.extraBold,
                text: k("labels.extraBold"),
                icon: Oee,
                testId: "strokeWidth-extraBold"
            }],
            value: Vr(e, t, r=>r.strokeWidth, r=>r.hasOwnProperty("strokeWidth"), r=>r ? null : t.currentItemStrokeWidth),
            onChange: r=>n(r)
        })]
    })
});
we({
    name: "changeSloppiness",
    label: "labels.sloppiness",
    trackEvent: !1,
    perform: (e,t,n)=>({
        elements: Gr(e, t, r=>Ne(r, {
            seed: nc(),
            roughness: n
        })),
        appState: {
            ...t,
            currentItemRoughness: n
        },
        storeAction: ee.CAPTURE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>L("fieldset", {
        children: [g("legend", {
            children: k("labels.sloppiness")
        }), g(Os, {
            group: "sloppiness",
            options: [{
                value: 0,
                text: k("labels.architect"),
                icon: Bee
            }, {
                value: 1,
                text: k("labels.artist"),
                icon: zee
            }, {
                value: 2,
                text: k("labels.cartoonist"),
                icon: $ee
            }],
            value: Vr(e, t, r=>r.roughness, r=>r.hasOwnProperty("roughness"), r=>r ? null : t.currentItemRoughness),
            onChange: r=>n(r)
        })]
    })
});
we({
    name: "changeStrokeStyle",
    label: "labels.strokeStyle",
    trackEvent: !1,
    perform: (e,t,n)=>({
        elements: Gr(e, t, r=>Ne(r, {
            strokeStyle: n
        })),
        appState: {
            ...t,
            currentItemStrokeStyle: n
        },
        storeAction: ee.CAPTURE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>L("fieldset", {
        children: [g("legend", {
            children: k("labels.strokeStyle")
        }), g(Os, {
            group: "strokeStyle",
            options: [{
                value: "solid",
                text: k("labels.strokeStyle_solid"),
                icon: PD
            }, {
                value: "dashed",
                text: k("labels.strokeStyle_dashed"),
                icon: Nee
            }, {
                value: "dotted",
                text: k("labels.strokeStyle_dotted"),
                icon: Fee
            }],
            value: Vr(e, t, r=>r.strokeStyle, r=>r.hasOwnProperty("strokeStyle"), r=>r ? null : t.currentItemStrokeStyle),
            onChange: r=>n(r)
        })]
    })
});
we({
    name: "changeOpacity",
    label: "labels.opacity",
    trackEvent: !1,
    perform: (e,t,n)=>({
        elements: Gr(e, t, r=>Ne(r, {
            opacity: n
        }), !0),
        appState: {
            ...t,
            currentItemOpacity: n
        },
        storeAction: ee.CAPTURE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>L("label", {
        className: "control-label",
        children: [k("labels.opacity"), g("input", {
            type: "range",
            min: "0",
            max: "100",
            step: "10",
            onChange: r=>n(+r.target.value),
            value: Vr(e, t, r=>r.opacity, !0, t.currentItemOpacity) ?? void 0
        })]
    })
});
we({
    name: "changeFontSize",
    label: "labels.fontSize",
    trackEvent: !1,
    perform: (e,t,n,r)=>H4(e, t, r, ()=>n, n),
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>L("fieldset", {
        children: [g("legend", {
            children: k("labels.fontSize")
        }), g(Os, {
            group: "font-size",
            options: [{
                value: 16,
                text: k("labels.small"),
                icon: qee,
                testId: "fontSize-small"
            }, {
                value: 20,
                text: k("labels.medium"),
                icon: Qee,
                testId: "fontSize-medium"
            }, {
                value: 28,
                text: k("labels.large"),
                icon: Jee,
                testId: "fontSize-large"
            }, {
                value: 36,
                text: k("labels.veryLarge"),
                icon: ete,
                testId: "fontSize-veryLarge"
            }],
            value: Vr(e, t, i=>{
                if (ye(i))
                    return i.fontSize;
                const o = Ge(i, r.scene.getNonDeletedElementsMap());
                return o ? o.fontSize : null
            }
            , i=>ye(i) || Ge(i, r.scene.getNonDeletedElementsMap()) !== null, i=>i ? null : t.currentItemFontSize || Ra),
            onChange: i=>n(i)
        })]
    })
});
const AA = we({
    name: "decreaseFontSize",
    label: "labels.decreaseFontSize",
    icon: Fv,
    trackEvent: !1,
    perform: (e,t,n,r)=>H4(e, t, r, i=>Math.round(1 / (1 + OF) * i.fontSize)),
    keyTest: e=>e[U.CTRL_OR_CMD] && e.shiftKey && (e.key === U.CHEVRON_LEFT || e.key === U.COMMA)
})
  , MA = we({
    name: "increaseFontSize",
    label: "labels.increaseFontSize",
    icon: Fv,
    trackEvent: !1,
    perform: (e,t,n,r)=>H4(e, t, r, i=>Math.round(i.fontSize * (1 + OF))),
    keyTest: e=>e[U.CTRL_OR_CMD] && e.shiftKey && (e.key === U.CHEVRON_RIGHT || e.key === U.PERIOD)
});
we({
    name: "changeFontFamily",
    label: "labels.fontFamily",
    trackEvent: !1,
    perform: (e,t,n,r)=>{
        var v;
        const {cachedElements: i, resetAll: o, resetContainers: s, ...a} = n;
        if (o)
            return {
                elements: Gr(e, t, E=>{
                    const b = i == null ? void 0 : i.get(E.id);
                    return b ? Ne(E, {
                        ...b
                    }) : E
                }
                , !0),
                appState: {
                    ...t,
                    ...a
                },
                storeAction: ee.UPDATE
            };
        const {currentItemFontFamily: l, currentHoveredFontFamily: c} = n;
        let u = ee.NONE, f, h = !1;
        if (l)
            f = l,
            u = ee.CAPTURE;
        else if (c) {
            f = c,
            u = ee.NONE;
            const y = dt(e, t, {
                includeBoundTextElement: !0
            }).filter(E=>ye(E));
            if (y.length > 200)
                h = !0;
            else {
                let E = 0
                  , b = 0;
                for (; E < y.length && b < 5e3; ) {
                    const _ = y[E];
                    b += (_ == null ? void 0 : _.originalText.length) || 0,
                    E++
                }
                b > 5e3 && (h = !0)
            }
        }
        const m = {
            appState: {
                ...t,
                ...a
            },
            storeAction: u
        };
        if (f && !h) {
            const y = new Map;
            let E = new Set
              , b = !1;
            const _ = Array.from(Yo.loadedFontsCache.values())
              , x = (v = Object.entries(Lt).find(([M,A])=>A === f)) == null ? void 0 : v[0];
            c && x && _.some(M=>M.startsWith(x)) && (b = !0),
            Object.assign(m, {
                elements: Gr(e, t, M=>{
                    if (ye(M) && (M.fontFamily !== f || l)) {
                        const A = Ne(M, {
                            fontFamily: f,
                            lineHeight: mu(f)
                        })
                          , I = (i == null ? void 0 : i.get(M.containerId || "")) || {}
                          , O = r.scene.getContainerElement(M);
                        return s && O && I && ue(O, {
                            ...I
                        }, !1),
                        b || (E = new Set([...E, ...Array.from(A.originalText)])),
                        y.set(A, O),
                        A
                    }
                    return M
                }
                , !0)
            });
            const C = `10px ${Bp({
                fontFamily: f
            })}`
              , P = Array.from(E.values()).join();
            if (b || window.document.fonts.check(C, P))
                for (const [M,A] of y)
                    Wr(M, A, r.scene.getNonDeletedElementsMap(), !1);
            else
                window.document.fonts.load(C, P).then(M=>{
                    for (const [A,I] of y) {
                        const O = r.scene.getElement(A.id)
                          , N = I ? r.scene.getElement(I.id) : null;
                        O && Wr(O, N, r.scene.getNonDeletedElementsMap(), !1)
                    }
                    r.fonts.onLoaded(M)
                }
                )
        }
        return m
    }
    ,
    PanelComponent: ({elements: e, appState: t, app: n, updateData: r})=>{
        const i = T.useRef(new Map)
          , o = T.useRef(null)
          , [s,a] = T.useState({})
          , l = T.useRef(!0)
          , c = T.useMemo(()=>{
            var f;
            const u = (h,m)=>Vr(h, t, v=>{
                if (ye(v))
                    return v.fontFamily;
                const y = Ge(v, m);
                return y ? y.fontFamily : null
            }
            , v=>ye(v) || Ge(v, m) !== null, v=>v ? null : t.currentItemFontFamily || ec);
            return s.openPopup === "fontFamily" && t.openPopup === "fontFamily" ? u(Array.from(((f = i.current) == null ? void 0 : f.values()) ?? []), i.current) : !s.openPopup && t.openPopup !== "fontFamily" ? u(e, n.scene.getNonDeletedElementsMap()) : o.current
        }
        , [s.openPopup, t, e, n.scene]);
        return T.useEffect(()=>{
            o.current = c
        }
        , [c]),
        T.useEffect(()=>{
            Object.keys(s).length && (r(s),
            a({}))
        }
        , [s]),
        T.useEffect(()=>(l.current = !1,
        ()=>{
            l.current = !0
        }
        ), []),
        L("fieldset", {
            children: [g("legend", {
                children: k("labels.fontFamily")
            }), g(_de, {
                isOpened: t.openPopup === "fontFamily",
                selectedFontFamily: c,
                hoveredFontFamily: t.currentHoveredFontFamily,
                onSelect: u=>{
                    a({
                        openPopup: null,
                        currentHoveredFontFamily: null,
                        currentItemFontFamily: u
                    }),
                    i.current.clear()
                }
                ,
                onHover: u=>{
                    a({
                        currentHoveredFontFamily: u,
                        cachedElements: new Map(i.current),
                        resetContainers: !0
                    })
                }
                ,
                onLeave: ()=>{
                    a({
                        currentHoveredFontFamily: null,
                        cachedElements: new Map(i.current),
                        resetAll: !0
                    })
                }
                ,
                onPopupChange: u=>{
                    if (u) {
                        i.current.clear();
                        const {editingElement: f} = t;
                        if ((f == null ? void 0 : f.type) === "text") {
                            const h = n.scene.getElement(f.id);
                            i.current.set(f.id, Ne(h || f, {}, !0))
                        } else {
                            const h = dt(e, t, {
                                includeBoundTextElement: !0
                            });
                            for (const m of h)
                                i.current.set(m.id, Ne(m, {}, !0))
                        }
                        a({
                            openPopup: "fontFamily"
                        })
                    } else {
                        const f = {
                            openPopup: null,
                            currentHoveredFontFamily: null,
                            cachedElements: new Map(i.current),
                            resetAll: !0
                        };
                        l.current ? r({
                            ...s,
                            ...f
                        }) : a(f),
                        i.current.clear()
                    }
                }
            })]
        })
    }
});
we({
    name: "changeTextAlign",
    label: "Change text alignment",
    trackEvent: !1,
    perform: (e,t,n,r)=>({
        elements: Gr(e, t, i=>{
            if (ye(i)) {
                const o = Ne(i, {
                    textAlign: n
                });
                return Wr(o, r.scene.getContainerElement(i), r.scene.getNonDeletedElementsMap()),
                o
            }
            return i
        }
        , !0),
        appState: {
            ...t,
            currentItemTextAlign: n
        },
        storeAction: ee.CAPTURE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>{
        const i = r.scene.getNonDeletedElementsMap();
        return L("fieldset", {
            children: [g("legend", {
                children: k("labels.textAlign")
            }), g(Os, {
                group: "text-align",
                options: [{
                    value: "left",
                    text: k("labels.left"),
                    icon: nte,
                    testId: "align-left"
                }, {
                    value: "center",
                    text: k("labels.center"),
                    icon: rte,
                    testId: "align-horizontal-center"
                }, {
                    value: "right",
                    text: k("labels.right"),
                    icon: ite,
                    testId: "align-right"
                }],
                value: Vr(e, t, o=>{
                    if (ye(o))
                        return o.textAlign;
                    const s = Ge(o, i);
                    return s ? s.textAlign : null
                }
                , o=>ye(o) || Ge(o, i) !== null, o=>o ? null : t.currentItemTextAlign),
                onChange: o=>n(o)
            })]
        })
    }
});
we({
    name: "changeVerticalAlign",
    label: "Change vertical alignment",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>({
        elements: Gr(e, t, i=>{
            if (ye(i)) {
                const o = Ne(i, {
                    verticalAlign: n
                });
                return Wr(o, r.scene.getContainerElement(i), r.scene.getNonDeletedElementsMap()),
                o
            }
            return i
        }
        , !0),
        appState: {
            ...t
        },
        storeAction: ee.CAPTURE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>g("fieldset", {
        children: g(Os, {
            group: "text-align",
            options: [{
                value: Ai.TOP,
                text: k("labels.alignTop"),
                icon: g(ote, {
                    theme: t.theme
                }),
                testId: "align-top"
            }, {
                value: Ai.MIDDLE,
                text: k("labels.centerVertically"),
                icon: g(ate, {
                    theme: t.theme
                }),
                testId: "align-middle"
            }, {
                value: Ai.BOTTOM,
                text: k("labels.alignBottom"),
                icon: g(ste, {
                    theme: t.theme
                }),
                testId: "align-bottom"
            }],
            value: Vr(e, t, i=>{
                if (ye(i) && i.containerId)
                    return i.verticalAlign;
                const o = Ge(i, r.scene.getNonDeletedElementsMap());
                return o ? o.verticalAlign : null
            }
            , i=>ye(i) || Ge(i, r.scene.getNonDeletedElementsMap()) !== null, i=>i ? null : Ai.MIDDLE),
            onChange: i=>n(i)
        })
    })
});
we({
    name: "changeRoundness",
    label: "Change edge roundness",
    trackEvent: !1,
    perform: (e,t,n)=>({
        elements: Gr(e, t, r=>He(r) ? r : Ne(r, {
            roundness: n === "round" ? {
                type: Rf(r.type) ? An.ADAPTIVE_RADIUS : An.PROPORTIONAL_RADIUS
            } : null
        })),
        appState: {
            ...t,
            currentItemRoundness: n
        },
        storeAction: ee.CAPTURE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>{
        const i = ON(Nt(e), t).some(o=>{
            var s;
            return ((s = o.roundness) == null ? void 0 : s.type) === An.LEGACY
        }
        );
        return L("fieldset", {
            children: [g("legend", {
                children: k("labels.edges")
            }), g(Os, {
                group: "edges",
                options: [{
                    value: "sharp",
                    text: k("labels.sharp"),
                    icon: Uee
                }, {
                    value: "round",
                    text: k("labels.round"),
                    icon: Hee
                }],
                value: Vr(e, t, o=>i ? null : o.roundness ? "round" : "sharp", o=>!Be(o) && o.hasOwnProperty("roundness"), o=>o ? null : t.currentItemRoundness),
                onChange: o=>n(o)
            })]
        })
    }
});
const LA = e=>[{
    value: null,
    text: k("labels.arrowhead_none"),
    keyBinding: "q",
    icon: Wee
}, {
    value: "arrow",
    text: k("labels.arrowhead_arrow"),
    keyBinding: "w",
    icon: g(Gee, {
        flip: e
    })
}, {
    value: "bar",
    text: k("labels.arrowhead_bar"),
    keyBinding: "e",
    icon: g(Yee, {
        flip: e
    })
}, {
    value: "dot",
    text: k("labels.arrowhead_circle"),
    keyBinding: null,
    icon: g(uT, {
        flip: e
    }),
    showInPicker: !1
}, {
    value: "circle",
    text: k("labels.arrowhead_circle"),
    keyBinding: "r",
    icon: g(uT, {
        flip: e
    }),
    showInPicker: !1
}, {
    value: "circle_outline",
    text: k("labels.arrowhead_circle_outline"),
    keyBinding: null,
    icon: g(Vee, {
        flip: e
    }),
    showInPicker: !1
}, {
    value: "triangle",
    text: k("labels.arrowhead_triangle"),
    icon: g(jee, {
        flip: e
    }),
    keyBinding: "t"
}, {
    value: "triangle_outline",
    text: k("labels.arrowhead_triangle_outline"),
    icon: g(Kee, {
        flip: e
    }),
    keyBinding: null,
    showInPicker: !1
}, {
    value: "diamond",
    text: k("labels.arrowhead_diamond"),
    icon: g(Xee, {
        flip: e
    }),
    keyBinding: null,
    showInPicker: !1
}, {
    value: "diamond_outline",
    text: k("labels.arrowhead_diamond_outline"),
    icon: g(Zee, {
        flip: e
    }),
    keyBinding: null,
    showInPicker: !1
}];
we({
    name: "changeArrowhead",
    label: "Change arrowheads",
    trackEvent: !1,
    perform: (e,t,n)=>({
        elements: Gr(e, t, r=>{
            if (je(r)) {
                const {position: i, type: o} = n;
                if (i === "start")
                    return Ne(r, {
                        startArrowhead: o
                    });
                if (i === "end")
                    return Ne(r, {
                        endArrowhead: o
                    })
            }
            return r
        }
        ),
        appState: {
            ...t,
            [n.position === "start" ? "currentItemStartArrowhead" : "currentItemEndArrowhead"]: n.type
        },
        storeAction: ee.CAPTURE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>{
        const r = uf().rtl;
        return L("fieldset", {
            children: [g("legend", {
                children: k("labels.arrowheads")
            }), L("div", {
                className: "iconSelectList buttonList",
                children: [g(TA, {
                    label: "arrowhead_start",
                    options: LA(!r),
                    value: Vr(e, t, i=>je(i) && A2(i.type) ? i.startArrowhead : t.currentItemStartArrowhead, !0, t.currentItemStartArrowhead),
                    onChange: i=>n({
                        position: "start",
                        type: i
                    })
                }), g(TA, {
                    label: "arrowhead_end",
                    group: "arrowheads",
                    options: LA(!!r),
                    value: Vr(e, t, i=>je(i) && A2(i.type) ? i.endArrowhead : t.currentItemEndArrowhead, !0, t.currentItemEndArrowhead),
                    onChange: i=>n({
                        position: "end",
                        type: i
                    })
                })]
            })]
        })
    }
});
we({
    name: "changeArrowType",
    label: "Change arrow types",
    trackEvent: !1,
    perform: (e,t,n,r)=>({
        elements: Gr(e, t, i=>{
            if (!Be(i))
                return i;
            const o = Ne(i, {
                roundness: n === nr.round ? {
                    type: An.PROPORTIONAL_RADIUS
                } : null,
                elbowed: n === nr.elbow,
                points: n === nr.elbow || i.elbowed ? [i.points[0], i.points[i.points.length - 1]] : i.points
            });
            if (He(o)) {
                const s = r.scene.getNonDeletedElementsMap();
                r.dismissLinearEditor();
                const a = ke.getPointAtIndexGlobalCoordinates(o, 0, s)
                  , l = ke.getPointAtIndexGlobalCoordinates(o, -1, s)
                  , c = !o.startBinding && ro(no(a), e, s, !0)
                  , u = !o.endBinding && ro(no(l), e, s, !0)
                  , f = c || o.startBinding && s.get(o.startBinding.elementId)
                  , h = u || o.endBinding && s.get(o.endBinding.elementId)
                  , m = c ? p2(a, l, c, s) : a
                  , v = u ? p2(l, a, u, s) : l;
                c && Ms(o, c, "start", s),
                u && Ms(o, u, "end", s),
                wu(o, s, [m, v].map(y=>[y[0] - o.x, y[1] - o.y]), [0, 0], {
                    ...f && o.startBinding ? {
                        startBinding: {
                            ...o.startBinding,
                            ...m2(o, f, "start", s)
                        }
                    } : {},
                    ...h && o.endBinding ? {
                        endBinding: {
                            ...o.endBinding,
                            ...m2(o, h, "end", s)
                        }
                    } : {}
                })
            } else
                ue(o, {
                    startBinding: o.startBinding ? {
                        ...o.startBinding,
                        fixedPoint: null
                    } : null,
                    endBinding: o.endBinding ? {
                        ...o.endBinding,
                        fixedPoint: null
                    } : null
                }, !1);
            return o
        }
        ),
        appState: {
            ...t,
            currentItemArrowType: n
        },
        storeAction: ee.CAPTURE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>L("fieldset", {
        children: [g("legend", {
            children: k("labels.arrowtypes")
        }), g(Os, {
            group: "arrowtypes",
            options: [{
                value: nr.sharp,
                text: k("labels.arrowtype_sharp"),
                icon: Dte,
                testId: "sharp-arrow"
            }, {
                value: nr.round,
                text: k("labels.arrowtype_round"),
                icon: Nte,
                testId: "round-arrow"
            }, {
                value: nr.elbow,
                text: k("labels.arrowtype_elbowed"),
                icon: Ote,
                testId: "elbow-arrow"
            }],
            value: Vr(e, t, r=>Be(r) ? r.elbowed ? nr.elbow : r.roundness ? nr.round : nr.sharp : null, r=>Be(r), r=>r ? null : t.currentItemArrowType),
            onChange: r=>n(r)
        })]
    })
});
const $c = ({viewportX: e, viewportY: t, nextZoom: n},r)=>{
    const i = e - r.offsetLeft
      , o = t - r.offsetTop
      , s = r.zoom.value
      , a = r.scrollX + (i - i / s)
      , l = r.scrollY + (o - o / s)
      , c = -(i - i / n)
      , u = -(o - o / n);
    return {
        scrollX: a + c,
        scrollY: l + u,
        zoom: {
            value: n
        }
    }
}
  , Ig = ()=>{
    const e = document.querySelector(".excalidraw-tooltip");
    if (e)
        return e;
    const t = document.createElement("div");
    return document.body.appendChild(t),
    t.classList.add("excalidraw-tooltip"),
    t
}
  , NF = (e,t,n="bottom")=>{
    const r = e.getBoundingClientRect()
      , i = window.innerWidth
      , o = window.innerHeight
      , s = 5;
    let a = t.left + t.width / 2 - r.width / 2;
    a < 0 ? a = s : a + r.width >= i && (a = i - r.width - s);
    let l;
    n === "bottom" ? (l = t.top + t.height + s,
    l + r.height >= o && (l = t.top - r.height - s)) : (l = t.top - r.height - s,
    l < 0 && (l = t.top + t.height + s)),
    Object.assign(e.style, {
        top: `${l}px`,
        left: `${a}px`
    })
}
  , Sde = (e,t,n,r)=>{
    t.classList.add("excalidraw-tooltip--visible"),
    t.style.minWidth = r ? "50ch" : "10ch",
    t.style.maxWidth = r ? "50ch" : "15ch",
    t.textContent = n;
    const i = e.getBoundingClientRect();
    NF(t, i)
}
  , Ma = ({children: e, label: t, long: n=!1, style: r, disabled: i})=>(T.useEffect(()=>()=>Ig().classList.remove("excalidraw-tooltip--visible"), []),
i ? null : g("div", {
    className: "excalidraw-tooltip-wrapper",
    onPointerEnter: o=>Sde(o.currentTarget, Ig(), t, n),
    onPointerLeave: ()=>Ig().classList.remove("excalidraw-tooltip--visible"),
    style: r,
    children: e
}));
we({
    name: "changeViewBackgroundColor",
    label: "labels.canvasBackground",
    paletteName: "Change canvas background color",
    trackEvent: !1,
    predicate: (e,t,n,r)=>!!r.props.UIOptions.canvasActions.changeViewBackgroundColor && !t.viewModeEnabled,
    perform: (e,t,n)=>({
        appState: {
            ...t,
            ...n
        },
        storeAction: n.viewBackgroundColor ? ee.CAPTURE : ee.NONE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n, appProps: r})=>g($4, {
        palette: null,
        topPicks: FP,
        label: k("labels.canvasBackground"),
        type: "canvasBackground",
        color: t.viewBackgroundColor,
        onChange: i=>n({
            viewBackgroundColor: i
        }),
        "data-testid": "canvas-background-picker",
        elements: e,
        appState: t,
        updateData: n
    })
});
const Cg = we({
    name: "clearCanvas",
    label: "labels.clearCanvas",
    paletteName: "Clear canvas",
    icon: hf,
    trackEvent: {
        category: "canvas"
    },
    predicate: (e,t,n,r)=>!!r.props.UIOptions.canvasActions.clearCanvas && !t.viewModeEnabled,
    perform: (e,t,n,r)=>(r.imageCache.clear(),
    {
        elements: e.map(i=>Ne(i, {
            isDeleted: !0
        })),
        appState: {
            ...ho(),
            files: {},
            theme: t.theme,
            penMode: t.penMode,
            penDetected: t.penDetected,
            exportBackground: t.exportBackground,
            exportEmbedScene: t.exportEmbedScene,
            gridSize: t.gridSize,
            gridStep: t.gridStep,
            gridModeEnabled: t.gridModeEnabled,
            stats: t.stats,
            pasteDialog: t.pasteDialog,
            activeTool: t.activeTool.type === "image" ? {
                ...t.activeTool,
                type: "selection"
            } : t.activeTool
        },
        storeAction: ee.CAPTURE
    })
})
  , PA = we({
    name: "zoomIn",
    label: "buttons.zoomIn",
    viewMode: !0,
    icon: jk,
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n,r)=>({
        appState: {
            ...t,
            ...$c({
                viewportX: t.width / 2 + t.offsetLeft,
                viewportY: t.height / 2 + t.offsetTop,
                nextZoom: bs(t.zoom.value + Qg)
            }, t),
            userToFollow: null
        },
        storeAction: ee.NONE
    }),
    PanelComponent: ({updateData: e, appState: t})=>g(lt, {
        type: "button",
        className: "zoom-in-button zoom-button",
        icon: jk,
        title: `${k("buttons.zoomIn")} — ${ie("CtrlOrCmd++")}`,
        "aria-label": k("buttons.zoomIn"),
        disabled: t.zoom.value >= YP,
        onClick: ()=>{
            e(null)
        }
    }),
    keyTest: e=>(e.code === pt.EQUAL || e.code === pt.NUM_ADD) && (e[U.CTRL_OR_CMD] || e.shiftKey)
})
  , RA = we({
    name: "zoomOut",
    label: "buttons.zoomOut",
    icon: Kk,
    viewMode: !0,
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n,r)=>({
        appState: {
            ...t,
            ...$c({
                viewportX: t.width / 2 + t.offsetLeft,
                viewportY: t.height / 2 + t.offsetTop,
                nextZoom: bs(t.zoom.value - Qg)
            }, t),
            userToFollow: null
        },
        storeAction: ee.NONE
    }),
    PanelComponent: ({updateData: e, appState: t})=>g(lt, {
        type: "button",
        className: "zoom-out-button zoom-button",
        icon: Kk,
        title: `${k("buttons.zoomOut")} — ${ie("CtrlOrCmd+-")}`,
        "aria-label": k("buttons.zoomOut"),
        disabled: t.zoom.value <= VP,
        onClick: ()=>{
            e(null)
        }
    }),
    keyTest: e=>(e.code === pt.MINUS || e.code === pt.NUM_SUBTRACT) && (e[U.CTRL_OR_CMD] || e.shiftKey)
});
we({
    name: "resetZoom",
    label: "buttons.resetZoom",
    icon: hee,
    viewMode: !0,
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n,r)=>({
        appState: {
            ...t,
            ...$c({
                viewportX: t.width / 2 + t.offsetLeft,
                viewportY: t.height / 2 + t.offsetTop,
                nextZoom: bs(1)
            }, t),
            userToFollow: null
        },
        storeAction: ee.NONE
    }),
    PanelComponent: ({updateData: e, appState: t})=>g(Ma, {
        label: k("buttons.resetZoom"),
        style: {
            height: "100%"
        },
        children: L(lt, {
            type: "button",
            className: "reset-zoom-button zoom-button",
            title: k("buttons.resetZoom"),
            "aria-label": k("buttons.resetZoom"),
            onClick: ()=>{
                e(null)
            }
            ,
            children: [(t.zoom.value * 100).toFixed(0), "%"]
        })
    }),
    keyTest: e=>(e.code === pt.ZERO || e.code === pt.NUM_ZERO) && (e[U.CTRL_OR_CMD] || e.shiftKey)
});
const Ide = (e,t,n=1)=>{
    const [r,i,o,s] = e
      , a = o - r
      , l = t.width / a
      , c = s - i
      , u = t.height / c
      , h = Math.min(l, u) * yu(n, .1, 1)
      , m = Math.floor(h / Qg) * Qg;
    return bs(Math.min(m, 1))
}
  , FF = ({bounds: e, appState: t, fitToViewport: n=!1, viewportZoomFactor: r=1})=>{
    const [i,o,s,a] = e
      , l = (i + s) / 2
      , c = (o + a) / 2;
    let u, f, h;
    if (n) {
        const m = s - i
          , v = a - o;
        u = Math.min(t.width / m, t.height / v) * yu(r, .1, 1),
        u = bs(u);
        let y = t.width;
        if (t.openSidebar) {
            const E = document.querySelector(".sidebar")
              , b = (E == null ? void 0 : E.offsetWidth) ?? 0;
            y = document.documentElement.getAttribute("dir") === "rtl" ? t.width + b : t.width - b
        }
        f = y / 2 * (1 / u) - l,
        h = t.height / 2 * (1 / u) - c
    } else {
        u = Ide(e, {
            width: t.width,
            height: t.height
        }, r);
        const m = NN({
            scenePoint: {
                x: l,
                y: c
            },
            viewportDimensions: {
                width: t.width,
                height: t.height
            },
            zoom: {
                value: u
            }
        });
        f = m.scrollX,
        h = m.scrollY
    }
    return {
        appState: {
            ...t,
            scrollX: f,
            scrollY: h,
            zoom: {
                value: u
            }
        },
        storeAction: ee.NONE
    }
}
  , vy = ({targetElements: e, appState: t, fitToViewport: n, viewportZoomFactor: r})=>{
    const i = xt(Nt(e));
    return FF({
        bounds: i,
        appState: t,
        fitToViewport: n,
        viewportZoomFactor: r
    })
}
;
we({
    name: "zoomToFitSelectionInViewport",
    label: "labels.zoomToFitViewport",
    icon: $6,
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t);
        return vy({
            targetElements: i.length ? i : e,
            appState: {
                ...t,
                userToFollow: null
            },
            fitToViewport: !1
        })
    }
    ,
    keyTest: e=>e.code === pt.TWO && e.shiftKey && !e.altKey && !e[U.CTRL_OR_CMD]
});
we({
    name: "zoomToFitSelection",
    label: "helpDialog.zoomToSelection",
    icon: $6,
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t);
        return vy({
            targetElements: i.length ? i : e,
            appState: {
                ...t,
                userToFollow: null
            },
            fitToViewport: !0,
            viewportZoomFactor: .7
        })
    }
    ,
    keyTest: e=>e.code === pt.THREE && e.shiftKey && !e.altKey && !e[U.CTRL_OR_CMD]
});
we({
    name: "zoomToFit",
    label: "helpDialog.zoomToFit",
    icon: $6,
    viewMode: !0,
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t)=>vy({
        targetElements: e,
        appState: {
            ...t,
            userToFollow: null
        },
        fitToViewport: !1
    }),
    keyTest: e=>e.code === pt.ONE && e.shiftKey && !e.altKey && !e[U.CTRL_OR_CMD]
});
const G2 = we({
    name: "toggleTheme",
    label: (e,t)=>t.theme === Oe.DARK ? "buttons.lightMode" : "buttons.darkMode",
    keywords: ["toggle", "dark", "light", "mode", "theme"],
    icon: e=>e.theme === Oe.LIGHT ? t_ : n_,
    viewMode: !0,
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n)=>({
        appState: {
            ...t,
            theme: n || (t.theme === Oe.LIGHT ? Oe.DARK : Oe.LIGHT)
        },
        storeAction: ee.NONE
    }),
    keyTest: e=>e.altKey && e.shiftKey && e.code === pt.D,
    predicate: (e,t,n,r)=>!!r.props.UIOptions.canvasActions.toggleTheme
});
we({
    name: "toggleEraserTool",
    label: "toolBar.eraser",
    trackEvent: {
        category: "toolbar"
    },
    perform: (e,t)=>{
        let n;
        return fs(t) ? n = bn(t, {
            ...t.activeTool.lastActiveTool || {
                type: "selection"
            },
            lastActiveToolBeforeEraser: null
        }) : n = bn(t, {
            type: "eraser",
            lastActiveToolBeforeEraser: t.activeTool
        }),
        {
            appState: {
                ...t,
                selectedElementIds: {},
                selectedGroupIds: {},
                activeEmbeddable: null,
                activeTool: n
            },
            storeAction: ee.CAPTURE
        }
    }
    ,
    keyTest: e=>e.key === U.E
});
const Cde = we({
    name: "toggleHandTool",
    label: "toolBar.hand",
    paletteName: "Toggle hand tool",
    trackEvent: {
        category: "toolbar"
    },
    icon: DD,
    viewMode: !1,
    perform: (e,t,n,r)=>{
        let i;
        return lf(t) ? i = bn(t, {
            ...t.activeTool.lastActiveTool || {
                type: "selection"
            },
            lastActiveToolBeforeEraser: null
        }) : (i = bn(t, {
            type: "hand",
            lastActiveToolBeforeEraser: t.activeTool
        }),
        At(r.interactiveCanvas, It.GRAB)),
        {
            appState: {
                ...t,
                selectedElementIds: {},
                selectedGroupIds: {},
                activeEmbeddable: null,
                activeTool: i
            },
            storeAction: ee.CAPTURE
        }
    }
    ,
    keyTest: e=>!e.altKey && !e[U.CTRL_OR_CMD] && e.key === U.H
})
  , ko = we({
    name: "finalize",
    label: "",
    trackEvent: !1,
    perform: (e,t,n,r)=>{
        var h;
        const {interactiveCanvas: i, focusContainer: o, scene: s} = r
          , a = s.getNonDeletedElementsMap();
        if (t.editingLinearElement) {
            const {elementId: m, startBindingElement: v, endBindingElement: y} = t.editingLinearElement
              , E = ke.getElement(m, a);
            if (E)
                return ms(E) && Yv(E, v, y, a, s),
                {
                    elements: E.points.length < 2 || bu(E) ? e.filter(b=>b.id !== E.id) : void 0,
                    appState: {
                        ...t,
                        cursorButton: "up",
                        editingLinearElement: null,
                        selectedLinearElement: null
                    },
                    storeAction: ee.CAPTURE
                }
        }
        let l = e;
        const c = t.pendingImageElementId && s.getElement(t.pendingImageElementId);
        c && ue(c, {
            isDeleted: !0
        }, !1),
        window.document.activeElement instanceof HTMLElement && o();
        const u = t.multiElement ? t.multiElement : ((h = t.newElement) == null ? void 0 : h.type) === "freedraw" ? t.newElement : null;
        if (u) {
            if (u.type !== "freedraw" && t.lastPointerDownWith !== "touch") {
                const {points: v, lastCommittedPoint: y} = u;
                (!y || v[v.length - 1] !== y) && ue(u, {
                    points: u.points.slice(0, -1)
                })
            }
            bu(u) && (l = l.filter(v=>v.id !== u.id));
            const m = Ca(u.points, t.zoom.value);
            if ((u.type === "line" || u.type === "freedraw") && m) {
                const v = u.points
                  , y = v[0];
                ue(u, {
                    points: v.map((E,b)=>b === v.length - 1 ? [y[0], y[1]] : E)
                })
            }
            if (ms(u) && !m && u.points.length > 1) {
                const [v,y] = ke.getPointAtIndexGlobalCoordinates(u, -1, De(e));
                m_(u, t, {
                    x: v,
                    y
                }, a, e)
            }
        }
        (!t.activeTool.locked && t.activeTool.type !== "freedraw" || !u) && Ao(i);
        let f;
        return t.activeTool.type === "eraser" ? f = bn(t, {
            ...t.activeTool.lastActiveTool || {
                type: "selection"
            },
            lastActiveToolBeforeEraser: null
        }) : f = bn(t, {
            type: "selection"
        }),
        {
            elements: l,
            appState: {
                ...t,
                cursorButton: "up",
                activeTool: (t.activeTool.locked || t.activeTool.type === "freedraw") && u ? t.activeTool : f,
                activeEmbeddable: null,
                newElement: null,
                selectionElement: null,
                multiElement: null,
                editingElement: null,
                startBoundElement: null,
                suggestedBindings: [],
                selectedElementIds: u && !t.activeTool.locked && t.activeTool.type !== "freedraw" ? {
                    ...t.selectedElementIds,
                    [u.id]: !0
                } : t.selectedElementIds,
                selectedLinearElement: u && je(u) ? new ke(u) : t.selectedLinearElement,
                pendingImageElementId: null
            },
            storeAction: ee.CAPTURE
        }
    }
    ,
    keyTest: (e,t)=>e.key === U.ESCAPE && (t.editingLinearElement !== null || !t.newElement && t.multiElement === null) || (e.key === U.ESCAPE || e.key === U.ENTER) && t.multiElement !== null,
    PanelComponent: ({appState: e, updateData: t, data: n})=>g(lt, {
        type: "button",
        icon: bee,
        title: k("buttons.done"),
        "aria-label": k("buttons.done"),
        onClick: t,
        visible: e.multiElement != null,
        size: (n == null ? void 0 : n.size) || "medium"
    })
})
  , kde = e=>{
    const {id: t} = Ns()
      , [n,r] = T.useState(e.value)
      , i = s=>{
        e.ignoreFocus || sJ(s.target);
        const a = s.target.value;
        a !== e.value && e.onChange(a)
    }
      , o = s=>{
        if (s.key === U.ENTER) {
            if (s.preventDefault(),
            s.nativeEvent.isComposing || s.keyCode === 229)
                return;
            s.currentTarget.blur()
        }
    }
    ;
    return L("div", {
        className: "ProjectName",
        children: [g("label", {
            className: "ProjectName-label",
            htmlFor: "filename",
            children: `${e.label}:`
        }), g("input", {
            type: "text",
            className: "TextInput",
            onBlur: i,
            onKeyDown: o,
            id: `${t}-filename`,
            value: n,
            onChange: s=>r(s.target.value)
        })]
    })
}
  , Tde = e=>{
    const t = e.title || (e.value === Oe.DARK ? k("buttons.lightMode") : k("buttons.darkMode"));
    return g(lt, {
        type: "icon",
        icon: e.value === Oe.LIGHT ? DA.MOON : DA.SUN,
        title: t,
        "aria-label": t,
        onClick: ()=>e.onChange(e.value === Oe.DARK ? Oe.LIGHT : Oe.DARK),
        "data-testid": "toggle-dark-mode"
    })
}
  , DA = {
    SUN: g("svg", {
        width: "512",
        height: "512",
        className: "rtl-mirror",
        viewBox: "0 0 512 512",
        children: g("path", {
            fill: "currentColor",
            d: "M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"
        })
    }),
    MOON: g("svg", {
        width: "512",
        height: "512",
        className: "rtl-mirror",
        viewBox: "0 0 512 512",
        children: g("path", {
            fill: "currentColor",
            d: "M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"
        })
    })
}
  , yy = (e,{selectedElementIds: t},n)=>{
    e = Nt(e);
    const r = n && Mn(e, {
        selectedElementIds: t
    });
    let i = null
      , o = r ? dt(e, {
        selectedElementIds: t
    }, {
        includeBoundTextElement: !0
    }) : e;
    return r && (o.length === 1 && Ue(o[0]) ? (i = o[0],
    o = p4(e, i)) : o.length > 1 && (o = dt(e, {
        selectedElementIds: t
    }, {
        includeBoundTextElement: !0,
        includeElementsInFrames: !0
    }))),
    {
        exportingFrame: i,
        exportedElements: ha(o)
    }
}
  , wy = async(e,t,n,r,{exportBackground: i, exportPadding: o=Mf, viewBackgroundColor: s, name: a=n.name || ZP, fileHandle: l=null, exportingFrame: c=null})=>{
    if (t.length === 0)
        throw new Error(k("alerts.cannotExportEmptyCanvas"));
    if (e === "svg" || e === "clipboard-svg") {
        const f = l4(t, {
            exportBackground: i,
            exportWithDarkMode: n.exportWithDarkMode,
            viewBackgroundColor: s,
            exportPadding: o,
            exportScale: n.exportScale,
            exportEmbedScene: n.exportEmbedScene && e === "svg"
        }, r, {
            exportingFrame: c
        });
        if (e === "svg")
            return d2(f.then(h=>new Blob([h.outerHTML],{
                type: Re.svg
            })), {
                description: "Export to SVG",
                name: a,
                extension: n.exportEmbedScene ? "excalidraw.svg" : "svg",
                fileHandle: l
            });
        if (e === "clipboard-svg") {
            const h = await f.then(m=>m.outerHTML);
            try {
                await Pu(h)
            } catch {
                throw new Error(k("errors.copyToSystemClipboardFailed"))
            }
            return
        }
    }
    const u = BO(t, n, r, {
        exportBackground: i,
        viewBackgroundColor: s,
        exportPadding: o,
        exportingFrame: c
    });
    if (e === "png") {
        let f = dp(u);
        return n.exportEmbedScene && (f = f.then(h=>_e(()=>Promise.resolve().then(()=>k2), void 0).then(({encodePngMetadata: m})=>m({
            blob: h,
            metadata: Bf(t, n, r, "local")
        })))),
        d2(f, {
            description: "Export to PNG",
            name: a,
            extension: "png",
            fileHandle: l
        })
    } else if (e === "clipboard")
        try {
            const f = dp(u);
            await $se(f)
        } catch (f) {
            throw console.warn(f),
            f.name === "CANVAS_POSSIBLY_TOO_BIG" ? new Error(k("canvasError.canvasTooBig")) : qg && f.name === "TypeError" ? new Error(`${k("alerts.couldNotCopyToClipboard")}

${k("hints.firefox_clipboard_write")}`) : new Error(k("alerts.couldNotCopyToClipboard"))
        }
    else
        throw new Error("Unsupported export type")
}
  , Ade = async(e,t,n,r)=>{
    const {exportBackground: i, viewBackgroundColor: o, fileHandle: s} = t
      , a = oO(s);
    if (!s || !doe(a))
        throw new Error("fileHandle should exist and should be of type svg or png when resaving");
    t = {
        ...t,
        exportEmbedScene: !0
    };
    const {exportedElements: l, exportingFrame: c} = yy(e, t, !1);
    return await wy(a, l, t, n, {
        exportBackground: i,
        viewBackgroundColor: o,
        name: r,
        fileHandle: s,
        exportingFrame: c
    }),
    {
        fileHandle: s
    }
}
  , Ey = ({children: e, checked: t, onChange: n, className: r})=>L("div", {
    className: xe("Checkbox", r, {
        "is-checked": t
    }),
    onClick: i=>{
        n(!t, i),
        i.currentTarget.querySelector(".Checkbox-box").focus()
    }
    ,
    children: [g("button", {
        type: "button",
        className: "Checkbox-box",
        role: "checkbox",
        "aria-checked": t,
        children: mee
    }), g("div", {
        className: "Checkbox-label",
        children: e
    })]
})
  , Mde = we({
    name: "changeProjectName",
    label: "labels.fileTitle",
    trackEvent: !1,
    perform: (e,t,n)=>({
        appState: {
            ...t,
            name: n
        },
        storeAction: ee.NONE
    }),
    PanelComponent: ({appState: e, updateData: t, appProps: n, data: r, app: i})=>g(kde, {
        label: k("labels.fileTitle"),
        value: i.getName(),
        onChange: o=>t(o),
        ignoreFocus: (r == null ? void 0 : r.ignoreFocus) ?? !1
    })
})
  , Lde = we({
    name: "changeExportScale",
    label: "imageExportDialog.scale",
    trackEvent: {
        category: "export",
        action: "scale"
    },
    perform: (e,t,n)=>({
        appState: {
            ...t,
            exportScale: n
        },
        storeAction: ee.NONE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>{
        const r = Nt(e)
          , o = Mn(r, t) ? dt(r, t) : r;
        return g(Se, {
            children: w6.map(s=>{
                const [a,l] = rse(o, Mf, s)
                  , c = `${k("imageExportDialog.label.scale")} ${s}x (${a}x${l})`;
                return g(lt, {
                    size: "small",
                    type: "radio",
                    icon: `${s}x`,
                    name: "export-canvas-scale",
                    title: c,
                    "aria-label": c,
                    id: "export-canvas-scale",
                    checked: s === t.exportScale,
                    onChange: ()=>n(s)
                }, s)
            }
            )
        })
    }
})
  , Pde = we({
    name: "changeExportBackground",
    label: "imageExportDialog.label.withBackground",
    trackEvent: {
        category: "export",
        action: "toggleBackground"
    },
    perform: (e,t,n)=>({
        appState: {
            ...t,
            exportBackground: n
        },
        storeAction: ee.NONE
    }),
    PanelComponent: ({appState: e, updateData: t})=>g(Ey, {
        checked: e.exportBackground,
        onChange: n=>t(n),
        children: k("imageExportDialog.label.withBackground")
    })
})
  , BF = we({
    name: "changeExportEmbedScene",
    label: "imageExportDialog.tooltip.embedScene",
    trackEvent: {
        category: "export",
        action: "embedScene"
    },
    perform: (e,t,n)=>({
        appState: {
            ...t,
            exportEmbedScene: n
        },
        storeAction: ee.NONE
    }),
    PanelComponent: ({appState: e, updateData: t})=>L(Ey, {
        checked: e.exportEmbedScene,
        onChange: n=>t(n),
        children: [k("imageExportDialog.label.embedScene"), g(Ma, {
            label: k("imageExportDialog.tooltip.embedScene"),
            long: !0,
            children: g("div", {
                className: "excalidraw-tooltip-icon",
                children: _ee
            })
        })]
    })
})
  , OA = we({
    name: "saveToActiveFile",
    label: "buttons.save",
    icon: Nv,
    trackEvent: {
        category: "export"
    },
    predicate: (e,t,n,r)=>!!r.props.UIOptions.canvasActions.saveToActiveFile && !!t.fileHandle && !t.viewModeEnabled,
    perform: async(e,t,n,r)=>{
        const i = !!t.fileHandle;
        try {
            const {fileHandle: o} = n4(t.fileHandle) ? await Ade(e, t, r.files, r.getName()) : await P9(e, t, r.files, r.getName());
            return {
                storeAction: ee.NONE,
                appState: {
                    ...t,
                    fileHandle: o,
                    toast: i ? {
                        message: o != null && o.name ? k("toast.fileSavedToFilename").replace("{filename}", `"${o.name}"`) : k("toast.fileSaved")
                    } : null
                }
            }
        } catch (o) {
            return (o == null ? void 0 : o.name) !== "AbortError" ? console.error(o) : console.warn(o),
            {
                storeAction: ee.NONE
            }
        }
    }
    ,
    keyTest: e=>e.key === U.S && e[U.CTRL_OR_CMD] && !e.shiftKey
})
  , zF = we({
    name: "saveFileToDisk",
    label: "exportDialog.disk_title",
    icon: Nv,
    viewMode: !0,
    trackEvent: {
        category: "export"
    },
    perform: async(e,t,n,r)=>{
        try {
            const {fileHandle: i} = await P9(e, {
                ...t,
                fileHandle: null
            }, r.files, r.getName());
            return {
                storeAction: ee.NONE,
                appState: {
                    ...t,
                    openDialog: null,
                    fileHandle: i,
                    toast: {
                        message: k("toast.fileSaved")
                    }
                }
            }
        } catch (i) {
            return (i == null ? void 0 : i.name) !== "AbortError" ? console.error(i) : console.warn(i),
            {
                storeAction: ee.NONE
            }
        }
    }
    ,
    keyTest: e=>e.key === U.S && e.shiftKey && e[U.CTRL_OR_CMD],
    PanelComponent: ({updateData: e})=>g(lt, {
        type: "button",
        icon: yee,
        title: k("buttons.saveAs"),
        "aria-label": k("buttons.saveAs"),
        showAriaLabel: ur().editor.isMobile,
        hidden: !Mu,
        onClick: ()=>e(null),
        "data-testid": "save-as-button"
    })
})
  , G_ = we({
    name: "loadScene",
    label: "buttons.load",
    trackEvent: {
        category: "export"
    },
    predicate: (e,t,n,r)=>!!r.props.UIOptions.canvasActions.loadScene && !t.viewModeEnabled,
    perform: async(e,t,n,r)=>{
        try {
            const {elements: i, appState: o, files: s} = await Ore(t, e);
            return {
                elements: i,
                appState: o,
                files: s,
                storeAction: ee.CAPTURE
            }
        } catch (i) {
            return (i == null ? void 0 : i.name) === "AbortError" ? (console.warn(i),
            !1) : {
                elements: e,
                appState: {
                    ...t,
                    errorMessage: i.message
                },
                files: r.files,
                storeAction: ee.NONE
            }
        }
    }
    ,
    keyTest: e=>e[U.CTRL_OR_CMD] && e.key === U.O
})
  , Rde = we({
    name: "exportWithDarkMode",
    label: "imageExportDialog.label.darkMode",
    trackEvent: {
        category: "export",
        action: "toggleTheme"
    },
    perform: (e,t,n)=>({
        appState: {
            ...t,
            exportWithDarkMode: n
        },
        storeAction: ee.NONE
    }),
    PanelComponent: ({appState: e, updateData: t})=>g("div", {
        style: {
            display: "flex",
            justifyContent: "flex-end",
            marginTop: "-45px",
            marginBottom: "10px"
        },
        children: g(Tde, {
            value: e.exportWithDarkMode ? Oe.DARK : Oe.LIGHT,
            onChange: n=>{
                t(n === Oe.DARK)
            }
            ,
            title: k("imageExportDialog.label.darkMode")
        })
    })
});
let $F = "{}";
const Dde = we({
    name: "copyStyles",
    label: "labels.copyStyles",
    icon: UD,
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>{
        const i = []
          , o = e.find(s=>t.selectedElementIds[s.id]);
        if (i.push(o),
        o && go(o)) {
            const s = Ge(o, r.scene.getNonDeletedElementsMap());
            i.push(s)
        }
        return o && ($F = JSON.stringify(i)),
        {
            appState: {
                ...t,
                toast: {
                    message: k("toast.copyStyles")
                }
            },
            storeAction: ee.NONE
        }
    }
    ,
    keyTest: e=>e[U.CTRL_OR_CMD] && e.altKey && e.code === pt.C
})
  , Ode = we({
    name: "pasteStyles",
    label: "labels.pasteStyles",
    icon: UD,
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>{
        const i = JSON.parse($F)
          , o = i[0]
          , s = i[1];
        if (!aD(o))
            return {
                elements: e,
                storeAction: ee.NONE
            };
        const a = dt(e, t, {
            includeBoundTextElement: !0
        })
          , l = a.map(c=>c.id);
        return {
            elements: e.map(c=>{
                if (l.includes(c.id)) {
                    let u = o;
                    if (ye(c) && c.containerId && (u = s),
                    !u)
                        return c;
                    let f = Ne(c, {
                        backgroundColor: u == null ? void 0 : u.backgroundColor,
                        strokeWidth: u == null ? void 0 : u.strokeWidth,
                        strokeColor: u == null ? void 0 : u.strokeColor,
                        strokeStyle: u == null ? void 0 : u.strokeStyle,
                        fillStyle: u == null ? void 0 : u.fillStyle,
                        opacity: u == null ? void 0 : u.opacity,
                        roughness: u == null ? void 0 : u.roughness,
                        roundness: u.roundness ? vJ(u.roundness.type, c) ? u.roundness : yJ(c) : null
                    });
                    if (ye(f)) {
                        const h = u.fontSize || Ra
                          , m = u.fontFamily || ec;
                        f = Ne(f, {
                            fontSize: h,
                            fontFamily: m,
                            textAlign: u.textAlign || Np,
                            lineHeight: u.lineHeight || mu(m)
                        });
                        let v = null;
                        f.containerId && (v = a.find(y=>ye(f) && y.id === f.containerId) || null),
                        Wr(f, v, r.scene.getNonDeletedElementsMap())
                    }
                    return f.type === "arrow" && Be(u) && (f = Ne(f, {
                        startArrowhead: u.startArrowhead,
                        endArrowhead: u.endArrowhead
                    })),
                    Ue(c) && (f = Ne(f, {
                        roundness: null,
                        backgroundColor: "transparent"
                    })),
                    f
                }
                return c
            }
            ),
            storeAction: ee.CAPTURE
        }
    }
    ,
    keyTest: e=>e[U.CTRL_OR_CMD] && e.altKey && e.code === pt.V
});
we({
    name: "toggleCanvasMenu",
    label: "buttons.menu",
    trackEvent: {
        category: "menu"
    },
    perform: (e,t)=>({
        appState: {
            ...t,
            openMenu: t.openMenu === "canvas" ? null : "canvas"
        },
        storeAction: ee.NONE
    }),
    PanelComponent: ({appState: e, updateData: t})=>g(lt, {
        type: "button",
        icon: CD,
        "aria-label": k("buttons.menu"),
        onClick: t,
        selected: e.openMenu === "canvas"
    })
});
we({
    name: "toggleEditMenu",
    label: "buttons.edit",
    trackEvent: {
        category: "menu"
    },
    perform: (e,t)=>({
        appState: {
            ...t,
            openMenu: t.openMenu === "shape" ? null : "shape"
        },
        storeAction: ee.NONE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n})=>g(lt, {
        visible: A4(t, Nt(e)),
        type: "button",
        icon: wee,
        "aria-label": k("buttons.edit"),
        onClick: n,
        selected: t.openMenu === "shape"
    })
});
const W4 = we({
    name: "toggleShortcuts",
    label: "welcomeScreen.defaults.helpHint",
    icon: pee,
    viewMode: !0,
    trackEvent: {
        category: "menu",
        action: "toggleHelpDialog"
    },
    perform: (e,t,n,{focusContainer: r})=>{
        var i, o;
        return ((i = t.openDialog) == null ? void 0 : i.name) === "help" && r(),
        {
            appState: {
                ...t,
                openDialog: ((o = t.openDialog) == null ? void 0 : o.name) === "help" ? null : {
                    name: "help"
                }
            },
            storeAction: ee.NONE
        }
    }
    ,
    keyTest: e=>e.key === U.QUESTION_MARK
})
  , Nde = e=>{
    if (e.length >= 2) {
        const t = e[0].groupIds;
        for (const n of t)
            if (e.reduce((r,i)=>r && rp(i, n), !0))
                return !0
    }
    return !1
}
  , NA = (e,t,n)=>{
    const r = n.scene.getSelectedElements({
        selectedElementIds: t.selectedElementIds,
        includeBoundTextElement: !0
    });
    return r.length >= 2 && !Nde(r)
}
  , Fde = we({
    name: "group",
    label: "labels.group",
    icon: e=>g(lT, {
        theme: e.theme
    }),
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0
        });
        if (i.length < 2)
            return {
                appState: t,
                elements: e,
                storeAction: ee.NONE
            };
        const o = Zc(t);
        if (o.length === 1) {
            const E = o[0]
              , b = new Set(xn(e, E).map(C=>C.id))
              , _ = new Set(i.map(C=>C.id));
            if (new Set([...Array.from(b), ...Array.from(_)]).size === b.size)
                return {
                    appState: t,
                    elements: e,
                    storeAction: ee.NONE
                }
        }
        let s = [...e];
        new Set(i.map(E=>E.frameId)).size > 1 && jse(i).forEach((b,_)=>{
            ey(b, r.scene.getNonDeletedElementsMap())
        }
        );
        const l = po()
          , c = De(i);
        s = s.map(E=>c.get(E.id) ? Ne(E, {
            groupIds: NJ(E.groupIds, l, t.editingGroupId)
        }) : E);
        const u = xn(s, l)
          , f = u[u.length - 1]
          , h = s.lastIndexOf(f)
          , m = s.slice(h + 1)
          , v = s.slice(0, h).filter(E=>!rp(E, l))
          , y = Ko([...v, ...u, ...m], De(u));
        return {
            appState: {
                ...t,
                ...hD(l, {
                    ...t,
                    selectedGroupIds: {}
                }, Nt(s))
            },
            elements: y,
            storeAction: ee.CAPTURE
        }
    }
    ,
    predicate: (e,t,n,r)=>NA(e, t, r),
    keyTest: e=>!e.shiftKey && e[U.CTRL_OR_CMD] && e.key === U.G,
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>g(lt, {
        hidden: !NA(e, t, r),
        type: "button",
        icon: g(lT, {
            theme: t.theme
        }),
        onClick: ()=>n(null),
        title: `${k("labels.group")} — ${ie("CtrlOrCmd+G")}`,
        "aria-label": k("labels.group"),
        visible: Mn(Nt(e), t)
    })
})
  , Bde = we({
    name: "ungroup",
    label: "labels.ungroup",
    icon: e=>g(cT, {
        theme: e.theme
    }),
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>{
        const i = Zc(t)
          , o = De(e);
        if (i.length === 0)
            return {
                appState: t,
                elements: e,
                storeAction: ee.NONE
            };
        let s = [...e];
        const a = [];
        s = s.map(h=>{
            Sn(h) && a.push(h.id);
            const m = FJ(h.groupIds, t.selectedGroupIds);
            return m.length === h.groupIds.length ? h : Ne(h, {
                groupIds: m
            })
        }
        );
        const l = Ii(t, Nt(s), t, null)
          , c = r.scene.getSelectedElements(t)
          , u = new Set(c.filter(h=>h.frameId).map(h=>h.frameId));
        return g4(e).filter(h=>u.has(h.id)).forEach(h=>{
            h && (s = tN(s, Em(s, h, t, o), h))
        }
        ),
        l.selectedElementIds = Object.entries(l.selectedElementIds).reduce((h,[m,v])=>(v && !a.includes(m) && (h[m] = !0),
        h), {}),
        {
            appState: {
                ...t,
                ...l
            },
            elements: s,
            storeAction: ee.CAPTURE
        }
    }
    ,
    keyTest: e=>e.shiftKey && e[U.CTRL_OR_CMD] && e.key === U.G.toUpperCase(),
    predicate: (e,t)=>Zc(t).length > 0,
    PanelComponent: ({elements: e, appState: t, updateData: n})=>g(lt, {
        type: "button",
        hidden: Zc(t).length === 0,
        icon: g(cT, {
            theme: t.theme
        }),
        onClick: ()=>n(null),
        title: `${k("labels.ungroup")} — ${ie("CtrlOrCmd+Shift+G")}`,
        "aria-label": k("labels.ungroup"),
        visible: Mn(Nt(e), t)
    })
})
  , UF = (e,t,n,r,i,o,s)=>{
    e.beginPath(),
    e.moveTo(t + o, n),
    e.lineTo(t + r - o, n),
    e.quadraticCurveTo(t + r, n, t + r, n + o),
    e.lineTo(t + r, n + i - o),
    e.quadraticCurveTo(t + r, n + i, t + r - o, n + i),
    e.lineTo(t + o, n + i),
    e.quadraticCurveTo(t, n + i, t, n + i - o),
    e.lineTo(t, n + o),
    e.quadraticCurveTo(t, n, t + o, n),
    e.closePath(),
    e.fill(),
    s && (e.strokeStyle = s),
    e.stroke()
}
;
var Uc = (e=>(e.ACTIVE = "active",
e.AWAY = "away",
e.IDLE = "idle",
e))(Uc || {});
function zde(e) {
    let t = 0;
    if (e.length === 0)
        return t;
    for (let n = 0; n < e.length; n++) {
        const r = e.charCodeAt(n);
        t = (t << 5) - t + r
    }
    return t
}
const by = (e,t)=>`hsl(${Math.abs(zde((t == null ? void 0 : t.id) || e)) % 37 * 10}, 100%, 83%)`
  , $de = e=>{
    var n;
    const t = (n = e == null ? void 0 : e.trim()) == null ? void 0 : n.codePointAt(0);
    return (t ? String.fromCodePoint(t) : "?").toUpperCase()
}
  , Ude = ({context: e, renderConfig: t, appState: n, normalizedWidth: r, normalizedHeight: i})=>{
    for (const [o,s] of t.remotePointerViewportCoords) {
        let {x: a, y: l} = s;
        const c = n.collaborators.get(o);
        a -= n.offsetLeft,
        l -= n.offsetTop;
        const u = 11
          , f = 14
          , h = a < 0 || a > r - u || l < 0 || l > i - f;
        a = Math.max(a, 0),
        a = Math.min(a, r - u),
        l = Math.max(l, 0),
        l = Math.min(l, i - f);
        const m = by(o, c);
        e.save(),
        e.strokeStyle = m,
        e.fillStyle = m;
        const v = t.remotePointerUserStates.get(o)
          , y = h || v === Uc.IDLE || v === Uc.AWAY;
        y && (e.globalAlpha = .3),
        t.remotePointerButton.get(o) === "down" && (e.beginPath(),
        e.arc(a, l, 15, 0, 2 * Math.PI, !1),
        e.lineWidth = 3,
        e.strokeStyle = "#ffffff88",
        e.stroke(),
        e.closePath(),
        e.beginPath(),
        e.arc(a, l, 15, 0, 2 * Math.PI, !1),
        e.lineWidth = 1,
        e.strokeStyle = m,
        e.stroke(),
        e.closePath());
        const E = n.theme === Oe.DARK ? "#2f6330" : wq
          , b = c == null ? void 0 : c.isSpeaking;
        b && (e.fillStyle = E,
        e.strokeStyle = E,
        e.lineWidth = 10,
        e.lineJoin = "round",
        e.beginPath(),
        e.moveTo(a, l),
        e.lineTo(a + 0, l + 14),
        e.lineTo(a + 4, l + 9),
        e.lineTo(a + 11, l + 8),
        e.closePath(),
        e.stroke(),
        e.fill()),
        e.fillStyle = f0,
        e.strokeStyle = f0,
        e.lineWidth = 6,
        e.lineJoin = "round",
        e.beginPath(),
        e.moveTo(a, l),
        e.lineTo(a + 0, l + 14),
        e.lineTo(a + 4, l + 9),
        e.lineTo(a + 11, l + 8),
        e.closePath(),
        e.stroke(),
        e.fill(),
        e.fillStyle = m,
        e.strokeStyle = m,
        e.lineWidth = 2,
        e.lineJoin = "round",
        e.beginPath(),
        y ? (e.moveTo(a - 1, l - 1),
        e.lineTo(a - 1, l + 15),
        e.lineTo(a + 5, l + 10),
        e.lineTo(a + 12, l + 9),
        e.closePath(),
        e.fill()) : (e.moveTo(a, l),
        e.lineTo(a + 0, l + 14),
        e.lineTo(a + 4, l + 9),
        e.lineTo(a + 11, l + 8),
        e.closePath(),
        e.fill(),
        e.stroke());
        const _ = t.remotePointerUsernames.get(o) || "";
        if (!h && _) {
            e.font = "600 12px sans-serif";
            const x = (b ? a + 0 : a) + u / 2
              , C = (b ? l + 0 : l) + f + 2
              , P = 5
              , M = 3
              , A = e.measureText(_)
              , I = A.actualBoundingBoxDescent + A.actualBoundingBoxAscent
              , O = Math.max(I, 12)
              , N = x - 1
              , $ = C - 1
              , V = A.width + 2 + P * 2 + 2
              , z = O + 2 + M * 2 + 2;
            if (e.roundRect ? (e.beginPath(),
            e.roundRect(N, $, V, z, 8),
            e.fillStyle = m,
            e.fill(),
            e.strokeStyle = f0,
            e.stroke(),
            b && (e.beginPath(),
            e.roundRect(N - 2, $ - 2, V + 4, z + 4, 8),
            e.strokeStyle = E,
            e.stroke())) : UF(e, N, $, V, z, 8, f0),
            e.fillStyle = yq,
            e.fillText(_, x + P + 1, C + M + A.actualBoundingBoxAscent + Math.floor((O - I) / 2) + 2),
            b) {
                e.fillStyle = E;
                const j = 8
                  , re = 8
                  , se = 5;
                e.fillRect(N + V + re, $ + (z / 2 - j / 2), 2, j),
                e.fillRect(N + V + re + se, $ + (z / 2 - j * 2 / 2), 2, j * 2),
                e.fillRect(N + V + re + se * 2, $ + (z / 2 - j / 2), 2, j)
            }
        }
        e.restore(),
        e.closePath()
    }
}
  , FA = ({color: e, onClick: t, name: n, src: r, className: i})=>{
    const o = $de(n)
      , [s,a] = T.useState(!1)
      , l = !s && r
      , c = l ? void 0 : {
        background: e
    };
    return g("div", {
        className: xe("Avatar", i),
        style: c,
        onClick: t,
        children: l ? g("img", {
            className: "Avatar-img",
            src: r,
            alt: o,
            referrerPolicy: "no-referrer",
            onError: ()=>a(!0)
        }) : o
    })
}
;
we({
    name: "goToCollaborator",
    label: "Go to a collaborator",
    viewMode: !0,
    trackEvent: {
        category: "collab"
    },
    perform: (e,t,n)=>{
        var r;
        return !n.socketId || ((r = t.userToFollow) == null ? void 0 : r.socketId) === n.socketId || n.isCurrentUser ? {
            appState: {
                ...t,
                userToFollow: null
            },
            storeAction: ee.NONE
        } : {
            appState: {
                ...t,
                userToFollow: {
                    socketId: n.socketId,
                    username: n.username || ""
                },
                openMenu: t.openMenu === "canvas" ? null : t.openMenu
            },
            storeAction: ee.NONE
        }
    }
    ,
    PanelComponent: ({updateData: e, data: t, appState: n})=>{
        const {socketId: r, collaborator: i, withName: o, isBeingFollowed: s} = t
          , a = by(r, i)
          , l = xe({
            "is-followed": s,
            "is-current-user": i.isCurrentUser === !0,
            "is-speaking": i.isSpeaking,
            "is-in-call": i.isInCall,
            "is-muted": i.isMuted
        })
          , c = i.isInCall ? i.isSpeaking ? L("div", {
            className: "UserList__collaborator-status-icon-speaking-indicator",
            title: k("userList.hint.isSpeaking"),
            children: [g("div", {}), g("div", {}), g("div", {})]
        }) : i.isMuted ? g("div", {
            className: "UserList__collaborator-status-icon-microphone-muted",
            title: k("userList.hint.micMuted"),
            children: _te
        }) : g("div", {
            title: k("userList.hint.inCall"),
            children: bte
        }) : null;
        return o ? L("div", {
            className: `dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${l}`,
            style: {
                "--avatar-size": "1.5rem"
            },
            onClick: ()=>e(i),
            children: [g(FA, {
                color: a,
                onClick: ()=>{}
                ,
                name: i.username || "",
                src: i.avatarUrl,
                className: l
            }), g("div", {
                className: "UserList__collaborator-name",
                children: i.username
            }), L("div", {
                className: "UserList__collaborator-status-icons",
                "aria-hidden": !0,
                children: [s && g("div", {
                    className: "UserList__collaborator-status-icon-is-followed",
                    title: k("userList.hint.followStatus"),
                    children: z6
                }), c]
            })]
        }) : L("div", {
            className: `UserList__collaborator UserList__collaborator--avatar-only ${l}`,
            children: [g(FA, {
                color: a,
                onClick: ()=>{
                    e(i)
                }
                ,
                name: i.username || "",
                src: i.avatarUrl,
                className: l
            }), c && g("div", {
                className: "UserList__collaborator-status-icon",
                children: c
            })]
        })
    }
});
const Hde = we({
    name: "addToLibrary",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0,
            includeElementsInFrames: !0
        });
        for (const o of XP)
            if (i.some(s=>s.type === o))
                return {
                    storeAction: ee.NONE,
                    appState: {
                        ...t,
                        errorMessage: k(`errors.libraryElementTypeError.${o}`)
                    }
                };
        return r.library.getLatestLibrary().then(o=>r.library.setLibrary([{
            id: po(),
            status: "unpublished",
            elements: i.map($f),
            created: Date.now()
        }, ...o])).then(()=>({
            storeAction: ee.NONE,
            appState: {
                ...t,
                toast: {
                    message: k("toast.addedToLibrary")
                }
            }
        })).catch(o=>({
            storeAction: ee.NONE,
            appState: {
                ...t,
                errorMessage: o.message
            }
        }))
    }
    ,
    label: "labels.addToLibrary"
})
  , Wde = (e,t,n)=>{
    const r = Dv(e, t)
      , i = pa(e);
    return r.flatMap(o=>{
        const s = Gde(o, i, n);
        return o.map(a=>Ne(a, {
            x: a.x + s.x,
            y: a.y + s.y
        }))
    }
    )
}
  , Gde = (e,t,{axis: n, position: r})=>{
    const i = pa(e)
      , [o,s] = n === "x" ? ["minX", "maxX"] : ["minY", "maxY"]
      , a = {
        x: 0,
        y: 0
    };
    return r === "start" ? {
        ...a,
        [n]: t[o] - i[o]
    } : r === "end" ? {
        ...a,
        [n]: t[s] - i[s]
    } : {
        ...a,
        [n]: (t[o] + t[s]) / 2 - (i[o] + i[s]) / 2
    }
}
  , wo = (e,t,n,r)=>{
    const i = r.scene.getSelectedElements(t);
    return i.length > 1 && !i.some(o=>Ue(o))
}
  , Yf = (e,t,n,r)=>{
    const i = n.scene.getSelectedElements(t)
      , o = De(e)
      , s = Wde(i, o, r)
      , a = De(s);
    return wf(e.map(l=>a.get(l.id) || l), t, n)
}
;
we({
    name: "alignTop",
    label: "labels.alignTop",
    icon: nT,
    trackEvent: {
        category: "element"
    },
    predicate: wo,
    perform: (e,t,n,r)=>({
        appState: t,
        elements: Yf(e, t, r, {
            position: "start",
            axis: "y"
        }),
        storeAction: ee.CAPTURE
    }),
    keyTest: e=>e[U.CTRL_OR_CMD] && e.shiftKey && e.key === U.ARROW_UP,
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>g(lt, {
        hidden: !wo(e, t, null, r),
        type: "button",
        icon: nT,
        onClick: ()=>n(null),
        title: `${k("labels.alignTop")} — ${ie("CtrlOrCmd+Shift+Up")}`,
        "aria-label": k("labels.alignTop"),
        visible: Mn(Nt(e), t)
    })
});
we({
    name: "alignBottom",
    label: "labels.alignBottom",
    icon: rT,
    trackEvent: {
        category: "element"
    },
    predicate: wo,
    perform: (e,t,n,r)=>({
        appState: t,
        elements: Yf(e, t, r, {
            position: "end",
            axis: "y"
        }),
        storeAction: ee.CAPTURE
    }),
    keyTest: e=>e[U.CTRL_OR_CMD] && e.shiftKey && e.key === U.ARROW_DOWN,
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>g(lt, {
        hidden: !wo(e, t, null, r),
        type: "button",
        icon: rT,
        onClick: ()=>n(null),
        title: `${k("labels.alignBottom")} — ${ie("CtrlOrCmd+Shift+Down")}`,
        "aria-label": k("labels.alignBottom"),
        visible: Mn(Nt(e), t)
    })
});
we({
    name: "alignLeft",
    label: "labels.alignLeft",
    icon: iT,
    trackEvent: {
        category: "element"
    },
    predicate: wo,
    perform: (e,t,n,r)=>({
        appState: t,
        elements: Yf(e, t, r, {
            position: "start",
            axis: "x"
        }),
        storeAction: ee.CAPTURE
    }),
    keyTest: e=>e[U.CTRL_OR_CMD] && e.shiftKey && e.key === U.ARROW_LEFT,
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>g(lt, {
        hidden: !wo(e, t, null, r),
        type: "button",
        icon: iT,
        onClick: ()=>n(null),
        title: `${k("labels.alignLeft")} — ${ie("CtrlOrCmd+Shift+Left")}`,
        "aria-label": k("labels.alignLeft"),
        visible: Mn(Nt(e), t)
    })
});
we({
    name: "alignRight",
    label: "labels.alignRight",
    icon: oT,
    trackEvent: {
        category: "element"
    },
    predicate: wo,
    perform: (e,t,n,r)=>({
        appState: t,
        elements: Yf(e, t, r, {
            position: "end",
            axis: "x"
        }),
        storeAction: ee.CAPTURE
    }),
    keyTest: e=>e[U.CTRL_OR_CMD] && e.shiftKey && e.key === U.ARROW_RIGHT,
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>g(lt, {
        hidden: !wo(e, t, null, r),
        type: "button",
        icon: oT,
        onClick: ()=>n(null),
        title: `${k("labels.alignRight")} — ${ie("CtrlOrCmd+Shift+Right")}`,
        "aria-label": k("labels.alignRight"),
        visible: Mn(Nt(e), t)
    })
});
we({
    name: "alignVerticallyCentered",
    label: "labels.centerVertically",
    icon: sT,
    trackEvent: {
        category: "element"
    },
    predicate: wo,
    perform: (e,t,n,r)=>({
        appState: t,
        elements: Yf(e, t, r, {
            position: "center",
            axis: "y"
        }),
        storeAction: ee.CAPTURE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>g(lt, {
        hidden: !wo(e, t, null, r),
        type: "button",
        icon: sT,
        onClick: ()=>n(null),
        title: k("labels.centerVertically"),
        "aria-label": k("labels.centerVertically"),
        visible: Mn(Nt(e), t)
    })
});
we({
    name: "alignHorizontallyCentered",
    label: "labels.centerHorizontally",
    icon: aT,
    trackEvent: {
        category: "element"
    },
    predicate: wo,
    perform: (e,t,n,r)=>({
        appState: t,
        elements: Yf(e, t, r, {
            position: "center",
            axis: "x"
        }),
        storeAction: ee.CAPTURE
    }),
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>g(lt, {
        hidden: !wo(e, t, null, r),
        type: "button",
        icon: aT,
        onClick: ()=>n(null),
        title: k("labels.centerHorizontally"),
        "aria-label": k("labels.centerHorizontally"),
        visible: Mn(Nt(e), t)
    })
});
const Vde = (e,t,n)=>{
    const [r,i,o,s] = n.axis === "x" ? ["minX", "midX", "maxX", "width"] : ["minY", "midY", "maxY", "height"]
      , a = pa(e)
      , l = Dv(e, t).map(h=>[h, pa(h)]).sort((h,m)=>h[1][i] - m[1][i]);
    let c = 0;
    for (const h of l)
        c += h[1][s];
    const u = (a[s] - c) / (l.length - 1);
    if (u < 0) {
        const h = l.findIndex(E=>E[1][r] === a[r])
          , m = l.findIndex(E=>E[1][o] === a[o])
          , v = (l[m][1][i] - l[h][1][i]) / (l.length - 1);
        let y = l[h][1][i];
        return l.flatMap(([E,b],_)=>{
            const x = {
                x: 0,
                y: 0
            };
            return _ !== h && _ !== m && (y += v,
            x[n.axis] = y - b[i]),
            E.map(C=>Ne(C, {
                x: C.x + x.x,
                y: C.y + x.y
            }))
        }
        )
    }
    let f = a[r];
    return l.flatMap(([h,m])=>{
        const v = {
            x: 0,
            y: 0
        };
        return v[n.axis] = f - m[r],
        f += u,
        f += m[s],
        h.map(y=>Ne(y, {
            x: y.x + v.x,
            y: y.y + v.y
        }))
    }
    )
}
  , HF = (e,t)=>{
    const n = t.scene.getSelectedElements(e);
    return n.length > 1 && !n.some(r=>Ue(r))
}
  , WF = (e,t,n,r)=>{
    const i = n.scene.getSelectedElements(t)
      , o = Vde(i, n.scene.getNonDeletedElementsMap(), r)
      , s = De(o);
    return wf(e.map(a=>s.get(a.id) || a), t, n)
}
;
we({
    name: "distributeHorizontally",
    label: "labels.distributeHorizontally",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>({
        appState: t,
        elements: WF(e, t, r, {
            space: "between",
            axis: "x"
        }),
        storeAction: ee.CAPTURE
    }),
    keyTest: e=>!e[U.CTRL_OR_CMD] && e.altKey && e.code === pt.H,
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>g(lt, {
        hidden: !HF(t, r),
        type: "button",
        icon: kee,
        onClick: ()=>n(null),
        title: `${k("labels.distributeHorizontally")} — ${ie("Alt+H")}`,
        "aria-label": k("labels.distributeHorizontally"),
        visible: Mn(Nt(e), t)
    })
});
we({
    name: "distributeVertically",
    label: "labels.distributeVertically",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>({
        appState: t,
        elements: WF(e, t, r, {
            space: "between",
            axis: "y"
        }),
        storeAction: ee.CAPTURE
    }),
    keyTest: e=>!e[U.CTRL_OR_CMD] && e.altKey && e.code === pt.V,
    PanelComponent: ({elements: e, appState: t, updateData: n, app: r})=>g(lt, {
        hidden: !HF(t, r),
        type: "button",
        icon: Tee,
        onClick: ()=>n(null),
        title: `${k("labels.distributeVertically")} — ${ie("Alt+V")}`,
        "aria-label": k("labels.distributeVertically"),
        visible: Mn(Nt(e), t)
    })
});
const Yde = we({
    name: "flipHorizontal",
    label: "labels.flipHorizontal",
    icon: Cte,
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>({
        elements: wf(GF(e, r.scene.getNonDeletedElementsMap(), t, "horizontal", r), t, r),
        appState: t,
        storeAction: ee.CAPTURE
    }),
    keyTest: e=>e.shiftKey && e.code === pt.H
})
  , jde = we({
    name: "flipVertical",
    label: "labels.flipVertical",
    icon: Ite,
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>({
        elements: wf(GF(e, r.scene.getNonDeletedElementsMap(), t, "vertical", r), t, r),
        appState: t,
        storeAction: ee.CAPTURE
    }),
    keyTest: e=>e.shiftKey && e.code === pt.V && !e[U.CTRL_OR_CMD]
})
  , GF = (e,t,n,r,i)=>{
    const o = dt(Nt(e), n, {
        includeBoundTextElement: !0,
        includeElementsInFrames: !0
    })
      , s = Kde(o, t, n, r, i)
      , a = De(s);
    return e.map(l=>a.get(l.id) || l)
}
  , Kde = (e,t,n,r,i)=>{
    const {minX: o, minY: s, maxX: a, maxY: l} = pa(e);
    return LN(t, e, t, "nw", !0, !0, r === "horizontal" ? a : o, r === "horizontal" ? s : l),
    g2(e.filter(je), t, i.scene.getNonDeletedElements(), i.scene, zc(n), []),
    e
}
  , Cm = we({
    name: "copy",
    label: "labels.copy",
    icon: e_,
    trackEvent: {
        category: "element"
    },
    perform: async(e,t,n,r)=>{
        const i = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0,
            includeElementsInFrames: !0
        });
        try {
            await Ose(i, r.files, n)
        } catch (o) {
            return {
                storeAction: ee.NONE,
                appState: {
                    ...t,
                    errorMessage: o.message
                }
            }
        }
        return {
            storeAction: ee.NONE
        }
    }
    ,
    keyTest: void 0
})
  , BA = we({
    name: "paste",
    label: "labels.paste",
    trackEvent: {
        category: "element"
    },
    perform: async(e,t,n,r)=>{
        let i;
        try {
            i = await Bse()
        } catch (o) {
            return o.name === "AbortError" || o.name === "NotAllowedError" ? !1 : (console.error(`actionPaste ${o.name}: ${o.message}`),
            qg ? {
                storeAction: ee.NONE,
                appState: {
                    ...t,
                    errorMessage: k("hints.firefox_clipboard_write")
                }
            } : {
                storeAction: ee.NONE,
                appState: {
                    ...t,
                    errorMessage: k("errors.asyncPasteFailedOnRead")
                }
            })
        }
        try {
            r.pasteFromClipboard(Rse({
                types: i
            }))
        } catch (o) {
            return console.error(o),
            {
                storeAction: ee.NONE,
                appState: {
                    ...t,
                    errorMessage: k("errors.asyncPasteFailedOnParse")
                }
            }
        }
        return {
            storeAction: ee.NONE
        }
    }
    ,
    keyTest: void 0
})
  , zA = we({
    name: "cut",
    label: "labels.cut",
    icon: cte,
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>(Cm.perform(e, t, n, r),
    BN.perform(e, t, null, r)),
    keyTest: e=>e[U.CTRL_OR_CMD] && e.key === U.X
})
  , $A = we({
    name: "copyAsSvg",
    label: "labels.copyAsSvg",
    icon: kte,
    trackEvent: {
        category: "element"
    },
    perform: async(e,t,n,r)=>{
        if (!r.canvas)
            return {
                storeAction: ee.NONE
            };
        const {exportedElements: i, exportingFrame: o} = yy(e, t, !0);
        try {
            return await wy("clipboard-svg", i, t, r.files, {
                ...t,
                exportingFrame: o,
                name: r.getName()
            }),
            {
                storeAction: ee.NONE
            }
        } catch (s) {
            return console.error(s),
            {
                appState: {
                    ...t,
                    errorMessage: s.message
                },
                storeAction: ee.NONE
            }
        }
    }
    ,
    predicate: e=>d4 && e.length > 0,
    keywords: ["svg", "clipboard", "copy"]
})
  , UA = we({
    name: "copyAsPng",
    label: "labels.copyAsPng",
    icon: Tte,
    trackEvent: {
        category: "element"
    },
    perform: async(e,t,n,r)=>{
        if (!r.canvas)
            return {
                storeAction: ee.NONE
            };
        const i = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0,
            includeElementsInFrames: !0
        })
          , {exportedElements: o, exportingFrame: s} = yy(e, t, !0);
        try {
            return await wy("clipboard", o, t, r.files, {
                ...t,
                exportingFrame: s,
                name: r.getName()
            }),
            {
                appState: {
                    ...t,
                    toast: {
                        message: k("toast.copyToClipboardAsPng", {
                            exportSelection: i.length ? k("toast.selection") : k("toast.canvas"),
                            exportColorScheme: t.exportWithDarkMode ? k("buttons.darkMode") : k("buttons.lightMode")
                        })
                    }
                },
                storeAction: ee.NONE
            }
        } catch (a) {
            return console.error(a),
            {
                appState: {
                    ...t,
                    errorMessage: a.message
                },
                storeAction: ee.NONE
            }
        }
    }
    ,
    predicate: e=>f4 && e.length > 0,
    keyTest: e=>e.code === pt.C && e.altKey && e.shiftKey,
    keywords: ["png", "clipboard", "copy"]
})
  , HA = we({
    name: "copyText",
    label: "labels.copyText",
    trackEvent: {
        category: "element"
    },
    perform: (e,t,n,r)=>{
        const o = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0
        }).reduce((s,a)=>(ye(a) && s.push(a.text),
        s), []).join(`

`);
        try {
            Pu(o)
        } catch {
            throw new Error(k("errors.copyToSystemClipboardFailed"))
        }
        return {
            storeAction: ee.NONE
        }
    }
    ,
    predicate: (e,t,n,r)=>d4 && r.scene.getSelectedElements({
        selectedElementIds: t.selectedElementIds,
        includeBoundTextElement: !0
    }).some(ye),
    keywords: ["text", "clipboard", "copy"]
})
  , WA = we({
    name: "gridMode",
    icon: Pte,
    keywords: ["snap"],
    label: "labels.toggleGrid",
    viewMode: !0,
    trackEvent: {
        category: "canvas",
        predicate: e=>e.gridModeEnabled
    },
    perform(e, t) {
        return {
            appState: {
                ...t,
                gridModeEnabled: !this.checked(t),
                objectsSnapModeEnabled: !1
            },
            storeAction: ee.NONE
        }
    },
    checked: e=>e.gridModeEnabled,
    predicate: (e,t,n)=>n.gridModeEnabled === void 0,
    keyTest: e=>e[U.CTRL_OR_CMD] && e.code === pt.QUOTE
})
  , V_ = we({
    name: "zenMode",
    label: "buttons.zenMode",
    icon: Mte,
    paletteName: "Toggle zen mode",
    viewMode: !0,
    trackEvent: {
        category: "canvas",
        predicate: e=>!e.zenModeEnabled
    },
    perform(e, t) {
        return {
            appState: {
                ...t,
                zenModeEnabled: !this.checked(t)
            },
            storeAction: ee.NONE
        }
    },
    checked: e=>e.zenModeEnabled,
    predicate: (e,t,n)=>typeof n.zenModeEnabled > "u",
    keyTest: e=>!e[U.CTRL_OR_CMD] && e.altKey && e.code === pt.Z
})
  , Xde = we({
    name: "objectsSnapMode",
    label: "buttons.objectsSnapMode",
    icon: Ate,
    viewMode: !1,
    trackEvent: {
        category: "canvas",
        predicate: e=>!e.objectsSnapModeEnabled
    },
    perform(e, t) {
        return {
            appState: {
                ...t,
                objectsSnapModeEnabled: !this.checked(t),
                gridModeEnabled: !1
            },
            storeAction: ee.NONE
        }
    },
    checked: e=>e.objectsSnapModeEnabled,
    predicate: (e,t,n)=>typeof n.objectsSnapModeEnabled > "u",
    keyTest: e=>!e[U.CTRL_OR_CMD] && e.altKey && e.code === pt.S
})
  , Y_ = we({
    name: "stats",
    label: "stats.fullTitle",
    icon: Ste,
    paletteName: "Toggle stats",
    viewMode: !0,
    trackEvent: {
        category: "menu"
    },
    keywords: ["edit", "attributes", "customize"],
    perform(e, t) {
        return {
            appState: {
                ...t,
                stats: {
                    ...t.stats,
                    open: !this.checked(t)
                }
            },
            storeAction: ee.NONE
        }
    },
    checked: e=>e.stats.open,
    keyTest: e=>!e[U.CTRL_OR_CMD] && e.altKey && e.code === pt.SLASH
})
  , Zde = we({
    name: "unbindText",
    label: "labels.unbindText",
    trackEvent: {
        category: "element"
    },
    predicate: (e,t,n,r)=>r.scene.getSelectedElements(t).some(o=>go(o)),
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t)
          , o = r.scene.getNonDeletedElementsMap();
        return i.forEach(s=>{
            var l;
            const a = Ge(s, o);
            if (a) {
                const {width: c, height: u} = Oi(a.originalText, Ht(a), a.lineHeight)
                  , f = Wae(s.id);
                wN(s.id);
                const {x: h, y: m} = oy(s, a, o);
                ue(a, {
                    containerId: null,
                    width: c,
                    height: u,
                    text: a.originalText,
                    x: h,
                    y: m
                }),
                ue(s, {
                    boundElements: (l = s.boundElements) == null ? void 0 : l.filter(v=>v.id !== a.id),
                    height: f || s.height
                })
            }
        }
        ),
        {
            elements: e,
            appState: t,
            storeAction: ee.CAPTURE
        }
    }
})
  , qde = we({
    name: "bindText",
    label: "labels.bindText",
    trackEvent: {
        category: "element"
    },
    predicate: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t);
        if (i.length === 2) {
            const o = ye(i[0]) || ye(i[1]);
            let s;
            if (Xc(i[0]) ? s = i[0] : Xc(i[1]) && (s = i[1]),
            o && s && Ge(s, r.scene.getNonDeletedElementsMap()) === null)
                return !0
        }
        return !1
    }
    ,
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t);
        let o, s;
        ye(i[0]) && Xc(i[1]) ? (o = i[0],
        s = i[1]) : (o = i[1],
        s = i[0]),
        ue(o, {
            containerId: s.id,
            verticalAlign: Ai.MIDDLE,
            textAlign: Jg.CENTER,
            autoResize: !0
        }),
        ue(s, {
            boundElements: (s.boundElements || []).concat({
                type: "text",
                id: o.id
            })
        });
        const a = s.height;
        return Wr(o, s, r.scene.getNonDeletedElementsMap()),
        O2(s.id, a),
        {
            elements: Qde(e, s, o),
            appState: {
                ...t,
                selectedElementIds: {
                    [s.id]: !0
                }
            },
            storeAction: ee.CAPTURE
        }
    }
})
  , Qde = (e,t,n)=>{
    const r = e.slice()
      , i = r.findIndex(s=>s.id === n.id);
    r.splice(i, 1);
    const o = r.findIndex(s=>s.id === t.id);
    return r.splice(o + 1, 0, n),
    Ko(r, De([t, n])),
    r
}
  , Jde = (e,t,n)=>{
    const r = e.slice()
      , i = r.findIndex(s=>s.id === t.id);
    r.splice(i, 1);
    const o = r.findIndex(s=>s.id === n.id);
    return r.splice(o, 0, t),
    Ko(r, De([t, n])),
    r
}
  , efe = we({
    name: "wrapTextInContainer",
    label: "labels.createContainerFromText",
    trackEvent: {
        category: "element"
    },
    predicate: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t)
          , o = i.every(s=>ye(s));
        return i.length > 0 && o
    }
    ,
    perform: (e,t,n,r)=>{
        var a;
        const i = r.scene.getSelectedElements(t);
        let o = e.slice();
        const s = {};
        for (const l of i)
            if (ye(l)) {
                const c = Sa({
                    type: "rectangle",
                    backgroundColor: t.currentItemBackgroundColor,
                    boundElements: [...l.boundElements || [], {
                        id: l.id,
                        type: "text"
                    }],
                    angle: l.angle,
                    fillStyle: t.currentItemFillStyle,
                    strokeColor: t.currentItemStrokeColor,
                    roughness: t.currentItemRoughness,
                    strokeWidth: t.currentItemStrokeWidth,
                    strokeStyle: t.currentItemStrokeStyle,
                    roundness: t.currentItemRoundness === "round" ? {
                        type: Rf("rectangle") ? An.ADAPTIVE_RADIUS : An.PROPORTIONAL_RADIUS
                    } : null,
                    opacity: 100,
                    locked: !1,
                    x: l.x - Tn,
                    y: l.y - Tn,
                    width: Eu(l.width, "rectangle"),
                    height: Eu(l.height, "rectangle"),
                    groupIds: l.groupIds,
                    frameId: l.frameId
                });
                if ((a = l.boundElements) != null && a.length) {
                    const u = l.boundElements.filter(h=>h.type === "arrow").map(h=>h.id);
                    o.filter(h=>u.includes(h.id)).forEach(h=>{
                        let m = h.startBinding
                          , v = h.endBinding;
                        (m == null ? void 0 : m.elementId) === l.id && (m = {
                            ...m,
                            elementId: c.id
                        }),
                        (v == null ? void 0 : v.elementId) === l.id && (v = {
                            ...v,
                            elementId: c.id
                        }),
                        (m || v) && ue(h, {
                            startBinding: m,
                            endBinding: v
                        }, !1)
                    }
                    )
                }
                ue(l, {
                    containerId: c.id,
                    verticalAlign: Ai.MIDDLE,
                    boundElements: null,
                    textAlign: Jg.CENTER,
                    autoResize: !0
                }, !1),
                Wr(l, c, r.scene.getNonDeletedElementsMap()),
                o = Jde([...o, c], c, l),
                s[c.id] = !0
            }
        return {
            elements: o,
            appState: {
                ...t,
                selectedElementIds: s
            },
            storeAction: ee.CAPTURE
        }
    }
})
  , G4 = 320
  , VF = 85
  , j_ = 5
  , tfe = 42
  , nfe = 500;
let K_ = !1;
const N0 = new Map
  , rfe = ({element: e, elementsMap: t, setAppState: n, onLinkOpen: r, setToast: i, updateEmbedValidationStatus: o})=>{
    const s = o1()
      , a = i1()
      , l = e.link || ""
      , [c,u] = T.useState(l)
      , f = T.useRef(null)
      , h = s.showHyperlinkPopup === "editor"
      , m = T.useCallback(()=>{
        var x;
        if (!f.current)
            return;
        const _ = Is(f.current.value) || null;
        if (!e.link && _ && at("hyperlink", "create"),
        Br(e)) {
            if (((x = s.activeEmbeddable) == null ? void 0 : x.element) === e && n({
                activeEmbeddable: null
            }),
            !_) {
                ue(e, {
                    link: null
                }),
                o(e, !1);
                return
            }
            if (!ym(_, a.validateEmbeddable))
                _ && i({
                    message: k("toast.unableToEmbed"),
                    closable: !0
                }),
                e.link && N0.set(e.id, e.link),
                ue(e, {
                    link: _
                }),
                o(e, !1);
            else {
                const {width: C, height: P} = e
                  , M = Nd(_);
                (M == null ? void 0 : M.error)instanceof URIError && i({
                    message: k("toast.unrecognizedLinkFormat"),
                    closable: !0
                });
                const A = M ? M.intrinsicSize.w / M.intrinsicSize.h : 1
                  , I = N0.get(e.id) !== e.link;
                ue(e, {
                    ...I ? {
                        width: (M == null ? void 0 : M.type) === "video" ? C > P ? C : P * A : C,
                        height: (M == null ? void 0 : M.type) === "video" && C > P ? C / A : P
                    } : {},
                    link: _
                }),
                o(e, !0),
                N0.has(e.id) && N0.delete(e.id)
            }
        } else
            ue(e, {
                link: _
            })
    }
    , [e, i, a.validateEmbeddable, s.activeEmbeddable, n, o]);
    T.useLayoutEffect(()=>()=>{
        m()
    }
    , [m]),
    T.useEffect(()=>{
        let _ = null;
        const x = C=>{
            if (h)
                return;
            _ && clearTimeout(_),
            afe(e, t, s, [C.clientX, C.clientY]) && (_ = window.setTimeout(()=>{
                n({
                    showHyperlinkPopup: !1
                })
            }
            , nfe))
        }
        ;
        return window.addEventListener(ce.POINTER_MOVE, x, !1),
        ()=>{
            window.removeEventListener(ce.POINTER_MOVE, x, !1),
            _ && clearTimeout(_)
        }
    }
    , [s, e, h, n, t]);
    const v = T.useCallback(()=>{
        at("hyperlink", "delete"),
        ue(e, {
            link: null
        }),
        h && (f.current.value = ""),
        n({
            showHyperlinkPopup: !1
        })
    }
    , [n, e, h])
      , y = ()=>{
        at("hyperlink", "edit", "popup-ui"),
        n({
            showHyperlinkPopup: "editor"
        })
    }
      , {x: E, y: b} = YF(e, s, t);
    return s.contextMenu || s.selectedElementsAreBeingDragged || s.resizingElement || s.isRotating || s.openMenu || s.viewModeEnabled ? null : L("div", {
        className: "excalidraw-hyperlinkContainer",
        style: {
            top: `${b}px`,
            left: `${E}px`,
            width: G4,
            padding: j_
        },
        onClick: ()=>{
            !e.link && !h && n({
                showHyperlinkPopup: "editor"
            })
        }
        ,
        children: [h ? g("input", {
            className: xe("excalidraw-hyperlinkContainer-input"),
            placeholder: "Type or paste your link here",
            ref: f,
            value: c,
            onChange: _=>u(_.target.value),
            autoFocus: !0,
            onKeyDown: _=>{
                _.stopPropagation(),
                _[U.CTRL_OR_CMD] && _.key === U.K && _.preventDefault(),
                (_.key === U.ENTER || _.key === U.ESCAPE) && (m(),
                n({
                    showHyperlinkPopup: "info"
                }))
            }
        }) : e.link ? g("a", {
            href: Is(e.link || ""),
            className: "excalidraw-hyperlinkContainer-link",
            target: yD(e.link) ? "_self" : "_blank",
            onClick: _=>{
                if (e.link && r) {
                    const x = rD(ce.EXCALIDRAW_LINK, _.nativeEvent);
                    r({
                        ...e,
                        link: Is(e.link)
                    }, x),
                    x.defaultPrevented && _.preventDefault()
                }
            }
            ,
            rel: "noopener noreferrer",
            children: e.link
        }) : g("div", {
            className: "excalidraw-hyperlinkContainer-link",
            children: k("labels.link.empty")
        }), L("div", {
            className: "excalidraw-hyperlinkContainer__buttons",
            children: [!h && g(lt, {
                type: "button",
                title: k("buttons.edit"),
                "aria-label": k("buttons.edit"),
                label: k("buttons.edit"),
                onClick: y,
                className: "excalidraw-hyperlinkContainer--edit",
                icon: ip
            }), l && !Br(e) && g(lt, {
                type: "button",
                title: k("buttons.remove"),
                "aria-label": k("buttons.remove"),
                label: k("buttons.remove"),
                onClick: v,
                className: "excalidraw-hyperlinkContainer--remove",
                icon: hf
            })]
        })]
    })
}
  , YF = (e,t,n)=>{
    const [r,i] = Ke(e, n)
      , {x: o, y: s} = Bo({
        sceneX: r + e.width / 2,
        sceneY: i
    }, t)
      , a = o - t.offsetLeft - G4 / 2
      , l = s - t.offsetTop - VF;
    return {
        x: a,
        y: l
    }
}
  , GA = (e,t)=>{
    var i;
    const n = dt(e, t);
    return (i = n[0]) != null && i.link ? Br(n[0]) ? "labels.link.editEmbed" : "labels.link.edit" : Br(n[0]) ? "labels.link.createEmbed" : "labels.link.create"
}
;
let kg = null;
const ife = (e,t,n)=>{
    kg && clearTimeout(kg),
    kg = window.setTimeout(()=>ofe(e, t, n), kq)
}
  , ofe = (e,t,n)=>{
    if (!e.link)
        return;
    const r = Ig();
    r.classList.add("excalidraw-tooltip--visible"),
    r.style.maxWidth = "20rem",
    r.textContent = e.link;
    const [i,o,s,a] = Ke(e, n)
      , [l,c,u,f] = a4([i, o, s, a], e.angle, t)
      , h = Bo({
        sceneX: l,
        sceneY: c
    }, t);
    NF(r, {
        left: h.x,
        top: h.y,
        width: u,
        height: f
    }, "top"),
    at("hyperlink", "tooltip", "link-icon"),
    K_ = !0
}
  , sfe = ()=>{
    kg && clearTimeout(kg),
    K_ && (K_ = !1,
    Ig().classList.remove("excalidraw-tooltip--visible"))
}
  , afe = (e,t,n,[r,i])=>{
    const {x: o, y: s} = zt({
        clientX: r,
        clientY: i
    }, n)
      , a = 15 / n.zoom.value;
    if (Z6(o, s, e, t))
        return !1;
    const [l,c,u] = Ke(e, t);
    if (o >= l && o <= u && s >= c - VF && s <= c)
        return !1;
    const {x: f, y: h} = YF(e, n, t);
    return !(r >= f - a && r <= f + G4 + j_ * 2 + a && i >= h - a && i <= h + a + j_ * 2 + tfe)
}
  , jF = we({
    name: "hyperlink",
    label: (e,t)=>GA(e, t),
    icon: l2,
    perform: (e,t)=>t.showHyperlinkPopup === "editor" ? !1 : {
        elements: e,
        appState: {
            ...t,
            showHyperlinkPopup: "editor",
            openMenu: null
        },
        storeAction: ee.CAPTURE
    },
    trackEvent: {
        category: "hyperlink",
        action: "click"
    },
    keyTest: e=>e[U.CTRL_OR_CMD] && e.key === U.K,
    predicate: (e,t)=>dt(e, t).length === 1,
    PanelComponent: ({elements: e, appState: t, updateData: n})=>{
        const r = dt(e, t);
        return g(lt, {
            type: "button",
            icon: l2,
            "aria-label": k(GA(e, t)),
            title: `${Br(e[0]) ? k("labels.link.labelEmbed") : k("labels.link.label")} - ${ie("CtrlOrCmd+K")}`,
            onClick: ()=>n(null),
            selected: r.length === 1 && !!r[0].link
        })
    }
})
  , yb = e=>e.every(t=>!t.locked)
  , lfe = we({
    name: "toggleElementLock",
    label: (e,t,n)=>{
        const r = n.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !1
        });
        return r.length === 1 && !Ue(r[0]) ? r[0].locked ? "labels.elementLock.unlock" : "labels.elementLock.lock" : yb(r) ? "labels.elementLock.lockAll" : "labels.elementLock.unlockAll"
    }
    ,
    icon: (e,t)=>{
        const n = dt(t, e);
        return yb(n) ? P6 : Ov
    }
    ,
    trackEvent: {
        category: "element"
    },
    predicate: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t);
        return i.length > 0 && !i.some(o=>o.locked && o.frameId)
    }
    ,
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0,
            includeElementsInFrames: !0
        });
        if (!i.length)
            return !1;
        const o = yb(i)
          , s = De(i);
        return {
            elements: e.map(a=>s.has(a.id) ? Ne(a, {
                locked: o
            }) : a),
            appState: {
                ...t,
                selectedLinearElement: o ? null : t.selectedLinearElement
            },
            storeAction: ee.CAPTURE
        }
    }
    ,
    keyTest: (e,t,n,r)=>e.key.toLocaleLowerCase() === U.L && e[U.CTRL_OR_CMD] && e.shiftKey && r.scene.getSelectedElements({
        selectedElementIds: t.selectedElementIds,
        includeBoundTextElement: !1
    }).length > 0
})
  , cfe = we({
    name: "unlockAllElements",
    paletteName: "Unlock all elements",
    trackEvent: {
        category: "canvas"
    },
    viewMode: !1,
    icon: Ov,
    predicate: (e,t)=>dt(e, t).length === 0 && e.some(r=>r.locked),
    perform: (e,t)=>{
        const n = e.filter(r=>r.locked);
        return {
            elements: e.map(r=>r.locked ? Ne(r, {
                locked: !1
            }) : r),
            appState: {
                ...t,
                selectedElementIds: Object.fromEntries(n.map(r=>[r.id, !0]))
            },
            storeAction: ee.CAPTURE
        }
    }
    ,
    label: "labels.elementLock.unlockAll"
})
  , Ep = ({type: e="button", onSelect: t, selected: n, children: r, className: i="", ...o})=>g("button", {
    onClick: Lv(o.onClick, s=>{
        t()
    }
    ),
    type: e,
    className: xe("excalidraw-button", i, {
        selected: n
    }),
    ...o,
    children: r
})
  , bp = T.forwardRef(({onChange: e, label: t, fullWidth: n, placeholder: r, readonly: i, selectOnRender: o, onKeyDown: s, isRedacted: a=!1, ...l},c)=>{
    const u = T.useRef(null);
    T.useImperativeHandle(c, ()=>u.current),
    T.useLayoutEffect(()=>{
        var m;
        o && ((m = u.current) == null || m.select())
    }
    , [o]);
    const [f,h] = T.useState(!1);
    return L("div", {
        className: xe("ExcTextField", {
            "ExcTextField--fullWidth": n
        }),
        onClick: ()=>{
            var m;
            (m = u.current) == null || m.focus()
        }
        ,
        children: [g("div", {
            className: "ExcTextField__label",
            children: t
        }), L("div", {
            className: xe("ExcTextField__input", {
                "ExcTextField__input--readonly": i
            }),
            children: [g("input", {
                className: xe({
                    "is-redacted": "value"in l && l.value && a && !f
                }),
                readOnly: i,
                value: "value"in l ? l.value : void 0,
                defaultValue: "defaultValue"in l ? l.defaultValue : void 0,
                placeholder: r,
                ref: u,
                onChange: m=>e == null ? void 0 : e(m.target.value),
                onKeyDown: s
            }), a && g(Ep, {
                onSelect: ()=>h(!f),
                style: {
                    border: 0,
                    userSelect: "none"
                },
                children: f ? vte : z6
            })]
        })]
    })
}
)
  , ufe = {
    toggleTheme: [ie("Shift+Alt+D")],
    saveScene: [ie("CtrlOrCmd+S")],
    loadScene: [ie("CtrlOrCmd+O")],
    clearCanvas: [ie("CtrlOrCmd+Delete")],
    imageExport: [ie("CtrlOrCmd+Shift+E")],
    commandPalette: [ie("CtrlOrCmd+/"), ie("CtrlOrCmd+Shift+P")],
    cut: [ie("CtrlOrCmd+X")],
    copy: [ie("CtrlOrCmd+C")],
    paste: [ie("CtrlOrCmd+V")],
    copyStyles: [ie("CtrlOrCmd+Alt+C")],
    pasteStyles: [ie("CtrlOrCmd+Alt+V")],
    selectAll: [ie("CtrlOrCmd+A")],
    deleteSelectedElements: [ie("Delete")],
    duplicateSelection: [ie("CtrlOrCmd+D"), ie(`Alt+${k("helpDialog.drag")}`)],
    sendBackward: [ie("CtrlOrCmd+[")],
    bringForward: [ie("CtrlOrCmd+]")],
    sendToBack: [ie(Ts ? "CtrlOrCmd+Alt+[" : "CtrlOrCmd+Shift+[")],
    bringToFront: [ie(Ts ? "CtrlOrCmd+Alt+]" : "CtrlOrCmd+Shift+]")],
    copyAsPng: [ie("Shift+Alt+C")],
    copyAsSvg: [],
    group: [ie("CtrlOrCmd+G")],
    ungroup: [ie("CtrlOrCmd+Shift+G")],
    gridMode: [ie("CtrlOrCmd+'")],
    zenMode: [ie("Alt+Z")],
    objectsSnapMode: [ie("Alt+S")],
    stats: [ie("Alt+/")],
    addToLibrary: [],
    flipHorizontal: [ie("Shift+H")],
    flipVertical: [ie("Shift+V")],
    viewMode: [ie("Alt+R")],
    hyperlink: [ie("CtrlOrCmd+K")],
    toggleElementLock: [ie("CtrlOrCmd+Shift+L")],
    resetZoom: [ie("CtrlOrCmd+0")],
    zoomOut: [ie("CtrlOrCmd+-")],
    zoomIn: [ie("CtrlOrCmd++")],
    zoomToFitSelection: [ie("Shift+3")],
    zoomToFit: [ie("Shift+1")],
    zoomToFitSelectionInViewport: [ie("Shift+2")],
    toggleEraserTool: [ie("E")],
    toggleHandTool: [ie("H")],
    setFrameAsActiveTool: [ie("F")],
    saveFileToDisk: [ie("CtrlOrCmd+S")],
    saveToActiveFile: [ie("CtrlOrCmd+S")],
    toggleShortcuts: [ie("?")]
}
  , gi = (e,t=0)=>{
    const n = ufe[e];
    return n && n.length > 0 ? n[t] || n[0] : ""
}
;
var KF = {
    exports: {}
};
(function(e, t) {
    (function() {
        var n = {};
        e.exports = n,
        n.simpleFilter = function(r, i) {
            return i.filter(function(o) {
                return n.test(r, o)
            })
        }
        ,
        n.test = function(r, i) {
            return n.match(r, i) !== null
        }
        ,
        n.match = function(r, i, o) {
            o = o || {};
            var s = 0, a = [], l = i.length, c = 0, u = 0, f = o.pre || "", h = o.post || "", m = o.caseSensitive && i || i.toLowerCase(), v;
            r = o.caseSensitive && r || r.toLowerCase();
            for (var y = 0; y < l; y++)
                v = i[y],
                m[y] === r[s] ? (v = f + v + h,
                s += 1,
                u += 1 + u) : u = 0,
                c += u,
                a[a.length] = v;
            return s === r.length ? (c = m === r ? 1 / 0 : c,
            {
                rendered: a.join(""),
                score: c
            }) : null
        }
        ,
        n.filter = function(r, i, o) {
            return !i || i.length === 0 ? [] : typeof r != "string" ? i : (o = o || {},
            i.reduce(function(s, a, l, c) {
                var u = a;
                o.extract && (u = o.extract(a));
                var f = n.match(r, u, o);
                return f != null && (s[s.length] = {
                    string: f.rendered,
                    score: f.score,
                    index: l,
                    original: a
                }),
                s
            }, []).sort(function(s, a) {
                var l = a.score - s.score;
                return l || s.index - a.index
            }))
        }
    }
    )()
}
)(KF);
var dfe = KF.exports;
const ffe = Su(dfe)
  , hfe = "\\u0300-\\u036f"
  , gfe = "\\ufe20-\\ufe2f"
  , pfe = "\\u20d0-\\u20ff"
  , mfe = hfe + gfe + pfe
  , vfe = `[${mfe}]`
  , yfe = RegExp(vfe, "g")
  , wfe = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g
  , Efe = {
    À: "A",
    Á: "A",
    Â: "A",
    Ã: "A",
    Ä: "A",
    Å: "A",
    à: "a",
    á: "a",
    â: "a",
    ã: "a",
    ä: "a",
    å: "a",
    Ç: "C",
    ç: "c",
    Ð: "D",
    ð: "d",
    È: "E",
    É: "E",
    Ê: "E",
    Ë: "E",
    è: "e",
    é: "e",
    ê: "e",
    ë: "e",
    Ì: "I",
    Í: "I",
    Î: "I",
    Ï: "I",
    ì: "i",
    í: "i",
    î: "i",
    ï: "i",
    Ñ: "N",
    ñ: "n",
    Ò: "O",
    Ó: "O",
    Ô: "O",
    Õ: "O",
    Ö: "O",
    Ø: "O",
    ò: "o",
    ó: "o",
    ô: "o",
    õ: "o",
    ö: "o",
    ø: "o",
    Ù: "U",
    Ú: "U",
    Û: "U",
    Ü: "U",
    ù: "u",
    ú: "u",
    û: "u",
    ü: "u",
    Ý: "Y",
    ý: "y",
    ÿ: "y",
    Æ: "E",
    æ: "e",
    Þ: "T",
    þ: "t",
    ß: "s",
    Ā: "A",
    Ă: "A",
    Ą: "A",
    ā: "a",
    ă: "a",
    ą: "a",
    Ć: "C",
    Ĉ: "C",
    Ċ: "C",
    Č: "C",
    ć: "c",
    ĉ: "c",
    ċ: "c",
    č: "c",
    Ď: "D",
    Đ: "D",
    ď: "d",
    đ: "d",
    Ē: "E",
    Ĕ: "E",
    Ė: "E",
    Ę: "E",
    Ě: "E",
    ē: "e",
    ĕ: "e",
    ė: "e",
    ę: "e",
    ě: "e",
    Ĝ: "G",
    Ğ: "G",
    Ġ: "G",
    Ģ: "G",
    ĝ: "g",
    ğ: "g",
    ġ: "g",
    ģ: "g",
    Ĥ: "H",
    Ħ: "H",
    ĥ: "h",
    ħ: "h",
    Ĩ: "I",
    Ī: "I",
    Ĭ: "I",
    Į: "I",
    İ: "I",
    ĩ: "i",
    ī: "i",
    ĭ: "i",
    į: "i",
    ı: "i",
    Ĵ: "J",
    ĵ: "j",
    Ķ: "K",
    ķ: "k",
    ĸ: "k",
    Ĺ: "L",
    Ļ: "L",
    Ľ: "L",
    Ŀ: "L",
    Ł: "L",
    ĺ: "l",
    ļ: "l",
    ľ: "l",
    ŀ: "l",
    ł: "l",
    Ń: "N",
    Ņ: "N",
    Ň: "N",
    Ŋ: "N",
    ń: "n",
    ņ: "n",
    ň: "n",
    ŋ: "n",
    Ō: "O",
    Ŏ: "O",
    Ő: "O",
    ō: "o",
    ŏ: "o",
    ő: "o",
    Ŕ: "R",
    Ŗ: "R",
    Ř: "R",
    ŕ: "r",
    ŗ: "r",
    ř: "r",
    Ś: "S",
    Ŝ: "S",
    Ş: "S",
    Š: "S",
    ś: "s",
    ŝ: "s",
    ş: "s",
    š: "s",
    Ţ: "T",
    Ť: "T",
    Ŧ: "T",
    ţ: "t",
    ť: "t",
    ŧ: "t",
    Ũ: "U",
    Ū: "U",
    Ŭ: "U",
    Ů: "U",
    Ű: "U",
    Ų: "U",
    ũ: "u",
    ū: "u",
    ŭ: "u",
    ů: "u",
    ű: "u",
    ų: "u",
    Ŵ: "W",
    ŵ: "w",
    Ŷ: "Y",
    ŷ: "y",
    Ÿ: "Y",
    Ź: "Z",
    Ż: "Z",
    Ž: "Z",
    ź: "z",
    ż: "z",
    ž: "z",
    Ĳ: "I",
    ĳ: "i",
    Œ: "E",
    œ: "e",
    ŉ: "n",
    ſ: "s"
}
  , VA = e=>e.replace(wfe, t=>Efe[t] || t).replace(yfe, "")
  , eu = ({icon: e})=>g("span", {
    style: {
        width: "1em",
        margin: "0 0.5ex 0 0.5ex",
        display: "inline-block",
        lineHeight: 0,
        verticalAlign: "middle"
    },
    children: e
})
  , bfe = T.forwardRef(({children: e, gap: t, align: n, justifyContent: r, className: i, style: o},s)=>g("div", {
    className: xe("Stack Stack_horizontal", i),
    style: {
        "--gap": t,
        alignItems: n,
        justifyContent: r,
        ...o
    },
    ref: s,
    children: e
}))
  , _fe = T.forwardRef(({children: e, gap: t, align: n, justifyContent: r, className: i, style: o},s)=>g("div", {
    className: xe("Stack Stack_vertical", i),
    style: {
        "--gap": t,
        justifyItems: n,
        justifyContent: r,
        ...o
    },
    ref: s,
    children: e
}))
  , io = {
    Row: bfe,
    Col: _fe
}
  , XF = ({className: e="", children: t, onToggle: n, title: r, ...i})=>{
    const o = ur()
      , s = xe(`dropdown-menu-button ${e}`, "zen-mode-transition", {
        "dropdown-menu-button--mobile": o.editor.isMobile
    }).trim();
    return g("button", {
        "data-prevent-outside-click": !0,
        className: s,
        onClick: n,
        type: "button",
        "data-testid": "dropdown-menu-button",
        title: r,
        ...i,
        children: t
    })
}
;
XF.displayName = "DropdownMenuTrigger";
const ZF = ()=>g("div", {
    style: {
        height: "1px",
        backgroundColor: "var(--default-border-color)",
        margin: ".5rem 0"
    }
});
ZF.displayName = "DropdownMenuSeparator";
const qF = ({children: e, onClickOutside: t, className: n="", onSelect: r, style: i})=>{
    const o = ur()
      , s = T.useRef(null)
      , a = z4({
        onClickOutside: t
    });
    B4(s, ()=>{
        var c;
        (c = a.onClickOutside) == null || c.call(a)
    }
    ),
    T.useEffect(()=>{
        const c = f=>{
            var h;
            f.key === U.ESCAPE && (f.stopImmediatePropagation(),
            (h = a.onClickOutside) == null || h.call(a))
        }
          , u = {
            capture: !0
        };
        return document.addEventListener(ce.KEYDOWN, c, u),
        ()=>{
            document.removeEventListener(ce.KEYDOWN, c, u)
        }
    }
    , [a]);
    const l = xe(`dropdown-menu ${n}`, {
        "dropdown-menu--mobile": o.editor.isMobile
    }).trim();
    return g(MF.Provider, {
        value: {
            onSelect: r
        },
        children: g("div", {
            ref: s,
            className: l,
            style: i,
            "data-testid": "dropdown-menu",
            children: o.editor.isMobile ? g(io.Col, {
                className: "dropdown-menu-container",
                children: e
            }) : g(Wo, {
                className: "dropdown-menu-container",
                padding: 2,
                style: {
                    zIndex: 2
                },
                children: e
            })
        })
    })
}
;
qF.displayName = "DropdownMenuContent";
const Tg = ({icon: e, shortcut: t, href: n, children: r, onSelect: i, className: o="", selected: s, ...a})=>{
    const l = PF(a.onClick, i);
    return g("a", {
        ...a,
        href: n,
        target: "_blank",
        rel: "noreferrer",
        className: LF(o, s),
        title: a.title ?? a["aria-label"],
        onClick: l,
        children: g(RF, {
            icon: e,
            shortcut: t,
            children: r
        })
    })
}
;
Tg.displayName = "DropdownMenuItemLink";
const xfe = ({children: e, className: t="", selected: n, ...r})=>g("div", {
    ...r,
    className: `dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n ? "dropdown-menu-item--selected" : ""}`.trim(),
    children: e
})
  , Sfe = e=>{
    const t = ve.Children.toArray(e).find(n=>ve.isValidElement(n) && typeof n.type != "string" && (n == null ? void 0 : n.type.displayName) && n.type.displayName === "DropdownMenuTrigger");
    return t || null
}
  , Ife = e=>{
    const t = ve.Children.toArray(e).find(n=>ve.isValidElement(n) && typeof n.type != "string" && (n == null ? void 0 : n.type.displayName) && n.type.displayName === "DropdownMenuContent");
    return t || null
}
  , ut = ({children: e, open: t})=>{
    const n = Sfe(e)
      , r = Ife(e);
    return L(Se, {
        children: [n, t && r]
    })
}
;
ut.Trigger = XF;
ut.Content = qF;
ut.Item = Bi;
ut.ItemLink = Tg;
ut.ItemCustom = xfe;
ut.Group = W2;
ut.Separator = ZF;
ut.displayName = "DropdownMenu";
var Cfe = {
    VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
    VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
    VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
    VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
    VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
    VITE_APP_PLUS_APP: "https://app.excalidraw.com",
    VITE_APP_AI_BACKEND: "https://oss-ai.excalidraw.com",
    VITE_APP_WS_SERVER_URL: "https://oss-collab.excalidraw.com",
    VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
    VITE_APP_ENABLE_TRACKING: "true",
    VITE_APP_GIT_SHA: "fb4bb29aa5d9f03c60afc9984b01f25bcd117970",
    BASE_URL: "/",
    MODE: "production",
    DEV: !1,
    PROD: !0,
    SSR: !1
};
const YA = e=>{
    let t;
    const n = new Set
      , r = (u,f)=>{
        const h = typeof u == "function" ? u(t) : u;
        if (!Object.is(h, t)) {
            const m = t;
            t = f ?? (typeof h != "object" || h === null) ? h : Object.assign({}, t, h),
            n.forEach(v=>v(t, m))
        }
    }
      , i = ()=>t
      , l = {
        setState: r,
        getState: i,
        getInitialState: ()=>c,
        subscribe: u=>(n.add(u),
        ()=>n.delete(u)),
        destroy: ()=>{
            (Cfe ? "production" : void 0) !== "production" && console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),
            n.clear()
        }
    }
      , c = t = e(r, i, l);
    return l
}
  , kfe = e=>e ? YA(e) : YA;
var QF = {
    exports: {}
}
  , JF = {}
  , eB = {
    exports: {}
}
  , tB = {};
/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var xf = T;
function Tfe(e, t) {
    return e === t && (e !== 0 || 1 / e === 1 / t) || e !== e && t !== t
}
var Afe = typeof Object.is == "function" ? Object.is : Tfe
  , Mfe = xf.useState
  , Lfe = xf.useEffect
  , Pfe = xf.useLayoutEffect
  , Rfe = xf.useDebugValue;
function Dfe(e, t) {
    var n = t()
      , r = Mfe({
        inst: {
            value: n,
            getSnapshot: t
        }
    })
      , i = r[0].inst
      , o = r[1];
    return Pfe(function() {
        i.value = n,
        i.getSnapshot = t,
        wb(i) && o({
            inst: i
        })
    }, [e, n, t]),
    Lfe(function() {
        return wb(i) && o({
            inst: i
        }),
        e(function() {
            wb(i) && o({
                inst: i
            })
        })
    }, [e]),
    Rfe(n),
    n
}
function wb(e) {
    var t = e.getSnapshot;
    e = e.value;
    try {
        var n = t();
        return !Afe(e, n)
    } catch {
        return !0
    }
}
function Ofe(e, t) {
    return t()
}
var Nfe = typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u" ? Ofe : Dfe;
tB.useSyncExternalStore = xf.useSyncExternalStore !== void 0 ? xf.useSyncExternalStore : Nfe;
eB.exports = tB;
var Ffe = eB.exports;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var _y = T
  , Bfe = Ffe;
function zfe(e, t) {
    return e === t && (e !== 0 || 1 / e === 1 / t) || e !== e && t !== t
}
var $fe = typeof Object.is == "function" ? Object.is : zfe
  , Ufe = Bfe.useSyncExternalStore
  , Hfe = _y.useRef
  , Wfe = _y.useEffect
  , Gfe = _y.useMemo
  , Vfe = _y.useDebugValue;
JF.useSyncExternalStoreWithSelector = function(e, t, n, r, i) {
    var o = Hfe(null);
    if (o.current === null) {
        var s = {
            hasValue: !1,
            value: null
        };
        o.current = s
    } else
        s = o.current;
    o = Gfe(function() {
        function l(m) {
            if (!c) {
                if (c = !0,
                u = m,
                m = r(m),
                i !== void 0 && s.hasValue) {
                    var v = s.value;
                    if (i(v, m))
                        return f = v
                }
                return f = m
            }
            if (v = f,
            $fe(u, m))
                return v;
            var y = r(m);
            return i !== void 0 && i(v, y) ? v : (u = m,
            f = y)
        }
        var c = !1, u, f, h = n === void 0 ? null : n;
        return [function() {
            return l(t())
        }
        , h === null ? void 0 : function() {
            return l(h())
        }
        ]
    }, [t, n, r, i]);
    var a = Ufe(e, o[0], o[1]);
    return Wfe(function() {
        s.hasValue = !0,
        s.value = a
    }, [a]),
    Vfe(a),
    a
}
;
QF.exports = JF;
var Yfe = QF.exports;
const jfe = Su(Yfe);
var nB = {
    VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
    VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
    VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
    VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
    VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
    VITE_APP_PLUS_APP: "https://app.excalidraw.com",
    VITE_APP_AI_BACKEND: "https://oss-ai.excalidraw.com",
    VITE_APP_WS_SERVER_URL: "https://oss-collab.excalidraw.com",
    VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
    VITE_APP_ENABLE_TRACKING: "true",
    VITE_APP_GIT_SHA: "fb4bb29aa5d9f03c60afc9984b01f25bcd117970",
    BASE_URL: "/",
    MODE: "production",
    DEV: !1,
    PROD: !0,
    SSR: !1
};
const {useDebugValue: Kfe} = ve
  , {useSyncExternalStoreWithSelector: Xfe} = jfe;
let jA = !1;
const Zfe = e=>e;
function qfe(e, t=Zfe, n) {
    (nB ? "production" : void 0) !== "production" && n && !jA && (console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),
    jA = !0);
    const r = Xfe(e.subscribe, e.getState, e.getServerState || e.getInitialState, t, n);
    return Kfe(r),
    r
}
const KA = e=>{
    (nB ? "production" : void 0) !== "production" && typeof e != "function" && console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");
    const t = typeof e == "function" ? kfe(e) : e
      , n = (r,i)=>qfe(t, r, i);
    return Object.assign(n, t),
    n
}
  , Qfe = e=>e ? KA(e) : KA;
var XA, ZA;
const qA = typeof window < "u" && ((XA = window.document) != null && XA.createElement || ((ZA = window.navigator) == null ? void 0 : ZA.product) === "ReactNative") ? ve.useLayoutEffect : ve.useEffect;
function ss() {
    const e = Qfe(t=>({
        current: new Array,
        version: 0,
        set: t
    }));
    return {
        In: ({children: t})=>{
            const n = e(i=>i.set)
              , r = e(i=>i.version);
            return qA(()=>{
                n(i=>({
                    version: i.version + 1
                }))
            }
            , []),
            qA(()=>(n(({current: i})=>({
                current: [...i, t]
            })),
            ()=>n(({current: i})=>({
                current: i.filter(o=>o !== t)
            }))), [t, r]),
            null
        }
        ,
        Out: ()=>{
            const t = e(n=>n.current);
            return ve.createElement(ve.Fragment, null, t)
        }
    }
}
const rB = ve.createContext(null)
  , Kr = ()=>ve.useContext(rB)
  , Jfe = ()=>ve.useMemo(()=>({
    MainMenuTunnel: ss(),
    WelcomeScreenMenuHintTunnel: ss(),
    WelcomeScreenToolbarHintTunnel: ss(),
    WelcomeScreenHelpHintTunnel: ss(),
    WelcomeScreenCenterTunnel: ss(),
    FooterCenterTunnel: ss(),
    DefaultSidebarTriggerTunnel: ss(),
    DefaultSidebarTabTriggersTunnel: ss(),
    OverwriteConfirmDialogTunnel: ss(),
    TTDDialogTriggerTunnel: ss(),
    jotaiScope: Symbol()
}), [])
  , iB = (e,t)=>{
    var r;
    let n = ((r = t[0]) == null ? void 0 : r.type) || null;
    for (const i of t)
        if (i.type !== n) {
            n = null;
            break
        }
    return C_(e.activeTool.type) && e.activeTool.type !== "image" && n !== "image" && n !== "frame" && n !== "magicframe" || t.some(i=>C_(i.type))
}
  , oB = (e,t)=>Ef(e.activeTool.type) || t.some(n=>Ef(n.type))
  , sB = ({appState: e, elementsMap: t, renderAction: n})=>{
    const r = ON(t, e);
    let i = !1;
    r.length === 2 && (go(r[0]) || go(r[1])) && (i = !0);
    const o = !!e.editingElement
      , s = ur()
      , a = document.documentElement.getAttribute("dir") === "rtl"
      , l = Ef(e.activeTool.type) && !Es(e.currentItemBackgroundColor) || r.some(f=>Ef(f.type) && !Es(f.backgroundColor))
      , c = r.length === 1 || i
      , u = !e.editingLinearElement && r.length === 1 && je(r[0]) && !He(r[0]);
    return L("div", {
        className: "panelColumn",
        children: [g("div", {
            children: iB(e, r) && n("changeStrokeColor")
        }), oB(e, r) && g("div", {
            children: n("changeBackgroundColor")
        }), l && n("changeFillStyle"), (L8(e.activeTool.type) || r.some(f=>L8(f.type))) && n("changeStrokeWidth"), (e.activeTool.type === "freedraw" || r.some(f=>f.type === "freedraw")) && n("changeStrokeShape"), (P8(e.activeTool.type) || r.some(f=>P8(f.type))) && L(Se, {
            children: [n("changeStrokeStyle"), n("changeSloppiness")]
        }), (k_(e.activeTool.type) || r.some(f=>k_(f.type))) && g(Se, {
            children: n("changeRoundness")
        }), (R8(e.activeTool.type) || r.some(f=>R8(f.type))) && g(Se, {
            children: n("changeArrowType")
        }), (e.activeTool.type === "text" || r.some(ye)) && L(Se, {
            children: [n("changeFontFamily"), n("changeFontSize"), (e.activeTool.type === "text" || Zae(r, t)) && n("changeTextAlign")]
        }), Xae(r, t) && n("changeVerticalAlign"), (A2(e.activeTool.type) || r.some(f=>A2(f.type))) && g(Se, {
            children: n("changeArrowhead")
        }), n("changeOpacity"), L("fieldset", {
            children: [g("legend", {
                children: k("labels.layers")
            }), L("div", {
                className: "buttonList",
                children: [n("sendToBack"), n("sendBackward"), n("bringForward"), n("bringToFront")]
            })]
        }), r.length > 1 && !i && L("fieldset", {
            children: [g("legend", {
                children: k("labels.align")
            }), L("div", {
                className: "buttonList",
                children: [a ? L(Se, {
                    children: [n("alignRight"), n("alignHorizontallyCentered"), n("alignLeft")]
                }) : L(Se, {
                    children: [n("alignLeft"), n("alignHorizontallyCentered"), n("alignRight")]
                }), r.length > 2 && n("distributeHorizontally"), g("div", {
                    style: {
                        flexBasis: "100%",
                        height: 0
                    }
                }), L("div", {
                    style: {
                        display: "flex",
                        flexWrap: "wrap",
                        gap: ".5rem",
                        marginTop: "-0.5rem"
                    },
                    children: [n("alignTop"), n("alignVerticallyCentered"), n("alignBottom"), r.length > 2 && n("distributeVertically")]
                })]
            })]
        }), !o && r.length > 0 && L("fieldset", {
            children: [g("legend", {
                children: k("labels.actions")
            }), L("div", {
                className: "buttonList",
                children: [!s.editor.isMobile && n("duplicateSelection"), !s.editor.isMobile && n("deleteSelectedElements"), n("group"), n("ungroup"), c && n("hyperlink"), u && n("toggleLinearEditor")]
            })]
        })]
    })
}
  , aB = ({activeTool: e, appState: t, app: n, UIOptions: r})=>{
    const [i,o] = T.useState(!1)
      , s = e.type === "frame"
      , a = e.type === "laser"
      , l = e.type === "embeddable"
      , {TTDDialogTriggerTunnel: c} = Kr();
    return L(Se, {
        children: [q6.map(({value: u, icon: f, key: h, numericKey: m, fillable: v},y)=>{
            var x;
            if (((x = r.tools) == null ? void 0 : x[u]) === !1)
                return null;
            const E = k(`toolBar.${u}`)
              , b = h && hg(typeof h == "string" ? h : h[0])
              , _ = b ? `${b} ${k("helpDialog.or")} ${m}` : `${m}`;
            return g(lt, {
                className: xe("Shape", {
                    fillable: v
                }),
                type: "radio",
                icon: f,
                checked: e.type === u,
                name: "editor-current-shape",
                title: `${hg(E)} — ${_}`,
                keyBindingLabel: m || b,
                "aria-label": hg(E),
                "aria-keyshortcuts": _,
                "data-testid": `toolbar-${u}`,
                onPointerDown: ({pointerType: C})=>{
                    !t.penDetected && C === "pen" && n.togglePenMode(!0)
                }
                ,
                onChange: ({pointerType: C})=>{
                    t.activeTool.type !== u && at("toolbar", u, "ui"),
                    u === "image" ? n.setActiveTool({
                        type: u,
                        insertOnCanvasDirectly: C !== "mouse"
                    }) : n.setActiveTool({
                        type: u
                    })
                }
            }, u)
        }
        ), g("div", {
            className: "App-toolbar__divider"
        }), L(ut, {
            open: i,
            children: [L(ut.Trigger, {
                className: xe("App-toolbar__extra-tools-trigger", {
                    "App-toolbar__extra-tools-trigger--selected": s || l || a && !n.props.isCollaborating
                }),
                onToggle: ()=>o(!i),
                title: k("toolBar.extraTools"),
                children: [pte, n.props.aiEnabled !== !1 && g("div", {
                    style: {
                        display: "inline-flex",
                        marginLeft: "auto",
                        padding: "2px 4px",
                        borderRadius: 6,
                        fontSize: 8,
                        fontFamily: "Cascadia, monospace",
                        position: "absolute",
                        background: "var(--color-promo)",
                        color: "var(--color-surface-lowest)",
                        bottom: 3,
                        right: 4
                    },
                    children: "AI"
                })]
            }), L(ut.Content, {
                onClickOutside: ()=>o(!1),
                onSelect: ()=>o(!1),
                className: "App-toolbar__extra-tools-dropdown",
                children: [g(ut.Item, {
                    onSelect: ()=>n.setActiveTool({
                        type: "frame"
                    }),
                    icon: ND,
                    shortcut: U.F.toLocaleUpperCase(),
                    "data-testid": "toolbar-frame",
                    selected: s,
                    children: k("toolBar.frame")
                }), g(ut.Item, {
                    onSelect: ()=>n.setActiveTool({
                        type: "embeddable"
                    }),
                    icon: gee,
                    "data-testid": "toolbar-embeddable",
                    selected: l,
                    children: k("toolBar.embeddable")
                }), g(ut.Item, {
                    onSelect: ()=>n.setActiveTool({
                        type: "laser"
                    }),
                    icon: BD,
                    "data-testid": "toolbar-laser",
                    selected: a,
                    shortcut: U.K.toLocaleUpperCase(),
                    children: k("toolBar.laser")
                }), g("div", {
                    style: {
                        margin: "6px 0",
                        fontSize: 14,
                        fontWeight: 600
                    },
                    children: "Generate"
                }), n.props.aiEnabled !== !1 && g(c.Out, {}), g(ut.Item, {
                    onSelect: ()=>n.setOpenDialog({
                        name: "ttd",
                        tab: "mermaid"
                    }),
                    icon: FD,
                    "data-testid": "toolbar-embeddable",
                    children: k("toolBar.mermaidToExcalidraw")
                }), n.props.aiEnabled !== !1 && L(Se, {
                    children: [L(ut.Item, {
                        onSelect: ()=>n.onMagicframeToolSelect(),
                        icon: B6,
                        "data-testid": "toolbar-magicframe",
                        children: [k("toolBar.magicframe"), g(ut.Item.Badge, {
                            children: "AI"
                        })]
                    }), g(ut.Item, {
                        onSelect: ()=>{
                            at("ai", "open-settings", "d2c"),
                            n.setOpenDialog({
                                name: "settings",
                                source: "settings",
                                tab: "diagram-to-code"
                            })
                        }
                        ,
                        icon: i_,
                        "data-testid": "toolbar-magicSettings",
                        children: k("toolBar.magicSettings")
                    })]
                })]
            })]
        })]
    })
}
  , ehe = ({renderAction: e, zoom: t})=>g(io.Col, {
    gap: 1,
    className: "zoom-actions",
    children: L(io.Row, {
        align: "center",
        children: [e("zoomOut"), e("resetZoom"), e("zoomIn")]
    })
})
  , the = ({renderAction: e, className: t})=>L("div", {
    className: `undo-redo-buttons ${t}`,
    children: [g("div", {
        className: "undo-button-container",
        children: g(Ma, {
            label: k("buttons.undo"),
            children: e("undo")
        })
    }), g("div", {
        className: "redo-button-container",
        children: L(Ma, {
            label: k("buttons.redo"),
            children: [" ", e("redo")]
        })
    })]
})
  , nhe = ({actionManager: e, showExitZenModeBtn: t})=>g("button", {
    type: "button",
    className: xe("disable-zen-mode", {
        "disable-zen-mode--visible": t
    }),
    onClick: ()=>e.executeAction(V_),
    children: k("buttons.exitZenMode")
})
  , rhe = ({renderAction: e, className: t})=>g("div", {
    className: `finalize-button ${t}`,
    children: e("finalize", {
        size: "small"
    })
})
  , QA = e=>{
    const t = T.useRef({
        userFn: e
    });
    return t.current.userFn = e,
    t.current.stableFn || (t.current.stableFn = (...n)=>t.current.userFn(...n)),
    t.current.stableFn
}
  , V2 = ({label: e, onClick: t, className: n, children: r, actionType: i, type: o="button", isLoading: s, ...a})=>{
    const l = i ? `Dialog__action-button--${i}` : "";
    return L("button", {
        className: xe("Dialog__action-button", l, n),
        type: o,
        "aria-label": e,
        onClick: t,
        ...a,
        children: [r && g("div", {
            style: s ? {
                visibility: "hidden"
            } : {},
            children: r
        }), g("div", {
            style: s ? {
                visibility: "hidden"
            } : {},
            children: e
        }), s && g("div", {
            style: {
                position: "absolute",
                inset: 0
            },
            children: g(Ta, {})
        })]
    })
}
  , lB = mn(new Map)
  , JA = async e=>await jO({
    elements: e,
    appState: {
        exportBackground: !1,
        viewBackgroundColor: Qe.white
    },
    files: null,
    renderEmbeddables: !1
})
  , ihe = (e,t,n)=>{
    const [r,i] = T.useState();
    return T.useEffect(()=>{
        if (t)
            if (e) {
                const o = n.get(e);
                o ? i(o) : (async()=>{
                    var a;
                    const s = await JA(t);
                    (a = s.querySelector(".style-fonts")) == null || a.remove(),
                    s && (n.set(e, s),
                    i(s))
                }
                )()
            } else
                (async()=>{
                    const o = await JA(t);
                    i(o)
                }
                )()
    }
    , [e, t, n, i]),
    r
}
  , cB = ()=>{
    const [e] = Ot(lB, cr);
    return {
        clearLibraryCache: ()=>e.clear(),
        deleteItemsFromLibraryCache: r=>{
            r.forEach(i=>e.delete(i))
        }
        ,
        svgCache: e
    }
}
;
class ohe {
    constructor() {
        D(this, "jobs", []);
        D(this, "running", !1)
    }
    tick() {
        if (this.running)
            return;
        const t = this.jobs.shift();
        t ? (this.running = !0,
        t.promise.resolve(K3(t.jobFactory, ...t.args).finally(()=>{
            this.running = !1,
            this.tick()
        }
        ))) : this.running = !1
    }
    push(t, ...n) {
        const r = Mv();
        return this.jobs.push({
            jobFactory: t,
            promise: r,
            args: n
        }),
        this.tick(),
        r
    }
}
const uB = new hs
  , _p = mn({
    status: "loaded",
    isInitialized: !1,
    libraryItems: []
})
  , Mh = e=>ha(e)
  , she = (e,t)=>!e.find(n=>n.elements.length !== t.elements.length ? !1 : n.elements.every((r,i)=>r.id === t.elements[i].id && r.versionNonce === t.elements[i].versionNonce))
  , ahe = (e,t)=>{
    const n = [];
    for (const r of t)
        she(e, r) && n.push(r);
    return [...n, ...e]
}
  , dB = (e,t)=>{
    const n = De(t)
      , r = {
        deletedItems: new Map,
        addedItems: new Map
    };
    for (const o of e)
        n.has(o.id) || r.deletedItems.set(o.id, o);
    const i = De(e);
    for (const o of t)
        i.has(o.id) || r.addedItems.set(o.id, o);
    return r
}
;
class lhe {
    constructor(t) {
        D(this, "currLibraryItems", []);
        D(this, "prevLibraryItems", Mh(this.currLibraryItems));
        D(this, "app");
        D(this, "updateQueue", []);
        D(this, "getLastUpdateTask", ()=>this.updateQueue[this.updateQueue.length - 1]);
        D(this, "notifyListeners", ()=>{
            var t, n;
            if (this.updateQueue.length > 0)
                Ss.set(_p, r=>({
                    status: "loading",
                    libraryItems: this.currLibraryItems,
                    isInitialized: r.isInitialized
                }));
            else {
                Ss.set(_p, {
                    status: "loaded",
                    libraryItems: this.currLibraryItems,
                    isInitialized: !0
                });
                try {
                    const r = this.prevLibraryItems;
                    this.prevLibraryItems = Mh(this.currLibraryItems);
                    const i = Mh(this.currLibraryItems);
                    (n = (t = this.app.props).onLibraryChange) == null || n.call(t, i),
                    uB.trigger(dB(r, i), i)
                } catch (r) {
                    console.error(r)
                }
            }
        }
        );
        D(this, "destroy", ()=>{
            this.updateQueue = [],
            this.currLibraryItems = [],
            Ss.set(lB, new Map)
        }
        );
        D(this, "resetLibrary", ()=>this.setLibrary([]));
        D(this, "getLatestLibrary", ()=>new Promise(async t=>{
            try {
                const n = await (this.getLastUpdateTask() || this.currLibraryItems);
                this.updateQueue.length > 0 ? t(this.getLatestLibrary()) : t(Mh(n))
            } catch {
                return t(this.currLibraryItems)
            }
        }
        ));
        D(this, "updateLibrary", async({libraryItems: t, prompt: n=!1, merge: r=!1, openLibraryMenu: i=!1, defaultStatus: o="unpublished"})=>(i && this.app.setState({
            openSidebar: {
                name: Ll.name,
                tab: E6
            }
        }),
        this.setLibrary(()=>new Promise(async(s,a)=>{
            try {
                const l = await (typeof t == "function" && !(t instanceof Blob) ? t(this.currLibraryItems) : t);
                let c;
                l instanceof Blob ? c = await foe(l, o) : c = Xv(l, o),
                !n || window.confirm(k("alerts.confirmAddLibrary", {
                    numShapes: c.length
                })) ? (n && this.app.focusContainer(),
                s(r ? ahe(this.currLibraryItems, c) : c)) : a(new df)
            } catch (l) {
                a(l)
            }
        }
        ))));
        D(this, "setLibrary", t=>{
            const n = new Promise(async(r,i)=>{
                try {
                    await this.getLastUpdateTask(),
                    typeof t == "function" && (t = t(this.currLibraryItems)),
                    this.currLibraryItems = Mh(await t),
                    r(this.currLibraryItems)
                } catch (o) {
                    i(o)
                }
            }
            ).catch(r=>{
                if (r.name === "AbortError")
                    return console.warn("Library update aborted by user"),
                    this.currLibraryItems;
                throw r
            }
            ).finally(()=>{
                this.updateQueue = this.updateQueue.filter(r=>r !== n),
                this.notifyListeners()
            }
            );
            return this.updateQueue.push(n),
            this.notifyListeners(),
            n
        }
        );
        this.app = t
    }
}
const fB = e=>{
    const n = Math.ceil(Math.sqrt(e.length))
      , r = []
      , i = m=>e.slice(m * n, m * n + n).reduce((y,E)=>{
        const {height: b} = pa(E.elements);
        return Math.max(y, b)
    }
    , 0)
      , o = m=>{
        let v = 0
          , y = 0
          , E = 0;
        for (const b of e) {
            if (v % n === 0 && (y = 0),
            y === m) {
                const {width: _} = pa(b.elements);
                E = Math.max(E, _)
            }
            v++,
            y++
        }
        return E
    }
    ;
    let s = 0
      , a = 0
      , l = 0
      , c = 0
      , u = 0
      , f = 0
      , h = 0;
    for (const m of e) {
        u && u % n === 0 && (a += l + 50,
        s = 0,
        f = 0,
        h++),
        f === 0 && (l = i(h)),
        c = o(f);
        const {minX: v, minY: y, width: E, height: b} = pa(m.elements)
          , _ = (c - E) / 2
          , x = (l - b) / 2;
        r.push(...m.elements.map(C=>({
            ...C,
            x: C.x + s + _ - v,
            y: C.y + a + x - y
        }))),
        s += c + 50,
        u++,
        f++
    }
    return r
}
  , X_ = ()=>{
    const e = new URLSearchParams(window.location.hash.slice(1)).get(F3.addLibrary) || new URLSearchParams(window.location.search).get(N3.addLibrary)
      , t = e ? new URLSearchParams(window.location.hash.slice(1)).get("token") : null;
    return e ? {
        libraryUrl: e,
        idToken: t
    } : null
}
  , ol = class ol {
    constructor(t) {
        D(this, "adapter");
        this.adapter = t
    }
    static async getLibraryItems(t, n, r=!0) {
        const i = ()=>new Promise(async(o,s)=>{
            try {
                const a = await t.load({
                    source: n
                });
                o(Xv((a == null ? void 0 : a.libraryItems) || [], "published"))
            } catch (a) {
                s(a)
            }
        }
        );
        return r ? ol.queue.push(i) : i()
    }
    getLibraryItems(t) {
        return ol.getLibraryItems(this.adapter, t, !1)
    }
}
;
D(ol, "queue", new ohe),
D(ol, "run", async(t,n)=>{
    const r = new ol(t);
    return ol.queue.push(()=>n(r))
}
);
let Zd = ol
  , Ag = 0
  , Y2 = 0;
const Z_ = e=>yle(e.map(t=>`${t.id}:${vle(t.elements)}`).sort().join())
  , eM = async(e,t)=>{
    try {
        return Y2++,
        await Zd.run(e, async n=>{
            const r = De(await n.getLibraryItems("save"));
            for (const [a] of t.deletedItems)
                r.delete(a);
            const i = [];
            for (const [a,l] of t.addedItems)
                r.has(a) ? r.set(a, l) : i.push(l);
            const o = i.concat(Array.from(r.values()))
              , s = Z_(o);
            return s !== Ag && await e.save({
                libraryItems: o
            }),
            Ag = s,
            o
        }
        )
    } finally {
        Y2--
    }
}
  , che = e=>{
    const {excalidrawAPI: t} = e
      , n = T.useRef(e);
    n.current = e;
    const r = T.useRef(!1);
    T.useEffect(()=>{
        if (!t)
            return;
        r.current = !1;
        const i = async({libraryUrl: a, idToken: l})=>{
            const c = new Promise(async(f,h)=>{
                try {
                    const v = await (await fetch(decodeURIComponent(a))).blob();
                    f(v)
                } catch (m) {
                    h(m)
                }
            }
            )
              , u = l !== t.id;
            await (u && document.hidden ? new Promise(f=>{
                window.addEventListener("focus", ()=>f(), {
                    once: !0
                })
            }
            ) : null);
            try {
                await t.updateLibrary({
                    libraryItems: c,
                    prompt: u,
                    merge: !0,
                    defaultStatus: "published",
                    openLibraryMenu: !0
                })
            } catch (f) {
                throw f
            } finally {
                if (window.location.hash.includes(F3.addLibrary)) {
                    const f = new URLSearchParams(window.location.hash.slice(1));
                    f.delete(F3.addLibrary),
                    window.history.replaceState({}, fa, `#${f.toString()}`)
                } else if (window.location.search.includes(N3.addLibrary)) {
                    const f = new URLSearchParams(window.location.search);
                    f.delete(N3.addLibrary),
                    window.history.replaceState({}, fa, `?${f.toString()}`)
                }
            }
        }
          , o = a=>{
            a.preventDefault();
            const l = X_();
            l && (a.stopImmediatePropagation(),
            window.history.replaceState({}, "", a.oldURL),
            i(l))
        }
          , s = X_();
        if (s && i(s),
        "getInitialLibraryItems"in n.current && n.current.getInitialLibraryItems && (console.warn("useHandleLibrar `opts.getInitialLibraryItems` is deprecated. Use `opts.adapter` instead."),
        Promise.resolve(n.current.getInitialLibraryItems()).then(a=>{
            t.updateLibrary({
                libraryItems: a,
                merge: !0
            })
        }
        ).catch(a=>{
            console.error(`UseHandeLibrary getInitialLibraryItems failed: ${a == null ? void 0 : a.message}`)
        }
        )),
        "adapter"in n.current && n.current.adapter) {
            const a = n.current.adapter
              , l = n.current.migrationAdapter
              , c = Mv();
            l ? c.resolve(K3(l.load).then(async u=>{
                let f = null;
                try {
                    if (!u)
                        return Zd.getLibraryItems(a, "load");
                    f = Xv(u.libraryItems || [], "published");
                    const h = await eM(a, dB([], f));
                    try {
                        await l.clear()
                    } catch (m) {
                        console.error(`couldn't delete legacy library data: ${m.message}`)
                    }
                    return h
                } catch (h) {
                    return console.error(`couldn't migrate legacy library data: ${h.message}`),
                    f
                }
            }
            ).catch(u=>(console.error(`error during library migration: ${u.message}`),
            Zd.getLibraryItems(a, "load")))) : c.resolve(K3(Zd.getLibraryItems, a, "load")),
            t.updateLibrary({
                libraryItems: c.then(u=>{
                    const f = u || [];
                    return Ag = Z_(f),
                    f
                }
                ),
                merge: !0
            }).finally(()=>{
                r.current = !0
            }
            )
        }
        return window.addEventListener(ce.HASHCHANGE, o),
        ()=>{
            window.removeEventListener(ce.HASHCHANGE, o)
        }
    }
    , [t]),
    T.useEffect(()=>{
        const i = uB.on(async(s,a)=>{
            const l = r.current
              , c = "adapter"in n.current && n.current.adapter || null;
            try {
                c && Ag !== Z_(a) && await eM(c, s)
            } catch (u) {
                console.error(`couldn't persist library update: ${u.message}`, s),
                l && n.current.excalidrawAPI && n.current.excalidrawAPI.updateScene({
                    appState: {
                        errorMessage: k("errors.saveLibraryError")
                    }
                })
            }
        }
        )
          , o = s=>{
            Y2 && A6(s)
        }
        ;
        return window.addEventListener(ce.BEFORE_UNLOAD, o),
        ()=>{
            window.removeEventListener(ce.BEFORE_UNLOAD, o),
            i(),
            Ag = 0,
            Y2 = 0
        }
    }
    , [])
}
  , uhe = ({theme: e, id: t, libraryReturnUrl: n})=>{
    const r = n || window.location.origin + window.location.pathname;
    return g("a", {
        className: "library-menu-browse-button",
        href: `https://libraries.excalidraw.com?target=${window.name || "_blank"}&referrer=${r}&useHash=true&token=${t}&theme=${e}&version=${Cv.excalidrawLibrary}`,
        target: "_excalidraw_libraries",
        children: k("labels.libraries")
    })
}
  , hB = ({libraryReturnUrl: e, theme: t, id: n, style: r, children: i, className: o})=>L("div", {
    className: xe("library-menu-control-buttons", o),
    style: r,
    children: [g(uhe, {
        id: n,
        libraryReturnUrl: e,
        theme: t
    }), i]
})
  , dhe = /({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g
  , fhe = /{{([\w-]+)}}/
  , hhe = /<([\w-]+)>/
  , ghe = /<\/([\w-]+)>/
  , phe = (e,t)=>{
    const n = [{
        name: "",
        children: []
    }];
    return e.split(dhe).filter(Boolean).forEach(r=>{
        const i = r.match(hhe)
          , o = r.match(ghe)
          , s = r.match(fhe);
        if (i !== null) {
            const a = i[1];
            t.hasOwnProperty(a) ? n.push({
                name: a,
                children: []
            }) : console.warn(`Trans: missed to pass in prop ${a} for interpolating ${e}`)
        } else if (o !== null)
            if (o[1] === n[n.length - 1].name) {
                const l = n.pop()
                  , c = ve.createElement(ve.Fragment, {}, ...l.children)
                  , u = t[l.name];
                typeof u == "function" && n[n.length - 1].children.push(u(c))
            } else
                console.warn(`Trans: unexpected end tag ${r} for interpolating ${e}`);
        else if (s !== null) {
            const a = s[1];
            t.hasOwnProperty(a) ? n[n.length - 1].children.push(t[a]) : console.warn(`Trans: key ${a} not in props for interpolating ${e}`)
        } else
            n[n.length - 1].children.push(r)
    }
    ),
    n.length !== 1 && console.warn(`Trans: stack not empty for interpolating ${e}`),
    n[0].children
}
  , li = ({i18nKey: e, children: t, ...n})=>{
    const {t: r} = vn();
    return ve.createElement(ve.Fragment, {}, ...phe(r(e), n))
}
;
class ks {
    static has(t) {
        try {
            return !!window.localStorage.getItem(t)
        } catch (n) {
            return console.warn(`localStorage.getItem error: ${n.message}`),
            !1
        }
    }
    static get(t) {
        try {
            const n = window.localStorage.getItem(t);
            return n ? JSON.parse(n) : null
        } catch (n) {
            return console.warn(`localStorage.getItem error: ${n.message}`),
            null
        }
    }
}
D(ks, "set", (t,n)=>{
    try {
        return window.localStorage.setItem(t, JSON.stringify(n)),
        !0
    } catch (r) {
        return console.warn(`localStorage.setItem error: ${r.message}`),
        !1
    }
}
),
D(ks, "delete", t=>{
    try {
        window.localStorage.removeItem(t)
    } catch (n) {
        console.warn(`localStorage.removeItem error: ${n.message}`)
    }
}
);
const mhe = async e=>{
    const r = Math.round(8)
      , i = Math.max(Math.round(128 / 64), 2)
      , o = tJ(e, 6)
      , s = document.createElement("canvas");
    s.width = o[0].length * 128 + (o[0].length + 1) * (r * 2) - r * 2,
    s.height = o.length * 128 + (o.length + 1) * (r * 2) - r * 2;
    const a = s.getContext("2d");
    a.fillStyle = Kn.white,
    a.fillRect(0, 0, s.width, s.height);
    for (const [l,c] of e.entries()) {
        const u = await Jv({
            elements: c.elements,
            files: null,
            maxWidthOrHeight: 128
        })
          , {width: f, height: h} = u
          , m = Math.floor(l / 6) * (128 + r * 2)
          , v = l % 6 * (128 + r * 2);
        a.drawImage(u, v + (128 - f) / 2 + r, m + (128 - h) / 2 + r),
        a.lineWidth = i,
        a.strokeStyle = Kn.gray[4],
        a.strokeRect(v + r / 2, m + r / 2, 128 + r, 128 + r)
    }
    return await w_(new File([await dp(s)],"preview",{
        type: Re.png
    }), {
        outputType: Re.jpg,
        maxWidthOrHeight: 5e3
    })
}
  , vhe = ({libItem: e, appState: t, index: n, onChange: r, onRemove: i})=>{
    const o = T.useRef(null)
      , s = T.useRef(null);
    return T.useEffect(()=>{
        const a = o.current;
        a && (async()=>{
            const l = await jO({
                elements: e.elements,
                appState: {
                    ...t,
                    viewBackgroundColor: Kn.white,
                    exportBackground: !0
                },
                files: null
            });
            a.innerHTML = l.outerHTML
        }
        )()
    }
    , [e.elements, t]),
    L("div", {
        className: "single-library-item",
        children: [e.status === "published" && g("span", {
            className: "single-library-item-status",
            children: k("labels.statusPublished")
        }), g("div", {
            ref: o,
            className: "single-library-item__svg"
        }), g(lt, {
            "aria-label": k("buttons.remove"),
            type: "button",
            icon: Df,
            className: "single-library-item--remove",
            onClick: i.bind(null, e.id),
            title: k("buttons.remove")
        }), L("div", {
            style: {
                display: "flex",
                margin: "0.8rem 0",
                width: "100%",
                fontSize: "14px",
                fontWeight: 500,
                flexDirection: "column"
            },
            children: [L("label", {
                style: {
                    display: "flex",
                    justifyContent: "space-between",
                    flexDirection: "column"
                },
                children: [L("div", {
                    style: {
                        padding: "0.5em 0"
                    },
                    children: [g("span", {
                        style: {
                            fontWeight: 500,
                            color: Kn.gray[6]
                        },
                        children: k("publishDialog.itemName")
                    }), g("span", {
                        "aria-hidden": "true",
                        className: "required",
                        children: "*"
                    })]
                }), g("input", {
                    type: "text",
                    ref: s,
                    style: {
                        width: "80%",
                        padding: "0.2rem"
                    },
                    defaultValue: e.name,
                    placeholder: "Item name",
                    onChange: a=>{
                        r(a.target.value, n)
                    }
                })]
            }), g("span", {
                className: "error",
                children: e.error
            })]
        })]
    })
}
  , yhe = ({onClose: e, libraryItems: t, appState: n, onSuccess: r, onError: i, updateItemsInStorage: o, onRemove: s})=>{
    const [a,l] = T.useState({
        authorName: "",
        githubHandle: "",
        name: "",
        description: "",
        twitterHandle: "",
        website: ""
    })
      , [c,u] = T.useState(!1);
    T.useEffect(()=>{
        const x = ks.get(Pl.PUBLISH_LIBRARY);
        x && l(x)
    }
    , []);
    const [f,h] = T.useState(t.slice());
    T.useEffect(()=>{
        h(t.slice())
    }
    , [t]);
    const m = x=>{
        l({
            ...a,
            [x.target.name]: x.target.value
        })
    }
      , v = async x=>{
        x.preventDefault(),
        u(!0);
        const C = [];
        let P = !1;
        if (f.forEach($=>{
            let V = "";
            $.name || (V = k("publishDialog.errors.required"),
            P = !0),
            C.push({
                ...$,
                error: V
            })
        }
        ),
        P) {
            h(C),
            u(!1);
            return
        }
        const M = await mhe(f)
          , A = {
            type: so.excalidrawLibrary,
            version: Cv.excalidrawLibrary,
            source: v6,
            libraryItems: f
        }
          , I = JSON.stringify(A, null, 2)
          , O = new Blob([I],{
            type: "application/json"
        })
          , N = new FormData;
        N.append("excalidrawLib", O),
        N.append("previewImage", M),
        N.append("previewImageType", M.type),
        N.append("title", a.name),
        N.append("authorName", a.authorName),
        N.append("githubHandle", a.githubHandle),
        N.append("name", a.name),
        N.append("description", a.description),
        N.append("twitterHandle", a.twitterHandle),
        N.append("website", a.website),
        fetch("https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries/submit", {
            method: "post",
            body: N
        }).then($=>$.ok ? $.json().then(({url: V})=>{
            ks.delete(Pl.PUBLISH_LIBRARY),
            r({
                url: V,
                authorName: a.authorName,
                items: f
            })
        }
        ) : $.json().catch(()=>{
            throw new Error($.statusText || "something went wrong")
        }
        ).then(V=>{
            throw new Error(V.message || $.statusText || "something went wrong")
        }
        ), $=>{
            console.error($),
            i($),
            u(!1)
        }
        ).catch($=>{
            console.error($),
            i($),
            u(!1)
        }
        )
    }
      , y = ()=>{
        const x = [];
        return f.forEach((C,P)=>{
            x.push(g("div", {
                className: "single-library-item-wrapper",
                children: g(vhe, {
                    libItem: C,
                    appState: n,
                    index: P,
                    onChange: (M,A)=>{
                        const I = f.slice();
                        I[A].name = M,
                        h(I)
                    }
                    ,
                    onRemove: s
                })
            }, P))
        }
        ),
        g("div", {
            className: "selected-library-items",
            children: x
        })
    }
      , E = T.useCallback(()=>{
        o(f),
        ks.set(Pl.PUBLISH_LIBRARY, a),
        e()
    }
    , [f, e, o, a])
      , b = !!t.length
      , _ = t.some(x=>x.status === "published");
    return g(mi, {
        onCloseRequest: E,
        title: k("publishDialog.title"),
        className: "publish-library",
        children: b ? L("form", {
            onSubmit: v,
            children: [g("div", {
                className: "publish-library-note",
                children: g(li, {
                    i18nKey: "publishDialog.noteDescription",
                    link: x=>g("a", {
                        href: "https://libraries.excalidraw.com",
                        target: "_blank",
                        rel: "noopener noreferrer",
                        children: x
                    })
                })
            }), g("span", {
                className: "publish-library-note",
                children: g(li, {
                    i18nKey: "publishDialog.noteGuidelines",
                    link: x=>g("a", {
                        href: "https://github.com/excalidraw/excalidraw-libraries#guidelines",
                        target: "_blank",
                        rel: "noopener noreferrer",
                        children: x
                    })
                })
            }), g("div", {
                className: "publish-library-note",
                children: k("publishDialog.noteItems")
            }), _ && g("span", {
                className: "publish-library-note publish-library-warning",
                children: k("publishDialog.republishWarning")
            }), y(), L("div", {
                className: "publish-library__fields",
                children: [L("label", {
                    children: [L("div", {
                        children: [g("span", {
                            children: k("publishDialog.libraryName")
                        }), g("span", {
                            "aria-hidden": "true",
                            className: "required",
                            children: "*"
                        })]
                    }), g("input", {
                        type: "text",
                        name: "name",
                        required: !0,
                        value: a.name,
                        onChange: m,
                        placeholder: k("publishDialog.placeholder.libraryName")
                    })]
                }), L("label", {
                    style: {
                        alignItems: "flex-start"
                    },
                    children: [L("div", {
                        children: [g("span", {
                            children: k("publishDialog.libraryDesc")
                        }), g("span", {
                            "aria-hidden": "true",
                            className: "required",
                            children: "*"
                        })]
                    }), g("textarea", {
                        name: "description",
                        rows: 4,
                        required: !0,
                        value: a.description,
                        onChange: m,
                        placeholder: k("publishDialog.placeholder.libraryDesc")
                    })]
                }), L("label", {
                    children: [L("div", {
                        children: [g("span", {
                            children: k("publishDialog.authorName")
                        }), g("span", {
                            "aria-hidden": "true",
                            className: "required",
                            children: "*"
                        })]
                    }), g("input", {
                        type: "text",
                        name: "authorName",
                        required: !0,
                        value: a.authorName,
                        onChange: m,
                        placeholder: k("publishDialog.placeholder.authorName")
                    })]
                }), L("label", {
                    children: [g("span", {
                        children: k("publishDialog.githubUsername")
                    }), g("input", {
                        type: "text",
                        name: "githubHandle",
                        value: a.githubHandle,
                        onChange: m,
                        placeholder: k("publishDialog.placeholder.githubHandle")
                    })]
                }), L("label", {
                    children: [g("span", {
                        children: k("publishDialog.twitterUsername")
                    }), g("input", {
                        type: "text",
                        name: "twitterHandle",
                        value: a.twitterHandle,
                        onChange: m,
                        placeholder: k("publishDialog.placeholder.twitterHandle")
                    })]
                }), L("label", {
                    children: [g("span", {
                        children: k("publishDialog.website")
                    }), g("input", {
                        type: "text",
                        name: "website",
                        pattern: "https?://.+",
                        title: k("publishDialog.errors.website"),
                        value: a.website,
                        onChange: m,
                        placeholder: k("publishDialog.placeholder.website")
                    })]
                }), g("span", {
                    className: "publish-library-note",
                    children: g(li, {
                        i18nKey: "publishDialog.noteLicense",
                        link: x=>g("a", {
                            href: "https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",
                            target: "_blank",
                            rel: "noopener noreferrer",
                            children: x
                        })
                    })
                })]
            }), L("div", {
                className: "publish-library__buttons",
                children: [g(V2, {
                    label: k("buttons.cancel"),
                    onClick: E,
                    "data-testid": "cancel-clear-canvas-button"
                }), g(V2, {
                    type: "submit",
                    label: k("buttons.submit"),
                    actionType: "primary",
                    isLoading: c
                })]
            })]
        }) : g("p", {
            style: {
                padding: "1em",
                textAlign: "center",
                fontWeight: 500
            },
            children: k("publishDialog.atleastOneLibItem")
        })
    })
}
  , whe = (e,t)=>e.filter(n=>t.includes(n.id))
  , Ehe = ({setAppState: e, selectedItems: t, library: n, onRemoveFromLibrary: r, resetLibrary: i, onSelectItems: o, appState: s, className: a})=>{
    const [l] = Ot(_p, cr)
      , [c,u] = Ot(V4, cr)
      , f = ()=>{
        const N = t.length ? k("alerts.removeItemsFromsLibrary", {
            count: t.length
        }) : k("alerts.resetLibrary")
          , $ = t.length ? k("confirmDialog.removeItemsFromLib") : k("confirmDialog.resetLibrary");
        return g(gB, {
            onConfirm: ()=>{
                t.length ? r() : i(),
                m(!1)
            }
            ,
            onCancel: ()=>{
                m(!1)
            }
            ,
            title: $,
            children: g("p", {
                children: N
            })
        })
    }
      , [h,m] = T.useState(!1)
      , v = !!t.length
      , y = v ? l.libraryItems.filter(N=>t.includes(N.id)) : l.libraryItems
      , E = k(v ? "buttons.remove" : "buttons.resetLibrary")
      , [b,_] = T.useState(!1)
      , [x,C] = T.useState(null)
      , P = T.useCallback(()=>L(mi, {
        onCloseRequest: ()=>C(null),
        title: k("publishSuccessDialog.title"),
        className: "publish-library-success",
        size: "small",
        children: [g("p", {
            children: g(li, {
                i18nKey: "publishSuccessDialog.content",
                authorName: x.authorName,
                link: N=>g("a", {
                    href: x == null ? void 0 : x.url,
                    target: "_blank",
                    rel: "noopener noreferrer",
                    children: N
                })
            })
        }), g(lt, {
            type: "button",
            title: k("buttons.close"),
            "aria-label": k("buttons.close"),
            label: k("buttons.close"),
            onClick: ()=>C(null),
            "data-testid": "publish-library-success-close",
            className: "publish-library-success-close"
        })]
    }), [C, x])
      , M = (N,$)=>{
        _(!1),
        C({
            url: N.url,
            authorName: N.authorName
        });
        const V = $.slice();
        V.forEach(z=>{
            t.includes(z.id) && (z.status = "published")
        }
        ),
        n.setLibrary(V)
    }
      , A = async()=>{
        try {
            await n.updateLibrary({
                libraryItems: K6({
                    description: "Excalidraw library files"
                }),
                merge: !0,
                openLibraryMenu: !0
            })
        } catch (N) {
            if ((N == null ? void 0 : N.name) === "AbortError") {
                console.warn(N);
                return
            }
            e({
                errorMessage: k("errors.importLibraryError")
            })
        }
    }
      , I = async()=>{
        const N = v ? y : await n.getLatestLibrary();
        Fre(N).catch(JR).catch($=>{
            e({
                errorMessage: $.message
            })
        }
        )
    }
      , O = ()=>L(ut, {
        open: c,
        children: [g(ut.Trigger, {
            onToggle: ()=>u(!c),
            children: JJ
        }), L(ut.Content, {
            onClickOutside: ()=>u(!1),
            onSelect: ()=>u(!1),
            className: "library-menu",
            children: [!v && g(ut.Item, {
                onSelect: A,
                icon: O6,
                "data-testid": "lib-dropdown--load",
                children: k("buttons.load")
            }), !!y.length && g(ut.Item, {
                onSelect: I,
                icon: Nv,
                "data-testid": "lib-dropdown--export",
                children: k("buttons.export")
            }), !!y.length && g(ut.Item, {
                onSelect: ()=>m(!0),
                icon: hf,
                children: E
            }), v && g(ut.Item, {
                icon: lte,
                onSelect: ()=>_(!0),
                "data-testid": "lib-dropdown--remove",
                children: k("buttons.publishLibrary")
            })]
        })]
    });
    return L("div", {
        className: xe("library-menu-dropdown-container", a),
        children: [O(), t.length > 0 && g("div", {
            className: "library-actions-counter",
            children: t.length
        }), h && f(), b && g(yhe, {
            onClose: ()=>_(!1),
            libraryItems: whe(l.libraryItems, t),
            appState: s,
            onSuccess: N=>M(N, l.libraryItems),
            onError: N=>window.alert(N),
            updateItemsInStorage: ()=>n.setLibrary(l.libraryItems),
            onRemove: N=>o(t.filter($=>$ !== N))
        }), x && P()]
    })
}
  , tM = ({selectedItems: e, onSelectItems: t, className: n})=>{
    const {library: r} = Ba()
      , {clearLibraryCache: i, deleteItemsFromLibraryCache: o} = cB()
      , s = Wn()
      , a = Gn()
      , [l] = Ot(_p, cr)
      , c = async f=>{
        const h = f.filter(m=>!e.includes(m.id));
        r.setLibrary(h).catch(()=>{
            a({
                errorMessage: k("alerts.errorRemovingFromLibrary")
            })
        }
        ),
        o(e),
        t([])
    }
    ;
    return g(Ehe, {
        appState: s,
        setAppState: a,
        selectedItems: e,
        onSelectItems: t,
        library: r,
        onRemoveFromLibrary: ()=>c(l.libraryItems),
        resetLibrary: ()=>{
            r.resetLibrary(),
            i()
        }
        ,
        className: n
    })
}
  , bhe = T.memo(({id: e, elements: t, isPending: n, onClick: r, selected: i, onToggle: o, onDrag: s, svgCache: a})=>{
    const l = T.useRef(null)
      , c = ihe(e, t, a);
    T.useEffect(()=>{
        const v = l.current;
        if (v)
            return c && (v.innerHTML = c.outerHTML),
            ()=>{
                v.innerHTML = ""
            }
    }
    , [c]);
    const [u,f] = T.useState(!1)
      , h = ur().editor.isMobile
      , m = n && g("div", {
        className: "library-unit__adder",
        children: QJ
    });
    return L("div", {
        className: xe("library-unit", {
            "library-unit__active": t,
            "library-unit--hover": t && u,
            "library-unit--selected": i,
            "library-unit--skeleton": !c
        }),
        onMouseEnter: ()=>f(!0),
        onMouseLeave: ()=>f(!1),
        children: [g("div", {
            className: xe("library-unit__dragger", {
                "library-unit__pulse": !!n
            }),
            ref: l,
            draggable: !!t,
            onClick: t || n ? v=>{
                e && v.shiftKey ? o(e, v) : r(e)
            }
            : void 0,
            onDragStart: v=>{
                if (!e) {
                    v.preventDefault();
                    return
                }
                f(!1),
                s(e, v)
            }
        }), m, e && t && (u || h || i) && g(Ey, {
            checked: i,
            onChange: (v,y)=>o(e, y),
            className: "library-unit__checkbox"
        })]
    })
}
)
  , _he = ()=>g("div", {
    className: "library-unit library-unit--skeleton"
});
function xhe() {
    return [!1, T.useCallback(t=>t(), [])]
}
const She = ve.useTransition || xhe
  , nM = ({children: e})=>g("div", {
    className: "library-menu-items-container__grid",
    children: e
})
  , Eb = T.memo(({items: e, onItemSelectToggle: t, onItemDrag: n, isItemSelected: r, onClick: i, svgCache: o, itemsRenderedPerBatch: s})=>{
    const [,a] = She()
      , [l,c] = T.useState(0);
    return T.useEffect(()=>{
        l < e.length && a(()=>{
            c(l + s)
        }
        )
    }
    , [l, e.length, a, s]),
    g(Se, {
        children: e.map((u,f)=>f < l ? g(bhe, {
            elements: u == null ? void 0 : u.elements,
            isPending: !(u != null && u.id) && !!(u != null && u.elements),
            onClick: i,
            svgCache: o,
            id: u == null ? void 0 : u.id,
            selected: r(u.id),
            onToggle: t,
            onDrag: n
        }, (u == null ? void 0 : u.id) ?? f) : g(_he, {}, f))
    })
}
)
  , Ihe = mn(0)
  , Che = e=>{
    const [t,n] = Ot(Ihe);
    return T.useEffect(()=>{
        const {current: r} = e;
        if (!r)
            return;
        const i = ca(()=>{
            const {scrollTop: o} = r;
            n(o)
        }
        , 200);
        return r.addEventListener("scroll", i),
        ()=>{
            i.cancel(),
            r.removeEventListener("scroll", i)
        }
    }
    , [e, n]),
    t
}
  , khe = 17
  , The = 64;
function Ahe({isLoading: e, libraryItems: t, onAddToLibrary: n, onInsertLibraryItems: r, pendingElements: i, theme: o, id: s, libraryReturnUrl: a, onSelectItems: l, selectedItems: c}) {
    const u = T.useRef(null)
      , f = Che(u);
    T.useEffect(()=>{
        var N;
        f > 0 && ((N = u.current) == null || N.scrollTo(0, f))
    }
    , []);
    const {svgCache: h} = cB()
      , m = T.useMemo(()=>t.filter(N=>N.status !== "published"), [t])
      , v = T.useMemo(()=>t.filter(N=>N.status === "published"), [t])
      , y = !t.length && !i.length
      , E = !i.length && !m.length && !v.length
      , [b,_] = T.useState(null)
      , x = T.useCallback((N,$)=>{
        const V = !c.includes(N)
          , z = [...m, ...v];
        if (V) {
            if ($.shiftKey && b) {
                const j = z.findIndex(q=>q.id === b)
                  , re = z.findIndex(q=>q.id === N);
                if (j === -1 || re === -1) {
                    l([...c, N]);
                    return
                }
                const se = De(c)
                  , ae = z.reduce((q,K,G)=>((G >= j && G <= re || se.has(K.id)) && q.push(K.id),
                q), []);
                l(ae)
            } else
                l([...c, N]);
            _(N)
        } else
            _(null),
            l(c.filter(j=>j !== N))
    }
    , [b, l, v, c, m])
      , C = T.useCallback(N=>{
        let $;
        return c.includes(N) ? $ = t.filter(V=>c.includes(V.id)) : $ = t.filter(V=>V.id === N),
        $.map(V=>({
            ...V,
            elements: xO(V.elements, {
                randomizeSeed: !0
            })
        }))
    }
    , [t, c])
      , P = T.useCallback((N,$)=>{
        $.dataTransfer.setData(Re.excalidrawlib, D9(C(N)))
    }
    , [C])
      , M = T.useCallback(N=>N ? c.includes(N) : !1, [c])
      , A = T.useCallback(()=>{
        n(i)
    }
    , [i, n])
      , I = T.useCallback(N=>{
        N && r(C(N))
    }
    , [C, r])
      , O = h.size >= t.length ? The : khe;
    return L("div", {
        className: "library-menu-items-container",
        style: i.length || m.length || v.length ? {
            justifyContent: "flex-start"
        } : {
            borderBottom: 0
        },
        children: [!E && g(tM, {
            selectedItems: c,
            onSelectItems: l,
            className: "library-menu-dropdown-container--in-heading"
        }), L(io.Col, {
            className: "library-menu-items-container__items",
            align: "start",
            gap: 1,
            style: {
                flex: v.length > 0 ? 1 : "0 1 auto",
                marginBottom: 0
            },
            ref: u,
            children: [L(Se, {
                children: [!E && g("div", {
                    className: "library-menu-items-container__header",
                    children: k("labels.personalLib")
                }), e && g("div", {
                    style: {
                        position: "absolute",
                        top: "var(--container-padding-y)",
                        right: "var(--container-padding-x)",
                        transform: "translateY(50%)"
                    },
                    children: g(Ta, {})
                }), !i.length && !m.length ? L("div", {
                    className: "library-menu-items__no-items",
                    children: [g("div", {
                        className: "library-menu-items__no-items__label",
                        children: k("library.noItems")
                    }), g("div", {
                        className: "library-menu-items__no-items__hint",
                        children: v.length > 0 ? k("library.hint_emptyPrivateLibrary") : k("library.hint_emptyLibrary")
                    })]
                }) : L(nM, {
                    children: [i.length > 0 && g(Eb, {
                        itemsRenderedPerBatch: O,
                        items: [{
                            id: null,
                            elements: i
                        }],
                        onItemSelectToggle: x,
                        onItemDrag: P,
                        onClick: A,
                        isItemSelected: M,
                        svgCache: h
                    }), g(Eb, {
                        itemsRenderedPerBatch: O,
                        items: m,
                        onItemSelectToggle: x,
                        onItemDrag: P,
                        onClick: I,
                        isItemSelected: M,
                        svgCache: h
                    })]
                })]
            }), L(Se, {
                children: [(v.length > 0 || i.length > 0 || m.length > 0) && g("div", {
                    className: "library-menu-items-container__header library-menu-items-container__header--excal",
                    children: k("labels.excalidrawLib")
                }), v.length > 0 ? g(nM, {
                    children: g(Eb, {
                        itemsRenderedPerBatch: O,
                        items: v,
                        onItemSelectToggle: x,
                        onItemDrag: P,
                        onClick: I,
                        isItemSelected: M,
                        svgCache: h
                    })
                }) : m.length > 0 ? g("div", {
                    style: {
                        margin: "1rem 0",
                        display: "flex",
                        flexDirection: "column",
                        alignItems: "center",
                        justifyContent: "center",
                        width: "100%",
                        fontSize: ".9rem"
                    },
                    children: k("library.noItems")
                }) : null]
            }), y && g(hB, {
                style: {
                    padding: "16px 0",
                    width: "100%"
                },
                id: s,
                libraryReturnUrl: a,
                theme: o,
                children: g(tM, {
                    selectedItems: c,
                    onSelectItems: l
                })
            })]
        })]
    })
}
const V4 = mn(!1)
  , rM = ({children: e})=>g("div", {
    className: "layer-ui__library",
    children: e
})
  , Mhe = ({onInsertLibraryItems: e, pendingElements: t, onAddToLibrary: n, setAppState: r, libraryReturnUrl: i, library: o, id: s, theme: a, selectedItems: l, onSelectItems: c})=>{
    const [u] = Ot(_p, cr)
      , f = T.useCallback(v=>{
        (async(E,b)=>{
            at("element", "addToLibrary", "ui");
            for (const x of XP)
                if (E.some(C=>C.type === x))
                    return r({
                        errorMessage: k(`errors.libraryElementTypeError.${x}`)
                    });
            const _ = [{
                status: "unpublished",
                elements: E,
                id: po(),
                created: Date.now()
            }, ...b];
            n(),
            o.setLibrary(_).catch(()=>{
                r({
                    errorMessage: k("alerts.errorAddingToLibrary")
                })
            }
            )
        }
        )(v, u.libraryItems)
    }
    , [n, o, r, u.libraryItems])
      , h = T.useMemo(()=>u.libraryItems, [u]);
    if (u.status === "loading" && !u.isInitialized)
        return g(rM, {
            children: g("div", {
                className: "layer-ui__library-message",
                children: L("div", {
                    children: [g(Ta, {
                        size: "2em"
                    }), g("span", {
                        children: k("labels.libraryLoadingMessage")
                    })]
                })
            })
        });
    const m = u.libraryItems.length > 0 || t.length > 0;
    return L(rM, {
        children: [g(Ahe, {
            isLoading: u.status === "loading",
            libraryItems: h,
            onAddToLibrary: f,
            onInsertLibraryItems: e,
            pendingElements: t,
            id: s,
            libraryReturnUrl: i,
            theme: a,
            onSelectItems: c,
            selectedItems: l
        }), m && g(hB, {
            className: "library-menu-control-buttons--at-bottom",
            style: {
                padding: "16px 12px 0 12px"
            },
            id: s,
            libraryReturnUrl: i,
            theme: a
        })]
    })
}
  , Lhe = (e,t)=>{
    const n = ()=>dt(t, e, {
        includeBoundTextElement: !0,
        includeElementsInFrames: !0
    })
      , r = T.useRef(n())
      , i = T.useRef(e)
      , o = T.useRef(t);
    return (!Xn(e.selectedElementIds, i.current.selectedElementIds) || !Xn(t, o.current)) && (r.current = n(),
    i.current = e,
    o.current = t),
    r.current
}
  , Phe = ()=>{
    const {library: e, id: t, onInsertElements: n} = Ba()
      , r = i1()
      , i = Wn()
      , o = Gn()
      , s = Iy()
      , [a,l] = T.useState([])
      , c = T.useMemo(()=>e, [e])
      , u = Lhe(i, s)
      , f = T.useCallback(m=>{
        n(fB(m))
    }
    , [n])
      , h = T.useCallback(()=>{
        o({
            selectedElementIds: {},
            selectedGroupIds: {},
            activeEmbeddable: null
        })
    }
    , [o]);
    return g(Mhe, {
        pendingElements: u,
        onInsertLibraryItems: f,
        onAddToLibrary: h,
        setAppState: o,
        libraryReturnUrl: r.libraryReturnUrl,
        library: c,
        id: t,
        theme: i.theme,
        selectedItems: a,
        onSelectItems: l
    })
}
  , gB = e=>{
    const {onConfirm: t, onCancel: n, children: r, confirmText: i=k("buttons.confirm"), cancelText: o=k("buttons.cancel"), className: s="", ...a} = e
      , l = Gn()
      , c = Lf(V4, cr)
      , {container: u} = Ns();
    return L(mi, {
        onCloseRequest: n,
        size: "small",
        ...a,
        className: `confirm-dialog ${s}`,
        children: [r, L("div", {
            className: "confirm-dialog-buttons",
            children: [g(V2, {
                label: o,
                onClick: ()=>{
                    l({
                        openMenu: null
                    }),
                    c(!1),
                    n(),
                    u == null || u.focus()
                }
            }), g(V2, {
                label: i,
                onClick: ()=>{
                    l({
                        openMenu: null
                    }),
                    c(!1),
                    t(),
                    u == null || u.focus()
                }
                ,
                actionType: "danger"
            })]
        })]
    })
}
  , xy = mn(null)
  , Rhe = ()=>{
    const [e,t] = Ot(xy, cr)
      , n = zi();
    return e && e === "clearCanvas" ? g(gB, {
        onConfirm: ()=>{
            n.executeAction(Cg),
            t(null)
        }
        ,
        onCancel: ()=>t(null),
        title: k("clearCanvasDialog.title"),
        children: L("p", {
            className: "clear-canvas__content",
            children: [" ", k("alerts.clearReset")]
        })
    }) : null
}
  , Dhe = {
    ...G2,
    category: "App",
    label: "Toggle theme",
    perform: ({actionManager: e})=>{
        e.executeAction(G2, "commandPalette")
    }
}
  , Ohe = Object.freeze(Object.defineProperty({
    __proto__: null,
    toggleTheme: Dhe
}, Symbol.toStringTag, {
    value: "Module"
}))
  , Nhe = mn(null)
  , Et = {
    app: "App",
    export: "Export",
    tools: "Tools",
    editor: "Editor",
    elements: "Elements",
    links: "Links"
}
  , Fhe = e=>{
    switch (e) {
    case Et.app:
        return 1;
    case Et.export:
        return 2;
    case Et.editor:
        return 3;
    case Et.tools:
        return 4;
    case Et.elements:
        return 5;
    case Et.links:
        return 6;
    default:
        return 10
    }
}
  , km = ({shortcut: e, className: t, children: n})=>{
    const r = e.replace("++", "+$").split("+");
    return L("div", {
        className: xe("shortcut", t),
        children: [r.map((i,o)=>g("div", {
            className: "shortcut-wrapper",
            children: g("div", {
                className: "shortcut-key",
                children: i === "$" ? "+" : i
            })
        }, i)), g("div", {
            className: "shortcut-desc",
            children: n
        })]
    })
}
  , pB = e=>!e.altKey && e[U.CTRL_OR_CMD] && (e.shiftKey && e.key.toLowerCase() === U.P || e.key === U.SLASH)
  , iM = Object.assign(e=>{
    var r;
    const t = Wn()
      , n = Gn();
    return T.useEffect(()=>{
        const i = o=>{
            pB(o) && (o.preventDefault(),
            o.stopPropagation(),
            n(s=>{
                var l;
                const a = ((l = s.openDialog) == null ? void 0 : l.name) === "commandPalette" ? null : {
                    name: "commandPalette"
                };
                return a && at("command_palette", "open", "shortcut"),
                {
                    openDialog: a
                }
            }
            ))
        }
        ;
        return window.addEventListener(ce.KEYDOWN, i, {
            capture: !0
        }),
        ()=>window.removeEventListener(ce.KEYDOWN, i, {
            capture: !0
        })
    }
    , [n]),
    ((r = t.openDialog) == null ? void 0 : r.name) !== "commandPalette" ? null : g(Bhe, {
        ...e
    })
}
, {
    defaultItems: Ohe
});
function Bhe({customCommandPaletteItems: e}) {
    const t = Ba()
      , n = Wn()
      , r = Gn()
      , i = i1()
      , o = zi()
      , [s,a] = Ot(Nhe)
      , [l,c] = T.useState(null)
      , u = T.useRef(null)
      , f = z4({
        uiAppState: n,
        customCommandPaletteItems: e,
        appProps: i
    });
    T.useEffect(()=>{
        const {uiAppState: M, customCommandPaletteItems: A, appProps: I} = f
          , O = z=>{
            let j = "";
            return z.label && (typeof z.label == "function" ? j = k(z.label(t.scene.getNonDeletedElements(), M, t)) : j = k(z.label)),
            j
        }
          , N = z=>typeof z.icon == "function" ? z.icon(M, t.scene.getNonDeletedElements()) : z.icon;
        let $ = [];
        const V = (z,j,re)=>{
            const se = {
                label: O(z),
                icon: N(z),
                category: j,
                shortcut: gi(z.name),
                keywords: z.keywords,
                predicate: z.predicate,
                viewMode: z.viewMode,
                perform: ()=>{
                    o.executeAction(z, "commandPalette")
                }
            };
            return re ? re(se, z) : se
        }
        ;
        if (M && t.scene && o) {
            const z = [o.actions.group, o.actions.ungroup, o.actions.cut, o.actions.copy, o.actions.deleteSelectedElements, o.actions.copyStyles, o.actions.pasteStyles, o.actions.bringToFront, o.actions.bringForward, o.actions.sendBackward, o.actions.sendToBack, o.actions.alignTop, o.actions.alignBottom, o.actions.alignLeft, o.actions.alignRight, o.actions.alignVerticallyCentered, o.actions.alignHorizontallyCentered, o.actions.duplicateSelection, o.actions.flipHorizontal, o.actions.flipVertical, o.actions.zoomToFitSelection, o.actions.zoomToFitSelectionInViewport, o.actions.increaseFontSize, o.actions.decreaseFontSize, o.actions.toggleLinearEditor, jF].map(K=>V(K, Et.elements, (G,H)=>({
                ...G,
                predicate: H.predicate ? H.predicate : (J,te,oe,de)=>dt(J, te).length > 0
            })))
              , j = [o.actions.toggleHandTool, o.actions.setFrameAsActiveTool].map(K=>V(K, Et.tools))
              , re = [o.actions.undo, o.actions.redo, o.actions.zoomIn, o.actions.zoomOut, o.actions.resetZoom, o.actions.zoomToFit, o.actions.zenMode, o.actions.viewMode, o.actions.gridMode, o.actions.objectsSnapMode, o.actions.toggleShortcuts, o.actions.selectAll, o.actions.toggleElementLock, o.actions.unlockAllElements, o.actions.stats].map(K=>V(K, Et.editor))
              , se = [o.actions.saveToActiveFile, o.actions.saveFileToDisk, o.actions.copyAsPng, o.actions.copyAsSvg].map(K=>V(K, Et.export));
            $ = [...z, ...re, {
                label: O(Cg),
                icon: N(Cg),
                shortcut: gi(Cg.name),
                category: Et.editor,
                keywords: ["delete", "destroy"],
                viewMode: !1,
                perform: ()=>{
                    Ss.set(xy, "clearCanvas")
                }
            }, {
                label: k("buttons.exportImage"),
                category: Et.export,
                icon: AD,
                shortcut: gi("imageExport"),
                keywords: ["export", "image", "png", "jpeg", "svg", "clipboard", "picture"],
                perform: ()=>{
                    r({
                        openDialog: {
                            name: "imageExport"
                        }
                    })
                }
            }, ...se];
            const ae = [{
                label: k("toolBar.library"),
                category: Et.app,
                icon: SD,
                viewMode: !1,
                perform: ()=>{
                    M.openSidebar ? r({
                        openSidebar: null
                    }) : r({
                        openSidebar: {
                            name: Ll.name,
                            tab: Ll.defaultTab
                        }
                    })
                }
            }, {
                label: k("labels.changeStroke"),
                keywords: ["color", "outline"],
                category: Et.elements,
                icon: RE,
                viewMode: !1,
                predicate: (K,G)=>{
                    const H = dt(K, G);
                    return H.length > 0 && iB(G, H)
                }
                ,
                perform: ()=>{
                    r(K=>({
                        openMenu: K.openMenu === "shape" ? null : "shape",
                        openPopup: "elementStroke"
                    }))
                }
            }, {
                label: k("labels.changeBackground"),
                keywords: ["color", "fill"],
                icon: RE,
                category: Et.elements,
                viewMode: !1,
                predicate: (K,G)=>{
                    const H = dt(K, G);
                    return H.length > 0 && oB(G, H)
                }
                ,
                perform: ()=>{
                    r(K=>({
                        openMenu: K.openMenu === "shape" ? null : "shape",
                        openPopup: "elementBackground"
                    }))
                }
            }, {
                label: k("labels.canvasBackground"),
                keywords: ["color"],
                icon: RE,
                category: Et.editor,
                viewMode: !1,
                perform: ()=>{
                    r(K=>({
                        openMenu: K.openMenu === "canvas" ? null : "canvas",
                        openPopup: "canvasBackground"
                    }))
                }
            }, ...q6.reduce((K,G)=>{
                var tt;
                const {value: H, icon: J, key: te, numericKey: oe} = G;
                if (((tt = I.UIOptions.tools) == null ? void 0 : tt[H]) === !1)
                    return K;
                const pe = te && hg(typeof te == "string" ? te : te[0]) || oe
                  , be = {
                    label: k(`toolBar.${H}`),
                    category: Et.tools,
                    shortcut: pe,
                    icon: J,
                    keywords: ["toolbar"],
                    viewMode: !1,
                    perform: ({event: Je})=>{
                        H === "image" ? t.setActiveTool({
                            type: H,
                            insertOnCanvasDirectly: Je.type === ce.KEYDOWN
                        }) : t.setActiveTool({
                            type: H
                        })
                    }
                };
                return K.push(be),
                K
            }
            , []), ...j, {
                label: k("toolBar.lock"),
                category: Et.tools,
                icon: M.activeTool.locked ? P6 : Ov,
                shortcut: U.Q.toLocaleUpperCase(),
                viewMode: !1,
                perform: ()=>{
                    t.toggleLock()
                }
            }, {
                label: `${k("labels.textToDiagram")}...`,
                category: Et.tools,
                icon: wte,
                viewMode: !1,
                predicate: I.aiEnabled,
                perform: ()=>{
                    r(K=>({
                        ...K,
                        openDialog: {
                            name: "ttd",
                            tab: "text-to-diagram"
                        }
                    }))
                }
            }, {
                label: `${k("toolBar.mermaidToExcalidraw")}...`,
                category: Et.tools,
                icon: FD,
                viewMode: !1,
                predicate: I.aiEnabled,
                perform: ()=>{
                    r(K=>({
                        ...K,
                        openDialog: {
                            name: "ttd",
                            tab: "mermaid"
                        }
                    }))
                }
            }]
              , q = [...$, ...ae, ...A || []].map(K=>{
                var G;
                return {
                    ...K,
                    icon: K.icon || $D,
                    order: K.order ?? Fhe(K.category),
                    haystack: `${VA(K.label.toLocaleLowerCase())} ${((G = K.keywords) == null ? void 0 : G.join(" ")) || ""}`
                }
            }
            );
            c(q),
            a(q.find(K=>K.label === (s == null ? void 0 : s.label)) ?? null)
        }
    }
    , [f, t, o, c, s == null ? void 0 : s.label, a, r]);
    const [h,m] = T.useState("")
      , [v,y] = T.useState(null)
      , [E,b] = T.useState({})
      , _ = M=>{
        r({
            openDialog: null
        }, M),
        m("")
    }
      , x = (M,A)=>{
        var I;
        ((I = n.openDialog) == null ? void 0 : I.name) === "commandPalette" && (A.stopPropagation(),
        A.preventDefault(),
        document.body.classList.add("excalidraw-animations-disabled"),
        _(()=>{
            M.perform({
                actionManager: o,
                event: A
            }),
            a(M),
            requestAnimationFrame(()=>{
                document.body.classList.remove("excalidraw-animations-disabled")
            }
            )
        }
        ))
    }
      , C = QA(M=>M.viewMode === !1 && n.viewModeEnabled ? !1 : typeof M.predicate == "function" ? M.predicate(t.scene.getNonDeletedElements(), n, i, t) : M.predicate === void 0 || M.predicate)
      , P = QA(M=>{
        var N;
        const A = Cc(M.target) || pB(M) || M.key === U.ESCAPE;
        if (A && M.key !== U.ARROW_UP && M.key !== U.ARROW_DOWN && M.key !== U.ENTER)
            return;
        const I = Object.values(E).flat()
          , O = s && !h && C(s);
        if (M.key === U.ARROW_UP) {
            M.preventDefault();
            const $ = I.findIndex(j=>j.label === (v == null ? void 0 : v.label));
            if (O) {
                if ($ === 0) {
                    y(s);
                    return
                }
                if (v === s) {
                    const j = I[I.length - 1];
                    j && y(j);
                    return
                }
            }
            let V;
            $ === -1 ? V = I.length - 1 : V = $ === 0 ? I.length - 1 : ($ - 1) % I.length;
            const z = I[V];
            z && y(z);
            return
        }
        if (M.key === U.ARROW_DOWN) {
            M.preventDefault();
            const $ = I.findIndex(j=>j.label === (v == null ? void 0 : v.label));
            if (O) {
                if (!v || $ === I.length - 1) {
                    y(s);
                    return
                }
                if (v === s) {
                    const j = I[0];
                    j && y(j);
                    return
                }
            }
            const V = ($ + 1) % I.length
              , z = I[V];
            z && y(z);
            return
        }
        if (M.key === U.ENTER && v && setTimeout(()=>{
            x(v, M)
        }
        ),
        !A) {
            if (M.stopPropagation(),
            /^[a-zA-Z0-9]$/.test(M.key)) {
                (N = u == null ? void 0 : u.current) == null || N.focus();
                return
            }
            M.preventDefault()
        }
    }
    );
    return T.useEffect(()=>(window.addEventListener(ce.KEYDOWN, P, {
        capture: !0
    }),
    ()=>window.removeEventListener(ce.KEYDOWN, P, {
        capture: !0
    })), [P]),
    T.useEffect(()=>{
        if (!l)
            return;
        const M = N=>{
            const $ = {};
            for (const V of N)
                $[V.category] ? $[V.category].push(V) : $[V.category] = [V];
            return $
        }
        ;
        let A = l.filter(C).sort((N,$)=>N.order - $.order);
        const I = !h && s && C(s);
        if (!h) {
            b(M(I ? A.filter(N=>N.label !== (s == null ? void 0 : s.label)) : A)),
            y(I ? s : A[0] || null);
            return
        }
        const O = VA(h.toLocaleLowerCase().replace(/[<>_| -]/g, ""));
        A = ffe.filter(O, A, {
            extract: N=>N.haystack
        }).sort((N,$)=>$.score - N.score).map(N=>N.original),
        b(M(A)),
        y(A[0] ?? null)
    }
    , [h, l, C, s]),
    L(mi, {
        onCloseRequest: ()=>_(),
        closeOnClickOutside: !0,
        title: !1,
        size: 720,
        autofocus: !0,
        className: "command-palette-dialog",
        children: [g(bp, {
            value: h,
            placeholder: k("commandPalette.search.placeholder"),
            onChange: M=>{
                m(M)
            }
            ,
            selectOnRender: !0,
            ref: u
        }), !t.device.viewport.isMobile && L("div", {
            className: "shortcuts-wrapper",
            children: [g(km, {
                shortcut: "↑↓",
                children: k("commandPalette.shortcuts.select")
            }), g(km, {
                shortcut: "↵",
                children: k("commandPalette.shortcuts.confirm")
            }), g(km, {
                shortcut: ie("Esc"),
                children: k("commandPalette.shortcuts.close")
            })]
        }), L("div", {
            className: "commands",
            children: [s && !h && L("div", {
                className: "command-category",
                children: [L("div", {
                    className: "command-category-title",
                    children: [k("commandPalette.recents"), g("div", {
                        className: "icon",
                        style: {
                            marginLeft: "6px"
                        },
                        children: Ete
                    })]
                }), g(oM, {
                    command: s,
                    isSelected: s.label === (v == null ? void 0 : v.label),
                    onClick: M=>x(s, M),
                    disabled: !C(s),
                    onMouseMove: ()=>y(s),
                    showShortcut: !t.device.viewport.isMobile,
                    appState: n
                })]
            }), Object.keys(E).length > 0 ? Object.keys(E).map((M,A)=>L("div", {
                className: "command-category",
                children: [g("div", {
                    className: "command-category-title",
                    children: M
                }), E[M].map(I=>g(oM, {
                    command: I,
                    isSelected: I.label === (v == null ? void 0 : v.label),
                    onClick: O=>x(I, O),
                    onMouseMove: ()=>y(I),
                    showShortcut: !t.device.viewport.isMobile,
                    appState: n
                }, I.label))]
            }, M)) : l ? L("div", {
                className: "no-match",
                children: [g("div", {
                    className: "icon",
                    children: zD
                }), " ", k("commandPalette.search.noMatch")]
            }) : null]
        })]
    })
}
const oM = ({command: e, isSelected: t, disabled: n, onMouseMove: r, onClick: i, showShortcut: o, appState: s})=>{
    const a = ()=>{}
    ;
    return L("div", {
        className: xe("command-item", {
            "item-selected": t,
            "item-disabled": n
        }),
        ref: l=>{
            var c;
            t && !n && ((c = l == null ? void 0 : l.scrollIntoView) == null || c.call(l, {
                block: "nearest"
            }))
        }
        ,
        onClick: n ? a : i,
        onMouseMove: n ? a : r,
        title: n ? k("commandPalette.itemNotAvailable") : "",
        children: [L("div", {
            className: "name",
            children: [e.icon && g(eu, {
                icon: typeof e.icon == "function" ? e.icon(s) : e.icon
            }), e.label]
        }), o && e.shortcut && g(km, {
            shortcut: e.shortcut
        })]
    })
}
  , zhe = we({
    name: "toggleLinearEditor",
    category: Et.elements,
    label: (e,t,n)=>{
        const r = n.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds
        })[0];
        return (r == null ? void 0 : r.type) === "arrow" ? "labels.lineEditor.editArrow" : "labels.lineEditor.edit"
    }
    ,
    keywords: ["line"],
    trackEvent: {
        category: "element"
    },
    predicate: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t);
        return !!(!t.editingLinearElement && i.length === 1 && je(i[0]) && !He(i[0]))
    }
    ,
    perform(e, t, n, r) {
        var s;
        const i = r.scene.getSelectedElements({
            selectedElementIds: t.selectedElementIds,
            includeBoundTextElement: !0
        })[0]
          , o = ((s = t.editingLinearElement) == null ? void 0 : s.elementId) === i.id ? null : new ke(i);
        return {
            appState: {
                ...t,
                editingLinearElement: o
            },
            storeAction: ee.CAPTURE
        }
    },
    PanelComponent: ({appState: e, updateData: t, app: n})=>{
        const r = n.scene.getSelectedElements({
            selectedElementIds: e.selectedElementIds
        })[0]
          , i = k(r.type === "arrow" ? "labels.lineEditor.editArrow" : "labels.lineEditor.edit");
        return g(lt, {
            type: "button",
            icon: Rte,
            title: i,
            "aria-label": i,
            onClick: ()=>t(null)
        })
    }
});
class j2 {
    constructor(t=!0, n=!0) {
        this.isUndoStackEmpty = t,
        this.isRedoStackEmpty = n
    }
}
class Hc {
    constructor() {
        D(this, "onHistoryChangedEmitter", new hs);
        D(this, "undoStack", []);
        D(this, "redoStack", [])
    }
    get isUndoStackEmpty() {
        return this.undoStack.length === 0
    }
    get isRedoStackEmpty() {
        return this.redoStack.length === 0
    }
    clear() {
        this.undoStack.length = 0,
        this.redoStack.length = 0
    }
    record(t, n) {
        const r = Mg.create(n, t);
        r.isEmpty() || (this.undoStack.push(r.inverse()),
        r.elementsChange.isEmpty() || (this.redoStack.length = 0),
        this.onHistoryChangedEmitter.trigger(new j2(this.isUndoStackEmpty,this.isRedoStackEmpty)))
    }
    undo(t, n, r) {
        return this.perform(t, n, r, ()=>Hc.pop(this.undoStack), i=>Hc.push(this.redoStack, i, t))
    }
    redo(t, n, r) {
        return this.perform(t, n, r, ()=>Hc.pop(this.redoStack), i=>Hc.push(this.undoStack, i, t))
    }
    perform(t, n, r, i, o) {
        try {
            let s = i();
            if (s === null)
                return;
            let a = t
              , l = n
              , c = !1;
            for (; s; ) {
                try {
                    [a,l,c] = s.applyTo(a, l, r)
                } finally {
                    o(s)
                }
                if (c)
                    break;
                s = i()
            }
            return [a, l]
        } finally {
            this.onHistoryChangedEmitter.trigger(new j2(this.isUndoStackEmpty,this.isRedoStackEmpty))
        }
    }
    static pop(t) {
        if (!t.length)
            return null;
        const n = t.pop();
        return n !== void 0 ? n : null
    }
    static push(t, n, r) {
        const i = n.inverse().applyLatestChanges(r);
        return t.push(i)
    }
}
class Mg {
    constructor(t, n) {
        this.appStateChange = t,
        this.elementsChange = n
    }
    static create(t, n) {
        return new Mg(t,n)
    }
    inverse() {
        return new Mg(this.appStateChange.inverse(),this.elementsChange.inverse())
    }
    applyTo(t, n, r) {
        const [i,o] = this.elementsChange.applyTo(t, r.elements)
          , [s,a] = this.appStateChange.applyTo(n, i);
        return [i, s, o || a]
    }
    applyLatestChanges(t) {
        const n = this.elementsChange.applyLatestChanges(t);
        return Mg.create(this.appStateChange, n)
    }
    isEmpty() {
        return this.appStateChange.isEmpty() && this.elementsChange.isEmpty()
    }
}
const mB = (e,t)=>{
    const [n,r] = T.useState(t);
    return T.useEffect(()=>{
        const i = e.on(o=>{
            r(o)
        }
        );
        return ()=>{
            i()
        }
    }
    , [e]),
    n
}
  , vB = (e,t,n)=>{
    if (!t.multiElement && !t.resizingElement && !t.editingElement && !t.newElement && !t.selectedElementsAreBeingDragged && !t.selectionElement && !e.flowChartCreator.isCreatingChart) {
        const r = n();
        if (!r)
            return {
                storeAction: ee.NONE
            };
        const [i,o] = r
          , s = Array.from(i.values());
        return {
            appState: o,
            elements: s,
            storeAction: ee.UPDATE
        }
    }
    return {
        storeAction: ee.NONE
    }
}
  , $he = (e,t)=>({
    name: "undo",
    label: "buttons.undo",
    icon: Zk,
    trackEvent: {
        category: "history"
    },
    viewMode: !1,
    perform: (n,r,i,o)=>vB(o, r, ()=>e.undo(De(n), r, t.snapshot)),
    keyTest: n=>n[U.CTRL_OR_CMD] && n.key.toLowerCase() === U.Z && !n.shiftKey,
    PanelComponent: ({updateData: n, data: r})=>{
        const {isUndoStackEmpty: i} = mB(e.onHistoryChangedEmitter, new j2(e.isUndoStackEmpty,e.isRedoStackEmpty));
        return g(lt, {
            type: "button",
            icon: Zk,
            "aria-label": k("buttons.undo"),
            onClick: n,
            size: (r == null ? void 0 : r.size) || "medium",
            disabled: i,
            "data-testid": "button-undo"
        })
    }
})
  , Uhe = (e,t)=>({
    name: "redo",
    label: "buttons.redo",
    icon: qk,
    trackEvent: {
        category: "history"
    },
    viewMode: !1,
    perform: (n,r,i,o)=>vB(o, r, ()=>e.redo(De(n), r, t.snapshot)),
    keyTest: n=>n[U.CTRL_OR_CMD] && n.shiftKey && n.key.toLowerCase() === U.Z || zP && n.ctrlKey && !n.shiftKey && n.key === U.Y,
    PanelComponent: ({updateData: n, data: r})=>{
        const {isRedoStackEmpty: i} = mB(e.onHistoryChangedEmitter, new j2(e.isUndoStackEmpty,e.isRedoStackEmpty));
        return g(lt, {
            type: "button",
            icon: qk,
            "aria-label": k("buttons.redo"),
            onClick: n,
            size: (r == null ? void 0 : r.size) || "medium",
            disabled: i,
            "data-testid": "button-redo"
        })
    }
})
  , bb = (e,t,n,r,i,o)=>{
    if (e.trackEvent)
        try {
            typeof e.trackEvent == "object" && (!e.trackEvent.predicate || e.trackEvent.predicate(n, r, o)) && at(e.trackEvent.category, e.trackEvent.action || e.name, `${t} (${i.device.editor.isMobile ? "mobile" : "desktop"})`)
        } catch (s) {
            console.error("error while logging action:", s)
        }
}
;
class Hhe {
    constructor(t, n, r, i) {
        D(this, "actions", {});
        D(this, "updater");
        D(this, "getAppState");
        D(this, "getElementsIncludingDeleted");
        D(this, "app");
        D(this, "renderAction", (t,n)=>{
            const r = this.app.props.UIOptions.canvasActions;
            if (this.actions[t] && "PanelComponent"in this.actions[t] && (!(t in r) || r[t])) {
                const i = this.actions[t]
                  , o = i.PanelComponent;
                o.displayName = "PanelComponent";
                const s = this.getElementsIncludingDeleted()
                  , a = this.getAppState()
                  , l = c=>{
                    bb(i, "ui", a, s, this.app, c),
                    this.updater(i.perform(this.getElementsIncludingDeleted(), this.getAppState(), c, this.app))
                }
                ;
                return g(o, {
                    elements: this.getElementsIncludingDeleted(),
                    appState: this.getAppState(),
                    updateData: l,
                    appProps: this.app.props,
                    app: this.app,
                    data: n
                })
            }
            return null
        }
        );
        D(this, "isActionEnabled", t=>{
            const n = this.getElementsIncludingDeleted()
              , r = this.getAppState();
            return !t.predicate || t.predicate(n, r, this.app.props, this.app)
        }
        );
        this.updater = o=>{
            if ($p(o))
                o.then(s=>t(s));
            else
                return t(o)
        }
        ,
        this.getAppState = n,
        this.getElementsIncludingDeleted = r,
        this.app = i
    }
    registerAction(t) {
        this.actions[t.name] = t
    }
    registerAll(t) {
        t.forEach(n=>this.registerAction(n))
    }
    handleKeyDown(t) {
        const n = this.app.props.UIOptions.canvasActions
          , r = Object.values(this.actions).sort((l,c)=>(c.keyPriority || 0) - (l.keyPriority || 0)).filter(l=>(l.name in n ? n[l.name] : !0) && l.keyTest && l.keyTest(t, this.getAppState(), this.getElementsIncludingDeleted(), this.app));
        if (r.length !== 1)
            return r.length > 1 && console.warn("Canceling as multiple actions match this shortcut", r),
            !1;
        const i = r[0];
        if (this.getAppState().viewModeEnabled && i.viewMode !== !0)
            return !1;
        const o = this.getElementsIncludingDeleted()
          , s = this.getAppState()
          , a = null;
        return bb(i, "keyboard", s, o, this.app, null),
        t.preventDefault(),
        t.stopPropagation(),
        this.updater(r[0].perform(o, s, a, this.app)),
        !0
    }
    executeAction(t, n="api", r=null) {
        const i = this.getElementsIncludingDeleted()
          , o = this.getAppState();
        bb(t, n, o, i, this.app, r),
        this.updater(t.perform(i, o, r, this.app))
    }
}
const sM = e=>{
    const t = Array.from(e.values());
    return {
        x: lM(t, n=>n.x) / t.length,
        y: lM(t, n=>n.y) / t.length
    }
}
  , aM = ([e,t])=>Math.hypot(e.x - t.x, e.y - t.y)
  , lM = (e,t)=>e.reduce((n,r)=>n + t(r), 0)
  , Rr = "separator"
  , Whe = ve.memo(({actionManager: e, items: t, top: n, left: r, onClose: i})=>{
    const o = o1()
      , s = Iy()
      , a = t.reduce((l,c)=>(c && (c === Rr || !c.predicate || c.predicate(s, o, e.app.props, e.app)) && l.push(c),
    l), []);
    return g(kF, {
        onCloseRequest: ()=>{
            i()
        }
        ,
        top: n,
        left: r,
        fitInViewport: !0,
        offsetLeft: o.offsetLeft,
        offsetTop: o.offsetTop,
        viewportWidth: o.width,
        viewportHeight: o.height,
        children: g("ul", {
            className: "context-menu",
            onContextMenu: l=>l.preventDefault(),
            children: a.map((l,c)=>{
                var h;
                if (l === Rr)
                    return !a[c - 1] || a[c - 1] === Rr ? null : g("hr", {
                        className: "context-menu-item-separator"
                    }, c);
                const u = l.name;
                let f = "";
                return l.label && (typeof l.label == "function" ? f = k(l.label(s, o, e.app)) : f = k(l.label)),
                g("li", {
                    "data-testid": u,
                    onClick: ()=>{
                        i(()=>{
                            e.executeAction(l, "contextMenu")
                        }
                        )
                    }
                    ,
                    children: L("button", {
                        type: "button",
                        className: xe("context-menu-item", {
                            dangerous: u === "deleteSelectedElements",
                            checkmark: (h = l.checked) == null ? void 0 : h.call(l, o)
                        }),
                        children: [g("div", {
                            className: "context-menu-item__label",
                            children: f
                        }), g("kbd", {
                            className: "context-menu-item__shortcut",
                            children: u ? gi(u) : ""
                        })]
                    })
                }, c)
            }
            )
        })
    })
}
)
  , yB = function({onChange: e, value: t, choices: n, name: r}) {
    return g("div", {
        className: "RadioGroup",
        children: n.map(i=>L("div", {
            className: xe("RadioGroup__choice", {
                active: i.value === t
            }),
            title: i.ariaLabel,
            children: [g("input", {
                name: r,
                type: "radio",
                checked: i.value === t,
                onChange: ()=>e(i.value),
                "aria-label": i.ariaLabel
            }), i.label]
        }, String(i.value)))
    })
}
  , F0 = ({title: e, name: t, checked: n, onChange: r, disabled: i=!1})=>g("div", {
    className: xe("Switch", {
        toggled: n,
        disabled: i
    }),
    children: g("input", {
        name: t,
        id: t,
        title: e,
        type: "checkbox",
        checked: n,
        disabled: i,
        onChange: ()=>r(!n),
        onKeyDown: o=>{
            o.key === " " && r(!n)
        }
    })
})
  , co = T.forwardRef(({children: e, icon: t, onClick: n, label: r, variant: i="filled", color: o="primary", size: s="medium", fullWidth: a, className: l},c)=>{
    const [u,f] = T.useState(!1)
      , h = async m=>{
        const v = n == null ? void 0 : n(m);
        if ($p(v))
            try {
                f(!0),
                await v
            } catch (y) {
                if (y instanceof df)
                    console.warn(y);
                else
                    throw y
            } finally {
                f(!1)
            }
    }
    ;
    return g("button", {
        className: xe("ExcButton", `ExcButton--color-${o}`, `ExcButton--variant-${i}`, `ExcButton--size-${s}`, {
            "ExcButton--fullWidth": a
        }, l),
        onClick: h,
        type: "button",
        "aria-label": r,
        ref: c,
        disabled: u,
        children: L("div", {
            className: "ExcButton__contents",
            children: [u && g(Ta, {}), t && g("div", {
                className: "ExcButton__icon",
                "aria-hidden": !0,
                children: t
            }), i !== "icon" && (e ?? r)]
        })
    })
}
)
  , Ghe = "filter"in document.createElement("canvas").getContext("2d")
  , Vhe = ()=>L("div", {
    children: [g("h3", {
        children: k("canvasError.cannotShowPreview")
    }), g("p", {
        children: g("span", {
            children: k("canvasError.canvasTooBig")
        })
    }), L("em", {
        children: ["(", k("canvasError.canvasTooBigTip"), ")"]
    })]
})
  , Yhe = ({appStateSnapshot: e, elementsSnapshot: t, files: n, actionManager: r, onExportImage: i, name: o})=>{
    const s = Mn(t, e)
      , [a,l] = T.useState(o)
      , [c,u] = T.useState(s)
      , [f,h] = T.useState(e.exportBackground)
      , [m,v] = T.useState(e.exportWithDarkMode)
      , [y,E] = T.useState(e.exportEmbedScene)
      , [b,_] = T.useState(e.exportScale)
      , x = T.useRef(null)
      , [C,P] = T.useState(null)
      , {exportedElements: M, exportingFrame: A} = yy(t, e, c);
    return T.useEffect(()=>{
        const I = x.current;
        if (!I)
            return;
        const O = I.offsetWidth
          , N = I.offsetHeight;
        O && Jv({
            elements: M,
            appState: {
                ...e,
                name: a,
                exportBackground: f,
                exportWithDarkMode: m,
                exportScale: b,
                exportEmbedScene: y
            },
            files: n,
            exportPadding: Mf,
            maxWidthOrHeight: Math.max(O, N),
            exportingFrame: A
        }).then($=>(P(null),
        dp($).then(()=>{
            I.replaceChildren($)
        }
        ).catch(V=>{
            throw V.name === "CANVAS_POSSIBLY_TOO_BIG" ? new Error(k("canvasError.canvasTooBig")) : V
        }
        ))).catch($=>{
            console.error($),
            P($)
        }
        )
    }
    , [e, n, M, A, a, f, m, b, y]),
    L("div", {
        className: "ImageExportModal",
        children: [g("h3", {
            children: k("imageExportDialog.header")
        }), L("div", {
            className: "ImageExportModal__preview",
            children: [g("div", {
                className: "ImageExportModal__preview__canvas",
                ref: x,
                children: C && g(Vhe, {})
            }), g("div", {
                className: "ImageExportModal__preview__filename",
                children: !Mu && g("input", {
                    type: "text",
                    className: "TextInput",
                    value: a,
                    style: {
                        width: "30ch"
                    },
                    onChange: I=>{
                        l(I.target.value),
                        r.executeAction(Mde, "ui", I.target.value)
                    }
                })
            })]
        }), L("div", {
            className: "ImageExportModal__settings",
            children: [g("h3", {
                children: k("imageExportDialog.header")
            }), s && g(Lh, {
                label: k("imageExportDialog.label.onlySelected"),
                name: "exportOnlySelected",
                children: g(F0, {
                    name: "exportOnlySelected",
                    checked: c,
                    onChange: I=>{
                        u(I)
                    }
                })
            }), g(Lh, {
                label: k("imageExportDialog.label.withBackground"),
                name: "exportBackgroundSwitch",
                children: g(F0, {
                    name: "exportBackgroundSwitch",
                    checked: f,
                    onChange: I=>{
                        h(I),
                        r.executeAction(Pde, "ui", I)
                    }
                })
            }), Ghe && g(Lh, {
                label: k("imageExportDialog.label.darkMode"),
                name: "exportDarkModeSwitch",
                children: g(F0, {
                    name: "exportDarkModeSwitch",
                    checked: m,
                    onChange: I=>{
                        v(I),
                        r.executeAction(Rde, "ui", I)
                    }
                })
            }), g(Lh, {
                label: k("imageExportDialog.label.embedScene"),
                tooltip: k("imageExportDialog.tooltip.embedScene"),
                name: "exportEmbedSwitch",
                children: g(F0, {
                    name: "exportEmbedSwitch",
                    checked: y,
                    onChange: I=>{
                        E(I),
                        r.executeAction(BF, "ui", I)
                    }
                })
            }), g(Lh, {
                label: k("imageExportDialog.label.scale"),
                name: "exportScale",
                children: g(yB, {
                    name: "exportScale",
                    value: b,
                    onChange: I=>{
                        _(I),
                        r.executeAction(Lde, "ui", I)
                    }
                    ,
                    choices: w6.map(I=>({
                        value: I,
                        label: `${I}×`
                    }))
                })
            }), L("div", {
                className: "ImageExportModal__settings__buttons",
                children: [g(co, {
                    className: "ImageExportModal__settings__buttons__button",
                    label: k("imageExportDialog.title.exportToPng"),
                    onClick: ()=>i(IE.png, M, {
                        exportingFrame: A
                    }),
                    icon: dT,
                    children: k("imageExportDialog.button.exportToPng")
                }), g(co, {
                    className: "ImageExportModal__settings__buttons__button",
                    label: k("imageExportDialog.title.exportToSvg"),
                    onClick: ()=>i(IE.svg, M, {
                        exportingFrame: A
                    }),
                    icon: dT,
                    children: k("imageExportDialog.button.exportToSvg")
                }), (f4 || qg) && g(co, {
                    className: "ImageExportModal__settings__buttons__button",
                    label: k("imageExportDialog.title.copyPngToClipboard"),
                    onClick: ()=>i(IE.clipboard, M, {
                        exportingFrame: A
                    }),
                    icon: Bv,
                    children: k("imageExportDialog.button.copyPngToClipboard")
                })]
            })]
        })]
    })
}
  , Lh = ({label: e, children: t, tooltip: n, name: r})=>L("div", {
    className: "ImageExportModal__settings__setting",
    title: e,
    children: [L("label", {
        htmlFor: r,
        className: "ImageExportModal__settings__setting__label",
        children: [e, n && g(Ma, {
            label: n,
            long: !0,
            children: ute
        })]
    }), g("div", {
        className: "ImageExportModal__settings__setting__content",
        children: t
    })]
})
  , jhe = ({elements: e, appState: t, files: n, actionManager: r, onExportImage: i, onCloseRequest: o, name: s})=>{
    const [{appStateSnapshot: a, elementsSnapshot: l}] = T.useState(()=>({
        appStateSnapshot: ha(t),
        elementsSnapshot: ha(e)
    }));
    return g(mi, {
        onCloseRequest: o,
        size: "wide",
        title: !1,
        children: g(Yhe, {
            elementsSnapshot: l,
            appStateSnapshot: a,
            files: n,
            actionManager: r,
            onExportImage: i,
            name: s
        })
    })
}
  , wB = ({children: e, side: t, className: n})=>g("div", {
    className: xe("FixedSideContainer", `FixedSideContainer_side_${t}`, n),
    children: e
})
  , qd = 100
  , Wc = 100
  , cM = e=>{
    switch (e) {
    case U.ARROW_UP:
        return "up";
    case U.ARROW_DOWN:
        return "down";
    case U.ARROW_RIGHT:
        return "right";
    case U.ARROW_LEFT:
        return "left";
    default:
        return "right"
    }
}
  , EB = (e,t,n,r)=>{
    const i = [...n.values()].reduce((o,s)=>{
        var l;
        let a;
        if (He(s) && (a = s[e === "predecessors" ? "startBinding" : "endBinding"]) && ((l = s[e === "predecessors" ? "endBinding" : "startBinding"]) == null ? void 0 : l.elementId) === t.id) {
            const c = n.get(a.elementId);
            if (!c)
                return o;
            Pv(xa(c), "not an ExcalidrawBindableElement");
            const u = e === "predecessors" ? s.points[s.points.length - 1] : [0, 0]
              , f = Q6(t, yl(t), [u[0] + s.x, u[1] + s.y]);
            o.push({
                relative: c,
                heading: f
            })
        }
        return o
    }
    , []);
    switch (r) {
    case "up":
        return i.filter(o=>ua(o.heading, ii)).map(o=>o.relative);
    case "down":
        return i.filter(o=>ua(o.heading, ni)).map(o=>o.relative);
    case "right":
        return i.filter(o=>ua(o.heading, $n)).map(o=>o.relative);
    case "left":
        return i.filter(o=>ua(o.heading, ri)).map(o=>o.relative)
    }
}
  , q_ = (e,t,n)=>EB("successors", e, t, n)
  , Q_ = (e,t,n)=>EB("predecessors", e, t, n)
  , Khe = (e,t,n)=>{
    const r = Wc + e.width;
    if (n === "up" || n === "down") {
        const a = qd + e.height
          , l = e.x
          , c = e.x + e.width;
        if (t.every(u=>u.x + u.width < l || u.x > c))
            return {
                x: 0,
                y: a * (n === "up" ? -1 : 1)
            }
    } else if (n === "right" || n === "left") {
        const a = e.y
          , l = e.y + e.height;
        if (t.every(c=>c.y + c.height < a || c.y > l))
            return {
                x: (Wc + e.width) * (n === "left" ? -1 : 1),
                y: 0
            }
    }
    if (n === "up" || n === "down") {
        const a = qd + e.height
          , l = (t.length === 0,
        a)
          , c = t.length === 0 ? 0 : (t.length + 1) % 2 === 0 ? (t.length + 1) / 2 * r : t.length / 2 * r * -1;
        return n === "up" ? {
            x: c,
            y: l * -1
        } : {
            x: c,
            y: l
        }
    }
    const i = qd + e.height
      , o = (t.length === 0,
    Wc + e.width)
      , s = t.length === 0 ? 0 : (t.length + 1) % 2 === 0 ? (t.length + 1) / 2 * i : t.length / 2 * i * -1;
    return n === "left" ? {
        x: o * -1,
        y: s
    } : {
        x: o,
        y: s
    }
}
  , Xhe = (e,t,n,r)=>{
    const i = q_(e, t, r)
      , o = Q_(e, t, r)
      , s = Khe(e, [...i, ...o], r)
      , a = Sa({
        type: e.type,
        x: e.x + s.x,
        y: e.y + s.y,
        width: e.width,
        height: e.height,
        roundness: e.roundness,
        roughness: e.roughness,
        backgroundColor: e.backgroundColor,
        strokeColor: e.strokeColor,
        strokeWidth: e.strokeWidth
    });
    Pv(Rv(a), "not an ExcalidrawFlowchartNodeElement");
    const l = bB(e, a, t, r, n);
    return {
        nextNode: a,
        bindingArrow: l
    }
}
  , Zhe = (e,t,n,r,i)=>{
    const o = [];
    for (let s = 0; s < i; s++) {
        let a, l;
        if (r === "left" || r === "right") {
            const f = qd * (i - 1) + i * e.height
              , h = e.y + e.height / 2 - f / 2;
            let m = Wc + e.width;
            r === "left" && (m *= -1),
            a = e.x + m;
            const v = (qd + e.height) * s;
            l = h + v
        } else {
            const f = Wc * (i - 1) + i * e.width
              , h = e.x + e.width / 2 - f / 2;
            let m = qd + e.height;
            r === "up" && (m *= -1),
            l = e.y + m;
            const v = (Wc + e.width) * s;
            a = h + v
        }
        const c = Sa({
            type: e.type,
            x: a,
            y: l,
            width: e.width,
            height: e.height,
            roundness: e.roundness,
            roughness: e.roughness,
            backgroundColor: e.backgroundColor,
            strokeColor: e.strokeColor,
            strokeWidth: e.strokeWidth
        });
        Pv(Rv(c), "not an ExcalidrawFlowchartNodeElement");
        const u = bB(e, c, t, r, n);
        o.push(c),
        o.push(u)
    }
    return o
}
  , bB = (e,t,n,r,i)=>{
    let o, s;
    switch (r) {
    case "up":
        {
            o = e.x + e.width / 2,
            s = e.y - 6;
            break
        }
    case "down":
        {
            o = e.x + e.width / 2,
            s = e.y + e.height + 6;
            break
        }
    case "right":
        {
            o = e.x + e.width + 6,
            s = e.y + e.height / 2;
            break
        }
    case "left":
        {
            o = e.x - 6,
            s = e.y + e.height / 2;
            break
        }
    }
    let l, c;
    switch (r) {
    case "up":
        {
            l = t.x + t.width / 2 - o,
            c = t.y + t.height - s + 6;
            break
        }
    case "down":
        {
            l = t.x + t.width / 2 - o,
            c = t.y - s - 6;
            break
        }
    case "right":
        {
            l = t.x - o - 6,
            c = t.y - s + t.height / 2;
            break
        }
    case "left":
        {
            l = t.x + t.width - o + 6,
            c = t.y - s + t.height / 2;
            break
        }
    }
    const u = s4({
        type: "arrow",
        x: o,
        y: s,
        startArrowhead: i.currentItemStartArrowhead,
        endArrowhead: i.currentItemEndArrowhead,
        strokeColor: i.currentItemStrokeColor,
        strokeStyle: i.currentItemStrokeStyle,
        strokeWidth: i.currentItemStrokeWidth,
        points: [[0, 0], [l, c]],
        elbowed: !0
    });
    Ms(u, e, "start", n),
    Ms(u, t, "end", n);
    const f = new Map;
    return f.set(e.id, e),
    f.set(t.id, t),
    f.set(u.id, u),
    ke.movePoints(u, [{
        index: 1,
        point: u.points[1]
    }], n, void 0, {
        changedElements: f
    }),
    u
}
;
class qhe {
    constructor() {
        D(this, "isExploring", !1);
        D(this, "sameLevelNodes", []);
        D(this, "sameLevelIndex", 0);
        D(this, "direction", null);
        D(this, "visitedNodes", new Set)
    }
    clear() {
        this.isExploring = !1,
        this.sameLevelNodes = [],
        this.sameLevelIndex = 0,
        this.direction = null,
        this.visitedNodes.clear()
    }
    exploreByDirection(t, n, r) {
        if (!xa(t))
            return null;
        if (r !== this.direction && this.clear(),
        this.visitedNodes.has(t.id) || this.visitedNodes.add(t.id),
        this.isExploring && r === this.direction && this.sameLevelNodes.length > 1)
            return this.sameLevelIndex = (this.sameLevelIndex + 1) % this.sameLevelNodes.length,
            this.sameLevelNodes[this.sameLevelIndex].id;
        const i = [...q_(t, n, r), ...Q_(t, n, r)];
        if (i.length > 0)
            return this.sameLevelIndex = 0,
            this.isExploring = !0,
            this.sameLevelNodes = i,
            this.direction = r,
            this.visitedNodes.add(i[0].id),
            i[0].id;
        if (r === this.direction || !this.isExploring) {
            this.isExploring || this.visitedNodes.add(t.id);
            const s = ["up", "right", "down", "left"].filter(a=>a !== r).map(a=>[...q_(t, n, a), ...Q_(t, n, a)]).flat().filter(a=>!this.visitedNodes.has(a.id));
            for (const a of s)
                if (!this.visitedNodes.has(a.id))
                    return this.visitedNodes.add(a.id),
                    this.isExploring = !0,
                    this.direction = r,
                    a.id
        }
        return null
    }
}
class Qhe {
    constructor() {
        D(this, "isCreatingChart", !1);
        D(this, "numberOfNodes", 0);
        D(this, "direction", "right");
        D(this, "pendingNodes", null)
    }
    createNodes(t, n, r, i) {
        if (i !== this.direction) {
            const {nextNode: o, bindingArrow: s} = Xhe(t, n, r, i);
            this.numberOfNodes = 1,
            this.isCreatingChart = !0,
            this.direction = i,
            this.pendingNodes = [o, s]
        } else {
            this.numberOfNodes += 1;
            const o = Zhe(t, n, r, i, this.numberOfNodes);
            this.isCreatingChart = !0,
            this.direction = i,
            this.pendingNodes = o
        }
        if (t.frameId) {
            const o = n.get(t.frameId);
            Pv(o && oD(o), "not an ExcalidrawFrameElement"),
            o && this.pendingNodes.every(s=>h4([s], o, n) || Vl(s, o, n)) && (this.pendingNodes = this.pendingNodes.map(s=>ue(s, {
                frameId: t.frameId
            }, !1)))
        }
    }
    clear() {
        this.isCreatingChart = !1,
        this.pendingNodes = null,
        this.direction = null,
        this.numberOfNodes = 0
    }
}
const Jhe = (e,t)=>{
    var n, r;
    for (const [,i] of t)
        if (i.type === "arrow" && (((n = i.startBinding) == null ? void 0 : n.elementId) === e.id || ((r = i.endBinding) == null ? void 0 : r.elementId) === e.id))
            return !0;
    return !1
}
  , ege = 8
  , uM = 99999
  , Sy = e=>ege / e
  , Pr = class Pr {
}
;
D(Pr, "referenceSnapPoints", null),
D(Pr, "visibleGaps", null),
D(Pr, "setReferenceSnapPoints", t=>{
    Pr.referenceSnapPoints = t
}
),
D(Pr, "getReferenceSnapPoints", ()=>Pr.referenceSnapPoints),
D(Pr, "setVisibleGaps", t=>{
    Pr.visibleGaps = t
}
),
D(Pr, "getVisibleGaps", ()=>Pr.visibleGaps),
D(Pr, "destroy", ()=>{
    Pr.referenceSnapPoints = null,
    Pr.visibleGaps = null
}
);
let Do = Pr;
const xp = e=>e.props.gridModeEnabled ?? e.state.gridModeEnabled
  , Xl = ({event: e, app: t, selectedElements: n})=>e ? t.state.objectsSnapModeEnabled && !e[U.CTRL_OR_CMD] || !t.state.objectsSnapModeEnabled && e[U.CTRL_OR_CMD] && !xp(t) : n.length === 1 && n[0].type === "arrow" ? !1 : t.state.objectsSnapModeEnabled
  , tge = (e,t,n=.01)=>Math.abs(e - t) <= n
  , Sp = (e,t,{omitCenter: n, boundingBoxCorners: r, dragOffset: i}={
    omitCenter: !1,
    boundingBoxCorners: !1
})=>{
    let o = [];
    if (e.length === 1) {
        const s = e[0];
        let[a,l,c,u,f,h] = Ke(s, t);
        i && (a += i.x,
        c += i.x,
        f += i.x,
        l += i.y,
        u += i.y,
        h += i.y);
        const m = (c - a) / 2
          , v = (u - l) / 2;
        if ((s.type === "diamond" || s.type === "ellipse") && !r) {
            const y = Ae([a, l + v], [f, h], s.angle)
              , E = Ae([a + m, l], [f, h], s.angle)
              , b = Ae([c, l + v], [f, h], s.angle)
              , _ = Ae([a + m, u], [f, h], s.angle);
            o = n ? [y, E, b, _] : [y, E, b, _, [f, h]]
        } else {
            const y = Ae([a, l], [f, h], s.angle)
              , E = Ae([c, l], [f, h], s.angle)
              , b = Ae([a, u], [f, h], s.angle)
              , _ = Ae([c, u], [f, h], s.angle);
            o = n ? [y, E, b, _] : [y, E, b, _, [f, h]]
        }
    } else if (e.length > 1) {
        const [s,a,l,c] = v4(e, i ?? {
            x: 0,
            y: 0
        })
          , u = l - s
          , f = c - a
          , h = [s, a]
          , m = [l, a]
          , v = [s, c]
          , y = [l, c]
          , E = [s + u / 2, a + f / 2];
        o = n ? [h, m, v, y] : [h, m, v, y, E]
    }
    return o.map(s=>[tn(s[0]), tn(s[1])])
}
  , _B = (e,t,n,r)=>{
    const i = t.filter(o=>Ue(o)).map(o=>o.id);
    return DN(e, t, n, r).filter(o=>!(o.frameId && i.includes(o.frameId)))
}
  , nge = (e,t,n,r)=>{
    const i = _B(e, t, n, r)
      , o = Dv(i, r).filter(f=>!(f.length === 1 && Sn(f[0]))).map(f=>xt(f).map(h=>tn(h)))
      , s = o.sort((f,h)=>f[0] - h[0])
      , a = [];
    let l = 0;
    e: for (let f = 0; f < s.length; f++) {
        const h = s[f];
        for (let m = f + 1; m < s.length; m++) {
            if (++l > uM)
                break e;
            const v = s[m]
              , [,y,E,b] = h
              , [_,x,,C] = v;
            E < _ && R2([y, b], [x, C]) && a.push({
                startBounds: h,
                endBounds: v,
                startSide: [[E, y], [E, b]],
                endSide: [[_, x], [_, C]],
                length: _ - E,
                overlap: D2([y, b], [x, C])
            })
        }
    }
    const c = o.sort((f,h)=>f[1] - h[1])
      , u = [];
    l = 0;
    e: for (let f = 0; f < c.length; f++) {
        const h = c[f];
        for (let m = f + 1; m < c.length; m++) {
            if (++l > uM)
                break e;
            const v = c[m]
              , [y,,E,b] = h
              , [_,x,C] = v;
            b < x && R2([y, E], [_, C]) && u.push({
                startBounds: h,
                endBounds: v,
                startSide: [[y, b], [E, b]],
                endSide: [[_, x], [C, x]],
                length: x - b,
                overlap: D2([y, E], [_, C])
            })
        }
    }
    return {
        horizontalGaps: a,
        verticalGaps: u
    }
}
  , dM = (e,t,n,r,i,o,s)=>{
    if (!Xl({
        app: n,
        event: r,
        selectedElements: e
    }))
        return [];
    if (e.length === 0)
        return [];
    const a = Do.getVisibleGaps();
    if (a) {
        const {horizontalGaps: l, verticalGaps: c} = a
          , [u,f,h,m] = v4(e, t).map(E=>tn(E))
          , v = (u + h) / 2
          , y = (f + m) / 2;
        for (const E of l) {
            if (!R2([f, m], E.overlap))
                continue;
            const b = E.startSide[0][0] + E.length / 2
              , _ = tn(b - v);
            if (E.length > h - u && Math.abs(_) <= s.x) {
                Math.abs(_) < s.x && (i.length = 0),
                s.x = Math.abs(_);
                const N = {
                    type: "gap",
                    direction: "center_horizontal",
                    gap: E,
                    offset: _
                };
                i.push(N);
                continue
            }
            const [,,C] = E.endBounds
              , P = u - C
              , M = tn(E.length - P);
            if (Math.abs(M) <= s.x) {
                Math.abs(M) < s.x && (i.length = 0),
                s.x = Math.abs(M);
                const N = {
                    type: "gap",
                    direction: "side_right",
                    gap: E,
                    offset: M
                };
                i.push(N);
                continue
            }
            const [A,,,] = E.startBounds
              , I = A - h
              , O = tn(I - E.length);
            if (Math.abs(O) <= s.x) {
                Math.abs(O) < s.x && (i.length = 0),
                s.x = Math.abs(O);
                const N = {
                    type: "gap",
                    direction: "side_left",
                    gap: E,
                    offset: O
                };
                i.push(N);
                continue
            }
        }
        for (const E of c) {
            if (!R2([u, h], E.overlap))
                continue;
            const b = E.startSide[0][1] + E.length / 2
              , _ = tn(b - y);
            if (E.length > m - f && Math.abs(_) <= s.y) {
                Math.abs(_) < s.y && (o.length = 0),
                s.y = Math.abs(_);
                const N = {
                    type: "gap",
                    direction: "center_vertical",
                    gap: E,
                    offset: _
                };
                o.push(N);
                continue
            }
            const [,C,,] = E.startBounds
              , P = C - m
              , M = tn(P - E.length);
            if (Math.abs(M) <= s.y) {
                Math.abs(M) < s.y && (o.length = 0),
                s.y = Math.abs(M);
                const N = {
                    type: "gap",
                    direction: "side_top",
                    gap: E,
                    offset: M
                };
                o.push(N);
                continue
            }
            const [,,,A] = E.endBounds
              , I = tn(f - A)
              , O = E.length - I;
            if (Math.abs(O) <= s.y) {
                Math.abs(O) < s.y && (o.length = 0),
                s.y = Math.abs(O);
                const N = {
                    type: "gap",
                    direction: "side_bottom",
                    gap: E,
                    offset: O
                };
                o.push(N);
                continue
            }
        }
    }
}
  , rge = (e,t,n,r)=>{
    const i = _B(e, t, n, r);
    return Dv(i, r).filter(o=>!(o.length === 1 && Sn(o[0]))).flatMap(o=>Sp(o, r))
}
  , Sf = (e,t,n,r,i,o,s)=>{
    if (!Xl({
        app: n,
        event: r,
        selectedElements: e
    }) || e.length === 0 && t.length === 0)
        return [];
    const a = Do.getReferenceSnapPoints();
    if (a)
        for (const l of t)
            for (const c of a) {
                const u = c[0] - l[0]
                  , f = c[1] - l[1];
                Math.abs(u) <= s.x && (Math.abs(u) < s.x && (i.length = 0),
                i.push({
                    type: "point",
                    points: [l, c],
                    offset: u
                }),
                s.x = Math.abs(u)),
                Math.abs(f) <= s.y && (Math.abs(f) < s.y && (o.length = 0),
                o.push({
                    type: "point",
                    points: [l, c],
                    offset: f
                }),
                s.y = Math.abs(f))
            }
}
  , ige = (e,t,n,r,i)=>{
    var E, b;
    const o = n.state
      , s = dt(e, o);
    if (!Xl({
        app: n,
        event: r,
        selectedElements: s
    }) || s.length === 0)
        return {
            snapOffset: {
                x: 0,
                y: 0
            },
            snapLines: []
        };
    t.x = tn(t.x),
    t.y = tn(t.y);
    const a = []
      , l = []
      , c = Sy(o.zoom.value)
      , u = {
        x: c,
        y: c
    }
      , f = Sp(s, i, {
        dragOffset: t
    });
    Sf(s, f, n, r, a, l, u),
    dM(s, t, n, r, a, l, u);
    const h = {
        x: ((E = a[0]) == null ? void 0 : E.offset) ?? 0,
        y: ((b = l[0]) == null ? void 0 : b.offset) ?? 0
    };
    u.x = 0,
    u.y = 0,
    a.length = 0,
    l.length = 0;
    const m = {
        x: tn(t.x + h.x),
        y: tn(t.y + h.y)
    };
    Sf(s, Sp(s, i, {
        dragOffset: m
    }), n, r, a, l, u),
    dM(s, m, n, r, a, l, u);
    const v = Y4(a, l)
      , y = sge(s, m, [...a, ...l].filter(_=>_.type === "gap"));
    return {
        snapOffset: h,
        snapLines: [...v, ...y]
    }
}
  , tn = e=>Math.round(e * 10 ** 6) / 10 ** 6
  , fM = e=>{
    const t = new Map;
    for (const n of e) {
        const r = n.join(",");
        t.has(r) || t.set(r, n)
    }
    return Array.from(t.values())
}
  , Y4 = (e,t)=>{
    const n = {}
      , r = {};
    if (e.length > 0) {
        for (const i of e)
            if (i.type === "point") {
                const o = tn(i.points[0][0]);
                n[o] || (n[o] = []),
                n[o].push(...i.points.map(s=>[tn(s[0]), tn(s[1])]))
            }
    }
    if (t.length > 0) {
        for (const i of t)
            if (i.type === "point") {
                const o = tn(i.points[0][1]);
                r[o] || (r[o] = []),
                r[o].push(...i.points.map(s=>[tn(s[0]), tn(s[1])]))
            }
    }
    return Object.entries(n).map(([i,o])=>({
        type: "points",
        points: fM(o.map(s=>[Number(i), s[1]]).sort((s,a)=>s[1] - a[1]))
    })).concat(Object.entries(r).map(([i,o])=>({
        type: "points",
        points: fM(o.map(s=>[s[0], Number(i)]).sort((s,a)=>s[0] - a[0]))
    })))
}
  , oge = e=>{
    const t = new Map;
    for (const n of e) {
        const r = n.points.flat().map(i=>[tn(i)]).join(",");
        t.has(r) || t.set(r, n)
    }
    return Array.from(t.values())
}
  , sge = (e,t,n)=>{
    const [r,i,o,s] = v4(e, t)
      , a = [];
    for (const l of n) {
        const [c,u,f,h] = l.gap.startBounds
          , [m,v,y,E] = l.gap.endBounds
          , b = D2([i, s], l.gap.overlap)
          , _ = D2([r, o], l.gap.overlap);
        switch (l.direction) {
        case "center_horizontal":
            {
                if (b) {
                    const x = (b[0] + b[1]) / 2;
                    a.push({
                        type: "gap",
                        direction: "horizontal",
                        points: [[l.gap.startSide[0][0], x], [r, x]]
                    }, {
                        type: "gap",
                        direction: "horizontal",
                        points: [[o, x], [l.gap.endSide[0][0], x]]
                    })
                }
                break
            }
        case "center_vertical":
            {
                if (_) {
                    const x = (_[0] + _[1]) / 2;
                    a.push({
                        type: "gap",
                        direction: "vertical",
                        points: [[x, l.gap.startSide[0][1]], [x, i]]
                    }, {
                        type: "gap",
                        direction: "vertical",
                        points: [[x, s], [x, l.gap.endSide[0][1]]]
                    })
                }
                break
            }
        case "side_right":
            {
                if (b) {
                    const x = (b[0] + b[1]) / 2;
                    a.push({
                        type: "gap",
                        direction: "horizontal",
                        points: [[f, x], [m, x]]
                    }, {
                        type: "gap",
                        direction: "horizontal",
                        points: [[y, x], [r, x]]
                    })
                }
                break
            }
        case "side_left":
            {
                if (b) {
                    const x = (b[0] + b[1]) / 2;
                    a.push({
                        type: "gap",
                        direction: "horizontal",
                        points: [[o, x], [c, x]]
                    }, {
                        type: "gap",
                        direction: "horizontal",
                        points: [[f, x], [m, x]]
                    })
                }
                break
            }
        case "side_top":
            {
                if (_) {
                    const x = (_[0] + _[1]) / 2;
                    a.push({
                        type: "gap",
                        direction: "vertical",
                        points: [[x, s], [x, u]]
                    }, {
                        type: "gap",
                        direction: "vertical",
                        points: [[x, h], [x, v]]
                    })
                }
                break
            }
        case "side_bottom":
            {
                if (_) {
                    const x = (_[0] + _[1]) / 2;
                    a.push({
                        type: "gap",
                        direction: "vertical",
                        points: [[x, h], [x, v]]
                    }, {
                        type: "gap",
                        direction: "vertical",
                        points: [[x, E], [x, i]]
                    })
                }
                break
            }
        }
    }
    return oge(a.map(l=>({
        ...l,
        points: l.points.map(c=>[tn(c[0]), tn(c[1])])
    })))
}
  , age = (e,t,n,r,i,o)=>{
    var M, A;
    if (!Xl({
        event: r,
        selectedElements: e,
        app: n
    }) || e.length === 0 || e.length === 1 && !tge(e[0].angle, 0))
        return {
            snapOffset: {
                x: 0,
                y: 0
            },
            snapLines: []
        };
    let[s,a,l,c] = xt(t);
    o && (o.includes("e") ? l += i.x : o.includes("w") && (s += i.x),
    o.includes("n") ? a += i.y : o.includes("s") && (c += i.y));
    const u = [];
    if (o)
        switch (o) {
        case "e":
            {
                u.push([l, a], [l, c]);
                break
            }
        case "w":
            {
                u.push([s, a], [s, c]);
                break
            }
        case "n":
            {
                u.push([s, a], [l, a]);
                break
            }
        case "s":
            {
                u.push([s, c], [l, c]);
                break
            }
        case "ne":
            {
                u.push([l, a]);
                break
            }
        case "nw":
            {
                u.push([s, a]);
                break
            }
        case "se":
            {
                u.push([l, c]);
                break
            }
        case "sw":
            {
                u.push([s, c]);
                break
            }
        }
    const f = Sy(n.state.zoom.value)
      , h = {
        x: f,
        y: f
    }
      , m = []
      , v = [];
    Sf(t, u, n, r, m, v, h);
    const y = {
        x: ((M = m[0]) == null ? void 0 : M.offset) ?? 0,
        y: ((A = v[0]) == null ? void 0 : A.offset) ?? 0
    };
    h.x = 0,
    h.y = 0,
    m.length = 0,
    v.length = 0;
    const [E,b,_,x] = xt(e).map(I=>tn(I));
    Sf(e, [[E, b], [E, x], [_, b], [_, x]], n, r, m, v, h);
    const P = Y4(m, v);
    return {
        snapOffset: y,
        snapLines: P
    }
}
  , lge = (e,t,n,r,i,o)=>{
    var v, y;
    if (!Xl({
        event: n,
        selectedElements: [e],
        app: t
    }))
        return {
            snapOffset: {
                x: 0,
                y: 0
            },
            snapLines: []
        };
    const s = [[r.x + i.x, r.y + i.y]]
      , a = Sy(t.state.zoom.value)
      , l = {
        x: a,
        y: a
    }
      , c = []
      , u = [];
    Sf([e], s, t, n, c, u, l);
    const f = {
        x: ((v = c[0]) == null ? void 0 : v.offset) ?? 0,
        y: ((y = u[0]) == null ? void 0 : y.offset) ?? 0
    };
    l.x = 0,
    l.y = 0,
    c.length = 0,
    u.length = 0;
    const h = Sp([e], o, {
        boundingBoxCorners: !0,
        omitCenter: !0
    });
    Sf([e], h, t, n, c, u, l);
    const m = Y4(c, u);
    return {
        snapOffset: f,
        snapLines: m
    }
}
  , cge = (e,t,n,r,i)=>{
    if (!Xl({
        event: r,
        selectedElements: [],
        app: t
    }))
        return {
            originOffset: {
                x: 0,
                y: 0
            },
            snapLines: []
        };
    const o = DN(e, [], t.state, i)
      , s = Sy(t.state.zoom.value)
      , a = {
        x: s,
        y: s
    }
      , l = []
      , c = [];
    for (const u of o) {
        const f = Sp([u], i);
        for (const h of f) {
            const m = h[0] - n.x;
            Math.abs(m) <= Math.abs(a.x) && (Math.abs(m) < Math.abs(a.x) && (c.length = 0),
            c.push({
                type: "pointer",
                points: [h, [h[0], n.y]],
                direction: "vertical"
            }),
            a.x = m);
            const v = h[1] - n.y;
            Math.abs(v) <= Math.abs(a.y) && (Math.abs(v) < Math.abs(a.y) && (l.length = 0),
            l.push({
                type: "pointer",
                points: [h, [n.x, h[1]]],
                direction: "horizontal"
            }),
            a.y = v)
        }
    }
    return {
        originOffset: {
            x: c.length > 0 ? c[0].points[0][0] - n.x : 0,
            y: l.length > 0 ? l[0].points[0][1] - n.y : 0
        },
        snapLines: [...c, ...l]
    }
}
  , uge = e=>e === Fn.rectangle || e === Fn.ellipse || e === Fn.diamond || e === Fn.frame || e === Fn.magicframe || e === Fn.image || e === Fn.text
  , dge = ({appState: e, isMobile: t, device: n, app: r})=>{
    const {activeTool: i, isResizing: o, isRotating: s, lastPointerDownWith: a} = e
      , l = e.multiElement !== null;
    if (e.openSidebar && !n.editor.canFitSidebar)
        return null;
    if (fs(e))
        return k("hints.eraserRevert");
    if (i.type === "arrow" || i.type === "line")
        return l ? k("hints.linearElementMulti") : i.type === "arrow" ? k("hints.arrowTool", {
            arrowShortcut: ie("A")
        }) : k("hints.linearElement");
    if (i.type === "freedraw")
        return k("hints.freeDraw");
    if (i.type === "text")
        return k("hints.text");
    if (i.type === "embeddable")
        return k("hints.embeddable");
    if (e.activeTool.type === "image" && e.pendingImageElementId)
        return k("hints.placeImage");
    const c = r.scene.getSelectedElements(e);
    if (o && a === "mouse" && c.length === 1) {
        const u = c[0];
        return je(u) && u.points.length === 2 ? k("hints.lockAngle") : ga(u) ? k("hints.resizeImage") : k("hints.resize")
    }
    if (s && a === "mouse")
        return k("hints.rotate");
    if (c.length === 1 && ye(c[0]))
        return k("hints.text_selected");
    if (e.editingElement && ye(e.editingElement))
        return k("hints.text_editing");
    if (i.type === "selection") {
        if (e.selectionElement && !c.length && !e.editingElement && !e.editingLinearElement)
            return k("hints.deepBoxSelect");
        if (xp(r) && e.selectedElementsAreBeingDragged)
            return k("hints.disableSnapping");
        if (!c.length && !t)
            return k("hints.canvasPanning");
        if (c.length === 1) {
            if (je(c[0]))
                return e.editingLinearElement ? e.editingLinearElement.selectedPointsIndices ? k("hints.lineEditor_pointSelected") : k("hints.lineEditor_nothingSelected") : k("hints.lineEditor_info");
            if (!e.newElement && !e.selectedElementsAreBeingDragged && Xc(c[0]))
                return Rv(c[0]) ? Jhe(c[0], r.scene.getNonDeletedElementsMap()) ? [k("hints.bindTextToElement"), k("hints.createFlowchart")] : [k("hints.bindTextToElement"), k("hints.createFlowchart")] : k("hints.bindTextToElement")
        }
    }
    return null
}
  , xB = ({appState: e, isMobile: t, device: n, app: r})=>{
    const i = dge({
        appState: e,
        isMobile: t,
        device: n,
        app: r
    });
    if (!i)
        return null;
    const o = Array.isArray(i) ? i.map(s=>ie(s).replace(/\. ?$/, "")).join(". ") : ie(i);
    return g("div", {
        className: "HintViewer",
        children: g("span", {
            children: o
        })
    })
}
  , SB = ({delay: e, theme: t})=>{
    const [n,r] = T.useState(!!e);
    return T.useEffect(()=>{
        if (!e)
            return;
        const i = setTimeout(()=>{
            r(!1)
        }
        , e);
        return ()=>clearTimeout(i)
    }
    , [e]),
    n ? null : L("div", {
        className: xe("LoadingMessage", {
            "LoadingMessage--dark": t === Oe.DARK
        }),
        children: [g("div", {
            children: g(Ta, {})
        }), g("div", {
            className: "LoadingMessage-text",
            children: k("labels.loadingScene")
        })]
    })
}
  , fge = "medium"
  , hM = {
    CHECKED: P6,
    UNCHECKED: Ov
}
  , IB = e=>L("label", {
    className: xe("ToolIcon ToolIcon__lock", `ToolIcon_size_${fge}`, {
        "is-mobile": e.isMobile
    }),
    title: `${e.title} — Q`,
    children: [g("input", {
        className: "ToolIcon_type_checkbox",
        type: "checkbox",
        name: e.name,
        onChange: e.onChange,
        checked: e.checked,
        "aria-label": e.title,
        "data-testid": "toolbar-lock"
    }), g("div", {
        className: "ToolIcon__icon",
        children: e.checked ? hM.CHECKED : hM.UNCHECKED
    })]
})
  , Ip = ({heading: e, children: t, ...n})=>{
    const {id: r} = Ns()
      , i = g("h2", {
        className: "visually-hidden",
        id: `${r}-${e}-title`,
        children: k(`headings.${e}`)
    });
    return g("section", {
        ...n,
        "aria-labelledby": `${r}-${e}-title`,
        children: typeof t == "function" ? t(i) : L(Se, {
            children: [i, t]
        })
    })
}
  , gs = 4
  , El = 6
  , hge = "rgba(0,0,0,0.3)"
  , gge = (e,t,n,r)=>{
    if (!e.length)
        return {
            horizontal: null,
            vertical: null
        };
    const [i,o,s,a] = xt(e)
      , l = t / r.zoom.value
      , c = n / r.zoom.value
      , u = t - l
      , f = n - c
      , h = {
        top: parseInt(v0("sat")) || 0,
        bottom: parseInt(v0("sab")) || 0,
        left: parseInt(v0("sal")) || 0,
        right: parseInt(v0("sar")) || 0
    }
      , m = uf().rtl
      , v = -r.scrollX + u / 2 + h.left
      , y = -r.scrollY + f / 2 + h.top
      , E = v + l - h.right
      , b = y + c - h.bottom
      , _ = Math.min(i, v)
      , x = Math.min(o, y)
      , C = Math.max(s, E)
      , P = Math.max(a, b);
    return {
        horizontal: v === _ && E === C ? null : {
            x: Math.max(h.left, gs) + (v - _) / (C - _) * t,
            y: n - El - Math.max(gs, h.bottom),
            width: (E - v) / (C - _) * t - Math.max(gs * 2, h.left + h.right),
            height: El
        },
        vertical: y === x && b === P ? null : {
            x: m ? Math.max(h.left, gs) : t - El - Math.max(h.right, gs),
            y: (y - x) / (P - x) * n + Math.max(h.top, gs),
            width: El,
            height: (b - y) / (P - x) * n - Math.max(gs * 2, h.top + h.bottom)
        }
    }
}
  , gM = (e,t,n)=>{
    const [r,i] = [e.horizontal, e.vertical].map(s=>s != null && s.x <= t && t <= s.x + s.width && s.y <= n && n <= s.y + s.height);
    return {
        isOverEither: r || i,
        isOverHorizontal: r,
        isOverVertical: i
    }
}
  , pge = "medium"
  , CB = e=>e.penDetected ? L("label", {
    className: xe("ToolIcon ToolIcon__penMode", `ToolIcon_size_${pge}`, {
        "is-mobile": e.isMobile
    }),
    title: `${e.title}`,
    children: [g("input", {
        className: "ToolIcon_type_checkbox",
        type: "checkbox",
        name: e.name,
        onChange: e.onChange,
        checked: e.checked,
        "aria-label": e.title
    }), g("div", {
        className: "ToolIcon__icon",
        children: uee
    })]
}) : null
  , kB = e=>g(lt, {
    className: xe("Shape", {
        fillable: !1
    }),
    type: "radio",
    icon: DD,
    name: "editor-current-shape",
    checked: e.checked,
    title: `${e.title} — H`,
    keyBindingLabel: e.isMobile ? void 0 : U.H.toLocaleUpperCase(),
    "aria-label": `${e.title} — H`,
    "aria-keyshortcuts": U.H,
    "data-testid": "toolbar-hand",
    onChange: ()=>{
        var t;
        return (t = e.onChange) == null ? void 0 : t.call(e)
    }
})
  , mge = ({appState: e, elements: t, actionManager: n, setAppState: r, onLockToggle: i, onHandToolToggle: o, onPenModeToggle: s, renderTopRightUI: a, renderCustomStats: l, renderSidebars: c, device: u, renderWelcomeScreen: f, UIOptions: h, app: m})=>{
    const {WelcomeScreenCenterTunnel: v, MainMenuTunnel: y, DefaultSidebarTriggerTunnel: E} = Kr()
      , b = ()=>L(wB, {
        side: "top",
        className: "App-top-bar",
        children: [f && g(v.Out, {}), g(Ip, {
            heading: "shapes",
            children: x=>g(io.Col, {
                gap: 4,
                align: "center",
                children: L(io.Row, {
                    gap: 1,
                    className: "App-toolbar-container",
                    children: [L(Wo, {
                        padding: 1,
                        className: "App-toolbar App-toolbar--mobile",
                        children: [x, g(io.Row, {
                            gap: 1,
                            children: g(aB, {
                                appState: e,
                                activeTool: e.activeTool,
                                UIOptions: h,
                                app: m
                            })
                        })]
                    }), a && a(!0, e), L("div", {
                        className: "mobile-misc-tools-container",
                        children: [!e.viewModeEnabled && g(E.Out, {}), g(CB, {
                            checked: e.penMode,
                            onChange: ()=>s(null),
                            title: k("toolBar.penMode"),
                            isMobile: !0,
                            penDetected: e.penDetected
                        }), g(IB, {
                            checked: e.activeTool.locked,
                            onChange: i,
                            title: k("toolBar.lock"),
                            isMobile: !0
                        }), g(kB, {
                            checked: lf(e),
                            onChange: ()=>o(),
                            title: k("toolBar.hand"),
                            isMobile: !0
                        })]
                    })]
                })
            })
        }), g(xB, {
            appState: e,
            isMobile: !0,
            device: u,
            app: m
        })]
    })
      , _ = ()=>e.viewModeEnabled ? g("div", {
        className: "App-toolbar-content",
        children: g(y.Out, {})
    }) : L("div", {
        className: "App-toolbar-content",
        children: [g(y.Out, {}), n.renderAction("toggleEditMenu"), n.renderAction("undo"), n.renderAction("redo"), n.renderAction(e.multiElement ? "finalize" : "duplicateSelection"), n.renderAction("deleteSelectedElements")]
    });
    return L(Se, {
        children: [c(), !e.viewModeEnabled && b(), g("div", {
            className: "App-bottom-bar",
            style: {
                marginBottom: El + gs * 2,
                marginLeft: El + gs * 2,
                marginRight: El + gs * 2
            },
            children: L(Wo, {
                padding: 0,
                children: [e.openMenu === "shape" && !e.viewModeEnabled && A4(e, t) ? g(Ip, {
                    className: "App-mobile-menu",
                    heading: "selectedShapeActions",
                    children: g(sB, {
                        appState: e,
                        elementsMap: m.scene.getNonDeletedElementsMap(),
                        renderAction: n.renderAction
                    })
                }) : null, L("footer", {
                    className: "App-toolbar",
                    children: [_(), e.scrolledOutside && !e.openMenu && !e.openSidebar && g("button", {
                        type: "button",
                        className: "scroll-back-to-content",
                        onClick: ()=>{
                            r(x=>({
                                ...mp(t, x)
                            }))
                        }
                        ,
                        children: k("buttons.scrollBackToContent")
                    })]
                })]
            })
        })]
    })
}
  , pM = e=>{
    const t = T.useRef(null)
      , [n,r] = T.useState(null);
    return T.useLayoutEffect(()=>{
        if (!e.spreadsheet)
            return;
        const i = Lse(e.chartType, e.spreadsheet, 0, 0);
        r(i);
        let o;
        const s = t.current;
        return (async()=>{
            var a;
            o = await l4(i, {
                exportBackground: !1,
                viewBackgroundColor: Kn.white
            }, null),
            (a = o.querySelector(".style-fonts")) == null || a.remove(),
            s.replaceChildren(),
            s.appendChild(o),
            e.selected && s.parentNode.focus()
        }
        )(),
        ()=>{
            s.replaceChildren()
        }
    }
    , [e.spreadsheet, e.chartType, e.selected]),
    g("button", {
        type: "button",
        className: "ChartPreview",
        onClick: ()=>{
            n && e.onClick(e.chartType, n)
        }
        ,
        children: g("div", {
            ref: t
        })
    })
}
  , vge = ({setAppState: e, appState: t, onClose: n})=>{
    const {onInsertElements: r} = Ba()
      , i = ve.useCallback(()=>{
        n && n()
    }
    , [n])
      , o = (s,a)=>{
        r(a),
        at("paste", "chart", s),
        e({
            currentChartType: s,
            pasteDialog: {
                shown: !1,
                data: null
            }
        })
    }
    ;
    return g(mi, {
        size: "small",
        onCloseRequest: i,
        title: k("labels.pasteCharts"),
        className: "PasteChartDialog",
        autofocus: !1,
        children: L("div", {
            className: "container",
            children: [g(pM, {
                chartType: "bar",
                spreadsheet: t.pasteDialog.data,
                selected: t.currentChartType === "bar",
                onClick: o
            }), g(pM, {
                chartType: "line",
                spreadsheet: t.pasteDialog.data,
                selected: t.currentChartType === "line",
                onClick: o
            })]
        })
    })
}
  , yge = ()=>L("div", {
    className: "HelpDialog__header",
    children: [L("a", {
        className: "HelpDialog__btn",
        href: "https://docs.excalidraw.com",
        target: "_blank",
        rel: "noopener noreferrer",
        children: [g("div", {
            className: "HelpDialog__link-icon",
            children: Xk
        }), k("helpDialog.documentation")]
    }), L("a", {
        className: "HelpDialog__btn",
        href: "https://blog.excalidraw.com",
        target: "_blank",
        rel: "noopener noreferrer",
        children: [g("div", {
            className: "HelpDialog__link-icon",
            children: Xk
        }), k("helpDialog.blog")]
    }), L("a", {
        className: "HelpDialog__btn",
        href: "https://github.com/excalidraw/excalidraw/issues",
        target: "_blank",
        rel: "noopener noreferrer",
        children: [g("div", {
            className: "HelpDialog__link-icon",
            children: D6
        }), k("helpDialog.github")]
    }), L("a", {
        className: "HelpDialog__btn",
        href: "https://youtube.com/@excalidraw",
        target: "_blank",
        rel: "noopener noreferrer",
        children: [g("div", {
            className: "HelpDialog__link-icon",
            children: WD
        }), "YouTube"]
    })]
})
  , wge = e=>L(Se, {
    children: [g("h3", {
        children: e.title
    }), g("div", {
        className: "HelpDialog__islands-container",
        children: e.children
    })]
})
  , _b = e=>L("div", {
    className: `HelpDialog__island ${e.className}`,
    children: [g("h4", {
        className: "HelpDialog__island-title",
        children: e.caption
    }), g("div", {
        className: "HelpDialog__island-content",
        children: e.children
    })]
});
function *Ege(e, t) {
    let n = !0;
    for (const r of e)
        n || (yield t),
        n = !1,
        yield r
}
const bge = e=>e.replace(/\b[a-z]\b/, t=>t.toUpperCase())
  , Ce = ({label: e, shortcuts: t, isOr: n=!0})=>{
    const r = t.map(i=>(i.endsWith("++") ? [...i.slice(0, -2).split("+"), "+"] : i.split("+")).map(s=>g(_ge, {
        children: bge(s)
    }, s)));
    return L("div", {
        className: "HelpDialog__shortcut",
        children: [g("div", {
            children: e
        }), g("div", {
            className: "HelpDialog__key-container",
            children: [...Ege(r, n ? k("helpDialog.or") : null)]
        })]
    })
}
  , _ge = e=>g("kbd", {
    className: "HelpDialog__key",
    ...e
})
  , xge = ({onClose: e})=>{
    const t = ve.useCallback(()=>{
        e && e()
    }
    , [e]);
    return g(Se, {
        children: L(mi, {
            onCloseRequest: t,
            title: k("helpDialog.title"),
            className: "HelpDialog",
            children: [g(yge, {}), L(wge, {
                title: k("helpDialog.shortcuts"),
                children: [L(_b, {
                    className: "HelpDialog__island--tools",
                    caption: k("helpDialog.tools"),
                    children: [g(Ce, {
                        label: k("toolBar.hand"),
                        shortcuts: [U.H]
                    }), g(Ce, {
                        label: k("toolBar.selection"),
                        shortcuts: [U.V, U[1]]
                    }), g(Ce, {
                        label: k("toolBar.rectangle"),
                        shortcuts: [U.R, U[2]]
                    }), g(Ce, {
                        label: k("toolBar.diamond"),
                        shortcuts: [U.D, U[3]]
                    }), g(Ce, {
                        label: k("toolBar.ellipse"),
                        shortcuts: [U.O, U[4]]
                    }), g(Ce, {
                        label: k("toolBar.arrow"),
                        shortcuts: [U.A, U[5]]
                    }), g(Ce, {
                        label: k("toolBar.line"),
                        shortcuts: [U.L, U[6]]
                    }), g(Ce, {
                        label: k("toolBar.freedraw"),
                        shortcuts: [U.P, U[7]]
                    }), g(Ce, {
                        label: k("toolBar.text"),
                        shortcuts: [U.T, U[8]]
                    }), g(Ce, {
                        label: k("toolBar.image"),
                        shortcuts: [U[9]]
                    }), g(Ce, {
                        label: k("toolBar.eraser"),
                        shortcuts: [U.E, U[0]]
                    }), g(Ce, {
                        label: k("toolBar.frame"),
                        shortcuts: [U.F]
                    }), g(Ce, {
                        label: k("toolBar.laser"),
                        shortcuts: [U.K]
                    }), g(Ce, {
                        label: k("labels.eyeDropper"),
                        shortcuts: [U.I, "Shift+S", "Shift+G"]
                    }), g(Ce, {
                        label: k("helpDialog.editLineArrowPoints"),
                        shortcuts: [ie("CtrlOrCmd+Enter")]
                    }), g(Ce, {
                        label: k("helpDialog.editText"),
                        shortcuts: [ie("Enter")]
                    }), g(Ce, {
                        label: k("helpDialog.textNewLine"),
                        shortcuts: [ie("Enter"), ie("Shift+Enter")]
                    }), g(Ce, {
                        label: k("helpDialog.textFinish"),
                        shortcuts: [ie("Esc"), ie("CtrlOrCmd+Enter")]
                    }), g(Ce, {
                        label: k("helpDialog.curvedArrow"),
                        shortcuts: ["A", k("helpDialog.click"), k("helpDialog.click"), k("helpDialog.click")],
                        isOr: !1
                    }), g(Ce, {
                        label: k("helpDialog.curvedLine"),
                        shortcuts: ["L", k("helpDialog.click"), k("helpDialog.click"), k("helpDialog.click")],
                        isOr: !1
                    }), g(Ce, {
                        label: k("toolBar.lock"),
                        shortcuts: [U.Q]
                    }), g(Ce, {
                        label: k("helpDialog.preventBinding"),
                        shortcuts: [ie("CtrlOrCmd")]
                    }), g(Ce, {
                        label: k("toolBar.link"),
                        shortcuts: [ie("CtrlOrCmd+K")]
                    })]
                }), L(_b, {
                    className: "HelpDialog__island--view",
                    caption: k("helpDialog.view"),
                    children: [g(Ce, {
                        label: k("buttons.zoomIn"),
                        shortcuts: [ie("CtrlOrCmd++")]
                    }), g(Ce, {
                        label: k("buttons.zoomOut"),
                        shortcuts: [ie("CtrlOrCmd+-")]
                    }), g(Ce, {
                        label: k("buttons.resetZoom"),
                        shortcuts: [ie("CtrlOrCmd+0")]
                    }), g(Ce, {
                        label: k("helpDialog.zoomToFit"),
                        shortcuts: ["Shift+1"]
                    }), g(Ce, {
                        label: k("helpDialog.zoomToSelection"),
                        shortcuts: ["Shift+2"]
                    }), g(Ce, {
                        label: k("helpDialog.movePageUpDown"),
                        shortcuts: ["PgUp/PgDn"]
                    }), g(Ce, {
                        label: k("helpDialog.movePageLeftRight"),
                        shortcuts: ["Shift+PgUp/PgDn"]
                    }), g(Ce, {
                        label: k("buttons.zenMode"),
                        shortcuts: [ie("Alt+Z")]
                    }), g(Ce, {
                        label: k("buttons.objectsSnapMode"),
                        shortcuts: [ie("Alt+S")]
                    }), g(Ce, {
                        label: k("labels.toggleGrid"),
                        shortcuts: [ie("CtrlOrCmd+'")]
                    }), g(Ce, {
                        label: k("labels.viewMode"),
                        shortcuts: [ie("Alt+R")]
                    }), g(Ce, {
                        label: k("labels.toggleTheme"),
                        shortcuts: [ie("Alt+Shift+D")]
                    }), g(Ce, {
                        label: k("stats.fullTitle"),
                        shortcuts: [ie("Alt+/")]
                    }), g(Ce, {
                        label: k("commandPalette.title"),
                        shortcuts: qg ? [gi("commandPalette")] : [gi("commandPalette"), gi("commandPalette", 1)]
                    })]
                }), L(_b, {
                    className: "HelpDialog__island--editor",
                    caption: k("helpDialog.editor"),
                    children: [g(Ce, {
                        label: k("helpDialog.createFlowchart"),
                        shortcuts: [ie("CtrlOrCmd+Arrow Key")],
                        isOr: !0
                    }), g(Ce, {
                        label: k("helpDialog.navigateFlowchart"),
                        shortcuts: [ie("Alt+Arrow Key")],
                        isOr: !0
                    }), g(Ce, {
                        label: k("labels.moveCanvas"),
                        shortcuts: [ie(`Space+${k("helpDialog.drag")}`), ie(`Wheel+${k("helpDialog.drag")}`)],
                        isOr: !0
                    }), g(Ce, {
                        label: k("buttons.clearReset"),
                        shortcuts: [ie("CtrlOrCmd+Delete")]
                    }), g(Ce, {
                        label: k("labels.delete"),
                        shortcuts: [ie("Delete")]
                    }), g(Ce, {
                        label: k("labels.cut"),
                        shortcuts: [ie("CtrlOrCmd+X")]
                    }), g(Ce, {
                        label: k("labels.copy"),
                        shortcuts: [ie("CtrlOrCmd+C")]
                    }), g(Ce, {
                        label: k("labels.paste"),
                        shortcuts: [ie("CtrlOrCmd+V")]
                    }), g(Ce, {
                        label: k("labels.pasteAsPlaintext"),
                        shortcuts: [ie("CtrlOrCmd+Shift+V")]
                    }), g(Ce, {
                        label: k("labels.selectAll"),
                        shortcuts: [ie("CtrlOrCmd+A")]
                    }), g(Ce, {
                        label: k("labels.multiSelect"),
                        shortcuts: [ie(`Shift+${k("helpDialog.click")}`)]
                    }), g(Ce, {
                        label: k("helpDialog.deepSelect"),
                        shortcuts: [ie(`CtrlOrCmd+${k("helpDialog.click")}`)]
                    }), g(Ce, {
                        label: k("helpDialog.deepBoxSelect"),
                        shortcuts: [ie(`CtrlOrCmd+${k("helpDialog.drag")}`)]
                    }), (f4 || qg) && g(Ce, {
                        label: k("labels.copyAsPng"),
                        shortcuts: [ie("Shift+Alt+C")]
                    }), g(Ce, {
                        label: k("labels.copyStyles"),
                        shortcuts: [ie("CtrlOrCmd+Alt+C")]
                    }), g(Ce, {
                        label: k("labels.pasteStyles"),
                        shortcuts: [ie("CtrlOrCmd+Alt+V")]
                    }), g(Ce, {
                        label: k("labels.sendToBack"),
                        shortcuts: [ie(Ts ? "CtrlOrCmd+Alt+[" : "CtrlOrCmd+Shift+[")]
                    }), g(Ce, {
                        label: k("labels.bringToFront"),
                        shortcuts: [ie(Ts ? "CtrlOrCmd+Alt+]" : "CtrlOrCmd+Shift+]")]
                    }), g(Ce, {
                        label: k("labels.sendBackward"),
                        shortcuts: [ie("CtrlOrCmd+[")]
                    }), g(Ce, {
                        label: k("labels.bringForward"),
                        shortcuts: [ie("CtrlOrCmd+]")]
                    }), g(Ce, {
                        label: k("labels.alignTop"),
                        shortcuts: [ie("CtrlOrCmd+Shift+Up")]
                    }), g(Ce, {
                        label: k("labels.alignBottom"),
                        shortcuts: [ie("CtrlOrCmd+Shift+Down")]
                    }), g(Ce, {
                        label: k("labels.alignLeft"),
                        shortcuts: [ie("CtrlOrCmd+Shift+Left")]
                    }), g(Ce, {
                        label: k("labels.alignRight"),
                        shortcuts: [ie("CtrlOrCmd+Shift+Right")]
                    }), g(Ce, {
                        label: k("labels.duplicateSelection"),
                        shortcuts: [ie("CtrlOrCmd+D"), ie(`Alt+${k("helpDialog.drag")}`)]
                    }), g(Ce, {
                        label: k("helpDialog.toggleElementLock"),
                        shortcuts: [ie("CtrlOrCmd+Shift+L")]
                    }), g(Ce, {
                        label: k("buttons.undo"),
                        shortcuts: [ie("CtrlOrCmd+Z")]
                    }), g(Ce, {
                        label: k("buttons.redo"),
                        shortcuts: zP ? [ie("CtrlOrCmd+Y"), ie("CtrlOrCmd+Shift+Z")] : [ie("CtrlOrCmd+Shift+Z")]
                    }), g(Ce, {
                        label: k("labels.group"),
                        shortcuts: [ie("CtrlOrCmd+G")]
                    }), g(Ce, {
                        label: k("labels.ungroup"),
                        shortcuts: [ie("CtrlOrCmd+Shift+G")]
                    }), g(Ce, {
                        label: k("labels.flipHorizontal"),
                        shortcuts: [ie("Shift+H")]
                    }), g(Ce, {
                        label: k("labels.flipVertical"),
                        shortcuts: [ie("Shift+V")]
                    }), g(Ce, {
                        label: k("labels.showStroke"),
                        shortcuts: [ie("S")]
                    }), g(Ce, {
                        label: k("labels.showBackground"),
                        shortcuts: [ie("G")]
                    }), g(Ce, {
                        label: k("labels.showFonts"),
                        shortcuts: [ie("Shift+F")]
                    }), g(Ce, {
                        label: k("labels.decreaseFontSize"),
                        shortcuts: [ie("CtrlOrCmd+Shift+<")]
                    }), g(Ce, {
                        label: k("labels.increaseFontSize"),
                        shortcuts: [ie("CtrlOrCmd+Shift+>")]
                    })]
                })]
            })]
        })
    })
}
  , Sge = 4
  , Ige = 8
  , Cge = ({shouldWrap: e, children: t, username: n})=>e ? g(Ma, {
    label: n || "Unknown user",
    children: t
}) : g(Se, {
    children: t
})
  , xb = ({actionManager: e, collaborator: t, socketId: n, withName: r=!1, shouldWrapWithTooltip: i=!1, isBeingFollowed: o})=>{
    const s = {
        socketId: n,
        collaborator: t,
        withName: r,
        isBeingFollowed: o
    }
      , a = e.renderAction("goToCollaborator", s);
    return g(Cge, {
        username: t.username,
        shouldWrap: i,
        children: a
    }, n)
}
  , kge = ["avatarUrl", "id", "socketId", "username", "isInCall", "isSpeaking", "isMuted"]
  , TB = ve.memo(({className: e, mobile: t, collaborators: n, userToFollow: r})=>{
    const i = zi()
      , o = new Map;
    n.forEach((y,E)=>{
        const b = y.id || E;
        o.set(b, {
            ...y,
            socketId: E
        })
    }
    );
    const s = Array.from(o.values()).filter(y=>{
        var E;
        return (E = y.username) == null ? void 0 : E.trim()
    }
    )
      , [a,l] = ve.useState("")
      , c = s.filter(y=>{
        var E;
        return (E = y.username) == null ? void 0 : E.toLowerCase().includes(a)
    }
    )
      , u = ve.useRef(null);
    T.useLayoutEffect(()=>{
        if (u.current) {
            const y = b=>{
                const _ = Math.max(1, Math.min(8, Math.floor(b / 38)));
                h(_)
            }
            ;
            if (y(u.current.clientWidth),
            !O3)
                return;
            const E = new ResizeObserver(b=>{
                for (const _ of b) {
                    const {width: x} = _.contentRect;
                    y(x)
                }
            }
            );
            return E.observe(u.current),
            ()=>{
                E.disconnect()
            }
        }
    }
    , []);
    const [f,h] = ve.useState(Sge)
      , v = s.slice(0, f - 1).map(y=>xb({
        actionManager: i,
        collaborator: y,
        socketId: y.socketId,
        shouldWrapWithTooltip: !0,
        isBeingFollowed: y.socketId === r
    }));
    return t ? g("div", {
        className: xe("UserList UserList_mobile", e),
        children: s.map(y=>xb({
            actionManager: i,
            collaborator: y,
            socketId: y.socketId,
            shouldWrapWithTooltip: !0,
            isBeingFollowed: y.socketId === r
        }))
    }) : g("div", {
        className: "UserList__wrapper",
        ref: u,
        children: L("div", {
            className: xe("UserList", e),
            style: {
                "--max-avatars": f
            },
            children: [v, s.length > f - 1 && L(Jp, {
                children: [L(e1, {
                    className: "UserList__more",
                    children: ["+", s.length - f + 1]
                }), g(py, {
                    style: {
                        zIndex: 2,
                        width: "15rem",
                        textAlign: "left"
                    },
                    align: "end",
                    sideOffset: 10,
                    children: L(Wo, {
                        padding: 2,
                        children: [s.length >= Ige && g(TF, {
                            placeholder: k("quickSearch.placeholder"),
                            onChange: l
                        }), g(AF, {
                            className: "dropdown-menu UserList__collaborators",
                            placeholder: k("userList.empty"),
                            children: c.length > 0 ? [g("div", {
                                className: "hint",
                                children: k("userList.hint.text")
                            }), c.map(y=>xb({
                                actionManager: i,
                                collaborator: y,
                                socketId: y.socketId,
                                withName: !0,
                                isBeingFollowed: y.socketId === r
                            }))] : []
                        }), g(xF, {
                            width: 20,
                            height: 10,
                            style: {
                                fill: "var(--popup-bg-color)",
                                filter: "drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"
                            }
                        })]
                    })
                })]
            })]
        })
    })
}
, (e,t)=>{
    if (e.collaborators.size !== t.collaborators.size || e.mobile !== t.mobile || e.className !== t.className || e.userToFollow !== t.userToFollow)
        return !1;
    const n = t.collaborators.keys();
    for (const [r,i] of e.collaborators) {
        const o = t.collaborators.get(r);
        if (!o || r !== n.next().value || !Xn(i, o, kge))
            return !1
    }
    return !0
}
)
  , J_ = ({children: e, color: t})=>g("div", {
    className: "Card",
    style: {
        "--card-color": t === "primary" ? "var(--color-primary)" : Kn[t][7],
        "--card-color-darker": t === "primary" ? "var(--color-primary-darker)" : Kn[t][8],
        "--card-color-darkest": t === "primary" ? "var(--color-primary-darkest)" : Kn[t][9]
    },
    children: e
})
  , Tge = ({elements: e, appState: t, setAppState: n, files: r, actionManager: i, exportOpts: o, canvas: s, onCloseRequest: a})=>{
    const {onExportToBackend: l} = o;
    return g("div", {
        className: "ExportDialog ExportDialog--json",
        children: L("div", {
            className: "ExportDialog-cards",
            children: [o.saveFileToDisk && L(J_, {
                color: "lime",
                children: [g("div", {
                    className: "Card-icon",
                    children: Eee
                }), g("h2", {
                    children: k("exportDialog.disk_title")
                }), L("div", {
                    className: "Card-details",
                    children: [k("exportDialog.disk_details"), !Mu && i.renderAction("changeProjectName")]
                }), g(lt, {
                    className: "Card-button",
                    type: "button",
                    title: k("exportDialog.disk_button"),
                    "aria-label": k("exportDialog.disk_button"),
                    showAriaLabel: !0,
                    onClick: ()=>{
                        i.executeAction(zF, "ui")
                    }
                })]
            }), l && L(J_, {
                color: "pink",
                children: [g("div", {
                    className: "Card-icon",
                    children: l2
                }), g("h2", {
                    children: k("exportDialog.link_title")
                }), g("div", {
                    className: "Card-details",
                    children: k("exportDialog.link_details")
                }), g(lt, {
                    className: "Card-button",
                    type: "button",
                    title: k("exportDialog.link_button"),
                    "aria-label": k("exportDialog.link_button"),
                    showAriaLabel: !0,
                    onClick: async()=>{
                        try {
                            at("export", "link", `ui (${zp()})`),
                            await l(e, t, r),
                            a()
                        } catch (c) {
                            n({
                                errorMessage: c.message
                            })
                        }
                    }
                })]
            }), o.renderCustomUI && o.renderCustomUI(e, t, r, s)]
        })
    })
}
  , Age = ({elements: e, appState: t, files: n, actionManager: r, exportOpts: i, canvas: o, setAppState: s})=>{
    var l;
    const a = ve.useCallback(()=>{
        s({
            openDialog: null
        })
    }
    , [s]);
    return g(Se, {
        children: ((l = t.openDialog) == null ? void 0 : l.name) === "jsonExport" && g(mi, {
            onCloseRequest: a,
            title: k("buttons.export"),
            children: g(Tge, {
                elements: e,
                appState: t,
                setAppState: s,
                files: n,
                actionManager: r,
                onCloseRequest: a,
                exportOpts: i,
                canvas: o
            })
        })
    })
}
  , Mge = e=>g("button", {
    className: "help-icon",
    onClick: e.onClick,
    type: "button",
    title: `${k("helpDialog.title")} — ?`,
    "aria-label": k("helpDialog.title"),
    children: R6
})
  , AB = ({appState: e, actionManager: t, showExitZenModeBtn: n, renderWelcomeScreen: r})=>{
    const {FooterCenterTunnel: i, WelcomeScreenHelpHintTunnel: o} = Kr()
      , s = ur()
      , a = !e.viewModeEnabled && e.multiElement && s.isTouchScreen;
    return L("footer", {
        role: "contentinfo",
        className: "layer-ui__wrapper__footer App-menu App-menu_bottom",
        children: [g("div", {
            className: xe("layer-ui__wrapper__footer-left zen-mode-transition", {
                "layer-ui__wrapper__footer-left--transition-left": e.zenModeEnabled
            }),
            children: g(io.Col, {
                gap: 2,
                children: L(Ip, {
                    heading: "canvasActions",
                    children: [g(ehe, {
                        renderAction: t.renderAction,
                        zoom: e.zoom
                    }), !e.viewModeEnabled && g(the, {
                        renderAction: t.renderAction,
                        className: xe("zen-mode-transition", {
                            "layer-ui__wrapper__footer-left--transition-bottom": e.zenModeEnabled
                        })
                    }), a && g(rhe, {
                        renderAction: t.renderAction,
                        className: xe("zen-mode-transition", {
                            "layer-ui__wrapper__footer-left--transition-left": e.zenModeEnabled
                        })
                    })]
                })
            })
        }), g(i.Out, {}), g("div", {
            className: xe("layer-ui__wrapper__footer-right zen-mode-transition", {
                "transition-right": e.zenModeEnabled
            }),
            children: L("div", {
                style: {
                    position: "relative"
                },
                children: [r && g(o.Out, {}), g(Mge, {
                    onClick: ()=>t.executeAction(W4)
                })]
            })
        }), g(nhe, {
            actionManager: t,
            showExitZenModeBtn: n
        })]
    })
}
;
AB.displayName = "Footer";
const MB = ve.createContext({})
  , LB = ({children: e, className: t})=>{
    const n = ur()
      , r = T.useContext(MB)
      , i = !!(n.editor.canFitSidebar && r.shouldRenderDockButton);
    return L("div", {
        className: xe("sidebar__header", t),
        "data-testid": "sidebar-header",
        children: [e, L("div", {
            className: "sidebar__header__buttons",
            children: [i && g(Ma, {
                label: k("labels.sidebarLock"),
                children: g(Ep, {
                    onSelect: ()=>{
                        var o;
                        return (o = r.onDock) == null ? void 0 : o.call(r, !r.docked)
                    }
                    ,
                    selected: !!r.docked,
                    className: "sidebar__dock",
                    "data-testid": "sidebar-dock",
                    "aria-label": k("labels.sidebarLock"),
                    children: eee
                })
            }), g(Ep, {
                "data-testid": "sidebar-close",
                className: "sidebar__close",
                onSelect: r.onCloseRequest,
                "aria-label": k("buttons.close"),
                children: Df
            })]
        })]
    })
}
;
LB.displayName = "SidebarHeader";
const PB = ({name: e, tab: t, icon: n, title: r, children: i, onToggle: o, className: s, style: a})=>{
    var u;
    const l = Gn()
      , c = Wn();
    return L("label", {
        title: r,
        className: "sidebar-trigger__label-element",
        children: [g("input", {
            className: "ToolIcon_type_checkbox",
            type: "checkbox",
            onChange: f=>{
                var m;
                (m = document.querySelector(".layer-ui__wrapper")) == null || m.classList.remove("animate");
                const h = f.target.checked;
                l({
                    openSidebar: h ? {
                        name: e,
                        tab: t
                    } : null
                }),
                o == null || o(h)
            }
            ,
            checked: ((u = c.openSidebar) == null ? void 0 : u.name) === e,
            "aria-label": r,
            "aria-keyshortcuts": "0"
        }), L("div", {
            className: xe("sidebar-trigger", s),
            style: a,
            children: [n && g("div", {
                children: n
            }), i && g("div", {
                className: "sidebar-trigger__label",
                children: i
            })]
        })]
    })
}
;
PB.displayName = "SidebarTrigger";
function Lge(e) {
    const t = e + "CollectionProvider"
      , [n,r] = Zp(t)
      , [i,o] = n(t, {
        collectionRef: {
            current: null
        },
        itemMap: new Map
    })
      , s = m=>{
        const {scope: v, children: y} = m
          , E = ve.useRef(null)
          , b = ve.useRef(new Map).current;
        return ve.createElement(i, {
            scope: v,
            itemMap: b,
            collectionRef: E
        }, y)
    }
      , a = e + "CollectionSlot"
      , l = ve.forwardRef((m,v)=>{
        const {scope: y, children: E} = m
          , b = o(a, y)
          , _ = Ls(v, b.collectionRef);
        return ve.createElement(vp, {
            ref: _
        }, E)
    }
    )
      , c = e + "CollectionItemSlot"
      , u = "data-radix-collection-item"
      , f = ve.forwardRef((m,v)=>{
        const {scope: y, children: E, ...b} = m
          , _ = ve.useRef(null)
          , x = Ls(v, _)
          , C = o(c, y);
        return ve.useEffect(()=>(C.itemMap.set(_, {
            ref: _,
            ...b
        }),
        ()=>void C.itemMap.delete(_))),
        ve.createElement(vp, {
            [u]: "",
            ref: x
        }, E)
    }
    );
    function h(m) {
        const v = o(e + "CollectionConsumer", m);
        return ve.useCallback(()=>{
            const E = v.collectionRef.current;
            if (!E)
                return [];
            const b = Array.from(E.querySelectorAll(`[${u}]`));
            return Array.from(v.itemMap.values()).sort((C,P)=>b.indexOf(C.ref.current) - b.indexOf(P.ref.current))
        }
        , [v.collectionRef, v.itemMap])
    }
    return [{
        Provider: s,
        Slot: l,
        ItemSlot: f
    }, h, r]
}
const Pge = T.createContext(void 0);
function RB(e) {
    const t = T.useContext(Pge);
    return e || t || "ltr"
}
const Sb = "rovingFocusGroup.onEntryFocus"
  , Rge = {
    bubbles: !1,
    cancelable: !0
}
  , j4 = "RovingFocusGroup"
  , [ex,DB,Dge] = Lge(j4)
  , [Oge,OB] = Zp(j4, [Dge])
  , [Nge,Fge] = Oge(j4)
  , Bge = T.forwardRef((e,t)=>T.createElement(ex.Provider, {
    scope: e.__scopeRovingFocusGroup
}, T.createElement(ex.Slot, {
    scope: e.__scopeRovingFocusGroup
}, T.createElement(zge, Ft({}, e, {
    ref: t
})))))
  , zge = T.forwardRef((e,t)=>{
    const {__scopeRovingFocusGroup: n, orientation: r, loop: i=!1, dir: o, currentTabStopId: s, defaultCurrentTabStopId: a, onCurrentTabStopIdChange: l, onEntryFocus: c, ...u} = e
      , f = T.useRef(null)
      , h = Ls(t, f)
      , m = RB(o)
      , [v=null,y] = F4({
        prop: s,
        defaultProp: a,
        onChange: l
    })
      , [E,b] = T.useState(!1)
      , _ = Aa(c)
      , x = DB(n)
      , C = T.useRef(!1)
      , [P,M] = T.useState(0);
    return T.useEffect(()=>{
        const A = f.current;
        if (A)
            return A.addEventListener(Sb, _),
            ()=>A.removeEventListener(Sb, _)
    }
    , [_]),
    T.createElement(Nge, {
        scope: n,
        orientation: r,
        dir: m,
        loop: i,
        currentTabStopId: v,
        onItemFocus: T.useCallback(A=>y(A), [y]),
        onItemShiftTab: T.useCallback(()=>b(!0), []),
        onFocusableItemAdd: T.useCallback(()=>M(A=>A + 1), []),
        onFocusableItemRemove: T.useCallback(()=>M(A=>A - 1), [])
    }, T.createElement(pi.div, Ft({
        tabIndex: E || P === 0 ? -1 : 0,
        "data-orientation": r
    }, u, {
        ref: h,
        style: {
            outline: "none",
            ...e.style
        },
        onMouseDown: Ir(e.onMouseDown, ()=>{
            C.current = !0
        }
        ),
        onFocus: Ir(e.onFocus, A=>{
            const I = !C.current;
            if (A.target === A.currentTarget && I && !E) {
                const O = new CustomEvent(Sb,Rge);
                if (A.currentTarget.dispatchEvent(O),
                !O.defaultPrevented) {
                    const N = x().filter(re=>re.focusable)
                      , $ = N.find(re=>re.active)
                      , V = N.find(re=>re.id === v)
                      , j = [$, V, ...N].filter(Boolean).map(re=>re.ref.current);
                    NB(j)
                }
            }
            C.current = !1
        }
        ),
        onBlur: Ir(e.onBlur, ()=>b(!1))
    })))
}
)
  , $ge = "RovingFocusGroupItem"
  , Uge = T.forwardRef((e,t)=>{
    const {__scopeRovingFocusGroup: n, focusable: r=!0, active: i=!1, tabStopId: o, ...s} = e
      , a = R4()
      , l = o || a
      , c = Fge($ge, n)
      , u = c.currentTabStopId === l
      , f = DB(n)
      , {onFocusableItemAdd: h, onFocusableItemRemove: m} = c;
    return T.useEffect(()=>{
        if (r)
            return h(),
            ()=>m()
    }
    , [r, h, m]),
    T.createElement(ex.ItemSlot, {
        scope: n,
        id: l,
        focusable: r,
        active: i
    }, T.createElement(pi.span, Ft({
        tabIndex: u ? 0 : -1,
        "data-orientation": c.orientation
    }, s, {
        ref: t,
        onMouseDown: Ir(e.onMouseDown, v=>{
            r ? c.onItemFocus(l) : v.preventDefault()
        }
        ),
        onFocus: Ir(e.onFocus, ()=>c.onItemFocus(l)),
        onKeyDown: Ir(e.onKeyDown, v=>{
            if (v.key === "Tab" && v.shiftKey) {
                c.onItemShiftTab();
                return
            }
            if (v.target !== v.currentTarget)
                return;
            const y = Gge(v, c.orientation, c.dir);
            if (y !== void 0) {
                v.preventDefault();
                let b = f().filter(_=>_.focusable).map(_=>_.ref.current);
                if (y === "last")
                    b.reverse();
                else if (y === "prev" || y === "next") {
                    y === "prev" && b.reverse();
                    const _ = b.indexOf(v.currentTarget);
                    b = c.loop ? Vge(b, _ + 1) : b.slice(_ + 1)
                }
                setTimeout(()=>NB(b))
            }
        }
        )
    })))
}
)
  , Hge = {
    ArrowLeft: "prev",
    ArrowUp: "prev",
    ArrowRight: "next",
    ArrowDown: "next",
    PageUp: "first",
    Home: "first",
    PageDown: "last",
    End: "last"
};
function Wge(e, t) {
    return t !== "rtl" ? e : e === "ArrowLeft" ? "ArrowRight" : e === "ArrowRight" ? "ArrowLeft" : e
}
function Gge(e, t, n) {
    const r = Wge(e.key, n);
    if (!(t === "vertical" && ["ArrowLeft", "ArrowRight"].includes(r)) && !(t === "horizontal" && ["ArrowUp", "ArrowDown"].includes(r)))
        return Hge[r]
}
function NB(e) {
    const t = document.activeElement;
    for (const n of e)
        if (n === t || (n.focus(),
        document.activeElement !== t))
            return
}
function Vge(e, t) {
    return e.map((n,r)=>e[(t + r) % e.length])
}
const Yge = Bge
  , jge = Uge
  , FB = "Tabs"
  , [Kge,Eve] = Zp(FB, [OB])
  , BB = OB()
  , [Xge,K4] = Kge(FB)
  , Zge = T.forwardRef((e,t)=>{
    const {__scopeTabs: n, value: r, onValueChange: i, defaultValue: o, orientation: s="horizontal", dir: a, activationMode: l="automatic", ...c} = e
      , u = RB(a)
      , [f,h] = F4({
        prop: r,
        onChange: i,
        defaultProp: o
    });
    return T.createElement(Xge, {
        scope: n,
        baseId: R4(),
        value: f,
        onValueChange: h,
        orientation: s,
        dir: u,
        activationMode: l
    }, T.createElement(pi.div, Ft({
        dir: u,
        "data-orientation": s
    }, c, {
        ref: t
    })))
}
)
  , qge = "TabsList"
  , Qge = T.forwardRef((e,t)=>{
    const {__scopeTabs: n, loop: r=!0, ...i} = e
      , o = K4(qge, n)
      , s = BB(n);
    return T.createElement(Yge, Ft({
        asChild: !0
    }, s, {
        orientation: o.orientation,
        dir: o.dir,
        loop: r
    }), T.createElement(pi.div, Ft({
        role: "tablist",
        "aria-orientation": o.orientation
    }, i, {
        ref: t
    })))
}
)
  , Jge = "TabsTrigger"
  , epe = T.forwardRef((e,t)=>{
    const {__scopeTabs: n, value: r, disabled: i=!1, ...o} = e
      , s = K4(Jge, n)
      , a = BB(n)
      , l = zB(s.baseId, r)
      , c = $B(s.baseId, r)
      , u = r === s.value;
    return T.createElement(jge, Ft({
        asChild: !0
    }, a, {
        focusable: !i,
        active: u
    }), T.createElement(pi.button, Ft({
        type: "button",
        role: "tab",
        "aria-selected": u,
        "aria-controls": c,
        "data-state": u ? "active" : "inactive",
        "data-disabled": i ? "" : void 0,
        disabled: i,
        id: l
    }, o, {
        ref: t,
        onMouseDown: Ir(e.onMouseDown, f=>{
            !i && f.button === 0 && f.ctrlKey === !1 ? s.onValueChange(r) : f.preventDefault()
        }
        ),
        onKeyDown: Ir(e.onKeyDown, f=>{
            [" ", "Enter"].includes(f.key) && s.onValueChange(r)
        }
        ),
        onFocus: Ir(e.onFocus, ()=>{
            const f = s.activationMode !== "manual";
            !u && !i && f && s.onValueChange(r)
        }
        )
    })))
}
)
  , tpe = "TabsContent"
  , npe = T.forwardRef((e,t)=>{
    const {__scopeTabs: n, value: r, forceMount: i, children: o, ...s} = e
      , a = K4(tpe, n)
      , l = zB(a.baseId, r)
      , c = $B(a.baseId, r)
      , u = r === a.value
      , f = T.useRef(u);
    return T.useEffect(()=>{
        const h = requestAnimationFrame(()=>f.current = !1);
        return ()=>cancelAnimationFrame(h)
    }
    , []),
    T.createElement(fy, {
        present: i || u
    }, ({present: h})=>T.createElement(pi.div, Ft({
        "data-state": u ? "active" : "inactive",
        "data-orientation": a.orientation,
        role: "tabpanel",
        "aria-labelledby": l,
        hidden: !h,
        id: c,
        tabIndex: 0
    }, s, {
        ref: t,
        style: {
            ...e.style,
            animationDuration: f.current ? "0s" : void 0
        }
    }), h && o))
}
);
function zB(e, t) {
    return `${e}-trigger-${t}`
}
function $B(e, t) {
    return `${e}-content-${t}`
}
const UB = Zge
  , HB = Qge
  , WB = epe
  , GB = npe
  , VB = ({children: e, ...t})=>g(HB, {
    className: "sidebar-triggers",
    ...t,
    children: e
});
VB.displayName = "SidebarTabTriggers";
const YB = ({children: e, tab: t, onSelect: n, ...r})=>g(WB, {
    value: t,
    asChild: !0,
    onSelect: n,
    children: g("button", {
        type: "button",
        className: "excalidraw-button sidebar-tab-trigger",
        ...r,
        children: e
    })
});
YB.displayName = "SidebarTabTrigger";
const jB = ({children: e, ...t})=>{
    const n = Wn()
      , r = Gn();
    if (!n.openSidebar)
        return null;
    const {name: i} = n.openSidebar;
    return g(UB, {
        className: "sidebar-tabs-root",
        value: n.openSidebar.tab,
        onValueChange: o=>r(s=>({
            ...s,
            openSidebar: {
                ...s.openSidebar,
                name: i,
                tab: o
            }
        })),
        ...t,
        children: e
    })
}
;
jB.displayName = "SidebarTabs";
const KB = ({tab: e, children: t, ...n})=>g(GB, {
    ...n,
    value: e,
    "data-testid": e,
    children: t
});
KB.displayName = "SidebarTab";
const X4 = mn(!1)
  , XB = T.forwardRef(({name: e, children: t, onDock: n, docked: r, className: i, ...o},s)=>{
    const a = Gn()
      , l = Lf(X4, cr);
    T.useLayoutEffect(()=>(l(!!r),
    ()=>{
        l(!1)
    }
    ), [l, r]);
    const c = T.useRef({});
    c.current.onCloseRequest = ()=>{
        a({
            openSidebar: null
        })
    }
    ,
    c.current.onDock = m=>n == null ? void 0 : n(m),
    c.current = lm(c.current, {
        docked: r,
        shouldRenderDockButton: !!n && r != null
    });
    const u = T.useRef(null);
    T.useImperativeHandle(s, ()=>u.current);
    const f = ur()
      , h = T.useCallback(()=>{
        document.querySelector(".Dialog") || a({
            openSidebar: null
        })
    }
    , [a]);
    return B4(u, T.useCallback(m=>{
        m.target.closest(".sidebar-trigger") || (!r || !f.editor.canFitSidebar) && h()
    }
    , [h, r, f.editor.canFitSidebar])),
    T.useEffect(()=>{
        const m = v=>{
            v.key === U.ESCAPE && (!r || !f.editor.canFitSidebar) && h()
        }
        ;
        return document.addEventListener(ce.KEYDOWN, m),
        ()=>{
            document.removeEventListener(ce.KEYDOWN, m)
        }
    }
    , [h, r, f.editor.canFitSidebar]),
    g(Wo, {
        ...o,
        className: xe("sidebar", {
            "sidebar--docked": r
        }, i),
        ref: u,
        children: g(MB.Provider, {
            value: c.current,
            children: t
        })
    })
}
);
XB.displayName = "SidebarInner";
const Gc = Object.assign(T.forwardRef((e,t)=>{
    var l;
    const n = Wn()
      , {onStateChange: r} = e
      , i = T.useRef(n.openSidebar);
    T.useEffect(()=>{
        var c, u, f, h, m;
        (!n.openSidebar && ((c = i == null ? void 0 : i.current) == null ? void 0 : c.name) === e.name || ((u = n.openSidebar) == null ? void 0 : u.name) === e.name && ((f = i == null ? void 0 : i.current) == null ? void 0 : f.name) !== e.name || ((h = i.current) == null ? void 0 : h.name) === e.name) && n.openSidebar !== i.current && (r == null || r(((m = n.openSidebar) == null ? void 0 : m.name) !== e.name ? null : n.openSidebar)),
        i.current = n.openSidebar
    }
    , [n.openSidebar, r, e.name]);
    const [o,s] = T.useState(!1);
    return T.useLayoutEffect(()=>(s(!0),
    ()=>s(!1)), []),
    o && ((l = n.openSidebar) == null ? void 0 : l.name) === e.name ? T.createElement(XB, {
        ...e,
        ref: t,
        key: e.name
    }) : null
}
), {
    Header: LB,
    TabTriggers: VB,
    TabTrigger: YB,
    Tabs: jB,
    Tab: KB,
    Trigger: PB
});
Gc.displayName = "Sidebar";
const ZB = mn({
    active: !1
});
async function tx({title: e, description: t, actionLabel: n, color: r}) {
    return new Promise(i=>{
        Ss.set(ZB, {
            active: !0,
            onConfirm: ()=>i(!0),
            onClose: ()=>i(!1),
            onReject: ()=>i(!1),
            title: e,
            description: t,
            actionLabel: n,
            color: r
        })
    }
    )
}
const qB = ({value: e, shortcut: t, onChange: n, choices: r, children: i, name: o})=>{
    const s = ur();
    return L(Se, {
        children: [L("div", {
            className: "dropdown-menu-item-base dropdown-menu-item-bare",
            children: [g("label", {
                className: "dropdown-menu-item__text",
                htmlFor: o,
                children: i
            }), g(yB, {
                name: o,
                value: e,
                onChange: n,
                choices: r
            })]
        }), t && !s.editor.isMobile && g("div", {
            className: "dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",
            children: t
        })]
    })
}
;
qB.displayName = "DropdownMenuItemContentRadio";
const QB = ()=>{
    const {t: e} = vn()
      , t = zi()
      , n = Iy();
    return t.isActionEnabled(G_) ? g(Bi, {
        icon: O6,
        onSelect: async()=>{
            (!n.length || await tx({
                title: e("overwriteConfirm.modal.loadFromFile.title"),
                actionLabel: e("overwriteConfirm.modal.loadFromFile.button"),
                color: "warning",
                description: g(li, {
                    i18nKey: "overwriteConfirm.modal.loadFromFile.description",
                    bold: i=>g("strong", {
                        children: i
                    }),
                    br: ()=>g("br", {})
                })
            })) && t.executeAction(G_)
        }
        ,
        "data-testid": "load-button",
        shortcut: gi("loadScene"),
        "aria-label": e("buttons.load"),
        children: e("buttons.load")
    }) : null
}
;
QB.displayName = "LoadScene";
const JB = ()=>{
    const {t: e} = vn()
      , t = zi();
    return t.isActionEnabled(OA) ? g(Bi, {
        shortcut: gi("saveScene"),
        "data-testid": "save-button",
        onSelect: ()=>t.executeAction(OA),
        icon: vee,
        "aria-label": `${e("buttons.save")}`,
        children: `${e("buttons.save")}`
    }) : null
}
;
JB.displayName = "SaveToActiveFile";
const ez = ()=>{
    const e = Gn()
      , {t} = vn();
    return g(Bi, {
        icon: AD,
        "data-testid": "image-export-button",
        onSelect: ()=>e({
            openDialog: {
                name: "imageExport"
            }
        }),
        shortcut: gi("imageExport"),
        "aria-label": t("buttons.exportImage"),
        children: t("buttons.exportImage")
    })
}
;
ez.displayName = "SaveAsImage";
const tz = e=>{
    const t = Gn()
      , {t: n} = vn();
    return g(Bi, {
        icon: $D,
        "data-testid": "command-palette-button",
        onSelect: ()=>{
            at("command_palette", "open", "menu"),
            t({
                openDialog: {
                    name: "commandPalette"
                }
            })
        }
        ,
        shortcut: gi("commandPalette"),
        "aria-label": n("commandPalette.title"),
        className: e == null ? void 0 : e.className,
        children: n("commandPalette.title")
    })
}
;
tz.displayName = "CommandPalette";
const nz = ()=>{
    const {t: e} = vn()
      , t = zi();
    return g(Bi, {
        "data-testid": "help-menu-item",
        icon: R6,
        onSelect: ()=>t.executeAction(W4),
        shortcut: "?",
        "aria-label": e("helpDialog.title"),
        children: e("helpDialog.title")
    })
}
;
nz.displayName = "Help";
const rz = ()=>{
    const {t: e} = vn()
      , t = Lf(xy, cr);
    return zi().isActionEnabled(Cg) ? g(Bi, {
        icon: hf,
        onSelect: ()=>t("clearCanvas"),
        "data-testid": "clear-canvas-button",
        "aria-label": e("buttons.clearReset"),
        children: e("buttons.clearReset")
    }) : null
}
;
rz.displayName = "ClearCanvas";
const iz = e=>{
    const {t} = vn()
      , n = Wn()
      , r = zi()
      , i = gi("toggleTheme");
    return r.isActionEnabled(G2) ? e != null && e.allowSystemTheme ? g(qB, {
        name: "theme",
        value: e.theme,
        onChange: o=>e.onSelect(o),
        choices: [{
            value: Oe.LIGHT,
            label: n_,
            ariaLabel: `${t("buttons.lightMode")} - ${i}`
        }, {
            value: Oe.DARK,
            label: t_,
            ariaLabel: `${t("buttons.darkMode")} - ${i}`
        }, {
            value: "system",
            label: Lte,
            ariaLabel: t("buttons.systemMode")
        }],
        children: t("labels.theme")
    }) : g(Bi, {
        onSelect: o=>{
            if (o.preventDefault(),
            e != null && e.onSelect)
                e.onSelect(n.theme === Oe.DARK ? Oe.LIGHT : Oe.DARK);
            else
                return r.executeAction(G2)
        }
        ,
        icon: n.theme === Oe.DARK ? n_ : t_,
        "data-testid": "toggle-dark-mode",
        shortcut: i,
        "aria-label": n.theme === Oe.DARK ? t("buttons.lightMode") : t("buttons.darkMode"),
        children: n.theme === Oe.DARK ? t("buttons.lightMode") : t("buttons.darkMode")
    }) : null
}
;
iz.displayName = "ToggleTheme";
const oz = ()=>{
    const {t: e} = vn()
      , t = Wn()
      , n = zi()
      , r = i1();
    return t.viewModeEnabled || !r.UIOptions.canvasActions.changeViewBackgroundColor ? null : L("div", {
        style: {
            marginTop: "0.5rem"
        },
        children: [g("div", {
            "data-testid": "canvas-background-label",
            style: {
                fontSize: ".75rem",
                marginBottom: ".5rem"
            },
            children: e("labels.canvasBackground")
        }), g("div", {
            style: {
                padding: "0 0.625rem"
            },
            children: n.renderAction("changeViewBackgroundColor")
        })]
    })
}
;
oz.displayName = "ChangeCanvasBackground";
const sz = ()=>{
    const {t: e} = vn()
      , t = Gn();
    return g(Bi, {
        icon: Nv,
        onSelect: ()=>{
            t({
                openDialog: {
                    name: "jsonExport"
                }
            })
        }
        ,
        "data-testid": "json-export-button",
        "aria-label": e("buttons.export"),
        children: e("buttons.export")
    })
}
;
sz.displayName = "Export";
const az = ()=>{
    const {t: e} = vn();
    return L(Se, {
        children: [g(Tg, {
            icon: D6,
            href: "https://github.com/excalidraw/excalidraw",
            "aria-label": "GitHub",
            children: "GitHub"
        }), g(Tg, {
            icon: TD,
            href: "https://x.com/excalidraw",
            "aria-label": "X",
            children: e("labels.followUs")
        }), g(Tg, {
            icon: kD,
            href: "https://discord.gg/UexuTaE",
            "aria-label": "Discord",
            children: e("labels.discordChat")
        })]
    })
}
;
az.displayName = "Socials";
const lz = ({onSelect: e, isCollaborating: t})=>{
    const {t: n} = vn();
    return g(Bi, {
        "data-testid": "collab-button",
        icon: F6,
        className: xe({
            "active-collab": t
        }),
        onSelect: e,
        children: n("labels.liveCollaboration")
    })
}
;
lz.displayName = "LiveCollaborationTrigger";
const rpe = Object.freeze(Object.defineProperty({
    __proto__: null,
    ChangeCanvasBackground: oz,
    ClearCanvas: rz,
    CommandPalette: tz,
    Export: sz,
    Help: nz,
    LiveCollaborationTrigger: lz,
    LoadScene: QB,
    SaveAsImage: ez,
    SaveToActiveFile: JB,
    Socials: az,
    ToggleTheme: iz
}, Symbol.toStringTag, {
    value: "Module"
}))
  , t1 = (e,t)=>{
    const n = mn(0)
      , r = i=>{
        const {jotaiScope: o} = Kr()
          , [,s] = Ot(n, o)
          , a = T.useRef({
            preferHost: !1,
            counter: 0
        });
        return T.useLayoutEffect(()=>{
            const l = a.current;
            return s(c=>{
                const u = c + 1;
                return l.counter = u,
                u
            }
            ),
            ()=>{
                s(c=>{
                    const u = c - 1;
                    return l.counter = u,
                    u || (l.preferHost = !1),
                    u
                }
                )
            }
        }
        , [s]),
        i.__fallback || (a.current.preferHost = !0),
        !a.current.counter && i.__fallback && a.current.preferHost || a.current.counter > 1 && i.__fallback ? null : g(t, {
            ...i
        })
    }
    ;
    return r.displayName = e,
    r
}
  , Ct = Object.assign(t1("MainMenu", ({children: e, onSelect: t})=>{
    var a;
    const {MainMenuTunnel: n} = Kr()
      , r = ur()
      , i = Wn()
      , o = Gn()
      , s = r.editor.isMobile ? void 0 : ()=>o({
        openMenu: null
    });
    return g(n.In, {
        children: L(ut, {
            open: i.openMenu === "canvas",
            children: [g(ut.Trigger, {
                onToggle: ()=>{
                    o({
                        openMenu: i.openMenu === "canvas" ? null : "canvas"
                    })
                }
                ,
                "data-testid": "main-menu-trigger",
                className: "main-menu-trigger",
                children: CD
            }), L(ut.Content, {
                onClickOutside: s,
                onSelect: Lv(t, ()=>{
                    o({
                        openMenu: null
                    })
                }
                ),
                children: [e, r.editor.isMobile && i.collaborators.size > 0 && L("fieldset", {
                    className: "UserList-Wrapper",
                    children: [g("legend", {
                        children: k("labels.collaborators")
                    }), g(TB, {
                        mobile: !0,
                        collaborators: i.collaborators,
                        userToFollow: ((a = i.userToFollow) == null ? void 0 : a.socketId) || null
                    })]
                })]
            })]
        })
    })
}
), {
    Trigger: ut.Trigger,
    Item: ut.Item,
    ItemLink: ut.ItemLink,
    ItemCustom: ut.ItemCustom,
    Group: ut.Group,
    Separator: ut.Separator,
    DefaultItems: rpe
})
  , Z4 = ({title: e, children: t, actionLabel: n, onClick: r})=>L("div", {
    className: "OverwriteConfirm__Actions__Action",
    children: [g("h4", {
        children: e
    }), g("div", {
        className: "OverwriteConfirm__Actions__Action__content",
        children: t
    }), g(co, {
        variant: "outlined",
        color: "muted",
        label: n,
        size: "large",
        fullWidth: !0,
        onClick: r
    })]
})
  , ipe = ()=>{
    const {t: e} = vn()
      , t = zi()
      , n = Gn();
    return g(Z4, {
        title: e("overwriteConfirm.action.exportToImage.title"),
        actionLabel: e("overwriteConfirm.action.exportToImage.button"),
        onClick: ()=>{
            t.executeAction(BF, "ui", !0),
            n({
                openDialog: {
                    name: "imageExport"
                }
            })
        }
        ,
        children: e("overwriteConfirm.action.exportToImage.description")
    })
}
  , ope = ()=>{
    const {t: e} = vn()
      , t = zi();
    return g(Z4, {
        title: e("overwriteConfirm.action.saveToDisk.title"),
        actionLabel: e("overwriteConfirm.action.saveToDisk.button"),
        onClick: ()=>{
            t.executeAction(zF, "ui")
        }
        ,
        children: e("overwriteConfirm.action.saveToDisk.description")
    })
}
  , mM = Object.assign(({children: e})=>g("div", {
    className: "OverwriteConfirm__Actions",
    children: e
}), {
    ExportToImage: ipe,
    SaveToDisk: ope
})
  , Vc = Object.assign(t1("OverwriteConfirmDialog", ({children: e})=>{
    const {OverwriteConfirmDialogTunnel: t} = Kr()
      , [n,r] = Ot(ZB, cr);
    if (!n.active)
        return null;
    const i = ()=>{
        n.onClose(),
        r(s=>({
            ...s,
            active: !1
        }))
    }
      , o = ()=>{
        n.onConfirm(),
        r(s=>({
            ...s,
            active: !1
        }))
    }
    ;
    return g(t.In, {
        children: g(mi, {
            onCloseRequest: i,
            title: !1,
            size: 916,
            children: L("div", {
                className: "OverwriteConfirm",
                children: [g("h3", {
                    children: n.title
                }), L("div", {
                    className: `OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`,
                    children: [g("div", {
                        className: "OverwriteConfirm__Description__icon",
                        children: hte
                    }), g("div", {
                        children: n.description
                    }), g("div", {
                        className: "OverwriteConfirm__Description__spacer"
                    }), g(co, {
                        color: n.color,
                        size: "large",
                        label: n.actionLabel,
                        onClick: o
                    })]
                }), g(mM, {
                    children: e
                })]
            })
        })
    })
}
), {
    Actions: mM,
    Action: Z4
})
  , cz = t1("DefaultSidebarTrigger", e=>{
    const {DefaultSidebarTriggerTunnel: t} = Kr();
    return g(t.In, {
        children: g(Gc.Trigger, {
            ...e,
            className: "default-sidebar-trigger",
            name: Ll.name
        })
    })
}
);
cz.displayName = "DefaultSidebarTrigger";
const uz = ({children: e, ...t})=>{
    const {DefaultSidebarTabTriggersTunnel: n} = Kr();
    return g(n.In, {
        children: g(Gc.TabTriggers, {
            ...t,
            children: e
        })
    })
}
;
uz.displayName = "DefaultTabTriggers";
const vM = Object.assign(t1("DefaultSidebar", ({children: e, className: t, onDock: n, docked: r, ...i})=>{
    const o = Wn()
      , s = Gn()
      , {DefaultSidebarTabTriggersTunnel: a} = Kr();
    return T.createElement(Gc, {
        ...i,
        name: "default",
        key: "default",
        className: xe("default-sidebar", t),
        docked: r ?? o.defaultSidebarDockedPreference,
        onDock: n === !1 || !n && r != null ? void 0 : Lv(n, l=>{
            s({
                defaultSidebarDockedPreference: l
            })
        }
        )
    }, L(Gc.Tabs, {
        children: [L(Gc.Header, {
            children: [i.__fallback && g("div", {
                style: {
                    color: "var(--color-primary)",
                    fontSize: "1.2em",
                    fontWeight: "bold",
                    textOverflow: "ellipsis",
                    overflow: "hidden",
                    whiteSpace: "nowrap",
                    paddingRight: "1em"
                },
                children: k("toolBar.library")
            }), g(a.Out, {})]
        }), g(Gc.Tab, {
            tab: E6,
            children: g(Phe, {})
        }), e]
    }))
}
), {
    Trigger: cz,
    TabTriggers: uz
})
  , spe = "small"
  , ape = e=>L("label", {
    className: xe("ToolIcon ToolIcon__LaserPointer", `ToolIcon_size_${spe}`, {
        "is-mobile": e.isMobile
    }),
    title: `${e.title}`,
    children: [g("input", {
        className: "ToolIcon_type_checkbox",
        type: "checkbox",
        name: e.name,
        onChange: e.onChange,
        checked: e.checked,
        "aria-label": e.title,
        "data-testid": "toolbar-LaserPointer"
    }), g("div", {
        className: "ToolIcon__icon",
        children: BD
    })]
})
  , Ph = e=>g("p", {
    className: "excalidraw__paragraph",
    style: e.style,
    children: e.children
})
  , q4 = e=>{
    const t = Gn()
      , n = T.useRef(null)
      , r = T.useRef(0);
    return g(UB, {
        ref: n,
        className: "ttd-dialog-tabs-root",
        value: e.tab,
        onValueChange: i=>{
            var s;
            if (!i)
                return;
            const o = (s = n.current) == null ? void 0 : s.closest(".Modal__content");
            if (o) {
                const a = o.offsetHeight || 0;
                a > r.current && (r.current = a,
                o.style.minHeight = `min(${r.current}px, 100%)`)
            }
            e.dialog === "settings" && j3(["text-to-diagram", "diagram-to-code"], i) ? t({
                openDialog: {
                    name: e.dialog,
                    tab: i,
                    source: "settings"
                }
            }) : e.dialog === "ttd" && j3(["text-to-diagram", "mermaid"], i) && t({
                openDialog: {
                    name: e.dialog,
                    tab: i
                }
            })
        }
        ,
        children: e.children
    })
}
;
q4.displayName = "TTDDialogTabs";
const K2 = ({tab: e, children: t, ...n})=>g(GB, {
    ...n,
    value: e,
    children: t
});
K2.displayName = "TTDDialogTab";
const lpe = e=>{
    var a;
    const [t,n] = T.useState(e.openAIKey || "")
      , [r,i] = T.useState(e.isPersisted)
      , o = Wn()
      , s = ()=>{
        e.onConfirm(t.trim(), r)
    }
    ;
    return ((a = o.openDialog) == null ? void 0 : a.name) !== "settings" ? null : g(mi, {
        onCloseRequest: ()=>{
            e.onClose(),
            e.onConfirm(t.trim(), r)
        }
        ,
        title: L("div", {
            style: {
                display: "flex"
            },
            children: ["Wireframe to Code (AI)", " ", g("div", {
                style: {
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                    padding: "0.1rem 0.5rem",
                    marginLeft: "1rem",
                    fontSize: 14,
                    borderRadius: "12px",
                    background: "var(--color-promo)",
                    color: "var(--color-surface-lowest)"
                },
                children: "Experimental"
            })]
        }),
        className: "MagicSettings",
        autofocus: !1,
        children: g(q4, {
            dialog: "settings",
            tab: o.openDialog.tab,
            children: L(K2, {
                tab: "diagram-to-code",
                children: [L(Ph, {
                    children: ["For the diagram-to-code feature we use", " ", g(eu, {
                        icon: i_
                    }), "OpenAI."]
                }), L(Ph, {
                    children: ["While the OpenAI API is in beta, its use is strictly limited — as such we require you use your own API key. You can create an", " ", g("a", {
                        href: "https://platform.openai.com/login?launch",
                        rel: "noopener noreferrer",
                        target: "_blank",
                        children: "OpenAI account"
                    }), ", add a small credit (5 USD minimum), and", " ", g("a", {
                        href: "https://platform.openai.com/api-keys",
                        rel: "noopener noreferrer",
                        target: "_blank",
                        children: "generate your own API key"
                    }), "."]
                }), g(Ph, {
                    children: "Your OpenAI key does not leave the browser, and you can also set your own limit in your OpenAI account dashboard if needed."
                }), g(bp, {
                    isRedacted: !0,
                    value: t,
                    placeholder: "Paste your API key here",
                    label: "OpenAI API key",
                    onChange: l=>{
                        n(l),
                        e.onChange(l.trim(), r)
                    }
                    ,
                    selectOnRender: !0,
                    onKeyDown: l=>l.key === U.ENTER && s()
                }), g(Ph, {
                    children: "By default, your API token is not persisted anywhere so you'll need to insert it again after reload. But, you can persist locally in your browser below."
                }), g(Ey, {
                    checked: r,
                    onChange: i,
                    children: "Persist API key in browser storage"
                }), L(Ph, {
                    children: ["Once API key is set, you can use the ", g(eu, {
                        icon: B6
                    }), " ", "tool to wrap your elements in a frame that will then allow you to turn it into code. This dialog can be accessed using the", " ", g("b", {
                        children: "AI Settings"
                    }), " ", g(eu, {
                        icon: i_
                    }), "."]
                }), g(co, {
                    className: "MagicSettings__confirm",
                    size: "large",
                    label: "Confirm",
                    onClick: s
                })]
            })
        })
    })
}
  , cpe = e=>{
    const [t,n] = T.useState(!0);
    return T.useEffect(()=>{
        const r = async()=>{
            await zR(i),
            n(!1)
        }
          , i = kv.find(o=>o.code === e.langCode) || ku;
        r()
    }
    , [e.langCode]),
    t ? g(SB, {
        theme: e.theme
    }) : e.children
}
  , dz = ({children: e})=>{
    const {FooterCenterTunnel: t} = Kr()
      , n = Wn();
    return g(t.In, {
        children: g("div", {
            className: xe("footer-center zen-mode-transition", {
                "layer-ui__wrapper__footer-left--transition-bottom": n.zenModeEnabled
            }),
            children: e
        })
    })
}
;
dz.displayName = "FooterCenter";
const upe = ()=>g("svg", {
    viewBox: "0 0 40 40",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    className: "ExcalidrawLogo-icon",
    children: g("path", {
        d: "M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",
        fill: "currentColor"
    })
})
  , dpe = ()=>L("svg", {
    viewBox: "0 0 450 55",
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    className: "ExcalidrawLogo-text",
    children: [g("path", {
        d: "M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",
        transform: "translate(-144.023 -51.76)"
    }), g("path", {
        d: "M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",
        transform: "translate(-144.023 -51.76)"
    }), g("path", {
        d: "M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",
        transform: "translate(-144.023 -51.76)"
    }), g("path", {
        d: "m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",
        fill: "currentColor",
        transform: "translate(-144.023 -51.76)"
    })]
})
  , fz = ({style: e, size: t="small", withText: n})=>L("div", {
    className: `ExcalidrawLogo is-${t}`,
    style: e,
    children: [g(upe, {}), n && g(dpe, {})]
})
  , Q4 = ({icon: e, shortcut: t, children: n})=>{
    const r = ur();
    return L(Se, {
        children: [g("div", {
            className: "welcome-screen-menu-item__icon",
            children: e
        }), g("div", {
            className: "welcome-screen-menu-item__text",
            children: n
        }), t && !r.editor.isMobile && g("div", {
            className: "welcome-screen-menu-item__shortcut",
            children: t
        })]
    })
}
;
Q4.displayName = "WelcomeScreenMenuItemContent";
const n1 = ({onSelect: e, children: t, icon: n, shortcut: r, className: i="", ...o})=>g("button", {
    ...o,
    type: "button",
    className: `welcome-screen-menu-item ${i}`,
    onClick: e,
    children: g(Q4, {
        icon: n,
        shortcut: r,
        children: t
    })
});
n1.displayName = "WelcomeScreenMenuItem";
const hz = ({children: e, href: t, icon: n, shortcut: r, className: i="", ...o})=>g("a", {
    ...o,
    className: `welcome-screen-menu-item ${i}`,
    href: t,
    target: "_blank",
    rel: "noreferrer",
    children: g(Q4, {
        icon: n,
        shortcut: r,
        children: e
    })
});
hz.displayName = "WelcomeScreenMenuItemLink";
const qo = ({children: e})=>{
    const {WelcomeScreenCenterTunnel: t} = Kr();
    return g(t.In, {
        children: g("div", {
            className: "welcome-screen-center",
            children: e || L(Se, {
                children: [g(J4, {}), g(e5, {
                    children: k("welcomeScreen.defaults.center_heading")
                }), L(t5, {
                    children: [g(r5, {}), g(n5, {})]
                })]
            })
        })
    })
}
;
qo.displayName = "Center";
const J4 = ({children: e})=>g("div", {
    className: "welcome-screen-center__logo excalifont welcome-screen-decor",
    children: e || g(fz, {
        withText: !0
    })
});
J4.displayName = "Logo";
const e5 = ({children: e})=>g("div", {
    className: "welcome-screen-center__heading welcome-screen-decor excalifont",
    children: e
});
e5.displayName = "Heading";
const t5 = ({children: e})=>g("div", {
    className: "welcome-screen-menu",
    children: e
});
t5.displayName = "Menu";
const n5 = ()=>{
    const e = zi();
    return g(n1, {
        onSelect: ()=>e.executeAction(W4),
        shortcut: "?",
        icon: R6,
        children: k("helpDialog.title")
    })
}
;
n5.displayName = "MenuItemHelp";
const r5 = ()=>{
    const e = Wn()
      , t = zi();
    return e.viewModeEnabled ? null : g(n1, {
        onSelect: ()=>t.executeAction(G_),
        shortcut: gi("loadScene"),
        icon: O6,
        children: k("buttons.load")
    })
}
;
r5.displayName = "MenuItemLoadScene";
const gz = ({onSelect: e})=>{
    const {t} = vn();
    return g(n1, {
        shortcut: null,
        onSelect: e,
        icon: F6,
        children: t("labels.liveCollaboration")
    })
}
;
gz.displayName = "MenuItemLiveCollaborationTrigger";
qo.Logo = J4;
qo.Heading = e5;
qo.Menu = t5;
qo.MenuItem = n1;
qo.MenuItemLink = hz;
qo.MenuItemHelp = n5;
qo.MenuItemLoadScene = r5;
qo.MenuItemLiveCollaborationTrigger = gz;
const i5 = ({children: e})=>{
    const {WelcomeScreenMenuHintTunnel: t} = Kr();
    return g(t.In, {
        children: L("div", {
            className: "excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",
            children: [tee, g("div", {
                className: "welcome-screen-decor-hint__label",
                children: e || k("welcomeScreen.defaults.menuHint")
            })]
        })
    })
}
;
i5.displayName = "MenuHint";
const o5 = ({children: e})=>{
    const {WelcomeScreenToolbarHintTunnel: t} = Kr();
    return g(t.In, {
        children: L("div", {
            className: "excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",
            children: [g("div", {
                className: "welcome-screen-decor-hint__label",
                children: e || k("welcomeScreen.defaults.toolbarHint")
            }), ree]
        })
    })
}
;
o5.displayName = "ToolbarHint";
const s5 = ({children: e})=>{
    const {WelcomeScreenHelpHintTunnel: t} = Kr();
    return g(t.In, {
        children: L("div", {
            className: "excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",
            children: [g("div", {
                children: e || k("welcomeScreen.defaults.helpHint")
            }), nee]
        })
    })
}
;
s5.displayName = "HelpHint";
const Dr = e=>g(Se, {
    children: e.children || L(Se, {
        children: [g(qo, {}), g(i5, {}), g(o5, {}), g(s5, {})]
    })
});
Dr.displayName = "WelcomeScreen";
Dr.Center = qo;
Dr.Hints = {
    MenuHint: i5,
    ToolbarHint: o5,
    HelpHint: s5
};
const pz = ({isCollaborating: e, onSelect: t, ...n})=>{
    const r = Wn()
      , i = r.width < 830;
    return L(Ep, {
        ...n,
        className: xe("collab-button", {
            active: e
        }),
        type: "button",
        onSelect: t,
        style: {
            position: "relative",
            width: i ? void 0 : "auto"
        },
        title: k("labels.liveCollaboration"),
        children: [i ? N6 : k("labels.share"), r.collaborators.size > 0 && g("div", {
            className: "CollabButton-collaborators",
            children: r.collaborators.size
        })]
    })
}
;
pz.displayName = "LiveCollaborationTrigger";
const fpe = (e,t,n)=>{
    var r, i, o;
    return !!(t && (t.id === ((r = e.editingElement) == null ? void 0 : r.id) || t.id === ((i = e.resizingElement) == null ? void 0 : i.id) || t.id === ((o = e.newElement) == null ? void 0 : o.id) || t.version > n.version || t.version === n.version && t.versionNonce < n.versionNonce))
}
  , hpe = ca((e,t,n)=>{
    if (window != null && window.DEBUG_FRACTIONAL_INDICES) {
        const r = ka(e.map(i=>({
            ...i
        })));
        I4(r, {
            shouldThrow: UP.TEST === "production",
            includeBoundTextValidation: !0,
            reconciliationContext: {
                localElements: t,
                remoteElements: n
            }
        })
    }
}
, 1e3 * 60, {
    leading: !0,
    trailing: !1
})
  , a5 = (e,t,n)=>{
    const r = De(e)
      , i = []
      , o = new Set;
    for (const a of t)
        if (!o.has(a.id)) {
            const l = r.get(a.id)
              , c = fpe(n, l, a);
            l && c ? (i.push(l),
            o.add(l.id)) : (i.push(a),
            o.add(a.id))
        }
    for (const a of e)
        o.has(a.id) || (i.push(a),
        o.add(a.id));
    const s = SN(i);
    return hpe(s, e, t),
    ka(s),
    s
}
;
var X2 = {
    exports: {}
};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
X2.exports;
(function(e, t) {
    (function() {
        var n, r = "4.17.21", i = 200, o = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.", s = "Expected a function", a = "Invalid `variable` option passed into `_.template`", l = "__lodash_hash_undefined__", c = 500, u = "__lodash_placeholder__", f = 1, h = 2, m = 4, v = 1, y = 2, E = 1, b = 2, _ = 4, x = 8, C = 16, P = 32, M = 64, A = 128, I = 256, O = 512, N = 30, $ = "...", V = 800, z = 16, j = 1, re = 2, se = 3, ae = 1 / 0, q = 9007199254740991, K = 17976931348623157e292, G = NaN, H = 4294967295, J = H - 1, te = H >>> 1, oe = [["ary", A], ["bind", E], ["bindKey", b], ["curry", x], ["curryRight", C], ["flip", O], ["partial", P], ["partialRight", M], ["rearg", I]], de = "[object Arguments]", pe = "[object Array]", be = "[object AsyncFunction]", tt = "[object Boolean]", Je = "[object Date]", nt = "[object DOMException]", ot = "[object Error]", kt = "[object Function]", dr = "[object GeneratorFunction]", Wt = "[object Map]", fr = "[object Number]", kr = "[object Null]", Vn = "[object Object]", Rn = "[object Promise]", Tr = "[object Proxy]", Dn = "[object RegExp]", Xr = "[object Set]", $i = "[object String]", Nu = "[object Symbol]", My = "[object Undefined]", Kf = "[object WeakMap]", k$ = "[object WeakSet]", Xf = "[object ArrayBuffer]", Fu = "[object DataView]", Ly = "[object Float32Array]", Py = "[object Float64Array]", Ry = "[object Int8Array]", Dy = "[object Int16Array]", Oy = "[object Int32Array]", Ny = "[object Uint8Array]", Fy = "[object Uint8ClampedArray]", By = "[object Uint16Array]", zy = "[object Uint32Array]", T$ = /\b__p \+= '';/g, A$ = /\b(__p \+=) '' \+/g, M$ = /(__e\(.*?\)|\b__t\)) \+\n'';/g, R5 = /&(?:amp|lt|gt|quot|#39);/g, D5 = /[&<>"']/g, L$ = RegExp(R5.source), P$ = RegExp(D5.source), R$ = /<%-([\s\S]+?)%>/g, D$ = /<%([\s\S]+?)%>/g, O5 = /<%=([\s\S]+?)%>/g, O$ = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, N$ = /^\w*$/, F$ = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, $y = /[\\^$.*+?()[\]{}|]/g, B$ = RegExp($y.source), Uy = /^\s+/, z$ = /\s/, $$ = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/, U$ = /\{\n\/\* \[wrapped with (.+)\] \*/, H$ = /,? & /, W$ = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g, G$ = /[()=,{}\[\]\/\s]/, V$ = /\\(\\)?/g, Y$ = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, N5 = /\w*$/, j$ = /^[-+]0x[0-9a-f]+$/i, K$ = /^0b[01]+$/i, X$ = /^\[object .+?Constructor\]$/, Z$ = /^0o[0-7]+$/i, q$ = /^(?:0|[1-9]\d*)$/, Q$ = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, s1 = /($^)/, J$ = /['\n\r\u2028\u2029\\]/g, a1 = "\\ud800-\\udfff", eU = "\\u0300-\\u036f", tU = "\\ufe20-\\ufe2f", nU = "\\u20d0-\\u20ff", F5 = eU + tU + nU, B5 = "\\u2700-\\u27bf", z5 = "a-z\\xdf-\\xf6\\xf8-\\xff", rU = "\\xac\\xb1\\xd7\\xf7", iU = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", oU = "\\u2000-\\u206f", sU = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", $5 = "A-Z\\xc0-\\xd6\\xd8-\\xde", U5 = "\\ufe0e\\ufe0f", H5 = rU + iU + oU + sU, Hy = "['’]", aU = "[" + a1 + "]", W5 = "[" + H5 + "]", l1 = "[" + F5 + "]", G5 = "\\d+", lU = "[" + B5 + "]", V5 = "[" + z5 + "]", Y5 = "[^" + a1 + H5 + G5 + B5 + z5 + $5 + "]", Wy = "\\ud83c[\\udffb-\\udfff]", cU = "(?:" + l1 + "|" + Wy + ")", j5 = "[^" + a1 + "]", Gy = "(?:\\ud83c[\\udde6-\\uddff]){2}", Vy = "[\\ud800-\\udbff][\\udc00-\\udfff]", Bu = "[" + $5 + "]", K5 = "\\u200d", X5 = "(?:" + V5 + "|" + Y5 + ")", uU = "(?:" + Bu + "|" + Y5 + ")", Z5 = "(?:" + Hy + "(?:d|ll|m|re|s|t|ve))?", q5 = "(?:" + Hy + "(?:D|LL|M|RE|S|T|VE))?", Q5 = cU + "?", J5 = "[" + U5 + "]?", dU = "(?:" + K5 + "(?:" + [j5, Gy, Vy].join("|") + ")" + J5 + Q5 + ")*", fU = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", hU = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", eS = J5 + Q5 + dU, gU = "(?:" + [lU, Gy, Vy].join("|") + ")" + eS, pU = "(?:" + [j5 + l1 + "?", l1, Gy, Vy, aU].join("|") + ")", mU = RegExp(Hy, "g"), vU = RegExp(l1, "g"), Yy = RegExp(Wy + "(?=" + Wy + ")|" + pU + eS, "g"), yU = RegExp([Bu + "?" + V5 + "+" + Z5 + "(?=" + [W5, Bu, "$"].join("|") + ")", uU + "+" + q5 + "(?=" + [W5, Bu + X5, "$"].join("|") + ")", Bu + "?" + X5 + "+" + Z5, Bu + "+" + q5, hU, fU, G5, gU].join("|"), "g"), wU = RegExp("[" + K5 + a1 + F5 + U5 + "]"), EU = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/, bU = ["Array", "Buffer", "DataView", "Date", "Error", "Float32Array", "Float64Array", "Function", "Int8Array", "Int16Array", "Int32Array", "Map", "Math", "Object", "Promise", "RegExp", "Set", "String", "Symbol", "TypeError", "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array", "WeakMap", "_", "clearTimeout", "isFinite", "parseInt", "setTimeout"], _U = -1, jt = {};
        jt[Ly] = jt[Py] = jt[Ry] = jt[Dy] = jt[Oy] = jt[Ny] = jt[Fy] = jt[By] = jt[zy] = !0,
        jt[de] = jt[pe] = jt[Xf] = jt[tt] = jt[Fu] = jt[Je] = jt[ot] = jt[kt] = jt[Wt] = jt[fr] = jt[Vn] = jt[Dn] = jt[Xr] = jt[$i] = jt[Kf] = !1;
        var Gt = {};
        Gt[de] = Gt[pe] = Gt[Xf] = Gt[Fu] = Gt[tt] = Gt[Je] = Gt[Ly] = Gt[Py] = Gt[Ry] = Gt[Dy] = Gt[Oy] = Gt[Wt] = Gt[fr] = Gt[Vn] = Gt[Dn] = Gt[Xr] = Gt[$i] = Gt[Nu] = Gt[Ny] = Gt[Fy] = Gt[By] = Gt[zy] = !0,
        Gt[ot] = Gt[kt] = Gt[Kf] = !1;
        var xU = {
            À: "A",
            Á: "A",
            Â: "A",
            Ã: "A",
            Ä: "A",
            Å: "A",
            à: "a",
            á: "a",
            â: "a",
            ã: "a",
            ä: "a",
            å: "a",
            Ç: "C",
            ç: "c",
            Ð: "D",
            ð: "d",
            È: "E",
            É: "E",
            Ê: "E",
            Ë: "E",
            è: "e",
            é: "e",
            ê: "e",
            ë: "e",
            Ì: "I",
            Í: "I",
            Î: "I",
            Ï: "I",
            ì: "i",
            í: "i",
            î: "i",
            ï: "i",
            Ñ: "N",
            ñ: "n",
            Ò: "O",
            Ó: "O",
            Ô: "O",
            Õ: "O",
            Ö: "O",
            Ø: "O",
            ò: "o",
            ó: "o",
            ô: "o",
            õ: "o",
            ö: "o",
            ø: "o",
            Ù: "U",
            Ú: "U",
            Û: "U",
            Ü: "U",
            ù: "u",
            ú: "u",
            û: "u",
            ü: "u",
            Ý: "Y",
            ý: "y",
            ÿ: "y",
            Æ: "Ae",
            æ: "ae",
            Þ: "Th",
            þ: "th",
            ß: "ss",
            Ā: "A",
            Ă: "A",
            Ą: "A",
            ā: "a",
            ă: "a",
            ą: "a",
            Ć: "C",
            Ĉ: "C",
            Ċ: "C",
            Č: "C",
            ć: "c",
            ĉ: "c",
            ċ: "c",
            č: "c",
            Ď: "D",
            Đ: "D",
            ď: "d",
            đ: "d",
            Ē: "E",
            Ĕ: "E",
            Ė: "E",
            Ę: "E",
            Ě: "E",
            ē: "e",
            ĕ: "e",
            ė: "e",
            ę: "e",
            ě: "e",
            Ĝ: "G",
            Ğ: "G",
            Ġ: "G",
            Ģ: "G",
            ĝ: "g",
            ğ: "g",
            ġ: "g",
            ģ: "g",
            Ĥ: "H",
            Ħ: "H",
            ĥ: "h",
            ħ: "h",
            Ĩ: "I",
            Ī: "I",
            Ĭ: "I",
            Į: "I",
            İ: "I",
            ĩ: "i",
            ī: "i",
            ĭ: "i",
            į: "i",
            ı: "i",
            Ĵ: "J",
            ĵ: "j",
            Ķ: "K",
            ķ: "k",
            ĸ: "k",
            Ĺ: "L",
            Ļ: "L",
            Ľ: "L",
            Ŀ: "L",
            Ł: "L",
            ĺ: "l",
            ļ: "l",
            ľ: "l",
            ŀ: "l",
            ł: "l",
            Ń: "N",
            Ņ: "N",
            Ň: "N",
            Ŋ: "N",
            ń: "n",
            ņ: "n",
            ň: "n",
            ŋ: "n",
            Ō: "O",
            Ŏ: "O",
            Ő: "O",
            ō: "o",
            ŏ: "o",
            ő: "o",
            Ŕ: "R",
            Ŗ: "R",
            Ř: "R",
            ŕ: "r",
            ŗ: "r",
            ř: "r",
            Ś: "S",
            Ŝ: "S",
            Ş: "S",
            Š: "S",
            ś: "s",
            ŝ: "s",
            ş: "s",
            š: "s",
            Ţ: "T",
            Ť: "T",
            Ŧ: "T",
            ţ: "t",
            ť: "t",
            ŧ: "t",
            Ũ: "U",
            Ū: "U",
            Ŭ: "U",
            Ů: "U",
            Ű: "U",
            Ų: "U",
            ũ: "u",
            ū: "u",
            ŭ: "u",
            ů: "u",
            ű: "u",
            ų: "u",
            Ŵ: "W",
            ŵ: "w",
            Ŷ: "Y",
            ŷ: "y",
            Ÿ: "Y",
            Ź: "Z",
            Ż: "Z",
            Ž: "Z",
            ź: "z",
            ż: "z",
            ž: "z",
            Ĳ: "IJ",
            ĳ: "ij",
            Œ: "Oe",
            œ: "oe",
            ŉ: "'n",
            ſ: "s"
        }
          , SU = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;"
        }
          , IU = {
            "&amp;": "&",
            "&lt;": "<",
            "&gt;": ">",
            "&quot;": '"',
            "&#39;": "'"
        }
          , CU = {
            "\\": "\\",
            "'": "'",
            "\n": "n",
            "\r": "r",
            "\u2028": "u2028",
            "\u2029": "u2029"
        }
          , kU = parseFloat
          , TU = parseInt
          , tS = typeof oa == "object" && oa && oa.Object === Object && oa
          , AU = typeof self == "object" && self && self.Object === Object && self
          , qn = tS || AU || Function("return this")()
          , jy = t && !t.nodeType && t
          , rc = jy && !0 && e && !e.nodeType && e
          , nS = rc && rc.exports === jy
          , Ky = nS && tS.process
          , Ui = function() {
            try {
                var X = rc && rc.require && rc.require("util").types;
                return X || Ky && Ky.binding && Ky.binding("util")
            } catch {}
        }()
          , rS = Ui && Ui.isArrayBuffer
          , iS = Ui && Ui.isDate
          , oS = Ui && Ui.isMap
          , sS = Ui && Ui.isRegExp
          , aS = Ui && Ui.isSet
          , lS = Ui && Ui.isTypedArray;
        function vi(X, le, ne) {
            switch (ne.length) {
            case 0:
                return X.call(le);
            case 1:
                return X.call(le, ne[0]);
            case 2:
                return X.call(le, ne[0], ne[1]);
            case 3:
                return X.call(le, ne[0], ne[1], ne[2])
            }
            return X.apply(le, ne)
        }
        function MU(X, le, ne, Te) {
            for (var Ze = -1, bt = X == null ? 0 : X.length; ++Ze < bt; ) {
                var On = X[Ze];
                le(Te, On, ne(On), X)
            }
            return Te
        }
        function Hi(X, le) {
            for (var ne = -1, Te = X == null ? 0 : X.length; ++ne < Te && le(X[ne], ne, X) !== !1; )
                ;
            return X
        }
        function LU(X, le) {
            for (var ne = X == null ? 0 : X.length; ne-- && le(X[ne], ne, X) !== !1; )
                ;
            return X
        }
        function cS(X, le) {
            for (var ne = -1, Te = X == null ? 0 : X.length; ++ne < Te; )
                if (!le(X[ne], ne, X))
                    return !1;
            return !0
        }
        function za(X, le) {
            for (var ne = -1, Te = X == null ? 0 : X.length, Ze = 0, bt = []; ++ne < Te; ) {
                var On = X[ne];
                le(On, ne, X) && (bt[Ze++] = On)
            }
            return bt
        }
        function c1(X, le) {
            var ne = X == null ? 0 : X.length;
            return !!ne && zu(X, le, 0) > -1
        }
        function Xy(X, le, ne) {
            for (var Te = -1, Ze = X == null ? 0 : X.length; ++Te < Ze; )
                if (ne(le, X[Te]))
                    return !0;
            return !1
        }
        function Qt(X, le) {
            for (var ne = -1, Te = X == null ? 0 : X.length, Ze = Array(Te); ++ne < Te; )
                Ze[ne] = le(X[ne], ne, X);
            return Ze
        }
        function $a(X, le) {
            for (var ne = -1, Te = le.length, Ze = X.length; ++ne < Te; )
                X[Ze + ne] = le[ne];
            return X
        }
        function Zy(X, le, ne, Te) {
            var Ze = -1
              , bt = X == null ? 0 : X.length;
            for (Te && bt && (ne = X[++Ze]); ++Ze < bt; )
                ne = le(ne, X[Ze], Ze, X);
            return ne
        }
        function PU(X, le, ne, Te) {
            var Ze = X == null ? 0 : X.length;
            for (Te && Ze && (ne = X[--Ze]); Ze--; )
                ne = le(ne, X[Ze], Ze, X);
            return ne
        }
        function qy(X, le) {
            for (var ne = -1, Te = X == null ? 0 : X.length; ++ne < Te; )
                if (le(X[ne], ne, X))
                    return !0;
            return !1
        }
        var RU = Qy("length");
        function DU(X) {
            return X.split("")
        }
        function OU(X) {
            return X.match(W$) || []
        }
        function uS(X, le, ne) {
            var Te;
            return ne(X, function(Ze, bt, On) {
                if (le(Ze, bt, On))
                    return Te = bt,
                    !1
            }),
            Te
        }
        function u1(X, le, ne, Te) {
            for (var Ze = X.length, bt = ne + (Te ? 1 : -1); Te ? bt-- : ++bt < Ze; )
                if (le(X[bt], bt, X))
                    return bt;
            return -1
        }
        function zu(X, le, ne) {
            return le === le ? jU(X, le, ne) : u1(X, dS, ne)
        }
        function NU(X, le, ne, Te) {
            for (var Ze = ne - 1, bt = X.length; ++Ze < bt; )
                if (Te(X[Ze], le))
                    return Ze;
            return -1
        }
        function dS(X) {
            return X !== X
        }
        function fS(X, le) {
            var ne = X == null ? 0 : X.length;
            return ne ? ew(X, le) / ne : G
        }
        function Qy(X) {
            return function(le) {
                return le == null ? n : le[X]
            }
        }
        function Jy(X) {
            return function(le) {
                return X == null ? n : X[le]
            }
        }
        function hS(X, le, ne, Te, Ze) {
            return Ze(X, function(bt, On, Bt) {
                ne = Te ? (Te = !1,
                bt) : le(ne, bt, On, Bt)
            }),
            ne
        }
        function FU(X, le) {
            var ne = X.length;
            for (X.sort(le); ne--; )
                X[ne] = X[ne].value;
            return X
        }
        function ew(X, le) {
            for (var ne, Te = -1, Ze = X.length; ++Te < Ze; ) {
                var bt = le(X[Te]);
                bt !== n && (ne = ne === n ? bt : ne + bt)
            }
            return ne
        }
        function tw(X, le) {
            for (var ne = -1, Te = Array(X); ++ne < X; )
                Te[ne] = le(ne);
            return Te
        }
        function BU(X, le) {
            return Qt(le, function(ne) {
                return [ne, X[ne]]
            })
        }
        function gS(X) {
            return X && X.slice(0, yS(X) + 1).replace(Uy, "")
        }
        function yi(X) {
            return function(le) {
                return X(le)
            }
        }
        function nw(X, le) {
            return Qt(le, function(ne) {
                return X[ne]
            })
        }
        function Zf(X, le) {
            return X.has(le)
        }
        function pS(X, le) {
            for (var ne = -1, Te = X.length; ++ne < Te && zu(le, X[ne], 0) > -1; )
                ;
            return ne
        }
        function mS(X, le) {
            for (var ne = X.length; ne-- && zu(le, X[ne], 0) > -1; )
                ;
            return ne
        }
        function zU(X, le) {
            for (var ne = X.length, Te = 0; ne--; )
                X[ne] === le && ++Te;
            return Te
        }
        var $U = Jy(xU)
          , UU = Jy(SU);
        function HU(X) {
            return "\\" + CU[X]
        }
        function WU(X, le) {
            return X == null ? n : X[le]
        }
        function $u(X) {
            return wU.test(X)
        }
        function GU(X) {
            return EU.test(X)
        }
        function VU(X) {
            for (var le, ne = []; !(le = X.next()).done; )
                ne.push(le.value);
            return ne
        }
        function rw(X) {
            var le = -1
              , ne = Array(X.size);
            return X.forEach(function(Te, Ze) {
                ne[++le] = [Ze, Te]
            }),
            ne
        }
        function vS(X, le) {
            return function(ne) {
                return X(le(ne))
            }
        }
        function Ua(X, le) {
            for (var ne = -1, Te = X.length, Ze = 0, bt = []; ++ne < Te; ) {
                var On = X[ne];
                (On === le || On === u) && (X[ne] = u,
                bt[Ze++] = ne)
            }
            return bt
        }
        function d1(X) {
            var le = -1
              , ne = Array(X.size);
            return X.forEach(function(Te) {
                ne[++le] = Te
            }),
            ne
        }
        function YU(X) {
            var le = -1
              , ne = Array(X.size);
            return X.forEach(function(Te) {
                ne[++le] = [Te, Te]
            }),
            ne
        }
        function jU(X, le, ne) {
            for (var Te = ne - 1, Ze = X.length; ++Te < Ze; )
                if (X[Te] === le)
                    return Te;
            return -1
        }
        function KU(X, le, ne) {
            for (var Te = ne + 1; Te--; )
                if (X[Te] === le)
                    return Te;
            return Te
        }
        function Uu(X) {
            return $u(X) ? ZU(X) : RU(X)
        }
        function Eo(X) {
            return $u(X) ? qU(X) : DU(X)
        }
        function yS(X) {
            for (var le = X.length; le-- && z$.test(X.charAt(le)); )
                ;
            return le
        }
        var XU = Jy(IU);
        function ZU(X) {
            for (var le = Yy.lastIndex = 0; Yy.test(X); )
                ++le;
            return le
        }
        function qU(X) {
            return X.match(Yy) || []
        }
        function QU(X) {
            return X.match(yU) || []
        }
        var JU = function X(le) {
            le = le == null ? qn : Hu.defaults(qn.Object(), le, Hu.pick(qn, bU));
            var ne = le.Array
              , Te = le.Date
              , Ze = le.Error
              , bt = le.Function
              , On = le.Math
              , Bt = le.Object
              , iw = le.RegExp
              , eH = le.String
              , Wi = le.TypeError
              , f1 = ne.prototype
              , tH = bt.prototype
              , Wu = Bt.prototype
              , h1 = le["__core-js_shared__"]
              , g1 = tH.toString
              , Tt = Wu.hasOwnProperty
              , nH = 0
              , wS = function() {
                var d = /[^.]+$/.exec(h1 && h1.keys && h1.keys.IE_PROTO || "");
                return d ? "Symbol(src)_1." + d : ""
            }()
              , p1 = Wu.toString
              , rH = g1.call(Bt)
              , iH = qn._
              , oH = iw("^" + g1.call(Tt).replace($y, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$")
              , m1 = nS ? le.Buffer : n
              , Ha = le.Symbol
              , v1 = le.Uint8Array
              , ES = m1 ? m1.allocUnsafe : n
              , y1 = vS(Bt.getPrototypeOf, Bt)
              , bS = Bt.create
              , _S = Wu.propertyIsEnumerable
              , w1 = f1.splice
              , xS = Ha ? Ha.isConcatSpreadable : n
              , qf = Ha ? Ha.iterator : n
              , ic = Ha ? Ha.toStringTag : n
              , E1 = function() {
                try {
                    var d = cc(Bt, "defineProperty");
                    return d({}, "", {}),
                    d
                } catch {}
            }()
              , sH = le.clearTimeout !== qn.clearTimeout && le.clearTimeout
              , aH = Te && Te.now !== qn.Date.now && Te.now
              , lH = le.setTimeout !== qn.setTimeout && le.setTimeout
              , b1 = On.ceil
              , _1 = On.floor
              , ow = Bt.getOwnPropertySymbols
              , cH = m1 ? m1.isBuffer : n
              , SS = le.isFinite
              , uH = f1.join
              , dH = vS(Bt.keys, Bt)
              , Nn = On.max
              , hr = On.min
              , fH = Te.now
              , hH = le.parseInt
              , IS = On.random
              , gH = f1.reverse
              , sw = cc(le, "DataView")
              , Qf = cc(le, "Map")
              , aw = cc(le, "Promise")
              , Gu = cc(le, "Set")
              , Jf = cc(le, "WeakMap")
              , eh = cc(Bt, "create")
              , x1 = Jf && new Jf
              , Vu = {}
              , pH = uc(sw)
              , mH = uc(Qf)
              , vH = uc(aw)
              , yH = uc(Gu)
              , wH = uc(Jf)
              , S1 = Ha ? Ha.prototype : n
              , th = S1 ? S1.valueOf : n
              , CS = S1 ? S1.toString : n;
            function F(d) {
                if (dn(d) && !qe(d) && !(d instanceof ct)) {
                    if (d instanceof Gi)
                        return d;
                    if (Tt.call(d, "__wrapped__"))
                        return kI(d)
                }
                return new Gi(d)
            }
            var Yu = function() {
                function d() {}
                return function(p) {
                    if (!on(p))
                        return {};
                    if (bS)
                        return bS(p);
                    d.prototype = p;
                    var w = new d;
                    return d.prototype = n,
                    w
                }
            }();
            function I1() {}
            function Gi(d, p) {
                this.__wrapped__ = d,
                this.__actions__ = [],
                this.__chain__ = !!p,
                this.__index__ = 0,
                this.__values__ = n
            }
            F.templateSettings = {
                escape: R$,
                evaluate: D$,
                interpolate: O5,
                variable: "",
                imports: {
                    _: F
                }
            },
            F.prototype = I1.prototype,
            F.prototype.constructor = F,
            Gi.prototype = Yu(I1.prototype),
            Gi.prototype.constructor = Gi;
            function ct(d) {
                this.__wrapped__ = d,
                this.__actions__ = [],
                this.__dir__ = 1,
                this.__filtered__ = !1,
                this.__iteratees__ = [],
                this.__takeCount__ = H,
                this.__views__ = []
            }
            function EH() {
                var d = new ct(this.__wrapped__);
                return d.__actions__ = Zr(this.__actions__),
                d.__dir__ = this.__dir__,
                d.__filtered__ = this.__filtered__,
                d.__iteratees__ = Zr(this.__iteratees__),
                d.__takeCount__ = this.__takeCount__,
                d.__views__ = Zr(this.__views__),
                d
            }
            function bH() {
                if (this.__filtered__) {
                    var d = new ct(this);
                    d.__dir__ = -1,
                    d.__filtered__ = !0
                } else
                    d = this.clone(),
                    d.__dir__ *= -1;
                return d
            }
            function _H() {
                var d = this.__wrapped__.value()
                  , p = this.__dir__
                  , w = qe(d)
                  , S = p < 0
                  , R = w ? d.length : 0
                  , B = DW(0, R, this.__views__)
                  , W = B.start
                  , Y = B.end
                  , Z = Y - W
                  , fe = S ? Y : W - 1
                  , he = this.__iteratees__
                  , ge = he.length
                  , Ie = 0
                  , Pe = hr(Z, this.__takeCount__);
                if (!w || !S && R == Z && Pe == Z)
                    return ZS(d, this.__actions__);
                var ze = [];
                e: for (; Z-- && Ie < Pe; ) {
                    fe += p;
                    for (var rt = -1, $e = d[fe]; ++rt < ge; ) {
                        var st = he[rt]
                          , ht = st.iteratee
                          , bi = st.type
                          , Lr = ht($e);
                        if (bi == re)
                            $e = Lr;
                        else if (!Lr) {
                            if (bi == j)
                                continue e;
                            break e
                        }
                    }
                    ze[Ie++] = $e
                }
                return ze
            }
            ct.prototype = Yu(I1.prototype),
            ct.prototype.constructor = ct;
            function oc(d) {
                var p = -1
                  , w = d == null ? 0 : d.length;
                for (this.clear(); ++p < w; ) {
                    var S = d[p];
                    this.set(S[0], S[1])
                }
            }
            function xH() {
                this.__data__ = eh ? eh(null) : {},
                this.size = 0
            }
            function SH(d) {
                var p = this.has(d) && delete this.__data__[d];
                return this.size -= p ? 1 : 0,
                p
            }
            function IH(d) {
                var p = this.__data__;
                if (eh) {
                    var w = p[d];
                    return w === l ? n : w
                }
                return Tt.call(p, d) ? p[d] : n
            }
            function CH(d) {
                var p = this.__data__;
                return eh ? p[d] !== n : Tt.call(p, d)
            }
            function kH(d, p) {
                var w = this.__data__;
                return this.size += this.has(d) ? 0 : 1,
                w[d] = eh && p === n ? l : p,
                this
            }
            oc.prototype.clear = xH,
            oc.prototype.delete = SH,
            oc.prototype.get = IH,
            oc.prototype.has = CH,
            oc.prototype.set = kH;
            function Fs(d) {
                var p = -1
                  , w = d == null ? 0 : d.length;
                for (this.clear(); ++p < w; ) {
                    var S = d[p];
                    this.set(S[0], S[1])
                }
            }
            function TH() {
                this.__data__ = [],
                this.size = 0
            }
            function AH(d) {
                var p = this.__data__
                  , w = C1(p, d);
                if (w < 0)
                    return !1;
                var S = p.length - 1;
                return w == S ? p.pop() : w1.call(p, w, 1),
                --this.size,
                !0
            }
            function MH(d) {
                var p = this.__data__
                  , w = C1(p, d);
                return w < 0 ? n : p[w][1]
            }
            function LH(d) {
                return C1(this.__data__, d) > -1
            }
            function PH(d, p) {
                var w = this.__data__
                  , S = C1(w, d);
                return S < 0 ? (++this.size,
                w.push([d, p])) : w[S][1] = p,
                this
            }
            Fs.prototype.clear = TH,
            Fs.prototype.delete = AH,
            Fs.prototype.get = MH,
            Fs.prototype.has = LH,
            Fs.prototype.set = PH;
            function Bs(d) {
                var p = -1
                  , w = d == null ? 0 : d.length;
                for (this.clear(); ++p < w; ) {
                    var S = d[p];
                    this.set(S[0], S[1])
                }
            }
            function RH() {
                this.size = 0,
                this.__data__ = {
                    hash: new oc,
                    map: new (Qf || Fs),
                    string: new oc
                }
            }
            function DH(d) {
                var p = B1(this, d).delete(d);
                return this.size -= p ? 1 : 0,
                p
            }
            function OH(d) {
                return B1(this, d).get(d)
            }
            function NH(d) {
                return B1(this, d).has(d)
            }
            function FH(d, p) {
                var w = B1(this, d)
                  , S = w.size;
                return w.set(d, p),
                this.size += w.size == S ? 0 : 1,
                this
            }
            Bs.prototype.clear = RH,
            Bs.prototype.delete = DH,
            Bs.prototype.get = OH,
            Bs.prototype.has = NH,
            Bs.prototype.set = FH;
            function sc(d) {
                var p = -1
                  , w = d == null ? 0 : d.length;
                for (this.__data__ = new Bs; ++p < w; )
                    this.add(d[p])
            }
            function BH(d) {
                return this.__data__.set(d, l),
                this
            }
            function zH(d) {
                return this.__data__.has(d)
            }
            sc.prototype.add = sc.prototype.push = BH,
            sc.prototype.has = zH;
            function bo(d) {
                var p = this.__data__ = new Fs(d);
                this.size = p.size
            }
            function $H() {
                this.__data__ = new Fs,
                this.size = 0
            }
            function UH(d) {
                var p = this.__data__
                  , w = p.delete(d);
                return this.size = p.size,
                w
            }
            function HH(d) {
                return this.__data__.get(d)
            }
            function WH(d) {
                return this.__data__.has(d)
            }
            function GH(d, p) {
                var w = this.__data__;
                if (w instanceof Fs) {
                    var S = w.__data__;
                    if (!Qf || S.length < i - 1)
                        return S.push([d, p]),
                        this.size = ++w.size,
                        this;
                    w = this.__data__ = new Bs(S)
                }
                return w.set(d, p),
                this.size = w.size,
                this
            }
            bo.prototype.clear = $H,
            bo.prototype.delete = UH,
            bo.prototype.get = HH,
            bo.prototype.has = WH,
            bo.prototype.set = GH;
            function kS(d, p) {
                var w = qe(d)
                  , S = !w && dc(d)
                  , R = !w && !S && ja(d)
                  , B = !w && !S && !R && Zu(d)
                  , W = w || S || R || B
                  , Y = W ? tw(d.length, eH) : []
                  , Z = Y.length;
                for (var fe in d)
                    (p || Tt.call(d, fe)) && !(W && (fe == "length" || R && (fe == "offset" || fe == "parent") || B && (fe == "buffer" || fe == "byteLength" || fe == "byteOffset") || Hs(fe, Z))) && Y.push(fe);
                return Y
            }
            function TS(d) {
                var p = d.length;
                return p ? d[yw(0, p - 1)] : n
            }
            function VH(d, p) {
                return z1(Zr(d), ac(p, 0, d.length))
            }
            function YH(d) {
                return z1(Zr(d))
            }
            function lw(d, p, w) {
                (w !== n && !_o(d[p], w) || w === n && !(p in d)) && zs(d, p, w)
            }
            function nh(d, p, w) {
                var S = d[p];
                (!(Tt.call(d, p) && _o(S, w)) || w === n && !(p in d)) && zs(d, p, w)
            }
            function C1(d, p) {
                for (var w = d.length; w--; )
                    if (_o(d[w][0], p))
                        return w;
                return -1
            }
            function jH(d, p, w, S) {
                return Wa(d, function(R, B, W) {
                    p(S, R, w(R), W)
                }),
                S
            }
            function AS(d, p) {
                return d && Jo(p, Yn(p), d)
            }
            function KH(d, p) {
                return d && Jo(p, Qr(p), d)
            }
            function zs(d, p, w) {
                p == "__proto__" && E1 ? E1(d, p, {
                    configurable: !0,
                    enumerable: !0,
                    value: w,
                    writable: !0
                }) : d[p] = w
            }
            function cw(d, p) {
                for (var w = -1, S = p.length, R = ne(S), B = d == null; ++w < S; )
                    R[w] = B ? n : Ww(d, p[w]);
                return R
            }
            function ac(d, p, w) {
                return d === d && (w !== n && (d = d <= w ? d : w),
                p !== n && (d = d >= p ? d : p)),
                d
            }
            function Vi(d, p, w, S, R, B) {
                var W, Y = p & f, Z = p & h, fe = p & m;
                if (w && (W = R ? w(d, S, R, B) : w(d)),
                W !== n)
                    return W;
                if (!on(d))
                    return d;
                var he = qe(d);
                if (he) {
                    if (W = NW(d),
                    !Y)
                        return Zr(d, W)
                } else {
                    var ge = gr(d)
                      , Ie = ge == kt || ge == dr;
                    if (ja(d))
                        return JS(d, Y);
                    if (ge == Vn || ge == de || Ie && !R) {
                        if (W = Z || Ie ? {} : yI(d),
                        !Y)
                            return Z ? IW(d, KH(W, d)) : SW(d, AS(W, d))
                    } else {
                        if (!Gt[ge])
                            return R ? d : {};
                        W = FW(d, ge, Y)
                    }
                }
                B || (B = new bo);
                var Pe = B.get(d);
                if (Pe)
                    return Pe;
                B.set(d, W),
                jI(d) ? d.forEach(function($e) {
                    W.add(Vi($e, p, w, $e, d, B))
                }) : VI(d) && d.forEach(function($e, st) {
                    W.set(st, Vi($e, p, w, st, d, B))
                });
                var ze = fe ? Z ? Aw : Tw : Z ? Qr : Yn
                  , rt = he ? n : ze(d);
                return Hi(rt || d, function($e, st) {
                    rt && (st = $e,
                    $e = d[st]),
                    nh(W, st, Vi($e, p, w, st, d, B))
                }),
                W
            }
            function XH(d) {
                var p = Yn(d);
                return function(w) {
                    return MS(w, d, p)
                }
            }
            function MS(d, p, w) {
                var S = w.length;
                if (d == null)
                    return !S;
                for (d = Bt(d); S--; ) {
                    var R = w[S]
                      , B = p[R]
                      , W = d[R];
                    if (W === n && !(R in d) || !B(W))
                        return !1
                }
                return !0
            }
            function LS(d, p, w) {
                if (typeof d != "function")
                    throw new Wi(s);
                return ch(function() {
                    d.apply(n, w)
                }, p)
            }
            function rh(d, p, w, S) {
                var R = -1
                  , B = c1
                  , W = !0
                  , Y = d.length
                  , Z = []
                  , fe = p.length;
                if (!Y)
                    return Z;
                w && (p = Qt(p, yi(w))),
                S ? (B = Xy,
                W = !1) : p.length >= i && (B = Zf,
                W = !1,
                p = new sc(p));
                e: for (; ++R < Y; ) {
                    var he = d[R]
                      , ge = w == null ? he : w(he);
                    if (he = S || he !== 0 ? he : 0,
                    W && ge === ge) {
                        for (var Ie = fe; Ie--; )
                            if (p[Ie] === ge)
                                continue e;
                        Z.push(he)
                    } else
                        B(p, ge, S) || Z.push(he)
                }
                return Z
            }
            var Wa = iI(Qo)
              , PS = iI(dw, !0);
            function ZH(d, p) {
                var w = !0;
                return Wa(d, function(S, R, B) {
                    return w = !!p(S, R, B),
                    w
                }),
                w
            }
            function k1(d, p, w) {
                for (var S = -1, R = d.length; ++S < R; ) {
                    var B = d[S]
                      , W = p(B);
                    if (W != null && (Y === n ? W === W && !Ei(W) : w(W, Y)))
                        var Y = W
                          , Z = B
                }
                return Z
            }
            function qH(d, p, w, S) {
                var R = d.length;
                for (w = et(w),
                w < 0 && (w = -w > R ? 0 : R + w),
                S = S === n || S > R ? R : et(S),
                S < 0 && (S += R),
                S = w > S ? 0 : XI(S); w < S; )
                    d[w++] = p;
                return d
            }
            function RS(d, p) {
                var w = [];
                return Wa(d, function(S, R, B) {
                    p(S, R, B) && w.push(S)
                }),
                w
            }
            function Qn(d, p, w, S, R) {
                var B = -1
                  , W = d.length;
                for (w || (w = zW),
                R || (R = []); ++B < W; ) {
                    var Y = d[B];
                    p > 0 && w(Y) ? p > 1 ? Qn(Y, p - 1, w, S, R) : $a(R, Y) : S || (R[R.length] = Y)
                }
                return R
            }
            var uw = oI()
              , DS = oI(!0);
            function Qo(d, p) {
                return d && uw(d, p, Yn)
            }
            function dw(d, p) {
                return d && DS(d, p, Yn)
            }
            function T1(d, p) {
                return za(p, function(w) {
                    return Ws(d[w])
                })
            }
            function lc(d, p) {
                p = Va(p, d);
                for (var w = 0, S = p.length; d != null && w < S; )
                    d = d[es(p[w++])];
                return w && w == S ? d : n
            }
            function OS(d, p, w) {
                var S = p(d);
                return qe(d) ? S : $a(S, w(d))
            }
            function Ar(d) {
                return d == null ? d === n ? My : kr : ic && ic in Bt(d) ? RW(d) : YW(d)
            }
            function fw(d, p) {
                return d > p
            }
            function QH(d, p) {
                return d != null && Tt.call(d, p)
            }
            function JH(d, p) {
                return d != null && p in Bt(d)
            }
            function eW(d, p, w) {
                return d >= hr(p, w) && d < Nn(p, w)
            }
            function hw(d, p, w) {
                for (var S = w ? Xy : c1, R = d[0].length, B = d.length, W = B, Y = ne(B), Z = 1 / 0, fe = []; W--; ) {
                    var he = d[W];
                    W && p && (he = Qt(he, yi(p))),
                    Z = hr(he.length, Z),
                    Y[W] = !w && (p || R >= 120 && he.length >= 120) ? new sc(W && he) : n
                }
                he = d[0];
                var ge = -1
                  , Ie = Y[0];
                e: for (; ++ge < R && fe.length < Z; ) {
                    var Pe = he[ge]
                      , ze = p ? p(Pe) : Pe;
                    if (Pe = w || Pe !== 0 ? Pe : 0,
                    !(Ie ? Zf(Ie, ze) : S(fe, ze, w))) {
                        for (W = B; --W; ) {
                            var rt = Y[W];
                            if (!(rt ? Zf(rt, ze) : S(d[W], ze, w)))
                                continue e
                        }
                        Ie && Ie.push(ze),
                        fe.push(Pe)
                    }
                }
                return fe
            }
            function tW(d, p, w, S) {
                return Qo(d, function(R, B, W) {
                    p(S, w(R), B, W)
                }),
                S
            }
            function ih(d, p, w) {
                p = Va(p, d),
                d = _I(d, p);
                var S = d == null ? d : d[es(ji(p))];
                return S == null ? n : vi(S, d, w)
            }
            function NS(d) {
                return dn(d) && Ar(d) == de
            }
            function nW(d) {
                return dn(d) && Ar(d) == Xf
            }
            function rW(d) {
                return dn(d) && Ar(d) == Je
            }
            function oh(d, p, w, S, R) {
                return d === p ? !0 : d == null || p == null || !dn(d) && !dn(p) ? d !== d && p !== p : iW(d, p, w, S, oh, R)
            }
            function iW(d, p, w, S, R, B) {
                var W = qe(d)
                  , Y = qe(p)
                  , Z = W ? pe : gr(d)
                  , fe = Y ? pe : gr(p);
                Z = Z == de ? Vn : Z,
                fe = fe == de ? Vn : fe;
                var he = Z == Vn
                  , ge = fe == Vn
                  , Ie = Z == fe;
                if (Ie && ja(d)) {
                    if (!ja(p))
                        return !1;
                    W = !0,
                    he = !1
                }
                if (Ie && !he)
                    return B || (B = new bo),
                    W || Zu(d) ? pI(d, p, w, S, R, B) : LW(d, p, Z, w, S, R, B);
                if (!(w & v)) {
                    var Pe = he && Tt.call(d, "__wrapped__")
                      , ze = ge && Tt.call(p, "__wrapped__");
                    if (Pe || ze) {
                        var rt = Pe ? d.value() : d
                          , $e = ze ? p.value() : p;
                        return B || (B = new bo),
                        R(rt, $e, w, S, B)
                    }
                }
                return Ie ? (B || (B = new bo),
                PW(d, p, w, S, R, B)) : !1
            }
            function oW(d) {
                return dn(d) && gr(d) == Wt
            }
            function gw(d, p, w, S) {
                var R = w.length
                  , B = R
                  , W = !S;
                if (d == null)
                    return !B;
                for (d = Bt(d); R--; ) {
                    var Y = w[R];
                    if (W && Y[2] ? Y[1] !== d[Y[0]] : !(Y[0]in d))
                        return !1
                }
                for (; ++R < B; ) {
                    Y = w[R];
                    var Z = Y[0]
                      , fe = d[Z]
                      , he = Y[1];
                    if (W && Y[2]) {
                        if (fe === n && !(Z in d))
                            return !1
                    } else {
                        var ge = new bo;
                        if (S)
                            var Ie = S(fe, he, Z, d, p, ge);
                        if (!(Ie === n ? oh(he, fe, v | y, S, ge) : Ie))
                            return !1
                    }
                }
                return !0
            }
            function FS(d) {
                if (!on(d) || UW(d))
                    return !1;
                var p = Ws(d) ? oH : X$;
                return p.test(uc(d))
            }
            function sW(d) {
                return dn(d) && Ar(d) == Dn
            }
            function aW(d) {
                return dn(d) && gr(d) == Xr
            }
            function lW(d) {
                return dn(d) && V1(d.length) && !!jt[Ar(d)]
            }
            function BS(d) {
                return typeof d == "function" ? d : d == null ? Jr : typeof d == "object" ? qe(d) ? US(d[0], d[1]) : $S(d) : sC(d)
            }
            function pw(d) {
                if (!lh(d))
                    return dH(d);
                var p = [];
                for (var w in Bt(d))
                    Tt.call(d, w) && w != "constructor" && p.push(w);
                return p
            }
            function cW(d) {
                if (!on(d))
                    return VW(d);
                var p = lh(d)
                  , w = [];
                for (var S in d)
                    S == "constructor" && (p || !Tt.call(d, S)) || w.push(S);
                return w
            }
            function mw(d, p) {
                return d < p
            }
            function zS(d, p) {
                var w = -1
                  , S = qr(d) ? ne(d.length) : [];
                return Wa(d, function(R, B, W) {
                    S[++w] = p(R, B, W)
                }),
                S
            }
            function $S(d) {
                var p = Lw(d);
                return p.length == 1 && p[0][2] ? EI(p[0][0], p[0][1]) : function(w) {
                    return w === d || gw(w, d, p)
                }
            }
            function US(d, p) {
                return Rw(d) && wI(p) ? EI(es(d), p) : function(w) {
                    var S = Ww(w, d);
                    return S === n && S === p ? Gw(w, d) : oh(p, S, v | y)
                }
            }
            function A1(d, p, w, S, R) {
                d !== p && uw(p, function(B, W) {
                    if (R || (R = new bo),
                    on(B))
                        uW(d, p, W, w, A1, S, R);
                    else {
                        var Y = S ? S(Ow(d, W), B, W + "", d, p, R) : n;
                        Y === n && (Y = B),
                        lw(d, W, Y)
                    }
                }, Qr)
            }
            function uW(d, p, w, S, R, B, W) {
                var Y = Ow(d, w)
                  , Z = Ow(p, w)
                  , fe = W.get(Z);
                if (fe) {
                    lw(d, w, fe);
                    return
                }
                var he = B ? B(Y, Z, w + "", d, p, W) : n
                  , ge = he === n;
                if (ge) {
                    var Ie = qe(Z)
                      , Pe = !Ie && ja(Z)
                      , ze = !Ie && !Pe && Zu(Z);
                    he = Z,
                    Ie || Pe || ze ? qe(Y) ? he = Y : yn(Y) ? he = Zr(Y) : Pe ? (ge = !1,
                    he = JS(Z, !0)) : ze ? (ge = !1,
                    he = eI(Z, !0)) : he = [] : uh(Z) || dc(Z) ? (he = Y,
                    dc(Y) ? he = ZI(Y) : (!on(Y) || Ws(Y)) && (he = yI(Z))) : ge = !1
                }
                ge && (W.set(Z, he),
                R(he, Z, S, B, W),
                W.delete(Z)),
                lw(d, w, he)
            }
            function HS(d, p) {
                var w = d.length;
                if (w)
                    return p += p < 0 ? w : 0,
                    Hs(p, w) ? d[p] : n
            }
            function WS(d, p, w) {
                p.length ? p = Qt(p, function(B) {
                    return qe(B) ? function(W) {
                        return lc(W, B.length === 1 ? B[0] : B)
                    }
                    : B
                }) : p = [Jr];
                var S = -1;
                p = Qt(p, yi(Fe()));
                var R = zS(d, function(B, W, Y) {
                    var Z = Qt(p, function(fe) {
                        return fe(B)
                    });
                    return {
                        criteria: Z,
                        index: ++S,
                        value: B
                    }
                });
                return FU(R, function(B, W) {
                    return xW(B, W, w)
                })
            }
            function dW(d, p) {
                return GS(d, p, function(w, S) {
                    return Gw(d, S)
                })
            }
            function GS(d, p, w) {
                for (var S = -1, R = p.length, B = {}; ++S < R; ) {
                    var W = p[S]
                      , Y = lc(d, W);
                    w(Y, W) && sh(B, Va(W, d), Y)
                }
                return B
            }
            function fW(d) {
                return function(p) {
                    return lc(p, d)
                }
            }
            function vw(d, p, w, S) {
                var R = S ? NU : zu
                  , B = -1
                  , W = p.length
                  , Y = d;
                for (d === p && (p = Zr(p)),
                w && (Y = Qt(d, yi(w))); ++B < W; )
                    for (var Z = 0, fe = p[B], he = w ? w(fe) : fe; (Z = R(Y, he, Z, S)) > -1; )
                        Y !== d && w1.call(Y, Z, 1),
                        w1.call(d, Z, 1);
                return d
            }
            function VS(d, p) {
                for (var w = d ? p.length : 0, S = w - 1; w--; ) {
                    var R = p[w];
                    if (w == S || R !== B) {
                        var B = R;
                        Hs(R) ? w1.call(d, R, 1) : bw(d, R)
                    }
                }
                return d
            }
            function yw(d, p) {
                return d + _1(IS() * (p - d + 1))
            }
            function hW(d, p, w, S) {
                for (var R = -1, B = Nn(b1((p - d) / (w || 1)), 0), W = ne(B); B--; )
                    W[S ? B : ++R] = d,
                    d += w;
                return W
            }
            function ww(d, p) {
                var w = "";
                if (!d || p < 1 || p > q)
                    return w;
                do
                    p % 2 && (w += d),
                    p = _1(p / 2),
                    p && (d += d);
                while (p);
                return w
            }
            function it(d, p) {
                return Nw(bI(d, p, Jr), d + "")
            }
            function gW(d) {
                return TS(qu(d))
            }
            function pW(d, p) {
                var w = qu(d);
                return z1(w, ac(p, 0, w.length))
            }
            function sh(d, p, w, S) {
                if (!on(d))
                    return d;
                p = Va(p, d);
                for (var R = -1, B = p.length, W = B - 1, Y = d; Y != null && ++R < B; ) {
                    var Z = es(p[R])
                      , fe = w;
                    if (Z === "__proto__" || Z === "constructor" || Z === "prototype")
                        return d;
                    if (R != W) {
                        var he = Y[Z];
                        fe = S ? S(he, Z, Y) : n,
                        fe === n && (fe = on(he) ? he : Hs(p[R + 1]) ? [] : {})
                    }
                    nh(Y, Z, fe),
                    Y = Y[Z]
                }
                return d
            }
            var YS = x1 ? function(d, p) {
                return x1.set(d, p),
                d
            }
            : Jr
              , mW = E1 ? function(d, p) {
                return E1(d, "toString", {
                    configurable: !0,
                    enumerable: !1,
                    value: Yw(p),
                    writable: !0
                })
            }
            : Jr;
            function vW(d) {
                return z1(qu(d))
            }
            function Yi(d, p, w) {
                var S = -1
                  , R = d.length;
                p < 0 && (p = -p > R ? 0 : R + p),
                w = w > R ? R : w,
                w < 0 && (w += R),
                R = p > w ? 0 : w - p >>> 0,
                p >>>= 0;
                for (var B = ne(R); ++S < R; )
                    B[S] = d[S + p];
                return B
            }
            function yW(d, p) {
                var w;
                return Wa(d, function(S, R, B) {
                    return w = p(S, R, B),
                    !w
                }),
                !!w
            }
            function M1(d, p, w) {
                var S = 0
                  , R = d == null ? S : d.length;
                if (typeof p == "number" && p === p && R <= te) {
                    for (; S < R; ) {
                        var B = S + R >>> 1
                          , W = d[B];
                        W !== null && !Ei(W) && (w ? W <= p : W < p) ? S = B + 1 : R = B
                    }
                    return R
                }
                return Ew(d, p, Jr, w)
            }
            function Ew(d, p, w, S) {
                var R = 0
                  , B = d == null ? 0 : d.length;
                if (B === 0)
                    return 0;
                p = w(p);
                for (var W = p !== p, Y = p === null, Z = Ei(p), fe = p === n; R < B; ) {
                    var he = _1((R + B) / 2)
                      , ge = w(d[he])
                      , Ie = ge !== n
                      , Pe = ge === null
                      , ze = ge === ge
                      , rt = Ei(ge);
                    if (W)
                        var $e = S || ze;
                    else
                        fe ? $e = ze && (S || Ie) : Y ? $e = ze && Ie && (S || !Pe) : Z ? $e = ze && Ie && !Pe && (S || !rt) : Pe || rt ? $e = !1 : $e = S ? ge <= p : ge < p;
                    $e ? R = he + 1 : B = he
                }
                return hr(B, J)
            }
            function jS(d, p) {
                for (var w = -1, S = d.length, R = 0, B = []; ++w < S; ) {
                    var W = d[w]
                      , Y = p ? p(W) : W;
                    if (!w || !_o(Y, Z)) {
                        var Z = Y;
                        B[R++] = W === 0 ? 0 : W
                    }
                }
                return B
            }
            function KS(d) {
                return typeof d == "number" ? d : Ei(d) ? G : +d
            }
            function wi(d) {
                if (typeof d == "string")
                    return d;
                if (qe(d))
                    return Qt(d, wi) + "";
                if (Ei(d))
                    return CS ? CS.call(d) : "";
                var p = d + "";
                return p == "0" && 1 / d == -ae ? "-0" : p
            }
            function Ga(d, p, w) {
                var S = -1
                  , R = c1
                  , B = d.length
                  , W = !0
                  , Y = []
                  , Z = Y;
                if (w)
                    W = !1,
                    R = Xy;
                else if (B >= i) {
                    var fe = p ? null : AW(d);
                    if (fe)
                        return d1(fe);
                    W = !1,
                    R = Zf,
                    Z = new sc
                } else
                    Z = p ? [] : Y;
                e: for (; ++S < B; ) {
                    var he = d[S]
                      , ge = p ? p(he) : he;
                    if (he = w || he !== 0 ? he : 0,
                    W && ge === ge) {
                        for (var Ie = Z.length; Ie--; )
                            if (Z[Ie] === ge)
                                continue e;
                        p && Z.push(ge),
                        Y.push(he)
                    } else
                        R(Z, ge, w) || (Z !== Y && Z.push(ge),
                        Y.push(he))
                }
                return Y
            }
            function bw(d, p) {
                return p = Va(p, d),
                d = _I(d, p),
                d == null || delete d[es(ji(p))]
            }
            function XS(d, p, w, S) {
                return sh(d, p, w(lc(d, p)), S)
            }
            function L1(d, p, w, S) {
                for (var R = d.length, B = S ? R : -1; (S ? B-- : ++B < R) && p(d[B], B, d); )
                    ;
                return w ? Yi(d, S ? 0 : B, S ? B + 1 : R) : Yi(d, S ? B + 1 : 0, S ? R : B)
            }
            function ZS(d, p) {
                var w = d;
                return w instanceof ct && (w = w.value()),
                Zy(p, function(S, R) {
                    return R.func.apply(R.thisArg, $a([S], R.args))
                }, w)
            }
            function _w(d, p, w) {
                var S = d.length;
                if (S < 2)
                    return S ? Ga(d[0]) : [];
                for (var R = -1, B = ne(S); ++R < S; )
                    for (var W = d[R], Y = -1; ++Y < S; )
                        Y != R && (B[R] = rh(B[R] || W, d[Y], p, w));
                return Ga(Qn(B, 1), p, w)
            }
            function qS(d, p, w) {
                for (var S = -1, R = d.length, B = p.length, W = {}; ++S < R; ) {
                    var Y = S < B ? p[S] : n;
                    w(W, d[S], Y)
                }
                return W
            }
            function xw(d) {
                return yn(d) ? d : []
            }
            function Sw(d) {
                return typeof d == "function" ? d : Jr
            }
            function Va(d, p) {
                return qe(d) ? d : Rw(d, p) ? [d] : CI(St(d))
            }
            var wW = it;
            function Ya(d, p, w) {
                var S = d.length;
                return w = w === n ? S : w,
                !p && w >= S ? d : Yi(d, p, w)
            }
            var QS = sH || function(d) {
                return qn.clearTimeout(d)
            }
            ;
            function JS(d, p) {
                if (p)
                    return d.slice();
                var w = d.length
                  , S = ES ? ES(w) : new d.constructor(w);
                return d.copy(S),
                S
            }
            function Iw(d) {
                var p = new d.constructor(d.byteLength);
                return new v1(p).set(new v1(d)),
                p
            }
            function EW(d, p) {
                var w = p ? Iw(d.buffer) : d.buffer;
                return new d.constructor(w,d.byteOffset,d.byteLength)
            }
            function bW(d) {
                var p = new d.constructor(d.source,N5.exec(d));
                return p.lastIndex = d.lastIndex,
                p
            }
            function _W(d) {
                return th ? Bt(th.call(d)) : {}
            }
            function eI(d, p) {
                var w = p ? Iw(d.buffer) : d.buffer;
                return new d.constructor(w,d.byteOffset,d.length)
            }
            function tI(d, p) {
                if (d !== p) {
                    var w = d !== n
                      , S = d === null
                      , R = d === d
                      , B = Ei(d)
                      , W = p !== n
                      , Y = p === null
                      , Z = p === p
                      , fe = Ei(p);
                    if (!Y && !fe && !B && d > p || B && W && Z && !Y && !fe || S && W && Z || !w && Z || !R)
                        return 1;
                    if (!S && !B && !fe && d < p || fe && w && R && !S && !B || Y && w && R || !W && R || !Z)
                        return -1
                }
                return 0
            }
            function xW(d, p, w) {
                for (var S = -1, R = d.criteria, B = p.criteria, W = R.length, Y = w.length; ++S < W; ) {
                    var Z = tI(R[S], B[S]);
                    if (Z) {
                        if (S >= Y)
                            return Z;
                        var fe = w[S];
                        return Z * (fe == "desc" ? -1 : 1)
                    }
                }
                return d.index - p.index
            }
            function nI(d, p, w, S) {
                for (var R = -1, B = d.length, W = w.length, Y = -1, Z = p.length, fe = Nn(B - W, 0), he = ne(Z + fe), ge = !S; ++Y < Z; )
                    he[Y] = p[Y];
                for (; ++R < W; )
                    (ge || R < B) && (he[w[R]] = d[R]);
                for (; fe--; )
                    he[Y++] = d[R++];
                return he
            }
            function rI(d, p, w, S) {
                for (var R = -1, B = d.length, W = -1, Y = w.length, Z = -1, fe = p.length, he = Nn(B - Y, 0), ge = ne(he + fe), Ie = !S; ++R < he; )
                    ge[R] = d[R];
                for (var Pe = R; ++Z < fe; )
                    ge[Pe + Z] = p[Z];
                for (; ++W < Y; )
                    (Ie || R < B) && (ge[Pe + w[W]] = d[R++]);
                return ge
            }
            function Zr(d, p) {
                var w = -1
                  , S = d.length;
                for (p || (p = ne(S)); ++w < S; )
                    p[w] = d[w];
                return p
            }
            function Jo(d, p, w, S) {
                var R = !w;
                w || (w = {});
                for (var B = -1, W = p.length; ++B < W; ) {
                    var Y = p[B]
                      , Z = S ? S(w[Y], d[Y], Y, w, d) : n;
                    Z === n && (Z = d[Y]),
                    R ? zs(w, Y, Z) : nh(w, Y, Z)
                }
                return w
            }
            function SW(d, p) {
                return Jo(d, Pw(d), p)
            }
            function IW(d, p) {
                return Jo(d, mI(d), p)
            }
            function P1(d, p) {
                return function(w, S) {
                    var R = qe(w) ? MU : jH
                      , B = p ? p() : {};
                    return R(w, d, Fe(S, 2), B)
                }
            }
            function ju(d) {
                return it(function(p, w) {
                    var S = -1
                      , R = w.length
                      , B = R > 1 ? w[R - 1] : n
                      , W = R > 2 ? w[2] : n;
                    for (B = d.length > 3 && typeof B == "function" ? (R--,
                    B) : n,
                    W && Mr(w[0], w[1], W) && (B = R < 3 ? n : B,
                    R = 1),
                    p = Bt(p); ++S < R; ) {
                        var Y = w[S];
                        Y && d(p, Y, S, B)
                    }
                    return p
                })
            }
            function iI(d, p) {
                return function(w, S) {
                    if (w == null)
                        return w;
                    if (!qr(w))
                        return d(w, S);
                    for (var R = w.length, B = p ? R : -1, W = Bt(w); (p ? B-- : ++B < R) && S(W[B], B, W) !== !1; )
                        ;
                    return w
                }
            }
            function oI(d) {
                return function(p, w, S) {
                    for (var R = -1, B = Bt(p), W = S(p), Y = W.length; Y--; ) {
                        var Z = W[d ? Y : ++R];
                        if (w(B[Z], Z, B) === !1)
                            break
                    }
                    return p
                }
            }
            function CW(d, p, w) {
                var S = p & E
                  , R = ah(d);
                function B() {
                    var W = this && this !== qn && this instanceof B ? R : d;
                    return W.apply(S ? w : this, arguments)
                }
                return B
            }
            function sI(d) {
                return function(p) {
                    p = St(p);
                    var w = $u(p) ? Eo(p) : n
                      , S = w ? w[0] : p.charAt(0)
                      , R = w ? Ya(w, 1).join("") : p.slice(1);
                    return S[d]() + R
                }
            }
            function Ku(d) {
                return function(p) {
                    return Zy(iC(rC(p).replace(mU, "")), d, "")
                }
            }
            function ah(d) {
                return function() {
                    var p = arguments;
                    switch (p.length) {
                    case 0:
                        return new d;
                    case 1:
                        return new d(p[0]);
                    case 2:
                        return new d(p[0],p[1]);
                    case 3:
                        return new d(p[0],p[1],p[2]);
                    case 4:
                        return new d(p[0],p[1],p[2],p[3]);
                    case 5:
                        return new d(p[0],p[1],p[2],p[3],p[4]);
                    case 6:
                        return new d(p[0],p[1],p[2],p[3],p[4],p[5]);
                    case 7:
                        return new d(p[0],p[1],p[2],p[3],p[4],p[5],p[6])
                    }
                    var w = Yu(d.prototype)
                      , S = d.apply(w, p);
                    return on(S) ? S : w
                }
            }
            function kW(d, p, w) {
                var S = ah(d);
                function R() {
                    for (var B = arguments.length, W = ne(B), Y = B, Z = Xu(R); Y--; )
                        W[Y] = arguments[Y];
                    var fe = B < 3 && W[0] !== Z && W[B - 1] !== Z ? [] : Ua(W, Z);
                    if (B -= fe.length,
                    B < w)
                        return dI(d, p, R1, R.placeholder, n, W, fe, n, n, w - B);
                    var he = this && this !== qn && this instanceof R ? S : d;
                    return vi(he, this, W)
                }
                return R
            }
            function aI(d) {
                return function(p, w, S) {
                    var R = Bt(p);
                    if (!qr(p)) {
                        var B = Fe(w, 3);
                        p = Yn(p),
                        w = function(Y) {
                            return B(R[Y], Y, R)
                        }
                    }
                    var W = d(p, w, S);
                    return W > -1 ? R[B ? p[W] : W] : n
                }
            }
            function lI(d) {
                return Us(function(p) {
                    var w = p.length
                      , S = w
                      , R = Gi.prototype.thru;
                    for (d && p.reverse(); S--; ) {
                        var B = p[S];
                        if (typeof B != "function")
                            throw new Wi(s);
                        if (R && !W && F1(B) == "wrapper")
                            var W = new Gi([],!0)
                    }
                    for (S = W ? S : w; ++S < w; ) {
                        B = p[S];
                        var Y = F1(B)
                          , Z = Y == "wrapper" ? Mw(B) : n;
                        Z && Dw(Z[0]) && Z[1] == (A | x | P | I) && !Z[4].length && Z[9] == 1 ? W = W[F1(Z[0])].apply(W, Z[3]) : W = B.length == 1 && Dw(B) ? W[Y]() : W.thru(B)
                    }
                    return function() {
                        var fe = arguments
                          , he = fe[0];
                        if (W && fe.length == 1 && qe(he))
                            return W.plant(he).value();
                        for (var ge = 0, Ie = w ? p[ge].apply(this, fe) : he; ++ge < w; )
                            Ie = p[ge].call(this, Ie);
                        return Ie
                    }
                })
            }
            function R1(d, p, w, S, R, B, W, Y, Z, fe) {
                var he = p & A
                  , ge = p & E
                  , Ie = p & b
                  , Pe = p & (x | C)
                  , ze = p & O
                  , rt = Ie ? n : ah(d);
                function $e() {
                    for (var st = arguments.length, ht = ne(st), bi = st; bi--; )
                        ht[bi] = arguments[bi];
                    if (Pe)
                        var Lr = Xu($e)
                          , _i = zU(ht, Lr);
                    if (S && (ht = nI(ht, S, R, Pe)),
                    B && (ht = rI(ht, B, W, Pe)),
                    st -= _i,
                    Pe && st < fe) {
                        var wn = Ua(ht, Lr);
                        return dI(d, p, R1, $e.placeholder, w, ht, wn, Y, Z, fe - st)
                    }
                    var xo = ge ? w : this
                      , Vs = Ie ? xo[d] : d;
                    return st = ht.length,
                    Y ? ht = jW(ht, Y) : ze && st > 1 && ht.reverse(),
                    he && Z < st && (ht.length = Z),
                    this && this !== qn && this instanceof $e && (Vs = rt || ah(Vs)),
                    Vs.apply(xo, ht)
                }
                return $e
            }
            function cI(d, p) {
                return function(w, S) {
                    return tW(w, d, p(S), {})
                }
            }
            function D1(d, p) {
                return function(w, S) {
                    var R;
                    if (w === n && S === n)
                        return p;
                    if (w !== n && (R = w),
                    S !== n) {
                        if (R === n)
                            return S;
                        typeof w == "string" || typeof S == "string" ? (w = wi(w),
                        S = wi(S)) : (w = KS(w),
                        S = KS(S)),
                        R = d(w, S)
                    }
                    return R
                }
            }
            function Cw(d) {
                return Us(function(p) {
                    return p = Qt(p, yi(Fe())),
                    it(function(w) {
                        var S = this;
                        return d(p, function(R) {
                            return vi(R, S, w)
                        })
                    })
                })
            }
            function O1(d, p) {
                p = p === n ? " " : wi(p);
                var w = p.length;
                if (w < 2)
                    return w ? ww(p, d) : p;
                var S = ww(p, b1(d / Uu(p)));
                return $u(p) ? Ya(Eo(S), 0, d).join("") : S.slice(0, d)
            }
            function TW(d, p, w, S) {
                var R = p & E
                  , B = ah(d);
                function W() {
                    for (var Y = -1, Z = arguments.length, fe = -1, he = S.length, ge = ne(he + Z), Ie = this && this !== qn && this instanceof W ? B : d; ++fe < he; )
                        ge[fe] = S[fe];
                    for (; Z--; )
                        ge[fe++] = arguments[++Y];
                    return vi(Ie, R ? w : this, ge)
                }
                return W
            }
            function uI(d) {
                return function(p, w, S) {
                    return S && typeof S != "number" && Mr(p, w, S) && (w = S = n),
                    p = Gs(p),
                    w === n ? (w = p,
                    p = 0) : w = Gs(w),
                    S = S === n ? p < w ? 1 : -1 : Gs(S),
                    hW(p, w, S, d)
                }
            }
            function N1(d) {
                return function(p, w) {
                    return typeof p == "string" && typeof w == "string" || (p = Ki(p),
                    w = Ki(w)),
                    d(p, w)
                }
            }
            function dI(d, p, w, S, R, B, W, Y, Z, fe) {
                var he = p & x
                  , ge = he ? W : n
                  , Ie = he ? n : W
                  , Pe = he ? B : n
                  , ze = he ? n : B;
                p |= he ? P : M,
                p &= ~(he ? M : P),
                p & _ || (p &= ~(E | b));
                var rt = [d, p, R, Pe, ge, ze, Ie, Y, Z, fe]
                  , $e = w.apply(n, rt);
                return Dw(d) && xI($e, rt),
                $e.placeholder = S,
                SI($e, d, p)
            }
            function kw(d) {
                var p = On[d];
                return function(w, S) {
                    if (w = Ki(w),
                    S = S == null ? 0 : hr(et(S), 292),
                    S && SS(w)) {
                        var R = (St(w) + "e").split("e")
                          , B = p(R[0] + "e" + (+R[1] + S));
                        return R = (St(B) + "e").split("e"),
                        +(R[0] + "e" + (+R[1] - S))
                    }
                    return p(w)
                }
            }
            var AW = Gu && 1 / d1(new Gu([, -0]))[1] == ae ? function(d) {
                return new Gu(d)
            }
            : Xw;
            function fI(d) {
                return function(p) {
                    var w = gr(p);
                    return w == Wt ? rw(p) : w == Xr ? YU(p) : BU(p, d(p))
                }
            }
            function $s(d, p, w, S, R, B, W, Y) {
                var Z = p & b;
                if (!Z && typeof d != "function")
                    throw new Wi(s);
                var fe = S ? S.length : 0;
                if (fe || (p &= ~(P | M),
                S = R = n),
                W = W === n ? W : Nn(et(W), 0),
                Y = Y === n ? Y : et(Y),
                fe -= R ? R.length : 0,
                p & M) {
                    var he = S
                      , ge = R;
                    S = R = n
                }
                var Ie = Z ? n : Mw(d)
                  , Pe = [d, p, w, S, R, he, ge, B, W, Y];
                if (Ie && GW(Pe, Ie),
                d = Pe[0],
                p = Pe[1],
                w = Pe[2],
                S = Pe[3],
                R = Pe[4],
                Y = Pe[9] = Pe[9] === n ? Z ? 0 : d.length : Nn(Pe[9] - fe, 0),
                !Y && p & (x | C) && (p &= ~(x | C)),
                !p || p == E)
                    var ze = CW(d, p, w);
                else
                    p == x || p == C ? ze = kW(d, p, Y) : (p == P || p == (E | P)) && !R.length ? ze = TW(d, p, w, S) : ze = R1.apply(n, Pe);
                var rt = Ie ? YS : xI;
                return SI(rt(ze, Pe), d, p)
            }
            function hI(d, p, w, S) {
                return d === n || _o(d, Wu[w]) && !Tt.call(S, w) ? p : d
            }
            function gI(d, p, w, S, R, B) {
                return on(d) && on(p) && (B.set(p, d),
                A1(d, p, n, gI, B),
                B.delete(p)),
                d
            }
            function MW(d) {
                return uh(d) ? n : d
            }
            function pI(d, p, w, S, R, B) {
                var W = w & v
                  , Y = d.length
                  , Z = p.length;
                if (Y != Z && !(W && Z > Y))
                    return !1;
                var fe = B.get(d)
                  , he = B.get(p);
                if (fe && he)
                    return fe == p && he == d;
                var ge = -1
                  , Ie = !0
                  , Pe = w & y ? new sc : n;
                for (B.set(d, p),
                B.set(p, d); ++ge < Y; ) {
                    var ze = d[ge]
                      , rt = p[ge];
                    if (S)
                        var $e = W ? S(rt, ze, ge, p, d, B) : S(ze, rt, ge, d, p, B);
                    if ($e !== n) {
                        if ($e)
                            continue;
                        Ie = !1;
                        break
                    }
                    if (Pe) {
                        if (!qy(p, function(st, ht) {
                            if (!Zf(Pe, ht) && (ze === st || R(ze, st, w, S, B)))
                                return Pe.push(ht)
                        })) {
                            Ie = !1;
                            break
                        }
                    } else if (!(ze === rt || R(ze, rt, w, S, B))) {
                        Ie = !1;
                        break
                    }
                }
                return B.delete(d),
                B.delete(p),
                Ie
            }
            function LW(d, p, w, S, R, B, W) {
                switch (w) {
                case Fu:
                    if (d.byteLength != p.byteLength || d.byteOffset != p.byteOffset)
                        return !1;
                    d = d.buffer,
                    p = p.buffer;
                case Xf:
                    return !(d.byteLength != p.byteLength || !B(new v1(d), new v1(p)));
                case tt:
                case Je:
                case fr:
                    return _o(+d, +p);
                case ot:
                    return d.name == p.name && d.message == p.message;
                case Dn:
                case $i:
                    return d == p + "";
                case Wt:
                    var Y = rw;
                case Xr:
                    var Z = S & v;
                    if (Y || (Y = d1),
                    d.size != p.size && !Z)
                        return !1;
                    var fe = W.get(d);
                    if (fe)
                        return fe == p;
                    S |= y,
                    W.set(d, p);
                    var he = pI(Y(d), Y(p), S, R, B, W);
                    return W.delete(d),
                    he;
                case Nu:
                    if (th)
                        return th.call(d) == th.call(p)
                }
                return !1
            }
            function PW(d, p, w, S, R, B) {
                var W = w & v
                  , Y = Tw(d)
                  , Z = Y.length
                  , fe = Tw(p)
                  , he = fe.length;
                if (Z != he && !W)
                    return !1;
                for (var ge = Z; ge--; ) {
                    var Ie = Y[ge];
                    if (!(W ? Ie in p : Tt.call(p, Ie)))
                        return !1
                }
                var Pe = B.get(d)
                  , ze = B.get(p);
                if (Pe && ze)
                    return Pe == p && ze == d;
                var rt = !0;
                B.set(d, p),
                B.set(p, d);
                for (var $e = W; ++ge < Z; ) {
                    Ie = Y[ge];
                    var st = d[Ie]
                      , ht = p[Ie];
                    if (S)
                        var bi = W ? S(ht, st, Ie, p, d, B) : S(st, ht, Ie, d, p, B);
                    if (!(bi === n ? st === ht || R(st, ht, w, S, B) : bi)) {
                        rt = !1;
                        break
                    }
                    $e || ($e = Ie == "constructor")
                }
                if (rt && !$e) {
                    var Lr = d.constructor
                      , _i = p.constructor;
                    Lr != _i && "constructor"in d && "constructor"in p && !(typeof Lr == "function" && Lr instanceof Lr && typeof _i == "function" && _i instanceof _i) && (rt = !1)
                }
                return B.delete(d),
                B.delete(p),
                rt
            }
            function Us(d) {
                return Nw(bI(d, n, MI), d + "")
            }
            function Tw(d) {
                return OS(d, Yn, Pw)
            }
            function Aw(d) {
                return OS(d, Qr, mI)
            }
            var Mw = x1 ? function(d) {
                return x1.get(d)
            }
            : Xw;
            function F1(d) {
                for (var p = d.name + "", w = Vu[p], S = Tt.call(Vu, p) ? w.length : 0; S--; ) {
                    var R = w[S]
                      , B = R.func;
                    if (B == null || B == d)
                        return R.name
                }
                return p
            }
            function Xu(d) {
                var p = Tt.call(F, "placeholder") ? F : d;
                return p.placeholder
            }
            function Fe() {
                var d = F.iteratee || jw;
                return d = d === jw ? BS : d,
                arguments.length ? d(arguments[0], arguments[1]) : d
            }
            function B1(d, p) {
                var w = d.__data__;
                return $W(p) ? w[typeof p == "string" ? "string" : "hash"] : w.map
            }
            function Lw(d) {
                for (var p = Yn(d), w = p.length; w--; ) {
                    var S = p[w]
                      , R = d[S];
                    p[w] = [S, R, wI(R)]
                }
                return p
            }
            function cc(d, p) {
                var w = WU(d, p);
                return FS(w) ? w : n
            }
            function RW(d) {
                var p = Tt.call(d, ic)
                  , w = d[ic];
                try {
                    d[ic] = n;
                    var S = !0
                } catch {}
                var R = p1.call(d);
                return S && (p ? d[ic] = w : delete d[ic]),
                R
            }
            var Pw = ow ? function(d) {
                return d == null ? [] : (d = Bt(d),
                za(ow(d), function(p) {
                    return _S.call(d, p)
                }))
            }
            : Zw
              , mI = ow ? function(d) {
                for (var p = []; d; )
                    $a(p, Pw(d)),
                    d = y1(d);
                return p
            }
            : Zw
              , gr = Ar;
            (sw && gr(new sw(new ArrayBuffer(1))) != Fu || Qf && gr(new Qf) != Wt || aw && gr(aw.resolve()) != Rn || Gu && gr(new Gu) != Xr || Jf && gr(new Jf) != Kf) && (gr = function(d) {
                var p = Ar(d)
                  , w = p == Vn ? d.constructor : n
                  , S = w ? uc(w) : "";
                if (S)
                    switch (S) {
                    case pH:
                        return Fu;
                    case mH:
                        return Wt;
                    case vH:
                        return Rn;
                    case yH:
                        return Xr;
                    case wH:
                        return Kf
                    }
                return p
            }
            );
            function DW(d, p, w) {
                for (var S = -1, R = w.length; ++S < R; ) {
                    var B = w[S]
                      , W = B.size;
                    switch (B.type) {
                    case "drop":
                        d += W;
                        break;
                    case "dropRight":
                        p -= W;
                        break;
                    case "take":
                        p = hr(p, d + W);
                        break;
                    case "takeRight":
                        d = Nn(d, p - W);
                        break
                    }
                }
                return {
                    start: d,
                    end: p
                }
            }
            function OW(d) {
                var p = d.match(U$);
                return p ? p[1].split(H$) : []
            }
            function vI(d, p, w) {
                p = Va(p, d);
                for (var S = -1, R = p.length, B = !1; ++S < R; ) {
                    var W = es(p[S]);
                    if (!(B = d != null && w(d, W)))
                        break;
                    d = d[W]
                }
                return B || ++S != R ? B : (R = d == null ? 0 : d.length,
                !!R && V1(R) && Hs(W, R) && (qe(d) || dc(d)))
            }
            function NW(d) {
                var p = d.length
                  , w = new d.constructor(p);
                return p && typeof d[0] == "string" && Tt.call(d, "index") && (w.index = d.index,
                w.input = d.input),
                w
            }
            function yI(d) {
                return typeof d.constructor == "function" && !lh(d) ? Yu(y1(d)) : {}
            }
            function FW(d, p, w) {
                var S = d.constructor;
                switch (p) {
                case Xf:
                    return Iw(d);
                case tt:
                case Je:
                    return new S(+d);
                case Fu:
                    return EW(d, w);
                case Ly:
                case Py:
                case Ry:
                case Dy:
                case Oy:
                case Ny:
                case Fy:
                case By:
                case zy:
                    return eI(d, w);
                case Wt:
                    return new S;
                case fr:
                case $i:
                    return new S(d);
                case Dn:
                    return bW(d);
                case Xr:
                    return new S;
                case Nu:
                    return _W(d)
                }
            }
            function BW(d, p) {
                var w = p.length;
                if (!w)
                    return d;
                var S = w - 1;
                return p[S] = (w > 1 ? "& " : "") + p[S],
                p = p.join(w > 2 ? ", " : " "),
                d.replace($$, `{
/* [wrapped with ` + p + `] */
`)
            }
            function zW(d) {
                return qe(d) || dc(d) || !!(xS && d && d[xS])
            }
            function Hs(d, p) {
                var w = typeof d;
                return p = p ?? q,
                !!p && (w == "number" || w != "symbol" && q$.test(d)) && d > -1 && d % 1 == 0 && d < p
            }
            function Mr(d, p, w) {
                if (!on(w))
                    return !1;
                var S = typeof p;
                return (S == "number" ? qr(w) && Hs(p, w.length) : S == "string" && p in w) ? _o(w[p], d) : !1
            }
            function Rw(d, p) {
                if (qe(d))
                    return !1;
                var w = typeof d;
                return w == "number" || w == "symbol" || w == "boolean" || d == null || Ei(d) ? !0 : N$.test(d) || !O$.test(d) || p != null && d in Bt(p)
            }
            function $W(d) {
                var p = typeof d;
                return p == "string" || p == "number" || p == "symbol" || p == "boolean" ? d !== "__proto__" : d === null
            }
            function Dw(d) {
                var p = F1(d)
                  , w = F[p];
                if (typeof w != "function" || !(p in ct.prototype))
                    return !1;
                if (d === w)
                    return !0;
                var S = Mw(w);
                return !!S && d === S[0]
            }
            function UW(d) {
                return !!wS && wS in d
            }
            var HW = h1 ? Ws : qw;
            function lh(d) {
                var p = d && d.constructor
                  , w = typeof p == "function" && p.prototype || Wu;
                return d === w
            }
            function wI(d) {
                return d === d && !on(d)
            }
            function EI(d, p) {
                return function(w) {
                    return w == null ? !1 : w[d] === p && (p !== n || d in Bt(w))
                }
            }
            function WW(d) {
                var p = W1(d, function(S) {
                    return w.size === c && w.clear(),
                    S
                })
                  , w = p.cache;
                return p
            }
            function GW(d, p) {
                var w = d[1]
                  , S = p[1]
                  , R = w | S
                  , B = R < (E | b | A)
                  , W = S == A && w == x || S == A && w == I && d[7].length <= p[8] || S == (A | I) && p[7].length <= p[8] && w == x;
                if (!(B || W))
                    return d;
                S & E && (d[2] = p[2],
                R |= w & E ? 0 : _);
                var Y = p[3];
                if (Y) {
                    var Z = d[3];
                    d[3] = Z ? nI(Z, Y, p[4]) : Y,
                    d[4] = Z ? Ua(d[3], u) : p[4]
                }
                return Y = p[5],
                Y && (Z = d[5],
                d[5] = Z ? rI(Z, Y, p[6]) : Y,
                d[6] = Z ? Ua(d[5], u) : p[6]),
                Y = p[7],
                Y && (d[7] = Y),
                S & A && (d[8] = d[8] == null ? p[8] : hr(d[8], p[8])),
                d[9] == null && (d[9] = p[9]),
                d[0] = p[0],
                d[1] = R,
                d
            }
            function VW(d) {
                var p = [];
                if (d != null)
                    for (var w in Bt(d))
                        p.push(w);
                return p
            }
            function YW(d) {
                return p1.call(d)
            }
            function bI(d, p, w) {
                return p = Nn(p === n ? d.length - 1 : p, 0),
                function() {
                    for (var S = arguments, R = -1, B = Nn(S.length - p, 0), W = ne(B); ++R < B; )
                        W[R] = S[p + R];
                    R = -1;
                    for (var Y = ne(p + 1); ++R < p; )
                        Y[R] = S[R];
                    return Y[p] = w(W),
                    vi(d, this, Y)
                }
            }
            function _I(d, p) {
                return p.length < 2 ? d : lc(d, Yi(p, 0, -1))
            }
            function jW(d, p) {
                for (var w = d.length, S = hr(p.length, w), R = Zr(d); S--; ) {
                    var B = p[S];
                    d[S] = Hs(B, w) ? R[B] : n
                }
                return d
            }
            function Ow(d, p) {
                if (!(p === "constructor" && typeof d[p] == "function") && p != "__proto__")
                    return d[p]
            }
            var xI = II(YS)
              , ch = lH || function(d, p) {
                return qn.setTimeout(d, p)
            }
              , Nw = II(mW);
            function SI(d, p, w) {
                var S = p + "";
                return Nw(d, BW(S, KW(OW(S), w)))
            }
            function II(d) {
                var p = 0
                  , w = 0;
                return function() {
                    var S = fH()
                      , R = z - (S - w);
                    if (w = S,
                    R > 0) {
                        if (++p >= V)
                            return arguments[0]
                    } else
                        p = 0;
                    return d.apply(n, arguments)
                }
            }
            function z1(d, p) {
                var w = -1
                  , S = d.length
                  , R = S - 1;
                for (p = p === n ? S : p; ++w < p; ) {
                    var B = yw(w, R)
                      , W = d[B];
                    d[B] = d[w],
                    d[w] = W
                }
                return d.length = p,
                d
            }
            var CI = WW(function(d) {
                var p = [];
                return d.charCodeAt(0) === 46 && p.push(""),
                d.replace(F$, function(w, S, R, B) {
                    p.push(R ? B.replace(V$, "$1") : S || w)
                }),
                p
            });
            function es(d) {
                if (typeof d == "string" || Ei(d))
                    return d;
                var p = d + "";
                return p == "0" && 1 / d == -ae ? "-0" : p
            }
            function uc(d) {
                if (d != null) {
                    try {
                        return g1.call(d)
                    } catch {}
                    try {
                        return d + ""
                    } catch {}
                }
                return ""
            }
            function KW(d, p) {
                return Hi(oe, function(w) {
                    var S = "_." + w[0];
                    p & w[1] && !c1(d, S) && d.push(S)
                }),
                d.sort()
            }
            function kI(d) {
                if (d instanceof ct)
                    return d.clone();
                var p = new Gi(d.__wrapped__,d.__chain__);
                return p.__actions__ = Zr(d.__actions__),
                p.__index__ = d.__index__,
                p.__values__ = d.__values__,
                p
            }
            function XW(d, p, w) {
                (w ? Mr(d, p, w) : p === n) ? p = 1 : p = Nn(et(p), 0);
                var S = d == null ? 0 : d.length;
                if (!S || p < 1)
                    return [];
                for (var R = 0, B = 0, W = ne(b1(S / p)); R < S; )
                    W[B++] = Yi(d, R, R += p);
                return W
            }
            function ZW(d) {
                for (var p = -1, w = d == null ? 0 : d.length, S = 0, R = []; ++p < w; ) {
                    var B = d[p];
                    B && (R[S++] = B)
                }
                return R
            }
            function qW() {
                var d = arguments.length;
                if (!d)
                    return [];
                for (var p = ne(d - 1), w = arguments[0], S = d; S--; )
                    p[S - 1] = arguments[S];
                return $a(qe(w) ? Zr(w) : [w], Qn(p, 1))
            }
            var QW = it(function(d, p) {
                return yn(d) ? rh(d, Qn(p, 1, yn, !0)) : []
            })
              , JW = it(function(d, p) {
                var w = ji(p);
                return yn(w) && (w = n),
                yn(d) ? rh(d, Qn(p, 1, yn, !0), Fe(w, 2)) : []
            })
              , eG = it(function(d, p) {
                var w = ji(p);
                return yn(w) && (w = n),
                yn(d) ? rh(d, Qn(p, 1, yn, !0), n, w) : []
            });
            function tG(d, p, w) {
                var S = d == null ? 0 : d.length;
                return S ? (p = w || p === n ? 1 : et(p),
                Yi(d, p < 0 ? 0 : p, S)) : []
            }
            function nG(d, p, w) {
                var S = d == null ? 0 : d.length;
                return S ? (p = w || p === n ? 1 : et(p),
                p = S - p,
                Yi(d, 0, p < 0 ? 0 : p)) : []
            }
            function rG(d, p) {
                return d && d.length ? L1(d, Fe(p, 3), !0, !0) : []
            }
            function iG(d, p) {
                return d && d.length ? L1(d, Fe(p, 3), !0) : []
            }
            function oG(d, p, w, S) {
                var R = d == null ? 0 : d.length;
                return R ? (w && typeof w != "number" && Mr(d, p, w) && (w = 0,
                S = R),
                qH(d, p, w, S)) : []
            }
            function TI(d, p, w) {
                var S = d == null ? 0 : d.length;
                if (!S)
                    return -1;
                var R = w == null ? 0 : et(w);
                return R < 0 && (R = Nn(S + R, 0)),
                u1(d, Fe(p, 3), R)
            }
            function AI(d, p, w) {
                var S = d == null ? 0 : d.length;
                if (!S)
                    return -1;
                var R = S - 1;
                return w !== n && (R = et(w),
                R = w < 0 ? Nn(S + R, 0) : hr(R, S - 1)),
                u1(d, Fe(p, 3), R, !0)
            }
            function MI(d) {
                var p = d == null ? 0 : d.length;
                return p ? Qn(d, 1) : []
            }
            function sG(d) {
                var p = d == null ? 0 : d.length;
                return p ? Qn(d, ae) : []
            }
            function aG(d, p) {
                var w = d == null ? 0 : d.length;
                return w ? (p = p === n ? 1 : et(p),
                Qn(d, p)) : []
            }
            function lG(d) {
                for (var p = -1, w = d == null ? 0 : d.length, S = {}; ++p < w; ) {
                    var R = d[p];
                    S[R[0]] = R[1]
                }
                return S
            }
            function LI(d) {
                return d && d.length ? d[0] : n
            }
            function cG(d, p, w) {
                var S = d == null ? 0 : d.length;
                if (!S)
                    return -1;
                var R = w == null ? 0 : et(w);
                return R < 0 && (R = Nn(S + R, 0)),
                zu(d, p, R)
            }
            function uG(d) {
                var p = d == null ? 0 : d.length;
                return p ? Yi(d, 0, -1) : []
            }
            var dG = it(function(d) {
                var p = Qt(d, xw);
                return p.length && p[0] === d[0] ? hw(p) : []
            })
              , fG = it(function(d) {
                var p = ji(d)
                  , w = Qt(d, xw);
                return p === ji(w) ? p = n : w.pop(),
                w.length && w[0] === d[0] ? hw(w, Fe(p, 2)) : []
            })
              , hG = it(function(d) {
                var p = ji(d)
                  , w = Qt(d, xw);
                return p = typeof p == "function" ? p : n,
                p && w.pop(),
                w.length && w[0] === d[0] ? hw(w, n, p) : []
            });
            function gG(d, p) {
                return d == null ? "" : uH.call(d, p)
            }
            function ji(d) {
                var p = d == null ? 0 : d.length;
                return p ? d[p - 1] : n
            }
            function pG(d, p, w) {
                var S = d == null ? 0 : d.length;
                if (!S)
                    return -1;
                var R = S;
                return w !== n && (R = et(w),
                R = R < 0 ? Nn(S + R, 0) : hr(R, S - 1)),
                p === p ? KU(d, p, R) : u1(d, dS, R, !0)
            }
            function mG(d, p) {
                return d && d.length ? HS(d, et(p)) : n
            }
            var vG = it(PI);
            function PI(d, p) {
                return d && d.length && p && p.length ? vw(d, p) : d
            }
            function yG(d, p, w) {
                return d && d.length && p && p.length ? vw(d, p, Fe(w, 2)) : d
            }
            function wG(d, p, w) {
                return d && d.length && p && p.length ? vw(d, p, n, w) : d
            }
            var EG = Us(function(d, p) {
                var w = d == null ? 0 : d.length
                  , S = cw(d, p);
                return VS(d, Qt(p, function(R) {
                    return Hs(R, w) ? +R : R
                }).sort(tI)),
                S
            });
            function bG(d, p) {
                var w = [];
                if (!(d && d.length))
                    return w;
                var S = -1
                  , R = []
                  , B = d.length;
                for (p = Fe(p, 3); ++S < B; ) {
                    var W = d[S];
                    p(W, S, d) && (w.push(W),
                    R.push(S))
                }
                return VS(d, R),
                w
            }
            function Fw(d) {
                return d == null ? d : gH.call(d)
            }
            function _G(d, p, w) {
                var S = d == null ? 0 : d.length;
                return S ? (w && typeof w != "number" && Mr(d, p, w) ? (p = 0,
                w = S) : (p = p == null ? 0 : et(p),
                w = w === n ? S : et(w)),
                Yi(d, p, w)) : []
            }
            function xG(d, p) {
                return M1(d, p)
            }
            function SG(d, p, w) {
                return Ew(d, p, Fe(w, 2))
            }
            function IG(d, p) {
                var w = d == null ? 0 : d.length;
                if (w) {
                    var S = M1(d, p);
                    if (S < w && _o(d[S], p))
                        return S
                }
                return -1
            }
            function CG(d, p) {
                return M1(d, p, !0)
            }
            function kG(d, p, w) {
                return Ew(d, p, Fe(w, 2), !0)
            }
            function TG(d, p) {
                var w = d == null ? 0 : d.length;
                if (w) {
                    var S = M1(d, p, !0) - 1;
                    if (_o(d[S], p))
                        return S
                }
                return -1
            }
            function AG(d) {
                return d && d.length ? jS(d) : []
            }
            function MG(d, p) {
                return d && d.length ? jS(d, Fe(p, 2)) : []
            }
            function LG(d) {
                var p = d == null ? 0 : d.length;
                return p ? Yi(d, 1, p) : []
            }
            function PG(d, p, w) {
                return d && d.length ? (p = w || p === n ? 1 : et(p),
                Yi(d, 0, p < 0 ? 0 : p)) : []
            }
            function RG(d, p, w) {
                var S = d == null ? 0 : d.length;
                return S ? (p = w || p === n ? 1 : et(p),
                p = S - p,
                Yi(d, p < 0 ? 0 : p, S)) : []
            }
            function DG(d, p) {
                return d && d.length ? L1(d, Fe(p, 3), !1, !0) : []
            }
            function OG(d, p) {
                return d && d.length ? L1(d, Fe(p, 3)) : []
            }
            var NG = it(function(d) {
                return Ga(Qn(d, 1, yn, !0))
            })
              , FG = it(function(d) {
                var p = ji(d);
                return yn(p) && (p = n),
                Ga(Qn(d, 1, yn, !0), Fe(p, 2))
            })
              , BG = it(function(d) {
                var p = ji(d);
                return p = typeof p == "function" ? p : n,
                Ga(Qn(d, 1, yn, !0), n, p)
            });
            function zG(d) {
                return d && d.length ? Ga(d) : []
            }
            function $G(d, p) {
                return d && d.length ? Ga(d, Fe(p, 2)) : []
            }
            function UG(d, p) {
                return p = typeof p == "function" ? p : n,
                d && d.length ? Ga(d, n, p) : []
            }
            function Bw(d) {
                if (!(d && d.length))
                    return [];
                var p = 0;
                return d = za(d, function(w) {
                    if (yn(w))
                        return p = Nn(w.length, p),
                        !0
                }),
                tw(p, function(w) {
                    return Qt(d, Qy(w))
                })
            }
            function RI(d, p) {
                if (!(d && d.length))
                    return [];
                var w = Bw(d);
                return p == null ? w : Qt(w, function(S) {
                    return vi(p, n, S)
                })
            }
            var HG = it(function(d, p) {
                return yn(d) ? rh(d, p) : []
            })
              , WG = it(function(d) {
                return _w(za(d, yn))
            })
              , GG = it(function(d) {
                var p = ji(d);
                return yn(p) && (p = n),
                _w(za(d, yn), Fe(p, 2))
            })
              , VG = it(function(d) {
                var p = ji(d);
                return p = typeof p == "function" ? p : n,
                _w(za(d, yn), n, p)
            })
              , YG = it(Bw);
            function jG(d, p) {
                return qS(d || [], p || [], nh)
            }
            function KG(d, p) {
                return qS(d || [], p || [], sh)
            }
            var XG = it(function(d) {
                var p = d.length
                  , w = p > 1 ? d[p - 1] : n;
                return w = typeof w == "function" ? (d.pop(),
                w) : n,
                RI(d, w)
            });
            function DI(d) {
                var p = F(d);
                return p.__chain__ = !0,
                p
            }
            function ZG(d, p) {
                return p(d),
                d
            }
            function $1(d, p) {
                return p(d)
            }
            var qG = Us(function(d) {
                var p = d.length
                  , w = p ? d[0] : 0
                  , S = this.__wrapped__
                  , R = function(B) {
                    return cw(B, d)
                };
                return p > 1 || this.__actions__.length || !(S instanceof ct) || !Hs(w) ? this.thru(R) : (S = S.slice(w, +w + (p ? 1 : 0)),
                S.__actions__.push({
                    func: $1,
                    args: [R],
                    thisArg: n
                }),
                new Gi(S,this.__chain__).thru(function(B) {
                    return p && !B.length && B.push(n),
                    B
                }))
            });
            function QG() {
                return DI(this)
            }
            function JG() {
                return new Gi(this.value(),this.__chain__)
            }
            function eV() {
                this.__values__ === n && (this.__values__ = KI(this.value()));
                var d = this.__index__ >= this.__values__.length
                  , p = d ? n : this.__values__[this.__index__++];
                return {
                    done: d,
                    value: p
                }
            }
            function tV() {
                return this
            }
            function nV(d) {
                for (var p, w = this; w instanceof I1; ) {
                    var S = kI(w);
                    S.__index__ = 0,
                    S.__values__ = n,
                    p ? R.__wrapped__ = S : p = S;
                    var R = S;
                    w = w.__wrapped__
                }
                return R.__wrapped__ = d,
                p
            }
            function rV() {
                var d = this.__wrapped__;
                if (d instanceof ct) {
                    var p = d;
                    return this.__actions__.length && (p = new ct(this)),
                    p = p.reverse(),
                    p.__actions__.push({
                        func: $1,
                        args: [Fw],
                        thisArg: n
                    }),
                    new Gi(p,this.__chain__)
                }
                return this.thru(Fw)
            }
            function iV() {
                return ZS(this.__wrapped__, this.__actions__)
            }
            var oV = P1(function(d, p, w) {
                Tt.call(d, w) ? ++d[w] : zs(d, w, 1)
            });
            function sV(d, p, w) {
                var S = qe(d) ? cS : ZH;
                return w && Mr(d, p, w) && (p = n),
                S(d, Fe(p, 3))
            }
            function aV(d, p) {
                var w = qe(d) ? za : RS;
                return w(d, Fe(p, 3))
            }
            var lV = aI(TI)
              , cV = aI(AI);
            function uV(d, p) {
                return Qn(U1(d, p), 1)
            }
            function dV(d, p) {
                return Qn(U1(d, p), ae)
            }
            function fV(d, p, w) {
                return w = w === n ? 1 : et(w),
                Qn(U1(d, p), w)
            }
            function OI(d, p) {
                var w = qe(d) ? Hi : Wa;
                return w(d, Fe(p, 3))
            }
            function NI(d, p) {
                var w = qe(d) ? LU : PS;
                return w(d, Fe(p, 3))
            }
            var hV = P1(function(d, p, w) {
                Tt.call(d, w) ? d[w].push(p) : zs(d, w, [p])
            });
            function gV(d, p, w, S) {
                d = qr(d) ? d : qu(d),
                w = w && !S ? et(w) : 0;
                var R = d.length;
                return w < 0 && (w = Nn(R + w, 0)),
                Y1(d) ? w <= R && d.indexOf(p, w) > -1 : !!R && zu(d, p, w) > -1
            }
            var pV = it(function(d, p, w) {
                var S = -1
                  , R = typeof p == "function"
                  , B = qr(d) ? ne(d.length) : [];
                return Wa(d, function(W) {
                    B[++S] = R ? vi(p, W, w) : ih(W, p, w)
                }),
                B
            })
              , mV = P1(function(d, p, w) {
                zs(d, w, p)
            });
            function U1(d, p) {
                var w = qe(d) ? Qt : zS;
                return w(d, Fe(p, 3))
            }
            function vV(d, p, w, S) {
                return d == null ? [] : (qe(p) || (p = p == null ? [] : [p]),
                w = S ? n : w,
                qe(w) || (w = w == null ? [] : [w]),
                WS(d, p, w))
            }
            var yV = P1(function(d, p, w) {
                d[w ? 0 : 1].push(p)
            }, function() {
                return [[], []]
            });
            function wV(d, p, w) {
                var S = qe(d) ? Zy : hS
                  , R = arguments.length < 3;
                return S(d, Fe(p, 4), w, R, Wa)
            }
            function EV(d, p, w) {
                var S = qe(d) ? PU : hS
                  , R = arguments.length < 3;
                return S(d, Fe(p, 4), w, R, PS)
            }
            function bV(d, p) {
                var w = qe(d) ? za : RS;
                return w(d, G1(Fe(p, 3)))
            }
            function _V(d) {
                var p = qe(d) ? TS : gW;
                return p(d)
            }
            function xV(d, p, w) {
                (w ? Mr(d, p, w) : p === n) ? p = 1 : p = et(p);
                var S = qe(d) ? VH : pW;
                return S(d, p)
            }
            function SV(d) {
                var p = qe(d) ? YH : vW;
                return p(d)
            }
            function IV(d) {
                if (d == null)
                    return 0;
                if (qr(d))
                    return Y1(d) ? Uu(d) : d.length;
                var p = gr(d);
                return p == Wt || p == Xr ? d.size : pw(d).length
            }
            function CV(d, p, w) {
                var S = qe(d) ? qy : yW;
                return w && Mr(d, p, w) && (p = n),
                S(d, Fe(p, 3))
            }
            var kV = it(function(d, p) {
                if (d == null)
                    return [];
                var w = p.length;
                return w > 1 && Mr(d, p[0], p[1]) ? p = [] : w > 2 && Mr(p[0], p[1], p[2]) && (p = [p[0]]),
                WS(d, Qn(p, 1), [])
            })
              , H1 = aH || function() {
                return qn.Date.now()
            }
            ;
            function TV(d, p) {
                if (typeof p != "function")
                    throw new Wi(s);
                return d = et(d),
                function() {
                    if (--d < 1)
                        return p.apply(this, arguments)
                }
            }
            function FI(d, p, w) {
                return p = w ? n : p,
                p = d && p == null ? d.length : p,
                $s(d, A, n, n, n, n, p)
            }
            function BI(d, p) {
                var w;
                if (typeof p != "function")
                    throw new Wi(s);
                return d = et(d),
                function() {
                    return --d > 0 && (w = p.apply(this, arguments)),
                    d <= 1 && (p = n),
                    w
                }
            }
            var zw = it(function(d, p, w) {
                var S = E;
                if (w.length) {
                    var R = Ua(w, Xu(zw));
                    S |= P
                }
                return $s(d, S, p, w, R)
            })
              , zI = it(function(d, p, w) {
                var S = E | b;
                if (w.length) {
                    var R = Ua(w, Xu(zI));
                    S |= P
                }
                return $s(p, S, d, w, R)
            });
            function $I(d, p, w) {
                p = w ? n : p;
                var S = $s(d, x, n, n, n, n, n, p);
                return S.placeholder = $I.placeholder,
                S
            }
            function UI(d, p, w) {
                p = w ? n : p;
                var S = $s(d, C, n, n, n, n, n, p);
                return S.placeholder = UI.placeholder,
                S
            }
            function HI(d, p, w) {
                var S, R, B, W, Y, Z, fe = 0, he = !1, ge = !1, Ie = !0;
                if (typeof d != "function")
                    throw new Wi(s);
                p = Ki(p) || 0,
                on(w) && (he = !!w.leading,
                ge = "maxWait"in w,
                B = ge ? Nn(Ki(w.maxWait) || 0, p) : B,
                Ie = "trailing"in w ? !!w.trailing : Ie);
                function Pe(wn) {
                    var xo = S
                      , Vs = R;
                    return S = R = n,
                    fe = wn,
                    W = d.apply(Vs, xo),
                    W
                }
                function ze(wn) {
                    return fe = wn,
                    Y = ch(st, p),
                    he ? Pe(wn) : W
                }
                function rt(wn) {
                    var xo = wn - Z
                      , Vs = wn - fe
                      , aC = p - xo;
                    return ge ? hr(aC, B - Vs) : aC
                }
                function $e(wn) {
                    var xo = wn - Z
                      , Vs = wn - fe;
                    return Z === n || xo >= p || xo < 0 || ge && Vs >= B
                }
                function st() {
                    var wn = H1();
                    if ($e(wn))
                        return ht(wn);
                    Y = ch(st, rt(wn))
                }
                function ht(wn) {
                    return Y = n,
                    Ie && S ? Pe(wn) : (S = R = n,
                    W)
                }
                function bi() {
                    Y !== n && QS(Y),
                    fe = 0,
                    S = Z = R = Y = n
                }
                function Lr() {
                    return Y === n ? W : ht(H1())
                }
                function _i() {
                    var wn = H1()
                      , xo = $e(wn);
                    if (S = arguments,
                    R = this,
                    Z = wn,
                    xo) {
                        if (Y === n)
                            return ze(Z);
                        if (ge)
                            return QS(Y),
                            Y = ch(st, p),
                            Pe(Z)
                    }
                    return Y === n && (Y = ch(st, p)),
                    W
                }
                return _i.cancel = bi,
                _i.flush = Lr,
                _i
            }
            var AV = it(function(d, p) {
                return LS(d, 1, p)
            })
              , MV = it(function(d, p, w) {
                return LS(d, Ki(p) || 0, w)
            });
            function LV(d) {
                return $s(d, O)
            }
            function W1(d, p) {
                if (typeof d != "function" || p != null && typeof p != "function")
                    throw new Wi(s);
                var w = function() {
                    var S = arguments
                      , R = p ? p.apply(this, S) : S[0]
                      , B = w.cache;
                    if (B.has(R))
                        return B.get(R);
                    var W = d.apply(this, S);
                    return w.cache = B.set(R, W) || B,
                    W
                };
                return w.cache = new (W1.Cache || Bs),
                w
            }
            W1.Cache = Bs;
            function G1(d) {
                if (typeof d != "function")
                    throw new Wi(s);
                return function() {
                    var p = arguments;
                    switch (p.length) {
                    case 0:
                        return !d.call(this);
                    case 1:
                        return !d.call(this, p[0]);
                    case 2:
                        return !d.call(this, p[0], p[1]);
                    case 3:
                        return !d.call(this, p[0], p[1], p[2])
                    }
                    return !d.apply(this, p)
                }
            }
            function PV(d) {
                return BI(2, d)
            }
            var RV = wW(function(d, p) {
                p = p.length == 1 && qe(p[0]) ? Qt(p[0], yi(Fe())) : Qt(Qn(p, 1), yi(Fe()));
                var w = p.length;
                return it(function(S) {
                    for (var R = -1, B = hr(S.length, w); ++R < B; )
                        S[R] = p[R].call(this, S[R]);
                    return vi(d, this, S)
                })
            })
              , $w = it(function(d, p) {
                var w = Ua(p, Xu($w));
                return $s(d, P, n, p, w)
            })
              , WI = it(function(d, p) {
                var w = Ua(p, Xu(WI));
                return $s(d, M, n, p, w)
            })
              , DV = Us(function(d, p) {
                return $s(d, I, n, n, n, p)
            });
            function OV(d, p) {
                if (typeof d != "function")
                    throw new Wi(s);
                return p = p === n ? p : et(p),
                it(d, p)
            }
            function NV(d, p) {
                if (typeof d != "function")
                    throw new Wi(s);
                return p = p == null ? 0 : Nn(et(p), 0),
                it(function(w) {
                    var S = w[p]
                      , R = Ya(w, 0, p);
                    return S && $a(R, S),
                    vi(d, this, R)
                })
            }
            function FV(d, p, w) {
                var S = !0
                  , R = !0;
                if (typeof d != "function")
                    throw new Wi(s);
                return on(w) && (S = "leading"in w ? !!w.leading : S,
                R = "trailing"in w ? !!w.trailing : R),
                HI(d, p, {
                    leading: S,
                    maxWait: p,
                    trailing: R
                })
            }
            function BV(d) {
                return FI(d, 1)
            }
            function zV(d, p) {
                return $w(Sw(p), d)
            }
            function $V() {
                if (!arguments.length)
                    return [];
                var d = arguments[0];
                return qe(d) ? d : [d]
            }
            function UV(d) {
                return Vi(d, m)
            }
            function HV(d, p) {
                return p = typeof p == "function" ? p : n,
                Vi(d, m, p)
            }
            function WV(d) {
                return Vi(d, f | m)
            }
            function GV(d, p) {
                return p = typeof p == "function" ? p : n,
                Vi(d, f | m, p)
            }
            function VV(d, p) {
                return p == null || MS(d, p, Yn(p))
            }
            function _o(d, p) {
                return d === p || d !== d && p !== p
            }
            var YV = N1(fw)
              , jV = N1(function(d, p) {
                return d >= p
            })
              , dc = NS(function() {
                return arguments
            }()) ? NS : function(d) {
                return dn(d) && Tt.call(d, "callee") && !_S.call(d, "callee")
            }
              , qe = ne.isArray
              , KV = rS ? yi(rS) : nW;
            function qr(d) {
                return d != null && V1(d.length) && !Ws(d)
            }
            function yn(d) {
                return dn(d) && qr(d)
            }
            function XV(d) {
                return d === !0 || d === !1 || dn(d) && Ar(d) == tt
            }
            var ja = cH || qw
              , ZV = iS ? yi(iS) : rW;
            function qV(d) {
                return dn(d) && d.nodeType === 1 && !uh(d)
            }
            function QV(d) {
                if (d == null)
                    return !0;
                if (qr(d) && (qe(d) || typeof d == "string" || typeof d.splice == "function" || ja(d) || Zu(d) || dc(d)))
                    return !d.length;
                var p = gr(d);
                if (p == Wt || p == Xr)
                    return !d.size;
                if (lh(d))
                    return !pw(d).length;
                for (var w in d)
                    if (Tt.call(d, w))
                        return !1;
                return !0
            }
            function JV(d, p) {
                return oh(d, p)
            }
            function eY(d, p, w) {
                w = typeof w == "function" ? w : n;
                var S = w ? w(d, p) : n;
                return S === n ? oh(d, p, n, w) : !!S
            }
            function Uw(d) {
                if (!dn(d))
                    return !1;
                var p = Ar(d);
                return p == ot || p == nt || typeof d.message == "string" && typeof d.name == "string" && !uh(d)
            }
            function tY(d) {
                return typeof d == "number" && SS(d)
            }
            function Ws(d) {
                if (!on(d))
                    return !1;
                var p = Ar(d);
                return p == kt || p == dr || p == be || p == Tr
            }
            function GI(d) {
                return typeof d == "number" && d == et(d)
            }
            function V1(d) {
                return typeof d == "number" && d > -1 && d % 1 == 0 && d <= q
            }
            function on(d) {
                var p = typeof d;
                return d != null && (p == "object" || p == "function")
            }
            function dn(d) {
                return d != null && typeof d == "object"
            }
            var VI = oS ? yi(oS) : oW;
            function nY(d, p) {
                return d === p || gw(d, p, Lw(p))
            }
            function rY(d, p, w) {
                return w = typeof w == "function" ? w : n,
                gw(d, p, Lw(p), w)
            }
            function iY(d) {
                return YI(d) && d != +d
            }
            function oY(d) {
                if (HW(d))
                    throw new Ze(o);
                return FS(d)
            }
            function sY(d) {
                return d === null
            }
            function aY(d) {
                return d == null
            }
            function YI(d) {
                return typeof d == "number" || dn(d) && Ar(d) == fr
            }
            function uh(d) {
                if (!dn(d) || Ar(d) != Vn)
                    return !1;
                var p = y1(d);
                if (p === null)
                    return !0;
                var w = Tt.call(p, "constructor") && p.constructor;
                return typeof w == "function" && w instanceof w && g1.call(w) == rH
            }
            var Hw = sS ? yi(sS) : sW;
            function lY(d) {
                return GI(d) && d >= -q && d <= q
            }
            var jI = aS ? yi(aS) : aW;
            function Y1(d) {
                return typeof d == "string" || !qe(d) && dn(d) && Ar(d) == $i
            }
            function Ei(d) {
                return typeof d == "symbol" || dn(d) && Ar(d) == Nu
            }
            var Zu = lS ? yi(lS) : lW;
            function cY(d) {
                return d === n
            }
            function uY(d) {
                return dn(d) && gr(d) == Kf
            }
            function dY(d) {
                return dn(d) && Ar(d) == k$
            }
            var fY = N1(mw)
              , hY = N1(function(d, p) {
                return d <= p
            });
            function KI(d) {
                if (!d)
                    return [];
                if (qr(d))
                    return Y1(d) ? Eo(d) : Zr(d);
                if (qf && d[qf])
                    return VU(d[qf]());
                var p = gr(d)
                  , w = p == Wt ? rw : p == Xr ? d1 : qu;
                return w(d)
            }
            function Gs(d) {
                if (!d)
                    return d === 0 ? d : 0;
                if (d = Ki(d),
                d === ae || d === -ae) {
                    var p = d < 0 ? -1 : 1;
                    return p * K
                }
                return d === d ? d : 0
            }
            function et(d) {
                var p = Gs(d)
                  , w = p % 1;
                return p === p ? w ? p - w : p : 0
            }
            function XI(d) {
                return d ? ac(et(d), 0, H) : 0
            }
            function Ki(d) {
                if (typeof d == "number")
                    return d;
                if (Ei(d))
                    return G;
                if (on(d)) {
                    var p = typeof d.valueOf == "function" ? d.valueOf() : d;
                    d = on(p) ? p + "" : p
                }
                if (typeof d != "string")
                    return d === 0 ? d : +d;
                d = gS(d);
                var w = K$.test(d);
                return w || Z$.test(d) ? TU(d.slice(2), w ? 2 : 8) : j$.test(d) ? G : +d
            }
            function ZI(d) {
                return Jo(d, Qr(d))
            }
            function gY(d) {
                return d ? ac(et(d), -q, q) : d === 0 ? d : 0
            }
            function St(d) {
                return d == null ? "" : wi(d)
            }
            var pY = ju(function(d, p) {
                if (lh(p) || qr(p)) {
                    Jo(p, Yn(p), d);
                    return
                }
                for (var w in p)
                    Tt.call(p, w) && nh(d, w, p[w])
            })
              , qI = ju(function(d, p) {
                Jo(p, Qr(p), d)
            })
              , j1 = ju(function(d, p, w, S) {
                Jo(p, Qr(p), d, S)
            })
              , mY = ju(function(d, p, w, S) {
                Jo(p, Yn(p), d, S)
            })
              , vY = Us(cw);
            function yY(d, p) {
                var w = Yu(d);
                return p == null ? w : AS(w, p)
            }
            var wY = it(function(d, p) {
                d = Bt(d);
                var w = -1
                  , S = p.length
                  , R = S > 2 ? p[2] : n;
                for (R && Mr(p[0], p[1], R) && (S = 1); ++w < S; )
                    for (var B = p[w], W = Qr(B), Y = -1, Z = W.length; ++Y < Z; ) {
                        var fe = W[Y]
                          , he = d[fe];
                        (he === n || _o(he, Wu[fe]) && !Tt.call(d, fe)) && (d[fe] = B[fe])
                    }
                return d
            })
              , EY = it(function(d) {
                return d.push(n, gI),
                vi(QI, n, d)
            });
            function bY(d, p) {
                return uS(d, Fe(p, 3), Qo)
            }
            function _Y(d, p) {
                return uS(d, Fe(p, 3), dw)
            }
            function xY(d, p) {
                return d == null ? d : uw(d, Fe(p, 3), Qr)
            }
            function SY(d, p) {
                return d == null ? d : DS(d, Fe(p, 3), Qr)
            }
            function IY(d, p) {
                return d && Qo(d, Fe(p, 3))
            }
            function CY(d, p) {
                return d && dw(d, Fe(p, 3))
            }
            function kY(d) {
                return d == null ? [] : T1(d, Yn(d))
            }
            function TY(d) {
                return d == null ? [] : T1(d, Qr(d))
            }
            function Ww(d, p, w) {
                var S = d == null ? n : lc(d, p);
                return S === n ? w : S
            }
            function AY(d, p) {
                return d != null && vI(d, p, QH)
            }
            function Gw(d, p) {
                return d != null && vI(d, p, JH)
            }
            var MY = cI(function(d, p, w) {
                p != null && typeof p.toString != "function" && (p = p1.call(p)),
                d[p] = w
            }, Yw(Jr))
              , LY = cI(function(d, p, w) {
                p != null && typeof p.toString != "function" && (p = p1.call(p)),
                Tt.call(d, p) ? d[p].push(w) : d[p] = [w]
            }, Fe)
              , PY = it(ih);
            function Yn(d) {
                return qr(d) ? kS(d) : pw(d)
            }
            function Qr(d) {
                return qr(d) ? kS(d, !0) : cW(d)
            }
            function RY(d, p) {
                var w = {};
                return p = Fe(p, 3),
                Qo(d, function(S, R, B) {
                    zs(w, p(S, R, B), S)
                }),
                w
            }
            function DY(d, p) {
                var w = {};
                return p = Fe(p, 3),
                Qo(d, function(S, R, B) {
                    zs(w, R, p(S, R, B))
                }),
                w
            }
            var OY = ju(function(d, p, w) {
                A1(d, p, w)
            })
              , QI = ju(function(d, p, w, S) {
                A1(d, p, w, S)
            })
              , NY = Us(function(d, p) {
                var w = {};
                if (d == null)
                    return w;
                var S = !1;
                p = Qt(p, function(B) {
                    return B = Va(B, d),
                    S || (S = B.length > 1),
                    B
                }),
                Jo(d, Aw(d), w),
                S && (w = Vi(w, f | h | m, MW));
                for (var R = p.length; R--; )
                    bw(w, p[R]);
                return w
            });
            function FY(d, p) {
                return JI(d, G1(Fe(p)))
            }
            var BY = Us(function(d, p) {
                return d == null ? {} : dW(d, p)
            });
            function JI(d, p) {
                if (d == null)
                    return {};
                var w = Qt(Aw(d), function(S) {
                    return [S]
                });
                return p = Fe(p),
                GS(d, w, function(S, R) {
                    return p(S, R[0])
                })
            }
            function zY(d, p, w) {
                p = Va(p, d);
                var S = -1
                  , R = p.length;
                for (R || (R = 1,
                d = n); ++S < R; ) {
                    var B = d == null ? n : d[es(p[S])];
                    B === n && (S = R,
                    B = w),
                    d = Ws(B) ? B.call(d) : B
                }
                return d
            }
            function $Y(d, p, w) {
                return d == null ? d : sh(d, p, w)
            }
            function UY(d, p, w, S) {
                return S = typeof S == "function" ? S : n,
                d == null ? d : sh(d, p, w, S)
            }
            var eC = fI(Yn)
              , tC = fI(Qr);
            function HY(d, p, w) {
                var S = qe(d)
                  , R = S || ja(d) || Zu(d);
                if (p = Fe(p, 4),
                w == null) {
                    var B = d && d.constructor;
                    R ? w = S ? new B : [] : on(d) ? w = Ws(B) ? Yu(y1(d)) : {} : w = {}
                }
                return (R ? Hi : Qo)(d, function(W, Y, Z) {
                    return p(w, W, Y, Z)
                }),
                w
            }
            function WY(d, p) {
                return d == null ? !0 : bw(d, p)
            }
            function GY(d, p, w) {
                return d == null ? d : XS(d, p, Sw(w))
            }
            function VY(d, p, w, S) {
                return S = typeof S == "function" ? S : n,
                d == null ? d : XS(d, p, Sw(w), S)
            }
            function qu(d) {
                return d == null ? [] : nw(d, Yn(d))
            }
            function YY(d) {
                return d == null ? [] : nw(d, Qr(d))
            }
            function jY(d, p, w) {
                return w === n && (w = p,
                p = n),
                w !== n && (w = Ki(w),
                w = w === w ? w : 0),
                p !== n && (p = Ki(p),
                p = p === p ? p : 0),
                ac(Ki(d), p, w)
            }
            function KY(d, p, w) {
                return p = Gs(p),
                w === n ? (w = p,
                p = 0) : w = Gs(w),
                d = Ki(d),
                eW(d, p, w)
            }
            function XY(d, p, w) {
                if (w && typeof w != "boolean" && Mr(d, p, w) && (p = w = n),
                w === n && (typeof p == "boolean" ? (w = p,
                p = n) : typeof d == "boolean" && (w = d,
                d = n)),
                d === n && p === n ? (d = 0,
                p = 1) : (d = Gs(d),
                p === n ? (p = d,
                d = 0) : p = Gs(p)),
                d > p) {
                    var S = d;
                    d = p,
                    p = S
                }
                if (w || d % 1 || p % 1) {
                    var R = IS();
                    return hr(d + R * (p - d + kU("1e-" + ((R + "").length - 1))), p)
                }
                return yw(d, p)
            }
            var ZY = Ku(function(d, p, w) {
                return p = p.toLowerCase(),
                d + (w ? nC(p) : p)
            });
            function nC(d) {
                return Vw(St(d).toLowerCase())
            }
            function rC(d) {
                return d = St(d),
                d && d.replace(Q$, $U).replace(vU, "")
            }
            function qY(d, p, w) {
                d = St(d),
                p = wi(p);
                var S = d.length;
                w = w === n ? S : ac(et(w), 0, S);
                var R = w;
                return w -= p.length,
                w >= 0 && d.slice(w, R) == p
            }
            function QY(d) {
                return d = St(d),
                d && P$.test(d) ? d.replace(D5, UU) : d
            }
            function JY(d) {
                return d = St(d),
                d && B$.test(d) ? d.replace($y, "\\$&") : d
            }
            var ej = Ku(function(d, p, w) {
                return d + (w ? "-" : "") + p.toLowerCase()
            })
              , tj = Ku(function(d, p, w) {
                return d + (w ? " " : "") + p.toLowerCase()
            })
              , nj = sI("toLowerCase");
            function rj(d, p, w) {
                d = St(d),
                p = et(p);
                var S = p ? Uu(d) : 0;
                if (!p || S >= p)
                    return d;
                var R = (p - S) / 2;
                return O1(_1(R), w) + d + O1(b1(R), w)
            }
            function ij(d, p, w) {
                d = St(d),
                p = et(p);
                var S = p ? Uu(d) : 0;
                return p && S < p ? d + O1(p - S, w) : d
            }
            function oj(d, p, w) {
                d = St(d),
                p = et(p);
                var S = p ? Uu(d) : 0;
                return p && S < p ? O1(p - S, w) + d : d
            }
            function sj(d, p, w) {
                return w || p == null ? p = 0 : p && (p = +p),
                hH(St(d).replace(Uy, ""), p || 0)
            }
            function aj(d, p, w) {
                return (w ? Mr(d, p, w) : p === n) ? p = 1 : p = et(p),
                ww(St(d), p)
            }
            function lj() {
                var d = arguments
                  , p = St(d[0]);
                return d.length < 3 ? p : p.replace(d[1], d[2])
            }
            var cj = Ku(function(d, p, w) {
                return d + (w ? "_" : "") + p.toLowerCase()
            });
            function uj(d, p, w) {
                return w && typeof w != "number" && Mr(d, p, w) && (p = w = n),
                w = w === n ? H : w >>> 0,
                w ? (d = St(d),
                d && (typeof p == "string" || p != null && !Hw(p)) && (p = wi(p),
                !p && $u(d)) ? Ya(Eo(d), 0, w) : d.split(p, w)) : []
            }
            var dj = Ku(function(d, p, w) {
                return d + (w ? " " : "") + Vw(p)
            });
            function fj(d, p, w) {
                return d = St(d),
                w = w == null ? 0 : ac(et(w), 0, d.length),
                p = wi(p),
                d.slice(w, w + p.length) == p
            }
            function hj(d, p, w) {
                var S = F.templateSettings;
                w && Mr(d, p, w) && (p = n),
                d = St(d),
                p = j1({}, p, S, hI);
                var R = j1({}, p.imports, S.imports, hI), B = Yn(R), W = nw(R, B), Y, Z, fe = 0, he = p.interpolate || s1, ge = "__p += '", Ie = iw((p.escape || s1).source + "|" + he.source + "|" + (he === O5 ? Y$ : s1).source + "|" + (p.evaluate || s1).source + "|$", "g"), Pe = "//# sourceURL=" + (Tt.call(p, "sourceURL") ? (p.sourceURL + "").replace(/\s/g, " ") : "lodash.templateSources[" + ++_U + "]") + `
`;
                d.replace(Ie, function($e, st, ht, bi, Lr, _i) {
                    return ht || (ht = bi),
                    ge += d.slice(fe, _i).replace(J$, HU),
                    st && (Y = !0,
                    ge += `' +
__e(` + st + `) +
'`),
                    Lr && (Z = !0,
                    ge += `';
` + Lr + `;
__p += '`),
                    ht && (ge += `' +
((__t = (` + ht + `)) == null ? '' : __t) +
'`),
                    fe = _i + $e.length,
                    $e
                }),
                ge += `';
`;
                var ze = Tt.call(p, "variable") && p.variable;
                if (!ze)
                    ge = `with (obj) {
` + ge + `
}
`;
                else if (G$.test(ze))
                    throw new Ze(a);
                ge = (Z ? ge.replace(T$, "") : ge).replace(A$, "$1").replace(M$, "$1;"),
                ge = "function(" + (ze || "obj") + `) {
` + (ze ? "" : `obj || (obj = {});
`) + "var __t, __p = ''" + (Y ? ", __e = _.escape" : "") + (Z ? `, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
` : `;
`) + ge + `return __p
}`;
                var rt = oC(function() {
                    return bt(B, Pe + "return " + ge).apply(n, W)
                });
                if (rt.source = ge,
                Uw(rt))
                    throw rt;
                return rt
            }
            function gj(d) {
                return St(d).toLowerCase()
            }
            function pj(d) {
                return St(d).toUpperCase()
            }
            function mj(d, p, w) {
                if (d = St(d),
                d && (w || p === n))
                    return gS(d);
                if (!d || !(p = wi(p)))
                    return d;
                var S = Eo(d)
                  , R = Eo(p)
                  , B = pS(S, R)
                  , W = mS(S, R) + 1;
                return Ya(S, B, W).join("")
            }
            function vj(d, p, w) {
                if (d = St(d),
                d && (w || p === n))
                    return d.slice(0, yS(d) + 1);
                if (!d || !(p = wi(p)))
                    return d;
                var S = Eo(d)
                  , R = mS(S, Eo(p)) + 1;
                return Ya(S, 0, R).join("")
            }
            function yj(d, p, w) {
                if (d = St(d),
                d && (w || p === n))
                    return d.replace(Uy, "");
                if (!d || !(p = wi(p)))
                    return d;
                var S = Eo(d)
                  , R = pS(S, Eo(p));
                return Ya(S, R).join("")
            }
            function wj(d, p) {
                var w = N
                  , S = $;
                if (on(p)) {
                    var R = "separator"in p ? p.separator : R;
                    w = "length"in p ? et(p.length) : w,
                    S = "omission"in p ? wi(p.omission) : S
                }
                d = St(d);
                var B = d.length;
                if ($u(d)) {
                    var W = Eo(d);
                    B = W.length
                }
                if (w >= B)
                    return d;
                var Y = w - Uu(S);
                if (Y < 1)
                    return S;
                var Z = W ? Ya(W, 0, Y).join("") : d.slice(0, Y);
                if (R === n)
                    return Z + S;
                if (W && (Y += Z.length - Y),
                Hw(R)) {
                    if (d.slice(Y).search(R)) {
                        var fe, he = Z;
                        for (R.global || (R = iw(R.source, St(N5.exec(R)) + "g")),
                        R.lastIndex = 0; fe = R.exec(he); )
                            var ge = fe.index;
                        Z = Z.slice(0, ge === n ? Y : ge)
                    }
                } else if (d.indexOf(wi(R), Y) != Y) {
                    var Ie = Z.lastIndexOf(R);
                    Ie > -1 && (Z = Z.slice(0, Ie))
                }
                return Z + S
            }
            function Ej(d) {
                return d = St(d),
                d && L$.test(d) ? d.replace(R5, XU) : d
            }
            var bj = Ku(function(d, p, w) {
                return d + (w ? " " : "") + p.toUpperCase()
            })
              , Vw = sI("toUpperCase");
            function iC(d, p, w) {
                return d = St(d),
                p = w ? n : p,
                p === n ? GU(d) ? QU(d) : OU(d) : d.match(p) || []
            }
            var oC = it(function(d, p) {
                try {
                    return vi(d, n, p)
                } catch (w) {
                    return Uw(w) ? w : new Ze(w)
                }
            })
              , _j = Us(function(d, p) {
                return Hi(p, function(w) {
                    w = es(w),
                    zs(d, w, zw(d[w], d))
                }),
                d
            });
            function xj(d) {
                var p = d == null ? 0 : d.length
                  , w = Fe();
                return d = p ? Qt(d, function(S) {
                    if (typeof S[1] != "function")
                        throw new Wi(s);
                    return [w(S[0]), S[1]]
                }) : [],
                it(function(S) {
                    for (var R = -1; ++R < p; ) {
                        var B = d[R];
                        if (vi(B[0], this, S))
                            return vi(B[1], this, S)
                    }
                })
            }
            function Sj(d) {
                return XH(Vi(d, f))
            }
            function Yw(d) {
                return function() {
                    return d
                }
            }
            function Ij(d, p) {
                return d == null || d !== d ? p : d
            }
            var Cj = lI()
              , kj = lI(!0);
            function Jr(d) {
                return d
            }
            function jw(d) {
                return BS(typeof d == "function" ? d : Vi(d, f))
            }
            function Tj(d) {
                return $S(Vi(d, f))
            }
            function Aj(d, p) {
                return US(d, Vi(p, f))
            }
            var Mj = it(function(d, p) {
                return function(w) {
                    return ih(w, d, p)
                }
            })
              , Lj = it(function(d, p) {
                return function(w) {
                    return ih(d, w, p)
                }
            });
            function Kw(d, p, w) {
                var S = Yn(p)
                  , R = T1(p, S);
                w == null && !(on(p) && (R.length || !S.length)) && (w = p,
                p = d,
                d = this,
                R = T1(p, Yn(p)));
                var B = !(on(w) && "chain"in w) || !!w.chain
                  , W = Ws(d);
                return Hi(R, function(Y) {
                    var Z = p[Y];
                    d[Y] = Z,
                    W && (d.prototype[Y] = function() {
                        var fe = this.__chain__;
                        if (B || fe) {
                            var he = d(this.__wrapped__)
                              , ge = he.__actions__ = Zr(this.__actions__);
                            return ge.push({
                                func: Z,
                                args: arguments,
                                thisArg: d
                            }),
                            he.__chain__ = fe,
                            he
                        }
                        return Z.apply(d, $a([this.value()], arguments))
                    }
                    )
                }),
                d
            }
            function Pj() {
                return qn._ === this && (qn._ = iH),
                this
            }
            function Xw() {}
            function Rj(d) {
                return d = et(d),
                it(function(p) {
                    return HS(p, d)
                })
            }
            var Dj = Cw(Qt)
              , Oj = Cw(cS)
              , Nj = Cw(qy);
            function sC(d) {
                return Rw(d) ? Qy(es(d)) : fW(d)
            }
            function Fj(d) {
                return function(p) {
                    return d == null ? n : lc(d, p)
                }
            }
            var Bj = uI()
              , zj = uI(!0);
            function Zw() {
                return []
            }
            function qw() {
                return !1
            }
            function $j() {
                return {}
            }
            function Uj() {
                return ""
            }
            function Hj() {
                return !0
            }
            function Wj(d, p) {
                if (d = et(d),
                d < 1 || d > q)
                    return [];
                var w = H
                  , S = hr(d, H);
                p = Fe(p),
                d -= H;
                for (var R = tw(S, p); ++w < d; )
                    p(w);
                return R
            }
            function Gj(d) {
                return qe(d) ? Qt(d, es) : Ei(d) ? [d] : Zr(CI(St(d)))
            }
            function Vj(d) {
                var p = ++nH;
                return St(d) + p
            }
            var Yj = D1(function(d, p) {
                return d + p
            }, 0)
              , jj = kw("ceil")
              , Kj = D1(function(d, p) {
                return d / p
            }, 1)
              , Xj = kw("floor");
            function Zj(d) {
                return d && d.length ? k1(d, Jr, fw) : n
            }
            function qj(d, p) {
                return d && d.length ? k1(d, Fe(p, 2), fw) : n
            }
            function Qj(d) {
                return fS(d, Jr)
            }
            function Jj(d, p) {
                return fS(d, Fe(p, 2))
            }
            function eK(d) {
                return d && d.length ? k1(d, Jr, mw) : n
            }
            function tK(d, p) {
                return d && d.length ? k1(d, Fe(p, 2), mw) : n
            }
            var nK = D1(function(d, p) {
                return d * p
            }, 1)
              , rK = kw("round")
              , iK = D1(function(d, p) {
                return d - p
            }, 0);
            function oK(d) {
                return d && d.length ? ew(d, Jr) : 0
            }
            function sK(d, p) {
                return d && d.length ? ew(d, Fe(p, 2)) : 0
            }
            return F.after = TV,
            F.ary = FI,
            F.assign = pY,
            F.assignIn = qI,
            F.assignInWith = j1,
            F.assignWith = mY,
            F.at = vY,
            F.before = BI,
            F.bind = zw,
            F.bindAll = _j,
            F.bindKey = zI,
            F.castArray = $V,
            F.chain = DI,
            F.chunk = XW,
            F.compact = ZW,
            F.concat = qW,
            F.cond = xj,
            F.conforms = Sj,
            F.constant = Yw,
            F.countBy = oV,
            F.create = yY,
            F.curry = $I,
            F.curryRight = UI,
            F.debounce = HI,
            F.defaults = wY,
            F.defaultsDeep = EY,
            F.defer = AV,
            F.delay = MV,
            F.difference = QW,
            F.differenceBy = JW,
            F.differenceWith = eG,
            F.drop = tG,
            F.dropRight = nG,
            F.dropRightWhile = rG,
            F.dropWhile = iG,
            F.fill = oG,
            F.filter = aV,
            F.flatMap = uV,
            F.flatMapDeep = dV,
            F.flatMapDepth = fV,
            F.flatten = MI,
            F.flattenDeep = sG,
            F.flattenDepth = aG,
            F.flip = LV,
            F.flow = Cj,
            F.flowRight = kj,
            F.fromPairs = lG,
            F.functions = kY,
            F.functionsIn = TY,
            F.groupBy = hV,
            F.initial = uG,
            F.intersection = dG,
            F.intersectionBy = fG,
            F.intersectionWith = hG,
            F.invert = MY,
            F.invertBy = LY,
            F.invokeMap = pV,
            F.iteratee = jw,
            F.keyBy = mV,
            F.keys = Yn,
            F.keysIn = Qr,
            F.map = U1,
            F.mapKeys = RY,
            F.mapValues = DY,
            F.matches = Tj,
            F.matchesProperty = Aj,
            F.memoize = W1,
            F.merge = OY,
            F.mergeWith = QI,
            F.method = Mj,
            F.methodOf = Lj,
            F.mixin = Kw,
            F.negate = G1,
            F.nthArg = Rj,
            F.omit = NY,
            F.omitBy = FY,
            F.once = PV,
            F.orderBy = vV,
            F.over = Dj,
            F.overArgs = RV,
            F.overEvery = Oj,
            F.overSome = Nj,
            F.partial = $w,
            F.partialRight = WI,
            F.partition = yV,
            F.pick = BY,
            F.pickBy = JI,
            F.property = sC,
            F.propertyOf = Fj,
            F.pull = vG,
            F.pullAll = PI,
            F.pullAllBy = yG,
            F.pullAllWith = wG,
            F.pullAt = EG,
            F.range = Bj,
            F.rangeRight = zj,
            F.rearg = DV,
            F.reject = bV,
            F.remove = bG,
            F.rest = OV,
            F.reverse = Fw,
            F.sampleSize = xV,
            F.set = $Y,
            F.setWith = UY,
            F.shuffle = SV,
            F.slice = _G,
            F.sortBy = kV,
            F.sortedUniq = AG,
            F.sortedUniqBy = MG,
            F.split = uj,
            F.spread = NV,
            F.tail = LG,
            F.take = PG,
            F.takeRight = RG,
            F.takeRightWhile = DG,
            F.takeWhile = OG,
            F.tap = ZG,
            F.throttle = FV,
            F.thru = $1,
            F.toArray = KI,
            F.toPairs = eC,
            F.toPairsIn = tC,
            F.toPath = Gj,
            F.toPlainObject = ZI,
            F.transform = HY,
            F.unary = BV,
            F.union = NG,
            F.unionBy = FG,
            F.unionWith = BG,
            F.uniq = zG,
            F.uniqBy = $G,
            F.uniqWith = UG,
            F.unset = WY,
            F.unzip = Bw,
            F.unzipWith = RI,
            F.update = GY,
            F.updateWith = VY,
            F.values = qu,
            F.valuesIn = YY,
            F.without = HG,
            F.words = iC,
            F.wrap = zV,
            F.xor = WG,
            F.xorBy = GG,
            F.xorWith = VG,
            F.zip = YG,
            F.zipObject = jG,
            F.zipObjectDeep = KG,
            F.zipWith = XG,
            F.entries = eC,
            F.entriesIn = tC,
            F.extend = qI,
            F.extendWith = j1,
            Kw(F, F),
            F.add = Yj,
            F.attempt = oC,
            F.camelCase = ZY,
            F.capitalize = nC,
            F.ceil = jj,
            F.clamp = jY,
            F.clone = UV,
            F.cloneDeep = WV,
            F.cloneDeepWith = GV,
            F.cloneWith = HV,
            F.conformsTo = VV,
            F.deburr = rC,
            F.defaultTo = Ij,
            F.divide = Kj,
            F.endsWith = qY,
            F.eq = _o,
            F.escape = QY,
            F.escapeRegExp = JY,
            F.every = sV,
            F.find = lV,
            F.findIndex = TI,
            F.findKey = bY,
            F.findLast = cV,
            F.findLastIndex = AI,
            F.findLastKey = _Y,
            F.floor = Xj,
            F.forEach = OI,
            F.forEachRight = NI,
            F.forIn = xY,
            F.forInRight = SY,
            F.forOwn = IY,
            F.forOwnRight = CY,
            F.get = Ww,
            F.gt = YV,
            F.gte = jV,
            F.has = AY,
            F.hasIn = Gw,
            F.head = LI,
            F.identity = Jr,
            F.includes = gV,
            F.indexOf = cG,
            F.inRange = KY,
            F.invoke = PY,
            F.isArguments = dc,
            F.isArray = qe,
            F.isArrayBuffer = KV,
            F.isArrayLike = qr,
            F.isArrayLikeObject = yn,
            F.isBoolean = XV,
            F.isBuffer = ja,
            F.isDate = ZV,
            F.isElement = qV,
            F.isEmpty = QV,
            F.isEqual = JV,
            F.isEqualWith = eY,
            F.isError = Uw,
            F.isFinite = tY,
            F.isFunction = Ws,
            F.isInteger = GI,
            F.isLength = V1,
            F.isMap = VI,
            F.isMatch = nY,
            F.isMatchWith = rY,
            F.isNaN = iY,
            F.isNative = oY,
            F.isNil = aY,
            F.isNull = sY,
            F.isNumber = YI,
            F.isObject = on,
            F.isObjectLike = dn,
            F.isPlainObject = uh,
            F.isRegExp = Hw,
            F.isSafeInteger = lY,
            F.isSet = jI,
            F.isString = Y1,
            F.isSymbol = Ei,
            F.isTypedArray = Zu,
            F.isUndefined = cY,
            F.isWeakMap = uY,
            F.isWeakSet = dY,
            F.join = gG,
            F.kebabCase = ej,
            F.last = ji,
            F.lastIndexOf = pG,
            F.lowerCase = tj,
            F.lowerFirst = nj,
            F.lt = fY,
            F.lte = hY,
            F.max = Zj,
            F.maxBy = qj,
            F.mean = Qj,
            F.meanBy = Jj,
            F.min = eK,
            F.minBy = tK,
            F.stubArray = Zw,
            F.stubFalse = qw,
            F.stubObject = $j,
            F.stubString = Uj,
            F.stubTrue = Hj,
            F.multiply = nK,
            F.nth = mG,
            F.noConflict = Pj,
            F.noop = Xw,
            F.now = H1,
            F.pad = rj,
            F.padEnd = ij,
            F.padStart = oj,
            F.parseInt = sj,
            F.random = XY,
            F.reduce = wV,
            F.reduceRight = EV,
            F.repeat = aj,
            F.replace = lj,
            F.result = zY,
            F.round = rK,
            F.runInContext = X,
            F.sample = _V,
            F.size = IV,
            F.snakeCase = cj,
            F.some = CV,
            F.sortedIndex = xG,
            F.sortedIndexBy = SG,
            F.sortedIndexOf = IG,
            F.sortedLastIndex = CG,
            F.sortedLastIndexBy = kG,
            F.sortedLastIndexOf = TG,
            F.startCase = dj,
            F.startsWith = fj,
            F.subtract = iK,
            F.sum = oK,
            F.sumBy = sK,
            F.template = hj,
            F.times = Wj,
            F.toFinite = Gs,
            F.toInteger = et,
            F.toLength = XI,
            F.toLower = gj,
            F.toNumber = Ki,
            F.toSafeInteger = gY,
            F.toString = St,
            F.toUpper = pj,
            F.trim = mj,
            F.trimEnd = vj,
            F.trimStart = yj,
            F.truncate = wj,
            F.unescape = Ej,
            F.uniqueId = Vj,
            F.upperCase = bj,
            F.upperFirst = Vw,
            F.each = OI,
            F.eachRight = NI,
            F.first = LI,
            Kw(F, function() {
                var d = {};
                return Qo(F, function(p, w) {
                    Tt.call(F.prototype, w) || (d[w] = p)
                }),
                d
            }(), {
                chain: !1
            }),
            F.VERSION = r,
            Hi(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(d) {
                F[d].placeholder = F
            }),
            Hi(["drop", "take"], function(d, p) {
                ct.prototype[d] = function(w) {
                    w = w === n ? 1 : Nn(et(w), 0);
                    var S = this.__filtered__ && !p ? new ct(this) : this.clone();
                    return S.__filtered__ ? S.__takeCount__ = hr(w, S.__takeCount__) : S.__views__.push({
                        size: hr(w, H),
                        type: d + (S.__dir__ < 0 ? "Right" : "")
                    }),
                    S
                }
                ,
                ct.prototype[d + "Right"] = function(w) {
                    return this.reverse()[d](w).reverse()
                }
            }),
            Hi(["filter", "map", "takeWhile"], function(d, p) {
                var w = p + 1
                  , S = w == j || w == se;
                ct.prototype[d] = function(R) {
                    var B = this.clone();
                    return B.__iteratees__.push({
                        iteratee: Fe(R, 3),
                        type: w
                    }),
                    B.__filtered__ = B.__filtered__ || S,
                    B
                }
            }),
            Hi(["head", "last"], function(d, p) {
                var w = "take" + (p ? "Right" : "");
                ct.prototype[d] = function() {
                    return this[w](1).value()[0]
                }
            }),
            Hi(["initial", "tail"], function(d, p) {
                var w = "drop" + (p ? "" : "Right");
                ct.prototype[d] = function() {
                    return this.__filtered__ ? new ct(this) : this[w](1)
                }
            }),
            ct.prototype.compact = function() {
                return this.filter(Jr)
            }
            ,
            ct.prototype.find = function(d) {
                return this.filter(d).head()
            }
            ,
            ct.prototype.findLast = function(d) {
                return this.reverse().find(d)
            }
            ,
            ct.prototype.invokeMap = it(function(d, p) {
                return typeof d == "function" ? new ct(this) : this.map(function(w) {
                    return ih(w, d, p)
                })
            }),
            ct.prototype.reject = function(d) {
                return this.filter(G1(Fe(d)))
            }
            ,
            ct.prototype.slice = function(d, p) {
                d = et(d);
                var w = this;
                return w.__filtered__ && (d > 0 || p < 0) ? new ct(w) : (d < 0 ? w = w.takeRight(-d) : d && (w = w.drop(d)),
                p !== n && (p = et(p),
                w = p < 0 ? w.dropRight(-p) : w.take(p - d)),
                w)
            }
            ,
            ct.prototype.takeRightWhile = function(d) {
                return this.reverse().takeWhile(d).reverse()
            }
            ,
            ct.prototype.toArray = function() {
                return this.take(H)
            }
            ,
            Qo(ct.prototype, function(d, p) {
                var w = /^(?:filter|find|map|reject)|While$/.test(p)
                  , S = /^(?:head|last)$/.test(p)
                  , R = F[S ? "take" + (p == "last" ? "Right" : "") : p]
                  , B = S || /^find/.test(p);
                R && (F.prototype[p] = function() {
                    var W = this.__wrapped__
                      , Y = S ? [1] : arguments
                      , Z = W instanceof ct
                      , fe = Y[0]
                      , he = Z || qe(W)
                      , ge = function(st) {
                        var ht = R.apply(F, $a([st], Y));
                        return S && Ie ? ht[0] : ht
                    };
                    he && w && typeof fe == "function" && fe.length != 1 && (Z = he = !1);
                    var Ie = this.__chain__
                      , Pe = !!this.__actions__.length
                      , ze = B && !Ie
                      , rt = Z && !Pe;
                    if (!B && he) {
                        W = rt ? W : new ct(this);
                        var $e = d.apply(W, Y);
                        return $e.__actions__.push({
                            func: $1,
                            args: [ge],
                            thisArg: n
                        }),
                        new Gi($e,Ie)
                    }
                    return ze && rt ? d.apply(this, Y) : ($e = this.thru(ge),
                    ze ? S ? $e.value()[0] : $e.value() : $e)
                }
                )
            }),
            Hi(["pop", "push", "shift", "sort", "splice", "unshift"], function(d) {
                var p = f1[d]
                  , w = /^(?:push|sort|unshift)$/.test(d) ? "tap" : "thru"
                  , S = /^(?:pop|shift)$/.test(d);
                F.prototype[d] = function() {
                    var R = arguments;
                    if (S && !this.__chain__) {
                        var B = this.value();
                        return p.apply(qe(B) ? B : [], R)
                    }
                    return this[w](function(W) {
                        return p.apply(qe(W) ? W : [], R)
                    })
                }
            }),
            Qo(ct.prototype, function(d, p) {
                var w = F[p];
                if (w) {
                    var S = w.name + "";
                    Tt.call(Vu, S) || (Vu[S] = []),
                    Vu[S].push({
                        name: p,
                        func: w
                    })
                }
            }),
            Vu[R1(n, b).name] = [{
                name: "wrapper",
                func: n
            }],
            ct.prototype.clone = EH,
            ct.prototype.reverse = bH,
            ct.prototype.value = _H,
            F.prototype.at = qG,
            F.prototype.chain = QG,
            F.prototype.commit = JG,
            F.prototype.next = eV,
            F.prototype.plant = nV,
            F.prototype.reverse = rV,
            F.prototype.toJSON = F.prototype.valueOf = F.prototype.value = iV,
            F.prototype.first = F.prototype.head,
            qf && (F.prototype[qf] = tV),
            F
        }
          , Hu = JU();
        rc ? ((rc.exports = Hu)._ = Hu,
        jy._ = Hu) : qn._ = Hu
    }
    ).call(oa)
}
)(X2, X2.exports);
var gpe = X2.exports;
const ppe = .01
  , La = (e,t)=>!(t === "height" && ye(e) || t === "width" && ye(e) || t === "angle" && Ue(e))
  , Sr = (e,t)=>{
    const n = e + t / 2;
    return n - n % t
}
  , Z2 = (e,t,n)=>Object.keys(e).map(r=>({
    original: (n ?? t).get(r),
    latest: t.get(r)
})).filter(r=>r.original !== void 0 && r.latest !== void 0)
  , mpe = (e,t,n,r,i,o,s)=>({
    x: e + (n - i) / 2 + (i - n) / 2 * Math.cos(s) + (r - o) / 2 * Math.sin(s),
    y: t + (r - o) / 2 + (i - n) / 2 * Math.sin(s) + (o - r) / 2 * Math.cos(s)
})
  , q2 = (e,t,n,r,i,o,s,a=!0)=>{
    const l = i.get(r.id);
    if (!l)
        return;
    let c = {};
    const u = Ge(l, i);
    if (u) {
        const m = x4(Ht(u), u.lineHeight)
          , v = b4(u.fontSize, u.lineHeight);
        e = Math.max(e, m),
        t = Math.max(t, v)
    }
    const {width: f, height: h} = l;
    if (ue(l, {
        ...mpe(l.x, l.y, l.width, l.height, e, t, l.angle),
        width: e,
        height: t,
        ...T4(r, e, t, !0)
    }, a),
    Q2(l, i, o, s, {
        newSize: {
            width: e,
            height: t
        }
    }),
    u && (c = {
        fontSize: u.fontSize
    },
    n)) {
        const m = {
            ...l,
            width: e,
            height: t
        }
          , v = ay(u, i, jo(m, u));
        c = {
            fontSize: (v == null ? void 0 : v.size) ?? u.fontSize
        }
    }
    vo(l, i, {
        oldSize: {
            width: f,
            height: h
        }
    }),
    u && c && ue(u, {
        fontSize: c.fontSize
    }),
    Hf(l, i, "e", n)
}
  , Cp = (e,t,n,r,i,o,s,a=!0)=>{
    const l = r.get(n.id);
    if (!l)
        return;
    const [c,u] = [n.x + n.width / 2, n.y + n.height / 2]
      , [f,h] = Xe(n.x, n.y, c, u, n.angle)
      , m = e - f
      , v = t - h
      , [y,E] = Xe(e, t, c + m, u + v, -n.angle);
    ue(l, {
        x: y,
        y: E
    }, a),
    Q2(l, r, i, o);
    const b = Ge(n, s);
    if (b) {
        const _ = r.get(b.id);
        _ && ue(_, {
            x: b.x + m,
            y: b.y + v
        }, a)
    }
}
  , l5 = (e,t)=>{
    const r = Zc(t).map(i=>xn(e, i).reduce((o,s)=>(o[s.id] = !0,
    o), {}));
    return e.filter(i=>!ff(i)).forEach(i=>{
        r.push({
            [i.id]: !0
        })
    }
    ),
    r
}
  , Q2 = (e,t,n,r,i)=>{
    je(e) ? g2([e], t, n, r, !0, []) : vo(e, t, i)
}
  , Fa = ({label: e, icon: t, dragInputCallback: n, value: r, elements: i, editable: o=!0, shouldKeepAspectRatio: s, property: a, scene: l, appState: c, sensitivity: u=1})=>{
    const f = Ba()
      , h = T.useRef(null)
      , m = T.useRef(null)
      , [v,y] = T.useState(r.toString())
      , E = T.useRef(null);
    E.current || (E.current = {
        originalAppState: ha(c),
        originalElements: i,
        lastUpdatedValue: v,
        updatePending: !1
    }),
    T.useEffect(()=>{
        const x = r.toString();
        y(x),
        E.current.lastUpdatedValue = x
    }
    , [r]);
    const b = (x,C,P)=>{
        if (!E.current.updatePending)
            return !1;
        E.current.updatePending = !1;
        const M = Number(x);
        if (isNaN(M)) {
            y(r.toString());
            return
        }
        const A = Number(M.toFixed(2))
          , I = Number(r);
        (isNaN(I) || Math.abs(A - I) >= ppe) && (E.current.lastUpdatedValue = x,
        n({
            accumulatedChange: 0,
            instantChange: 0,
            originalElements: C,
            originalElementsMap: f.scene.getNonDeletedElementsMap(),
            shouldKeepAspectRatio: s,
            shouldChangeByStepSize: !1,
            scene: l,
            nextValue: A,
            property: a,
            originalAppState: P,
            setInputValue: O=>y(String(O))
        }),
        f.syncActionResult({
            storeAction: ee.CAPTURE
        }))
    }
      , _ = T.useRef(b);
    return _.current = b,
    T.useEffect(()=>{
        const x = h.current;
        return ()=>{
            const C = x == null ? void 0 : x.value;
            C && _.current(C, E.current.originalElements, E.current.originalAppState)
        }
    }
    , [o]),
    o ? L("div", {
        className: xe("drag-input-container", !o && "disabled"),
        "data-testid": e,
        children: [g("div", {
            className: "drag-input-label",
            ref: m,
            onPointerDown: x=>{
                if (h.current && o) {
                    document.body.classList.add("excalidraw-cursor-resize"),
                    Number(h.current.value);
                    let C = null
                      , P = f.scene.getNonDeletedElements().reduce(($,V)=>($.set(V.id, $f(V)),
                    $), new Map)
                      , M = i.map($=>P.get($.id));
                    const A = ha(c);
                    let I = 0
                      , O = 0;
                    const N = $=>{
                        if (C && P !== null && M !== null) {
                            const V = $.clientX - C.x;
                            V !== 0 && (O += V,
                            Math.abs(O) >= u && (O = Math.sign(O) * Math.floor(Math.abs(O) / u),
                            I += O,
                            n({
                                accumulatedChange: I,
                                instantChange: O,
                                originalElements: M,
                                originalElementsMap: P,
                                shouldKeepAspectRatio: s,
                                shouldChangeByStepSize: $.shiftKey,
                                property: a,
                                scene: l,
                                originalAppState: A,
                                setInputValue: z=>y(String(z))
                            }),
                            O = 0))
                        }
                        C = {
                            x: $.clientX,
                            y: $.clientY
                        }
                    }
                    ;
                    window.addEventListener(ce.POINTER_MOVE, N, !1),
                    window.addEventListener(ce.POINTER_UP, ()=>{
                        window.removeEventListener(ce.POINTER_MOVE, N, !1),
                        f.syncActionResult({
                            storeAction: ee.CAPTURE
                        }),
                        C = null,
                        I = 0,
                        O = 0,
                        M = null,
                        P = null,
                        document.body.classList.remove("excalidraw-cursor-resize")
                    }
                    , !1)
                }
            }
            ,
            onPointerEnter: ()=>{
                m.current && (m.current.style.cursor = "ew-resize")
            }
            ,
            children: t ? g(eu, {
                icon: t
            }) : e
        }), g("input", {
            className: "drag-input",
            autoComplete: "off",
            spellCheck: "false",
            onKeyDown: x=>{
                if (o) {
                    const C = x.target;
                    C instanceof HTMLInputElement && x.key === U.ENTER && (b(C.value, i, c),
                    f.focusContainer())
                }
            }
            ,
            ref: h,
            value: v,
            onChange: x=>{
                E.current.updatePending = !0,
                y(x.target.value)
            }
            ,
            onFocus: x=>{
                x.target.select(),
                E.current.originalElements = i,
                E.current.originalAppState = ha(c)
            }
            ,
            onBlur: x=>{
                v ? o && b(x.target.value, E.current.originalElements, E.current.originalAppState) : y(r.toString())
            }
            ,
            disabled: !o
        })]
    }) : null
}
  , yM = 10
  , vpe = e=>e.type === "image"
  , ype = ({accumulatedChange: e, originalElements: t, shouldKeepAspectRatio: n, shouldChangeByStepSize: r, nextValue: i, property: o, scene: s})=>{
    const a = s.getNonDeletedElementsMap()
      , l = s.getNonDeletedElements()
      , c = t[0];
    if (c) {
        const u = n || vpe(c)
          , f = c.width / c.height;
        if (i !== void 0) {
            const E = Math.max(o === "width" ? i : u ? i * f : c.width, qi)
              , b = Math.max(o === "height" ? i : u ? i / f : c.height, qi);
            q2(E, b, u, c, a, l, s);
            return
        }
        const h = o === "width" ? e : 0
          , m = o === "height" ? e : 0;
        let v = Math.max(0, c.width + h);
        o === "width" && (r ? v = Sr(v, yM) : v = Math.round(v));
        let y = Math.max(0, c.height + m);
        o === "height" && (r ? y = Sr(y, yM) : y = Math.round(y)),
        u && (o === "width" ? y = Math.round(v / f * 100) / 100 : v = Math.round(y * f * 100) / 100),
        y = Math.max(qi, y),
        v = Math.max(qi, v),
        q2(v, y, u, c, a, l, s)
    }
}
  , wM = ({property: e, element: t, scene: n, appState: r})=>{
    const i = Math.round((e === "width" ? t.width : t.height) * 100) / 100;
    return g(Fa, {
        label: e === "width" ? "W" : "H",
        elements: [t],
        dragInputCallback: ype,
        value: i,
        editable: La(t, e),
        scene: n,
        appState: r,
        property: e
    })
}
  , wpe = 15
  , Epe = ({accumulatedChange: e, originalElements: t, shouldChangeByStepSize: n, nextValue: r, scene: i})=>{
    const o = i.getNonDeletedElementsMap()
      , s = i.getNonDeletedElements()
      , a = t[0];
    if (a && !He(a)) {
        const l = o.get(a.id);
        if (!l)
            return;
        if (r !== void 0) {
            const v = P2(r);
            ue(l, {
                angle: v
            }),
            Q2(l, o, s, i);
            const y = Ge(l, o);
            y && !Be(l) && ue(y, {
                angle: v
            });
            return
        }
        const c = Math.round(iy(a.angle) * 100) / 100
          , u = Math.round(e);
        let f = (c + u) % 360;
        n && (f = Sr(f, wpe)),
        f = f < 0 ? f + 360 : f;
        const h = P2(f);
        ue(l, {
            angle: h
        }),
        Q2(l, o, s, i);
        const m = Ge(l, o);
        m && !Be(l) && ue(m, {
            angle: h
        })
    }
}
  , bpe = ({element: e, scene: t, appState: n, property: r})=>g(Fa, {
    label: "A",
    icon: RD,
    value: Math.round(iy(e.angle) % 360 * 100) / 100,
    elements: [e],
    dragInputCallback: Epe,
    editable: La(e, "angle"),
    scene: t,
    appState: n,
    property: r
})
  , EM = 4
  , _pe = 4
  , xpe = ({accumulatedChange: e, originalElements: t, shouldChangeByStepSize: n, nextValue: r, scene: i})=>{
    const o = i.getNonDeletedElementsMap()
      , s = t[0];
    if (s) {
        const a = o.get(s.id);
        if (!a || !ye(a))
            return;
        let l;
        if (r !== void 0)
            l = Math.max(Math.round(r), EM);
        else if (s.type === "text") {
            const c = Math.round(s.fontSize)
              , u = Math.round(e);
            l = Math.max(c + u, EM),
            n && (l = Sr(l, _pe))
        }
        l && (ue(a, {
            fontSize: l
        }),
        Wr(a, i.getContainerElement(a), i.getNonDeletedElementsMap()))
    }
}
  , Spe = ({element: e, scene: t, appState: n, property: r})=>{
    const i = ye(e) ? e : go(e) ? Ge(e, t.getNonDeletedElementsMap()) : null;
    return i ? g(Fa, {
        label: "F",
        value: Math.round(i.fontSize * 10) / 10,
        elements: [i],
        dragInputCallback: xpe,
        icon: Fv,
        appState: n,
        scene: t,
        property: r
    }) : null
}
  , ld = 10
  , Ipe = (e,t,n,r)=>{
    const i = r.x - e
      , o = r.y - t
      , s = r.width * n
      , a = r.height * n
      , l = e + i * n
      , c = t + o * n;
    return {
        width: s,
        height: a,
        x: l,
        y: c,
        ...T4(r, s, a, !1),
        ...ye(r) ? {
            fontSize: r.fontSize * n
        } : {}
    }
}
  , Cpe = (e,t,n,r,i,o,s,a)=>{
    const l = Ipe(e, t, r, o)
      , {width: c, height: u} = i;
    ue(i, l, !1);
    const f = Ge(o, a);
    if (f) {
        const h = f.fontSize * r;
        vo(i, s, {
            oldSize: {
                width: c,
                height: u
            }
        });
        const m = s.get(f.id);
        m && ye(m) && (ue(m, {
            fontSize: h
        }, !1),
        Hf(i, s, n === "width" ? "e" : "s", !0))
    }
}
  , bM = (e,t,n,r,i,o,s,a,l,c)=>{
    o === "width" ? t = Math.round(e / r * 100) / 100 : e = Math.round(t * r * 100) / 100;
    const u = t / n;
    for (let f = 0; f < a.length; f++) {
        const h = a[f]
          , m = s[f];
        Cpe(i[0], i[1], o, u, m, h, l, c)
    }
}
  , kpe = ({accumulatedChange: e, originalElements: t, originalElementsMap: n, originalAppState: r, shouldChangeByStepSize: i, nextValue: o, scene: s, property: a})=>{
    const l = s.getNonDeletedElementsMap()
      , c = s.getNonDeletedElements()
      , u = l5(t, r);
    if (o !== void 0) {
        for (const m of u) {
            const v = Z2(m, l, n);
            if (v.length > 1) {
                const y = v.map(N=>N.latest)
                  , E = v.map(N=>N.original)
                  , [b,_,x,C] = xt(E)
                  , P = x - b
                  , M = C - _
                  , A = P / M
                  , I = Math.max(qi, a === "width" ? Math.max(0, o) : P)
                  , O = Math.max(qi, a === "height" ? Math.max(0, o) : M);
                bM(I, O, M, A, [b, _], a, y, E, l, n)
            } else {
                const [y] = v
                  , E = y == null ? void 0 : y.latest
                  , b = y == null ? void 0 : y.original;
                if (E && b && La(E, a)) {
                    let _ = a === "width" ? Math.max(0, o) : E.width;
                    a === "width" && (i ? _ = Sr(_, ld) : _ = Math.round(_));
                    let x = a === "height" ? Math.max(0, o) : E.height;
                    a === "height" && (i ? x = Sr(x, ld) : x = Math.round(x)),
                    _ = Math.max(qi, _),
                    x = Math.max(qi, x),
                    q2(_, x, !1, b, l, c, s, !1)
                }
            }
        }
        s.triggerUpdate();
        return
    }
    const f = a === "width" ? e : 0
      , h = a === "height" ? e : 0;
    for (const m of u) {
        const v = Z2(m, l, n);
        if (v.length > 1) {
            const y = v.map(N=>N.latest)
              , E = v.map(N=>N.original)
              , [b,_,x,C] = xt(E)
              , P = x - b
              , M = C - _
              , A = P / M;
            let I = Math.max(0, P + f);
            a === "width" && (i ? I = Sr(I, ld) : I = Math.round(I));
            let O = Math.max(0, M + h);
            a === "height" && (i ? O = Sr(O, ld) : O = Math.round(O)),
            I = Math.max(qi, I),
            O = Math.max(qi, O),
            bM(I, O, M, A, [b, _], a, y, E, l, n)
        } else {
            const [y] = v
              , E = y == null ? void 0 : y.latest
              , b = y == null ? void 0 : y.original;
            if (E && b && La(E, a)) {
                let _ = Math.max(0, b.width + f);
                a === "width" && (i ? _ = Sr(_, ld) : _ = Math.round(_));
                let x = Math.max(0, b.height + h);
                a === "height" && (i ? x = Sr(x, ld) : x = Math.round(x)),
                _ = Math.max(qi, _),
                x = Math.max(qi, x),
                q2(_, x, !1, b, l, c, s)
            }
        }
    }
    s.triggerUpdate()
}
  , _M = ({property: e, elements: t, elementsMap: n, atomicUnits: r, scene: i, appState: o})=>{
    const s = T.useMemo(()=>r.map(c=>{
        const u = Z2(c, n);
        if (u.length > 1) {
            const [h,m,v,y] = xt(u.map(E=>E.latest));
            return Math.round((e === "width" ? v - h : y - m) * 100) / 100
        }
        const [f] = u;
        return Math.round((e === "width" ? f.latest.width : f.latest.height) * 100) / 100
    }
    ), [n, r, e])
      , a = new Set(s).size === 1 ? Math.round(s[0] * 100) / 100 : "Mixed"
      , l = s.length > 0;
    return g(Fa, {
        label: e === "width" ? "W" : "H",
        elements: t,
        dragInputCallback: kpe,
        value: a,
        editable: l,
        appState: o,
        property: e,
        scene: i
    })
}
  , Tpe = 15
  , Ape = ({accumulatedChange: e, originalElements: t, shouldChangeByStepSize: n, nextValue: r, property: i, scene: o})=>{
    const s = o.getNonDeletedElementsMap()
      , a = t.map(c=>s.get(c.id)).filter(c=>c && !ff(c) && La(c, i))
      , l = t.filter(c=>!ff(c) && La(c, i));
    if (r !== void 0) {
        const c = P2(r);
        for (const u of a) {
            if (!u)
                continue;
            ue(u, {
                angle: c
            }, !1);
            const f = Ge(u, s);
            f && !Be(u) && ue(f, {
                angle: c
            }, !1)
        }
        o.triggerUpdate();
        return
    }
    for (let c = 0; c < a.length; c++) {
        const u = a[c];
        if (!u)
            continue;
        const f = l[c]
          , h = Math.round(iy(f.angle) * 100) / 100
          , m = Math.round(e);
        let v = (h + m) % 360;
        n && (v = Sr(v, Tpe)),
        v = v < 0 ? v + 360 : v;
        const y = P2(v);
        ue(u, {
            angle: y
        }, !1);
        const E = Ge(u, s);
        E && !Be(u) && ue(E, {
            angle: y
        }, !1)
    }
    o.triggerUpdate()
}
  , Mpe = ({elements: e, scene: t, appState: n, property: r})=>{
    const i = e.filter(l=>!ff(l) && La(l, "angle"))
      , o = i.map(l=>Math.round(iy(l.angle) % 360 * 100) / 100)
      , s = new Set(o).size === 1 ? o[0] : "Mixed"
      , a = i.some(l=>La(l, "angle"));
    return g(Fa, {
        label: "A",
        icon: RD,
        value: s,
        elements: e,
        dragInputCallback: Ape,
        editable: a,
        appState: n,
        scene: t,
        property: r
    })
}
  , xM = 4
  , Lpe = 4
  , Ppe = (e,t)=>e.reduce((n,r)=>{
    if (!r || ff(r))
        return n;
    if (ye(r))
        return n.push(r),
        n;
    if (go(r)) {
        const i = Ge(r, t);
        if (i)
            return n.push(i),
            n
    }
    return n
}
, [])
  , Rpe = ({accumulatedChange: e, originalElements: t, shouldChangeByStepSize: n, nextValue: r, scene: i})=>{
    const o = i.getNonDeletedElementsMap()
      , s = t.map(l=>o.get(l.id));
    let a;
    if (r) {
        a = Math.max(Math.round(r), xM);
        for (const l of s)
            ue(l, {
                fontSize: a
            }, !1),
            Wr(l, i.getContainerElement(l), o, !1);
        i.triggerUpdate()
    } else {
        const l = t;
        for (let c = 0; c < s.length; c++) {
            const u = s[c]
              , f = l[c]
              , h = Math.round(f.fontSize)
              , m = Math.round(e);
            let v = Math.max(h + m, xM);
            n && (v = Sr(v, Lpe)),
            ue(u, {
                fontSize: v
            }, !1),
            Wr(u, i.getContainerElement(u), o, !1)
        }
        i.triggerUpdate()
    }
}
  , Dpe = ({elements: e, scene: t, appState: n, property: r, elementsMap: i})=>{
    const o = Ppe(e, i);
    if (!o.length)
        return null;
    const s = o.map(c=>Math.round(c.fontSize * 10) / 10)
      , a = new Set(s).size === 1 ? s[0] : "Mixed"
      , l = s.length > 0;
    return g(Fa, {
        label: "F",
        icon: Fv,
        elements: o,
        dragInputCallback: Rpe,
        value: a,
        editable: l,
        scene: t,
        property: r,
        appState: n
    })
}
  , SM = 10
  , Ope = ({accumulatedChange: e, originalElements: t, originalElementsMap: n, shouldChangeByStepSize: r, nextValue: i, property: o, scene: s})=>{
    const a = s.getNonDeletedElementsMap()
      , l = s.getNonDeletedElements()
      , c = t[0]
      , [u,f] = [c.x + c.width / 2, c.y + c.height / 2]
      , [h,m] = Xe(c.x, c.y, u, f, c.angle);
    if (i !== void 0) {
        Cp(o === "x" ? i : h, o === "y" ? i : m, c, a, l, s, n);
        return
    }
    const v = o === "x" ? e : 0
      , y = o === "y" ? e : 0
      , E = o === "x" ? Math.round(r ? Sr(c.x + v, SM) : h + v) : h
      , b = o === "y" ? Math.round(r ? Sr(c.y + y, SM) : m + y) : m;
    Cp(E, b, c, a, l, s, n)
}
  , IM = ({property: e, element: t, elementsMap: n, scene: r, appState: i})=>{
    const [o,s] = Xe(t.x, t.y, t.x + t.width / 2, t.y + t.height / 2, t.angle)
      , a = Math.round((e === "x" ? o : s) * 100) / 100;
    return g(Fa, {
        label: e === "x" ? "X" : "Y",
        elements: [t],
        dragInputCallback: Ope,
        scene: r,
        value: a,
        property: e,
        appState: i
    })
}
  , Npe = 10
  , Fpe = (e,t,n,r,i,o,s,a)=>{
    for (let l = 0; l < r.length; l++) {
        const c = i[l]
          , [u,f] = [c.x + c.width / 2, c.y + c.height / 2]
          , [h,m] = Xe(c.x, c.y, u, f, c.angle)
          , v = e === "x" ? Math.round(h + t) : h
          , y = e === "y" ? Math.round(m + n) : m;
        Cp(v, y, c, o, r, a, s, !1)
    }
}
  , Bpe = (e,t,n,r,i,o,s)=>{
    const [a,l,,] = xt(n)
      , c = e - a
      , u = t - l;
    for (let f = 0; f < n.length; f++) {
        const h = n[f]
          , m = r.get(h.id);
        if (m && (!ye(m) || !m.containerId)) {
            const [v,y] = [m.x + m.width / 2, m.y + m.height / 2]
              , [E,b] = Xe(m.x, m.y, v, y, m.angle);
            Cp(E + c, b + u, h, r, i, s, o, !1)
        }
    }
}
  , zpe = ({accumulatedChange: e, originalElements: t, originalElementsMap: n, shouldChangeByStepSize: r, nextValue: i, property: o, scene: s, originalAppState: a})=>{
    var m, v;
    const l = s.getNonDeletedElementsMap()
      , c = s.getNonDeletedElements();
    if (i !== void 0) {
        for (const y of l5(t, a)) {
            const E = Z2(y, l, n);
            if (E.length > 1) {
                const [b,_,,] = xt(E.map(P=>P.latest));
                Bpe(o === "x" ? i : b, o === "y" ? i : _, E.map(P=>P.original), l, c, n, s)
            } else {
                const b = (m = E[0]) == null ? void 0 : m.original
                  , _ = (v = E[0]) == null ? void 0 : v.latest;
                if (b && _ && La(_, o)) {
                    const [x,C] = [b.x + b.width / 2, b.y + b.height / 2]
                      , [P,M] = Xe(b.x, b.y, x, C, b.angle);
                    Cp(o === "x" ? i : P, o === "y" ? i : M, b, l, c, s, n, !1)
                }
            }
        }
        s.triggerUpdate();
        return
    }
    const u = r ? Sr(e, Npe) : e;
    Fpe(o, o === "x" ? u : 0, o === "y" ? u : 0, t, t, l, n, s),
    s.triggerUpdate()
}
  , CM = ({property: e, elements: t, elementsMap: n, atomicUnits: r, scene: i, appState: o})=>{
    const s = T.useMemo(()=>r.map(l=>{
        const c = Object.keys(l).map(y=>n.get(y)).filter(y=>y !== void 0);
        if (c.length > 1) {
            const [y,E] = xt(c);
            return Math.round((e === "x" ? y : E) * 100) / 100
        }
        const [u] = c
          , [f,h] = [u.x + u.width / 2, u.y + u.height / 2]
          , [m,v] = Xe(u.x, u.y, f, h, u.angle);
        return Math.round((e === "x" ? m : v) * 100) / 100
    }
    ), [r, n, e])
      , a = new Set(s).size === 1 ? s[0] : "Mixed";
    return g(Fa, {
        label: e === "x" ? "X" : "Y",
        elements: t,
        dragInputCallback: zpe,
        value: a,
        property: e,
        scene: i,
        appState: o
    })
}
  , kM = ({label: e, open: t, openTrigger: n, children: r})=>L(Se, {
    children: [L("div", {
        style: {
            cursor: "pointer",
            display: "flex",
            justifyContent: "space-between",
            alignItems: "center"
        },
        onClick: n,
        children: [e, g(eu, {
            icon: t ? Bte : Fte
        })]
    }), t && g("div", {
        style: {
            display: "flex",
            flexDirection: "column"
        },
        children: r
    })]
})
  , TM = 5
  , $pe = ({property: e, scene: t, appState: n, setAppState: r})=>g(Fa, {
    label: "Grid step",
    sensitivity: 8,
    elements: [],
    dragInputCallback: ({nextValue: i, instantChange: o, shouldChangeByStepSize: s, setInputValue: a})=>{
        r(l=>{
            let c;
            return i ? c = i : o && (c = s ? Sr(l.gridStep + TM * Math.sign(o), TM) : l.gridStep + o),
            c ? (c = FN(c),
            a(c),
            {
                gridStep: c
            }) : (a(l.gridStep),
            null)
        }
        )
    }
    ,
    scene: t,
    value: n.gridStep,
    property: e,
    appState: n
})
  , Upe = 50
  , ia = e=>{
    const t = o1()
      , n = e.app.scene.getSceneNonce() || 1
      , r = e.app.scene.getSelectedElements({
        selectedElementIds: t.selectedElementIds,
        includeBoundTextElement: !1
    })
      , i = xp(e.app);
    return g(Hpe, {
        ...e,
        appState: t,
        sceneNonce: n,
        selectedElements: r,
        gridModeEnabled: i
    })
}
  , sn = ({children: e, columns: t=1, heading: n, style: r, ...i})=>g("div", {
    className: xe("exc-stats__row", {
        "exc-stats__row--heading": n
    }),
    style: {
        gridTemplateColumns: `repeat(${t}, 1fr)`,
        ...r
    },
    ...i,
    children: e
});
sn.displayName = "StatsRow";
const J2 = ({children: e, order: t, style: n, ...r})=>g("div", {
    className: "exc-stats__rows",
    style: {
        order: t,
        ...n
    },
    ...r,
    children: e
});
J2.displayName = "StatsRows";
ia.StatsRow = sn;
ia.StatsRows = J2;
const Hpe = T.memo(({app: e, onClose: t, renderCustomStats: n, selectedElements: r, appState: i, sceneNonce: o, gridModeEnabled: s})=>{
    const a = e.scene
      , l = a.getNonDeletedElements()
      , c = a.getNonDeletedElementsMap()
      , u = Gn()
      , f = r.length === 1 ? r[0] : null
      , h = r.length > 1 ? r : null
      , [m,v] = T.useState({
        width: 0,
        height: 0
    })
      , y = T.useMemo(()=>gpe.throttle(b=>{
        const _ = xt(b);
        v({
            width: Math.round(_[2]) - Math.round(_[0]),
            height: Math.round(_[3]) - Math.round(_[1])
        })
    }
    , Upe), []);
    T.useEffect(()=>{
        y(l)
    }
    , [o, l, y]),
    T.useEffect(()=>()=>y.cancel(), [y]);
    const E = T.useMemo(()=>l5(r, i), [r, i]);
    return g("div", {
        className: "exc-stats",
        children: L(Wo, {
            padding: 3,
            children: [L("div", {
                className: "title",
                children: [g("h2", {
                    children: k("stats.title")
                }), g("div", {
                    className: "close",
                    onClick: t,
                    children: Df
                })]
            }), L(kM, {
                label: g("h3", {
                    children: k("stats.generalStats")
                }),
                open: !!(i.stats.panels & Ad.generalStats),
                openTrigger: ()=>u(b=>({
                    stats: {
                        open: !0,
                        panels: b.stats.panels ^ Ad.generalStats
                    }
                })),
                children: [L(J2, {
                    children: [g(sn, {
                        heading: !0,
                        children: k("stats.scene")
                    }), L(sn, {
                        columns: 2,
                        children: [g("div", {
                            children: k("stats.shapes")
                        }), g("div", {
                            children: l.length
                        })]
                    }), L(sn, {
                        columns: 2,
                        children: [g("div", {
                            children: k("stats.width")
                        }), g("div", {
                            children: m.width
                        })]
                    }), L(sn, {
                        columns: 2,
                        children: [g("div", {
                            children: k("stats.height")
                        }), g("div", {
                            children: m.height
                        })]
                    }), s && L(Se, {
                        children: [g(sn, {
                            heading: !0,
                            children: "Canvas"
                        }), g(sn, {
                            children: g($pe, {
                                property: "gridStep",
                                scene: a,
                                appState: i,
                                setAppState: u
                            })
                        })]
                    })]
                }), n == null ? void 0 : n(l, i)]
            }), r.length > 0 && g("div", {
                id: "elementStats",
                style: {
                    marginTop: 12
                },
                children: g(kM, {
                    label: g("h3", {
                        children: k("stats.elementProperties")
                    }),
                    open: !!(i.stats.panels & Ad.elementProperties),
                    openTrigger: ()=>u(b=>({
                        stats: {
                            open: !0,
                            panels: b.stats.panels ^ Ad.elementProperties
                        }
                    })),
                    children: L(J2, {
                        children: [f && L(Se, {
                            children: [g(sn, {
                                heading: !0,
                                "data-testid": "stats-element-type",
                                children: k(`element.${f.type}`)
                            }), g(sn, {
                                children: g(IM, {
                                    element: f,
                                    property: "x",
                                    elementsMap: c,
                                    scene: a,
                                    appState: i
                                })
                            }), g(sn, {
                                children: g(IM, {
                                    element: f,
                                    property: "y",
                                    elementsMap: c,
                                    scene: a,
                                    appState: i
                                })
                            }), g(sn, {
                                children: g(wM, {
                                    property: "width",
                                    element: f,
                                    scene: a,
                                    appState: i
                                })
                            }), g(sn, {
                                children: g(wM, {
                                    property: "height",
                                    element: f,
                                    scene: a,
                                    appState: i
                                })
                            }), !He(f) && g(sn, {
                                children: g(bpe, {
                                    property: "angle",
                                    element: f,
                                    scene: a,
                                    appState: i
                                })
                            }), g(sn, {
                                children: g(Spe, {
                                    property: "fontSize",
                                    element: f,
                                    scene: a,
                                    appState: i
                                })
                            })]
                        }), h && L(Se, {
                            children: [zJ(h) && g(sn, {
                                heading: !0,
                                children: k("element.group")
                            }), L(sn, {
                                columns: 2,
                                style: {
                                    margin: "0.3125rem 0"
                                },
                                children: [g("div", {
                                    children: k("stats.shapes")
                                }), g("div", {
                                    children: r.length
                                })]
                            }), g(sn, {
                                children: g(CM, {
                                    property: "x",
                                    elements: h,
                                    elementsMap: c,
                                    atomicUnits: E,
                                    scene: a,
                                    appState: i
                                })
                            }), g(sn, {
                                children: g(CM, {
                                    property: "y",
                                    elements: h,
                                    elementsMap: c,
                                    atomicUnits: E,
                                    scene: a,
                                    appState: i
                                })
                            }), g(sn, {
                                children: g(_M, {
                                    property: "width",
                                    elements: h,
                                    elementsMap: c,
                                    atomicUnits: E,
                                    scene: a,
                                    appState: i
                                })
                            }), g(sn, {
                                children: g(_M, {
                                    property: "height",
                                    elements: h,
                                    elementsMap: c,
                                    atomicUnits: E,
                                    scene: a,
                                    appState: i
                                })
                            }), g(sn, {
                                children: g(Mpe, {
                                    property: "angle",
                                    elements: h,
                                    scene: a,
                                    appState: i
                                })
                            }), g(sn, {
                                children: g(Dpe, {
                                    property: "fontSize",
                                    elements: h,
                                    scene: a,
                                    appState: i,
                                    elementsMap: c
                                })
                            })]
                        })]
                    })
                })
            })]
        })
    })
}
, (e,t)=>e.sceneNonce === t.sceneNonce && e.selectedElements === t.selectedElements && e.appState.stats.panels === t.appState.stats.panels && e.gridModeEnabled === t.gridModeEnabled && e.appState.gridStep === t.appState.gridStep)
  , mz = ({children: e, icon: t})=>{
    const {TTDDialogTriggerTunnel: n} = Kr()
      , r = Gn();
    return g(n.In, {
        children: L(ut.Item, {
            onSelect: ()=>{
                at("ai", "dialog open", "ttd"),
                r({
                    openDialog: {
                        name: "ttd",
                        tab: "text-to-diagram"
                    }
                })
            }
            ,
            icon: t ?? yte,
            children: [e ?? k("labels.textToDiagram"), g(ut.Item.Badge, {
                children: "AI"
            })]
        })
    })
}
;
mz.displayName = "TTDDialogTrigger";
const B0 = {
    width: 100,
    height: 0
}
  , bl = 100
  , Wpe = (e,t,n)=>{
    const r = yo({
        x: 0,
        y: 0,
        textAlign: Jg.CENTER,
        verticalAlign: Ai.MIDDLE,
        ...t,
        containerId: e.id,
        strokeColor: t.strokeColor || e.strokeColor
    });
    return Object.assign(e, {
        boundElements: (e.boundElements || []).concat({
            type: "text",
            id: r.id
        })
    }),
    Wr(r, e, n),
    [e, r]
}
  , AM = (e,t,n,r,i)=>{
    let o, s;
    if (Object.assign(e, {
        startBinding: (e == null ? void 0 : e.startBinding) || null,
        endBinding: e.endBinding || null
    }),
    t) {
        const u = (t == null ? void 0 : t.width) ?? bl
          , f = (t == null ? void 0 : t.height) ?? bl;
        let h;
        t.id && (h = r.getElement(t.id),
        h || console.error(`No element for start binding with id ${t.id} found`));
        const m = t.x || e.x - u
          , v = t.y || e.y - f / 2
          , y = h ? h.type : t.type;
        if (y) {
            if (y === "text") {
                let E = "";
                h && h.type === "text" ? E = h.text : t.type === "text" && (E = t.text),
                E || console.error(`No text found for start binding text element for ${e.id}`),
                o = yo({
                    x: m,
                    y: v,
                    type: "text",
                    ...h,
                    ...t,
                    text: E
                }),
                Object.assign(o, {
                    x: t.x || e.x - o.width,
                    y: t.y || e.y - o.height / 2
                })
            } else
                switch (y) {
                case "rectangle":
                case "ellipse":
                case "diamond":
                    {
                        o = Sa({
                            x: m,
                            y: v,
                            width: u,
                            height: f,
                            ...h,
                            ...t,
                            type: y
                        });
                        break
                    }
                default:
                    Gl(e, `Unhandled element start type "${t.type}"`, !0)
                }
            Ms(e, o, "start", i)
        }
    }
    if (n) {
        const u = (n == null ? void 0 : n.height) ?? bl
          , f = (n == null ? void 0 : n.width) ?? bl;
        let h;
        n.id && (h = r.getElement(n.id),
        h || console.error(`No element for end binding with id ${n.id} found`));
        const m = n.x || e.x + e.width
          , v = n.y || e.y - u / 2
          , y = h ? h.type : n.type;
        if (y) {
            if (y === "text") {
                let E = "";
                h && h.type === "text" ? E = h.text : n.type === "text" && (E = n.text),
                E || console.error(`No text found for end binding text element for ${e.id}`),
                s = yo({
                    x: m,
                    y: v,
                    type: "text",
                    ...h,
                    ...n,
                    text: E
                }),
                Object.assign(s, {
                    y: n.y || e.y - s.height / 2
                })
            } else
                switch (y) {
                case "rectangle":
                case "ellipse":
                case "diamond":
                    {
                        s = Sa({
                            x: m,
                            y: v,
                            width: f,
                            height: u,
                            ...h,
                            ...n,
                            type: y
                        });
                        break
                    }
                default:
                    Gl(e, `Unhandled element end type "${y}"`, !0)
                }
            Ms(e, s, "end", i)
        }
    }
    if (e.points.length < 2)
        return {
            linearElement: e,
            startBoundElement: o,
            endBoundElement: s
        };
    const a = e.points.length - 1
      , l = .5
      , c = ha(e.points);
    return e.points[a][0] > e.points[a - 1][0] && (c[0][0] = l,
    c[a][0] -= l),
    e.points[a][0] < e.points[a - 1][0] && (c[0][0] = -l,
    c[a][0] += l),
    e.points[a][1] > e.points[a - 1][1] && (c[0][1] = l,
    c[a][1] -= l),
    e.points[a][1] < e.points[a - 1][1] && (c[0][1] = -l,
    c[a][1] += l),
    Object.assign(e, {
        points: c
    }),
    {
        linearElement: e,
        startBoundElement: o,
        endBoundElement: s
    }
}
;
class Gpe {
    constructor() {
        D(this, "excalidrawElements", new Map);
        D(this, "add", t=>{
            t && this.excalidrawElements.set(t.id, t)
        }
        );
        D(this, "getElements", ()=>ka(Array.from(this.excalidrawElements.values())));
        D(this, "getElementsMap", ()=>As(De(this.getElements())));
        D(this, "getElement", t=>this.excalidrawElements.get(t))
    }
}
const nx = (e,t)=>{
    var a, l, c;
    if (!e)
        return [];
    const n = ha(e)
      , r = new Gpe
      , i = new Map
      , o = new Map;
    for (const u of n) {
        let f;
        const h = u.id;
        switch ((t == null ? void 0 : t.regenerateIds) !== !1 && Object.assign(u, {
            id: po()
        }),
        u.type) {
        case "rectangle":
        case "ellipse":
        case "diamond":
            {
                const v = (a = u == null ? void 0 : u.label) != null && a.text && u.width === void 0 ? 0 : (u == null ? void 0 : u.width) || bl
                  , y = (l = u == null ? void 0 : u.label) != null && l.text && u.height === void 0 ? 0 : (u == null ? void 0 : u.height) || bl;
                f = Sa({
                    ...u,
                    width: v,
                    height: y
                });
                break
            }
        case "line":
            {
                const v = u.width || B0.width
                  , y = u.height || B0.height;
                f = Qc({
                    width: v,
                    height: y,
                    points: [[0, 0], [v, y]],
                    ...u
                });
                break
            }
        case "arrow":
            {
                const v = u.width || B0.width
                  , y = u.height || B0.height;
                f = s4({
                    width: v,
                    height: y,
                    endArrowhead: "arrow",
                    points: [[0, 0], [v, y]],
                    ...u,
                    type: "arrow"
                }),
                Object.assign(f, up(f.points));
                break
            }
        case "text":
            {
                const v = (u == null ? void 0 : u.fontFamily) || ec
                  , y = (u == null ? void 0 : u.fontSize) || Ra
                  , E = (u == null ? void 0 : u.lineHeight) || mu(v)
                  , b = u.text ?? ""
                  , _ = _f(b)
                  , x = Oi(_, Ht({
                    fontFamily: v,
                    fontSize: y
                }), E);
                f = yo({
                    width: x.width,
                    height: x.height,
                    fontFamily: v,
                    fontSize: y,
                    ...u
                });
                break
            }
        case "image":
            {
                f = bO({
                    width: (u == null ? void 0 : u.width) || bl,
                    height: (u == null ? void 0 : u.height) || bl,
                    ...u
                });
                break
            }
        case "frame":
            {
                f = yO({
                    x: 0,
                    y: 0,
                    ...u
                });
                break
            }
        case "magicframe":
            {
                f = E_({
                    x: 0,
                    y: 0,
                    ...u
                });
                break
            }
        case "freedraw":
        case "iframe":
        case "embeddable":
            {
                f = u;
                break
            }
        default:
            f = u,
            Gl(u, `Unhandled element type "${u.type}"`, !0)
        }
        r.getElement(f.id) ? console.error(`Duplicate id found for ${f.id}`) : (r.add(f),
        i.set(f.id, u),
        h && o.set(h, f.id))
    }
    const s = r.getElementsMap();
    for (const [u,f] of i) {
        const h = r.getElement(u);
        switch (f.type) {
        case "rectangle":
        case "ellipse":
        case "diamond":
        case "arrow":
            {
                if ((c = f.label) != null && c.text) {
                    let[m,v] = Wpe(h, f == null ? void 0 : f.label, s);
                    if (r.add(m),
                    r.add(v),
                    Be(m)) {
                        const y = f.type === "arrow" ? f == null ? void 0 : f.start : void 0
                          , E = f.type === "arrow" ? f == null ? void 0 : f.end : void 0;
                        if (y && y.id) {
                            const C = o.get(y.id);
                            C && Object.assign(y, {
                                id: C
                            })
                        }
                        if (E && E.id) {
                            const C = o.get(E.id);
                            C && Object.assign(E, {
                                id: C
                            })
                        }
                        const {linearElement: b, startBoundElement: _, endBoundElement: x} = AM(m, y, E, r, s);
                        m = b,
                        r.add(b),
                        r.add(_),
                        r.add(x)
                    }
                } else
                    switch (f.type) {
                    case "arrow":
                        {
                            const {start: m, end: v} = f;
                            if (m && m.id) {
                                const _ = o.get(m.id);
                                Object.assign(m, {
                                    id: _
                                })
                            }
                            if (v && v.id) {
                                const _ = o.get(v.id);
                                Object.assign(v, {
                                    id: _
                                })
                            }
                            const {linearElement: y, startBoundElement: E, endBoundElement: b} = AM(h, m, v, r, s);
                            r.add(y),
                            r.add(E),
                            r.add(b);
                            break
                        }
                    }
                break
            }
        }
    }
    for (const [u,f] of i) {
        if (f.type !== "frame" && f.type !== "magicframe")
            continue;
        const h = r.getElement(u);
        if (!h)
            throw new Error(`Excalidraw element with id ${u} doesn't exist`);
        const m = [];
        f.children.forEach(P=>{
            var I;
            const M = o.get(P);
            if (!M)
                throw new Error(`Element with ${P} wasn't mapped correctly`);
            const A = r.getElement(M);
            if (!A)
                throw new Error(`Frame element with id ${M} doesn't exist`);
            Object.assign(A, {
                frameId: h.id
            }),
            (I = A == null ? void 0 : A.boundElements) == null || I.forEach(O=>{
                const N = r.getElement(O.id);
                if (!N)
                    throw new Error(`Bound element with id ${O.id} doesn't exist`);
                Object.assign(N, {
                    frameId: h.id
                }),
                m.push(N)
            }
            ),
            m.push(A)
        }
        );
        let[v,y,E,b] = xt(m);
        const _ = 10;
        v = v - _,
        y = y - _,
        E = E + _,
        b = b + _;
        const x = Math.max(h == null ? void 0 : h.width, E - v)
          , C = Math.max(h == null ? void 0 : h.height, b - y);
        Object.assign(h, {
            x: v,
            y,
            width: x,
            height: C
        })
    }
    return r.getElements()
}
;
RP();
const Vpe = e=>{
    var se, ae, q, K;
    const {onChange: t, initialData: n, excalidrawAPI: r, isCollaborating: i=!1, onPointerUpdate: o, renderTopRightUI: s, langCode: a=ku.code, viewModeEnabled: l, zenModeEnabled: c, gridModeEnabled: u, libraryReturnUrl: f, theme: h, name: m, renderCustomStats: v, onPaste: y, detectScroll: E=!0, handleKeyboardGlobally: b=!1, onLibraryChange: _, autoFocus: x=!1, generateIdForFile: C, onLinkOpen: P, onPointerDown: M, onPointerUp: A, onScrollChange: I, children: O, validateEmbeddable: N, renderEmbeddable: $, aiEnabled: V, showDeprecatedFonts: z} = e
      , j = (se = e.UIOptions) == null ? void 0 : se.canvasActions
      , re = {
        ...e.UIOptions,
        canvasActions: {
            ...Ek.canvasActions,
            ...j
        },
        tools: {
            image: ((q = (ae = e.UIOptions) == null ? void 0 : ae.tools) == null ? void 0 : q.image) ?? !0
        }
    };
    return j != null && j.export && (re.canvasActions.export.saveFileToDisk = ((K = j.export) == null ? void 0 : K.saveFileToDisk) ?? Ek.canvasActions.export.saveFileToDisk),
    re.canvasActions.toggleTheme === null && typeof h > "u" && (re.canvasActions.toggleTheme = !0),
    T.useEffect(()=>{
        (async()=>{
            await _e(()=>import("./roundRect-0PYZxl1G.js"), __vite__mapDeps([]))
        }
        )();
        const H = J=>{
            typeof J.scale == "number" && J.scale !== 1 && J.preventDefault()
        }
        ;
        return document.addEventListener("touchmove", H, {
            passive: !1
        }),
        ()=>{
            document.removeEventListener("touchmove", H)
        }
    }
    , []),
    g(S6, {
        unstable_createStore: ()=>Ss,
        scope: cr,
        children: g(cpe, {
            langCode: a,
            theme: h,
            children: g(m5, {
                onChange: t,
                initialData: n,
                excalidrawAPI: r,
                isCollaborating: i,
                onPointerUpdate: o,
                renderTopRightUI: s,
                langCode: a,
                viewModeEnabled: l,
                zenModeEnabled: c,
                gridModeEnabled: u,
                libraryReturnUrl: f,
                theme: h,
                name: m,
                renderCustomStats: v,
                UIOptions: re,
                onPaste: y,
                detectScroll: E,
                handleKeyboardGlobally: b,
                onLibraryChange: _,
                autoFocus: x,
                generateIdForFile: C,
                onLinkOpen: P,
                onPointerDown: M,
                onPointerUp: A,
                onScrollChange: I,
                validateEmbeddable: N,
                renderEmbeddable: $,
                aiEnabled: V !== !1,
                showDeprecatedFonts: z,
                children: O
            })
        })
    })
}
  , Ype = (e,t)=>{
    if (e.children !== t.children)
        return !1;
    const {initialData: n, UIOptions: r={}, ...i} = e
      , {initialData: o, UIOptions: s={}, ...a} = t
      , l = Object.keys(r)
      , c = Object.keys(s);
    return l.length !== c.length ? !1 : l.every(f=>f === "canvasActions" ? Object.keys(r.canvasActions).every(m=>{
        var v, y, E, b;
        return m === "export" && ((v = r == null ? void 0 : r.canvasActions) != null && v.export) && ((y = s == null ? void 0 : s.canvasActions) != null && y.export) ? r.canvasActions.export.saveFileToDisk === s.canvasActions.export.saveFileToDisk : ((E = r == null ? void 0 : r.canvasActions) == null ? void 0 : E[m]) === ((b = s == null ? void 0 : s.canvasActions) == null ? void 0 : b[m])
    }
    ) : r[f] === s[f]) && Xn(i, a)
}
  , vz = ve.memo(Vpe, Ype);
vz.displayName = "Excalidraw";
const jpe = ({canvasRef: e, setError: t})=>{
    const n = e.current;
    if (!n)
        return;
    const r = n.parentElement;
    r && (r.style.background = "",
    t(null),
    n.replaceChildren())
}
  , yz = async({canvasRef: e, mermaidToExcalidrawLib: t, mermaidDefinition: n, setError: r, data: i})=>{
    const o = e.current
      , s = o == null ? void 0 : o.parentElement;
    if (!(!o || !s)) {
        if (!n) {
            jpe({
                canvasRef: e,
                setError: r
            });
            return
        }
        try {
            const a = await t.api;
            let l;
            try {
                l = await a.parseMermaidToExcalidraw(n)
            } catch {
                l = await a.parseMermaidToExcalidraw(n.replace(/"/g, "'"))
            }
            const {elements: c, files: u} = l;
            r(null),
            i.current = {
                elements: nx(c, {
                    regenerateIds: !0
                }),
                files: u
            };
            const f = await Jv({
                elements: i.current.elements,
                files: i.current.files,
                exportPadding: Mf,
                maxWidthOrHeight: Math.max(s.offsetWidth, s.offsetHeight) * window.devicePixelRatio
            });
            try {
                await dp(f)
            } catch (h) {
                throw h.name === "CANVAS_POSSIBLY_TOO_BIG" ? new Error(k("canvasError.canvasTooBig")) : h
            }
            s.style.background = "var(--default-bg-color)",
            o.replaceChildren(f)
        } catch (a) {
            throw s.style.background = "var(--default-bg-color)",
            n && r(a),
            a
        }
    }
}
  , c5 = e=>{
    ks.set(Pl.MERMAID_TO_EXCALIDRAW, e)
}
  , wz = ({app: e, data: t, text: n, shouldSaveMermaidDataToStorage: r})=>{
    const {elements: i, files: o} = t.current;
    i.length && (e.addElementsFromPasteOrLibrary({
        elements: i,
        files: o,
        position: "center",
        fitToContent: !0
    }),
    e.setOpenDialog(null),
    r && n && c5(n))
}
  , Ez = ({children: e})=>g("div", {
    className: "ttd-dialog-panels",
    children: e
})
  , ev = ({label: e, children: t, panelAction: n, panelActionDisabled: r=!1, onTextSubmitInProgess: i, renderTopRight: o, renderSubmitShortcut: s, renderBottomRight: a})=>L("div", {
    className: "ttd-dialog-panel",
    children: [L("div", {
        className: "ttd-dialog-panel__header",
        children: [g("label", {
            children: e
        }), o == null ? void 0 : o()]
    }), t, L("div", {
        className: xe("ttd-dialog-panel-button-container", {
            invisible: !n
        }),
        style: {
            display: "flex",
            alignItems: "center"
        },
        children: [L(Ep, {
            className: "ttd-dialog-panel-button",
            onSelect: n ? n.action : ()=>{}
            ,
            disabled: r || i,
            children: [L("div", {
                className: xe({
                    invisible: i
                }),
                children: [n == null ? void 0 : n.label, (n == null ? void 0 : n.icon) && g("span", {
                    children: n.icon
                })]
            }), i && g(Ta, {})]
        }), !r && !i && (s == null ? void 0 : s()), a == null ? void 0 : a()]
    })]
})
  , bz = ({input: e, placeholder: t, onChange: n, onKeyboardSubmit: r})=>{
    const i = T.useRef(null)
      , o = T.useRef(r);
    return o.current = r,
    T.useEffect(()=>{
        if (!o.current)
            return;
        const s = i.current;
        if (s) {
            const a = l=>{
                var c;
                l[U.CTRL_OR_CMD] && l.key === U.ENTER && (l.preventDefault(),
                (c = o.current) == null || c.call(o))
            }
            ;
            return s.addEventListener(ce.KEYDOWN, a),
            ()=>{
                s.removeEventListener(ce.KEYDOWN, a)
            }
        }
    }
    , []),
    g("textarea", {
        className: "ttd-dialog-input",
        onChange: n,
        value: e,
        placeholder: t,
        autoFocus: !0,
        ref: i
    })
}
  , Kpe = ({error: e})=>L("div", {
    "data-testid": "ttd-dialog-output-error",
    className: "ttd-dialog-output-error",
    children: ["Error! ", g("p", {
        children: e
    })]
})
  , _z = ({error: e, canvasRef: t, loaded: n})=>L("div", {
    className: "ttd-dialog-output-wrapper",
    children: [e && g(Kpe, {
        error: e.message
    }), n ? g("div", {
        ref: t,
        style: {
            opacity: e ? "0.15" : 1
        },
        className: "ttd-dialog-output-canvas-container"
    }) : g(Ta, {
        size: "2rem"
    })]
})
  , xz = ()=>L("div", {
    className: "ttd-dialog-submit-shortcut",
    children: [g("div", {
        className: "ttd-dialog-submit-shortcut__key",
        children: ie("CtrlOrCmd")
    }), g("div", {
        className: "ttd-dialog-submit-shortcut__key",
        children: ie("Enter")
    })]
})
  , Xpe = `flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`
  , MM = Wl(c5, 300)
  , Zpe = ({mermaidToExcalidrawLib: e})=>{
    const [t,n] = T.useState(()=>ks.get(Pl.MERMAID_TO_EXCALIDRAW) || Xpe)
      , r = T.useDeferredValue(t.trim())
      , [i,o] = T.useState(null)
      , s = T.useRef(null)
      , a = T.useRef({
        elements: [],
        files: null
    })
      , l = Ba();
    T.useEffect(()=>{
        yz({
            canvasRef: s,
            data: a,
            mermaidToExcalidrawLib: e,
            setError: o,
            mermaidDefinition: r
        }).catch(u=>{}
        ),
        MM(r)
    }
    , [r, e]),
    T.useEffect(()=>()=>{
        MM.flush()
    }
    , []);
    const c = ()=>{
        wz({
            app: l,
            data: a,
            text: t,
            shouldSaveMermaidDataToStorage: !0
        })
    }
    ;
    return L(Se, {
        children: [g("div", {
            className: "ttd-dialog-desc",
            children: g(li, {
                i18nKey: "mermaid.description",
                flowchartLink: u=>g("a", {
                    href: "https://mermaid.js.org/syntax/flowchart.html",
                    children: u
                }),
                sequenceLink: u=>g("a", {
                    href: "https://mermaid.js.org/syntax/sequenceDiagram.html",
                    children: u
                }),
                classLink: u=>g("a", {
                    href: "https://mermaid.js.org/syntax/classDiagram.html",
                    children: u
                })
            })
        }), L(Ez, {
            children: [g(ev, {
                label: k("mermaid.syntax"),
                children: g(bz, {
                    input: t,
                    placeholder: "Write Mermaid diagram defintion here...",
                    onChange: u=>n(u.target.value),
                    onKeyboardSubmit: ()=>{
                        c()
                    }
                })
            }), g(ev, {
                label: k("mermaid.preview"),
                panelAction: {
                    action: ()=>{
                        c()
                    }
                    ,
                    label: k("mermaid.button"),
                    icon: um
                },
                renderSubmitShortcut: ()=>g(xz, {}),
                children: g(_z, {
                    canvasRef: s,
                    loaded: e.loaded,
                    error: i
                })
            })]
        })]
    })
}
  , Sz = ({children: e, ...t})=>g(HB, {
    className: "ttd-dialog-triggers",
    ...t,
    children: e
});
Sz.displayName = "TTDDialogTabTriggers";
const rx = ({children: e, tab: t, onSelect: n, ...r})=>g(WB, {
    value: t,
    asChild: !0,
    onSelect: n,
    children: g("button", {
        type: "button",
        className: "ttd-dialog-tab-trigger",
        ...r,
        children: e
    })
});
rx.displayName = "TTDDialogTabTrigger";
const Ib = 3
  , cd = 1e3
  , qpe = mn(null)
  , Qpe = mn(null)
  , Iz = e=>{
    var n;
    const t = Wn();
    return ((n = t.openDialog) == null ? void 0 : n.name) !== "ttd" ? null : g(Jpe, {
        ...e,
        tab: t.openDialog.tab
    })
}
  , Jpe = t1("TTDDialogBase", ({tab: e, ...t})=>{
    const n = Ba()
      , r = Gn()
      , i = T.useRef(null)
      , [o,s] = Ot(Qpe)
      , [a,l] = T.useState((o == null ? void 0 : o.prompt) ?? "")
      , c = a.trim()
      , u = M=>{
        l(M.target.value),
        s(A=>({
            generatedResponse: (A == null ? void 0 : A.generatedResponse) ?? null,
            prompt: M.target.value
        }))
    }
      , [f,h] = T.useState(!1)
      , [m,v] = Ot(qpe)
      , y = async()=>{
        if (c.length > cd || c.length < Ib || f || (m == null ? void 0 : m.rateLimitRemaining) === 0 || "__fallback"in t) {
            c.length < Ib && P(new Error(`Prompt is too short (min ${Ib} characters)`)),
            c.length > cd && P(new Error(`Prompt is too long (max ${cd} characters)`));
            return
        }
        try {
            h(!0),
            at("ai", "generate", "ttd");
            const {generatedResponse: M, error: A, rateLimit: I, rateLimitRemaining: O} = await t.onTextSubmit(c);
            if (typeof M == "string" && s(N=>({
                generatedResponse: M,
                prompt: (N == null ? void 0 : N.prompt) ?? null
            })),
            gg(I) && gg(O) && v({
                rateLimit: I,
                rateLimitRemaining: O
            }),
            A) {
                P(A);
                return
            }
            if (!M) {
                P(new Error("Generation failed"));
                return
            }
            try {
                await yz({
                    canvasRef: i,
                    data: x,
                    mermaidToExcalidrawLib: b,
                    setError: P,
                    mermaidDefinition: M
                }),
                at("ai", "mermaid parse success", "ttd")
            } catch (N) {
                console.info(`%cTTD mermaid render errror: ${N.message}`, "color: red"),
                console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${N.message}`, "color: yellow"),
                at("ai", "mermaid parse failed", "ttd"),
                P(new Error("Generated an invalid diagram :(. You may also try a different prompt."))
            }
        } catch (M) {
            let A = M.message;
            (!A || A === "Failed to fetch") && (A = "Request failed"),
            P(new Error(A))
        } finally {
            h(!1)
        }
    }
      , E = T.useRef(y);
    E.current = y;
    const [b,_] = T.useState({
        loaded: !1,
        api: _e(()=>import("./index-CBknaPf-.js").then(M=>M.b6), __vite__mapDeps([]))
    });
    T.useEffect(()=>{
        (async()=>{
            await b.api,
            _(A=>({
                ...A,
                loaded: !0
            }))
        }
        )()
    }
    , [b.api]);
    const x = T.useRef({
        elements: [],
        files: null
    })
      , [C,P] = T.useState(null);
    return g(mi, {
        className: "ttd-dialog",
        onCloseRequest: ()=>{
            n.setOpenDialog(null)
        }
        ,
        size: 1200,
        title: !1,
        ...t,
        autofocus: !1,
        children: L(q4, {
            dialog: "ttd",
            tab: e,
            children: ["__fallback"in t && t.__fallback ? g("p", {
                className: "dialog-mermaid-title",
                children: k("mermaid.title")
            }) : L(Sz, {
                children: [g(rx, {
                    tab: "text-to-diagram",
                    children: L("div", {
                        style: {
                            display: "flex",
                            alignItems: "center"
                        },
                        children: [k("labels.textToDiagram"), g("div", {
                            style: {
                                display: "flex",
                                alignItems: "center",
                                justifyContent: "center",
                                padding: "1px 6px",
                                marginLeft: "10px",
                                fontSize: 10,
                                borderRadius: "12px",
                                background: "var(--color-promo)",
                                color: "var(--color-surface-lowest)"
                            },
                            children: "AI Beta"
                        })]
                    })
                }), g(rx, {
                    tab: "mermaid",
                    children: "Mermaid"
                })]
            }), g(K2, {
                className: "ttd-dialog-content",
                tab: "mermaid",
                children: g(Zpe, {
                    mermaidToExcalidrawLib: b
                })
            }), !("__fallback"in t) && L(K2, {
                className: "ttd-dialog-content",
                tab: "text-to-diagram",
                children: [g("div", {
                    className: "ttd-dialog-desc",
                    children: "Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."
                }), L(Ez, {
                    children: [g(ev, {
                        label: k("labels.prompt"),
                        panelAction: {
                            action: y,
                            label: "Generate",
                            icon: um
                        },
                        onTextSubmitInProgess: f,
                        panelActionDisabled: c.length > cd || (m == null ? void 0 : m.rateLimitRemaining) === 0,
                        renderTopRight: ()=>m ? L("div", {
                            className: "ttd-dialog-rate-limit",
                            style: {
                                fontSize: 12,
                                marginLeft: "auto",
                                color: m.rateLimitRemaining === 0 ? "var(--color-danger)" : void 0
                            },
                            children: [m.rateLimitRemaining, " requests left today"]
                        }) : null,
                        renderSubmitShortcut: ()=>g(xz, {}),
                        renderBottomRight: ()=>{
                            if (typeof (o == null ? void 0 : o.generatedResponse) == "string")
                                return L("div", {
                                    className: "excalidraw-link",
                                    style: {
                                        marginLeft: "auto",
                                        fontSize: 14
                                    },
                                    onClick: ()=>{
                                        typeof (o == null ? void 0 : o.generatedResponse) == "string" && (c5(o.generatedResponse),
                                        r({
                                            openDialog: {
                                                name: "ttd",
                                                tab: "mermaid"
                                            }
                                        }))
                                    }
                                    ,
                                    children: ["View as Mermaid", g(eu, {
                                        icon: um
                                    })]
                                });
                            const M = c.length / cd;
                            return M > .8 ? L("div", {
                                style: {
                                    marginLeft: "auto",
                                    fontSize: 12,
                                    fontFamily: "monospace",
                                    color: M > 1 ? "var(--color-danger)" : void 0
                                },
                                children: ["Length: ", c.length, "/", cd]
                            }) : null
                        }
                        ,
                        children: g(bz, {
                            onChange: u,
                            input: a,
                            placeholder: "Describe what you want to see...",
                            onKeyboardSubmit: ()=>{
                                E.current()
                            }
                        })
                    }), g(ev, {
                        label: "Preview",
                        panelAction: {
                            action: ()=>{
                                console.info("Panel action clicked"),
                                wz({
                                    app: n,
                                    data: x
                                })
                            }
                            ,
                            label: "Insert",
                            icon: um
                        },
                        children: g(_z, {
                            canvasRef: i,
                            error: C,
                            loaded: b.loaded
                        })
                    })]
                })]
            })]
        })
    })
}
)
  , e1e = ({UIOptions: e})=>L(Ct, {
    __fallback: !0,
    children: [g(Ct.DefaultItems.LoadScene, {}), g(Ct.DefaultItems.SaveToActiveFile, {}), e.canvasActions.export && g(Ct.DefaultItems.Export, {}), e.canvasActions.saveAsImage && g(Ct.DefaultItems.SaveAsImage, {}), g(Ct.DefaultItems.Help, {}), g(Ct.DefaultItems.ClearCanvas, {}), g(Ct.Separator, {}), g(Ct.Group, {
        title: "Excalidraw links",
        children: g(Ct.DefaultItems.Socials, {})
    }), g(Ct.Separator, {}), g(Ct.DefaultItems.ToggleTheme, {}), g(Ct.DefaultItems.ChangeCanvasBackground, {})]
})
  , t1e = ()=>L(Vc, {
    __fallback: !0,
    children: [g(Vc.Actions.SaveToDisk, {}), g(Vc.Actions.ExportToImage, {})]
})
  , n1e = ({actionManager: e, appState: t, files: n, setAppState: r, elements: i, canvas: o, onLockToggle: s, onHandToolToggle: a, onPenModeToggle: l, showExitZenModeBtn: c, renderTopRightUI: u, renderCustomStats: f, UIOptions: h, onExportImage: m, renderWelcomeScreen: v, children: y, app: E, isCollaborating: b, openAIKey: _, isOpenAIKeyPersisted: x, onOpenAIAPIKeyChange: C, onMagicSettingsConfirm: P})=>{
    var q, K, G;
    const M = ur()
      , A = Jfe()
      , [I,O] = Ot(my, cr)
      , N = ()=>h.canvasActions.export ? g(Age, {
        elements: i,
        appState: t,
        files: n,
        actionManager: e,
        exportOpts: h.canvasActions.export,
        canvas: o,
        setAppState: r
    }) : null
      , $ = ()=>{
        var H;
        return !h.canvasActions.saveAsImage || ((H = t.openDialog) == null ? void 0 : H.name) !== "imageExport" ? null : g(jhe, {
            elements: i,
            appState: t,
            files: n,
            actionManager: e,
            onExportImage: m,
            onCloseRequest: ()=>r({
                openDialog: null
            }),
            name: E.getName()
        })
    }
      , V = ()=>L("div", {
        style: {
            position: "relative"
        },
        children: [g(A.MainMenuTunnel.Out, {}), v && g(A.WelcomeScreenMenuHintTunnel.Out, {})]
    })
      , z = ()=>g(Ip, {
        heading: "selectedShapeActions",
        className: xe("selected-shape-actions zen-mode-transition", {
            "transition-left": t.zenModeEnabled
        }),
        children: g(Wo, {
            className: HP.SHAPE_ACTIONS_MENU,
            padding: 2,
            style: {
                maxHeight: `${t.height - 166}px`
            },
            children: g(sB, {
                appState: t,
                elementsMap: E.scene.getNonDeletedElementsMap(),
                renderAction: e.renderAction
            })
        })
    })
      , j = ()=>{
        var te, oe;
        const H = A4(t, i)
          , J = t.stats.open && !t.zenModeEnabled && !t.viewModeEnabled;
        return g(wB, {
            side: "top",
            children: L("div", {
                className: "App-menu App-menu_top",
                children: [L(io.Col, {
                    gap: 6,
                    className: xe("App-menu_top__left"),
                    children: [V(), H && z()]
                }), !t.viewModeEnabled && g(Ip, {
                    heading: "shapes",
                    className: "shapes-section",
                    children: de=>L("div", {
                        style: {
                            position: "relative"
                        },
                        children: [v && g(A.WelcomeScreenToolbarHintTunnel.Out, {}), g(io.Col, {
                            gap: 4,
                            align: "start",
                            children: L(io.Row, {
                                gap: 1,
                                className: xe("App-toolbar-container", {
                                    "zen-mode": t.zenModeEnabled
                                }),
                                children: [L(Wo, {
                                    padding: 1,
                                    className: xe("App-toolbar", {
                                        "zen-mode": t.zenModeEnabled
                                    }),
                                    children: [g(xB, {
                                        appState: t,
                                        isMobile: M.editor.isMobile,
                                        device: M,
                                        app: E
                                    }), de, L(io.Row, {
                                        gap: 1,
                                        children: [g(CB, {
                                            zenModeEnabled: t.zenModeEnabled,
                                            checked: t.penMode,
                                            onChange: ()=>l(null),
                                            title: k("toolBar.penMode"),
                                            penDetected: t.penDetected
                                        }), g(IB, {
                                            checked: t.activeTool.locked,
                                            onChange: s,
                                            title: k("toolBar.lock")
                                        }), g("div", {
                                            className: "App-toolbar__divider"
                                        }), g(kB, {
                                            checked: lf(t),
                                            onChange: ()=>a(),
                                            title: k("toolBar.hand"),
                                            isMobile: !0
                                        }), g(aB, {
                                            appState: t,
                                            activeTool: t.activeTool,
                                            UIOptions: h,
                                            app: E
                                        })]
                                    })]
                                }), b && g(Wo, {
                                    style: {
                                        marginLeft: 8,
                                        alignSelf: "center",
                                        height: "fit-content"
                                    },
                                    children: g(ape, {
                                        title: k("toolBar.laser"),
                                        checked: t.activeTool.type === Fn.laser,
                                        onChange: ()=>E.setActiveTool({
                                            type: Fn.laser
                                        }),
                                        isMobile: !0
                                    })
                                })]
                            })
                        })]
                    })
                }), L("div", {
                    className: xe("layer-ui__wrapper__top-right zen-mode-transition", {
                        "transition-right": t.zenModeEnabled
                    }),
                    children: [t.collaborators.size > 0 && g(TB, {
                        collaborators: t.collaborators,
                        userToFollow: ((te = t.userToFollow) == null ? void 0 : te.socketId) || null
                    }), u == null ? void 0 : u(M.editor.isMobile, t), !t.viewModeEnabled && (!se || ((oe = t.openSidebar) == null ? void 0 : oe.name) !== Ll.name) && g(A.DefaultSidebarTriggerTunnel.Out, {}), J && g(ia, {
                        app: E,
                        onClose: ()=>{
                            e.executeAction(Y_)
                        }
                        ,
                        renderCustomStats: f
                    })]
                })]
            })
        })
    }
      , re = ()=>g(vM, {
        __fallback: !0,
        onDock: H=>{
            at("sidebar", `toggleDock (${H ? "dock" : "undock"})`, `(${M.editor.isMobile ? "mobile" : "desktop"})`)
        }
    })
      , se = cf(X4, cr)
      , ae = L(Se, {
        children: [y, g(e1e, {
            UIOptions: h
        }), g(vM.Trigger, {
            __fallback: !0,
            icon: SD,
            title: hg(k("toolBar.library")),
            onToggle: H=>{
                H && at("sidebar", `${Ll.name} (open)`, `button (${M.editor.isMobile ? "mobile" : "desktop"})`)
            }
            ,
            tab: Ll.defaultTab,
            children: k("toolBar.library")
        }), g(t1e, {}), ((q = t.openDialog) == null ? void 0 : q.name) === "ttd" && g(Iz, {
            __fallback: !0
        }), t.isLoading && g(SB, {
            delay: 250
        }), t.errorMessage && g(v5, {
            onClose: ()=>r({
                errorMessage: null
            }),
            children: t.errorMessage
        }), I && !M.editor.isMobile && g(dde, {
            colorPickerType: I.colorPickerType,
            onCancel: ()=>{
                O(null)
            }
            ,
            onChange: (H,J,te,{altKey: oe})=>{
                var de;
                if (!(H !== "elementBackground" && H !== "elementStroke"))
                    if (te.length) {
                        for (const pe of te)
                            ue(pe, {
                                [oe && I.swapPreviewOnAlt ? H === "elementBackground" ? "strokeColor" : "backgroundColor" : H === "elementBackground" ? "backgroundColor" : "strokeColor"]: J
                            }, !1),
                            Yt.delete(pe);
                        (de = hi.getScene(te[0])) == null || de.triggerUpdate()
                    } else
                        r(H === "elementBackground" ? {
                            currentItemBackgroundColor: J
                        } : {
                            currentItemStrokeColor: J
                        })
            }
            ,
            onSelect: (H,J)=>{
                var te;
                O(oe=>oe != null && oe.keepOpenOnAlt && J.altKey ? oe : null),
                (te = I == null ? void 0 : I.onSelect) == null || te.call(I, H, J)
            }
        }), ((K = t.openDialog) == null ? void 0 : K.name) === "help" && g(xge, {
            onClose: ()=>{
                r({
                    openDialog: null
                })
            }
        }), ((G = t.openDialog) == null ? void 0 : G.name) === "settings" && g(lpe, {
            openAIKey: _,
            isPersisted: x,
            onChange: C,
            onConfirm: (H,J)=>{
                var oe, de;
                const te = ((oe = t.openDialog) == null ? void 0 : oe.name) === "settings" ? (de = t.openDialog) == null ? void 0 : de.source : "settings";
                r({
                    openDialog: null
                }, ()=>{
                    P(H, J, te)
                }
                )
            }
            ,
            onClose: ()=>{
                r({
                    openDialog: null
                })
            }
        }), g(Rhe, {}), g(A.OverwriteConfirmDialogTunnel.Out, {}), $(), N(), t.pasteDialog.shown && g(vge, {
            setAppState: r,
            appState: t,
            onClose: ()=>r({
                pasteDialog: {
                    shown: !1,
                    data: null
                }
            })
        }), M.editor.isMobile && g(mge, {
            app: E,
            appState: t,
            elements: i,
            actionManager: e,
            renderJSONExportDialog: N,
            renderImageExportDialog: $,
            setAppState: r,
            onLockToggle: s,
            onHandToolToggle: a,
            onPenModeToggle: l,
            renderTopRightUI: u,
            renderCustomStats: f,
            renderSidebars: re,
            device: M,
            renderWelcomeScreen: v,
            UIOptions: h
        }), !M.editor.isMobile && L(Se, {
            children: [L("div", {
                className: "layer-ui__wrapper",
                style: t.openSidebar && se && M.editor.canFitSidebar ? {
                    width: `calc(100% - ${Pq}px)`
                } : {},
                children: [v && g(A.WelcomeScreenCenterTunnel.Out, {}), j(), g(AB, {
                    appState: t,
                    actionManager: e,
                    showExitZenModeBtn: c,
                    renderWelcomeScreen: v
                }), t.scrolledOutside && g("button", {
                    type: "button",
                    className: "scroll-back-to-content",
                    onClick: ()=>{
                        r(H=>({
                            ...mp(i, H)
                        }))
                    }
                    ,
                    children: k("buttons.scrollBackToContent")
                })]
            }), re()]
        })]
    });
    return g(SF.Provider, {
        value: t,
        children: g(S6, {
            scope: A.jotaiScope,
            children: g(rB.Provider, {
                value: A,
                children: ae
            })
        })
    })
}
  , LM = e=>{
    const {suggestedBindings: t, startBoundElement: n, cursorButton: r, scrollX: i, scrollY: o, ...s} = e;
    return s
}
  , r1e = (e,t)=>{
    if (e.children !== t.children)
        return !1;
    const {canvas: n, appState: r, ...i} = e
      , {canvas: o, appState: s, ...a} = t;
    return Xn(LM(r), LM(s), {
        selectedElementIds: Xn,
        selectedGroupIds: Xn
    }) && Xn(i, a)
}
  , i1e = ve.memo(n1e, r1e)
  , o1e = 5e3
  , s1e = ({message: e, onClose: t, closable: n=!1, duration: r=o1e, style: i})=>{
    const o = T.useRef(0)
      , s = r !== 1 / 0
      , a = T.useCallback(()=>{
        s && (o.current = window.setTimeout(()=>t(), r))
    }
    , [t, r, s]);
    return T.useEffect(()=>{
        if (s)
            return a(),
            ()=>clearTimeout(o.current)
    }
    , [a, e, r, s]),
    L("div", {
        className: "Toast",
        onMouseEnter: s ? ()=>clearTimeout(o == null ? void 0 : o.current) : void 0,
        onMouseLeave: s ? a : void 0,
        style: i,
        children: [g("p", {
            className: "Toast__message",
            children: e
        }), n && g(lt, {
            icon: Df,
            "aria-label": "close",
            type: "icon",
            onClick: t,
            className: "close"
        })]
    })
}
  , PM = we({
    name: "viewMode",
    label: "labels.viewMode",
    paletteName: "Toggle view mode",
    icon: z6,
    viewMode: !0,
    trackEvent: {
        category: "canvas",
        predicate: e=>!e.viewModeEnabled
    },
    perform(e, t) {
        return {
            appState: {
                ...t,
                viewModeEnabled: !this.checked(t)
            },
            storeAction: ee.NONE
        }
    },
    checked: e=>e.viewModeEnabled,
    predicate: (e,t,n)=>typeof n.viewModeEnabled > "u",
    keyTest: e=>!e[U.CTRL_OR_CMD] && e.altKey && e.code === pt.R
})
  , Cz = (e,t)=>{
    const n = t.scene.getSelectedElements(e);
    return n.length === 1 && Ue(n[0])
}
  , a1e = we({
    name: "selectAllElementsInFrame",
    label: "labels.selectAllElementsInFrame",
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t).at(0) || null;
        if (Ue(i)) {
            const o = Ia(Nt(e), i.id).filter(s=>!(s.type === "text" && s.containerId));
            return {
                elements: e,
                appState: {
                    ...t,
                    selectedElementIds: o.reduce((s,a)=>(s[a.id] = !0,
                    s), {})
                },
                storeAction: ee.CAPTURE
            }
        }
        return {
            elements: e,
            appState: t,
            storeAction: ee.NONE
        }
    }
    ,
    predicate: (e,t,n,r)=>Cz(t, r)
})
  , l1e = we({
    name: "removeAllElementsFromFrame",
    label: "labels.removeAllElementsFromFrame",
    trackEvent: {
        category: "history"
    },
    perform: (e,t,n,r)=>{
        const i = r.scene.getSelectedElements(t).at(0) || null;
        return Ue(i) ? {
            elements: eN(e, i),
            appState: {
                ...t,
                selectedElementIds: {
                    [i.id]: !0
                }
            },
            storeAction: ee.CAPTURE
        } : {
            elements: e,
            appState: t,
            storeAction: ee.NONE
        }
    }
    ,
    predicate: (e,t,n,r)=>Cz(t, r)
});
we({
    name: "updateFrameRendering",
    label: "labels.updateFrameRendering",
    viewMode: !0,
    trackEvent: {
        category: "canvas"
    },
    perform: (e,t)=>({
        elements: e,
        appState: {
            ...t,
            frameRendering: {
                ...t.frameRendering,
                enabled: !t.frameRendering.enabled
            }
        },
        storeAction: ee.NONE
    }),
    checked: e=>e.frameRendering.enabled
});
we({
    name: "setFrameAsActiveTool",
    label: "toolBar.frame",
    trackEvent: {
        category: "toolbar"
    },
    icon: ND,
    viewMode: !1,
    perform: (e,t,n,r)=>{
        const i = bn(t, {
            type: "frame"
        });
        return ls(r.interactiveCanvas, {
            ...t,
            activeTool: i
        }),
        {
            elements: e,
            appState: {
                ...t,
                activeTool: bn(t, {
                    type: "frame"
                })
            },
            storeAction: ee.NONE
        }
    }
    ,
    keyTest: e=>!e[U.CTRL_OR_CMD] && !e.shiftKey && !e.altKey && e.key.toLocaleLowerCase() === U.F
});
const c1e = ()=>L("div", {
    "data-testid": "brave-measure-text-error",
    children: [g("p", {
        children: g(li, {
            i18nKey: "errors.brave_measure_text_error.line1",
            bold: e=>g("span", {
                style: {
                    fontWeight: 600
                },
                children: e
            })
        })
    }), g("p", {
        children: g(li, {
            i18nKey: "errors.brave_measure_text_error.line2",
            bold: e=>g("span", {
                style: {
                    fontWeight: 600
                },
                children: e
            })
        })
    }), g("p", {
        children: g(li, {
            i18nKey: "errors.brave_measure_text_error.line3",
            link: e=>g("a", {
                href: "http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",
                children: e
            })
        })
    }), g("p", {
        children: g(li, {
            i18nKey: "errors.brave_measure_text_error.line4",
            issueLink: e=>g("a", {
                href: "https://github.com/excalidraw/excalidraw/issues/new",
                children: e
            }),
            discordLink: e=>L("a", {
                href: "https://discord.gg/UexuTaE",
                children: [e, "."]
            })
        })
    })]
})
  , Xt = e=>t=>{
    si.unstable_batchedUpdates(e, t)
}
  , Cb = e=>Av(t=>{
    si.unstable_batchedUpdates(e, t)
}
)
  , kz = (()=>{
    let e;
    try {
        const n = T.version.split(".");
        e = Number(n[0]) > 17
    } catch {
        e = !1
    }
    let t = !1;
    return ()=>window.EXCALIDRAW_THROTTLE_RENDER === !0 ? e ? !0 : (t || (t = !0,
    console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),
    !1) : !1
}
)()
  , u1e = "#ff6b6b"
  , d1e = "#ff0000"
  , RM = 1
  , DM = 2
  , f1e = (e,t)=>{
    if (!t.snapLines.length)
        return;
    const n = t.theme === Oe.LIGHT || t.zenModeEnabled ? u1e : d1e
      , r = (t.zenModeEnabled ? RM * 1.5 : RM) / t.zoom.value;
    e.save(),
    e.translate(t.scrollX, t.scrollY);
    for (const i of t.snapLines)
        i.type === "pointer" ? (e.lineWidth = r,
        e.strokeStyle = n,
        g1e(i, e, t)) : i.type === "gap" ? (e.lineWidth = r,
        e.strokeStyle = n,
        p1e(i.points[0], i.points[1], i.direction, t, e)) : i.type === "points" && (e.lineWidth = r,
        e.strokeStyle = n,
        h1e(i, e, t));
    e.restore()
}
  , h1e = (e,t,n)=>{
    if (!n.zenModeEnabled) {
        const r = e.points[0]
          , i = e.points[e.points.length - 1];
        Xi(r, i, t)
    }
    for (const r of e.points)
        Tz(r, n, t)
}
  , g1e = (e,t,n)=>{
    Tz(e.points[0], n, t),
    n.zenModeEnabled || Xi(e.points[0], e.points[1], t)
}
  , Tz = ([e,t],n,r)=>{
    r.save();
    const i = (n.zenModeEnabled ? DM * 1.5 : DM) / n.zoom.value;
    r.beginPath(),
    r.moveTo(e - i, t - i),
    r.lineTo(e + i, t + i),
    r.moveTo(e + i, t - i),
    r.lineTo(e - i, t + i),
    r.stroke(),
    r.restore()
}
  , Xi = (e,t,n)=>{
    n.beginPath(),
    n.lineTo(...e),
    n.lineTo(...t),
    n.stroke()
}
  , p1e = (e,t,n,r,i)=>{
    const o = 8 / r.zoom.value
      , s = o / 2
      , a = o / 4;
    if (n === "horizontal") {
        const l = [(e[0] + t[0]) / 2, e[1]];
        r.zenModeEnabled || Xi([e[0], e[1] - o], [e[0], e[1] + o], i),
        Xi([l[0] - a, l[1] - s], [l[0] - a, l[1] + s], i),
        Xi([l[0] + a, l[1] - s], [l[0] + a, l[1] + s], i),
        r.zenModeEnabled || (Xi([t[0], t[1] - o], [t[0], t[1] + o], i),
        Xi(e, t, i))
    } else {
        const l = [e[0], (e[1] + t[1]) / 2];
        r.zenModeEnabled || Xi([e[0] - o, e[1]], [e[0] + o, e[1]], i),
        Xi([l[0] - s, l[1] - a], [l[0] + s, l[1] - a], i),
        Xi([l[0] - s, l[1] + a], [l[0] + s, l[1] + a], i),
        r.zenModeEnabled || (Xi([t[0] - o, t[1]], [t[0] + o, t[1]], i),
        Xi(e, t, i))
    }
}
  , m1e = (e,t,n)=>{
    var a, l;
    const {elementId: r, hoverPointIndex: i} = t.selectedLinearElement;
    if ((l = (a = t.editingLinearElement) == null ? void 0 : a.selectedPointsIndices) != null && l.includes(i))
        return;
    const o = ke.getElement(r, n);
    if (!o)
        return;
    const s = ke.getPointAtIndexGlobalCoordinates(o, i, n);
    e.save(),
    e.translate(t.scrollX, t.scrollY),
    ix(s, e, t),
    e.restore()
}
  , ix = (e,t,n)=>{
    t.fillStyle = "rgba(105, 101, 219, 0.4)",
    qv(t, e[0], e[1], ke.POINT_HANDLE_SIZE / n.zoom.value, !1)
}
  , r1 = (e,t,n,r,i,o,s,a,l=!1,c=0)=>{
    e.save(),
    e.translate(o, s),
    e.rotate(a),
    l && e.fillRect(t - o, n - s, r, i),
    c && e.roundRect ? (e.beginPath(),
    e.roundRect(t - o, n - s, r, i, c),
    e.stroke(),
    e.closePath()) : e.strokeRect(t - o, n - s, r, i),
    e.restore()
}
  , v1e = (e,t,n,r,i,o)=>{
    e.save(),
    e.translate(r, i),
    e.rotate(o),
    e.beginPath(),
    e.moveTo(0, n / 2),
    e.lineTo(t / 2, 0),
    e.lineTo(0, -n / 2),
    e.lineTo(-t / 2, 0),
    e.closePath(),
    e.stroke(),
    e.restore()
}
  , z0 = (e,t,n,r,i,o=!1)=>{
    e.strokeStyle = "#5e5ad8",
    e.setLineDash([]),
    e.fillStyle = "rgba(255, 255, 255, 0.9)",
    i ? e.fillStyle = "rgba(134, 131, 226, 0.9)" : o && (e.fillStyle = "rgba(177, 151, 252, 0.7)"),
    qv(e, n[0], n[1], r / t.zoom.value, !o)
}
  , y1e = (e,t,n,r,i,o)=>{
    e.beginPath(),
    e.ellipse(r, i, t / 2, n / 2, o, 0, Math.PI * 2),
    e.stroke()
}
  , w1e = (e,t,n)=>{
    const [r,i,o,s] = Ke(t, n)
      , a = o - r
      , l = s - i
      , c = 10
      , u = 4;
    e.strokeStyle = "rgba(0,0,0,.05)",
    e.lineWidth = c - u;
    const f = u / 2 + c / 2
      , h = Ol(Math.min(t.width, t.height), t);
    switch (t.type) {
    case "rectangle":
    case "text":
    case "image":
    case "iframe":
    case "embeddable":
    case "frame":
    case "magicframe":
        r1(e, r - f, i - f, a + f * 2, l + f * 2, r + a / 2, i + l / 2, t.angle, void 0, h);
        break;
    case "diamond":
        const m = Math.hypot(a, l)
          , v = f * m / l
          , y = f * m / a;
        v1e(e, a + v * 2, l + y * 2, r + a / 2, i + l / 2, t.angle);
        break;
    case "ellipse":
        y1e(e, a + f * 2, l + f * 2, r + a / 2, i + l / 2, t.angle);
        break
    }
}
  , E1e = (e,t,n)=>{
    const [r,i,o] = t
      , s = jv(o, o.width, o.height);
    e.strokeStyle = "rgba(0,0,0,0)",
    e.fillStyle = "rgba(0,0,0,.05)",
    (i === "both" ? [0, -1] : i === "start" ? [0] : [-1]).forEach(l=>{
        const [c,u] = ke.getPointAtIndexGlobalCoordinates(r, l, n);
        qv(e, c, u, s)
    }
    )
}
  , Az = (e,t,n)=>{
    const {angle: r, elementX1: i, elementY1: o, elementX2: s, elementY2: a, selectionColors: l, cx: c, cy: u, dashed: f, activeEmbeddable: h} = n
      , m = s - i
      , v = a - o
      , E = au * 2 / t.zoom.value
      , b = 8 / t.zoom.value
      , _ = 4 / t.zoom.value;
    e.save(),
    e.translate(t.scrollX, t.scrollY),
    e.lineWidth = (h ? 4 : 1) / t.zoom.value;
    const x = l.length;
    for (let C = 0; C < x; ++C)
        e.strokeStyle = l[C],
        f && e.setLineDash([b, _ + (b + _) * (x - 1)]),
        e.lineDashOffset = (b + _) * C,
        r1(e, i - E, o - E, m + E * 2, v + E * 2, c, u, r);
    e.restore()
}
  , b1e = (e,t,n,r)=>{
    const i = Array.isArray(n) ? E1e : w1e;
    e.save(),
    e.translate(t.scrollX, t.scrollY),
    i(e, n, r),
    e.restore()
}
  , _1e = (e,t,n,r)=>{
    const [i,o,s,a] = Ke(n, r)
      , l = s - i
      , c = a - o;
    e.strokeStyle = "rgb(0,118,255)",
    e.lineWidth = pn.strokeWidth / t.zoom.value,
    e.save(),
    e.translate(t.scrollX, t.scrollY),
    r1(e, i, o, l, c, i + l / 2, o + c / 2, n.angle, !1, pn.radius / t.zoom.value),
    e.restore()
}
  , x1e = (e,t,n)=>{
    const r = n.filter(a=>a.groupIds.length === 0)
      , i = n.filter(a=>a.groupIds.length > 0)
      , o = a=>{
        const [l,c,u,f] = xt(a);
        return {
            angle: 0,
            elementX1: l,
            elementX2: u,
            elementY1: c,
            elementY2: f,
            selectionColors: ["rgb(0,118,255)"],
            dashed: !1,
            cx: l + (u - l) / 2,
            cy: c + (f - c) / 2,
            activeEmbeddable: !1
        }
    }
      , s = a=>{
        const l = xn(n, a);
        return o(l)
    }
    ;
    Object.entries(mD(i, t)).filter(([a,l])=>l).map(([a,l])=>a).map(a=>s(a)).concat(r.map(a=>o([a]))).forEach(a=>Az(e, t, a))
}
  , kb = (e,t,n,r)=>{
    if (!t.selectedLinearElement)
        return;
    e.save(),
    e.translate(t.scrollX, t.scrollY),
    e.lineWidth = 1 / t.zoom.value;
    const i = ke.getPointsGlobalCoordinates(n, r)
      , {POINT_HANDLE_SIZE: o} = ke
      , s = t.editingLinearElement ? o : o / 2;
    i.forEach((l,c)=>{
        var f, h;
        if (He(n) && c !== 0 && c !== i.length - 1)
            return;
        const u = !!((h = (f = t.editingLinearElement) == null ? void 0 : f.selectedPointsIndices) != null && h.includes(c));
        z0(e, t, l, s, u)
    }
    ),
    ke.getEditorMidPoints(n, r, t).filter(l=>l !== null).forEach(l=>{
        var c;
        (c = t == null ? void 0 : t.selectedLinearElement) != null && c.segmentMidPointHoveredCoords && ke.arePointsEqual(l, t.selectedLinearElement.segmentMidPointHoveredCoords) ? t.editingLinearElement ? (z0(e, t, l, s, !1),
        ix(l, e, t)) : (ix(l, e, t),
        z0(e, t, l, s, !1)) : (t.editingLinearElement || i.length === 2) && z0(e, t, l, o / 2, !1, !0)
    }
    ),
    e.restore()
}
  , OM = (e,t,n,r,i)=>{
    Object.keys(r).forEach(o=>{
        const s = r[o];
        if (s !== void 0) {
            const [a,l,c,u] = s;
            e.save(),
            e.lineWidth = 1 / n.zoom.value,
            t.selectionColor && (e.strokeStyle = t.selectionColor),
            o === "rotation" ? qv(e, a + c / 2, l + u / 2, c / 2) : e.roundRect ? (e.beginPath(),
            e.roundRect(a, l, c, u, 2 / n.zoom.value),
            e.fill(),
            e.stroke()) : r1(e, a, l, c, u, a + c / 2, l + u / 2, i, !0),
            e.restore()
        }
    }
    )
}
  , S1e = (e,t,n,r)=>{
    t.save();
    const i = au * 2 / n.zoom.value
      , o = e.width + i * 2
      , s = e.height + i * 2
      , a = e.x + o / 2
      , l = e.y + s / 2
      , c = -(o / 2 + i)
      , u = -(s / 2 + i);
    t.translate(a + n.scrollX, l + n.scrollY),
    t.rotate(e.angle),
    t.lineWidth = 1 / n.zoom.value,
    t.strokeStyle = r,
    t.strokeRect(c, u, o, s),
    t.restore()
}
  , Mz = ({canvas: e, elementsMap: t, visibleElements: n, selectedElements: r, allElementsMap: i, scale: o, appState: s, renderConfig: a, device: l})=>{
    var y, E, b;
    if (e === null)
        return {
            atLeastOneVisibleElement: !1,
            elementsMap: t
        };
    const [c,u] = LO(e, o)
      , f = PO({
        canvas: e,
        scale: o,
        normalizedWidth: c,
        normalizedHeight: u
    });
    f.save(),
    f.scale(s.zoom.value, s.zoom.value);
    let h;
    if (n.forEach(_=>{
        var x;
        ((x = s.editingLinearElement) == null ? void 0 : x.elementId) === _.id && _ && (h = _)
    }
    ),
    h && kb(f, s, h, t),
    s.selectionElement)
        try {
            nae(s.selectionElement, f, s, a.selectionColor)
        } catch (_) {
            console.error(_)
        }
    if (s.editingElement && ye(s.editingElement)) {
        const _ = i.get(s.editingElement.id);
        _ && !_.autoResize && S1e(_, f, s, a.selectionColor)
    }
    s.isBindingEnabled && s.suggestedBindings.filter(_=>_ != null).forEach(_=>{
        b1e(f, s, _, t)
    }
    ),
    s.frameToHighlight && _1e(f, s, s.frameToHighlight, t),
    s.elementsToHighlight && x1e(f, s, s.elementsToHighlight);
    const m = r.some(_=>Ue(_));
    if (r.length === 1 && ((y = s.editingLinearElement) == null ? void 0 : y.elementId) === r[0].id && kb(f, s, r[0], t),
    s.selectedLinearElement && s.selectedLinearElement.hoverPointIndex >= 0 && !(He(r[0]) && s.selectedLinearElement.hoverPointIndex > 0 && s.selectedLinearElement.hoverPointIndex < r[0].points.length - 1) && m1e(f, s, t),
    !s.multiElement && !s.editingLinearElement) {
        const _ = AN(r, s)
          , x = r.length === 1 && je(r[0]);
        x && ((E = s.selectedLinearElement) == null ? void 0 : E.elementId) === r[0].id && !r[0].locked && kb(f, s, r[0], t);
        const C = a.selectionColor || Kn.black;
        if (_) {
            const P = De(r)
              , M = [];
            for (const I of t.values()) {
                const O = []
                  , N = a.remoteSelectedElementIds.get(I.id);
                if (x && Be(I) && He(I) && (I.startBinding || I.endBinding) || (P.has(I.id) && !gD(s, I) && O.push(C),
                N && O.push(...N.map($=>by($, s.collaborators.get($))))),
                O.length) {
                    const [$,V,z,j,re,se] = Ke(I, t, !0);
                    M.push({
                        angle: I.angle,
                        elementX1: $,
                        elementY1: V,
                        elementX2: z,
                        elementY2: j,
                        selectionColors: O,
                        dashed: !!N,
                        cx: re,
                        cy: se,
                        activeEmbeddable: ((b = s.activeEmbeddable) == null ? void 0 : b.element) === I && s.activeEmbeddable.state === "active"
                    })
                }
            }
            const A = I=>{
                const O = xn(t, I)
                  , [N,$,V,z] = xt(O);
                M.push({
                    angle: 0,
                    elementX1: N,
                    elementX2: V,
                    elementY1: $,
                    elementY2: z,
                    selectionColors: [Kn.black],
                    dashed: !0,
                    cx: N + (V - N) / 2,
                    cy: $ + (z - $) / 2,
                    activeEmbeddable: !1
                })
            }
            ;
            for (const I of Zc(s))
                A(I);
            s.editingGroupId && A(s.editingGroupId),
            M.forEach(I=>Az(f, s, I))
        }
        if (f.save(),
        f.translate(s.scrollX, s.scrollY),
        r.length === 1) {
            f.fillStyle = Kn.white;
            const P = TN(r[0], s.zoom, t, "mouse", xg(l));
            !s.viewModeEnabled && _ && !ye(s.editingElement) && OM(f, a, s, P, r[0].angle)
        } else if (r.length > 1 && !s.isRotating) {
            const P = au * 2 / s.zoom.value;
            f.fillStyle = Kn.white;
            const [M,A,I,O] = xt(r)
              , N = f.getLineDash();
            f.setLineDash([2 / s.zoom.value]);
            const $ = f.lineWidth;
            f.lineWidth = 1 / s.zoom.value,
            f.strokeStyle = C,
            r1(f, M - P, A - P, I - M + P * 2, O - A + P * 2, (M + I) / 2, (A + O) / 2, 0),
            f.lineWidth = $,
            f.setLineDash(N);
            const V = k4([M, A, I, O, (M + I) / 2, (A + O) / 2], 0, s.zoom, "mouse", m ? {
                ...xg(l),
                rotation: !0
            } : xg(l));
            r.some(z=>!z.locked) && OM(f, a, s, V, 0)
        }
        f.restore()
    }
    f1e(f, s),
    f.restore(),
    Ude({
        context: f,
        renderConfig: a,
        appState: s,
        normalizedWidth: c,
        normalizedHeight: u
    });
    let v;
    return a.renderScrollbars && (v = gge(n, c, u, s),
    f.save(),
    f.fillStyle = hge,
    f.strokeStyle = "rgba(255,255,255,0.8)",
    [v.horizontal, v.vertical].forEach(_=>{
        _ && UF(f, _.x, _.y, _.width, _.height, El / 2)
    }
    ),
    f.restore()),
    {
        scrollBars: v,
        atLeastOneVisibleElement: n.length > 0,
        elementsMap: t
    }
}
  , Lz = Av(e=>{
    var n;
    const t = Mz(e);
    (n = e.callback) == null || n.call(e, t)
}
, {
    trailing: !0
})
  , I1e = (e,t)=>{
    if (t) {
        Lz(e);
        return
    }
    const n = Mz(e);
    return e.callback(n),
    n
}
  , C1e = e=>{
    const t = T.useRef(!1);
    return T.useEffect(()=>{
        var l;
        if (!t.current) {
            t.current = !0;
            return
        }
        const n = new Map
          , r = new Map
          , i = new Map
          , o = new Map
          , s = new Map;
        e.appState.collaborators.forEach((c,u)=>{
            if (c.selectedElementIds)
                for (const f of Object.keys(c.selectedElementIds))
                    i.has(f) || i.set(f, []),
                    i.get(f).push(u);
            !c.pointer || c.pointer.renderCursor === !1 || (c.username && o.set(u, c.username),
            c.userState && s.set(u, c.userState),
            r.set(u, Bo({
                sceneX: c.pointer.x,
                sceneY: c.pointer.y
            }, e.appState)),
            n.set(u, c.button))
        }
        );
        const a = ((l = e.containerRef) == null ? void 0 : l.current) && getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection") || "#6965db";
        I1e({
            canvas: e.canvas,
            elementsMap: e.elementsMap,
            visibleElements: e.visibleElements,
            selectedElements: e.selectedElements,
            allElementsMap: e.allElementsMap,
            scale: window.devicePixelRatio,
            appState: e.appState,
            renderConfig: {
                remotePointerViewportCoords: r,
                remotePointerButton: n,
                remoteSelectedElementIds: i,
                remotePointerUsernames: o,
                remotePointerUserStates: s,
                selectionColor: a,
                renderScrollbars: !1
            },
            device: e.device,
            callback: e.renderInteractiveSceneCallback
        }, kz())
    }
    ),
    g("canvas", {
        className: "excalidraw__canvas interactive",
        style: {
            width: e.appState.width,
            height: e.appState.height,
            cursor: e.appState.viewModeEnabled ? It.GRAB : It.AUTO
        },
        width: e.appState.width * e.scale,
        height: e.appState.height * e.scale,
        ref: e.handleCanvasRef,
        onContextMenu: e.onContextMenu,
        onPointerMove: e.onPointerMove,
        onPointerUp: e.onPointerUp,
        onPointerCancel: e.onPointerCancel,
        onTouchMove: e.onTouchMove,
        onPointerDown: e.onPointerDown,
        onDoubleClick: e.appState.viewModeEnabled ? void 0 : e.onDoubleClick,
        children: k("labels.drawingCanvas")
    })
}
  , NM = e=>({
    zoom: e.zoom,
    scrollX: e.scrollX,
    scrollY: e.scrollY,
    width: e.width,
    height: e.height,
    viewModeEnabled: e.viewModeEnabled,
    editingGroupId: e.editingGroupId,
    editingLinearElement: e.editingLinearElement,
    selectedElementIds: e.selectedElementIds,
    frameToHighlight: e.frameToHighlight,
    offsetLeft: e.offsetLeft,
    offsetTop: e.offsetTop,
    theme: e.theme,
    pendingImageElementId: e.pendingImageElementId,
    selectionElement: e.selectionElement,
    selectedGroupIds: e.selectedGroupIds,
    selectedLinearElement: e.selectedLinearElement,
    multiElement: e.multiElement,
    isBindingEnabled: e.isBindingEnabled,
    suggestedBindings: e.suggestedBindings,
    isRotating: e.isRotating,
    elementsToHighlight: e.elementsToHighlight,
    collaborators: e.collaborators,
    activeEmbeddable: e.activeEmbeddable,
    snapLines: e.snapLines,
    zenModeEnabled: e.zenModeEnabled,
    editingElement: e.editingElement
})
  , k1e = (e,t)=>e.selectionNonce !== t.selectionNonce || e.sceneNonce !== t.sceneNonce || e.scale !== t.scale || e.elementsMap !== t.elementsMap || e.visibleElements !== t.visibleElements || e.selectedElements !== t.selectedElements ? !1 : Xn(NM(e.appState), NM(t.appState))
  , T1e = ve.memo(C1e, k1e)
  , A1e = e=>{
    const t = T.useRef(null)
      , n = T.useRef(!1);
    return T.useEffect(()=>{
        const r = t.current;
        if (!r)
            return;
        const i = e.canvas;
        n.current || (n.current = !0,
        r.replaceChildren(i),
        i.classList.add("excalidraw__canvas", "static"));
        const o = `${e.appState.width}px`
          , s = `${e.appState.height}px`;
        i.style.width !== o && (i.style.width = o),
        i.style.height !== s && (i.style.height = s);
        const a = e.appState.width * e.scale
          , l = e.appState.height * e.scale;
        i.width !== a && (i.width = a),
        i.height !== l && (i.height = l),
        OO({
            canvas: i,
            rc: e.rc,
            scale: e.scale,
            elementsMap: e.elementsMap,
            allElementsMap: e.allElementsMap,
            visibleElements: e.visibleElements,
            appState: e.appState,
            renderConfig: e.renderConfig
        }, kz())
    }
    ),
    g("div", {
        className: "excalidraw__canvas-wrapper",
        ref: t
    })
}
  , FM = e=>({
    zoom: e.zoom,
    scrollX: e.scrollX,
    scrollY: e.scrollY,
    width: e.width,
    height: e.height,
    viewModeEnabled: e.viewModeEnabled,
    offsetLeft: e.offsetLeft,
    offsetTop: e.offsetTop,
    theme: e.theme,
    pendingImageElementId: e.pendingImageElementId,
    shouldCacheIgnoreZoom: e.shouldCacheIgnoreZoom,
    viewBackgroundColor: e.viewBackgroundColor,
    exportScale: e.exportScale,
    selectedElementsAreBeingDragged: e.selectedElementsAreBeingDragged,
    gridSize: e.gridSize,
    gridStep: e.gridStep,
    frameRendering: e.frameRendering,
    selectedElementIds: e.selectedElementIds,
    frameToHighlight: e.frameToHighlight,
    editingGroupId: e.editingGroupId,
    currentHoveredFontFamily: e.currentHoveredFontFamily
})
  , M1e = (e,t)=>e.sceneNonce !== t.sceneNonce || e.scale !== t.scale || e.elementsMap !== t.elementsMap || e.visibleElements !== t.visibleElements ? !1 : Xn(FM(e.appState), FM(t.appState)) && Xn(e.renderConfig, t.renderConfig)
  , L1e = ve.memo(A1e, M1e);
class BM {
    constructor(t) {
        D(this, "scene");
        D(this, "getRenderableElements", (()=>{
            const t = ({elementsMap: r, zoom: i, offsetLeft: o, offsetTop: s, scrollX: a, scrollY: l, height: c, width: u})=>{
                const f = [];
                for (const h of r.values())
                    N2(h, u, c, {
                        zoom: i,
                        offsetLeft: o,
                        offsetTop: s,
                        scrollX: a,
                        scrollY: l
                    }, r) && f.push(h);
                return f
            }
              , n = ({elements: r, editingElement: i, pendingImageElementId: o})=>{
                const s = As(new Map);
                for (const a of r)
                    ga(a) && o === a.id || (!i || i.type !== "text" || a.id !== i.id) && s.set(a.id, a);
                return s
            }
            ;
            return dJ(({zoom: r, offsetLeft: i, offsetTop: o, scrollX: s, scrollY: a, height: l, width: c, editingElement: u, pendingImageElementId: f, sceneNonce: h})=>{
                const m = this.scene.getNonDeletedElements()
                  , v = n({
                    elements: m,
                    editingElement: u,
                    pendingImageElementId: f
                })
                  , y = t({
                    elementsMap: v,
                    zoom: r,
                    offsetLeft: i,
                    offsetTop: o,
                    scrollX: s,
                    scrollY: a,
                    height: l,
                    width: c
                });
                return {
                    elementsMap: v,
                    visibleElements: y
                }
            }
            )
        }
        )());
        this.scene = t
    }
    destroy() {
        Lz.cancel(),
        DO.cancel(),
        this.getRenderableElements.clear()
    }
}
const P1e = ({trails: e})=>{
    const t = T.useRef(null);
    return T.useEffect(()=>{
        if (t.current)
            for (const n of e)
                n.start(t.current);
        return ()=>{
            for (const n of e)
                n.stop()
        }
    }
    , e),
    g("div", {
        className: "SVGLayer",
        children: g("svg", {
            ref: t
        })
    })
}
  , R1e = 5
  , D1e = (e,t,n)=>{
    const [r,i] = Ke(e, n)
      , {x: o, y: s} = Bo({
        sceneX: r + e.width,
        sceneY: i
    }, t)
      , a = o - t.offsetLeft + 10
      , l = s - t.offsetTop;
    return {
        x: a,
        y: l
    }
}
  , zM = ({children: e, element: t, elementsMap: n})=>{
    const r = o1();
    if (r.contextMenu || r.newElement || r.resizingElement || r.isRotating || r.openMenu || r.viewModeEnabled)
        return null;
    const {x: i, y: o} = D1e(t, r, n);
    return g("div", {
        className: "excalidraw-canvas-buttons",
        style: {
            top: `${o}px`,
            left: `${i}px`,
            padding: R1e
        },
        children: e
    })
}
  , O1e = `You are a skilled front-end developer who builds interactive prototypes from wireframes, and is an expert at CSS Grid and Flex design.
Your role is to transform low-fidelity wireframes into working front-end HTML code.

YOU MUST FOLLOW FOLLOWING RULES:

- Use HTML, CSS, JavaScript to build a responsive, accessible, polished prototype
- Leverage Tailwind for styling and layout (import as script <script src="https://cdn.tailwindcss.com"><\/script>)
- Inline JavaScript when needed
- Fetch dependencies from CDNs when needed (using unpkg or skypack)
- Source images from Unsplash or create applicable placeholders
- Interpret annotations as intended vs literal UI
- Fill gaps using your expertise in UX and business logic
- generate primarily for desktop UI, but make it responsive.
- Use grid and flexbox wherever applicable.
- Convert the wireframe in its entirety, don't omit elements if possible.

If the wireframes, diagrams, or text is unclear or unreadable, refer to provided text for clarification.

Your goal is a production-ready prototype that brings the wireframes to life.

Please output JUST THE HTML file containing your best attempt at implementing the provided wireframes.`;
async function N1e({image: e, apiKey: t, text: n, theme: r=Oe.LIGHT}) {
    const i = {
        model: "gpt-4-vision-preview",
        max_tokens: 4096,
        temperature: .1,
        messages: [{
            role: "system",
            content: O1e
        }, {
            role: "user",
            content: [{
                type: "image_url",
                image_url: {
                    url: e,
                    detail: "high"
                }
            }, {
                type: "text",
                text: `Above is the reference wireframe. Please make a new website based on these and return just the HTML file. Also, please make it for the ${r} theme. What follows are the wireframe's text annotations (if any)...`
            }, {
                type: "text",
                text: n
            }]
        }]
    };
    let o;
    const s = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${t}`
        },
        body: JSON.stringify(i)
    });
    return s.ok ? o = {
        ...await s.json(),
        ok: !0
    } : o = {
        ...await s.json(),
        ok: !1
    },
    o
}
const F1e = "small"
  , Tb = e=>L("label", {
    className: xe("ToolIcon ToolIcon__MagicButton", `ToolIcon_size_${F1e}`, {
        "is-mobile": e.isMobile
    }),
    title: `${e.title}`,
    children: [g("input", {
        className: "ToolIcon_type_checkbox",
        type: "checkbox",
        name: e.name,
        onChange: e.onChange,
        checked: e.checked,
        "aria-label": e.title
    }), g("div", {
        className: "ToolIcon__icon",
        children: e.icon
    })]
})
  , B1e = ({height: e, width: t, userToFollow: n, onDisconnect: r})=>g("div", {
    className: "follow-mode",
    style: {
        width: t,
        height: e
    },
    children: L("div", {
        className: "follow-mode__badge",
        children: [L("div", {
            className: "follow-mode__badge__label",
            children: ["Following", " ", g("span", {
                className: "follow-mode__badge__username",
                title: n.username,
                children: n.username
            })]
        }), g("button", {
            type: "button",
            onClick: r,
            className: "follow-mode__disconnect-btn",
            children: Df
        })]
    })
});
class z1e {
    constructor() {
        D(this, "targets", new WeakMap);
        D(this, "rafIds", new WeakMap)
    }
    register(t, n) {
        this.targets.set(t, {
            callback: n,
            stopped: !0
        })
    }
    start(t) {
        const n = this.targets.get(t);
        n && (this.rafIds.has(t) || (this.targets.set(t, {
            ...n,
            stopped: !1
        }),
        this.scheduleFrame(t)))
    }
    stop(t) {
        const n = this.targets.get(t);
        n && !n.stopped && this.targets.set(t, {
            ...n,
            stopped: !0
        }),
        this.cancelFrame(t)
    }
    constructFrame(t) {
        return n=>{
            const r = this.targets.get(t);
            if (!r)
                return;
            const i = this.onFrame(r, n);
            !r.stopped && !i ? this.scheduleFrame(t) : this.cancelFrame(t)
        }
    }
    scheduleFrame(t) {
        const n = requestAnimationFrame(this.constructFrame(t));
        this.rafIds.set(t, n)
    }
    cancelFrame(t) {
        if (this.rafIds.has(t)) {
            const n = this.rafIds.get(t);
            cancelAnimationFrame(n)
        }
        this.rafIds.delete(t)
    }
    onFrame(t, n) {
        return t.callback(n) ?? !1
    }
}
function $1e(e, t, n, r) {
    Object.defineProperty(e, t, {
        get: n,
        set: r,
        enumerable: !0,
        configurable: !0
    })
}
var U1e = {};
$1e(U1e, "LaserPointer", ()=>nv);
function hn([e,t,n], [r,i,o]) {
    return [e + r, t + i, n + o]
}
function eg([e,t,n], [r,i,o]) {
    return [e - r, t - i, n - o]
}
function In([e,t,n], r) {
    return [e * r, t * r, n * r]
}
function ud([e,t,n]) {
    return [e / Math.sqrt(e ** 2 + t ** 2), t / Math.sqrt(e ** 2 + t ** 2), n]
}
function vr([e,t,n], r) {
    return [Math.cos(r) * e - Math.sin(r) * t, Math.sin(r) * e + Math.cos(r) * t, n]
}
function H1e(e, t, n) {
    return hn(e, In(eg(t, e), n))
}
function $M(e, t, n) {
    return Math.atan2(n[1] - e[1], n[0] - e[0]) - Math.atan2(t[1] - e[1], t[0] - e[0])
}
function UM(e) {
    return Math.atan2(Math.sin(e), Math.cos(e))
}
function HM([e,t]) {
    return Math.sqrt(e ** 2 + t ** 2)
}
function Qd([e,t], [n,r]) {
    return Math.sqrt((n - e) ** 2 + (r - t) ** 2)
}
function W1e(e) {
    if (e.length < 2)
        return 0;
    let t = 0;
    for (let n = 1; n <= e.length - 1; n++)
        t += Qd(e[n - 1], e[n]);
    return t += Qd(e[e.length - 2], e[e.length - 1]),
    t
}
const G1e = (e,t,n)=>Math.max(t, Math.min(n, e));
function V1e(e, t, n) {
    const r = Qd(t, n);
    if (r === 0)
        return Qd(e, t);
    const i = G1e(((e[0] - t[0]) * (n[0] - t[0]) + (e[1] - t[1]) * (n[1] - t[1])) / r ** 2, 0, 1)
      , o = [t[0] + i * (n[0] - t[0]), t[1] + i * (n[1] - t[1]), e[2]];
    return Qd(o, e)
}
function tv(e, t) {
    if (t === 0 || e.length <= 2)
        return e;
    const n = e[0]
      , r = e[e.length - 1]
      , [i,o] = e.reduce(([s,a],l,c)=>{
        const u = V1e(l, n, r);
        return u > s ? [u, c] : [s, a]
    }
    , [0, -1]);
    if (i >= t) {
        const s = e[o];
        return [...tv([n, ...e.slice(1, o), s], t).slice(0, -1), s, ...tv([s, ...e.slice(o, -1), r], t).slice(1)]
    } else
        return [n, r]
}
const sl = class sl {
    constructor(t) {
        this.originalPoints = [],
        this.stablePoints = [],
        this.tailPoints = [],
        this.isFresh = !0,
        this.options = Object.assign({}, sl.defaults, t)
    }
    get lastPoint() {
        return this.tailPoints[this.tailPoints.length - 1] ?? this.stablePoints[this.stablePoints.length - 1]
    }
    addPoint(t) {
        const n = this.originalPoints[this.originalPoints.length - 1];
        if (!(n && n[0] === t[0] && n[1] === t[1])) {
            if (this.originalPoints.push(t),
            this.isFresh) {
                this.isFresh = !1,
                this.stablePoints.push(t);
                return
            }
            this.options.streamline > 0 && (t = H1e(this.lastPoint, t, 1 - this.options.streamline)),
            this.tailPoints.push(t),
            W1e(this.tailPoints) > sl.constants.maxTailLength && this.stabilizeTail()
        }
    }
    close() {
        this.stabilizeTail()
    }
    stabilizeTail() {
        if (this.options.simplify > 0 && this.options.simplifyPhase == "tail")
            throw new Error("Not implemented yet");
        this.stablePoints.push(...this.tailPoints),
        this.tailPoints = []
    }
    getSize(t, n, r, i, o) {
        return (t ?? this.options.size) * this.options.sizeMapping({
            pressure: n,
            runningLength: o,
            currentIndex: r,
            totalLength: i
        })
    }
    getStrokeOutline(t) {
        if (this.isFresh)
            return [];
        let n = [...this.stablePoints, ...this.tailPoints];
        this.options.simplify > 0 && this.options.simplifyPhase === "input" && (n = tv(n, this.options.simplify));
        const r = n.length;
        if (r === 0)
            return [];
        if (r === 1) {
            const A = n[0]
              , I = this.getSize(t, A[2], 0, r, 0);
            if (I < .5)
                return [];
            const O = [];
            for (let N = 0; N <= Math.PI * 2; N += Math.PI / 16)
                O.push(hn(A, In(vr([1, 0, 0], N), I)));
            return O.push(hn(A, In([1, 0, 0], this.getSize(t, A[2], 0, r, 0)))),
            O
        }
        if (r === 2) {
            const A = n[0]
              , I = n[1]
              , O = this.getSize(t, A[2], 0, r, 0)
              , N = this.getSize(t, I[2], 0, r, 0);
            if (O < .5 || N < .5)
                return [];
            const $ = []
              , V = $M(A, [A[0], A[1] - 100, A[2]], I);
            for (let z = V; z <= Math.PI + V; z += Math.PI / 16)
                $.push(hn(A, In(vr([1, 0, 0], z), O)));
            for (let z = Math.PI + V; z <= Math.PI * 2 + V; z += Math.PI / 16)
                $.push(hn(I, In(vr([1, 0, 0], z), N)));
            return $.push($[0]),
            $
        }
        const i = []
          , o = [];
        let s = 0
          , a = 0
          , l = 0
          , c = 0;
        for (let A = 1; A < r - 1; A++) {
            const I = n[A - 1]
              , O = n[A]
              , N = n[A + 1];
            let $ = O[2];
            const V = Qd(I, O);
            c += V,
            s = a + (V - a) * .2;
            const z = this.getSize(t, $, A, r, c);
            if (z === 0) {
                l = A + 1;
                continue
            }
            const j = ud(eg(I, O))
              , re = ud(eg(N, O))
              , se = vr(j, Math.PI / 2)
              , ae = vr(j, -Math.PI / 2)
              , q = vr(re, Math.PI / 2)
              , K = vr(re, -Math.PI / 2)
              , G = hn(O, In(se, z))
              , H = hn(O, In(ae, z))
              , J = hn(O, In(q, z))
              , te = hn(O, In(K, z))
              , oe = hn(se, K)
              , de = hn(ae, q)
              , pe = hn(O, In(HM(oe) === 0 ? j : ud(oe), z))
              , be = hn(O, In(HM(de) === 0 ? re : ud(de), z))
              , tt = UM($M(O, I, N))
              , Je = sl.constants.cornerDetectionMaxAngle / 180 * Math.PI * sl.constants.cornerDetectionVariance(s);
            if (Math.abs(tt) < Je) {
                const nt = Math.abs(UM(Math.PI - tt));
                if (nt === 0)
                    continue;
                if (tt < 0) {
                    o.push(H, be);
                    for (let ot = 0; ot <= nt; ot += nt / 4)
                        i.push(hn(O, vr(In(se, z), ot)));
                    for (let ot = nt; ot >= 0; ot -= nt / 4)
                        o.push(hn(O, vr(In(se, z), ot)));
                    o.push(be, J)
                } else {
                    i.push(G, pe);
                    for (let ot = 0; ot <= nt; ot += nt / 4)
                        o.push(hn(O, vr(In(se, -z), -ot)));
                    for (let ot = nt; ot >= 0; ot -= nt / 4)
                        i.push(hn(O, vr(In(se, -z), -ot)));
                    i.push(pe, te)
                }
            } else
                i.push(pe),
                o.push(be);
            a = s
        }
        if (l >= r - 2)
            if (this.options.keepHead) {
                const A = n[r - 1]
                  , I = [];
                for (let O = 0; O <= Math.PI * 2; O += Math.PI / 16)
                    I.push(hn(A, In(vr([1, 0, 0], O), this.options.size)));
                return I.push(hn(A, In([1, 0, 0], this.options.size))),
                I
            } else
                return [];
        const u = n[l]
          , f = n[l + 1]
          , h = n[r - 2]
          , m = n[r - 1]
          , v = ud(eg(f, u))
          , y = ud(eg(h, m))
          , E = vr(v, -Math.PI / 2)
          , b = vr(y, Math.PI / 2)
          , _ = this.getSize(t, u[2], 0, r, 0)
          , x = []
          , C = this.options.keepHead ? this.options.size : this.getSize(t, h[2], r - 2, r, c)
          , P = [];
        if (_ > 1) {
            for (let A = 0; A <= Math.PI; A += Math.PI / 16)
                x.unshift(hn(u, vr(In(E, _), -A)));
            x.unshift(hn(u, In(E, -_)))
        } else
            x.push(u);
        for (let A = 0; A <= Math.PI * 3; A += Math.PI / 16)
            P.push(hn(m, vr(In(b, -C), -A)));
        const M = [...x, ...i, ...P.reverse(), ...o.reverse()];
        return x.length > 0 && M.push(x[0]),
        this.options.simplify > 0 && this.options.simplifyPhase === "output" ? tv(M, this.options.simplify) : M
    }
}
;
sl.defaults = {
    size: 2,
    streamline: .45,
    simplify: .1,
    simplifyPhase: "output",
    keepHead: !1,
    sizeMapping: ()=>1
},
sl.constants = {
    cornerDetectionMaxAngle: 75,
    cornerDetectionVariance: t=>t > 35 ? .5 : 1,
    maxTailLength: 50
};
let nv = sl;
class ox {
    constructor(t, n, r) {
        D(this, "currentTrail");
        D(this, "pastTrails", []);
        D(this, "container");
        D(this, "trailElement");
        this.animationFrameHandler = t,
        this.app = n,
        this.options = r,
        this.animationFrameHandler.register(this, this.onFrame.bind(this)),
        this.trailElement = document.createElementNS($t, "path")
    }
    get hasCurrentTrail() {
        return !!this.currentTrail
    }
    hasLastPoint(t, n) {
        if (this.currentTrail) {
            const r = this.currentTrail.originalPoints.length;
            return this.currentTrail.originalPoints[r - 1][0] === t && this.currentTrail.originalPoints[r - 1][1] === n
        }
        return !1
    }
    start(t) {
        t && (this.container = t),
        this.trailElement.parentNode !== this.container && this.container && this.container.appendChild(this.trailElement),
        this.animationFrameHandler.start(this)
    }
    stop() {
        var t;
        this.animationFrameHandler.stop(this),
        this.trailElement.parentNode === this.container && ((t = this.container) == null || t.removeChild(this.trailElement))
    }
    startPath(t, n) {
        this.currentTrail = new nv(this.options),
        this.currentTrail.addPoint([t, n, performance.now()]),
        this.update()
    }
    addPointToPath(t, n) {
        this.currentTrail && (this.currentTrail.addPoint([t, n, performance.now()]),
        this.update())
    }
    endPath() {
        this.currentTrail && (this.currentTrail.close(),
        this.currentTrail.options.keepHead = !1,
        this.pastTrails.push(this.currentTrail),
        this.currentTrail = void 0,
        this.update())
    }
    update() {
        this.start()
    }
    onFrame() {
        const t = [];
        for (const r of this.pastTrails)
            t.push(this.drawTrail(r, this.app.state));
        if (this.currentTrail) {
            const r = this.drawTrail(this.currentTrail, this.app.state);
            t.push(r)
        }
        this.pastTrails = this.pastTrails.filter(r=>r.getStrokeOutline().length !== 0),
        t.length === 0 && this.stop();
        const n = t.join(" ").trim();
        this.trailElement.setAttribute("d", n),
        this.trailElement.setAttribute("fill", (this.options.fill ?? (()=>"black"))(this))
    }
    drawTrail(t, n) {
        const r = t.getStrokeOutline(t.options.size / n.zoom.value).map(([i,o])=>{
            const s = Bo({
                sceneX: i,
                sceneY: o
            }, n);
            return [s.x, s.y]
        }
        );
        return fJ(r, !0)
    }
}
class Y1e {
    constructor(t, n) {
        D(this, "localTrail");
        D(this, "collabTrails", new Map);
        D(this, "container");
        this.animationFrameHandler = t,
        this.app = n,
        this.animationFrameHandler.register(this, this.onFrame.bind(this)),
        this.localTrail = new ox(t,n,{
            ...this.getTrailOptions(),
            fill: ()=>pq
        })
    }
    getTrailOptions() {
        return {
            simplify: 0,
            streamline: .4,
            sizeMapping: t=>{
                const i = Math.max(0, 1 - (performance.now() - t.pressure) / 1e3)
                  , o = (50 - Math.min(50, t.totalLength - t.currentIndex)) / 50;
                return Math.min(Kc(o), Kc(i))
            }
        }
    }
    startPath(t, n) {
        this.localTrail.startPath(t, n)
    }
    addPointToPath(t, n) {
        this.localTrail.addPointToPath(t, n)
    }
    endPath() {
        this.localTrail.endPath()
    }
    start(t) {
        this.container = t,
        this.animationFrameHandler.start(this),
        this.localTrail.start(t)
    }
    stop() {
        this.animationFrameHandler.stop(this),
        this.localTrail.stop()
    }
    onFrame() {
        this.updateCollabTrails()
    }
    updateCollabTrails() {
        if (!(!this.container || this.app.state.collaborators.size === 0)) {
            for (const [t,n] of this.app.state.collaborators.entries()) {
                let r;
                this.collabTrails.has(t) ? r = this.collabTrails.get(t) : (r = new ox(this.animationFrameHandler,this.app,{
                    ...this.getTrailOptions(),
                    fill: ()=>{
                        var i;
                        return ((i = n.pointer) == null ? void 0 : i.laserColor) || by(t, n)
                    }
                }),
                r.start(this.container),
                this.collabTrails.set(t, r)),
                n.pointer && n.pointer.tool === "laser" && (n.button === "down" && !r.hasCurrentTrail && r.startPath(n.pointer.x, n.pointer.y),
                n.button === "down" && r.hasCurrentTrail && !r.hasLastPoint(n.pointer.x, n.pointer.y) && r.addPointToPath(n.pointer.x, n.pointer.y),
                n.button === "up" && r.hasCurrentTrail && (r.addPointToPath(n.pointer.x, n.pointer.y),
                r.endPath()))
            }
            for (const t of this.collabTrails.keys())
                this.app.state.collaborators.has(t) || (this.collabTrails.get(t).stop(),
                this.collabTrails.delete(t))
        }
    }
}
const j1e = (e,t,n,r,i,o)=>{
    const {zoom: s} = r
      , a = 180 * n / Math.PI;
    let l = e * (s.value - 1) / 2
      , c = t * (s.value - 1) / 2;
    return e > i && s.value !== 1 && (l = i * (s.value - 1) / 2),
    t > o && s.value !== 1 && (c = o * (s.value - 1) / 2),
    `translate(${l}px, ${c}px) scale(${s.value}) rotate(${a}deg)`
}
  , K1e = ({id: e, onChange: t, onSubmit: n, getViewportCoords: r, element: i, canvas: o, excalidrawContainer: s, app: a, autoSelect: l=!0})=>{
    const c = (z,j)=>{
        if (!j.style.fontFamily || !j.style.fontSize)
            return !1;
        const re = j.style.fontFamily.replace(/"/g, "");
        return Bp({
            fontFamily: z.fontFamily
        }) !== re || `${z.fontSize}px` !== j.style.fontSize
    }
      , u = ()=>{
        var q;
        const z = a.state
          , j = (q = hi.getScene(i)) == null ? void 0 : q.getElement(e);
        if (!j)
            return;
        const {textAlign: re, verticalAlign: se} = j
          , ae = a.scene.getNonDeletedElementsMap();
        if (j && ye(j)) {
            let K = j.x
              , G = j.y;
            const H = Hr(j, a.scene.getNonDeletedElementsMap());
            let J = j.width
              , te = j.height
              , oe = j.width
              , de = j.height;
            if (H && j.containerId) {
                if (Be(H)) {
                    const kr = ke.getBoundTextElementPosition(H, j, ae);
                    K = kr.x,
                    G = kr.y
                }
                const Wt = c(j, f);
                let fr;
                if (Wt ? fr = O2(H.id, H.height) : (fr = bf[H.id],
                fr || (fr = O2(H.id, H.height))),
                oe = jo(H, j),
                de = Xp(H, j),
                !Be(H) && te > de) {
                    const kr = Eu(te, H.type);
                    ue(H, {
                        height: kr
                    });
                    return
                } else if (!Be(H) && H.height > fr.height && te < de) {
                    const kr = Eu(te, H.type);
                    ue(H, {
                        height: kr
                    })
                } else {
                    const {y: kr} = oy(H, j, ae);
                    G = kr
                }
            }
            const [pe,be] = r(K, G)
              , tt = f.selectionStart
              , Je = f.selectionEnd
              , nt = f.value.length;
            if (tt === Je && Je !== nt) {
                const Wt = nt - Je;
                f.selectionStart = f.value.length - Wt,
                f.selectionEnd = f.value.length - Wt
            }
            H ? J += .5 : (oe = (z.width - 8 - pe) / z.zoom.value,
            J = Math.min(J, oe)),
            te *= 1.05;
            const ot = Ht(j)
              , kt = uq ? 0 : Math.ceil(j.fontSize / 2)
              , dr = (z.height - be) / z.zoom.value;
            Object.assign(f.style, {
                font: ot,
                lineHeight: j.lineHeight,
                width: `${J}px`,
                height: `${te}px`,
                left: `${pe - kt}px`,
                top: `${be}px`,
                transform: j1e(J, te, Kae(j, H), z, oe, dr),
                padding: `0 ${kt}px`,
                textAlign: re,
                verticalAlign: se,
                color: j.strokeColor,
                opacity: j.opacity / 100,
                filter: "var(--theme-filter)",
                maxHeight: `${dr}px`
            }),
            f.scrollTop = 0,
            ue(j, {
                x: K,
                y: G
            })
        }
    }
      , f = document.createElement("textarea");
    f.dir = "auto",
    f.tabIndex = 0,
    f.dataset.type = "wysiwyg",
    f.wrap = "off",
    f.classList.add("excalidraw-wysiwyg");
    let h = "pre"
      , m = "normal";
    (Sn(i) || !i.autoResize) && (h = "pre-wrap",
    m = "break-word"),
    Object.assign(f.style, {
        position: "absolute",
        display: "inline-block",
        minHeight: "1em",
        backfaceVisibility: "hidden",
        margin: 0,
        border: 0,
        outline: 0,
        resize: "none",
        background: "transparent",
        overflow: "hidden",
        zIndex: "var(--zIndex-wysiwyg)",
        wordBreak: m,
        whiteSpace: h,
        overflowWrap: "break-word",
        boxSizing: "content-box"
    }),
    f.value = i.originalText,
    u(),
    t && (f.onpaste = async z=>{
        const j = await YO(z, !0);
        if (!j.text)
            return;
        const re = _f(j.text);
        if (!re)
            return;
        const se = Hr(i, a.scene.getNonDeletedElementsMap())
          , ae = Ht({
            fontSize: a.state.currentItemFontSize,
            fontFamily: a.state.currentItemFontFamily
        });
        if (se) {
            const q = Ge(se, a.scene.getNonDeletedElementsMap())
              , K = Ru(`${f.value}${re}`, ae, jo(se, q))
              , G = _4(K, ae, !0);
            f.style.width = `${G}px`
        }
    }
    ,
    f.oninput = ()=>{
        const z = _f(f.value);
        if (f.value !== z) {
            const j = f.selectionStart;
            f.value = z,
            f.selectionStart = j,
            f.selectionEnd = j
        }
        t(f.value)
    }
    ),
    f.onkeydown = z=>{
        if (!z.shiftKey && PA.keyTest(z))
            z.preventDefault(),
            a.actionManager.executeAction(PA),
            u();
        else if (!z.shiftKey && RA.keyTest(z))
            z.preventDefault(),
            a.actionManager.executeAction(RA),
            u();
        else if (AA.keyTest(z))
            a.actionManager.executeAction(AA);
        else if (MA.keyTest(z))
            a.actionManager.executeAction(MA);
        else if (z.key === U.ESCAPE)
            z.preventDefault(),
            P = !0,
            M();
        else if (z.key === U.ENTER && z[U.CTRL_OR_CMD]) {
            if (z.preventDefault(),
            z.isComposing || z.keyCode === 229)
                return;
            P = !0,
            M()
        } else if (z.key === U.TAB || z[U.CTRL_OR_CMD] && (z.code === pt.BRACKET_LEFT || z.code === pt.BRACKET_RIGHT)) {
            if (z.preventDefault(),
            z.isComposing)
                return;
            z.shiftKey || z.code === pt.BRACKET_LEFT ? _() : b(),
            f.dispatchEvent(new Event("input"))
        }
    }
    ;
    const v = 4
      , y = " ".repeat(v)
      , E = new RegExp(`^ {1,${v}}`)
      , b = ()=>{
        const {selectionStart: z, selectionEnd: j} = f
          , re = x();
        let se = f.value;
        re.forEach(ae=>{
            const q = se.slice(0, ae)
              , K = se.slice(ae);
            se = `${q}${y}${K}`
        }
        ),
        f.value = se,
        f.selectionStart = z + v,
        f.selectionEnd = j + v * re.length
    }
      , _ = ()=>{
        const {selectionStart: z, selectionEnd: j} = f
          , re = x()
          , se = [];
        let ae = f.value;
        re.forEach(q=>{
            const K = ae.slice(q, q + v).match(E);
            if (K) {
                const G = ae.slice(0, q)
                  , H = ae.slice(q + K[0].length);
                ae = `${G}${H}`,
                se.push(q)
            }
        }
        ),
        f.value = ae,
        se.length && (z > se[se.length - 1] ? f.selectionStart = Math.max(z - v, se[se.length - 1]) : f.selectionStart = z,
        f.selectionEnd = Math.max(f.selectionStart, j - v * se.length))
    }
      , x = ()=>{
        let {selectionStart: z, selectionEnd: j, value: re} = f;
        const se = re.slice(0, z).match(/[^\n]*$/)[0].length;
        return z = z - se,
        re.slice(z, j).split(`
`).reduce((q,K,G,H)=>q.concat(G ? q[G - 1] + H[G - 1].length + 1 : z), []).reverse()
    }
      , C = z=>{
        z.target instanceof HTMLCanvasElement && (z.preventDefault(),
        z.stopPropagation())
    }
    ;
    let P = !1;
    const M = ()=>{
        var re, se;
        if ($)
            return;
        $ = !0,
        A();
        const z = (re = hi.getScene(i)) == null ? void 0 : re.getElement(i.id);
        if (!z)
            return;
        const j = Hr(z, a.scene.getNonDeletedElementsMap());
        if (j) {
            if (f.value.trim()) {
                const ae = jl(j);
                !ae || ae !== i.id ? ue(j, {
                    boundElements: (j.boundElements || []).concat({
                        type: "text",
                        id: i.id
                    })
                }) : Be(j) && sy(j)
            } else
                ue(j, {
                    boundElements: (se = j.boundElements) == null ? void 0 : se.filter(ae=>!ye(ae))
                });
            Wr(z, j, a.scene.getNonDeletedElementsMap())
        }
        n({
            viaKeyboard: P,
            nextOriginalText: f.value
        })
    }
      , A = ()=>{
        f.onblur = null,
        f.oninput = null,
        f.onkeydown = null,
        V && V.disconnect(),
        window.removeEventListener("resize", u),
        window.removeEventListener("wheel", C, !0),
        window.removeEventListener("pointerdown", O),
        window.removeEventListener("pointerup", I),
        window.removeEventListener("blur", M),
        window.removeEventListener("beforeunload", M),
        N(),
        f.remove()
    }
      , I = z=>{
        window.removeEventListener("pointerup", I);
        const j = z == null ? void 0 : z.target
          , re = j instanceof HTMLElement && j.classList.contains("properties-trigger");
        setTimeout(()=>{
            f.onblur = M,
            re || f.focus()
        }
        )
    }
      , O = z=>{
        const j = z == null ? void 0 : z.target
          , re = j instanceof HTMLElement && j.classList.contains("properties-trigger");
        (z.target instanceof HTMLElement || z.target instanceof SVGElement) && z.target.closest(`.${HP.SHAPE_ACTIONS_MENU}`) && !Cc(z.target) || re ? (f.onblur = null,
        window.addEventListener("pointerup", I),
        window.addEventListener("blur", M)) : z.target instanceof HTMLElement && z.target instanceof HTMLCanvasElement && !cJ() && requestAnimationFrame(()=>{
            M()
        }
        )
    }
      , N = hi.getScene(i).onUpdate(()=>{
        var j;
        u(),
        !!((j = document.activeElement) != null && j.closest(".properties-content")) || f.focus()
    }
    );
    let $ = !1;
    l && f.select(),
    I();
    let V = null;
    o && "ResizeObserver"in window ? (V = new window.ResizeObserver(()=>{
        u()
    }
    ),
    V.observe(o)) : window.addEventListener("resize", u),
    f.onpointerdown = z=>z.stopPropagation(),
    requestAnimationFrame(()=>{
        window.addEventListener("pointerdown", O, {
            capture: !0
        })
    }
    ),
    window.addEventListener("wheel", C, {
        passive: !1,
        capture: !0
    }),
    window.addEventListener("beforeunload", M),
    s == null || s.querySelector(".excalidraw-textEditorContainer").appendChild(f)
}
  , X1e = we({
    name: "autoResize",
    label: "labels.autoResize",
    icon: null,
    trackEvent: {
        category: "element"
    },
    predicate: (e,t,n,r)=>{
        const i = dt(e, t);
        return i.length === 1 && ye(i[0]) && !i[0].autoResize
    }
    ,
    perform: (e,t,n,r)=>{
        const i = dt(e, t);
        return {
            appState: t,
            elements: e.map(o=>{
                if (o.id === i[0].id && ye(o)) {
                    const s = Oi(o.originalText, Ht(o), o.lineHeight);
                    return Ne(o, {
                        autoResize: !0,
                        width: s.width,
                        height: s.height,
                        text: o.originalText
                    })
                }
                return o
            }
            ),
            storeAction: ee.CAPTURE
        }
    }
})
  , Z1e = e=>{
    const t = ["flowchart", "graph", "sequenceDiagram", "classDiagram", "stateDiagram", "stateDiagram-v2", "erDiagram", "journey", "gantt", "pie", "quadrantChart", "requirementDiagram", "gitGraph", "C4Context", "mindmap", "timeline", "zenuml", "sankey", "xychart", "block"];
    return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map(r=>`\\s*${r}(-beta)?`).join("|")})\\b`).test(e.trim())
}
  , Pz = ve.createContext(null)
  , Rz = ve.createContext(null)
  , Dz = {
    viewport: {
        isMobile: !1,
        isLandscape: !1
    },
    editor: {
        isMobile: !1,
        canFitSidebar: !1
    },
    isTouchScreen: !1
}
  , u5 = ve.createContext(Dz);
u5.displayName = "DeviceContext";
const d5 = ve.createContext({
    container: null,
    id: null
});
d5.displayName = "ExcalidrawContainerContext";
const f5 = ve.createContext([]);
f5.displayName = "ExcalidrawElementsContext";
const h5 = ve.createContext({
    ...ho(),
    width: 0,
    height: 0,
    offsetLeft: 0,
    offsetTop: 0
});
h5.displayName = "ExcalidrawAppStateContext";
const g5 = ve.createContext(()=>{
    console.warn("Uninitialized ExcalidrawSetAppStateContext context!")
}
);
g5.displayName = "ExcalidrawSetAppStateContext";
const p5 = ve.createContext(null);
p5.displayName = "ExcalidrawActionManagerContext";
const Ba = ()=>T.useContext(Pz)
  , i1 = ()=>T.useContext(Rz)
  , ur = ()=>T.useContext(u5)
  , Ns = ()=>T.useContext(d5)
  , Iy = ()=>T.useContext(f5)
  , o1 = ()=>T.useContext(h5)
  , Gn = ()=>T.useContext(g5)
  , zi = ()=>T.useContext(p5);
let Rh = !1
  , Ab = 0
  , pc = !1
  , Dh = !1
  , Mb = !1
  , Lb = {
    horizontal: null,
    vertical: null
}
  , qa = 0
  , Oh = !1;
const Pb = new Map;
let $0 = !1
  , WM = 0
  , GM = !1
  , mc = null;
const mt = {
    pointers: new Map,
    lastCenter: null,
    initialDistance: null,
    initialScale: null
};
class m5 extends ve.Component {
    constructor(n) {
        super(n);
        D(this, "canvas");
        D(this, "interactiveCanvas", null);
        D(this, "rc");
        D(this, "unmounted", !1);
        D(this, "actionManager");
        D(this, "device", Dz);
        D(this, "excalidrawContainerRef", ve.createRef());
        D(this, "scene");
        D(this, "fonts");
        D(this, "renderer");
        D(this, "resizeObserver");
        D(this, "nearestScrollableContainer");
        D(this, "library");
        D(this, "libraryItemsFromStorage");
        D(this, "id");
        D(this, "store");
        D(this, "history");
        D(this, "excalidrawContainerValue");
        D(this, "files", {});
        D(this, "imageCache", new Map);
        D(this, "iFrameRefs", new Map);
        D(this, "embedsValidationStatus", new Map);
        D(this, "initializedEmbeds", new Set);
        D(this, "elementsPendingErasure", new Set);
        D(this, "flowChartCreator", new Qhe);
        D(this, "flowChartNavigator", new qhe);
        D(this, "hitLinkElement");
        D(this, "lastPointerDownEvent", null);
        D(this, "lastPointerUpEvent", null);
        D(this, "lastPointerMoveEvent", null);
        D(this, "lastViewportPosition", {
            x: 0,
            y: 0
        });
        D(this, "animationFrameHandler", new z1e);
        D(this, "laserTrails", new Y1e(this.animationFrameHandler,this));
        D(this, "eraserTrail", new ox(this.animationFrameHandler,this,{
            streamline: .2,
            size: 5,
            keepHead: !0,
            sizeMapping: n=>{
                const o = Math.max(0, 1 - (performance.now() - n.pressure) / 200)
                  , s = (10 - Math.min(10, n.totalLength - n.currentIndex)) / 10;
                return Math.min(Kc(s), Kc(o))
            }
            ,
            fill: ()=>this.state.theme === Oe.LIGHT ? "rgba(0, 0, 0, 0.2)" : "rgba(255, 255, 255, 0.2)"
        }));
        D(this, "onChangeEmitter", new hs);
        D(this, "onPointerDownEmitter", new hs);
        D(this, "onPointerUpEmitter", new hs);
        D(this, "onUserFollowEmitter", new hs);
        D(this, "onScrollChangeEmitter", new hs);
        D(this, "missingPointerEventCleanupEmitter", new hs);
        D(this, "onRemoveEventListenersEmitter", new hs);
        D(this, "getEffectiveGridSize", ()=>xp(this) ? this.state.gridSize : null);
        D(this, "updateEmbedValidationStatus", (n,r)=>{
            this.embedsValidationStatus.set(n.id, r),
            Yt.delete(n)
        }
        );
        D(this, "updateEmbeddables", ()=>{
            const n = new Set;
            let r = !1;
            this.scene.getNonDeletedElements().filter(i=>{
                if (Br(i)) {
                    if (n.add(i.id),
                    !this.embedsValidationStatus.has(i.id)) {
                        r = !0;
                        const o = ym(i.link, this.props.validateEmbeddable);
                        this.updateEmbedValidationStatus(i, o)
                    }
                } else
                    rl(i) && n.add(i.id);
                return !1
            }
            ),
            r && this.scene.triggerUpdate(),
            this.iFrameRefs.forEach((i,o)=>{
                n.has(o) || this.iFrameRefs.delete(o)
            }
            )
        }
        );
        D(this, "getFrameNameDOMId", n=>`${this.id}-frame-name-${n.id}`);
        D(this, "frameNameBoundsCache", {
            get: n=>{
                let r = this.frameNameBoundsCache._cache.get(n.id);
                if (!r || r.zoom !== this.state.zoom.value || r.versionNonce !== n.versionNonce) {
                    const i = document.getElementById(this.getFrameNameDOMId(n));
                    if (i) {
                        const o = i.getBoundingClientRect()
                          , s = zt({
                            clientX: o.x,
                            clientY: o.y
                        }, this.state)
                          , a = zt({
                            clientX: o.right,
                            clientY: o.bottom
                        }, this.state);
                        return r = {
                            x: s.x,
                            y: s.y,
                            width: a.x - s.x,
                            height: a.y - s.y,
                            angle: 0,
                            zoom: this.state.zoom.value,
                            versionNonce: n.versionNonce
                        },
                        this.frameNameBoundsCache._cache.set(n.id, r),
                        r
                    }
                    return null
                }
                return r
            }
            ,
            _cache: new Map
        });
        D(this, "renderFrameNames", ()=>{
            if (!this.state.frameRendering.enabled || !this.state.frameRendering.name)
                return null;
            const n = this.state.theme === Oe.DARK;
            return this.scene.getNonDeletedFramesLikes().map(r=>{
                if (!N2(r, this.canvas.width / window.devicePixelRatio, this.canvas.height / window.devicePixelRatio, {
                    offsetLeft: this.state.offsetLeft,
                    offsetTop: this.state.offsetTop,
                    scrollX: this.state.scrollX,
                    scrollY: this.state.scrollY,
                    zoom: this.state.zoom
                }, this.scene.getNonDeletedElementsMap()))
                    return null;
                const {x: i, y: o} = Bo({
                    sceneX: r.x,
                    sceneY: r.y
                }, this.state)
                  , s = 6
                  , a = ()=>{
                    var u;
                    ue(r, {
                        name: ((u = r.name) == null ? void 0 : u.trim()) || null
                    }),
                    this.setState({
                        editingFrame: null
                    })
                }
                ;
                let l;
                const c = nN(r);
                if (r.id === this.state.editingFrame) {
                    const u = c;
                    l = g("input", {
                        autoFocus: !0,
                        value: u,
                        onChange: f=>{
                            ue(r, {
                                name: f.target.value
                            })
                        }
                        ,
                        onFocus: f=>f.target.select(),
                        onBlur: ()=>a(),
                        onKeyDown: f=>{
                            (f.key === U.ESCAPE || f.key === U.ENTER) && a()
                        }
                        ,
                        style: {
                            background: this.state.viewBackgroundColor,
                            filter: n ? y6 : "none",
                            zIndex: 2,
                            border: "none",
                            display: "block",
                            padding: `${s}px`,
                            borderRadius: 4,
                            boxShadow: "inset 0 0 0 1px var(--color-primary)",
                            fontFamily: "Assistant",
                            fontSize: "14px",
                            transform: `translate(-${s}px, ${s}px)`,
                            color: "var(--color-gray-80)",
                            overflow: "hidden",
                            maxWidth: `${document.body.clientWidth - i - s}px`
                        },
                        size: u.length + 1 || 1,
                        dir: "auto",
                        autoComplete: "off",
                        autoCapitalize: "off",
                        autoCorrect: "off"
                    })
                } else
                    l = c;
                return g("div", {
                    id: this.getFrameNameDOMId(r),
                    style: {
                        position: "absolute",
                        bottom: `${this.state.height + pn.nameOffsetY - o + this.state.offsetTop}px`,
                        left: `${i - this.state.offsetLeft}px`,
                        zIndex: 2,
                        fontSize: pn.nameFontSize,
                        color: n ? pn.nameColorDarkTheme : pn.nameColorLightTheme,
                        lineHeight: pn.nameLineHeight,
                        width: "max-content",
                        maxWidth: `${r.width}px`,
                        overflow: r.id === this.state.editingFrame ? "visible" : "hidden",
                        whiteSpace: "nowrap",
                        textOverflow: "ellipsis",
                        cursor: It.MOVE,
                        pointerEvents: this.state.viewModeEnabled ? Ec.disabled : Ec.enabled
                    },
                    onPointerDown: u=>this.handleCanvasPointerDown(u),
                    onWheel: u=>this.handleWheel(u),
                    onContextMenu: this.handleCanvasContextMenu,
                    onDoubleClick: ()=>{
                        this.setState({
                            editingFrame: r.id
                        })
                    }
                    ,
                    children: l
                }, r.id)
            }
            )
        }
        );
        D(this, "focusContainer", ()=>{
            var n;
            (n = this.excalidrawContainerRef.current) == null || n.focus()
        }
        );
        D(this, "getSceneElementsIncludingDeleted", ()=>this.scene.getElementsIncludingDeleted());
        D(this, "getSceneElements", ()=>this.scene.getNonDeletedElements());
        D(this, "onInsertElements", n=>{
            this.addElementsFromPasteOrLibrary({
                elements: n,
                position: "center",
                files: null
            })
        }
        );
        D(this, "onExportImage", async(n,r,i)=>{
            at("export", n, "ui");
            const o = await wy(n, r, this.state, this.files, {
                exportBackground: this.state.exportBackground,
                name: this.getName(),
                viewBackgroundColor: this.state.viewBackgroundColor,
                exportingFrame: i.exportingFrame
            }).catch(JR).catch(s=>{
                console.error(s),
                this.setState({
                    errorMessage: s.message
                })
            }
            );
            this.state.exportEmbedScene && o && n4(o) && this.setState({
                fileHandle: o
            })
        }
        );
        D(this, "magicGenerations", new Map);
        D(this, "updateMagicGeneration", ({frameElement: n, data: r})=>{
            r.status === "pending" ? ue(n, {
                customData: {
                    generationData: void 0
                }
            }, !1) : ue(n, {
                customData: {
                    generationData: r
                }
            }, !1),
            this.magicGenerations.set(n.id, r),
            this.triggerRender()
        }
        );
        D(this, "OPENAI_KEY", ks.get(Pl.OAI_API_KEY));
        D(this, "OPENAI_KEY_IS_PERSISTED", ks.has(Pl.OAI_API_KEY) || !1);
        D(this, "onOpenAIKeyChange", (n,r)=>{
            if (this.OPENAI_KEY = n || null,
            r) {
                const i = ks.set(Pl.OAI_API_KEY, n);
                this.OPENAI_KEY_IS_PERSISTED = i
            } else
                this.OPENAI_KEY_IS_PERSISTED = !1
        }
        );
        D(this, "onMagicSettingsConfirm", (n,r,i)=>{
            if (this.OPENAI_KEY = n || null,
            this.onOpenAIKeyChange(this.OPENAI_KEY, r),
            i === "settings")
                return;
            const o = this.scene.getSelectedElements({
                selectedElementIds: this.state.selectedElementIds
            });
            n ? o.length ? this.onMagicframeToolSelect() : this.setActiveTool({
                type: "magicframe"
            }) : jh(o[0]) || this.setActiveTool({
                type: "magicframe"
            })
        }
        );
        D(this, "onMagicframeToolSelect", ()=>{
            if (!this.OPENAI_KEY) {
                this.setState({
                    openDialog: {
                        name: "settings",
                        tab: "diagram-to-code",
                        source: "tool"
                    }
                }),
                at("ai", "tool-select (missing key)", "d2c");
                return
            }
            const n = this.scene.getSelectedElements({
                selectedElementIds: this.state.selectedElementIds
            });
            if (n.length === 0)
                this.setActiveTool({
                    type: Fn.magicframe
                }),
                at("ai", "tool-select (empty-selection)", "d2c");
            else {
                const r = n.length === 1 && jh(n[0]) && n[0];
                if (!r && n.some(o=>Ue(o) || o.frameId)) {
                    this.setActiveTool({
                        type: Fn.magicframe
                    });
                    return
                }
                at("ai", "tool-select (existing selection)", "d2c");
                let i;
                if (r)
                    i = r;
                else {
                    const [o,s,a,l] = xt(n)
                      , c = 50;
                    i = E_({
                        ...pn,
                        x: o - c,
                        y: s - c,
                        width: a - o + c * 2,
                        height: l - s + c * 2,
                        opacity: 100,
                        locked: !1
                    }),
                    this.scene.insertElement(i);
                    for (const u of n)
                        ue(u, {
                            frameId: i.id
                        });
                    this.setState({
                        selectedElementIds: {
                            [i.id]: !0
                        }
                    })
                }
                this.onMagicFrameGenerate(i, "upstream")
            }
        }
        );
        D(this, "openEyeDropper", ({type: n})=>{
            Ss.set(my, {
                swapPreviewOnAlt: !0,
                colorPickerType: n === "stroke" ? "elementStroke" : "elementBackground",
                onSelect: (r,i)=>{
                    const o = n === "background" && i.altKey || n === "stroke" && !i.altKey;
                    !this.scene.getSelectedElements(this.state).length || this.state.activeTool.type !== "selection" ? o ? this.syncActionResult({
                        appState: {
                            ...this.state,
                            currentItemStrokeColor: r
                        },
                        storeAction: ee.CAPTURE
                    }) : this.syncActionResult({
                        appState: {
                            ...this.state,
                            currentItemBackgroundColor: r
                        },
                        storeAction: ee.CAPTURE
                    }) : this.updateScene({
                        elements: this.scene.getElementsIncludingDeleted().map(a=>this.state.selectedElementIds[a.id] ? Ne(a, {
                            [o ? "strokeColor" : "backgroundColor"]: r
                        }) : a),
                        storeAction: ee.CAPTURE
                    })
                }
                ,
                keepOpenOnAlt: !1
            })
        }
        );
        D(this, "dismissLinearEditor", ()=>{
            setTimeout(()=>{
                this.setState({
                    editingLinearElement: null
                })
            }
            )
        }
        );
        D(this, "syncActionResult", Xt(n=>{
            var o, s, a, l, c, u;
            if (this.unmounted || n === !1)
                return;
            n.storeAction === ee.UPDATE ? this.store.shouldUpdateSnapshot() : n.storeAction === ee.CAPTURE && this.store.shouldCaptureIncrement();
            let r = !1
              , i = null;
            if (n.elements && (this.scene.replaceAllElements(n.elements),
            r = !0),
            n.files && (this.files = n.replaceFiles ? n.files : {
                ...this.files,
                ...n.files
            },
            this.addNewImagesToImageCache()),
            n.appState || i || this.state.contextMenu) {
                let f = ((o = n == null ? void 0 : n.appState) == null ? void 0 : o.viewModeEnabled) || !1
                  , h = ((s = n == null ? void 0 : n.appState) == null ? void 0 : s.zenModeEnabled) || !1;
                const m = ((a = n == null ? void 0 : n.appState) == null ? void 0 : a.theme) || this.props.theme || Oe.LIGHT
                  , v = ((l = n == null ? void 0 : n.appState) == null ? void 0 : l.name) ?? this.state.name
                  , y = ((c = n == null ? void 0 : n.appState) == null ? void 0 : c.errorMessage) ?? this.state.errorMessage;
                typeof this.props.viewModeEnabled < "u" && (f = this.props.viewModeEnabled),
                typeof this.props.zenModeEnabled < "u" && (h = this.props.zenModeEnabled),
                i = ((u = n.appState) == null ? void 0 : u.editingElement) || null,
                n.elements && i && n.elements.forEach(E=>{
                    (i == null ? void 0 : i.id) === E.id && i !== E && R_(E) && (i = E)
                }
                ),
                i != null && i.isDeleted && (i = null),
                this.setState(E=>Object.assign(n.appState || {}, {
                    contextMenu: null,
                    editingElement: i,
                    viewModeEnabled: f,
                    zenModeEnabled: h,
                    theme: m,
                    name: v,
                    errorMessage: y
                })),
                r = !0
            }
            !r && n.storeAction !== ee.NONE && this.scene.triggerUpdate()
        }
        ));
        D(this, "onBlur", Xt(()=>{
            pc = !1,
            this.setState({
                isBindingEnabled: !0
            })
        }
        ));
        D(this, "onUnload", ()=>{
            this.onBlur()
        }
        );
        D(this, "disableEvent", n=>{
            n.preventDefault()
        }
        );
        D(this, "resetHistory", ()=>{
            this.history.clear()
        }
        );
        D(this, "resetStore", ()=>{
            this.store.clear()
        }
        );
        D(this, "resetScene", Xt(n=>{
            this.scene.replaceAllElements([]),
            this.setState(r=>({
                ...ho(),
                isLoading: n != null && n.resetLoadingState ? !1 : r.isLoading,
                theme: this.state.theme
            })),
            this.resetStore(),
            this.resetHistory()
        }
        ));
        D(this, "initializeScene", async()=>{
            var i;
            "launchQueue"in window && "LaunchParams"in window && window.launchQueue.setConsumer(async o=>{
                if (!o.files.length)
                    return;
                const s = o.files[0]
                  , a = await s.getFile();
                this.loadFileToCanvas(new File([a],a.name || "",{
                    type: a.type
                }), s)
            }
            ),
            this.props.theme && this.setState({
                theme: this.props.theme
            }),
            this.state.isLoading || this.setState({
                isLoading: !0
            });
            let n = null;
            try {
                typeof this.props.initialData == "function" ? n = await this.props.initialData() || null : n = await this.props.initialData || null,
                n != null && n.libraryItems && this.library.updateLibrary({
                    libraryItems: n.libraryItems,
                    merge: !0
                }).catch(o=>{
                    console.error(o)
                }
                )
            } catch (o) {
                console.error(o),
                n = {
                    appState: {
                        errorMessage: o.message || "Encountered an error during importing or restoring scene data"
                    }
                }
            }
            const r = pu(n, null, null, {
                repairBindings: !0
            });
            r.appState = {
                ...r.appState,
                theme: this.props.theme || r.appState.theme,
                openSidebar: ((i = r.appState) == null ? void 0 : i.openSidebar) || this.state.openSidebar,
                activeTool: r.appState.activeTool.type === "image" ? {
                    ...r.appState.activeTool,
                    type: "selection"
                } : r.appState.activeTool,
                isLoading: !1,
                toast: this.state.toast
            },
            n != null && n.scrollToContent && (r.appState = {
                ...r.appState,
                ...mp(r.elements, {
                    ...r.appState,
                    width: this.state.width,
                    height: this.state.height,
                    offsetTop: this.state.offsetTop,
                    offsetLeft: this.state.offsetLeft
                })
            }),
            this.resetStore(),
            this.resetHistory(),
            this.syncActionResult({
                ...r,
                storeAction: ee.UPDATE
            }),
            this.fonts.loadSceneFonts()
        }
        );
        D(this, "isMobileBreakpoint", (n,r)=>n < Tq || r < Mq && n < Aq);
        D(this, "refreshViewportBreakpoints", ()=>{
            if (!this.excalidrawContainerRef.current)
                return;
            const {clientWidth: r, clientHeight: i} = document.body
              , o = this.device.viewport
              , s = lm(o, {
                isLandscape: r > i,
                isMobile: this.isMobileBreakpoint(r, i)
            });
            return o !== s ? (this.device = {
                ...this.device,
                viewport: s
            },
            !0) : !1
        }
        );
        D(this, "refreshEditorBreakpoints", ()=>{
            const n = this.excalidrawContainerRef.current;
            if (!n)
                return;
            const {width: r, height: i} = n.getBoundingClientRect()
              , o = this.props.UIOptions.dockedSidebarBreakpoint != null ? this.props.UIOptions.dockedSidebarBreakpoint : Lq
              , s = this.device.editor
              , a = lm(s, {
                isMobile: this.isMobileBreakpoint(r, i),
                canFitSidebar: r > o
            });
            return s !== a ? (this.device = {
                ...this.device,
                editor: a
            },
            !0) : !1
        }
        );
        D(this, "onResize", Xt(()=>{
            this.scene.getElementsIncludingDeleted().forEach(n=>Yt.delete(n)),
            this.refreshViewportBreakpoints(),
            this.updateDOMRect(),
            O3 || this.refreshEditorBreakpoints(),
            this.setState({})
        }
        ));
        D(this, "onFullscreenChange", ()=>{
            var n;
            !document.fullscreenElement && ((n = this.state.activeEmbeddable) == null ? void 0 : n.state) === "active" && this.setState({
                activeEmbeddable: null
            })
        }
        );
        D(this, "renderInteractiveSceneCallback", ({atLeastOneVisibleElement: n, scrollBars: r, elementsMap: i})=>{
            r && (Lb = r);
            const o = ye(this.state.editingElement) ? !1 : !n && i.size > 0;
            this.state.scrolledOutside !== o && this.setState({
                scrolledOutside: o
            }),
            this.scheduleImageRefresh()
        }
        );
        D(this, "onScroll", Wl(()=>{
            const {offsetTop: n, offsetLeft: r} = this.getCanvasOffsets();
            this.setState(i=>i.offsetLeft === r && i.offsetTop === n ? null : {
                offsetTop: n,
                offsetLeft: r
            })
        }
        , Cq));
        D(this, "onCut", Xt(n=>{
            var i;
            !((i = this.excalidrawContainerRef.current) != null && i.contains(document.activeElement)) || Cc(n.target) || (this.actionManager.executeAction(zA, "keyboard", n),
            n.preventDefault(),
            n.stopPropagation())
        }
        ));
        D(this, "onCopy", Xt(n=>{
            var i;
            !((i = this.excalidrawContainerRef.current) != null && i.contains(document.activeElement)) || Cc(n.target) || (this.actionManager.executeAction(Cm, "keyboard", n),
            n.preventDefault(),
            n.stopPropagation())
        }
        ));
        D(this, "onTouchStart", n=>{
            if ($P && n.preventDefault(),
            !Rh) {
                Rh = !0,
                clearTimeout(Ab),
                Ab = window.setTimeout(m5.resetTapTwice, _q);
                return
            }
            if (Rh && n.touches.length === 1) {
                const r = n.touches[0];
                this.handleCanvasDoubleClick({
                    clientX: r.clientX,
                    clientY: r.clientY
                }),
                Rh = !1,
                clearTimeout(Ab)
            }
            n.touches.length === 2 && this.setState({
                selectedElementIds: vt({}, this.state),
                activeEmbeddable: null
            })
        }
        );
        D(this, "onTouchEnd", n=>{
            this.resetContextMenuTimer(),
            n.touches.length > 0 ? this.setState({
                previousSelectedElementIds: {},
                selectedElementIds: vt(this.state.previousSelectedElementIds, this.state)
            }) : mt.pointers.clear()
        }
        );
        D(this, "pasteFromClipboard", Xt(async n=>{
            var f, h;
            const r = !!$0
              , i = document.activeElement
              , o = (f = this.excalidrawContainerRef.current) == null ? void 0 : f.contains(i);
            if (n && !o)
                return;
            const s = document.elementFromPoint(this.lastViewportPosition.x, this.lastViewportPosition.y);
            if (n && (!(s instanceof HTMLCanvasElement) || Cc(i)))
                return;
            const {x: a, y: l} = zt({
                clientX: this.lastViewportPosition.x,
                clientY: this.lastViewportPosition.y
            }, this.state);
            let c = (h = n == null ? void 0 : n.clipboardData) == null ? void 0 : h.files[0];
            const u = await YO(n, r);
            if (!c && !r) {
                if (u.mixedContent)
                    return this.addElementsFromMixedContentPaste(u.mixedContent, {
                        isPlainPaste: r,
                        sceneX: a,
                        sceneY: l
                    });
                if (u.text) {
                    const m = u.text.trim();
                    m.startsWith("<svg") && m.endsWith("</svg>") && (c = h8(m))
                }
            }
            if (qc(c) && !u.spreadsheet) {
                if (!this.isToolSupported("image")) {
                    this.setState({
                        errorMessage: k("errors.imageToolNotSupported")
                    });
                    return
                }
                const m = this.createImageElement({
                    sceneX: a,
                    sceneY: l
                });
                this.insertImageElement(m, c),
                this.initializeImageDimensions(m),
                this.setState({
                    selectedElementIds: vt({
                        [m.id]: !0
                    }, this.state)
                });
                return
            }
            if (this.props.onPaste)
                try {
                    if (await this.props.onPaste(u, n) === !1)
                        return
                } catch (m) {
                    console.error(m)
                }
            if (u.errorMessage)
                this.setState({
                    errorMessage: u.errorMessage
                });
            else if (u.spreadsheet && !r)
                this.setState({
                    pasteDialog: {
                        data: u.spreadsheet,
                        shown: !0
                    }
                });
            else if (u.elements) {
                const m = u.programmaticAPI ? nx(u.elements) : u.elements;
                this.addElementsFromPasteOrLibrary({
                    elements: m,
                    files: u.files || null,
                    position: "cursor",
                    retainSeed: r
                })
            } else if (u.text) {
                if (u.text && Z1e(u.text)) {
                    const y = await _e(()=>import("./index-CBknaPf-.js").then(E=>E.b6), __vite__mapDeps([]));
                    try {
                        const {elements: E, files: b} = await y.parseMermaidToExcalidraw(u.text)
                          , _ = nx(E, {
                            regenerateIds: !0
                        });
                        this.addElementsFromPasteOrLibrary({
                            elements: _,
                            files: b,
                            position: "cursor"
                        });
                        return
                    } catch (E) {
                        console.warn(`parsing pasted text as mermaid definition failed: ${E.message}`)
                    }
                }
                const m = iD(u.text).split(/\n+/).map(y=>y.trim()).filter(Boolean)
                  , v = m.map(y=>Xoe(y)).filter(y=>{
                    var E;
                    return ym(y, this.props.validateEmbeddable) && (/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(y) || ((E = Nd(y)) == null ? void 0 : E.type) === "video")
                }
                );
                if (!$0 && v.length > 0 && v.length === m.length) {
                    const y = [];
                    for (const E of v) {
                        const b = y[y.length - 1]
                          , _ = this.insertEmbeddableElement({
                            sceneX: b ? b.x + b.width + 20 : a,
                            sceneY: l,
                            link: Is(E)
                        });
                        _ && y.push(_)
                    }
                    y.length && this.setState({
                        selectedElementIds: Object.fromEntries(y.map(E=>[E.id, !0]))
                    });
                    return
                }
                this.addTextFromPaste(u.text, r)
            }
            this.setActiveTool({
                type: "selection"
            }),
            n == null || n.preventDefault()
        }
        ));
        D(this, "addElementsFromPasteOrLibrary", n=>{
            const r = gu(n.elements, null, void 0)
              , [i,o,s,a] = xt(r)
              , l = xr(i, s) / 2
              , c = xr(o, a) / 2
              , u = typeof n.position == "object" ? n.position.clientX : n.position === "cursor" ? this.lastViewportPosition.x : this.state.width / 2 + this.state.offsetLeft
              , f = typeof n.position == "object" ? n.position.clientY : n.position === "cursor" ? this.lastViewportPosition.y : this.state.height / 2 + this.state.offsetTop
              , {x: h, y: m} = zt({
                clientX: u,
                clientY: f
            }, this.state)
              , v = h - l
              , y = m - c
              , [E,b] = er(v, y, this.getEffectiveGridSize())
              , _ = xO(r.map(A=>Ne(A, {
                x: A.x + E - i,
                y: A.y + b - o
            })), {
                randomizeSeed: !n.retainSeed
            })
              , C = [...this.scene.getElementsIncludingDeleted(), ..._];
            Ko(C, De(_));
            const P = this.getTopLayerFrameAtSceneCoords({
                x: h,
                y: m
            });
            if (P) {
                const A = Xse(_, P);
                bm(C, A, P)
            }
            this.scene.replaceAllElements(C),
            _.forEach(A=>{
                if (ye(A) && Sn(A)) {
                    const I = Hr(A, this.scene.getElementsMapIncludingDeleted());
                    Wr(A, I, this.scene.getElementsMapIncludingDeleted())
                }
            }
            ),
            n.files && (this.files = {
                ...this.files,
                ...n.files
            }),
            this.store.shouldCaptureIncrement();
            const M = ly(_);
            this.setState({
                ...this.state,
                openSidebar: this.state.openSidebar && this.device.editor.canFitSidebar && Ss.get(X4) ? this.state.openSidebar : null,
                ...Ii({
                    editingGroupId: null,
                    selectedElementIds: M.reduce((A,I)=>(Sn(I) || (A[I.id] = !0),
                    A), {})
                }, this.scene.getNonDeletedElements(), this.state, this)
            }, ()=>{
                n.files && this.addNewImagesToImageCache()
            }
            ),
            this.setActiveTool({
                type: "selection"
            }),
            n.fitToContent && this.scrollToContent(_, {
                fitToContent: !0
            })
        }
        );
        D(this, "setAppState", (n,r)=>{
            this.setState(n, r)
        }
        );
        D(this, "removePointer", n=>{
            qa && this.resetContextMenuTimer(),
            mt.pointers.delete(n.pointerId)
        }
        );
        D(this, "toggleLock", (n="ui")=>{
            this.state.activeTool.locked || at("toolbar", "toggleLock", `${n} (${this.device.editor.isMobile ? "mobile" : "desktop"})`),
            this.setState(r=>({
                activeTool: {
                    ...r.activeTool,
                    ...bn(this.state, r.activeTool.locked ? {
                        type: "selection"
                    } : r.activeTool),
                    locked: !r.activeTool.locked
                }
            }))
        }
        );
        D(this, "updateFrameRendering", n=>{
            this.setState(r=>{
                const i = typeof n == "function" ? n(r.frameRendering) : n;
                return {
                    frameRendering: {
                        enabled: (i == null ? void 0 : i.enabled) ?? r.frameRendering.enabled,
                        clip: (i == null ? void 0 : i.clip) ?? r.frameRendering.clip,
                        name: (i == null ? void 0 : i.name) ?? r.frameRendering.name,
                        outline: (i == null ? void 0 : i.outline) ?? r.frameRendering.outline
                    }
                }
            }
            )
        }
        );
        D(this, "togglePenMode", n=>{
            this.setState(r=>({
                penMode: n ?? !r.penMode,
                penDetected: !0
            }))
        }
        );
        D(this, "onHandToolToggle", ()=>{
            this.actionManager.executeAction(Cde)
        }
        );
        D(this, "zoomCanvas", n=>{
            this.setState({
                ...$c({
                    viewportX: this.state.width / 2 + this.state.offsetLeft,
                    viewportY: this.state.height / 2 + this.state.offsetTop,
                    nextZoom: bs(n)
                }, this.state)
            })
        }
        );
        D(this, "cancelInProgressAnimation", null);
        D(this, "scrollToContent", (n=this.scene.getNonDeletedElements(),r)=>{
            var l;
            (l = this.cancelInProgressAnimation) == null || l.call(this);
            const i = Array.isArray(n) ? n : [n];
            let o = this.state.zoom
              , s = this.state.scrollX
              , a = this.state.scrollY;
            if (r != null && r.fitToContent || r != null && r.fitToViewport) {
                const {appState: c} = vy({
                    targetElements: i,
                    appState: this.state,
                    fitToViewport: !!(r != null && r.fitToViewport),
                    viewportZoomFactor: r == null ? void 0 : r.viewportZoomFactor
                });
                o = c.zoom,
                s = c.scrollX,
                a = c.scrollY
            } else {
                const c = mp(i, this.state);
                s = c.scrollX,
                a = c.scrollY
            }
            if (r != null && r.animate) {
                const c = this.state.scrollX
                  , u = this.state.scrollY
                  , f = this.state.zoom.value
                  , h = eJ({
                    fromValues: {
                        scrollX: c,
                        scrollY: u,
                        zoom: f
                    },
                    toValues: {
                        scrollX: s,
                        scrollY: a,
                        zoom: o.value
                    },
                    interpolateValue: (m,v,y,E)=>{
                        if (E === "zoom")
                            return m * Math.pow(v / m, Kc(y))
                    }
                    ,
                    onStep: ({scrollX: m, scrollY: v, zoom: y})=>{
                        this.setState({
                            scrollX: m,
                            scrollY: v,
                            zoom: {
                                value: y
                            }
                        })
                    }
                    ,
                    onStart: ()=>{
                        this.setState({
                            shouldCacheIgnoreZoom: !0
                        })
                    }
                    ,
                    onEnd: ()=>{
                        this.setState({
                            shouldCacheIgnoreZoom: !1
                        })
                    }
                    ,
                    onCancel: ()=>{
                        this.setState({
                            shouldCacheIgnoreZoom: !1
                        })
                    }
                    ,
                    duration: (r == null ? void 0 : r.duration) ?? 500
                });
                this.cancelInProgressAnimation = ()=>{
                    h(),
                    this.cancelInProgressAnimation = null
                }
            } else
                this.setState({
                    scrollX: s,
                    scrollY: a,
                    zoom: o
                })
        }
        );
        D(this, "maybeUnfollowRemoteUser", ()=>{
            this.state.userToFollow && this.setState({
                userToFollow: null
            })
        }
        );
        D(this, "translateCanvas", n=>{
            var r;
            (r = this.cancelInProgressAnimation) == null || r.call(this),
            this.maybeUnfollowRemoteUser(),
            this.setState(n)
        }
        );
        D(this, "setToast", n=>{
            this.setState({
                toast: n
            })
        }
        );
        D(this, "restoreFileFromShare", async()=>{
            try {
                const n = await caches.open("web-share-target")
                  , r = await n.match("shared-file");
                if (r) {
                    const i = await r.blob()
                      , o = new File([i],i.name || "",{
                        type: i.type
                    });
                    this.loadFileToCanvas(o, null),
                    await n.delete("shared-file"),
                    window.history.replaceState(null, fa, window.location.pathname)
                }
            } catch (n) {
                this.setState({
                    errorMessage: n.message
                })
            }
        }
        );
        D(this, "addFiles", Xt(n=>{
            const r = n.reduce((i,o)=>(i.set(o.id, o),
            i), new Map);
            this.files = {
                ...this.files,
                ...Object.fromEntries(r)
            },
            this.scene.getNonDeletedElements().forEach(i=>{
                Hn(i) && r.has(i.fileId) && (this.imageCache.delete(i.fileId),
                Yt.delete(i))
            }
            ),
            this.scene.triggerUpdate(),
            this.addNewImagesToImageCache()
        }
        ));
        D(this, "updateScene", Xt(n=>{
            const r = ka(n.elements ?? []);
            if (n.storeAction && n.storeAction !== ee.NONE) {
                const i = this.store.snapshot.appState
                  , o = this.store.snapshot.elements
                  , s = n.appState ? Object.assign({}, i, n.appState) : i
                  , a = n.elements ? this.store.filterUncomittedElements(this.scene.getElementsMapIncludingDeleted(), De(r)) : o;
                n.storeAction === ee.CAPTURE ? this.store.captureIncrement(a, s) : n.storeAction === ee.UPDATE && this.store.updateSnapshot(a, s)
            }
            n.appState && this.setState(n.appState),
            n.elements && this.scene.replaceAllElements(r),
            n.collaborators && this.setState({
                collaborators: n.collaborators
            })
        }
        ));
        D(this, "triggerRender", n=>{
            n === !0 ? this.scene.triggerUpdate() : this.setState({})
        }
        );
        D(this, "toggleSidebar", ({name: n, tab: r, force: i})=>{
            var a, l;
            let o;
            i === void 0 ? o = ((a = this.state.openSidebar) == null ? void 0 : a.name) === n && ((l = this.state.openSidebar) == null ? void 0 : l.tab) === r ? null : n : o = i ? n : null;
            const s = o ? {
                name: o
            } : null;
            return s && r && (s.tab = r),
            this.setState({
                openSidebar: s
            }),
            !!o
        }
        );
        D(this, "updateCurrentCursorPosition", Xt(n=>{
            this.lastViewportPosition.x = n.clientX,
            this.lastViewportPosition.y = n.clientY
        }
        ));
        D(this, "getEditorUIOffsets", ()=>{
            var o, s, a, l, c, u, f, h, m, v, y, E;
            const n = ((l = (a = (s = (o = this.excalidrawContainerRef) == null ? void 0 : o.current) == null ? void 0 : s.querySelector(".App-toolbar")) == null ? void 0 : a.getBoundingClientRect()) == null ? void 0 : l.bottom) ?? 0
              , r = Math.max(((h = (f = (u = (c = this.excalidrawContainerRef) == null ? void 0 : c.current) == null ? void 0 : u.querySelector(".default-sidebar")) == null ? void 0 : f.getBoundingClientRect()) == null ? void 0 : h.width) ?? 0)
              , i = Math.max(((E = (y = (v = (m = this.excalidrawContainerRef) == null ? void 0 : m.current) == null ? void 0 : v.querySelector(".App-menu__left")) == null ? void 0 : y.getBoundingClientRect()) == null ? void 0 : E.width) ?? 0, 0);
            return uf().rtl ? {
                top: n,
                right: i,
                bottom: 0,
                left: r
            } : {
                top: n,
                right: r,
                bottom: 0,
                left: i
            }
        }
        );
        D(this, "onKeyDown", Xt(n=>{
            var s;
            if ("Proxy"in window && (!n.shiftKey && /^[A-Z]$/.test(n.key) || n.shiftKey && /^[a-z]$/.test(n.key)) && (n = new Proxy(n,{
                get(a, l) {
                    const c = a[l];
                    return typeof c == "function" ? c.bind(a) : l === "key" ? n.shiftKey ? a.key.toUpperCase() : a.key.toLowerCase() : c
                }
            })),
            !G3(n.target)) {
                if (n.key === U.ESCAPE && this.flowChartCreator.isCreatingChart) {
                    this.flowChartCreator.clear(),
                    this.triggerRender(!0);
                    return
                }
                const a = Zh(n.key);
                if (n[U.CTRL_OR_CMD] && a && !n.shiftKey) {
                    n.preventDefault();
                    const l = dt(this.scene.getNonDeletedElementsMap(), this.state);
                    l.length === 1 && Rv(l[0]) && this.flowChartCreator.createNodes(l[0], this.scene.getNonDeletedElementsMap(), this.state, cM(n.key)),
                    (s = this.flowChartCreator.pendingNodes) != null && s.length && !ab(this.flowChartCreator.pendingNodes, this.canvas.width / window.devicePixelRatio, this.canvas.height / window.devicePixelRatio, {
                        offsetLeft: this.state.offsetLeft,
                        offsetTop: this.state.offsetTop,
                        scrollX: this.state.scrollX,
                        scrollY: this.state.scrollY,
                        zoom: this.state.zoom
                    }, this.scene.getNonDeletedElementsMap(), this.getEditorUIOffsets()) && this.scrollToContent(this.flowChartCreator.pendingNodes, {
                        animate: !0,
                        duration: 300,
                        fitToContent: !0,
                        viewportZoomFactor: .8
                    });
                    return
                }
                if (n.altKey) {
                    const l = dt(this.scene.getNonDeletedElementsMap(), this.state);
                    if (l.length === 1 && a) {
                        n.preventDefault();
                        const c = this.flowChartNavigator.exploreByDirection(l[0], this.scene.getNonDeletedElementsMap(), cM(n.key));
                        if (c) {
                            this.setState(f=>({
                                selectedElementIds: vt({
                                    [c]: !0
                                }, f)
                            }));
                            const u = this.scene.getNonDeletedElementsMap().get(c);
                            u && !ab([u], this.canvas.width / window.devicePixelRatio, this.canvas.height / window.devicePixelRatio, {
                                offsetLeft: this.state.offsetLeft,
                                offsetTop: this.state.offsetTop,
                                scrollX: this.state.scrollX,
                                scrollY: this.state.scrollY,
                                zoom: this.state.zoom
                            }, this.scene.getNonDeletedElementsMap(), this.getEditorUIOffsets()) && this.scrollToContent(u, {
                                animate: !0,
                                duration: 300
                            })
                        }
                        return
                    }
                }
            }
            if (n[U.CTRL_OR_CMD] && n.key === U.P && !n.shiftKey && !n.altKey) {
                this.setToast({
                    message: k("commandPalette.shortcutHint", {
                        shortcut: gi("commandPalette")
                    })
                }),
                n.preventDefault();
                return
            }
            if (n[U.CTRL_OR_CMD] && n.key.toLowerCase() === U.V && ($0 = n.shiftKey,
            clearTimeout(WM),
            WM = window.setTimeout(()=>{
                $0 = !1
            }
            , 100)),
            n[U.CTRL_OR_CMD] && Cc(n.target) && (n.code === pt.MINUS || n.code === pt.EQUAL)) {
                n.preventDefault();
                return
            }
            if (Cc(n.target) && n.key !== U.ESCAPE || Zh(n.key) && G3(n.target))
                return;
            if (n.key === U.QUESTION_MARK) {
                this.setState({
                    openDialog: {
                        name: "help"
                    }
                });
                return
            } else if (n.key.toLowerCase() === U.E && n.shiftKey && n[U.CTRL_OR_CMD]) {
                n.preventDefault(),
                this.setState({
                    openDialog: {
                        name: "imageExport"
                    }
                });
                return
            }
            if (n.key === U.PAGE_UP || n.key === U.PAGE_DOWN) {
                let a = (n.shiftKey ? this.state.width : this.state.height) / this.state.zoom.value;
                n.key === U.PAGE_DOWN && (a = -a),
                n.shiftKey ? this.translateCanvas(l=>({
                    scrollX: l.scrollX + a
                })) : this.translateCanvas(l=>({
                    scrollY: l.scrollY + a
                }))
            }
            if (this.actionManager.handleKeyDown(n) || this.state.viewModeEnabled)
                return;
            if (n[U.CTRL_OR_CMD] && this.state.isBindingEnabled && this.setState({
                isBindingEnabled: !1
            }),
            Zh(n.key)) {
                const a = this.scene.getSelectedElements({
                    selectedElementIds: this.state.selectedElementIds,
                    includeBoundTextElement: !0,
                    includeElementsInFrames: !0
                })
                  , l = a.find(He)
                  , c = l ? l.startBinding || l.endBinding ? 0 : SE : this.getEffectiveGridSize() && (n.shiftKey ? SE : this.getEffectiveGridSize()) || (n.shiftKey ? hq : SE);
                let u = 0
                  , f = 0;
                n.key === U.ARROW_LEFT ? u = -c : n.key === U.ARROW_RIGHT ? u = c : n.key === U.ARROW_UP ? f = -c : n.key === U.ARROW_DOWN && (f = c),
                a.forEach(h=>{
                    ue(h, {
                        x: h.x + u,
                        y: h.y + f
                    }),
                    vo(h, this.scene.getNonDeletedElementsMap(), {
                        simultaneouslyUpdated: a
                    })
                }
                ),
                this.setState({
                    suggestedBindings: XE(a.filter(h=>h.id !== (l == null ? void 0 : l.id) || c !== 0), this.scene.getNonDeletedElementsMap())
                }),
                n.preventDefault()
            } else if (n.key === U.ENTER) {
                const a = this.scene.getSelectedElements(this.state);
                if (a.length === 1) {
                    const l = a[0];
                    if (n[U.CTRL_OR_CMD])
                        je(l) && (!this.state.editingLinearElement || this.state.editingLinearElement.elementId !== a[0].id) && (this.store.shouldCaptureIncrement(),
                        He(l) || this.setState({
                            editingLinearElement: new ke(l)
                        }));
                    else if (ye(l) || Qae(l)) {
                        let c;
                        ye(l) || (c = l);
                        const u = sb(l, this.state, this.scene.getNonDeletedElementsMap())
                          , f = u.x
                          , h = u.y;
                        this.startTextEditing({
                            sceneX: f,
                            sceneY: h,
                            container: c
                        }),
                        n.preventDefault();
                        return
                    } else
                        Ue(l) && this.setState({
                            editingFrame: l.id
                        })
                }
            } else if (!n.ctrlKey && !n.altKey && !n.metaKey && !this.state.newElement && !this.state.selectionElement && !this.state.selectedElementsAreBeingDragged) {
                const a = Cie(n.key);
                a ? (this.state.activeTool.type !== a && at("toolbar", a, `keyboard (${this.device.editor.isMobile ? "mobile" : "desktop"})`),
                a === "arrow" && this.state.activeTool.type === "arrow" && this.setState(l=>({
                    currentItemArrowType: l.currentItemArrowType === nr.sharp ? nr.round : l.currentItemArrowType === nr.round ? nr.elbow : nr.sharp
                })),
                this.setActiveTool({
                    type: a
                }),
                n.stopPropagation()) : n.key === U.Q && (this.toggleLock("keyboard"),
                n.stopPropagation())
            }
            if (n.key === U.SPACE && mt.pointers.size === 0 && (pc = !0,
            At(this.interactiveCanvas, It.GRAB),
            n.preventDefault()),
            (n.key === U.G || n.key === U.S) && !n.altKey && !n[U.CTRL_OR_CMD]) {
                const a = this.scene.getSelectedElements(this.state);
                if (this.state.activeTool.type === "selection" && !a.length)
                    return;
                n.key === U.G && (Ef(this.state.activeTool.type) || a.some(l=>Ef(l.type))) && (this.setState({
                    openPopup: "elementBackground"
                }),
                n.stopPropagation()),
                n.key === U.S && (this.setState({
                    openPopup: "elementStroke"
                }),
                n.stopPropagation())
            }
            if (!n[U.CTRL_OR_CMD] && n.shiftKey && n.key.toLowerCase() === U.F) {
                const a = this.scene.getSelectedElements(this.state);
                if (this.state.activeTool.type === "selection" && !a.length)
                    return;
                (this.state.activeTool.type === "text" || a.find(l=>ye(l) || Ge(l, this.scene.getNonDeletedElementsMap()))) && (n.preventDefault(),
                this.setState({
                    openPopup: "fontFamily"
                }))
            }
            if (n.key === U.K && !n.altKey && !n[U.CTRL_OR_CMD]) {
                this.state.activeTool.type === "laser" ? this.setActiveTool({
                    type: "selection"
                }) : this.setActiveTool({
                    type: "laser"
                });
                return
            }
            n[U.CTRL_OR_CMD] && (n.key === U.BACKSPACE || n.key === U.DELETE) && Ss.set(xy, "clearCanvas");
            const r = n.key.toLocaleLowerCase()
              , i = r === U.S && n.shiftKey
              , o = n.key === U.I || r === U.G && n.shiftKey;
            (i || o) && this.openEyeDropper({
                type: i ? "stroke" : "background"
            })
        }
        ));
        D(this, "onWheel", Xt(n=>{
            !(n.target instanceof HTMLCanvasElement) && n.ctrlKey && n.preventDefault()
        }
        ));
        D(this, "onKeyUp", Xt(n=>{
            var r, i, o;
            if (n.key === U.SPACE && (this.state.viewModeEnabled ? At(this.interactiveCanvas, It.GRAB) : this.state.activeTool.type === "selection" ? Ao(this.interactiveCanvas) : (ls(this.interactiveCanvas, this.state),
            this.setState({
                selectedElementIds: vt({}, this.state),
                selectedGroupIds: {},
                editingGroupId: null,
                activeEmbeddable: null
            })),
            pc = !1),
            !n[U.CTRL_OR_CMD] && !this.state.isBindingEnabled && this.setState({
                isBindingEnabled: !0
            }),
            Zh(n.key) && (g2(this.scene.getSelectedElements(this.state).filter(je), this.scene.getNonDeletedElementsMap(), this.scene.getNonDeletedElements(), this.scene, zc(this.state), ((r = this.state.selectedLinearElement) == null ? void 0 : r.selectedPointsIndices) ?? []),
            this.setState({
                suggestedBindings: []
            })),
            n.altKey || this.flowChartNavigator.isExploring && (this.flowChartNavigator.clear(),
            this.syncActionResult({
                storeAction: ee.CAPTURE
            })),
            !n[U.CTRL_OR_CMD] && this.flowChartCreator.isCreatingChart) {
                (i = this.flowChartCreator.pendingNodes) != null && i.length && this.scene.insertElements(this.flowChartCreator.pendingNodes);
                const s = (o = this.flowChartCreator.pendingNodes) == null ? void 0 : o[0];
                s && (this.setState(a=>({
                    selectedElementIds: vt({
                        [s.id]: !0
                    }, a)
                })),
                ab([s], this.canvas.width / window.devicePixelRatio, this.canvas.height / window.devicePixelRatio, {
                    offsetLeft: this.state.offsetLeft,
                    offsetTop: this.state.offsetTop,
                    scrollX: this.state.scrollX,
                    scrollY: this.state.scrollY,
                    zoom: this.state.zoom
                }, this.scene.getNonDeletedElementsMap(), this.getEditorUIOffsets()) || this.scrollToContent(s, {
                    animate: !0,
                    duration: 300
                })),
                this.flowChartCreator.clear(),
                this.syncActionResult({
                    storeAction: ee.CAPTURE
                })
            }
        }
        ));
        D(this, "isToolSupported", n=>{
            var r;
            return ((r = this.props.UIOptions.tools) == null ? void 0 : r[n]) !== !1
        }
        );
        D(this, "setActiveTool", n=>{
            if (!this.isToolSupported(n.type)) {
                console.warn(`"${n.type}" tool is disabled via "UIOptions.canvasActions.tools.${n.type}"`);
                return
            }
            const r = bn(this.state, n);
            r.type === "hand" ? At(this.interactiveCanvas, It.GRAB) : pc || ls(this.interactiveCanvas, this.state),
            QQ(document.activeElement) && this.focusContainer(),
            M6(r.type) || this.setState({
                suggestedBindings: []
            }),
            r.type === "image" && this.onImageAction({
                insertOnCanvasDirectly: (n.type === "image" && n.insertOnCanvasDirectly) ?? !1
            }),
            this.setState(i=>{
                const o = {
                    snapLines: i.snapLines.length ? [] : i.snapLines,
                    originSnapOffset: null,
                    activeEmbeddable: null
                };
                return r.type === "freedraw" && this.store.shouldCaptureIncrement(),
                r.type !== "selection" ? {
                    ...i,
                    activeTool: r,
                    selectedElementIds: vt({}, i),
                    selectedGroupIds: vt({}, i),
                    editingGroupId: null,
                    multiElement: null,
                    ...o
                } : {
                    ...i,
                    activeTool: r,
                    ...o
                }
            }
            )
        }
        );
        D(this, "setOpenDialog", n=>{
            this.setState({
                openDialog: n
            })
        }
        );
        D(this, "setCursor", n=>{
            At(this.interactiveCanvas, n)
        }
        );
        D(this, "resetCursor", ()=>{
            Ao(this.interactiveCanvas)
        }
        );
        D(this, "isTouchScreenMultiTouchGesture", ()=>mt.pointers.size >= 2);
        D(this, "getName", ()=>this.state.name || this.props.name || `${k("labels.untitled")}-${Dk()}`);
        D(this, "onGestureStart", Xt(n=>{
            n.preventDefault(),
            this.isTouchScreenMultiTouchGesture() && this.setState({
                selectedElementIds: vt({}, this.state),
                activeEmbeddable: null
            }),
            mt.initialScale = this.state.zoom.value
        }
        ));
        D(this, "onGestureChange", Xt(n=>{
            if (n.preventDefault(),
            this.isTouchScreenMultiTouchGesture())
                return;
            const r = mt.initialScale;
            r && this.setState(i=>({
                ...$c({
                    viewportX: this.lastViewportPosition.x,
                    viewportY: this.lastViewportPosition.y,
                    nextZoom: bs(r * n.scale)
                }, i)
            }))
        }
        ));
        D(this, "onGestureEnd", Xt(n=>{
            n.preventDefault(),
            this.isTouchScreenMultiTouchGesture() && this.setState({
                previousSelectedElementIds: {},
                selectedElementIds: vt(this.state.previousSelectedElementIds, this.state)
            }),
            mt.initialScale = null
        }
        ));
        D(this, "startTextEditing", ({sceneX: n, sceneY: r, insertAtParentCenter: i=!0, container: o, autoEdit: s=!0})=>{
            let a = !1
              , l = i && this.getTextWysiwygSnappedToCenterPosition(n, r, this.state, o);
            o && l && (Ge(o, this.scene.getNonDeletedElementsMap()) || (a = !0));
            let c = null;
            const u = this.scene.getSelectedElements(this.state);
            u.length === 1 ? ye(u[0]) ? c = u[0] : o ? c = Ge(u[0], this.scene.getNonDeletedElementsMap()) : c = this.getTextElementAtPosition(n, r) : c = this.getTextElementAtPosition(n, r);
            const f = (c == null ? void 0 : c.fontFamily) || this.state.currentItemFontFamily
              , h = (c == null ? void 0 : c.lineHeight) || mu(f)
              , m = this.state.currentItemFontSize;
            if (!c && a && o && !Be(o)) {
                const b = x4(Ht({
                    fontSize: m,
                    fontFamily: f
                }), h)
                  , _ = b4(m, h)
                  , x = Math.max(o.height, _)
                  , C = Math.max(o.width, b);
                ue(o, {
                    height: x,
                    width: C
                }),
                n = o.x + C / 2,
                r = o.y + x / 2,
                l && (l = this.getTextWysiwygSnappedToCenterPosition(n, r, this.state, o))
            }
            const v = this.getTopLayerFrameAtSceneCoords({
                x: n,
                y: r
            })
              , y = c || yo({
                x: l ? l.elementCenterX : n,
                y: l ? l.elementCenterY : r,
                strokeColor: this.state.currentItemStrokeColor,
                backgroundColor: this.state.currentItemBackgroundColor,
                fillStyle: this.state.currentItemFillStyle,
                strokeWidth: this.state.currentItemStrokeWidth,
                strokeStyle: this.state.currentItemStrokeStyle,
                roughness: this.state.currentItemRoughness,
                opacity: this.state.currentItemOpacity,
                text: "",
                fontSize: m,
                fontFamily: f,
                textAlign: l ? "center" : this.state.currentItemTextAlign,
                verticalAlign: l ? Ai.MIDDLE : e2,
                containerId: a ? o == null ? void 0 : o.id : void 0,
                groupIds: (o == null ? void 0 : o.groupIds) ?? [],
                lineHeight: h,
                angle: (o == null ? void 0 : o.angle) ?? 0,
                frameId: v ? v.id : null
            });
            if (!c && a && o && ue(o, {
                boundElements: (o.boundElements || []).concat({
                    type: "text",
                    id: y.id
                })
            }),
            this.setState({
                editingElement: y
            }),
            !c)
                if (o && a) {
                    const E = this.scene.getElementIndex(o.id);
                    this.scene.insertElementAtIndex(y, E + 1)
                } else
                    this.scene.insertElement(y);
            s || c || o ? this.handleTextWysiwyg(y, {
                isExistingElement: !!c
            }) : this.setState({
                newElement: y,
                multiElement: null
            })
        }
        );
        D(this, "handleCanvasDoubleClick", n=>{
            if (this.state.multiElement || this.state.activeTool.type !== "selection")
                return;
            const r = this.scene.getSelectedElements(this.state);
            if (r.length === 1 && je(r[0]) && n[U.CTRL_OR_CMD] && (!this.state.editingLinearElement || this.state.editingLinearElement.elementId !== r[0].id) && !He(r[0])) {
                this.store.shouldCaptureIncrement(),
                this.setState({
                    editingLinearElement: new ke(r[0])
                });
                return
            }
            Ao(this.interactiveCanvas);
            let {x: i, y: o} = zt(n, this.state);
            if (Zc(this.state).length > 0) {
                const a = this.getElementAtPosition(i, o)
                  , l = a && DJ(a, this.state.selectedGroupIds);
                if (l) {
                    this.store.shouldCaptureIncrement(),
                    this.setState(c=>({
                        ...c,
                        ...Ii({
                            editingGroupId: l,
                            selectedElementIds: {
                                [a.id]: !0
                            }
                        }, this.scene.getNonDeletedElements(), c, this)
                    }));
                    return
                }
            }
            if (Ao(this.interactiveCanvas),
            !n[U.CTRL_OR_CMD] && !this.state.viewModeEnabled) {
                const a = this.getElementAtPosition(i, o);
                if (eo(a)) {
                    this.setState({
                        activeEmbeddable: {
                            element: a,
                            state: "active"
                        }
                    });
                    return
                }
                const l = this.getTextBindableContainerAtPosition(i, o);
                if (l && (go(l) || !Es(l.backgroundColor) || gd({
                    x: i,
                    y: o,
                    element: l,
                    shape: ra(l, this.scene.getNonDeletedElementsMap()),
                    threshold: this.getElementHitThreshold()
                }))) {
                    const c = sb(l, this.state, this.scene.getNonDeletedElementsMap());
                    i = c.x,
                    o = c.y
                }
                this.startTextEditing({
                    sceneX: i,
                    sceneY: o,
                    insertAtParentCenter: !n.altKey,
                    container: l
                })
            }
        }
        );
        D(this, "getElementLinkAtPosition", (n,r)=>{
            const i = this.scene.getNonDeletedElements().slice().reverse();
            let o = 1 / 0;
            return i.find((s,a)=>(r && s.id === r.id && (o = a),
            s.link && a <= o && JE(s, this.scene.getNonDeletedElementsMap(), this.state, [n.x, n.y], this.device.editor.isMobile)))
        }
        );
        D(this, "redirectToLink", (n,r)=>{
            const i = ir(this.lastPointerDownEvent.clientX, this.lastPointerDownEvent.clientY, this.lastPointerUpEvent.clientX, this.lastPointerUpEvent.clientY);
            if (!this.hitLinkElement || r && i > wc || !r && i !== 0)
                return;
            const o = zt(this.lastPointerDownEvent, this.state)
              , s = this.scene.getNonDeletedElementsMap()
              , a = JE(this.hitLinkElement, s, this.state, [o.x, o.y], this.device.editor.isMobile)
              , l = zt(this.lastPointerUpEvent, this.state)
              , c = JE(this.hitLinkElement, s, this.state, [l.x, l.y], this.device.editor.isMobile);
            if (a && c) {
                let u = this.hitLinkElement.link;
                if (u) {
                    u = Is(u);
                    let f;
                    if (this.props.onLinkOpen && (f = rD(ce.EXCALIDRAW_LINK, n.nativeEvent),
                    this.props.onLinkOpen({
                        ...this.hitLinkElement,
                        link: u
                    }, f)),
                    !(f != null && f.defaultPrevented)) {
                        const h = yD(u) ? "_self" : "_blank"
                          , m = window.open(void 0, h);
                        m && (m.opener = null,
                        m.location = u)
                    }
                }
            }
        }
        );
        D(this, "getTopLayerFrameAtSceneCoords", n=>{
            const r = this.scene.getNonDeletedElementsMap()
              , i = this.scene.getNonDeletedFramesLikes().filter(o=>k8(n, o, r));
            return i.length ? i[i.length - 1] : null
        }
        );
        D(this, "handleCanvasPointerMove", n=>{
            var m;
            this.savePointer(n.clientX, n.clientY, this.state.cursorButton),
            this.lastPointerMoveEvent = n.nativeEvent,
            mt.pointers.has(n.pointerId) && mt.pointers.set(n.pointerId, {
                x: n.clientX,
                y: n.clientY
            });
            const r = mt.initialScale;
            if (mt.pointers.size === 2 && mt.lastCenter && r && mt.initialDistance) {
                const v = sM(mt.pointers)
                  , y = v.x - mt.lastCenter.x
                  , E = v.y - mt.lastCenter.y;
                mt.lastCenter = v;
                const b = aM(Array.from(mt.pointers.values()))
                  , _ = this.state.activeTool.type === "freedraw" && this.state.penMode ? 1 : b / mt.initialDistance
                  , x = _ ? bs(r * _) : this.state.zoom.value;
                this.setState(C=>{
                    const P = $c({
                        viewportX: v.x,
                        viewportY: v.y,
                        nextZoom: x
                    }, C);
                    this.translateCanvas({
                        zoom: P.zoom,
                        scrollX: P.scrollX + 2 * (y / x),
                        scrollY: P.scrollY + 2 * (E / x),
                        shouldCacheIgnoreZoom: !0
                    })
                }
                ),
                this.resetShouldCacheIgnoreZoomDebounced()
            } else
                mt.lastCenter = mt.initialDistance = mt.initialScale = null;
            if (pc || Dh || Mb || lf(this.state))
                return;
            const o = gM(Lb, n.clientX - this.state.offsetLeft, n.clientY - this.state.offsetTop).isOverEither;
            !this.state.newElement && !this.state.selectionElement && !this.state.selectedElementsAreBeingDragged && !this.state.multiElement && (o ? Ao(this.interactiveCanvas) : ls(this.interactiveCanvas, this.state));
            const s = zt(n, this.state)
              , {x: a, y: l} = s;
            if (!this.state.newElement && uge(this.state.activeTool.type)) {
                const {originOffset: v, snapLines: y} = cge(this.scene.getNonDeletedElements(), this, {
                    x: a,
                    y: l
                }, n, this.scene.getNonDeletedElementsMap());
                this.setState(E=>{
                    const b = PE(E.snapLines, y)
                      , _ = E.originSnapOffset ? PE(E.originSnapOffset, v) : v;
                    return E.snapLines === b && E.originSnapOffset === _ ? null : {
                        snapLines: b,
                        originSnapOffset: _
                    }
                }
                )
            } else
                !this.state.newElement && !this.state.selectedElementsAreBeingDragged && !this.state.selectionElement && this.setState(v=>v.snapLines.length ? {
                    snapLines: []
                } : null);
            if (this.state.editingLinearElement && !this.state.editingLinearElement.isDragging) {
                const v = ke.handlePointerMove(n, a, l, this, this.scene.getNonDeletedElementsMap());
                v && v !== this.state.editingLinearElement && si.flushSync(()=>{
                    this.setState({
                        editingLinearElement: v
                    })
                }
                ),
                (v == null ? void 0 : v.lastUncommittedPoint) != null ? this.maybeSuggestBindingAtCursor(s) : si.flushSync(()=>{
                    this.setState({
                        suggestedBindings: []
                    })
                }
                )
            }
            if (sD(this.state.activeTool.type)) {
                const {newElement: v} = this.state;
                ms(v, !1) ? this.maybeSuggestBindingsForLinearElementAtCoords(v, [s], this.state.startBoundElement) : this.maybeSuggestBindingAtCursor(s)
            }
            if (this.state.multiElement) {
                const {multiElement: v} = this.state
                  , {x: y, y: E} = v
                  , {points: b, lastCommittedPoint: _} = v
                  , x = b[b.length - 1];
                if (ls(this.interactiveCanvas, this.state),
                x === _)
                    ir(a - y, l - E, x[0], x[1]) >= rm ? ue(v, {
                        points: [...b, [a - y, l - E]]
                    }) : At(this.interactiveCanvas, It.POINTER);
                else if (b.length > 2 && _ && ir(a - y, l - E, _[0], _[1]) < rm)
                    At(this.interactiveCanvas, It.POINTER),
                    ue(v, {
                        points: b.slice(0, -1)
                    });
                else {
                    const [C,P] = er(a, l, n[U.CTRL_OR_CMD] || He(v) ? null : this.getEffectiveGridSize())
                      , [M,A] = (v == null ? void 0 : v.lastCommittedPoint) ?? [0, 0];
                    let I = C - y - M
                      , O = P - E - A;
                    bg(n) && ({width: I, height: O} = L_(M + y, A + E, C, P)),
                    Ca(b, this.state.zoom.value) && At(this.interactiveCanvas, It.POINTER),
                    He(v) ? wu(v, this.scene.getNonDeletedElementsMap(), [...b.slice(0, -1), [M + I, A + O]], void 0, void 0, {
                        isDragging: !0
                    }) : ue(v, {
                        points: [...b.slice(0, -1), [M + I, A + O]]
                    })
                }
                return
            }
            if (!!n.buttons || this.state.activeTool.type !== "selection" && this.state.activeTool.type !== "text" && this.state.activeTool.type !== "eraser")
                return;
            const u = this.scene.getNonDeletedElements()
              , f = this.scene.getSelectedElements(this.state);
            if (f.length === 1 && !o && !this.state.editingLinearElement) {
                if (this.state.selectedLinearElement && this.handleHoverSelectedLinearElement(this.state.selectedLinearElement, a, l),
                (!this.state.selectedLinearElement || this.state.selectedLinearElement.hoverPointIndex === -1) && !(f.length === 1 && He(f[0]))) {
                    const v = q8(u, this.state, a, l, this.state.zoom, n.pointerType, this.scene.getNonDeletedElementsMap(), this.device);
                    if (v && v.transformHandleType) {
                        At(this.interactiveCanvas, J8(v));
                        return
                    }
                }
            } else if (f.length > 1 && !o) {
                const v = Q8(xt(f), a, l, this.state.zoom, n.pointerType, this.device);
                if (v) {
                    At(this.interactiveCanvas, J8({
                        transformHandleType: v
                    }));
                    return
                }
            }
            const h = this.getElementAtPosition(s.x, s.y);
            this.hitLinkElement = this.getElementLinkAtPosition(s, h),
            !fs(this.state) && (this.hitLinkElement && !this.state.selectedElementIds[this.hitLinkElement.id] ? (At(this.interactiveCanvas, It.POINTER),
            ife(this.hitLinkElement, this.state, this.scene.getNonDeletedElementsMap())) : (sfe(),
            h && (h.link || Br(h)) && this.state.selectedElementIds[h.id] && !this.state.contextMenu && !this.state.showHyperlinkPopup ? this.setState({
                showHyperlinkPopup: "info"
            }) : this.state.activeTool.type === "text" ? At(this.interactiveCanvas, ye(h) ? It.TEXT : It.CROSSHAIR) : this.state.viewModeEnabled ? At(this.interactiveCanvas, It.GRAB) : o ? At(this.interactiveCanvas, It.AUTO) : this.state.selectedLinearElement ? this.handleHoverSelectedLinearElement(this.state.selectedLinearElement, a, l) : n[U.CTRL_OR_CMD] ? At(this.interactiveCanvas, It.AUTO) : (h || this.isHittingCommonBoundingBoxOfSelectedElements(s, f)) && !(h != null && h.locked) && (h && eo(h) && this.isIframeLikeElementCenter(h, n, a, l) ? (At(this.interactiveCanvas, It.POINTER),
            this.setState({
                activeEmbeddable: {
                    element: h,
                    state: "hover"
                }
            })) : (At(this.interactiveCanvas, It.MOVE),
            ((m = this.state.activeEmbeddable) == null ? void 0 : m.state) === "hover" && this.setState({
                activeEmbeddable: null
            })))))
        }
        );
        D(this, "handleEraser", (n,r,i)=>{
            this.eraserTrail.addPointToPath(i.x, i.y);
            let o = !1;
            const s = new Set
              , a = this.scene.getNonDeletedElements()
              , l = m=>{
                var v;
                for (const y of m) {
                    if (y.locked)
                        return;
                    if (n.altKey ? this.elementsPendingErasure.delete(y.id) && (o = !0) : this.elementsPendingErasure.has(y.id) || (o = !0,
                    this.elementsPendingErasure.add(y.id)),
                    o && ((v = y.groupIds) != null && v.length)) {
                        const E = y.groupIds.at(-1);
                        if (!s.has(E)) {
                            s.add(E);
                            const b = xn(a, E);
                            for (const _ of b)
                                n.altKey ? this.elementsPendingErasure.delete(_.id) : this.elementsPendingErasure.add(_.id)
                        }
                    }
                }
            }
              , c = ir(r.lastCoords.x, r.lastCoords.y, i.x, i.y)
              , u = this.getElementHitThreshold()
              , f = {
                ...r.lastCoords
            };
            let h = 0;
            for (; h <= c; ) {
                const m = this.getElementsAtPosition(f.x, f.y);
                if (l(m),
                h === c)
                    break;
                h = Math.min(h + u, c);
                const v = h / c
                  , y = (1 - v) * f.x + v * i.x
                  , E = (1 - v) * f.y + v * i.y;
                f.x = y,
                f.y = E
            }
            if (r.lastCoords.x = i.x,
            r.lastCoords.y = i.y,
            o) {
                for (const m of this.scene.getNonDeletedElements())
                    Sn(m) && (this.elementsPendingErasure.has(m.id) || this.elementsPendingErasure.has(m.containerId)) && (n.altKey ? (this.elementsPendingErasure.delete(m.id),
                    this.elementsPendingErasure.delete(m.containerId)) : (this.elementsPendingErasure.add(m.id),
                    this.elementsPendingErasure.add(m.containerId)));
                this.elementsPendingErasure = new Set(this.elementsPendingErasure),
                this.triggerRender()
            }
        }
        );
        D(this, "handleTouchMove", n=>{
            Oh = !0
        }
        );
        D(this, "handleCanvasPointerDown", n=>{
            var u, f;
            if (this.maybeCleanupAfterMissingPointerUp(n.nativeEvent),
            this.maybeUnfollowRemoteUser(),
            this.state.contextMenu && this.setState({
                contextMenu: null
            }),
            this.state.snapLines && this.setAppState({
                snapLines: []
            }),
            this.updateGestureOnPointerDown(n),
            n.pointerType === "touch" && this.state.newElement && this.state.newElement.type === "freedraw") {
                const h = this.state.newElement;
                this.updateScene({
                    ...h.points.length < 10 ? {
                        elements: this.scene.getElementsIncludingDeleted().filter(m=>m.id !== h.id)
                    } : {},
                    appState: {
                        newElement: null,
                        editingElement: null,
                        startBoundElement: null,
                        suggestedBindings: [],
                        selectedElementIds: vt(Object.keys(this.state.selectedElementIds).filter(m=>m !== h.id).reduce((m,v)=>(m[v] = this.state.selectedElementIds[v],
                        m), {}), this.state)
                    },
                    storeAction: ee.UPDATE
                });
                return
            }
            const r = document.getSelection();
            if (r != null && r.anchorNode && r.removeAllRanges(),
            this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(n),
            !this.state.penDetected && n.pointerType === "pen" && this.setState(h=>({
                penMode: !0,
                penDetected: !0
            })),
            !this.device.isTouchScreen && ["pen", "touch"].includes(n.pointerType) && (this.device = lm(this.device, {
                isTouchScreen: !0
            })),
            Dh || (this.lastPointerDownEvent = n,
            this.handleCanvasPanUsingWheelOrSpaceDrag(n)))
                return;
            if (this.setState({
                lastPointerDownWith: n.pointerType,
                cursorButton: "down"
            }),
            this.savePointer(n.clientX, n.clientY, "down"),
            n.button === fc.ERASER && this.state.activeTool.type !== Fn.eraser) {
                this.setState({
                    activeTool: bn(this.state, {
                        type: Fn.eraser,
                        lastActiveToolBeforeEraser: this.state.activeTool
                    })
                }, ()=>{
                    this.handleCanvasPointerDown(n);
                    const h = ()=>{
                        m(),
                        v == null || v(),
                        fs(this.state) && this.setState({
                            activeTool: bn(this.state, {
                                ...this.state.activeTool.lastActiveTool || {
                                    type: Fn.selection
                                },
                                lastActiveToolBeforeEraser: null
                            })
                        })
                    }
                      , m = fn(window, ce.POINTER_UP, h, {
                        once: !0
                    });
                    let v;
                    requestAnimationFrame(()=>{
                        v = this.missingPointerEventCleanupEmitter.once(h)
                    }
                    )
                }
                );
                return
            }
            if (n.button !== fc.MAIN && n.button !== fc.TOUCH && n.button !== fc.ERASER || mt.pointers.size > 1)
                return;
            const i = this.initialPointerDownState(n);
            if (this.setState({
                selectedElementsAreBeingDragged: !1
            }),
            this.handleDraggingScrollBar(n, i) || (this.clearSelectionIfNotUsingSelection(),
            this.updateBindingEnabledOnPointerMove(n),
            this.handleSelectionOnPointerDown(n, i)) || !(!this.state.penMode || n.pointerType !== "touch" || this.state.activeTool.type === "selection" || this.state.activeTool.type === "text" || this.state.activeTool.type === "image"))
                return;
            if (this.state.activeTool.type === "text")
                this.handleTextOnPointerDown(n, i);
            else if (this.state.activeTool.type === "arrow" || this.state.activeTool.type === "line")
                this.handleLinearElementOnPointerDown(n, this.state.activeTool.type, i);
            else if (this.state.activeTool.type === "image") {
                At(this.interactiveCanvas, It.CROSSHAIR);
                const h = this.state.pendingImageElementId && this.scene.getElement(this.state.pendingImageElementId);
                if (!h)
                    return;
                this.setState({
                    newElement: h,
                    editingElement: h,
                    pendingImageElementId: null,
                    multiElement: null
                });
                const {x: m, y: v} = zt(n, this.state)
                  , y = this.getTopLayerFrameAtSceneCoords({
                    x: m,
                    y: v
                });
                ue(h, {
                    x: m,
                    y: v,
                    frameId: y ? y.id : null
                })
            } else
                this.state.activeTool.type === "freedraw" ? this.handleFreeDrawElementOnPointerDown(n, this.state.activeTool.type, i) : this.state.activeTool.type === "custom" ? ls(this.interactiveCanvas, this.state) : this.state.activeTool.type === Fn.frame || this.state.activeTool.type === Fn.magicframe ? this.createFrameElementOnPointerDown(i, this.state.activeTool.type) : this.state.activeTool.type === "laser" ? this.laserTrails.startPath(i.lastCoords.x, i.lastCoords.y) : this.state.activeTool.type !== "eraser" && this.state.activeTool.type !== "hand" && this.createGenericElementOnPointerDown(this.state.activeTool.type, i);
            (f = (u = this.props) == null ? void 0 : u.onPointerDown) == null || f.call(u, this.state.activeTool, i),
            this.onPointerDownEmitter.trigger(this.state.activeTool, i, n),
            this.state.activeTool.type === "eraser" && this.eraserTrail.startPath(i.lastCoords.x, i.lastCoords.y);
            const s = this.onPointerMoveFromPointerDownHandler(i)
              , a = this.onPointerUpFromPointerDownHandler(i)
              , l = this.onKeyDownFromPointerDownHandler(i)
              , c = this.onKeyUpFromPointerDownHandler(i);
            this.missingPointerEventCleanupEmitter.once(h=>a(h || n.nativeEvent)),
            (!this.state.viewModeEnabled || this.state.activeTool.type === "laser") && (window.addEventListener(ce.POINTER_MOVE, s),
            window.addEventListener(ce.POINTER_UP, a),
            window.addEventListener(ce.KEYDOWN, l),
            window.addEventListener(ce.KEYUP, c),
            i.eventListeners.onMove = s,
            i.eventListeners.onUp = a,
            i.eventListeners.onKeyUp = c,
            i.eventListeners.onKeyDown = l)
        }
        );
        D(this, "handleCanvasPointerUp", n=>{
            var o;
            this.removePointer(n),
            this.lastPointerUpEvent = n;
            const r = zt({
                clientX: n.clientX,
                clientY: n.clientY
            }, this.state)
              , i = n.timeStamp - (((o = this.lastPointerDownEvent) == null ? void 0 : o.timeStamp) ?? 0);
            if (this.device.editor.isMobile && i < 300) {
                const s = this.getElementAtPosition(r.x, r.y);
                if (eo(s) && this.isIframeLikeElementCenter(s, n, r.x, r.y)) {
                    this.handleEmbeddableCenterClick(s);
                    return
                }
            }
            if (this.device.isTouchScreen) {
                const s = this.getElementAtPosition(r.x, r.y);
                this.hitLinkElement = this.getElementLinkAtPosition(r, s)
            }
            this.hitLinkElement && !this.state.selectedElementIds[this.hitLinkElement.id] ? i < 300 && eo(this.hitLinkElement) && !MO(this.hitLinkElement, this.scene.getNonDeletedElementsMap(), this.state, [r.x, r.y]) ? this.handleEmbeddableCenterClick(this.hitLinkElement) : this.redirectToLink(n, this.device.isTouchScreen) : this.state.viewModeEnabled && this.setState({
                activeEmbeddable: null,
                selectedElementIds: {}
            })
        }
        );
        D(this, "maybeOpenContextMenuAfterPointerDownOnTouchDevices", n=>{
            n.pointerType === "touch" && (Oh = !1,
            qa ? Oh = !0 : qa = window.setTimeout(()=>{
                qa = 0,
                Oh || this.handleCanvasContextMenu(n)
            }
            , xq))
        }
        );
        D(this, "resetContextMenuTimer", ()=>{
            clearTimeout(qa),
            qa = 0,
            Oh = !1
        }
        );
        D(this, "maybeCleanupAfterMissingPointerUp", n=>{
            mc == null || mc(),
            this.missingPointerEventCleanupEmitter.trigger(n).clear()
        }
        );
        D(this, "handleCanvasPanUsingWheelOrSpaceDrag", n=>{
            if (!(mt.pointers.size <= 1 && (n.button === fc.WHEEL || n.button === fc.MAIN && pc || lf(this.state) || this.state.viewModeEnabled)) || ye(this.state.editingElement))
                return !1;
            Dh = !0,
            n.preventDefault();
            let r = !1;
            const i = typeof window === void 0 ? !1 : /Linux/.test(window.navigator.platform);
            At(this.interactiveCanvas, It.GRABBING);
            let {clientX: o, clientY: s} = n;
            const a = Cb(c=>{
                const u = o - c.clientX
                  , f = s - c.clientY;
                if (o = c.clientX,
                s = c.clientY,
                i && !r && (Math.abs(u) > 1 || Math.abs(f) > 1)) {
                    r = !0;
                    const h = v=>{
                        document.body.removeEventListener(ce.PASTE, h),
                        v.stopPropagation()
                    }
                      , m = ()=>{
                        setTimeout(()=>{
                            document.body.removeEventListener(ce.PASTE, h),
                            window.removeEventListener(ce.POINTER_UP, m)
                        }
                        , 100)
                    }
                    ;
                    document.body.addEventListener(ce.PASTE, h),
                    window.addEventListener(ce.POINTER_UP, m)
                }
                this.translateCanvas({
                    scrollX: this.state.scrollX - u / this.state.zoom.value,
                    scrollY: this.state.scrollY - f / this.state.zoom.value
                })
            }
            )
              , l = Xt(mc = ()=>{
                mc = null,
                Dh = !1,
                pc || (this.state.viewModeEnabled ? At(this.interactiveCanvas, It.GRAB) : ls(this.interactiveCanvas, this.state)),
                this.setState({
                    cursorButton: "up"
                }),
                this.savePointer(n.clientX, n.clientY, "up"),
                window.removeEventListener(ce.POINTER_MOVE, a),
                window.removeEventListener(ce.POINTER_UP, l),
                window.removeEventListener(ce.BLUR, l),
                a.flush()
            }
            );
            return window.addEventListener(ce.BLUR, l),
            window.addEventListener(ce.POINTER_MOVE, a, {
                passive: !0
            }),
            window.addEventListener(ce.POINTER_UP, l),
            !0
        }
        );
        D(this, "clearSelectionIfNotUsingSelection", ()=>{
            this.state.activeTool.type !== "selection" && this.setState({
                selectedElementIds: vt({}, this.state),
                selectedGroupIds: {},
                editingGroupId: null,
                activeEmbeddable: null
            })
        }
        );
        D(this, "handleSelectionOnPointerDown", (n,r)=>{
            if (this.state.activeTool.type === "selection") {
                const i = this.scene.getNonDeletedElements()
                  , o = this.scene.getNonDeletedElementsMap()
                  , s = this.scene.getSelectedElements(this.state);
                if (s.length === 1 && !this.state.editingLinearElement && !(this.state.selectedLinearElement && this.state.selectedLinearElement.hoverPointIndex !== -1)) {
                    const a = q8(i, this.state, r.origin.x, r.origin.y, this.state.zoom, n.pointerType, this.scene.getNonDeletedElementsMap(), this.device);
                    a != null && (this.setState({
                        resizingElement: a.element
                    }),
                    r.resize.handleType = a.transformHandleType)
                } else
                    s.length > 1 && (r.resize.handleType = Q8(xt(s), r.origin.x, r.origin.y, this.state.zoom, n.pointerType, this.device));
                if (r.resize.handleType)
                    r.resize.isResizing = !0,
                    r.resize.offset = no(fle(r.resize.handleType, s, o, r.origin.x, r.origin.y)),
                    s.length === 1 && je(s[0]) && s[0].points.length === 2 && (r.resize.arrowDirection = hle(r.resize.handleType, s[0]));
                else {
                    if (this.state.selectedLinearElement) {
                        const c = this.state.editingLinearElement || this.state.selectedLinearElement
                          , u = ke.handlePointerDown(n, this, this.store, r.origin, c, this.scene);
                        if (u.hitElement && (r.hit.element = u.hitElement),
                        u.linearElementEditor && (this.setState({
                            selectedLinearElement: u.linearElementEditor
                        }),
                        this.state.editingLinearElement && this.setState({
                            editingLinearElement: u.linearElementEditor
                        })),
                        u.didAddPoint)
                            return !0
                    }
                    if (r.hit.element = r.hit.element ?? this.getElementAtPosition(r.origin.x, r.origin.y),
                    r.hit.element && this.getElementLinkAtPosition({
                        x: r.origin.x,
                        y: r.origin.y
                    }, r.hit.element))
                        return !1;
                    r.hit.allHitElements = this.getElementsAtPosition(r.origin.x, r.origin.y);
                    const a = r.hit.element
                      , l = r.hit.allHitElements.some(c=>this.isASelectedElement(c));
                    if ((a === null || !l) && !n.shiftKey && !r.hit.hasHitCommonBoundingBoxOfSelectedElements && this.clearSelection(a),
                    this.state.editingLinearElement)
                        this.setState({
                            selectedElementIds: vt({
                                [this.state.editingLinearElement.elementId]: !0
                            }, this.state)
                        });
                    else if (a != null) {
                        if (n[U.CTRL_OR_CMD])
                            return this.state.selectedElementIds[a.id] || (r.hit.wasAddedToSelection = !0),
                            this.setState(c=>({
                                ...RJ(c, a),
                                previousSelectedElementIds: this.state.selectedElementIds
                            })),
                            !1;
                        this.state.selectedElementIds[a.id] || (this.state.editingGroupId && !rp(a, this.state.editingGroupId) && this.setState({
                            selectedElementIds: vt({}, this.state),
                            selectedGroupIds: {},
                            editingGroupId: null,
                            activeEmbeddable: null
                        }),
                        !l && !r.hit.hasHitCommonBoundingBoxOfSelectedElements && (this.setState(c=>{
                            const u = {
                                ...c.selectedElementIds,
                                [a.id]: !0
                            }
                              , f = [];
                            if (Object.keys(c.selectedElementIds).forEach(h=>{
                                const m = this.scene.getElement(h);
                                m && f.push(m)
                            }
                            ),
                            Ue(a))
                                Ia(f, a.id).forEach(h=>{
                                    delete u[h.id]
                                }
                                );
                            else if (a.frameId)
                                u[a.frameId] && delete u[a.id];
                            else {
                                const h = a.groupIds
                                  , m = new Set(h.flatMap(v=>xn(this.scene.getNonDeletedElements(), v)).filter(v=>Ue(v)).map(v=>v.id));
                                m.size > 0 && f.forEach(v=>{
                                    v.frameId && m.has(v.frameId) && (delete u[v.id],
                                    v.groupIds.flatMap(y=>xn(this.scene.getNonDeletedElements(), y)).forEach(y=>{
                                        delete u[y.id]
                                    }
                                    ))
                                }
                                )
                            }
                            return {
                                ...Ii({
                                    editingGroupId: c.editingGroupId,
                                    selectedElementIds: u
                                }, this.scene.getNonDeletedElements(), c, this),
                                showHyperlinkPopup: a.link || Br(a) ? "info" : !1
                            }
                        }
                        ),
                        r.hit.wasAddedToSelection = !0))
                    }
                    this.setState({
                        previousSelectedElementIds: this.state.selectedElementIds
                    })
                }
            }
            return !1
        }
        );
        D(this, "handleTextOnPointerDown", (n,r)=>{
            if (ye(this.state.editingElement))
                return;
            let i = r.origin.x
              , o = r.origin.y;
            const s = this.getElementAtPosition(i, o, {
                includeBoundTextElement: !0
            });
            let a = this.getTextBindableContainerAtPosition(i, o);
            go(s) && (a = s,
            i = s.x + s.width / 2,
            o = s.y + s.height / 2),
            this.startTextEditing({
                sceneX: i,
                sceneY: o,
                insertAtParentCenter: !n.altKey,
                container: a,
                autoEdit: !1
            }),
            Ao(this.interactiveCanvas),
            this.state.activeTool.locked || this.setState({
                activeTool: bn(this.state, {
                    type: "selection"
                })
            })
        }
        );
        D(this, "handleFreeDrawElementOnPointerDown", (n,r,i)=>{
            const [o,s] = er(i.origin.x, i.origin.y, null)
              , a = this.getTopLayerFrameAtSceneCoords({
                x: o,
                y: s
            })
              , l = Boe({
                type: r,
                x: o,
                y: s,
                strokeColor: this.state.currentItemStrokeColor,
                backgroundColor: this.state.currentItemBackgroundColor,
                fillStyle: this.state.currentItemFillStyle,
                strokeWidth: this.state.currentItemStrokeWidth,
                strokeStyle: this.state.currentItemStrokeStyle,
                roughness: this.state.currentItemRoughness,
                opacity: this.state.currentItemOpacity,
                roundness: null,
                simulatePressure: n.pressure === .5,
                locked: !1,
                frameId: a ? a.id : null
            });
            this.setState(f=>{
                const h = {
                    ...f.selectedElementIds
                };
                return delete h[l.id],
                {
                    selectedElementIds: vt(h, f)
                }
            }
            );
            const c = l.simulatePressure ? l.pressures : [...l.pressures, n.pressure];
            ue(l, {
                points: [[0, 0]],
                pressures: c
            });
            const u = ro(i.origin, this.scene.getNonDeletedElements(), this.scene.getNonDeletedElementsMap());
            this.scene.insertElement(l),
            this.setState({
                newElement: l,
                startBoundElement: u,
                suggestedBindings: []
            })
        }
        );
        D(this, "insertIframeElement", ({sceneX: n, sceneY: r, width: i, height: o})=>{
            var c;
            const [s,a] = er(n, r, (c = this.lastPointerDownEvent) != null && c[U.CTRL_OR_CMD] ? null : this.getEffectiveGridSize())
              , l = Noe({
                type: "iframe",
                x: s,
                y: a,
                strokeColor: "transparent",
                backgroundColor: "transparent",
                fillStyle: this.state.currentItemFillStyle,
                strokeWidth: this.state.currentItemStrokeWidth,
                strokeStyle: this.state.currentItemStrokeStyle,
                roughness: this.state.currentItemRoughness,
                roundness: this.getCurrentItemRoundness("iframe"),
                opacity: this.state.currentItemOpacity,
                locked: !1,
                width: i,
                height: o
            });
            return this.scene.insertElement(l),
            l
        }
        );
        D(this, "insertEmbeddableElement", ({sceneX: n, sceneY: r, link: i})=>{
            var c;
            const [o,s] = er(n, r, (c = this.lastPointerDownEvent) != null && c[U.CTRL_OR_CMD] ? null : this.getEffectiveGridSize())
              , a = Nd(i);
            if (!a)
                return;
            a.error instanceof URIError && this.setToast({
                message: k("toast.unrecognizedLinkFormat"),
                closable: !0
            });
            const l = v8({
                type: "embeddable",
                x: o,
                y: s,
                strokeColor: "transparent",
                backgroundColor: "transparent",
                fillStyle: this.state.currentItemFillStyle,
                strokeWidth: this.state.currentItemStrokeWidth,
                strokeStyle: this.state.currentItemStrokeStyle,
                roughness: this.state.currentItemRoughness,
                roundness: this.getCurrentItemRoundness("embeddable"),
                opacity: this.state.currentItemOpacity,
                locked: !1,
                width: a.intrinsicSize.w,
                height: a.intrinsicSize.h,
                link: i
            });
            return this.scene.insertElement(l),
            l
        }
        );
        D(this, "createImageElement", ({sceneX: n, sceneY: r, addToFrameUnderCursor: i=!0})=>{
            var c;
            const [o,s] = er(n, r, (c = this.lastPointerDownEvent) != null && c[U.CTRL_OR_CMD] ? null : this.getEffectiveGridSize())
              , a = i ? this.getTopLayerFrameAtSceneCoords({
                x: o,
                y: s
            }) : null;
            return bO({
                type: "image",
                x: o,
                y: s,
                strokeColor: this.state.currentItemStrokeColor,
                backgroundColor: this.state.currentItemBackgroundColor,
                fillStyle: this.state.currentItemFillStyle,
                strokeWidth: this.state.currentItemStrokeWidth,
                strokeStyle: this.state.currentItemStrokeStyle,
                roughness: this.state.currentItemRoughness,
                roundness: null,
                opacity: this.state.currentItemOpacity,
                locked: !1,
                frameId: a ? a.id : null
            })
        }
        );
        D(this, "handleLinearElementOnPointerDown", (n,r,i)=>{
            if (this.state.multiElement) {
                const {multiElement: o} = this.state;
                if (o.type === "line" && Ca(o.points, this.state.zoom.value)) {
                    ue(o, {
                        lastCommittedPoint: o.points[o.points.length - 1]
                    }),
                    this.actionManager.executeAction(ko);
                    return
                }
                if (He(o) && o.points.length > 1) {
                    ue(o, {
                        lastCommittedPoint: o.points[o.points.length - 1]
                    }),
                    this.actionManager.executeAction(ko);
                    return
                }
                const {x: s, y: a, lastCommittedPoint: l} = o;
                if (o.points.length > 1 && l && ir(i.origin.x - s, i.origin.y - a, l[0], l[1]) < rm) {
                    this.actionManager.executeAction(ko);
                    return
                }
                this.setState(c=>({
                    selectedElementIds: vt({
                        ...c.selectedElementIds,
                        [o.id]: !0
                    }, c)
                })),
                ue(o, {
                    lastCommittedPoint: o.points[o.points.length - 1]
                }),
                At(this.interactiveCanvas, It.POINTER)
            } else {
                const [o,s] = er(i.origin.x, i.origin.y, n[U.CTRL_OR_CMD] ? null : this.getEffectiveGridSize())
                  , a = this.getTopLayerFrameAtSceneCoords({
                    x: o,
                    y: s
                })
                  , {currentItemStartArrowhead: l, currentItemEndArrowhead: c} = this.state
                  , [u,f] = r === "arrow" ? [l, c] : [null, null]
                  , h = r === "arrow" ? s4({
                    type: r,
                    x: o,
                    y: s,
                    strokeColor: this.state.currentItemStrokeColor,
                    backgroundColor: this.state.currentItemBackgroundColor,
                    fillStyle: this.state.currentItemFillStyle,
                    strokeWidth: this.state.currentItemStrokeWidth,
                    strokeStyle: this.state.currentItemStrokeStyle,
                    roughness: this.state.currentItemRoughness,
                    opacity: this.state.currentItemOpacity,
                    roundness: this.state.currentItemArrowType === nr.round ? {
                        type: An.PROPORTIONAL_RADIUS
                    } : null,
                    startArrowhead: u,
                    endArrowhead: f,
                    locked: !1,
                    frameId: a ? a.id : null,
                    elbowed: this.state.currentItemArrowType === nr.elbow
                }) : Qc({
                    type: r,
                    x: o,
                    y: s,
                    strokeColor: this.state.currentItemStrokeColor,
                    backgroundColor: this.state.currentItemBackgroundColor,
                    fillStyle: this.state.currentItemFillStyle,
                    strokeWidth: this.state.currentItemStrokeWidth,
                    strokeStyle: this.state.currentItemStrokeStyle,
                    roughness: this.state.currentItemRoughness,
                    opacity: this.state.currentItemOpacity,
                    roundness: this.state.currentItemRoundness === "round" ? {
                        type: An.PROPORTIONAL_RADIUS
                    } : null,
                    locked: !1,
                    frameId: a ? a.id : null
                });
                this.setState(v=>{
                    const y = {
                        ...v.selectedElementIds
                    };
                    return delete y[h.id],
                    {
                        selectedElementIds: vt(y, v)
                    }
                }
                ),
                ue(h, {
                    points: [...h.points, [0, 0]]
                });
                const m = ro(i.origin, this.scene.getNonDeletedElements(), this.scene.getNonDeletedElementsMap(), He(h));
                this.scene.insertElement(h),
                this.setState({
                    newElement: h,
                    editingElement: h,
                    startBoundElement: m,
                    suggestedBindings: []
                })
            }
        }
        );
        D(this, "createGenericElementOnPointerDown", (n,r)=>{
            var c;
            const [i,o] = er(r.origin.x, r.origin.y, (c = this.lastPointerDownEvent) != null && c[U.CTRL_OR_CMD] ? null : this.getEffectiveGridSize())
              , s = this.getTopLayerFrameAtSceneCoords({
                x: i,
                y: o
            })
              , a = {
                x: i,
                y: o,
                strokeColor: this.state.currentItemStrokeColor,
                backgroundColor: this.state.currentItemBackgroundColor,
                fillStyle: this.state.currentItemFillStyle,
                strokeWidth: this.state.currentItemStrokeWidth,
                strokeStyle: this.state.currentItemStrokeStyle,
                roughness: this.state.currentItemRoughness,
                opacity: this.state.currentItemOpacity,
                roundness: this.getCurrentItemRoundness(n),
                locked: !1,
                frameId: s ? s.id : null
            };
            let l;
            n === "embeddable" ? l = v8({
                type: "embeddable",
                ...a
            }) : l = Sa({
                type: n,
                ...a
            }),
            l.type === "selection" ? this.setState({
                selectionElement: l
            }) : (this.scene.insertElement(l),
            this.setState({
                multiElement: null,
                newElement: l
            }))
        }
        );
        D(this, "createFrameElementOnPointerDown", (n,r)=>{
            var l;
            const [i,o] = er(n.origin.x, n.origin.y, (l = this.lastPointerDownEvent) != null && l[U.CTRL_OR_CMD] ? null : this.getEffectiveGridSize())
              , s = {
                x: i,
                y: o,
                opacity: this.state.currentItemOpacity,
                locked: !1,
                ...pn
            }
              , a = r === Fn.magicframe ? E_(s) : yO(s);
            this.scene.insertElement(a),
            this.setState({
                multiElement: null,
                newElement: a
            })
        }
        );
        D(this, "restoreReadyToEraseElements", ()=>{
            this.elementsPendingErasure = new Set,
            this.triggerRender()
        }
        );
        D(this, "eraseElements", ()=>{
            let n = !1;
            const r = this.scene.getElementsIncludingDeleted().map(i=>this.elementsPendingErasure.has(i.id) || i.frameId && this.elementsPendingErasure.has(i.frameId) || Sn(i) && this.elementsPendingErasure.has(i.containerId) ? (n = !0,
            Ne(i, {
                isDeleted: !0
            })) : i);
            this.elementsPendingErasure = new Set,
            n && (this.store.shouldCaptureIncrement(),
            this.scene.replaceAllElements(r))
        }
        );
        D(this, "initializeImage", async({imageFile: n, imageElement: r, showCursorImagePreview: i=!1})=>{
            var u, f, h, m;
            if (!qc(n))
                throw new Error(k("errors.unsupportedFileType"));
            const o = n.type;
            if (At(this.interactiveCanvas, "wait"),
            o === Re.svg)
                try {
                    n = h8(await Qoe(await n.text()), n.name)
                } catch (v) {
                    throw console.warn(v),
                    new Error(k("errors.svgImageInsertError"))
                }
            const s = await (((f = (u = this.props).generateIdForFile) == null ? void 0 : f.call(u, n)) || hoe(n));
            if (!s)
                throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),
                new Error(k("errors.imageInsertError"));
            const a = this.files[s];
            if (!(a != null && a.dataURL)) {
                try {
                    n = await w_(n, {
                        maxWidthOrHeight: Rq
                    })
                } catch (v) {
                    console.error("Error trying to resizing image file on insertion", v)
                }
                if (n.size > bk)
                    throw new Error(k("errors.fileTooBig", {
                        maxSize: `${Math.trunc(bk / 1024 / 1024)}MB`
                    }))
            }
            if (i) {
                const v = (h = this.files[s]) == null ? void 0 : h.dataURL
                  , y = v && goe(v);
                this.setImagePreviewCursor(y || n)
            }
            const l = ((m = this.files[s]) == null ? void 0 : m.dataURL) || await ZE(n)
              , c = ue(r, {
                fileId: s
            }, !1);
            return new Promise(async(v,y)=>{
                var E;
                try {
                    this.files = {
                        ...this.files,
                        [s]: {
                            mimeType: o,
                            id: s,
                            dataURL: l,
                            created: Date.now(),
                            lastRetrieved: Date.now()
                        }
                    };
                    const b = this.imageCache.get(s);
                    b || (this.addNewImagesToImageCache(),
                    await this.updateImageCache([c])),
                    (b == null ? void 0 : b.image)instanceof Promise && await b.image,
                    this.state.pendingImageElementId !== c.id && ((E = this.state.newElement) == null ? void 0 : E.id) !== c.id && this.initializeImageDimensions(c, !0),
                    v(c)
                } catch (b) {
                    console.error(b),
                    y(new Error(k("errors.imageInsertError")))
                } finally {
                    i || Ao(this.interactiveCanvas)
                }
            }
            )
        }
        );
        D(this, "insertImageElement", async(n,r,i)=>{
            if (!this.isToolSupported("image")) {
                this.setState({
                    errorMessage: k("errors.imageToolNotSupported")
                });
                return
            }
            this.scene.insertElement(n);
            try {
                return await this.initializeImage({
                    imageFile: r,
                    imageElement: n,
                    showCursorImagePreview: i
                })
            } catch (o) {
                return ue(n, {
                    isDeleted: !0
                }),
                this.actionManager.executeAction(ko),
                this.setState({
                    errorMessage: o.message || k("errors.imageInsertError")
                }),
                null
            }
        }
        );
        D(this, "setImagePreviewCursor", async n=>{
            let i;
            try {
                i = await w_(n, {
                    maxWidthOrHeight: 96
                })
            } catch (s) {
                throw s.cause === "UNSUPPORTED" ? new Error(k("errors.unsupportedFileType")) : s
            }
            let o = await ZE(i);
            if (n.type === Re.svg) {
                const s = await CO(o);
                let a = Math.min(s.height, 96)
                  , l = a * (s.width / s.height);
                l > 96 && (l = 96,
                a = l * (s.height / s.width));
                const c = document.createElement("canvas");
                c.height = a,
                c.width = l,
                c.getContext("2d").drawImage(s, 0, 0, l, a),
                o = c.toDataURL(Re.svg)
            }
            this.state.pendingImageElementId && At(this.interactiveCanvas, `url(${o}) 4 4, auto`)
        }
        );
        D(this, "onImageAction", async({insertOnCanvasDirectly: n})=>{
            try {
                const r = this.state.width / 2 + this.state.offsetLeft
                  , i = this.state.height / 2 + this.state.offsetTop
                  , {x: o, y: s} = zt({
                    clientX: r,
                    clientY: i
                }, this.state)
                  , a = await K6({
                    description: "Image",
                    extensions: Object.keys(m6)
                })
                  , l = this.createImageElement({
                    sceneX: o,
                    sceneY: s,
                    addToFrameUnderCursor: !1
                });
                n ? (this.insertImageElement(l, a),
                this.initializeImageDimensions(l),
                this.setState({
                    selectedElementIds: vt({
                        [l.id]: !0
                    }, this.state)
                }, ()=>{
                    this.actionManager.executeAction(ko)
                }
                )) : this.setState({
                    pendingImageElementId: l.id
                }, ()=>{
                    this.insertImageElement(l, a, !0)
                }
                )
            } catch (r) {
                r.name !== "AbortError" ? console.error(r) : console.warn(r),
                this.setState({
                    pendingImageElementId: null,
                    editingElement: null,
                    activeTool: bn(this.state, {
                        type: "selection"
                    })
                }, ()=>{
                    this.actionManager.executeAction(ko)
                }
                )
            }
        }
        );
        D(this, "initializeImageDimensions", (n,r=!1)=>{
            var o;
            const i = Hn(n) && ((o = this.imageCache.get(n.fileId)) == null ? void 0 : o.image);
            if (!i || i instanceof Promise) {
                if (n.width < wc / this.state.zoom.value && n.height < wc / this.state.zoom.value) {
                    const s = 100 / this.state.zoom.value;
                    ue(n, {
                        x: n.x - s / 2,
                        y: n.y - s / 2,
                        width: s,
                        height: s
                    })
                }
                return
            }
            if (r || n.width < wc / this.state.zoom.value && n.height < wc / this.state.zoom.value) {
                const s = Math.max(this.state.height - 120, 160)
                  , a = Math.min(s, Math.floor(this.state.height * .5) / this.state.zoom.value)
                  , l = Math.min(i.naturalHeight, a)
                  , c = l * (i.naturalWidth / i.naturalHeight)
                  , u = n.x + n.width / 2 - c / 2
                  , f = n.y + n.height / 2 - l / 2;
                ue(n, {
                    x: u,
                    y: f,
                    width: c,
                    height: l
                })
            }
        }
        );
        D(this, "updateImageCache", async(n,r=this.files)=>{
            const {updatedFiles: i, erroredFiles: o} = await kO({
                imageCache: this.imageCache,
                fileIds: n.map(s=>s.fileId),
                files: r
            });
            if (i.size || o.size)
                for (const s of n)
                    i.has(s.fileId) && Yt.delete(s);
            return o.size && this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(s=>Hn(s) && o.has(s.fileId) ? Ne(s, {
                status: "error"
            }) : s)),
            {
                updatedFiles: i,
                erroredFiles: o
            }
        }
        );
        D(this, "addNewImagesToImageCache", async(n=TO(this.scene.getNonDeletedElements()),r=this.files)=>{
            const i = n.filter(o=>!o.isDeleted && !this.imageCache.has(o.fileId));
            if (i.length) {
                const {updatedFiles: o} = await this.updateImageCache(i, r);
                o.size && this.scene.triggerUpdate()
            }
        }
        );
        D(this, "scheduleImageRefresh", ca(()=>{
            this.addNewImagesToImageCache()
        }
        , bq));
        D(this, "updateBindingEnabledOnPointerMove", n=>{
            const r = kie(n);
            this.state.isBindingEnabled !== r && this.setState({
                isBindingEnabled: r
            })
        }
        );
        D(this, "maybeSuggestBindingAtCursor", n=>{
            const r = ro(n, this.scene.getNonDeletedElements(), this.scene.getNonDeletedElementsMap());
            this.setState({
                suggestedBindings: r != null ? [r] : []
            })
        }
        );
        D(this, "maybeSuggestBindingsForLinearElementAtCoords", (n,r,i)=>{
            if (!r.length)
                return;
            const o = r.reduce((s,a)=>{
                const l = ro(a, this.scene.getNonDeletedElements(), this.scene.getNonDeletedElementsMap(), Be(n) && He(n));
                return l != null && !Z9(n, i == null ? void 0 : i.id, l) && s.push(l),
                s
            }
            , []);
            this.setState({
                suggestedBindings: o
            })
        }
        );
        D(this, "handleInteractiveCanvasRef", n=>{
            var r, i, o;
            n !== null ? (this.interactiveCanvas = n,
            this.interactiveCanvas.addEventListener(ce.WHEEL, this.handleWheel),
            this.interactiveCanvas.addEventListener(ce.TOUCH_START, this.onTouchStart),
            this.interactiveCanvas.addEventListener(ce.TOUCH_END, this.onTouchEnd)) : ((r = this.interactiveCanvas) == null || r.removeEventListener(ce.WHEEL, this.handleWheel),
            (i = this.interactiveCanvas) == null || i.removeEventListener(ce.TOUCH_START, this.onTouchStart),
            (o = this.interactiveCanvas) == null || o.removeEventListener(ce.TOUCH_END, this.onTouchEnd))
        }
        );
        D(this, "handleAppOnDrop", async n=>{
            var l, c, u, f;
            const {file: r, fileHandle: i} = await moe(n)
              , {x: o, y: s} = zt(n, this.state);
            try {
                if (qc(r) && this.isToolSupported("image")) {
                    if ((r == null ? void 0 : r.type) === Re.png || (r == null ? void 0 : r.type) === Re.svg)
                        try {
                            const m = await r4(r, this.state, this.scene.getElementsIncludingDeleted(), i);
                            this.syncActionResult({
                                ...m,
                                appState: {
                                    ...m.appState || this.state,
                                    isLoading: !1
                                },
                                replaceFiles: !0,
                                storeAction: ee.CAPTURE
                            });
                            return
                        } catch (m) {
                            if (m.name !== "EncodingError")
                                throw new Error(k("alerts.couldNotLoadInvalidFile"))
                        }
                    const h = this.createImageElement({
                        sceneX: o,
                        sceneY: s
                    });
                    this.insertImageElement(h, r),
                    this.initializeImageDimensions(h),
                    this.setState({
                        selectedElementIds: vt({
                            [h.id]: !0
                        }, this.state)
                    });
                    return
                }
            } catch (h) {
                return this.setState({
                    isLoading: !1,
                    errorMessage: h.message
                })
            }
            const a = n.dataTransfer.getData(Re.excalidrawlib);
            if (a && typeof a == "string") {
                try {
                    const h = aO(a);
                    this.addElementsFromPasteOrLibrary({
                        elements: fB(h),
                        position: n,
                        files: null
                    })
                } catch (h) {
                    this.setState({
                        errorMessage: h.message
                    })
                }
                return
            }
            if (r && await this.loadFileToCanvas(r, i),
            (c = (l = n.dataTransfer) == null ? void 0 : l.types) != null && c.includes("text/plain")) {
                const h = (u = n.dataTransfer) == null ? void 0 : u.getData("text");
                if (h && ym(h, this.props.validateEmbeddable) && (/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(h) || ((f = Nd(h)) == null ? void 0 : f.type) === "video")) {
                    const m = this.insertEmbeddableElement({
                        sceneX: o,
                        sceneY: s,
                        link: Is(h)
                    });
                    m && this.setState({
                        selectedElementIds: {
                            [m.id]: !0
                        }
                    })
                }
            }
        }
        );
        D(this, "loadFileToCanvas", async(n,r)=>{
            n = await i4(n);
            try {
                const i = this.scene.getElementsIncludingDeleted();
                let o;
                try {
                    o = await sO(n, this.state, i, r)
                } catch (s) {
                    const a = s instanceof Nc;
                    if (a && s.code === "IMAGE_NOT_CONTAINS_SCENE_DATA" && !this.isToolSupported("image")) {
                        this.setState({
                            isLoading: !1,
                            errorMessage: k("errors.imageToolNotSupported")
                        });
                        return
                    }
                    const l = k(a ? "alerts.cannotRestoreFromImage" : "alerts.couldNotLoadInvalidFile");
                    this.setState({
                        isLoading: !1,
                        errorMessage: l
                    })
                }
                if (!o)
                    return;
                o.type === Re.excalidraw ? (ka(i.concat(o.data.elements)),
                this.store.updateSnapshot(De(i), this.state),
                this.setState({
                    isLoading: !0
                }),
                this.syncActionResult({
                    ...o.data,
                    appState: {
                        ...o.data.appState || this.state,
                        isLoading: !1
                    },
                    replaceFiles: !0,
                    storeAction: ee.CAPTURE
                })) : o.type === Re.excalidrawlib && await this.library.updateLibrary({
                    libraryItems: n,
                    merge: !0,
                    openLibraryMenu: !0
                }).catch(s=>{
                    console.error(s),
                    this.setState({
                        errorMessage: k("errors.importLibraryError")
                    })
                }
                )
            } catch (i) {
                this.setState({
                    isLoading: !1,
                    errorMessage: i.message
                })
            }
        }
        );
        D(this, "handleCanvasContextMenu", n=>{
            if (n.preventDefault(),
            ("pointerType"in n.nativeEvent && n.nativeEvent.pointerType === "touch" || "pointerType"in n.nativeEvent && n.nativeEvent.pointerType === "pen" && n.button !== fc.SECONDARY) && this.state.activeTool.type !== "selection")
                return;
            const {x: r, y: i} = zt(n, this.state)
              , o = this.getElementAtPosition(r, i, {
                preferSelected: !0,
                includeLockedElements: !0
            })
              , s = this.scene.getSelectedElements(this.state)
              , a = this.isHittingCommonBoundingBoxOfSelectedElements({
                x: r,
                y: i
            }, s)
              , l = o || a ? "element" : "canvas"
              , c = this.excalidrawContainerRef.current
              , {top: u, left: f} = c.getBoundingClientRect()
              , h = n.clientX - f
              , m = n.clientY - u;
            at("contextMenu", "openContextMenu", l),
            this.setState({
                ...o && !this.state.selectedElementIds[o.id] ? {
                    ...this.state,
                    ...Ii({
                        editingGroupId: this.state.editingGroupId,
                        selectedElementIds: {
                            [o.id]: !0
                        }
                    }, this.scene.getNonDeletedElements(), this.state, this),
                    selectedLinearElement: je(o) ? new ke(o) : null
                } : this.state,
                showHyperlinkPopup: !1
            }, ()=>{
                this.setState({
                    contextMenu: {
                        top: m,
                        left: h,
                        items: this.getContextMenuItems(l)
                    }
                })
            }
            )
        }
        );
        D(this, "maybeDragNewGenericElement", (n,r)=>{
            var m, v, y;
            const i = this.state.selectionElement
              , o = n.lastCoords;
            if (i && this.state.activeTool.type !== "eraser") {
                tA(i, this.state.activeTool.type, n.origin.x, n.origin.y, o.x, o.y, xr(n.origin.x, o.x), xr(n.origin.y, o.y), kh(r), KE(r), this.state.zoom.value);
                return
            }
            const s = this.state.newElement;
            if (!s)
                return;
            let[a,l] = er(o.x, o.y, r[U.CTRL_OR_CMD] ? null : this.getEffectiveGridSize());
            const c = Hn(s) && ((m = this.imageCache.get(s.fileId)) == null ? void 0 : m.image)
              , u = c && !(c instanceof Promise) ? c.width / c.height : null;
            this.maybeCacheReferenceSnapPoints(r, [s]);
            const {snapOffset: f, snapLines: h} = lge(s, this, r, {
                x: n.originInGrid.x + (((v = this.state.originSnapOffset) == null ? void 0 : v.x) ?? 0),
                y: n.originInGrid.y + (((y = this.state.originSnapOffset) == null ? void 0 : y.y) ?? 0)
            }, {
                x: a - n.originInGrid.x,
                y: l - n.originInGrid.y
            }, this.scene.getNonDeletedElementsMap());
            a += f.x,
            l += f.y,
            this.setState({
                snapLines: h
            }),
            tA(s, this.state.activeTool.type, n.originInGrid.x, n.originInGrid.y, a, l, xr(n.originInGrid.x, a), xr(n.originInGrid.y, l), ga(s) ? !kh(r) : kh(r), KE(r), this.state.zoom.value, u, this.state.originSnapOffset),
            (this.state.activeTool.type === Fn.frame || this.state.activeTool.type === Fn.magicframe) && this.setState({
                elementsToHighlight: Em(this.scene.getNonDeletedElements(), s, this.state, this.scene.getNonDeletedElementsMap())
            })
        }
        );
        D(this, "maybeHandleResize", (n,r)=>{
            const i = this.scene.getSelectedElements(this.state)
              , o = i.filter(f=>Ue(f))
              , s = n.resize.handleType;
            if (o.length > 0 && s === "rotation" || i.length === 1 && He(i[0]))
                return !1;
            this.setState({
                isResizing: s && s !== "rotation",
                isRotating: s === "rotation",
                activeEmbeddable: null
            });
            const a = n.lastCoords;
            let[l,c] = er(a.x - n.resize.offset.x, a.y - n.resize.offset.y, r[U.CTRL_OR_CMD] ? null : this.getEffectiveGridSize());
            const u = new Map;
            if (o.forEach(f=>{
                Ia(this.scene.getNonDeletedElements(), f.id).forEach(m=>{
                    u.set(f.id + m.id, {
                        x: m.x - f.x,
                        y: m.y - f.y
                    })
                }
                )
            }
            ),
            !this.state.selectedElementsAreBeingDragged) {
                const [f,h] = er(a.x, a.y, r[U.CTRL_OR_CMD] ? null : this.getEffectiveGridSize())
                  , m = {
                    x: f - n.originInGrid.x,
                    y: h - n.originInGrid.y
                }
                  , v = [...n.originalElements.values()];
                this.maybeCacheReferenceSnapPoints(r, i);
                const {snapOffset: y, snapLines: E} = age(i, dt(v, this.state), this, r, m, s);
                l += y.x,
                c += y.y,
                this.setState({
                    snapLines: E
                })
            }
            if (ale(n.originalElements, s, i, this.scene.getElementsMapIncludingDeleted(), bg(r), KE(r), i.some(f=>ga(f)) ? !kh(r) : kh(r), l, c, n.resize.center.x, n.resize.center.y)) {
                const f = XE(i, this.scene.getNonDeletedElementsMap())
                  , h = new Set;
                return o.forEach(m=>{
                    Em(this.scene.getNonDeletedElements(), m, this.state, this.scene.getNonDeletedElementsMap()).forEach(v=>h.add(v))
                }
                ),
                this.setState({
                    elementsToHighlight: [...h],
                    suggestedBindings: f
                }),
                !0
            }
            return !1
        }
        );
        D(this, "getContextMenuItems", n=>{
            const r = [];
            return r.push(UA, $A),
            n === "canvas" ? this.state.viewModeEnabled ? [...r, WA, V_, PM, Y_] : [BA, Rr, UA, $A, HA, Rr, Nle, cfe, Rr, WA, Xde, V_, PM, Y_] : (r.push(HA),
            this.state.viewModeEnabled ? [Cm, ...r] : [Rr, zA, Cm, BA, a1e, l1e, Rr, ...r, Rr, Dde, Ode, Rr, Fde, X1e, Zde, qde, efe, Bde, Rr, Hde, Rr, Ple, Rle, Dle, Ole, Rr, Yde, jde, Rr, zhe, jF, $le, lfe, Rr, BN])
        }
        );
        D(this, "handleWheel", Xt(n=>{
            if (n.preventDefault(),
            Dh)
                return;
            const {deltaX: r, deltaY: i} = n;
            if (n.metaKey || n.ctrlKey) {
                const o = Math.sign(i)
                  , s = Qg * 100
                  , a = Math.abs(i);
                let l = i;
                a > s && (l = s * o);
                let c = this.state.zoom.value - l / 100;
                c += Math.log10(Math.max(1, this.state.zoom.value)) * -o * Math.min(1, a / 20),
                this.translateCanvas(u=>({
                    ...$c({
                        viewportX: this.lastViewportPosition.x,
                        viewportY: this.lastViewportPosition.y,
                        nextZoom: bs(c)
                    }, u),
                    shouldCacheIgnoreZoom: !0
                })),
                this.resetShouldCacheIgnoreZoomDebounced();
                return
            }
            if (n.shiftKey) {
                this.translateCanvas(({zoom: o, scrollX: s})=>({
                    scrollX: s - (i || r) / o.value
                }));
                return
            }
            this.translateCanvas(({zoom: o, scrollX: s, scrollY: a})=>({
                scrollX: s - r / o.value,
                scrollY: a - i / o.value
            }))
        }
        ));
        D(this, "savePointer", (n,r,i)=>{
            var l, c;
            if (!n || !r)
                return;
            const {x: o, y: s} = zt({
                clientX: n,
                clientY: r
            }, this.state)
              , a = {
                x: o,
                y: s,
                tool: this.state.activeTool.type === "laser" ? "laser" : "pointer"
            };
            (c = (l = this.props).onPointerUpdate) == null || c.call(l, {
                pointer: a,
                button: i,
                pointersMap: mt.pointers
            })
        }
        );
        D(this, "resetShouldCacheIgnoreZoomDebounced", Wl(()=>{
            this.unmounted || this.setState({
                shouldCacheIgnoreZoom: !1
            })
        }
        , 300));
        D(this, "updateDOMRect", n=>{
            var r;
            if ((r = this.excalidrawContainerRef) != null && r.current) {
                const i = this.excalidrawContainerRef.current
                  , {width: o, height: s, left: a, top: l} = i.getBoundingClientRect()
                  , {width: c, height: u, offsetTop: f, offsetLeft: h} = this.state;
                if (o === c && s === u && a === h && l === f) {
                    n && n();
                    return
                }
                this.setState({
                    width: o,
                    height: s,
                    offsetLeft: a,
                    offsetTop: l
                }, ()=>{
                    n && n()
                }
                )
            }
        }
        );
        D(this, "refresh", ()=>{
            this.setState({
                ...this.getCanvasOffsets()
            })
        }
        );
        const r = ho()
          , {excalidrawAPI: i, viewModeEnabled: o=!1, zenModeEnabled: s=!1, gridModeEnabled: a=!1, objectsSnapModeEnabled: l=!1, theme: c=r.theme, name: u=`${k("labels.untitled")}-${Dk()}`} = n;
        if (this.state = {
            ...r,
            theme: c,
            isLoading: !0,
            ...this.getCanvasOffsets(),
            viewModeEnabled: o,
            zenModeEnabled: s,
            objectsSnapModeEnabled: l,
            gridModeEnabled: a ?? r.gridModeEnabled,
            name: u,
            width: window.innerWidth,
            height: window.innerHeight
        },
        this.id = T6(),
        this.library = new lhe(this),
        this.actionManager = new Hhe(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),
        this.scene = new hi,
        this.canvas = document.createElement("canvas"),
        this.rc = tc.canvas(this.canvas),
        this.renderer = new BM(this.scene),
        this.store = new Uoe,
        this.history = new Hc,
        i) {
            const f = {
                updateScene: this.updateScene,
                updateLibrary: this.library.updateLibrary,
                addFiles: this.addFiles,
                resetScene: this.resetScene,
                getSceneElementsIncludingDeleted: this.getSceneElementsIncludingDeleted,
                history: {
                    clear: this.resetHistory
                },
                scrollToContent: this.scrollToContent,
                getSceneElements: this.getSceneElements,
                getAppState: ()=>this.state,
                getFiles: ()=>this.files,
                getName: this.getName,
                registerAction: h=>{
                    this.actionManager.registerAction(h)
                }
                ,
                refresh: this.refresh,
                setToast: this.setToast,
                id: this.id,
                setActiveTool: this.setActiveTool,
                setCursor: this.setCursor,
                resetCursor: this.resetCursor,
                updateFrameRendering: this.updateFrameRendering,
                toggleSidebar: this.toggleSidebar,
                onChange: h=>this.onChangeEmitter.on(h),
                onPointerDown: h=>this.onPointerDownEmitter.on(h),
                onPointerUp: h=>this.onPointerUpEmitter.on(h),
                onScrollChange: h=>this.onScrollChangeEmitter.on(h),
                onUserFollow: h=>this.onUserFollowEmitter.on(h)
            };
            typeof i == "function" ? i(f) : console.error("excalidrawAPI should be a function!")
        }
        this.excalidrawContainerValue = {
            container: this.excalidrawContainerRef.current,
            id: this.id
        },
        this.fonts = new Yo({
            scene: this.scene
        }),
        this.history = new Hc,
        this.actionManager.registerAll(Q3),
        this.actionManager.registerAction($he(this.history, this.store)),
        this.actionManager.registerAction(Uhe(this.history, this.store))
    }
    onWindowMessage(n) {
        if (n.origin !== "https://player.vimeo.com" && n.origin !== "https://www.youtube.com")
            return;
        let r = null;
        try {
            r = JSON.parse(n.data)
        } catch {}
        if (r)
            switch (n.origin) {
            case "https://player.vimeo.com":
                if (r.method === "paused") {
                    let i = null;
                    const o = document.body.querySelectorAll("iframe.excalidraw__embeddable");
                    if (!o)
                        break;
                    for (const s of o)
                        s.contentWindow === n.source && (i = s.contentWindow);
                    i == null || i.postMessage(JSON.stringify({
                        method: r.value ? "play" : "pause",
                        value: !0
                    }), "*")
                }
                break;
            case "https://www.youtube.com":
                if (r.event === "infoDelivery" && r.info && r.id && typeof r.info.playerState == "number") {
                    const i = r.id
                      , o = r.info.playerState;
                    Object.values(d0).includes(o) && Pb.set(i, o)
                }
                break
            }
    }
    cacheEmbeddableRef(n, r) {
        r && this.iFrameRefs.set(n.id, r)
    }
    getHTMLIFrameElement(n) {
        return this.iFrameRefs.get(n.id)
    }
    handleEmbeddableCenterClick(n) {
        var i, o, s, a;
        if (((i = this.state.activeEmbeddable) == null ? void 0 : i.element) === n && ((o = this.state.activeEmbeddable) == null ? void 0 : o.state) === "active" || (setTimeout(()=>{
            this.setState({
                activeEmbeddable: {
                    element: n,
                    state: "active"
                },
                selectedElementIds: {
                    [n.id]: !0
                },
                newElement: null,
                selectionElement: null
            })
        }
        , 100),
        rl(n)))
            return;
        const r = this.getHTMLIFrameElement(n);
        if (r != null && r.contentWindow) {
            if (r.src.includes("youtube")) {
                const l = Pb.get(n.id);
                switch (l || (Pb.set(n.id, d0.UNSTARTED),
                r.contentWindow.postMessage(JSON.stringify({
                    event: "listening",
                    id: n.id
                }), "*")),
                l) {
                case d0.PLAYING:
                case d0.BUFFERING:
                    (s = r.contentWindow) == null || s.postMessage(JSON.stringify({
                        event: "command",
                        func: "pauseVideo",
                        args: ""
                    }), "*");
                    break;
                default:
                    (a = r.contentWindow) == null || a.postMessage(JSON.stringify({
                        event: "command",
                        func: "playVideo",
                        args: ""
                    }), "*")
                }
            }
            r.src.includes("player.vimeo.com") && r.contentWindow.postMessage(JSON.stringify({
                method: "paused"
            }), "*")
        }
    }
    isIframeLikeElementCenter(n, r, i, o) {
        var s, a;
        return n && !r.altKey && !r.shiftKey && !r.metaKey && !r.ctrlKey && (((s = this.state.activeEmbeddable) == null ? void 0 : s.element) !== n || ((a = this.state.activeEmbeddable) == null ? void 0 : a.state) === "hover" || !this.state.activeEmbeddable) && i >= n.x + n.width / 3 && i <= n.x + 2 * n.width / 3 && o >= n.y + n.height / 3 && o <= n.y + 2 * n.height / 3
    }
    renderEmbeddables() {
        const n = this.state.zoom.value
          , r = this.state.width
          , i = this.state.height
          , o = this.scene.getNonDeletedElements().filter(s=>Br(s) && this.embedsValidationStatus.get(s.id) === !0 || rl(s));
        return g(Se, {
            children: o.map(s=>{
                var y, E, b, _, x, C, P, M;
                const {x: a, y: l} = Bo({
                    sceneX: s.x,
                    sceneY: s.y
                }, this.state)
                  , c = N2(s, r, i, this.state, this.scene.getNonDeletedElementsMap())
                  , u = this.initializedEmbeds.has(s.id);
                if (c && !u && this.initializedEmbeds.add(s.id),
                !(c || u))
                    return null;
                let h;
                if (rl(s)) {
                    h = null;
                    const A = (((y = s.customData) == null ? void 0 : y.generationData) ?? this.magicGenerations.get(s.id)) || {
                        status: "error",
                        message: "No generation data",
                        code: "ERR_NO_GENERATION_DATA"
                    };
                    if (A.status === "done") {
                        const I = A.html;
                        h = {
                            intrinsicSize: {
                                w: s.width,
                                h: s.height
                            },
                            type: "document",
                            srcdoc: ()=>I
                        }
                    } else if (A.status === "pending")
                        h = {
                            intrinsicSize: {
                                w: s.width,
                                h: s.height
                            },
                            type: "document",
                            srcdoc: ()=>C2(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme === Oe.DARK ? "white" : "black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)
                        };
                    else {
                        let I;
                        A.code === "ERR_GENERATION_INTERRUPTED" ? I = "Generation was interrupted..." : I = A.message || "Generation failed",
                        h = {
                            intrinsicSize: {
                                w: s.width,
                                h: s.height
                            },
                            type: "document",
                            srcdoc: ()=>C2(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${Qe.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${I}</h3>
                  `)
                        }
                    }
                } else
                    h = Nd(wD(s.link || ""));
                const m = ((E = this.state.activeEmbeddable) == null ? void 0 : E.element) === s && ((b = this.state.activeEmbeddable) == null ? void 0 : b.state) === "active"
                  , v = ((_ = this.state.activeEmbeddable) == null ? void 0 : _.element) === s && ((x = this.state.activeEmbeddable) == null ? void 0 : x.state) === "hover";
                return g("div", {
                    className: xe("excalidraw__embeddable-container", {
                        "is-hovered": v
                    }),
                    style: {
                        transform: c ? `translate(${a - this.state.offsetLeft}px, ${l - this.state.offsetTop}px) scale(${n})` : "none",
                        display: c ? "block" : "none",
                        opacity: sN(s, Pi(s, this.scene.getNonDeletedElementsMap()), this.elementsPendingErasure, null),
                        "--embeddable-radius": `${Ol(Math.min(s.width, s.height), s)}px`
                    },
                    children: L("div", {
                        className: "excalidraw__embeddable-container__inner",
                        style: {
                            width: c ? `${s.width}px` : 0,
                            height: c ? `${s.height}px` : 0,
                            transform: c ? `rotate(${s.angle}rad)` : "none",
                            pointerEvents: m ? Ec.enabled : Ec.disabled
                        },
                        children: [v && g("div", {
                            className: "excalidraw__embeddable-hint",
                            children: k("buttons.embeddableInteractionButton")
                        }), g("div", {
                            className: "excalidraw__embeddable__outer",
                            style: {
                                padding: `${s.strokeWidth}px`
                            },
                            children: (Br(s) ? (P = (C = this.props).renderEmbeddable) == null ? void 0 : P.call(C, s, this.state) : null) ?? g("iframe", {
                                ref: A=>this.cacheEmbeddableRef(s, A),
                                className: "excalidraw__embeddable",
                                srcDoc: (h == null ? void 0 : h.type) === "document" ? h.srcdoc(this.state.theme) : void 0,
                                src: (h == null ? void 0 : h.type) !== "document" ? (h == null ? void 0 : h.link) ?? "" : void 0,
                                scrolling: "no",
                                referrerPolicy: "no-referrer-when-downgrade",
                                title: "Excalidraw Embedded Content",
                                allow: "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",
                                allowFullScreen: !0,
                                sandbox: `${(M = h == null ? void 0 : h.sandbox) != null && M.allowSameOrigin ? "allow-same-origin" : ""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`
                            })
                        })]
                    })
                }, s.id)
            }
            )
        })
    }
    toggleOverscrollBehavior(n) {
        document.documentElement.style.overscrollBehaviorX = n.type === "pointerenter" ? "none" : "auto"
    }
    render() {
        var f, h, m, v, y;
        const n = this.scene.getSelectedElements(this.state)
          , {renderTopRightUI: r, renderCustomStats: i} = this.props
          , o = this.scene.getSceneNonce()
          , {elementsMap: s, visibleElements: a} = this.renderer.getRenderableElements({
            sceneNonce: o,
            zoom: this.state.zoom,
            offsetLeft: this.state.offsetLeft,
            offsetTop: this.state.offsetTop,
            scrollX: this.state.scrollX,
            scrollY: this.state.scrollY,
            height: this.state.height,
            width: this.state.width,
            editingElement: this.state.editingElement,
            pendingImageElementId: this.state.pendingImageElementId
        })
          , l = this.scene.getNonDeletedElementsMap()
          , c = !(this.state.editingElement && je(this.state.editingElement)) && (this.state.selectionElement || this.state.newElement || this.state.selectedElementsAreBeingDragged || this.state.resizingElement || this.state.activeTool.type === "laser" && this.state.cursorButton === "down" || this.state.editingElement && !ye(this.state.editingElement))
          , u = n[0];
        return g("div", {
            className: xe("excalidraw excalidraw-container", {
                "excalidraw--view-mode": this.state.viewModeEnabled,
                "excalidraw--mobile": this.device.editor.isMobile
            }),
            style: {
                "--ui-pointerEvents": c ? Ec.disabled : Ec.enabled
            },
            ref: this.excalidrawContainerRef,
            onDrop: this.handleAppOnDrop,
            tabIndex: 0,
            onKeyDown: this.props.handleKeyboardGlobally ? void 0 : this.onKeyDown,
            onPointerEnter: this.toggleOverscrollBehavior,
            onPointerLeave: this.toggleOverscrollBehavior,
            children: g(Pz.Provider, {
                value: this,
                children: g(Rz.Provider, {
                    value: this.props,
                    children: g(d5.Provider, {
                        value: this.excalidrawContainerValue,
                        children: g(u5.Provider, {
                            value: this.device,
                            children: g(g5.Provider, {
                                value: this.setAppState,
                                children: g(h5.Provider, {
                                    value: this.state,
                                    children: L(f5.Provider, {
                                        value: this.scene.getNonDeletedElements(),
                                        children: [L(p5.Provider, {
                                            value: this.actionManager,
                                            children: [g(i1e, {
                                                canvas: this.canvas,
                                                appState: this.state,
                                                files: this.files,
                                                setAppState: this.setAppState,
                                                actionManager: this.actionManager,
                                                elements: this.scene.getNonDeletedElements(),
                                                onLockToggle: this.toggleLock,
                                                onPenModeToggle: this.togglePenMode,
                                                onHandToolToggle: this.onHandToolToggle,
                                                langCode: uf().code,
                                                renderTopRightUI: r,
                                                renderCustomStats: i,
                                                showExitZenModeBtn: typeof ((f = this.props) == null ? void 0 : f.zenModeEnabled) > "u" && this.state.zenModeEnabled,
                                                UIOptions: this.props.UIOptions,
                                                onExportImage: this.onExportImage,
                                                renderWelcomeScreen: !this.state.isLoading && this.state.showWelcomeScreen && this.state.activeTool.type === "selection" && !this.state.zenModeEnabled && !this.scene.getElementsIncludingDeleted().length,
                                                app: this,
                                                isCollaborating: this.props.isCollaborating,
                                                openAIKey: this.OPENAI_KEY,
                                                isOpenAIKeyPersisted: this.OPENAI_KEY_IS_PERSISTED,
                                                onOpenAIAPIKeyChange: this.onOpenAIKeyChange,
                                                onMagicSettingsConfirm: this.onMagicSettingsConfirm,
                                                children: this.props.children
                                            }), g("div", {
                                                className: "excalidraw-textEditorContainer"
                                            }), g("div", {
                                                className: "excalidraw-contextMenuContainer"
                                            }), g("div", {
                                                className: "excalidraw-eye-dropper-container"
                                            }), g(P1e, {
                                                trails: [this.laserTrails, this.eraserTrail]
                                            }), n.length === 1 && this.state.showHyperlinkPopup && g(rfe, {
                                                element: u,
                                                elementsMap: l,
                                                setAppState: this.setAppState,
                                                onLinkOpen: this.props.onLinkOpen,
                                                setToast: this.setToast,
                                                updateEmbedValidationStatus: this.updateEmbedValidationStatus
                                            }, u.id), this.props.aiEnabled !== !1 && n.length === 1 && jh(u) && g(zM, {
                                                element: u,
                                                elementsMap: s,
                                                children: g(Tb, {
                                                    title: k("labels.convertToCode"),
                                                    icon: B6,
                                                    checked: !1,
                                                    onChange: ()=>this.onMagicFrameGenerate(u, "button")
                                                })
                                            }), n.length === 1 && rl(u) && ((m = (h = u.customData) == null ? void 0 : h.generationData) == null ? void 0 : m.status) === "done" && L(zM, {
                                                element: u,
                                                elementsMap: s,
                                                children: [g(Tb, {
                                                    title: k("labels.copySource"),
                                                    icon: Bv,
                                                    checked: !1,
                                                    onChange: ()=>this.onIframeSrcCopy(u)
                                                }), g(Tb, {
                                                    title: "Enter fullscreen",
                                                    icon: mte,
                                                    checked: !1,
                                                    onChange: ()=>{
                                                        const E = this.getHTMLIFrameElement(u);
                                                        if (E)
                                                            try {
                                                                E.requestFullscreen(),
                                                                this.setState({
                                                                    activeEmbeddable: {
                                                                        element: u,
                                                                        state: "active"
                                                                    },
                                                                    selectedElementIds: {
                                                                        [u.id]: !0
                                                                    },
                                                                    newElement: null,
                                                                    selectionElement: null
                                                                })
                                                            } catch (b) {
                                                                console.warn(b),
                                                                this.setState({
                                                                    errorMessage: "Couldn't enter fullscreen"
                                                                })
                                                            }
                                                    }
                                                })]
                                            }), this.state.toast !== null && g(s1e, {
                                                message: this.state.toast.message,
                                                onClose: ()=>this.setToast(null),
                                                duration: this.state.toast.duration,
                                                closable: this.state.toast.closable
                                            }), this.state.contextMenu && g(Whe, {
                                                items: this.state.contextMenu.items,
                                                top: this.state.contextMenu.top,
                                                left: this.state.contextMenu.left,
                                                actionManager: this.actionManager,
                                                onClose: E=>{
                                                    this.setState({
                                                        contextMenu: null
                                                    }, ()=>{
                                                        this.focusContainer(),
                                                        E == null || E()
                                                    }
                                                    )
                                                }
                                            }), g(L1e, {
                                                canvas: this.canvas,
                                                rc: this.rc,
                                                elementsMap: s,
                                                allElementsMap: l,
                                                visibleElements: a,
                                                sceneNonce: o,
                                                selectionNonce: (v = this.state.selectionElement) == null ? void 0 : v.versionNonce,
                                                scale: window.devicePixelRatio,
                                                appState: this.state,
                                                renderConfig: {
                                                    imageCache: this.imageCache,
                                                    isExporting: !1,
                                                    renderGrid: xp(this),
                                                    canvasBackgroundColor: this.state.viewBackgroundColor,
                                                    embedsValidationStatus: this.embedsValidationStatus,
                                                    elementsPendingErasure: this.elementsPendingErasure,
                                                    pendingFlowchartNodes: this.flowChartCreator.pendingNodes
                                                }
                                            }), g(T1e, {
                                                containerRef: this.excalidrawContainerRef,
                                                canvas: this.interactiveCanvas,
                                                elementsMap: s,
                                                visibleElements: a,
                                                allElementsMap: l,
                                                selectedElements: n,
                                                sceneNonce: o,
                                                selectionNonce: (y = this.state.selectionElement) == null ? void 0 : y.versionNonce,
                                                scale: window.devicePixelRatio,
                                                appState: this.state,
                                                device: this.device,
                                                renderInteractiveSceneCallback: this.renderInteractiveSceneCallback,
                                                handleCanvasRef: this.handleInteractiveCanvasRef,
                                                onContextMenu: this.handleCanvasContextMenu,
                                                onPointerMove: this.handleCanvasPointerMove,
                                                onPointerUp: this.handleCanvasPointerUp,
                                                onPointerCancel: this.removePointer,
                                                onTouchMove: this.handleTouchMove,
                                                onPointerDown: this.handleCanvasPointerDown,
                                                onDoubleClick: this.handleCanvasDoubleClick
                                            }), this.state.userToFollow && g(B1e, {
                                                width: this.state.width,
                                                height: this.state.height,
                                                userToFollow: this.state.userToFollow,
                                                onDisconnect: this.maybeUnfollowRemoteUser
                                            }), this.renderFrameNames()]
                                        }), this.renderEmbeddables()]
                                    })
                                })
                            })
                        })
                    })
                })
            })
        })
    }
    getTextFromElements(n) {
        return n.reduce((i,o)=>(ye(o) && i.push(o.text),
        i), []).join(`

`)
    }
    async onMagicFrameGenerate(n, r) {
        var h;
        if (!this.OPENAI_KEY) {
            this.setState({
                openDialog: {
                    name: "settings",
                    tab: "diagram-to-code",
                    source: "generation"
                }
            }),
            at("ai", "generate (missing key)", "d2c");
            return
        }
        const i = p4(this.scene.getNonDeletedElements(), n).filter(m=>!jh(m));
        if (!i.length) {
            r === "button" ? (this.setState({
                errorMessage: "Cannot generate from an empty frame"
            }),
            at("ai", "generate (no-children)", "d2c")) : this.setActiveTool({
                type: "magicframe"
            });
            return
        }
        const o = this.insertIframeElement({
            sceneX: n.x + n.width + 30,
            sceneY: n.y,
            width: n.width,
            height: n.height
        });
        if (!o)
            return;
        this.updateMagicGeneration({
            frameElement: o,
            data: {
                status: "pending"
            }
        }),
        this.setState({
            selectedElementIds: {
                [o.id]: !0
            }
        });
        const s = await Hse({
            elements: this.scene.getNonDeletedElements(),
            appState: {
                ...this.state,
                exportBackground: !0,
                viewBackgroundColor: this.state.viewBackgroundColor
            },
            exportingFrame: n,
            files: this.files
        })
          , a = await ZE(s)
          , l = this.getTextFromElements(i);
        at("ai", "generate (start)", "d2c");
        const c = await N1e({
            image: a,
            apiKey: this.OPENAI_KEY,
            text: l,
            theme: this.state.theme
        });
        if (!c.ok) {
            at("ai", "generate (failed)", "d2c"),
            console.error(c.error),
            this.updateMagicGeneration({
                frameElement: o,
                data: {
                    status: "error",
                    code: "ERR_OAI",
                    message: ((h = c.error) == null ? void 0 : h.message) || "Unknown error during generation"
                }
            });
            return
        }
        if (at("ai", "generate (success)", "d2c"),
        c.choices[0].message.content == null) {
            this.updateMagicGeneration({
                frameElement: o,
                data: {
                    status: "error",
                    code: "ERR_OAI",
                    message: "Nothing genereated :("
                }
            });
            return
        }
        const u = c.choices[0].message.content
          , f = u.slice(u.indexOf("<!DOCTYPE html>"), u.indexOf("</html>") + 7);
        this.updateMagicGeneration({
            frameElement: o,
            data: {
                status: "done",
                html: f
            }
        })
    }
    onIframeSrcCopy(n) {
        var r, i;
        ((i = (r = n.customData) == null ? void 0 : r.generationData) == null ? void 0 : i.status) === "done" && (Pu(n.customData.generationData.html),
        this.setToast({
            message: "copied to clipboard",
            closable: !1,
            duration: 1500
        }))
    }
    async componentDidMount() {
        var r;
        this.unmounted = !1,
        this.excalidrawContainerValue.container = this.excalidrawContainerRef.current,
        this.store.onStoreIncrementEmitter.on(i=>{
            this.history.record(i.elementsChange, i.appStateChange)
        }
        ),
        this.scene.onUpdate(this.triggerRender),
        this.addEventListeners(),
        this.props.autoFocus && this.excalidrawContainerRef.current && this.focusContainer(),
        this.refreshViewportBreakpoints(),
        this.refreshEditorBreakpoints(),
        O3 && this.excalidrawContainerRef.current && (this.resizeObserver = new ResizeObserver(()=>{
            this.refreshEditorBreakpoints(),
            this.updateDOMRect()
        }
        ),
        (r = this.resizeObserver) == null || r.observe(this.excalidrawContainerRef.current)),
        new URLSearchParams(window.location.search.slice(1)).has("web-share-target") ? this.restoreFileFromShare() : this.updateDOMRect(this.initializeScene),
        dq() && !Jae() && this.setState({
            errorMessage: g(c1e, {})
        })
    }
    componentWillUnmount() {
        var n, r;
        (n = window.launchQueue) == null || n.setConsumer(()=>{}
        ),
        this.renderer.destroy(),
        this.scene.destroy(),
        this.scene = new hi,
        this.fonts = new Yo({
            scene: this.scene
        }),
        this.renderer = new BM(this.scene),
        this.files = {},
        this.imageCache.clear(),
        (r = this.resizeObserver) == null || r.disconnect(),
        this.unmounted = !0,
        this.removeEventListeners(),
        this.library.destroy(),
        this.laserTrails.stop(),
        this.eraserTrail.stop(),
        this.onChangeEmitter.clear(),
        this.store.onStoreIncrementEmitter.clear(),
        Yt.destroy(),
        Do.destroy(),
        clearTimeout(qa),
        Mn.clearCache(),
        Ii.clearCache(),
        qa = 0,
        document.documentElement.style.overscrollBehaviorX = ""
    }
    removeEventListeners() {
        this.onRemoveEventListenersEmitter.trigger()
    }
    addEventListeners() {
        this.removeEventListeners(),
        this.props.handleKeyboardGlobally && this.onRemoveEventListenersEmitter.once(fn(document, ce.KEYDOWN, this.onKeyDown, !1)),
        this.onRemoveEventListenersEmitter.once(fn(this.excalidrawContainerRef.current, ce.WHEEL, this.onWheel, {
            passive: !1
        }), fn(window, ce.MESSAGE, this.onWindowMessage, !1), fn(document, ce.POINTER_UP, this.removePointer), fn(document, ce.COPY, this.onCopy), fn(document, ce.KEYUP, this.onKeyUp, {
            passive: !0
        }), fn(document, ce.POINTER_MOVE, this.updateCurrentCursorPosition), fn(document.fonts, "loadingdone", n=>{
            const r = n.fontfaces;
            this.fonts.onLoaded(r)
        }
        ), fn(document, ce.GESTURE_START, this.onGestureStart, !1), fn(document, ce.GESTURE_CHANGE, this.onGestureChange, !1), fn(document, ce.GESTURE_END, this.onGestureEnd, !1), fn(window, ce.FOCUS, ()=>{
            this.maybeCleanupAfterMissingPointerUp(null),
            this.triggerRender(!0)
        }
        )),
        !this.state.viewModeEnabled && (this.onRemoveEventListenersEmitter.once(fn(document, ce.FULLSCREENCHANGE, this.onFullscreenChange), fn(document, ce.PASTE, this.pasteFromClipboard), fn(document, ce.CUT, this.onCut), fn(window, ce.RESIZE, this.onResize, !1), fn(window, ce.UNLOAD, this.onUnload, !1), fn(window, ce.BLUR, this.onBlur, !1), fn(this.excalidrawContainerRef.current, ce.DRAG_OVER, this.disableEvent, !1), fn(this.excalidrawContainerRef.current, ce.DROP, this.disableEvent, !1)),
        this.props.detectScroll && this.onRemoveEventListenersEmitter.once(fn(oJ(this.excalidrawContainerRef.current), ce.SCROLL, this.onScroll)))
    }
    componentDidUpdate(n, r) {
        var c, u, f, h, m, v;
        this.updateEmbeddables();
        const i = this.scene.getElementsIncludingDeleted()
          , o = this.scene.getElementsMapIncludingDeleted()
          , s = this.scene.getNonDeletedElementsMap();
        !this.state.showWelcomeScreen && !i.length && this.setState({
            showWelcomeScreen: !0
        }),
        n.UIOptions.dockedSidebarBreakpoint !== this.props.UIOptions.dockedSidebarBreakpoint && this.refreshEditorBreakpoints(),
        r.userToFollow && !this.state.collaborators.has(r.userToFollow.socketId) && this.maybeUnfollowRemoteUser(),
        (r.zoom.value !== this.state.zoom.value || r.scrollX !== this.state.scrollX || r.scrollY !== this.state.scrollY) && ((u = (c = this.props) == null ? void 0 : c.onScrollChange) == null || u.call(c, this.state.scrollX, this.state.scrollY, this.state.zoom),
        this.onScrollChangeEmitter.trigger(this.state.scrollX, this.state.scrollY, this.state.zoom)),
        r.userToFollow !== this.state.userToFollow && (r.userToFollow && this.onUserFollowEmitter.trigger({
            userToFollow: r.userToFollow,
            action: "UNFOLLOW"
        }),
        this.state.userToFollow && this.onUserFollowEmitter.trigger({
            userToFollow: this.state.userToFollow,
            action: "FOLLOW"
        })),
        Object.keys(this.state.selectedElementIds).length && fs(this.state) && this.setState({
            activeTool: bn(this.state, {
                type: "selection"
            })
        }),
        this.state.activeTool.type === "eraser" && r.theme !== this.state.theme && _D(this.interactiveCanvas, this.state.theme),
        r.activeTool.type === "selection" && this.state.activeTool.type !== "selection" && this.state.showHyperlinkPopup && this.setState({
            showHyperlinkPopup: !1
        }),
        n.langCode !== this.props.langCode && this.updateLanguage(),
        fs(r) && !fs(this.state) && this.eraserTrail.endPath(),
        n.viewModeEnabled !== this.props.viewModeEnabled && this.setState({
            viewModeEnabled: !!this.props.viewModeEnabled
        }),
        r.viewModeEnabled !== this.state.viewModeEnabled && (this.addEventListeners(),
        this.deselectElements()),
        n.zenModeEnabled !== this.props.zenModeEnabled && this.setState({
            zenModeEnabled: !!this.props.zenModeEnabled
        }),
        n.theme !== this.props.theme && this.props.theme && this.setState({
            theme: this.props.theme
        }),
        (f = this.excalidrawContainerRef.current) == null || f.classList.toggle("theme--dark", this.state.theme === Oe.DARK),
        this.state.editingLinearElement && !this.state.selectedElementIds[this.state.editingLinearElement.elementId] && setTimeout(()=>{
            this.state.editingLinearElement && this.actionManager.executeAction(ko)
        }
        ),
        (h = this.state.editingElement) != null && h.isDeleted && this.setState({
            editingElement: null
        }),
        this.state.selectedLinearElement && !this.state.selectedElementIds[this.state.selectedLinearElement.elementId] && this.setState({
            selectedLinearElement: null
        });
        const {multiElement: l} = r;
        r.activeTool !== this.state.activeTool && l != null && zc(this.state) && ms(l, !1) && m_(l, this.state, no(ke.getPointAtIndexGlobalCoordinates(l, -1, s)), this.scene.getNonDeletedElementsMap(), this.scene.getNonDeletedElements()),
        this.store.commit(o, this.state),
        this.state.isLoading || ((v = (m = this.props).onChange) == null || v.call(m, i, this.state, this.files),
        this.onChangeEmitter.trigger(i, this.state, this.files))
    }
    static resetTapTwice() {
        Rh = !1
    }
    async addElementsFromMixedContentPaste(n, {isPlainPaste: r, sceneX: i, sceneY: o}) {
        if (!r && n.some(s=>s.type === "imageUrl") && this.isToolSupported("image")) {
            const s = n.filter(h=>h.type === "imageUrl").map(h=>h.value)
              , a = await Promise.all(s.map(async h=>{
                try {
                    return {
                        file: await poe(h)
                    }
                } catch (m) {
                    let v = m.message;
                    return m.cause === "FETCH_ERROR" ? v = k("errors.failedToFetchImage") : m.cause === "UNSUPPORTED" && (v = k("errors.unsupportedFileType")),
                    {
                        errorMessage: v
                    }
                }
            }
            ));
            let l = o
              , c = !1;
            const u = {};
            for (const h of a)
                if (h.file) {
                    const m = this.createImageElement({
                        sceneX: i,
                        sceneY: l
                    })
                      , v = await this.insertImageElement(m, h.file);
                    v && (c || (c = !0,
                    l -= v.height / 2),
                    ue(v, {
                        y: l
                    }, !1),
                    l = m.y + m.height + 25,
                    u[m.id] = !0)
                }
            this.setState({
                selectedElementIds: vt(u, this.state)
            });
            const f = a.find(h=>!!h.errorMessage);
            f && f.errorMessage && this.setState({
                errorMessage: f.errorMessage
            })
        } else {
            const s = n.filter(a=>a.type === "text");
            s.length && this.addTextFromPaste(s.map(a=>a.value).join(`

`), r)
        }
    }
    addTextFromPaste(n, r=!1) {
        const {x: i, y: o} = zt({
            clientX: this.lastViewportPosition.x,
            clientY: this.lastViewportPosition.y
        }, this.state)
          , s = {
            x: i,
            y: o,
            strokeColor: this.state.currentItemStrokeColor,
            backgroundColor: this.state.currentItemBackgroundColor,
            fillStyle: this.state.currentItemFillStyle,
            strokeWidth: this.state.currentItemStrokeWidth,
            strokeStyle: this.state.currentItemStrokeStyle,
            roundness: null,
            roughness: this.state.currentItemRoughness,
            opacity: this.state.currentItemOpacity,
            text: n,
            fontSize: this.state.currentItemFontSize,
            fontFamily: this.state.currentItemFontFamily,
            textAlign: Np,
            verticalAlign: e2,
            locked: !1
        }
          , a = Ht({
            fontSize: s.fontSize,
            fontFamily: s.fontFamily
        })
          , l = mu(s.fontFamily)
          , [c,,u] = fN(this.state)
          , f = Math.max(Math.min((u - c) * .5, 800), 200)
          , h = 10;
        let m = o;
        const v = r ? [n] : n.split(`
`)
          , y = v.reduce((E,b,_)=>{
            var C;
            const x = _f(b).trim();
            if (x.length) {
                const P = this.getTopLayerFrameAtSceneCoords({
                    x: i,
                    y: m
                });
                let M = Oi(x, a, l);
                const A = M.width > f
                  , I = A ? Ru(x, a, f) : x;
                M = A ? Oi(I, a, l) : M;
                const O = i - M.width / 2
                  , N = m - M.height / 2
                  , $ = yo({
                    ...s,
                    x: O,
                    y: N,
                    text: I,
                    originalText: x,
                    lineHeight: l,
                    autoResize: !A,
                    frameId: P ? P.id : null
                });
                E.push($),
                m += $.height + h
            } else
                ((C = v[_ - 1]) == null ? void 0 : C.trim()) && (m += Kp(s.fontSize, l) + h);
            return E
        }
        , []);
        y.length !== 0 && (this.scene.insertElements(y),
        this.setState({
            selectedElementIds: vt(Object.fromEntries(y.map(E=>[E.id, !0])), this.state)
        }),
        !r && y.length > 1 && GM === !1 && !this.device.editor.isMobile && (this.setToast({
            message: k("toast.pasteAsSingleElement", {
                shortcut: ie("CtrlOrCmd+Shift+V")
            }),
            duration: 5e3
        }),
        GM = !0),
        this.store.shouldCaptureIncrement())
    }
    handleTextWysiwyg(n, {isExistingElement: r=!1}) {
        const i = this.scene.getElementsMapIncludingDeleted()
          , o = (s,a)=>{
            this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(l=>l.id === n.id && ye(l) ? Ne(l, {
                originalText: s,
                isDeleted: a ?? l.isDeleted,
                ...EO(l, Hr(l, i), i, s)
            }) : l)])
        }
        ;
        K1e({
            id: n.id,
            canvas: this.canvas,
            getViewportCoords: (s,a)=>{
                const {x: l, y: c} = Bo({
                    sceneX: s,
                    sceneY: a
                }, this.state);
                return [l - this.state.offsetLeft, c - this.state.offsetTop]
            }
            ,
            onChange: Xt(s=>{
                o(s, !1),
                R_(n) && vo(n, this.scene.getNonDeletedElementsMap())
            }
            ),
            onSubmit: Xt(({viaKeyboard: s, nextOriginalText: a})=>{
                const l = !a.trim();
                if (o(a, l),
                !l && s) {
                    const c = n.containerId ? n.containerId : n.id;
                    si.flushSync(()=>{
                        this.setState(u=>({
                            selectedElementIds: vt({
                                ...u.selectedElementIds,
                                [c]: !0
                            }, u)
                        }))
                    }
                    )
                }
                l && eO(this.scene.getNonDeletedElements(), [n]),
                (!l || r) && this.store.shouldCaptureIncrement(),
                this.setState({
                    newElement: null,
                    editingElement: null
                }),
                this.state.activeTool.locked && ls(this.interactiveCanvas, this.state),
                this.focusContainer()
            }
            ),
            element: n,
            excalidrawContainer: this.excalidrawContainerRef.current,
            app: this,
            autoSelect: !this.device.isTouchScreen
        }),
        this.deselectElements(),
        o(n.originalText, !1)
    }
    deselectElements() {
        this.setState({
            selectedElementIds: vt({}, this.state),
            selectedGroupIds: {},
            editingGroupId: null,
            activeEmbeddable: null
        })
    }
    getTextElementAtPosition(n, r) {
        const i = this.getElementAtPosition(n, r, {
            includeBoundTextElement: !0
        });
        return i && ye(i) && !i.isDeleted ? i : null
    }
    getElementAtPosition(n, r, i) {
        const o = this.getElementsAtPosition(n, r, i == null ? void 0 : i.includeBoundTextElement, i == null ? void 0 : i.includeLockedElements);
        if (o.length > 1) {
            if (i != null && i.preferSelected) {
                for (let a = o.length - 1; a > -1; a--)
                    if (this.state.selectedElementIds[o[a].id])
                        return o[a]
            }
            const s = o[o.length - 1];
            return gd({
                x: n,
                y: r,
                element: s,
                shape: ra(s, this.scene.getNonDeletedElementsMap()),
                threshold: this.getElementHitThreshold() / 2,
                frameNameBound: Ue(s) ? this.frameNameBoundsCache.get(s) : null
            }) ? s : o[o.length - 2]
        }
        return o.length === 1 ? o[0] : null
    }
    getElementsAtPosition(n, r, i=!1, o=!1) {
        const s = []
          , a = this.scene.getNonDeletedElementsMap();
        return (i && o ? this.scene.getNonDeletedElements() : this.scene.getNonDeletedElements().filter(c=>(o || !c.locked) && (i || !(ye(c) && c.containerId)))).filter(c=>this.hitElement(n, r, c)).filter(c=>{
            const u = Pi(c, a);
            return u && this.state.frameRendering.enabled && this.state.frameRendering.clip ? k8({
                x: n,
                y: r
            }, u, a) : !0
        }
        ).filter(c=>rl(c) ? (s.push(c),
        !1) : !0).concat(s)
    }
    getElementHitThreshold() {
        return vq / this.state.zoom.value
    }
    hitElement(n, r, i, o=!0) {
        if (o && this.state.selectedElementIds[i.id] && AN([i], this.state)) {
            const a = wie(i, this.scene.getNonDeletedElementsMap(), this.getElementHitThreshold());
            return h2([n, r], a)
        }
        return Y9(n, r, j9(i, this.scene.getNonDeletedElementsMap())) ? !0 : gd({
            x: n,
            y: r,
            element: i,
            shape: ra(i, this.scene.getNonDeletedElementsMap()),
            threshold: this.getElementHitThreshold(),
            frameNameBound: Ue(i) ? this.frameNameBoundsCache.get(i) : null
        })
    }
    getTextBindableContainerAtPosition(n, r) {
        const i = this.scene.getNonDeletedElements()
          , o = this.scene.getSelectedElements(this.state);
        if (o.length === 1)
            return Xc(o[0], !1) ? o[0] : null;
        let s = null;
        for (let a = i.length - 1; a >= 0; --a) {
            if (i[a].isDeleted)
                continue;
            const [l,c,u,f] = Ke(i[a], this.scene.getNonDeletedElementsMap());
            if (Be(i[a]) && gd({
                x: n,
                y: r,
                element: i[a],
                shape: ra(i[a], this.scene.getNonDeletedElementsMap()),
                threshold: this.getElementHitThreshold()
            })) {
                s = i[a];
                break
            } else if (l < n && n < u && c < r && r < f) {
                s = i[a];
                break
            }
        }
        return Xc(s, !1) ? s : null
    }
    handleHoverSelectedLinearElement(n, r, i) {
        const o = this.scene.getNonDeletedElementsMap()
          , s = ke.getElement(n.elementId, o);
        if (s)
            if (this.state.selectedLinearElement) {
                let a = -1
                  , l = null;
                gd({
                    x: r,
                    y: i,
                    element: s,
                    shape: ra(s, this.scene.getNonDeletedElementsMap())
                }) ? (a = ke.getPointIndexUnderCursor(s, o, this.state.zoom, r, i),
                l = ke.getSegmentMidpointHitCoords(n, {
                    x: r,
                    y: i
                }, this.state, this.scene.getNonDeletedElementsMap()),
                a >= 0 || l ? At(this.interactiveCanvas, It.POINTER) : this.hitElement(r, i, s) && At(this.interactiveCanvas, It.MOVE)) : this.hitElement(r, i, s) && (!He(s) || !(s.startBinding || s.endBinding)) && At(this.interactiveCanvas, It.MOVE),
                this.state.selectedLinearElement.hoverPointIndex !== a && this.setState({
                    selectedLinearElement: {
                        ...this.state.selectedLinearElement,
                        hoverPointIndex: a
                    }
                }),
                ke.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords, l) || this.setState({
                    selectedLinearElement: {
                        ...this.state.selectedLinearElement,
                        segmentMidPointHoveredCoords: l
                    }
                })
            } else
                At(this.interactiveCanvas, It.AUTO)
    }
    updateGestureOnPointerDown(n) {
        mt.pointers.set(n.pointerId, {
            x: n.clientX,
            y: n.clientY
        }),
        mt.pointers.size === 2 && (mt.lastCenter = sM(mt.pointers),
        mt.initialScale = this.state.zoom.value,
        mt.initialDistance = aM(Array.from(mt.pointers.values())))
    }
    initialPointerDownState(n) {
        const r = zt(n, this.state)
          , i = this.scene.getSelectedElements(this.state)
          , [o,s,a,l] = xt(i)
          , c = i.findIndex(He) === 0;
        return {
            origin: r,
            withCmdOrCtrl: n[U.CTRL_OR_CMD],
            originInGrid: no(er(r.x, r.y, n[U.CTRL_OR_CMD] || c ? null : this.getEffectiveGridSize())),
            scrollbars: gM(Lb, n.clientX - this.state.offsetLeft, n.clientY - this.state.offsetTop),
            lastCoords: {
                ...r
            },
            originalElements: this.scene.getNonDeletedElements().reduce((u,f)=>(u.set(f.id, $f(f)),
            u), new Map),
            resize: {
                handleType: !1,
                isResizing: !1,
                offset: {
                    x: 0,
                    y: 0
                },
                arrowDirection: "origin",
                center: {
                    x: (a + o) / 2,
                    y: (l + s) / 2
                }
            },
            hit: {
                element: null,
                allHitElements: [],
                wasAddedToSelection: !1,
                hasBeenDuplicated: !1,
                hasHitCommonBoundingBoxOfSelectedElements: this.isHittingCommonBoundingBoxOfSelectedElements(r, i)
            },
            drag: {
                hasOccurred: !1,
                offset: null
            },
            eventListeners: {
                onMove: null,
                onUp: null,
                onKeyUp: null,
                onKeyDown: null
            },
            boxSelection: {
                hasOccurred: !1
            }
        }
    }
    handleDraggingScrollBar(n, r) {
        if (!(r.scrollbars.isOverEither && !this.state.multiElement))
            return !1;
        Mb = !0,
        r.lastCoords.x = n.clientX,
        r.lastCoords.y = n.clientY;
        const i = Cb(s=>{
            s.target instanceof HTMLElement && this.handlePointerMoveOverScrollbars(s, r)
        }
        )
          , o = Xt(()=>{
            mc = null,
            Mb = !1,
            ls(this.interactiveCanvas, this.state),
            this.setState({
                cursorButton: "up"
            }),
            this.savePointer(n.clientX, n.clientY, "up"),
            window.removeEventListener(ce.POINTER_MOVE, i),
            window.removeEventListener(ce.POINTER_UP, o),
            i.flush()
        }
        );
        return mc = o,
        window.addEventListener(ce.POINTER_MOVE, i),
        window.addEventListener(ce.POINTER_UP, o),
        !0
    }
    isASelectedElement(n) {
        return n != null && this.state.selectedElementIds[n.id]
    }
    isHittingCommonBoundingBoxOfSelectedElements(n, r) {
        if (r.length < 2)
            return !1;
        const i = this.getElementHitThreshold()
          , [o,s,a,l] = xt(r);
        return n.x > o - i && n.x < a + i && n.y > s - i && n.y < l + i
    }
    getCurrentItemRoundness(n) {
        return this.state.currentItemRoundness === "round" ? {
            type: Rf(n) ? An.ADAPTIVE_RADIUS : An.PROPORTIONAL_RADIUS
        } : null
    }
    maybeCacheReferenceSnapPoints(n, r, i=!1) {
        Xl({
            event: n,
            app: this,
            selectedElements: r
        }) && (i || !Do.getReferenceSnapPoints()) && Do.setReferenceSnapPoints(rge(this.scene.getNonDeletedElements(), r, this.state, this.scene.getNonDeletedElementsMap()))
    }
    maybeCacheVisibleGaps(n, r, i=!1) {
        Xl({
            event: n,
            app: this,
            selectedElements: r
        }) && (i || !Do.getVisibleGaps()) && Do.setVisibleGaps(nge(this.scene.getNonDeletedElements(), r, this.state, this.scene.getNonDeletedElementsMap()))
    }
    onKeyDownFromPointerDownHandler(n) {
        return Xt(r=>{
            this.maybeHandleResize(n, r) || this.maybeDragNewGenericElement(n, r)
        }
        )
    }
    onKeyUpFromPointerDownHandler(n) {
        return Xt(r=>{
            r.key === U.ALT && r.preventDefault(),
            !this.maybeHandleResize(n, r) && this.maybeDragNewGenericElement(n, r)
        }
        )
    }
    onPointerMoveFromPointerDownHandler(n) {
        return Cb(r=>{
            var f, h;
            if (n.drag.offset === null && (n.drag.offset = no(mle(this.scene.getSelectedElements(this.state), n.origin.x, n.origin.y))),
            !(r.target instanceof HTMLElement) || this.handlePointerMoveOverScrollbars(r, n))
                return;
            const o = zt(r, this.state);
            if (fs(this.state)) {
                this.handleEraser(r, n, o);
                return
            }
            this.state.activeTool.type === "laser" && this.laserTrails.addPointToPath(o.x, o.y);
            const [s,a] = er(o.x, o.y, r[U.CTRL_OR_CMD] ? null : this.getEffectiveGridSize());
            if (!n.drag.hasOccurred && (this.state.activeTool.type === "arrow" || this.state.activeTool.type === "line") && ir(o.x, o.y, n.origin.x, n.origin.y) < wc)
                return;
            if (n.resize.isResizing && (n.lastCoords.x = o.x,
            n.lastCoords.y = o.y,
            this.maybeHandleResize(n, r)))
                return !0;
            const l = this.scene.getNonDeletedElementsMap();
            if (this.state.selectedLinearElement) {
                const m = this.state.editingLinearElement || this.state.selectedLinearElement;
                if (ke.shouldAddMidpoint(this.state.selectedLinearElement, o, this.state, l)) {
                    const y = ke.addMidpoint(this.state.selectedLinearElement, o, this, !r[U.CTRL_OR_CMD], l);
                    if (!y)
                        return;
                    si.flushSync(()=>{
                        this.state.selectedLinearElement && this.setState({
                            selectedLinearElement: {
                                ...this.state.selectedLinearElement,
                                pointerDownState: y.pointerDownState,
                                selectedPointsIndices: y.selectedPointsIndices
                            }
                        }),
                        this.state.editingLinearElement && this.setState({
                            editingLinearElement: {
                                ...this.state.editingLinearElement,
                                pointerDownState: y.pointerDownState,
                                selectedPointsIndices: y.selectedPointsIndices
                            }
                        })
                    }
                    );
                    return
                } else if (m.pointerDownState.segmentMidpoint.value !== null && !m.pointerDownState.segmentMidpoint.added)
                    return;
                if (ke.handlePointDragging(r, this, o.x, o.y, (y,E)=>{
                    this.maybeSuggestBindingsForLinearElementAtCoords(y, E)
                }
                , m, this.scene)) {
                    n.lastCoords.x = o.x,
                    n.lastCoords.y = o.y,
                    n.drag.hasOccurred = !0,
                    this.state.editingLinearElement && !this.state.editingLinearElement.isDragging && this.setState({
                        editingLinearElement: {
                            ...this.state.editingLinearElement,
                            isDragging: !0
                        }
                    }),
                    this.state.selectedLinearElement.isDragging || this.setState({
                        selectedLinearElement: {
                            ...this.state.selectedLinearElement,
                            isDragging: !0
                        }
                    });
                    return
                }
            }
            const c = n.hit.allHitElements.some(m=>this.isASelectedElement(m))
              , u = this.state.editingLinearElement && r.shiftKey && this.state.editingLinearElement.elementId === ((f = n.hit.element) == null ? void 0 : f.id);
            if ((c || n.hit.hasHitCommonBoundingBoxOfSelectedElements) && !u) {
                const m = this.scene.getSelectedElements(this.state);
                if (m.every(E=>E.locked))
                    return;
                const v = m.find(E=>Ue(E))
                  , y = this.getTopLayerFrameAtSceneCoords(o);
                if (this.setState({
                    frameToHighlight: y && !v ? y : null
                }),
                n.drag.hasOccurred = !0,
                m.length > 0 && !n.withCmdOrCtrl && !this.state.editingElement && ((h = this.state.activeEmbeddable) == null ? void 0 : h.state) !== "active") {
                    const E = {
                        x: o.x - n.origin.x,
                        y: o.y - n.origin.y
                    }
                      , b = [...n.originalElements.values()]
                      , _ = r.shiftKey;
                    if (_) {
                        const P = Math.abs(E.x)
                          , M = Math.abs(E.y)
                          , A = _ && P < M
                          , I = _ && P > M;
                        A && (E.x = 0),
                        I && (E.y = 0)
                    }
                    this.maybeCacheVisibleGaps(r, m),
                    this.maybeCacheReferenceSnapPoints(r, m);
                    const {snapOffset: x, snapLines: C} = ige(b, E, this, r, this.scene.getNonDeletedElementsMap());
                    if (this.setState({
                        snapLines: C
                    }),
                    !this.state.editingFrame && gle(n, m, E, this.scene, x, r[U.CTRL_OR_CMD] ? null : this.getEffectiveGridSize()),
                    this.setState({
                        selectedElementsAreBeingDragged: !0,
                        selectionElement: null
                    }),
                    (m.length !== 1 || !He(m[0])) && this.setState({
                        suggestedBindings: XE(m, this.scene.getNonDeletedElementsMap())
                    }),
                    r.altKey && !n.hit.hasBeenDuplicated) {
                        n.hit.hasBeenDuplicated = !0;
                        const P = []
                          , M = []
                          , A = new Map
                          , I = new Map
                          , O = n.hit.element
                          , N = new Set(this.scene.getSelectedElements({
                            selectedElementIds: this.state.selectedElementIds,
                            includeBoundTextElement: !0,
                            includeElementsInFrames: !0
                        }).map(z=>z.id))
                          , $ = this.scene.getElementsIncludingDeleted();
                        for (const z of $)
                            if (N.has(z.id) || z.id === (O == null ? void 0 : O.id) && n.hit.wasAddedToSelection) {
                                const j = _O(this.state.editingGroupId, A, z)
                                  , re = n.originalElements.get(z.id);
                                ue(j, {
                                    x: re.x,
                                    y: re.y
                                }),
                                n.originalElements.set(j.id, j),
                                P.push(j),
                                M.push(z),
                                I.set(z.id, j.id)
                            } else
                                P.push(z);
                        const V = [...P, ...M];
                        Ko(V, De(M)),
                        EN(P, M, I),
                        J9(V, M, I, "duplicatesServeAsOld"),
                        XO(V, M, I),
                        this.scene.replaceAllElements(V),
                        this.maybeCacheVisibleGaps(r, m, !0),
                        this.maybeCacheReferenceSnapPoints(r, m, !0)
                    }
                    return
                }
            }
            if (this.state.selectionElement)
                n.lastCoords.x = o.x,
                n.lastCoords.y = o.y,
                this.maybeDragNewGenericElement(n, r);
            else {
                const m = this.state.newElement;
                if (!m)
                    return;
                if (m.type === "freedraw") {
                    const v = m.points
                      , y = o.x - m.x
                      , E = o.y - m.y
                      , b = v.length > 0 && v[v.length - 1];
                    if (!(b && b[0] === y && b[1] === E)) {
                        const x = m.simulatePressure ? m.pressures : [...m.pressures, r.pressure];
                        ue(m, {
                            points: [...v, [y, E]],
                            pressures: x
                        })
                    }
                } else if (je(m)) {
                    n.drag.hasOccurred = !0;
                    const v = m.points;
                    let y = s - m.x
                      , E = a - m.y;
                    bg(r) && v.length === 2 && ({width: y, height: E} = L_(m.x, m.y, o.x, o.y)),
                    v.length === 1 ? ue(m, {
                        points: [...v, [y, E]]
                    }) : v.length > 1 && He(m) ? wu(m, l, [...v.slice(0, -1), [y, E]], [0, 0], void 0, {
                        isDragging: !0
                    }) : v.length === 2 && ue(m, {
                        points: [...v.slice(0, -1), [y, E]]
                    }),
                    ms(m, !1) && this.maybeSuggestBindingsForLinearElementAtCoords(m, [o], this.state.startBoundElement)
                } else
                    n.lastCoords.x = o.x,
                    n.lastCoords.y = o.y,
                    this.maybeDragNewGenericElement(n, r)
            }
            if (this.state.activeTool.type === "selection") {
                n.boxSelection.hasOccurred = !0;
                const m = this.scene.getNonDeletedElements();
                if (this.state.editingLinearElement)
                    ke.handleBoxSelection(r, this.state, this.setState.bind(this), this.scene.getNonDeletedElementsMap());
                else {
                    let v = !0;
                    !r.shiftKey && Mn(m, this.state) && (n.withCmdOrCtrl && n.hit.element ? this.setState(E=>Ii({
                        ...E,
                        selectedElementIds: {
                            [n.hit.element.id]: !0
                        }
                    }, this.scene.getNonDeletedElements(), E, this)) : v = !1);
                    const y = this.state.selectionElement ? L4(m, this.state.selectionElement, this.scene.getNonDeletedElementsMap()) : [];
                    this.setState(E=>{
                        const b = {
                            ...v && E.selectedElementIds,
                            ...y.reduce((_,x)=>(_[x.id] = !0,
                            _), {})
                        };
                        return n.hit.element && (y.length ? delete b[n.hit.element.id] : b[n.hit.element.id] = !0),
                        E = v ? E : {
                            ...E,
                            selectedGroupIds: {},
                            editingGroupId: null
                        },
                        {
                            ...Ii({
                                editingGroupId: E.editingGroupId,
                                selectedElementIds: b
                            }, this.scene.getNonDeletedElements(), E, this),
                            selectedLinearElement: y.length === 1 && je(y[0]) ? new ke(y[0]) : null,
                            showHyperlinkPopup: y.length === 1 && (y[0].link || Br(y[0])) ? "info" : !1
                        }
                    }
                    )
                }
            }
        }
        )
    }
    handlePointerMoveOverScrollbars(n, r) {
        if (r.scrollbars.isOverHorizontal) {
            const i = n.clientX
              , o = i - r.lastCoords.x;
            return this.translateCanvas({
                scrollX: this.state.scrollX - o / this.state.zoom.value
            }),
            r.lastCoords.x = i,
            !0
        }
        if (r.scrollbars.isOverVertical) {
            const i = n.clientY
              , o = i - r.lastCoords.y;
            return this.translateCanvas({
                scrollY: this.state.scrollY - o / this.state.zoom.value
            }),
            r.lastCoords.y = i,
            !0
        }
        return !1
    }
    onPointerUpFromPointerDownHandler(n) {
        return Xt(r=>{
            var v, y, E, b, _, x, C, P, M;
            this.removePointer(r),
            n.eventListeners.onMove && n.eventListeners.onMove.flush();
            const {newElement: i, resizingElement: o, multiElement: s, activeTool: a, isResizing: l, isRotating: c} = this.state;
            this.setState(A=>({
                isResizing: !1,
                isRotating: !1,
                resizingElement: null,
                selectionElement: null,
                frameToHighlight: null,
                elementsToHighlight: null,
                cursorButton: "up",
                editingElement: s || ye(this.state.editingElement) ? this.state.editingElement : null,
                snapLines: PE(A.snapLines, []),
                originSnapOffset: null
            })),
            Do.setReferenceSnapPoints(null),
            Do.setVisibleGaps(null),
            this.savePointer(r.clientX, r.clientY, "up"),
            this.setState({
                selectedElementsAreBeingDragged: !1
            });
            const u = this.scene.getNonDeletedElementsMap();
            if (this.state.editingLinearElement)
                if (!n.boxSelection.hasOccurred && ((y = (v = n.hit) == null ? void 0 : v.element) == null ? void 0 : y.id) !== this.state.editingLinearElement.elementId)
                    this.actionManager.executeAction(ko);
                else {
                    const A = ke.handlePointerUp(r, this.state.editingLinearElement, this.state, this.scene);
                    A !== this.state.editingLinearElement && this.setState({
                        editingLinearElement: A,
                        suggestedBindings: []
                    })
                }
            else if (this.state.selectedLinearElement)
                if (((b = (E = n.hit) == null ? void 0 : E.element) == null ? void 0 : b.id) !== this.state.selectedLinearElement.elementId)
                    this.scene.getSelectedElements(this.state).length > 1 && this.setState({
                        selectedLinearElement: null
                    });
                else {
                    const A = ke.handlePointerUp(r, this.state.selectedLinearElement, this.state, this.scene)
                      , {startBindingElement: I, endBindingElement: O} = A
                      , N = this.scene.getElement(A.elementId);
                    ms(N) && Yv(N, I, O, u, this.scene),
                    A !== this.state.selectedLinearElement && this.setState({
                        selectedLinearElement: {
                            ...A,
                            selectedPointsIndices: null
                        },
                        suggestedBindings: []
                    })
                }
            if (this.missingPointerEventCleanupEmitter.clear(),
            window.removeEventListener(ce.POINTER_MOVE, n.eventListeners.onMove),
            window.removeEventListener(ce.POINTER_UP, n.eventListeners.onUp),
            window.removeEventListener(ce.KEYDOWN, n.eventListeners.onKeyDown),
            window.removeEventListener(ce.KEYUP, n.eventListeners.onKeyUp),
            this.state.pendingImageElementId && this.setState({
                pendingImageElementId: null
            }),
            (x = (_ = this.props) == null ? void 0 : _.onPointerUp) == null || x.call(_, a, n),
            this.onPointerUpEmitter.trigger(this.state.activeTool, n, r),
            (i == null ? void 0 : i.type) === "freedraw") {
                const A = zt(r, this.state)
                  , I = i.points;
                let O = A.x - i.x
                  , N = A.y - i.y;
                O === I[0][0] && N === I[0][1] && (N += 1e-4,
                O += 1e-4);
                const $ = i.simulatePressure ? [] : [...i.pressures, r.pressure];
                ue(i, {
                    points: [...I, [O, N]],
                    pressures: $,
                    lastCommittedPoint: [O, N]
                }),
                this.actionManager.executeAction(ko);
                return
            }
            if (ga(i)) {
                const A = i;
                try {
                    this.initializeImageDimensions(A),
                    this.setState({
                        selectedElementIds: vt({
                            [A.id]: !0
                        }, this.state)
                    }, ()=>{
                        this.actionManager.executeAction(ko)
                    }
                    )
                } catch (I) {
                    console.error(I),
                    this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(O=>O.id !== A.id)),
                    this.actionManager.executeAction(ko)
                }
                return
            }
            if (je(i)) {
                i.points.length > 1 && this.store.shouldCaptureIncrement();
                const A = zt(r, this.state);
                !n.drag.hasOccurred && i && !s ? (ue(i, {
                    points: [...i.points, [A.x - i.x, A.y - i.y]]
                }),
                this.setState({
                    multiElement: i,
                    editingElement: this.state.newElement
                })) : n.drag.hasOccurred && !s && (zc(this.state) && ms(i, !1) && m_(i, this.state, A, this.scene.getNonDeletedElementsMap(), this.scene.getNonDeletedElements()),
                this.setState({
                    suggestedBindings: [],
                    startBoundElement: null
                }),
                a.locked ? this.setState(I=>({
                    newElement: null
                })) : (Ao(this.interactiveCanvas),
                this.setState(I=>({
                    newElement: null,
                    activeTool: bn(this.state, {
                        type: "selection"
                    }),
                    selectedElementIds: vt({
                        ...I.selectedElementIds,
                        [i.id]: !0
                    }, I),
                    selectedLinearElement: new ke(i)
                }))));
                return
            }
            if (ye(i)) {
                const A = S4(Ht({
                    fontSize: i.fontSize,
                    fontFamily: i.fontFamily
                }), i.lineHeight);
                i.width < A && ue(i, {
                    autoResize: !0
                }),
                this.resetCursor(),
                this.handleTextWysiwyg(i, {
                    isExistingElement: !0
                })
            }
            if (a.type !== "selection" && i && bu(i)) {
                this.updateScene({
                    elements: this.scene.getElementsIncludingDeleted().filter(A=>A.id !== i.id),
                    appState: {
                        newElement: null
                    },
                    storeAction: ee.UPDATE
                });
                return
            }
            if (Ue(i)) {
                const A = Kse(this.scene.getElementsIncludingDeleted(), i, this.scene.getNonDeletedElementsMap());
                this.scene.replaceAllElements(bm(this.scene.getElementsMapIncludingDeleted(), A, i))
            }
            if (i && ue(i, CN(i)),
            n.drag.hasOccurred) {
                const A = zt(r, this.state);
                if (this.state.selectedLinearElement && this.state.selectedLinearElement.isDragging) {
                    const I = this.scene.getElement(this.state.selectedLinearElement.elementId);
                    if (I != null && I.frameId) {
                        const O = Pi(I, u);
                        O && I && (Vl(I, O, this.scene.getNonDeletedElementsMap()) || (ue(I, {
                            groupIds: []
                        }),
                        ey([I], this.scene.getNonDeletedElementsMap()),
                        this.scene.triggerUpdate()))
                    }
                } else {
                    const I = this.getTopLayerFrameAtSceneCoords(A)
                      , O = this.scene.getSelectedElements(this.state);
                    let N = this.scene.getElementsMapIncludingDeleted();
                    const $ = V=>{
                        if (V.length > 0) {
                            for (const z of V) {
                                const j = z.groupIds.indexOf(this.state.editingGroupId);
                                ue(z, {
                                    groupIds: z.groupIds.slice(0, j)
                                }, !1)
                            }
                            N.forEach(z=>{
                                z.groupIds.length && xn(N, z.groupIds[z.groupIds.length - 1]).length < 2 && ue(z, {
                                    groupIds: []
                                }, !1)
                            }
                            ),
                            this.setState({
                                editingGroupId: null
                            })
                        }
                    }
                    ;
                    if (I && !this.state.selectedElementIds[I.id]) {
                        const V = O.filter(z=>z.frameId !== I.id && pp(z, N, this.state));
                        this.state.editingGroupId && $(V),
                        N = bm(N, V, I)
                    } else if (!I && this.state.editingGroupId) {
                        const V = O.filter(z=>z.frameId && !pp(z, N, this.state));
                        $(V)
                    }
                    N = wf(N, this.state, this),
                    this.scene.replaceAllElements(N)
                }
            }
            if (o && this.store.shouldCaptureIncrement(),
            o && bu(o) && this.updateScene({
                elements: this.scene.getElementsIncludingDeleted().filter(A=>A.id !== o.id),
                storeAction: ee.UPDATE
            }),
            n.resize.isResizing) {
                let A = wf(this.scene.getElementsIncludingDeleted(), this.state, this);
                const I = this.scene.getSelectedElements(this.state).filter(O=>Ue(O));
                for (const O of I)
                    A = tN(A, Em(this.scene.getElementsIncludingDeleted(), O, this.state, u), O);
                this.scene.replaceAllElements(A)
            }
            const f = n.hit.element;
            ((C = this.state.selectedLinearElement) == null ? void 0 : C.elementId) !== (f == null ? void 0 : f.id) && je(f) && this.scene.getSelectedElements(this.state).length === 1 && this.setState({
                selectedLinearElement: new ke(f)
            });
            const h = this.lastPointerDownEvent
              , m = this.lastPointerUpEvent || this.lastPointerMoveEvent;
            if (fs(this.state) && h && m) {
                if (this.eraserTrail.endPath(),
                ir(h.clientX, h.clientY, m.clientX, m.clientY) === 0) {
                    const I = zt({
                        clientX: m.clientX,
                        clientY: m.clientY
                    }, this.state);
                    this.getElementsAtPosition(I.x, I.y).forEach(N=>this.elementsPendingErasure.add(N.id))
                }
                this.eraseElements();
                return
            } else
                this.elementsPendingErasure.size && this.restoreReadyToEraseElements();
            if (f && !n.drag.hasOccurred && !n.hit.wasAddedToSelection && (!this.state.editingLinearElement || !n.boxSelection.hasOccurred) && (r.shiftKey && !this.state.editingLinearElement ? this.state.selectedElementIds[f.id] ? gD(this.state, f) ? this.setState(A=>{
                const I = {
                    ...A.selectedElementIds
                };
                for (const O of f.groupIds.flatMap(N=>xn(this.scene.getNonDeletedElements(), N)))
                    delete I[O.id];
                return {
                    selectedGroupIds: {
                        ...A.selectedElementIds,
                        ...f.groupIds.map(O=>({
                            [O]: !1
                        })).reduce((O,N)=>({
                            ...O,
                            ...N
                        }), {})
                    },
                    selectedElementIds: vt(I, A)
                }
            }
            ) : (P = this.state.selectedLinearElement) != null && P.isDragging || this.setState(A=>{
                const I = {
                    ...A.selectedElementIds
                };
                delete I[f.id];
                const O = dt(this.scene.getNonDeletedElements(), {
                    selectedElementIds: I
                });
                return {
                    ...Ii({
                        editingGroupId: A.editingGroupId,
                        selectedElementIds: I
                    }, this.scene.getNonDeletedElements(), A, this),
                    selectedLinearElement: O.length === 1 && je(O[0]) ? new ke(O[0]) : A.selectedLinearElement
                }
            }
            ) : f.frameId && this.state.selectedElementIds[f.frameId] ? this.setState(A=>{
                var O;
                const I = {
                    ...A.selectedElementIds,
                    [f.id]: !0
                };
                return delete I[f.frameId],
                (((O = this.scene.getElement(f.frameId)) == null ? void 0 : O.groupIds) ?? []).flatMap(N=>xn(this.scene.getNonDeletedElements(), N)).forEach(N=>{
                    delete I[N.id]
                }
                ),
                {
                    ...Ii({
                        editingGroupId: A.editingGroupId,
                        selectedElementIds: I
                    }, this.scene.getNonDeletedElements(), A, this),
                    showHyperlinkPopup: f.link || Br(f) ? "info" : !1
                }
            }
            ) : this.setState(A=>({
                selectedElementIds: vt({
                    ...A.selectedElementIds,
                    [f.id]: !0
                }, A)
            })) : this.setState(A=>{
                var I;
                return {
                    ...Ii({
                        editingGroupId: A.editingGroupId,
                        selectedElementIds: {
                            [f.id]: !0
                        }
                    }, this.scene.getNonDeletedElements(), A, this),
                    selectedLinearElement: je(f) && ((I = A.selectedLinearElement) == null ? void 0 : I.elementId) !== f.id ? new ke(f) : A.selectedLinearElement
                }
            }
            )),
            !n.drag.hasOccurred && !this.state.isResizing && (f && Iie({
                x: n.origin.x,
                y: n.origin.y,
                element: f,
                shape: ra(f, this.scene.getNonDeletedElementsMap()),
                threshold: this.getElementHitThreshold(),
                frameNameBound: Ue(f) ? this.frameNameBoundsCache.get(f) : null
            }, u) || !f && n.hit.hasHitCommonBoundingBoxOfSelectedElements)) {
                this.state.editingLinearElement ? this.setState({
                    editingLinearElement: null
                }) : this.setState({
                    selectedElementIds: vt({}, this.state),
                    selectedGroupIds: {},
                    editingGroupId: null,
                    activeEmbeddable: null
                }),
                At(this.interactiveCanvas, It.AUTO);
                return
            }
            if (!a.locked && a.type !== "freedraw" && i && this.setState(A=>({
                selectedElementIds: vt({
                    ...A.selectedElementIds,
                    [i.id]: !0
                }, A),
                showHyperlinkPopup: Br(i) && !i.link ? "editor" : A.showHyperlinkPopup
            })),
            (a.type !== "selection" || Mn(this.scene.getNonDeletedElements(), this.state) || !Xn(this.state.previousSelectedElementIds, this.state.selectedElementIds)) && this.store.shouldCaptureIncrement(),
            n.drag.hasOccurred || l || c) {
                const A = this.scene.getSelectedElements(this.state).filter(je);
                g2(A, this.scene.getNonDeletedElementsMap(), this.scene.getNonDeletedElements(), this.scene, zc(this.state), ((M = this.state.selectedLinearElement) == null ? void 0 : M.selectedPointsIndices) ?? [])
            }
            if (a.type === "laser") {
                this.laserTrails.endPath();
                return
            }
            !a.locked && a.type !== "freedraw" ? (Ao(this.interactiveCanvas),
            this.setState({
                newElement: null,
                suggestedBindings: [],
                activeTool: bn(this.state, {
                    type: "selection"
                })
            })) : this.setState({
                newElement: null,
                suggestedBindings: []
            }),
            f && this.lastPointerUpEvent && this.lastPointerDownEvent && this.lastPointerUpEvent.timeStamp - this.lastPointerDownEvent.timeStamp < 300 && mt.pointers.size <= 1 && eo(f) && this.isIframeLikeElementCenter(f, this.lastPointerUpEvent, n.origin.x, n.origin.y) && this.handleEmbeddableCenterClick(f)
        }
        )
    }
    clearSelection(n) {
        this.setState(r=>({
            selectedElementIds: vt({}, r),
            activeEmbeddable: null,
            selectedGroupIds: {},
            editingGroupId: r.editingGroupId && n != null && rp(n, r.editingGroupId) ? r.editingGroupId : null
        })),
        this.setState({
            selectedElementIds: vt({}, this.state),
            activeEmbeddable: null,
            previousSelectedElementIds: this.state.selectedElementIds
        })
    }
    getTextWysiwygSnappedToCenterPosition(n, r, i, o) {
        if (o) {
            let s = o.x + o.width / 2
              , a = o.y + o.height / 2;
            const l = sb(o, i, this.scene.getNonDeletedElementsMap());
            if (l && (s = l.x,
            a = l.y),
            Math.hypot(n - s, r - a) < gq) {
                const {x: f, y: h} = Bo({
                    sceneX: s,
                    sceneY: a
                }, i);
                return {
                    viewportX: f,
                    viewportY: h,
                    elementCenterX: s,
                    elementCenterY: a
                }
            }
        }
    }
    getCanvasOffsets() {
        var n;
        if ((n = this.excalidrawContainerRef) != null && n.current) {
            const r = this.excalidrawContainerRef.current
              , {left: i, top: o} = r.getBoundingClientRect();
            return {
                offsetLeft: i,
                offsetTop: o
            }
        }
        return {
            offsetLeft: 0,
            offsetTop: 0
        }
    }
    async updateLanguage() {
        const n = kv.find(r=>r.code === this.props.langCode) || ku;
        await zR(n),
        this.setAppState({})
    }
}
const q1e = e=>{
    const {closeOnClickOutside: t=!0} = e
      , n = IF({
        className: "excalidraw-modal-container"
    })
      , r = T.useRef(document.body.classList.contains("excalidraw-animations-disabled"));
    if (!n)
        return null;
    const i = o=>{
        o.key === U.ESCAPE && (o.nativeEvent.stopImmediatePropagation(),
        o.stopPropagation(),
        e.onCloseRequest())
    }
    ;
    return si.createPortal(L("div", {
        className: xe("Modal", e.className, {
            "animations-disabled": r.current
        }),
        role: "dialog",
        "aria-modal": "true",
        onKeyDown: i,
        "aria-labelledby": e.labelledBy,
        "data-prevent-outside-click": !0,
        children: [g("div", {
            className: "Modal__background",
            onClick: t ? e.onCloseRequest : void 0
        }), g("div", {
            className: "Modal__content",
            style: {
                "--max-width": `${e.maxWidth}px`
            },
            tabIndex: 0,
            children: e.children
        })]
    }), n)
}
;
function Q1e(e) {
    if (e && typeof e == "number")
        return e;
    switch (e) {
    case "small":
        return 550;
    case "wide":
        return 1024;
    case "regular":
    default:
        return 800
    }
}
const mi = e=>{
    const [t,n] = HR()
      , [r] = T.useState(document.activeElement)
      , {id: i} = Ns()
      , o = ur().viewport.isMobile;
    T.useEffect(()=>{
        if (!t)
            return;
        const c = Y3(t);
        setTimeout(()=>{
            c.length > 0 && e.autofocus !== !1 && (c[1] || c[0]).focus()
        }
        );
        const u = f=>{
            if (f.key === U.TAB) {
                const h = Y3(t)
                  , {activeElement: m} = document
                  , v = h.findIndex(y=>y === m);
                v === 0 && f.shiftKey ? (h[h.length - 1].focus(),
                f.preventDefault()) : v === h.length - 1 && !f.shiftKey && (h[0].focus(),
                f.preventDefault())
            }
        }
        ;
        return t.addEventListener("keydown", u),
        ()=>t.removeEventListener("keydown", u)
    }
    , [t, e.autofocus]);
    const s = Gn()
      , a = Lf(V4, cr)
      , l = ()=>{
        s({
            openMenu: null
        }),
        a(!1),
        r.focus(),
        e.onCloseRequest()
    }
    ;
    return g(q1e, {
        className: xe("Dialog", e.className, {
            "Dialog--fullscreen": o
        }),
        labelledBy: "dialog-title",
        maxWidth: Q1e(e.size),
        onCloseRequest: l,
        closeOnClickOutside: e.closeOnClickOutside,
        children: L(Wo, {
            ref: n,
            children: [e.title && g("h2", {
                id: `${i}-dialog-title`,
                className: "Dialog__title",
                children: g("span", {
                    className: "Dialog__titleContent",
                    children: e.title
                })
            }), o && g("button", {
                className: "Dialog__close",
                onClick: l,
                title: k("buttons.close"),
                "aria-label": k("buttons.close"),
                type: "button",
                children: Df
            }), g("div", {
                className: "Dialog__content",
                children: e.children
            })]
        })
    })
}
  , v5 = ({children: e, onClose: t})=>{
    const [n,r] = T.useState(!!e)
      , {container: i} = Ns()
      , o = ve.useCallback(()=>{
        r(!1),
        t && t(),
        i == null || i.focus()
    }
    , [t, i]);
    return g(Se, {
        children: n && g(mi, {
            size: "small",
            onCloseRequest: o,
            title: k("errorDialog.title"),
            children: g("div", {
                style: {
                    whiteSpace: "pre-wrap"
                },
                children: e
            })
        })
    })
}
;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var sx = function(e, t) {
    return sx = Object.setPrototypeOf || {
        __proto__: []
    }instanceof Array && function(n, r) {
        n.__proto__ = r
    }
    || function(n, r) {
        for (var i in r)
            r.hasOwnProperty(i) && (n[i] = r[i])
    }
    ,
    sx(e, t)
};
function Cy(e, t) {
    sx(e, t);
    function n() {
        this.constructor = e
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype,
    new n)
}
var Zt = function() {
    return Zt = Object.assign || function(t) {
        for (var n, r = 1, i = arguments.length; r < i; r++) {
            n = arguments[r];
            for (var o in n)
                Object.prototype.hasOwnProperty.call(n, o) && (t[o] = n[o])
        }
        return t
    }
    ,
    Zt.apply(this, arguments)
};
function VM(e) {
    var t = typeof Symbol == "function" && Symbol.iterator
      , n = t && e[t]
      , r = 0;
    if (n)
        return n.call(e);
    if (e && typeof e.length == "number")
        return {
            next: function() {
                return e && r >= e.length && (e = void 0),
                {
                    value: e && e[r++],
                    done: !e
                }
            }
        };
    throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.")
}
function J1e(e, t) {
    var n = typeof Symbol == "function" && e[Symbol.iterator];
    if (!n)
        return e;
    var r = n.call(e), i, o = [], s;
    try {
        for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; )
            o.push(i.value)
    } catch (a) {
        s = {
            error: a
        }
    } finally {
        try {
            i && !i.done && (n = r.return) && n.call(r)
        } finally {
            if (s)
                throw s.error
        }
    }
    return o
}
function Ac() {
    for (var e = [], t = 0; t < arguments.length; t++)
        e = e.concat(J1e(arguments[t]));
    return e
}
var Fl;
(function(e) {
    e.Ok = "ok",
    e.Exited = "exited",
    e.Crashed = "crashed",
    e.Abnormal = "abnormal"
}
)(Fl || (Fl = {}));
var Xo;
(function(e) {
    e.Fatal = "fatal",
    e.Error = "error",
    e.Warning = "warning",
    e.Log = "log",
    e.Info = "info",
    e.Debug = "debug",
    e.Critical = "critical"
}
)(Xo || (Xo = {}));
(function(e) {
    function t(n) {
        switch (n) {
        case "debug":
            return e.Debug;
        case "info":
            return e.Info;
        case "warn":
        case "warning":
            return e.Warning;
        case "error":
            return e.Error;
        case "fatal":
            return e.Fatal;
        case "critical":
            return e.Critical;
        case "log":
        default:
            return e.Log
        }
    }
    e.fromString = t
}
)(Xo || (Xo = {}));
var _u;
(function(e) {
    e.Unknown = "unknown",
    e.Skipped = "skipped",
    e.Success = "success",
    e.RateLimit = "rate_limit",
    e.Invalid = "invalid",
    e.Failed = "failed"
}
)(_u || (_u = {}));
(function(e) {
    function t(n) {
        return n >= 200 && n < 300 ? e.Success : n === 429 ? e.RateLimit : n >= 400 && n < 500 ? e.Invalid : n >= 500 ? e.Failed : e.Unknown
    }
    e.fromHttpCode = t
}
)(_u || (_u = {}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function e0e(e, t) {
    var n = typeof Symbol == "function" && e[Symbol.iterator];
    if (!n)
        return e;
    var r = n.call(e), i, o = [], s;
    try {
        for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; )
            o.push(i.value)
    } catch (a) {
        s = {
            error: a
        }
    } finally {
        try {
            i && !i.done && (n = r.return) && n.call(r)
        } finally {
            if (s)
                throw s.error
        }
    }
    return o
}
function t0e() {
    for (var e = [], t = 0; t < arguments.length; t++)
        e = e.concat(e0e(arguments[t]));
    return e
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Ve = function() {
    return Ve = Object.assign || function(t) {
        for (var n, r = 1, i = arguments.length; r < i; r++) {
            n = arguments[r];
            for (var o in n)
                Object.prototype.hasOwnProperty.call(n, o) && (t[o] = n[o])
        }
        return t
    }
    ,
    Ve.apply(this, arguments)
};
function n0e(e, t) {
    var n = typeof Symbol == "function" && e[Symbol.iterator];
    if (!n)
        return e;
    var r = n.call(e), i, o = [], s;
    try {
        for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; )
            o.push(i.value)
    } catch (a) {
        s = {
            error: a
        }
    } finally {
        try {
            i && !i.done && (n = r.return) && n.call(r)
        } finally {
            if (s)
                throw s.error
        }
    }
    return o
}
function Sc() {
    for (var e = [], t = 0; t < arguments.length; t++)
        e = e.concat(n0e(arguments[t]));
    return e
}
function Oz(e) {
    switch (Object.prototype.toString.call(e)) {
    case "[object Error]":
        return !0;
    case "[object Exception]":
        return !0;
    case "[object DOMException]":
        return !0;
    default:
        return Zl(e, Error)
    }
}
function Nz(e) {
    return Object.prototype.toString.call(e) === "[object ErrorEvent]"
}
function YM(e) {
    return Object.prototype.toString.call(e) === "[object DOMError]"
}
function r0e(e) {
    return Object.prototype.toString.call(e) === "[object DOMException]"
}
function If(e) {
    return Object.prototype.toString.call(e) === "[object String]"
}
function kp(e) {
    return e === null || typeof e != "object" && typeof e != "function"
}
function ky(e) {
    return Object.prototype.toString.call(e) === "[object Object]"
}
function y5(e) {
    return typeof Event < "u" && Zl(e, Event)
}
function jM(e) {
    return typeof Element < "u" && Zl(e, Element)
}
function i0e(e) {
    return Object.prototype.toString.call(e) === "[object RegExp]"
}
function w5(e) {
    return !!(e && e.then && typeof e.then == "function")
}
function o0e(e) {
    return ky(e) && "nativeEvent"in e && "preventDefault"in e && "stopPropagation"in e
}
function Zl(e, t) {
    try {
        return e instanceof t
    } catch {
        return !1
    }
}
function rv(e) {
    try {
        for (var t = e, n = 5, r = 80, i = [], o = 0, s = 0, a = " > ", l = a.length, c = void 0; t && o++ < n && (c = s0e(t),
        !(c === "html" || o > 1 && s + i.length * l + c.length >= r)); )
            i.push(c),
            s += c.length,
            t = t.parentNode;
        return i.reverse().join(a)
    } catch {
        return "<unknown>"
    }
}
function s0e(e) {
    var t = e, n = [], r, i, o, s, a;
    if (!t || !t.tagName)
        return "";
    if (n.push(t.tagName.toLowerCase()),
    t.id && n.push("#" + t.id),
    r = t.className,
    r && If(r))
        for (i = r.split(/\s+/),
        a = 0; a < i.length; a++)
            n.push("." + i[a]);
    var l = ["type", "name", "title", "alt"];
    for (a = 0; a < l.length; a++)
        o = l[a],
        s = t.getAttribute(o),
        s && n.push("[" + o + '="' + s + '"]');
    return n.join("")
}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var ax = function(e, t) {
    return ax = Object.setPrototypeOf || {
        __proto__: []
    }instanceof Array && function(n, r) {
        n.__proto__ = r
    }
    || function(n, r) {
        for (var i in r)
            r.hasOwnProperty(i) && (n[i] = r[i])
    }
    ,
    ax(e, t)
};
function a0e(e, t) {
    ax(e, t);
    function n() {
        this.constructor = e
    }
    e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype,
    new n)
}
var Mc = function() {
    return Mc = Object.assign || function(t) {
        for (var n, r = 1, i = arguments.length; r < i; r++) {
            n = arguments[r];
            for (var o in n)
                Object.prototype.hasOwnProperty.call(n, o) && (t[o] = n[o])
        }
        return t
    }
    ,
    Mc.apply(this, arguments)
};
function Fz(e) {
    var t = typeof Symbol == "function" && Symbol.iterator
      , n = t && e[t]
      , r = 0;
    if (n)
        return n.call(e);
    if (e && typeof e.length == "number")
        return {
            next: function() {
                return e && r >= e.length && (e = void 0),
                {
                    value: e && e[r++],
                    done: !e
                }
            }
        };
    throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.")
}
function l0e(e, t) {
    var n = typeof Symbol == "function" && e[Symbol.iterator];
    if (!n)
        return e;
    var r = n.call(e), i, o = [], s;
    try {
        for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; )
            o.push(i.value)
    } catch (a) {
        s = {
            error: a
        }
    } finally {
        try {
            i && !i.done && (n = r.return) && n.call(r)
        } finally {
            if (s)
                throw s.error
        }
    }
    return o
}
var c0e = Object.setPrototypeOf || ({
    __proto__: []
}instanceof Array ? u0e : d0e);
function u0e(e, t) {
    return e.__proto__ = t,
    e
}
function d0e(e, t) {
    for (var n in t)
        e.hasOwnProperty(n) || (e[n] = t[n]);
    return e
}
var rr = function(e) {
    a0e(t, e);
    function t(n) {
        var r = this.constructor
          , i = e.call(this, n) || this;
        return i.message = n,
        i.name = r.prototype.constructor.name,
        c0e(i, r.prototype),
        i
    }
    return t
}(Error)
  , f0e = /^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/
  , Nh = "Invalid Dsn"
  , Bz = function() {
    function e(t) {
        typeof t == "string" ? this._fromString(t) : this._fromComponents(t),
        this._validate()
    }
    return e.prototype.toString = function(t) {
        t === void 0 && (t = !1);
        var n = this
          , r = n.host
          , i = n.path
          , o = n.pass
          , s = n.port
          , a = n.projectId
          , l = n.protocol
          , c = n.publicKey;
        return l + "://" + c + (t && o ? ":" + o : "") + ("@" + r + (s ? ":" + s : "") + "/" + (i && i + "/") + a)
    }
    ,
    e.prototype._fromString = function(t) {
        var n = f0e.exec(t);
        if (!n)
            throw new rr(Nh);
        var r = l0e(n.slice(1), 6)
          , i = r[0]
          , o = r[1]
          , s = r[2]
          , a = s === void 0 ? "" : s
          , l = r[3]
          , c = r[4]
          , u = c === void 0 ? "" : c
          , f = r[5]
          , h = ""
          , m = f
          , v = m.split("/");
        if (v.length > 1 && (h = v.slice(0, -1).join("/"),
        m = v.pop()),
        m) {
            var y = m.match(/^\d+/);
            y && (m = y[0])
        }
        this._fromComponents({
            host: l,
            pass: a,
            path: h,
            projectId: m,
            port: u,
            protocol: i,
            publicKey: o
        })
    }
    ,
    e.prototype._fromComponents = function(t) {
        "user"in t && !("publicKey"in t) && (t.publicKey = t.user),
        this.user = t.publicKey || "",
        this.protocol = t.protocol,
        this.publicKey = t.publicKey || "",
        this.pass = t.pass || "",
        this.host = t.host,
        this.port = t.port || "",
        this.path = t.path || "",
        this.projectId = t.projectId
    }
    ,
    e.prototype._validate = function() {
        var t = this;
        if (["protocol", "publicKey", "host", "projectId"].forEach(function(n) {
            if (!t[n])
                throw new rr(Nh + ": " + n + " missing")
        }),
        !this.projectId.match(/^\d+$/))
            throw new rr(Nh + ": Invalid projectId " + this.projectId);
        if (this.protocol !== "http" && this.protocol !== "https")
            throw new rr(Nh + ": Invalid protocol " + this.protocol);
        if (this.port && isNaN(parseInt(this.port, 10)))
            throw new rr(Nh + ": Invalid port " + this.port)
    }
    ,
    e
}();
function E5() {
    return Object.prototype.toString.call(typeof process < "u" ? process : 0) === "[object process]"
}
function h0e(e, t) {
    return e.require(t)
}
function Lg(e, t) {
    return t === void 0 && (t = 0),
    typeof e != "string" || t === 0 || e.length <= t ? e : e.substr(0, t) + "..."
}
function iv(e, t) {
    if (!Array.isArray(e))
        return "";
    for (var n = [], r = 0; r < e.length; r++) {
        var i = e[r];
        try {
            n.push(String(i))
        } catch {
            n.push("[value cannot be serialized]")
        }
    }
    return n.join(t)
}
function Rb(e, t) {
    return If(e) ? i0e(t) ? t.test(e) : typeof t == "string" ? e.indexOf(t) !== -1 : !1 : !1
}
var g0e = {};
function Pn() {
    return E5() ? global : typeof window < "u" ? window : typeof self < "u" ? self : g0e
}
function Jd() {
    var e = Pn()
      , t = e.crypto || e.msCrypto;
    if (t !== void 0 && t.getRandomValues) {
        var n = new Uint16Array(8);
        t.getRandomValues(n),
        n[3] = n[3] & 4095 | 16384,
        n[4] = n[4] & 16383 | 32768;
        var r = function(i) {
            for (var o = i.toString(16); o.length < 4; )
                o = "0" + o;
            return o
        };
        return r(n[0]) + r(n[1]) + r(n[2]) + r(n[3]) + r(n[4]) + r(n[5]) + r(n[6]) + r(n[7])
    }
    return "xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g, function(i) {
        var o = Math.random() * 16 | 0
          , s = i === "x" ? o : o & 3 | 8;
        return s.toString(16)
    })
}
function Db(e) {
    if (!e)
        return {};
    var t = e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);
    if (!t)
        return {};
    var n = t[6] || ""
      , r = t[8] || "";
    return {
        host: t[4],
        path: t[5],
        protocol: t[2],
        relative: t[5] + n + r
    }
}
function Ic(e) {
    if (e.message)
        return e.message;
    if (e.exception && e.exception.values && e.exception.values[0]) {
        var t = e.exception.values[0];
        return t.type && t.value ? t.type + ": " + t.value : t.type || t.value || e.event_id || "<unknown>"
    }
    return e.event_id || "<unknown>"
}
function Tm(e) {
    var t = Pn()
      , n = ["debug", "info", "warn", "error", "log", "assert"];
    if (!("console"in t))
        return e();
    var r = t.console
      , i = {};
    n.forEach(function(s) {
        s in t.console && r[s].__sentry_original__ && (i[s] = r[s],
        r[s] = r[s].__sentry_original__)
    });
    var o = e();
    return Object.keys(i).forEach(function(s) {
        r[s] = i[s]
    }),
    o
}
function lx(e, t, n) {
    e.exception = e.exception || {},
    e.exception.values = e.exception.values || [],
    e.exception.values[0] = e.exception.values[0] || {},
    e.exception.values[0].value = e.exception.values[0].value || t || "",
    e.exception.values[0].type = e.exception.values[0].type || n || "Error"
}
function Cf(e, t) {
    t === void 0 && (t = {});
    try {
        e.exception.values[0].mechanism = e.exception.values[0].mechanism || {},
        Object.keys(t).forEach(function(n) {
            e.exception.values[0].mechanism[n] = t[n]
        })
    } catch {}
}
function p0e() {
    try {
        return document.location.href
    } catch {
        return ""
    }
}
var KM = 60 * 1e3;
function m0e(e, t) {
    if (!t)
        return KM;
    var n = parseInt("" + t, 10);
    if (!isNaN(n))
        return n * 1e3;
    var r = Date.parse("" + t);
    return isNaN(r) ? KM : r - e
}
var tu = Pn()
  , Ob = "Sentry Logger "
  , v0e = function() {
    function e() {
        this._enabled = !1
    }
    return e.prototype.disable = function() {
        this._enabled = !1
    }
    ,
    e.prototype.enable = function() {
        this._enabled = !0
    }
    ,
    e.prototype.log = function() {
        for (var t = [], n = 0; n < arguments.length; n++)
            t[n] = arguments[n];
        this._enabled && Tm(function() {
            tu.console.log(Ob + "[Log]: " + t.join(" "))
        })
    }
    ,
    e.prototype.warn = function() {
        for (var t = [], n = 0; n < arguments.length; n++)
            t[n] = arguments[n];
        this._enabled && Tm(function() {
            tu.console.warn(Ob + "[Warn]: " + t.join(" "))
        })
    }
    ,
    e.prototype.error = function() {
        for (var t = [], n = 0; n < arguments.length; n++)
            t[n] = arguments[n];
        this._enabled && Tm(function() {
            tu.console.error(Ob + "[Error]: " + t.join(" "))
        })
    }
    ,
    e
}();
tu.__SENTRY__ = tu.__SENTRY__ || {};
var Dt = tu.__SENTRY__.logger || (tu.__SENTRY__.logger = new v0e)
  , y0e = function() {
    function e() {
        this._hasWeakSet = typeof WeakSet == "function",
        this._inner = this._hasWeakSet ? new WeakSet : []
    }
    return e.prototype.memoize = function(t) {
        if (this._hasWeakSet)
            return this._inner.has(t) ? !0 : (this._inner.add(t),
            !1);
        for (var n = 0; n < this._inner.length; n++) {
            var r = this._inner[n];
            if (r === t)
                return !0
        }
        return this._inner.push(t),
        !1
    }
    ,
    e.prototype.unmemoize = function(t) {
        if (this._hasWeakSet)
            this._inner.delete(t);
        else
            for (var n = 0; n < this._inner.length; n++)
                if (this._inner[n] === t) {
                    this._inner.splice(n, 1);
                    break
                }
    }
    ,
    e
}()
  , Nb = "<anonymous>";
function il(e) {
    try {
        return !e || typeof e != "function" ? Nb : e.name || Nb
    } catch {
        return Nb
    }
}
function or(e, t, n) {
    if (t in e) {
        var r = e[t]
          , i = n(r);
        if (typeof i == "function")
            try {
                i.prototype = i.prototype || {},
                Object.defineProperties(i, {
                    __sentry_original__: {
                        enumerable: !1,
                        value: r
                    }
                })
            } catch {}
        e[t] = i
    }
}
function w0e(e) {
    return Object.keys(e).map(function(t) {
        return encodeURIComponent(t) + "=" + encodeURIComponent(e[t])
    }).join("&")
}
function zz(e) {
    if (Oz(e)) {
        var t = e
          , n = {
            message: t.message,
            name: t.name,
            stack: t.stack
        };
        for (var r in t)
            Object.prototype.hasOwnProperty.call(t, r) && (n[r] = t[r]);
        return n
    }
    if (y5(e)) {
        var i = e
          , o = {};
        o.type = i.type;
        try {
            o.target = jM(i.target) ? rv(i.target) : Object.prototype.toString.call(i.target)
        } catch {
            o.target = "<unknown>"
        }
        try {
            o.currentTarget = jM(i.currentTarget) ? rv(i.currentTarget) : Object.prototype.toString.call(i.currentTarget)
        } catch {
            o.currentTarget = "<unknown>"
        }
        typeof CustomEvent < "u" && Zl(e, CustomEvent) && (o.detail = i.detail);
        for (var r in i)
            Object.prototype.hasOwnProperty.call(i, r) && (o[r] = i);
        return o
    }
    return e
}
function E0e(e) {
    return ~-encodeURI(e).split(/%..|./).length
}
function b0e(e) {
    return E0e(JSON.stringify(e))
}
function $z(e, t, n) {
    t === void 0 && (t = 3),
    n === void 0 && (n = 100 * 1024);
    var r = tg(e, t);
    return b0e(r) > n ? $z(e, t - 1, n) : r
}
function _0e(e) {
    var t = Object.prototype.toString.call(e);
    if (typeof e == "string")
        return e;
    if (t === "[object Object]")
        return "[Object]";
    if (t === "[object Array]")
        return "[Array]";
    var n = Uz(e);
    return kp(n) ? n : t
}
function Uz(e, t) {
    return t === "domain" && e && typeof e == "object" && e._events ? "[Domain]" : t === "domainEmitter" ? "[DomainEmitter]" : typeof global < "u" && e === global ? "[Global]" : typeof window < "u" && e === window ? "[Window]" : typeof document < "u" && e === document ? "[Document]" : o0e(e) ? "[SyntheticEvent]" : typeof e == "number" && e !== e ? "[NaN]" : e === void 0 ? "[undefined]" : typeof e == "function" ? "[Function: " + il(e) + "]" : typeof e == "symbol" ? "[" + String(e) + "]" : typeof e == "bigint" ? "[BigInt: " + String(e) + "]" : e
}
function Hz(e, t, n, r) {
    if (n === void 0 && (n = 1 / 0),
    r === void 0 && (r = new y0e),
    n === 0)
        return _0e(t);
    if (t != null && typeof t.toJSON == "function")
        return t.toJSON();
    var i = Uz(t, e);
    if (kp(i))
        return i;
    var o = zz(t)
      , s = Array.isArray(t) ? [] : {};
    if (r.memoize(t))
        return "[Circular ~]";
    for (var a in o)
        Object.prototype.hasOwnProperty.call(o, a) && (s[a] = Hz(a, o[a], n - 1, r));
    return r.unmemoize(t),
    s
}
function tg(e, t) {
    try {
        return JSON.parse(JSON.stringify(e, function(n, r) {
            return Hz(n, r, t)
        }))
    } catch {
        return "**non-serializable**"
    }
}
function x0e(e, t) {
    t === void 0 && (t = 40);
    var n = Object.keys(zz(e));
    if (n.sort(),
    !n.length)
        return "[object has no keys]";
    if (n[0].length >= t)
        return Lg(n[0], t);
    for (var r = n.length; r > 0; r--) {
        var i = n.slice(0, r).join(", ");
        if (!(i.length > t))
            return r === n.length ? i : Lg(i, t)
    }
    return ""
}
function ov(e) {
    var t, n;
    if (ky(e)) {
        var r = e
          , i = {};
        try {
            for (var o = Fz(Object.keys(r)), s = o.next(); !s.done; s = o.next()) {
                var a = s.value;
                typeof r[a] < "u" && (i[a] = ov(r[a]))
            }
        } catch (l) {
            t = {
                error: l
            }
        } finally {
            try {
                s && !s.done && (n = o.return) && n.call(o)
            } finally {
                if (t)
                    throw t.error
            }
        }
        return i
    }
    return Array.isArray(e) ? e.map(ov) : e
}
function b5() {
    if (!("fetch"in Pn()))
        return !1;
    try {
        return new Headers,
        new Request(""),
        new Response,
        !0
    } catch {
        return !1
    }
}
function cx(e) {
    return e && /^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())
}
function S0e() {
    if (!b5())
        return !1;
    var e = Pn();
    if (cx(e.fetch))
        return !0;
    var t = !1
      , n = e.document;
    if (n && typeof n.createElement == "function")
        try {
            var r = n.createElement("iframe");
            r.hidden = !0,
            n.head.appendChild(r),
            r.contentWindow && r.contentWindow.fetch && (t = cx(r.contentWindow.fetch)),
            n.head.removeChild(r)
        } catch (i) {
            Dt.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ", i)
        }
    return t
}
function I0e() {
    if (!b5())
        return !1;
    try {
        return new Request("_",{
            referrerPolicy: "origin"
        }),
        !0
    } catch {
        return !1
    }
}
function C0e() {
    var e = Pn()
      , t = e.chrome
      , n = t && t.app && t.app.runtime
      , r = "history"in e && !!e.history.pushState && !!e.history.replaceState;
    return !n && r
}
var rn = Pn()
  , Pg = {}
  , XM = {};
function k0e(e) {
    if (!XM[e])
        switch (XM[e] = !0,
        e) {
        case "console":
            T0e();
            break;
        case "dom":
            F0e();
            break;
        case "xhr":
            P0e();
            break;
        case "fetch":
            A0e();
            break;
        case "history":
            R0e();
            break;
        case "error":
            B0e();
            break;
        case "unhandledrejection":
            z0e();
            break;
        default:
            Dt.warn("unknown instrumentation type:", e)
        }
}
function dl(e) {
    !e || typeof e.type != "string" || typeof e.callback != "function" || (Pg[e.type] = Pg[e.type] || [],
    Pg[e.type].push(e.callback),
    k0e(e.type))
}
function Go(e, t) {
    var n, r;
    if (!(!e || !Pg[e]))
        try {
            for (var i = Fz(Pg[e] || []), o = i.next(); !o.done; o = i.next()) {
                var s = o.value;
                try {
                    s(t)
                } catch (a) {
                    Dt.error(`Error while triggering instrumentation handler.
Type: ` + e + `
Name: ` + il(s) + `
Error: ` + a)
                }
            }
        } catch (a) {
            n = {
                error: a
            }
        } finally {
            try {
                o && !o.done && (r = i.return) && r.call(i)
            } finally {
                if (n)
                    throw n.error
            }
        }
}
function T0e() {
    "console"in rn && ["debug", "info", "warn", "error", "log", "assert"].forEach(function(e) {
        e in rn.console && or(rn.console, e, function(t) {
            return function() {
                for (var n = [], r = 0; r < arguments.length; r++)
                    n[r] = arguments[r];
                Go("console", {
                    args: n,
                    level: e
                }),
                t && Function.prototype.apply.call(t, rn.console, n)
            }
        })
    })
}
function A0e() {
    S0e() && or(rn, "fetch", function(e) {
        return function() {
            for (var t = [], n = 0; n < arguments.length; n++)
                t[n] = arguments[n];
            var r = {
                args: t,
                fetchData: {
                    method: M0e(t),
                    url: L0e(t)
                },
                startTimestamp: Date.now()
            };
            return Go("fetch", Mc({}, r)),
            e.apply(rn, t).then(function(i) {
                return Go("fetch", Mc(Mc({}, r), {
                    endTimestamp: Date.now(),
                    response: i
                })),
                i
            }, function(i) {
                throw Go("fetch", Mc(Mc({}, r), {
                    endTimestamp: Date.now(),
                    error: i
                })),
                i
            })
        }
    })
}
function M0e(e) {
    return e === void 0 && (e = []),
    "Request"in rn && Zl(e[0], Request) && e[0].method ? String(e[0].method).toUpperCase() : e[1] && e[1].method ? String(e[1].method).toUpperCase() : "GET"
}
function L0e(e) {
    return e === void 0 && (e = []),
    typeof e[0] == "string" ? e[0] : "Request"in rn && Zl(e[0], Request) ? e[0].url : String(e[0])
}
function P0e() {
    if ("XMLHttpRequest"in rn) {
        var e = []
          , t = []
          , n = XMLHttpRequest.prototype;
        or(n, "open", function(r) {
            return function() {
                for (var i = [], o = 0; o < arguments.length; o++)
                    i[o] = arguments[o];
                var s = this
                  , a = i[1];
                s.__sentry_xhr__ = {
                    method: If(i[0]) ? i[0].toUpperCase() : i[0],
                    url: i[1]
                },
                If(a) && s.__sentry_xhr__.method === "POST" && a.match(/sentry_key/) && (s.__sentry_own_request__ = !0);
                var l = function() {
                    if (s.readyState === 4) {
                        try {
                            s.__sentry_xhr__ && (s.__sentry_xhr__.status_code = s.status)
                        } catch {}
                        try {
                            var c = e.indexOf(s);
                            if (c !== -1) {
                                e.splice(c);
                                var u = t.splice(c)[0];
                                s.__sentry_xhr__ && u[0] !== void 0 && (s.__sentry_xhr__.body = u[0])
                            }
                        } catch {}
                        Go("xhr", {
                            args: i,
                            endTimestamp: Date.now(),
                            startTimestamp: Date.now(),
                            xhr: s
                        })
                    }
                };
                return "onreadystatechange"in s && typeof s.onreadystatechange == "function" ? or(s, "onreadystatechange", function(c) {
                    return function() {
                        for (var u = [], f = 0; f < arguments.length; f++)
                            u[f] = arguments[f];
                        return l(),
                        c.apply(s, u)
                    }
                }) : s.addEventListener("readystatechange", l),
                r.apply(s, i)
            }
        }),
        or(n, "send", function(r) {
            return function() {
                for (var i = [], o = 0; o < arguments.length; o++)
                    i[o] = arguments[o];
                return e.push(this),
                t.push(i),
                Go("xhr", {
                    args: i,
                    startTimestamp: Date.now(),
                    xhr: this
                }),
                r.apply(this, i)
            }
        })
    }
}
var U0;
function R0e() {
    if (!C0e())
        return;
    var e = rn.onpopstate;
    rn.onpopstate = function() {
        for (var n = [], r = 0; r < arguments.length; r++)
            n[r] = arguments[r];
        var i = rn.location.href
          , o = U0;
        if (U0 = i,
        Go("history", {
            from: o,
            to: i
        }),
        e)
            return e.apply(this, n)
    }
    ;
    function t(n) {
        return function() {
            for (var r = [], i = 0; i < arguments.length; i++)
                r[i] = arguments[i];
            var o = r.length > 2 ? r[2] : void 0;
            if (o) {
                var s = U0
                  , a = String(o);
                U0 = a,
                Go("history", {
                    from: s,
                    to: a
                })
            }
            return n.apply(this, r)
        }
    }
    or(rn.history, "pushState", t),
    or(rn.history, "replaceState", t)
}
var D0e = 1e3, H0, W0;
function O0e(e, t) {
    if (!e || e.type !== t.type)
        return !0;
    try {
        if (e.target !== t.target)
            return !0
    } catch {}
    return !1
}
function N0e(e) {
    if (e.type !== "keypress")
        return !1;
    try {
        var t = e.target;
        if (!t || !t.tagName)
            return !0;
        if (t.tagName === "INPUT" || t.tagName === "TEXTAREA" || t.isContentEditable)
            return !1
    } catch {}
    return !0
}
function ZM(e, t) {
    return t === void 0 && (t = !1),
    function(n) {
        if (!(!n || W0 === n) && !N0e(n)) {
            var r = n.type === "keypress" ? "input" : n.type;
            H0 === void 0 ? (e({
                event: n,
                name: r,
                global: t
            }),
            W0 = n) : O0e(W0, n) && (e({
                event: n,
                name: r,
                global: t
            }),
            W0 = n),
            clearTimeout(H0),
            H0 = rn.setTimeout(function() {
                H0 = void 0
            }, D0e)
        }
    }
}
function F0e() {
    if ("document"in rn) {
        var e = Go.bind(null, "dom")
          , t = ZM(e, !0);
        rn.document.addEventListener("click", t, !1),
        rn.document.addEventListener("keypress", t, !1),
        ["EventTarget", "Node"].forEach(function(n) {
            var r = rn[n] && rn[n].prototype;
            !r || !r.hasOwnProperty || !r.hasOwnProperty("addEventListener") || (or(r, "addEventListener", function(i) {
                return function(o, s, a) {
                    if (o === "click" || o == "keypress")
                        try {
                            var l = this
                              , c = l.__sentry_instrumentation_handlers__ = l.__sentry_instrumentation_handlers__ || {}
                              , u = c[o] = c[o] || {
                                refCount: 0
                            };
                            if (!u.handler) {
                                var f = ZM(e);
                                u.handler = f,
                                i.call(this, o, f, a)
                            }
                            u.refCount += 1
                        } catch {}
                    return i.call(this, o, s, a)
                }
            }),
            or(r, "removeEventListener", function(i) {
                return function(o, s, a) {
                    if (o === "click" || o == "keypress")
                        try {
                            var l = this
                              , c = l.__sentry_instrumentation_handlers__ || {}
                              , u = c[o];
                            u && (u.refCount -= 1,
                            u.refCount <= 0 && (i.call(this, o, u.handler, a),
                            u.handler = void 0,
                            delete c[o]),
                            Object.keys(c).length === 0 && delete l.__sentry_instrumentation_handlers__)
                        } catch {}
                    return i.call(this, o, s, a)
                }
            }))
        })
    }
}
var Fb = null;
function B0e() {
    Fb = rn.onerror,
    rn.onerror = function(e, t, n, r, i) {
        return Go("error", {
            column: r,
            error: i,
            line: n,
            msg: e,
            url: t
        }),
        Fb ? Fb.apply(this, arguments) : !1
    }
}
var Bb = null;
function z0e() {
    Bb = rn.onunhandledrejection,
    rn.onunhandledrejection = function(e) {
        return Go("unhandledrejection", e),
        Bb ? Bb.apply(this, arguments) : !0
    }
}
var ea;
(function(e) {
    e.PENDING = "PENDING",
    e.RESOLVED = "RESOLVED",
    e.REJECTED = "REJECTED"
}
)(ea || (ea = {}));
var ci = function() {
    function e(t) {
        var n = this;
        this._state = ea.PENDING,
        this._handlers = [],
        this._resolve = function(r) {
            n._setResult(ea.RESOLVED, r)
        }
        ,
        this._reject = function(r) {
            n._setResult(ea.REJECTED, r)
        }
        ,
        this._setResult = function(r, i) {
            if (n._state === ea.PENDING) {
                if (w5(i)) {
                    i.then(n._resolve, n._reject);
                    return
                }
                n._state = r,
                n._value = i,
                n._executeHandlers()
            }
        }
        ,
        this._attachHandler = function(r) {
            n._handlers = n._handlers.concat(r),
            n._executeHandlers()
        }
        ,
        this._executeHandlers = function() {
            if (n._state !== ea.PENDING) {
                var r = n._handlers.slice();
                n._handlers = [],
                r.forEach(function(i) {
                    i.done || (n._state === ea.RESOLVED && i.onfulfilled && i.onfulfilled(n._value),
                    n._state === ea.REJECTED && i.onrejected && i.onrejected(n._value),
                    i.done = !0)
                })
            }
        }
        ;
        try {
            t(this._resolve, this._reject)
        } catch (r) {
            this._reject(r)
        }
    }
    return e.resolve = function(t) {
        return new e(function(n) {
            n(t)
        }
        )
    }
    ,
    e.reject = function(t) {
        return new e(function(n, r) {
            r(t)
        }
        )
    }
    ,
    e.all = function(t) {
        return new e(function(n, r) {
            if (!Array.isArray(t)) {
                r(new TypeError("Promise.all requires an array as input."));
                return
            }
            if (t.length === 0) {
                n([]);
                return
            }
            var i = t.length
              , o = [];
            t.forEach(function(s, a) {
                e.resolve(s).then(function(l) {
                    o[a] = l,
                    i -= 1,
                    i === 0 && n(o)
                }).then(null, r)
            })
        }
        )
    }
    ,
    e.prototype.then = function(t, n) {
        var r = this;
        return new e(function(i, o) {
            r._attachHandler({
                done: !1,
                onfulfilled: function(s) {
                    if (!t) {
                        i(s);
                        return
                    }
                    try {
                        i(t(s));
                        return
                    } catch (a) {
                        o(a);
                        return
                    }
                },
                onrejected: function(s) {
                    if (!n) {
                        o(s);
                        return
                    }
                    try {
                        i(n(s));
                        return
                    } catch (a) {
                        o(a);
                        return
                    }
                }
            })
        }
        )
    }
    ,
    e.prototype.catch = function(t) {
        return this.then(function(n) {
            return n
        }, t)
    }
    ,
    e.prototype.finally = function(t) {
        var n = this;
        return new e(function(r, i) {
            var o, s;
            return n.then(function(a) {
                s = !1,
                o = a,
                t && t()
            }, function(a) {
                s = !0,
                o = a,
                t && t()
            }).then(function() {
                if (s) {
                    i(o);
                    return
                }
                r(o)
            })
        }
        )
    }
    ,
    e.prototype.toString = function() {
        return "[object SyncPromise]"
    }
    ,
    e
}()
  , $0e = function() {
    function e(t) {
        this._limit = t,
        this._buffer = []
    }
    return e.prototype.isReady = function() {
        return this._limit === void 0 || this.length() < this._limit
    }
    ,
    e.prototype.add = function(t) {
        var n = this;
        return this.isReady() ? (this._buffer.indexOf(t) === -1 && this._buffer.push(t),
        t.then(function() {
            return n.remove(t)
        }).then(null, function() {
            return n.remove(t).then(null, function() {})
        }),
        t) : ci.reject(new rr("Not adding Promise due to buffer limit reached."))
    }
    ,
    e.prototype.remove = function(t) {
        var n = this._buffer.splice(this._buffer.indexOf(t), 1)[0];
        return n
    }
    ,
    e.prototype.length = function() {
        return this._buffer.length
    }
    ,
    e.prototype.drain = function(t) {
        var n = this;
        return new ci(function(r) {
            var i = setTimeout(function() {
                t && t > 0 && r(!1)
            }, t);
            ci.all(n._buffer).then(function() {
                clearTimeout(i),
                r(!0)
            }).then(null, function() {
                r(!0)
            })
        }
        )
    }
    ,
    e
}()
  , ux = {
    nowSeconds: function() {
        return Date.now() / 1e3
    }
};
function U0e() {
    var e = Pn().performance;
    if (!(!e || !e.now)) {
        var t = Date.now() - e.now();
        return {
            now: function() {
                return e.now()
            },
            timeOrigin: t
        }
    }
}
function H0e() {
    try {
        var e = h0e(module, "perf_hooks");
        return e.performance
    } catch {
        return
    }
}
var zb = E5() ? H0e() : U0e()
  , qM = zb === void 0 ? ux : {
    nowSeconds: function() {
        return (zb.timeOrigin + zb.now()) / 1e3
    }
}
  , _5 = ux.nowSeconds.bind(ux);
qM.nowSeconds.bind(qM);
(function() {
    var e = Pn().performance;
    if (e) {
        var t = 3600 * 1e3
          , n = e.timeOrigin && Math.abs(e.timeOrigin + e.now() - Date.now()) < t;
        if (n)
            return e.timeOrigin;
        var r = e.timing && e.timing.navigationStart
          , i = typeof r == "number"
          , o = i && Math.abs(r + e.now() - Date.now()) < t;
        return o ? r : Date.now()
    }
}
)();
var sv = function() {
    function e() {
        this._notifyingListeners = !1,
        this._scopeListeners = [],
        this._eventProcessors = [],
        this._breadcrumbs = [],
        this._user = {},
        this._tags = {},
        this._extra = {},
        this._contexts = {}
    }
    return e.clone = function(t) {
        var n = new e;
        return t && (n._breadcrumbs = Sc(t._breadcrumbs),
        n._tags = Ve({}, t._tags),
        n._extra = Ve({}, t._extra),
        n._contexts = Ve({}, t._contexts),
        n._user = t._user,
        n._level = t._level,
        n._span = t._span,
        n._session = t._session,
        n._transactionName = t._transactionName,
        n._fingerprint = t._fingerprint,
        n._eventProcessors = Sc(t._eventProcessors)),
        n
    }
    ,
    e.prototype.addScopeListener = function(t) {
        this._scopeListeners.push(t)
    }
    ,
    e.prototype.addEventProcessor = function(t) {
        return this._eventProcessors.push(t),
        this
    }
    ,
    e.prototype.setUser = function(t) {
        return this._user = t || {},
        this._session && this._session.update({
            user: t
        }),
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.getUser = function() {
        return this._user
    }
    ,
    e.prototype.setTags = function(t) {
        return this._tags = Ve(Ve({}, this._tags), t),
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setTag = function(t, n) {
        var r;
        return this._tags = Ve(Ve({}, this._tags), (r = {},
        r[t] = n,
        r)),
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setExtras = function(t) {
        return this._extra = Ve(Ve({}, this._extra), t),
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setExtra = function(t, n) {
        var r;
        return this._extra = Ve(Ve({}, this._extra), (r = {},
        r[t] = n,
        r)),
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setFingerprint = function(t) {
        return this._fingerprint = t,
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setLevel = function(t) {
        return this._level = t,
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setTransactionName = function(t) {
        return this._transactionName = t,
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setTransaction = function(t) {
        return this.setTransactionName(t)
    }
    ,
    e.prototype.setContext = function(t, n) {
        var r;
        return n === null ? delete this._contexts[t] : this._contexts = Ve(Ve({}, this._contexts), (r = {},
        r[t] = n,
        r)),
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.setSpan = function(t) {
        return this._span = t,
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.getSpan = function() {
        return this._span
    }
    ,
    e.prototype.getTransaction = function() {
        var t, n, r, i, o = this.getSpan();
        if (!((t = o) === null || t === void 0) && t.transaction)
            return (n = o) === null || n === void 0 ? void 0 : n.transaction;
        if (!((i = (r = o) === null || r === void 0 ? void 0 : r.spanRecorder) === null || i === void 0) && i.spans[0])
            return o.spanRecorder.spans[0]
    }
    ,
    e.prototype.setSession = function(t) {
        return t ? this._session = t : delete this._session,
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.getSession = function() {
        return this._session
    }
    ,
    e.prototype.update = function(t) {
        if (!t)
            return this;
        if (typeof t == "function") {
            var n = t(this);
            return n instanceof e ? n : this
        }
        return t instanceof e ? (this._tags = Ve(Ve({}, this._tags), t._tags),
        this._extra = Ve(Ve({}, this._extra), t._extra),
        this._contexts = Ve(Ve({}, this._contexts), t._contexts),
        t._user && Object.keys(t._user).length && (this._user = t._user),
        t._level && (this._level = t._level),
        t._fingerprint && (this._fingerprint = t._fingerprint)) : ky(t) && (t = t,
        this._tags = Ve(Ve({}, this._tags), t.tags),
        this._extra = Ve(Ve({}, this._extra), t.extra),
        this._contexts = Ve(Ve({}, this._contexts), t.contexts),
        t.user && (this._user = t.user),
        t.level && (this._level = t.level),
        t.fingerprint && (this._fingerprint = t.fingerprint)),
        this
    }
    ,
    e.prototype.clear = function() {
        return this._breadcrumbs = [],
        this._tags = {},
        this._extra = {},
        this._user = {},
        this._contexts = {},
        this._level = void 0,
        this._transactionName = void 0,
        this._fingerprint = void 0,
        this._span = void 0,
        this._session = void 0,
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.addBreadcrumb = function(t, n) {
        var r = Ve({
            timestamp: _5()
        }, t);
        return this._breadcrumbs = n !== void 0 && n >= 0 ? Sc(this._breadcrumbs, [r]).slice(-n) : Sc(this._breadcrumbs, [r]),
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.clearBreadcrumbs = function() {
        return this._breadcrumbs = [],
        this._notifyScopeListeners(),
        this
    }
    ,
    e.prototype.applyToEvent = function(t, n) {
        var r;
        if (this._extra && Object.keys(this._extra).length && (t.extra = Ve(Ve({}, this._extra), t.extra)),
        this._tags && Object.keys(this._tags).length && (t.tags = Ve(Ve({}, this._tags), t.tags)),
        this._user && Object.keys(this._user).length && (t.user = Ve(Ve({}, this._user), t.user)),
        this._contexts && Object.keys(this._contexts).length && (t.contexts = Ve(Ve({}, this._contexts), t.contexts)),
        this._level && (t.level = this._level),
        this._transactionName && (t.transaction = this._transactionName),
        this._span) {
            t.contexts = Ve({
                trace: this._span.getTraceContext()
            }, t.contexts);
            var i = (r = this._span.transaction) === null || r === void 0 ? void 0 : r.name;
            i && (t.tags = Ve({
                transaction: i
            }, t.tags))
        }
        return this._applyFingerprint(t),
        t.breadcrumbs = Sc(t.breadcrumbs || [], this._breadcrumbs),
        t.breadcrumbs = t.breadcrumbs.length > 0 ? t.breadcrumbs : void 0,
        this._notifyEventProcessors(Sc(Wz(), this._eventProcessors), t, n)
    }
    ,
    e.prototype._notifyEventProcessors = function(t, n, r, i) {
        var o = this;
        return i === void 0 && (i = 0),
        new ci(function(s, a) {
            var l = t[i];
            if (n === null || typeof l != "function")
                s(n);
            else {
                var c = l(Ve({}, n), r);
                w5(c) ? c.then(function(u) {
                    return o._notifyEventProcessors(t, u, r, i + 1).then(s)
                }).then(null, a) : o._notifyEventProcessors(t, c, r, i + 1).then(s).then(null, a)
            }
        }
        )
    }
    ,
    e.prototype._notifyScopeListeners = function() {
        var t = this;
        this._notifyingListeners || (this._notifyingListeners = !0,
        this._scopeListeners.forEach(function(n) {
            n(t)
        }),
        this._notifyingListeners = !1)
    }
    ,
    e.prototype._applyFingerprint = function(t) {
        t.fingerprint = t.fingerprint ? Array.isArray(t.fingerprint) ? t.fingerprint : [t.fingerprint] : [],
        this._fingerprint && (t.fingerprint = t.fingerprint.concat(this._fingerprint)),
        t.fingerprint && !t.fingerprint.length && delete t.fingerprint
    }
    ,
    e
}();
function Wz() {
    var e = Pn();
    return e.__SENTRY__ = e.__SENTRY__ || {},
    e.__SENTRY__.globalEventProcessors = e.__SENTRY__.globalEventProcessors || [],
    e.__SENTRY__.globalEventProcessors
}
function Ty(e) {
    Wz().push(e)
}
var W0e = function() {
    function e(t) {
        this.errors = 0,
        this.sid = Jd(),
        this.timestamp = Date.now(),
        this.started = Date.now(),
        this.duration = 0,
        this.status = Fl.Ok,
        this.init = !0,
        t && this.update(t)
    }
    return e.prototype.update = function(t) {
        t === void 0 && (t = {}),
        t.user && (t.user.ip_address && (this.ipAddress = t.user.ip_address),
        t.did || (this.did = t.user.id || t.user.email || t.user.username)),
        this.timestamp = t.timestamp || Date.now(),
        t.sid && (this.sid = t.sid.length === 32 ? t.sid : Jd()),
        t.init !== void 0 && (this.init = t.init),
        t.did && (this.did = "" + t.did),
        typeof t.started == "number" && (this.started = t.started),
        typeof t.duration == "number" ? this.duration = t.duration : this.duration = this.timestamp - this.started,
        t.release && (this.release = t.release),
        t.environment && (this.environment = t.environment),
        t.ipAddress && (this.ipAddress = t.ipAddress),
        t.userAgent && (this.userAgent = t.userAgent),
        typeof t.errors == "number" && (this.errors = t.errors),
        t.status && (this.status = t.status)
    }
    ,
    e.prototype.close = function(t) {
        t ? this.update({
            status: t
        }) : this.status === Fl.Ok ? this.update({
            status: Fl.Exited
        }) : this.update()
    }
    ,
    e.prototype.toJSON = function() {
        return ov({
            sid: "" + this.sid,
            init: this.init,
            started: new Date(this.started).toISOString(),
            timestamp: new Date(this.timestamp).toISOString(),
            status: this.status,
            errors: this.errors,
            did: typeof this.did == "number" || typeof this.did == "string" ? "" + this.did : void 0,
            duration: this.duration,
            attrs: ov({
                release: this.release,
                environment: this.environment,
                ip_address: this.ipAddress,
                user_agent: this.userAgent
            })
        })
    }
    ,
    e
}()
  , x5 = 3
  , G0e = 100
  , V0e = 100
  , S5 = function() {
    function e(t, n, r) {
        n === void 0 && (n = new sv),
        r === void 0 && (r = x5),
        this._version = r,
        this._stack = [{}],
        this.getStackTop().scope = n,
        this.bindClient(t)
    }
    return e.prototype.isOlderThan = function(t) {
        return this._version < t
    }
    ,
    e.prototype.bindClient = function(t) {
        var n = this.getStackTop();
        n.client = t,
        t && t.setupIntegrations && t.setupIntegrations()
    }
    ,
    e.prototype.pushScope = function() {
        var t = sv.clone(this.getScope());
        return this.getStack().push({
            client: this.getClient(),
            scope: t
        }),
        t
    }
    ,
    e.prototype.popScope = function() {
        return this.getStack().length <= 1 ? !1 : !!this.getStack().pop()
    }
    ,
    e.prototype.withScope = function(t) {
        var n = this.pushScope();
        try {
            t(n)
        } finally {
            this.popScope()
        }
    }
    ,
    e.prototype.getClient = function() {
        return this.getStackTop().client
    }
    ,
    e.prototype.getScope = function() {
        return this.getStackTop().scope
    }
    ,
    e.prototype.getStack = function() {
        return this._stack
    }
    ,
    e.prototype.getStackTop = function() {
        return this._stack[this._stack.length - 1]
    }
    ,
    e.prototype.captureException = function(t, n) {
        var r = this._lastEventId = Jd()
          , i = n;
        if (!n) {
            var o = void 0;
            try {
                throw new Error("Sentry syntheticException")
            } catch (s) {
                o = s
            }
            i = {
                originalException: t,
                syntheticException: o
            }
        }
        return this._invokeClient("captureException", t, Ve(Ve({}, i), {
            event_id: r
        })),
        r
    }
    ,
    e.prototype.captureMessage = function(t, n, r) {
        var i = this._lastEventId = Jd()
          , o = r;
        if (!r) {
            var s = void 0;
            try {
                throw new Error(t)
            } catch (a) {
                s = a
            }
            o = {
                originalException: t,
                syntheticException: s
            }
        }
        return this._invokeClient("captureMessage", t, n, Ve(Ve({}, o), {
            event_id: i
        })),
        i
    }
    ,
    e.prototype.captureEvent = function(t, n) {
        var r = this._lastEventId = Jd();
        return this._invokeClient("captureEvent", t, Ve(Ve({}, n), {
            event_id: r
        })),
        r
    }
    ,
    e.prototype.lastEventId = function() {
        return this._lastEventId
    }
    ,
    e.prototype.addBreadcrumb = function(t, n) {
        var r = this.getStackTop()
          , i = r.scope
          , o = r.client;
        if (!(!i || !o)) {
            var s = o.getOptions && o.getOptions() || {}
              , a = s.beforeBreadcrumb
              , l = a === void 0 ? null : a
              , c = s.maxBreadcrumbs
              , u = c === void 0 ? G0e : c;
            if (!(u <= 0)) {
                var f = _5()
                  , h = Ve({
                    timestamp: f
                }, t)
                  , m = l ? Tm(function() {
                    return l(h, n)
                }) : h;
                m !== null && i.addBreadcrumb(m, Math.min(u, V0e))
            }
        }
    }
    ,
    e.prototype.setUser = function(t) {
        var n = this.getScope();
        n && n.setUser(t)
    }
    ,
    e.prototype.setTags = function(t) {
        var n = this.getScope();
        n && n.setTags(t)
    }
    ,
    e.prototype.setExtras = function(t) {
        var n = this.getScope();
        n && n.setExtras(t)
    }
    ,
    e.prototype.setTag = function(t, n) {
        var r = this.getScope();
        r && r.setTag(t, n)
    }
    ,
    e.prototype.setExtra = function(t, n) {
        var r = this.getScope();
        r && r.setExtra(t, n)
    }
    ,
    e.prototype.setContext = function(t, n) {
        var r = this.getScope();
        r && r.setContext(t, n)
    }
    ,
    e.prototype.configureScope = function(t) {
        var n = this.getStackTop()
          , r = n.scope
          , i = n.client;
        r && i && t(r)
    }
    ,
    e.prototype.run = function(t) {
        var n = QM(this);
        try {
            t(this)
        } finally {
            QM(n)
        }
    }
    ,
    e.prototype.getIntegration = function(t) {
        var n = this.getClient();
        if (!n)
            return null;
        try {
            return n.getIntegration(t)
        } catch {
            return Dt.warn("Cannot retrieve integration " + t.id + " from the current Hub"),
            null
        }
    }
    ,
    e.prototype.startSpan = function(t) {
        return this._callExtensionMethod("startSpan", t)
    }
    ,
    e.prototype.startTransaction = function(t, n) {
        return this._callExtensionMethod("startTransaction", t, n)
    }
    ,
    e.prototype.traceHeaders = function() {
        return this._callExtensionMethod("traceHeaders")
    }
    ,
    e.prototype.captureSession = function(t) {
        if (t === void 0 && (t = !1),
        t)
            return this.endSession();
        this._sendSessionUpdate()
    }
    ,
    e.prototype.endSession = function() {
        var t, n, r, i, o;
        (r = (n = (t = this.getStackTop()) === null || t === void 0 ? void 0 : t.scope) === null || n === void 0 ? void 0 : n.getSession()) === null || r === void 0 || r.close(),
        this._sendSessionUpdate(),
        (o = (i = this.getStackTop()) === null || i === void 0 ? void 0 : i.scope) === null || o === void 0 || o.setSession()
    }
    ,
    e.prototype.startSession = function(t) {
        var n = this.getStackTop()
          , r = n.scope
          , i = n.client
          , o = i && i.getOptions() || {}
          , s = o.release
          , a = o.environment
          , l = new W0e(Ve(Ve({
            release: s,
            environment: a
        }, r && {
            user: r.getUser()
        }), t));
        if (r) {
            var c = r.getSession && r.getSession();
            c && c.status === Fl.Ok && c.update({
                status: Fl.Exited
            }),
            this.endSession(),
            r.setSession(l)
        }
        return l
    }
    ,
    e.prototype._sendSessionUpdate = function() {
        var t = this.getStackTop()
          , n = t.scope
          , r = t.client;
        if (n) {
            var i = n.getSession && n.getSession();
            i && r && r.captureSession && r.captureSession(i)
        }
    }
    ,
    e.prototype._invokeClient = function(t) {
        for (var n, r = [], i = 1; i < arguments.length; i++)
            r[i - 1] = arguments[i];
        var o = this.getStackTop()
          , s = o.scope
          , a = o.client;
        a && a[t] && (n = a)[t].apply(n, Sc(r, [s]))
    }
    ,
    e.prototype._callExtensionMethod = function(t) {
        for (var n = [], r = 1; r < arguments.length; r++)
            n[r - 1] = arguments[r];
        var i = Ay()
          , o = i.__SENTRY__;
        if (o && o.extensions && typeof o.extensions[t] == "function")
            return o.extensions[t].apply(this, n);
        Dt.warn("Extension method " + t + " couldn't be found, doing nothing.")
    }
    ,
    e
}();
function Ay() {
    var e = Pn();
    return e.__SENTRY__ = e.__SENTRY__ || {
        extensions: {},
        hub: void 0
    },
    e
}
function QM(e) {
    var t = Ay()
      , n = fl(t);
    return I5(t, e),
    n
}
function br() {
    var e = Ay();
    return (!Gz(e) || fl(e).isOlderThan(x5)) && I5(e, new S5),
    E5() ? Y0e(e) : fl(e)
}
function Y0e(e) {
    var t, n, r;
    try {
        var i = (r = (n = (t = Ay().__SENTRY__) === null || t === void 0 ? void 0 : t.extensions) === null || n === void 0 ? void 0 : n.domain) === null || r === void 0 ? void 0 : r.active;
        if (!i)
            return fl(e);
        if (!Gz(i) || fl(i).isOlderThan(x5)) {
            var o = fl(e).getStackTop();
            I5(i, new S5(o.client,sv.clone(o.scope)))
        }
        return fl(i)
    } catch {
        return fl(e)
    }
}
function Gz(e) {
    return !!(e && e.__SENTRY__ && e.__SENTRY__.hub)
}
function fl(e) {
    return e && e.__SENTRY__ && e.__SENTRY__.hub || (e.__SENTRY__ = e.__SENTRY__ || {},
    e.__SENTRY__.hub = new S5),
    e.__SENTRY__.hub
}
function I5(e, t) {
    return e ? (e.__SENTRY__ = e.__SENTRY__ || {},
    e.__SENTRY__.hub = t,
    !0) : !1
}
function Vz(e) {
    for (var t = [], n = 1; n < arguments.length; n++)
        t[n - 1] = arguments[n];
    var r = br();
    if (r && r[e])
        return r[e].apply(r, t0e(t));
    throw new Error("No hub defined or " + e + " was not found on the hub, please open a bug report.")
}
function Yz(e, t) {
    var n;
    try {
        throw new Error("Sentry syntheticException")
    } catch (r) {
        n = r
    }
    return Vz("captureException", e, {
        captureContext: t,
        originalException: e,
        syntheticException: n
    })
}
function jz(e) {
    Vz("withScope", e)
}
var JM = "7"
  , Kz = function() {
    function e(t, n) {
        n === void 0 && (n = {}),
        this.dsn = t,
        this._dsnObject = new Bz(t),
        this.metadata = n
    }
    return e.prototype.getDsn = function() {
        return this._dsnObject
    }
    ,
    e.prototype.getBaseApiEndpoint = function() {
        var t = this._dsnObject
          , n = t.protocol ? t.protocol + ":" : ""
          , r = t.port ? ":" + t.port : "";
        return n + "//" + t.host + r + (t.path ? "/" + t.path : "") + "/api/"
    }
    ,
    e.prototype.getStoreEndpoint = function() {
        return this._getIngestEndpoint("store")
    }
    ,
    e.prototype.getStoreEndpointWithUrlEncodedAuth = function() {
        return this.getStoreEndpoint() + "?" + this._encodedAuth()
    }
    ,
    e.prototype.getEnvelopeEndpointWithUrlEncodedAuth = function() {
        return this._getEnvelopeEndpoint() + "?" + this._encodedAuth()
    }
    ,
    e.prototype.getStoreEndpointPath = function() {
        var t = this._dsnObject;
        return (t.path ? "/" + t.path : "") + "/api/" + t.projectId + "/store/"
    }
    ,
    e.prototype.getRequestHeaders = function(t, n) {
        var r = this._dsnObject
          , i = ["Sentry sentry_version=" + JM];
        return i.push("sentry_client=" + t + "/" + n),
        i.push("sentry_key=" + r.publicKey),
        r.pass && i.push("sentry_secret=" + r.pass),
        {
            "Content-Type": "application/json",
            "X-Sentry-Auth": i.join(", ")
        }
    }
    ,
    e.prototype.getReportDialogEndpoint = function(t) {
        t === void 0 && (t = {});
        var n = this._dsnObject
          , r = this.getBaseApiEndpoint() + "embed/error-page/"
          , i = [];
        i.push("dsn=" + n.toString());
        for (var o in t)
            if (o !== "dsn")
                if (o === "user") {
                    if (!t.user)
                        continue;
                    t.user.name && i.push("name=" + encodeURIComponent(t.user.name)),
                    t.user.email && i.push("email=" + encodeURIComponent(t.user.email))
                } else
                    i.push(encodeURIComponent(o) + "=" + encodeURIComponent(t[o]));
        return i.length ? r + "?" + i.join("&") : r
    }
    ,
    e.prototype._getEnvelopeEndpoint = function() {
        return this._getIngestEndpoint("envelope")
    }
    ,
    e.prototype._getIngestEndpoint = function(t) {
        var n = this.getBaseApiEndpoint()
          , r = this._dsnObject;
        return "" + n + r.projectId + "/" + t + "/"
    }
    ,
    e.prototype._encodedAuth = function() {
        var t = this._dsnObject
          , n = {
            sentry_key: t.publicKey,
            sentry_version: JM
        };
        return w0e(n)
    }
    ,
    e
}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Or = function() {
    return Or = Object.assign || function(t) {
        for (var n, r = 1, i = arguments.length; r < i; r++) {
            n = arguments[r];
            for (var o in n)
                Object.prototype.hasOwnProperty.call(n, o) && (t[o] = n[o])
        }
        return t
    }
    ,
    Or.apply(this, arguments)
};
function j0e(e, t) {
    var n = {};
    for (var r in e)
        Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
    if (e != null && typeof Object.getOwnPropertySymbols == "function")
        for (var i = 0, r = Object.getOwnPropertySymbols(e); i < r.length; i++)
            t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]]);
    return n
}
function K0e(e) {
    var t = typeof Symbol == "function" && Symbol.iterator
      , n = t && e[t]
      , r = 0;
    if (n)
        return n.call(e);
    if (e && typeof e.length == "number")
        return {
            next: function() {
                return e && r >= e.length && (e = void 0),
                {
                    value: e && e[r++],
                    done: !e
                }
            }
        };
    throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.")
}
function X0e(e, t) {
    var n = typeof Symbol == "function" && e[Symbol.iterator];
    if (!n)
        return e;
    var r = n.call(e), i, o = [], s;
    try {
        for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; )
            o.push(i.value)
    } catch (a) {
        s = {
            error: a
        }
    } finally {
        try {
            i && !i.done && (n = r.return) && n.call(r)
        } finally {
            if (s)
                throw s.error
        }
    }
    return o
}
function Bl() {
    for (var e = [], t = 0; t < arguments.length; t++)
        e = e.concat(X0e(arguments[t]));
    return e
}
var e7 = [];
function Z0e(e) {
    var t = e.defaultIntegrations && Bl(e.defaultIntegrations) || []
      , n = e.integrations
      , r = [];
    if (Array.isArray(n)) {
        var i = n.map(function(l) {
            return l.name
        })
          , o = [];
        t.forEach(function(l) {
            i.indexOf(l.name) === -1 && o.indexOf(l.name) === -1 && (r.push(l),
            o.push(l.name))
        }),
        n.forEach(function(l) {
            o.indexOf(l.name) === -1 && (r.push(l),
            o.push(l.name))
        })
    } else
        typeof n == "function" ? (r = n(t),
        r = Array.isArray(r) ? r : [r]) : r = Bl(t);
    var s = r.map(function(l) {
        return l.name
    })
      , a = "Debug";
    return s.indexOf(a) !== -1 && r.push.apply(r, Bl(r.splice(s.indexOf(a), 1))),
    r
}
function q0e(e) {
    e7.indexOf(e.name) === -1 && (e.setupOnce(Ty, br),
    e7.push(e.name),
    Dt.log("Integration installed: " + e.name))
}
function Q0e(e) {
    var t = {};
    return Z0e(e).forEach(function(n) {
        t[n.name] = n,
        q0e(n)
    }),
    t
}
var J0e = function() {
    function e(t, n) {
        this._integrations = {},
        this._processing = 0,
        this._backend = new t(n),
        this._options = n,
        n.dsn && (this._dsn = new Bz(n.dsn))
    }
    return e.prototype.captureException = function(t, n, r) {
        var i = this
          , o = n && n.event_id;
        return this._process(this._getBackend().eventFromException(t, n).then(function(s) {
            return i._captureEvent(s, n, r)
        }).then(function(s) {
            o = s
        })),
        o
    }
    ,
    e.prototype.captureMessage = function(t, n, r, i) {
        var o = this
          , s = r && r.event_id
          , a = kp(t) ? this._getBackend().eventFromMessage(String(t), n, r) : this._getBackend().eventFromException(t, r);
        return this._process(a.then(function(l) {
            return o._captureEvent(l, r, i)
        }).then(function(l) {
            s = l
        })),
        s
    }
    ,
    e.prototype.captureEvent = function(t, n, r) {
        var i = n && n.event_id;
        return this._process(this._captureEvent(t, n, r).then(function(o) {
            i = o
        })),
        i
    }
    ,
    e.prototype.captureSession = function(t) {
        t.release ? (this._sendSession(t),
        t.update({
            init: !1
        })) : Dt.warn("Discarded session because of missing release")
    }
    ,
    e.prototype.getDsn = function() {
        return this._dsn
    }
    ,
    e.prototype.getOptions = function() {
        return this._options
    }
    ,
    e.prototype.flush = function(t) {
        var n = this;
        return this._isClientProcessing(t).then(function(r) {
            return n._getBackend().getTransport().close(t).then(function(i) {
                return r && i
            })
        })
    }
    ,
    e.prototype.close = function(t) {
        var n = this;
        return this.flush(t).then(function(r) {
            return n.getOptions().enabled = !1,
            r
        })
    }
    ,
    e.prototype.setupIntegrations = function() {
        this._isEnabled() && (this._integrations = Q0e(this._options))
    }
    ,
    e.prototype.getIntegration = function(t) {
        try {
            return this._integrations[t.id] || null
        } catch {
            return Dt.warn("Cannot retrieve integration " + t.id + " from the current Client"),
            null
        }
    }
    ,
    e.prototype._updateSessionFromEvent = function(t, n) {
        var r, i, o = !1, s = !1, a, l = n.exception && n.exception.values;
        if (l) {
            s = !0;
            try {
                for (var c = K0e(l), u = c.next(); !u.done; u = c.next()) {
                    var f = u.value
                      , h = f.mechanism;
                    if (h && h.handled === !1) {
                        o = !0;
                        break
                    }
                }
            } catch (E) {
                r = {
                    error: E
                }
            } finally {
                try {
                    u && !u.done && (i = c.return) && i.call(c)
                } finally {
                    if (r)
                        throw r.error
                }
            }
        }
        var m = n.user;
        if (!t.userAgent) {
            var v = n.request ? n.request.headers : {};
            for (var y in v)
                if (y.toLowerCase() === "user-agent") {
                    a = v[y];
                    break
                }
        }
        t.update(Or(Or({}, o && {
            status: Fl.Crashed
        }), {
            user: m,
            userAgent: a,
            errors: t.errors + Number(s || o)
        })),
        this.captureSession(t)
    }
    ,
    e.prototype._sendSession = function(t) {
        this._getBackend().sendSession(t)
    }
    ,
    e.prototype._isClientProcessing = function(t) {
        var n = this;
        return new ci(function(r) {
            var i = 0
              , o = 1
              , s = setInterval(function() {
                n._processing == 0 ? (clearInterval(s),
                r(!0)) : (i += o,
                t && i >= t && (clearInterval(s),
                r(!1)))
            }, o)
        }
        )
    }
    ,
    e.prototype._getBackend = function() {
        return this._backend
    }
    ,
    e.prototype._isEnabled = function() {
        return this.getOptions().enabled !== !1 && this._dsn !== void 0
    }
    ,
    e.prototype._prepareEvent = function(t, n, r) {
        var i = this
          , o = this.getOptions().normalizeDepth
          , s = o === void 0 ? 3 : o
          , a = Or(Or({}, t), {
            event_id: t.event_id || (r && r.event_id ? r.event_id : Jd()),
            timestamp: t.timestamp || _5()
        });
        this._applyClientOptions(a),
        this._applyIntegrationsMetadata(a);
        var l = n;
        r && r.captureContext && (l = sv.clone(l).update(r.captureContext));
        var c = ci.resolve(a);
        return l && (c = l.applyToEvent(a, r)),
        c.then(function(u) {
            return typeof s == "number" && s > 0 ? i._normalizeEvent(u, s) : u
        })
    }
    ,
    e.prototype._normalizeEvent = function(t, n) {
        if (!t)
            return null;
        var r = Or(Or(Or(Or(Or({}, t), t.breadcrumbs && {
            breadcrumbs: t.breadcrumbs.map(function(i) {
                return Or(Or({}, i), i.data && {
                    data: tg(i.data, n)
                })
            })
        }), t.user && {
            user: tg(t.user, n)
        }), t.contexts && {
            contexts: tg(t.contexts, n)
        }), t.extra && {
            extra: tg(t.extra, n)
        });
        return t.contexts && t.contexts.trace && (r.contexts.trace = t.contexts.trace),
        r
    }
    ,
    e.prototype._applyClientOptions = function(t) {
        var n = this.getOptions()
          , r = n.environment
          , i = n.release
          , o = n.dist
          , s = n.maxValueLength
          , a = s === void 0 ? 250 : s;
        "environment"in t || (t.environment = "environment"in n ? r : "production"),
        t.release === void 0 && i !== void 0 && (t.release = i),
        t.dist === void 0 && o !== void 0 && (t.dist = o),
        t.message && (t.message = Lg(t.message, a));
        var l = t.exception && t.exception.values && t.exception.values[0];
        l && l.value && (l.value = Lg(l.value, a));
        var c = t.request;
        c && c.url && (c.url = Lg(c.url, a))
    }
    ,
    e.prototype._applyIntegrationsMetadata = function(t) {
        var n = t.sdk
          , r = Object.keys(this._integrations);
        n && r.length > 0 && (n.integrations = r)
    }
    ,
    e.prototype._sendEvent = function(t) {
        this._getBackend().sendEvent(t)
    }
    ,
    e.prototype._captureEvent = function(t, n, r) {
        return this._processEvent(t, n, r).then(function(i) {
            return i.event_id
        }, function(i) {
            Dt.error(i)
        })
    }
    ,
    e.prototype._processEvent = function(t, n, r) {
        var i = this
          , o = this.getOptions()
          , s = o.beforeSend
          , a = o.sampleRate;
        if (!this._isEnabled())
            return ci.reject(new rr("SDK not enabled, will not send event."));
        var l = t.type === "transaction";
        return !l && typeof a == "number" && Math.random() > a ? ci.reject(new rr("Discarding event because it's not included in the random sample (sampling rate = " + a + ")")) : this._prepareEvent(t, r, n).then(function(c) {
            if (c === null)
                throw new rr("An event processor returned null, will not send event.");
            var u = n && n.data && n.data.__sentry__ === !0;
            if (u || l || !s)
                return c;
            var f = s(c, n);
            if (typeof f > "u")
                throw new rr("`beforeSend` method has to return `null` or a valid event.");
            return w5(f) ? f.then(function(h) {
                return h
            }, function(h) {
                throw new rr("beforeSend rejected with " + h)
            }) : f
        }).then(function(c) {
            if (c === null)
                throw new rr("`beforeSend` returned `null`, will not send event.");
            var u = r && r.getSession && r.getSession();
            return !l && u && i._updateSessionFromEvent(u, c),
            i._sendEvent(c),
            c
        }).then(null, function(c) {
            throw c instanceof rr ? c : (i.captureException(c, {
                data: {
                    __sentry__: !0
                },
                originalException: c
            }),
            new rr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ` + c))
        })
    }
    ,
    e.prototype._process = function(t) {
        var n = this;
        this._processing += 1,
        t.then(function(r) {
            return n._processing -= 1,
            r
        }, function(r) {
            return n._processing -= 1,
            r
        })
    }
    ,
    e
}()
  , eme = function() {
    function e() {}
    return e.prototype.sendEvent = function(t) {
        return ci.resolve({
            reason: "NoopTransport: Event has been skipped because no Dsn is configured.",
            status: _u.Skipped
        })
    }
    ,
    e.prototype.close = function(t) {
        return ci.resolve(!0)
    }
    ,
    e
}()
  , tme = function() {
    function e(t) {
        this._options = t,
        this._options.dsn || Dt.warn("No DSN provided, backend will not do anything."),
        this._transport = this._setupTransport()
    }
    return e.prototype.eventFromException = function(t, n) {
        throw new rr("Backend has to implement `eventFromException` method")
    }
    ,
    e.prototype.eventFromMessage = function(t, n, r) {
        throw new rr("Backend has to implement `eventFromMessage` method")
    }
    ,
    e.prototype.sendEvent = function(t) {
        this._transport.sendEvent(t).then(null, function(n) {
            Dt.error("Error while sending event: " + n)
        })
    }
    ,
    e.prototype.sendSession = function(t) {
        if (!this._transport.sendSession) {
            Dt.warn("Dropping session because custom transport doesn't implement sendSession");
            return
        }
        this._transport.sendSession(t).then(null, function(n) {
            Dt.error("Error while sending session: " + n)
        })
    }
    ,
    e.prototype.getTransport = function() {
        return this._transport
    }
    ,
    e.prototype._setupTransport = function() {
        return new eme
    }
    ,
    e
}();
function Xz(e) {
    if (!(!e.metadata || !e.metadata.sdk)) {
        var t = e.metadata.sdk
          , n = t.name
          , r = t.version;
        return {
            name: n,
            version: r
        }
    }
}
function nme(e, t) {
    return t && (e.sdk = e.sdk || {
        name: t.name,
        version: t.version
    },
    e.sdk.name = e.sdk.name || t.name,
    e.sdk.version = e.sdk.version || t.version,
    e.sdk.integrations = Bl(e.sdk.integrations || [], t.integrations || []),
    e.sdk.packages = Bl(e.sdk.packages || [], t.packages || [])),
    e
}
function Zz(e, t) {
    var n = Xz(t)
      , r = JSON.stringify(Or({
        sent_at: new Date().toISOString()
    }, n && {
        sdk: n
    }))
      , i = JSON.stringify({
        type: "session"
    });
    return {
        body: r + `
` + i + `
` + JSON.stringify(e),
        type: "session",
        url: t.getEnvelopeEndpointWithUrlEncodedAuth()
    }
}
function qz(e, t) {
    var n = Xz(t)
      , r = e.type || "event"
      , i = r === "transaction"
      , o = e.debug_meta || {}
      , s = o.transactionSampling
      , a = j0e(o, ["transactionSampling"])
      , l = s || {}
      , c = l.method
      , u = l.rate;
    Object.keys(a).length === 0 ? delete e.debug_meta : e.debug_meta = a;
    var f = {
        body: JSON.stringify(n ? nme(e, t.metadata.sdk) : e),
        type: r,
        url: i ? t.getEnvelopeEndpointWithUrlEncodedAuth() : t.getStoreEndpointWithUrlEncodedAuth()
    };
    if (i) {
        var h = JSON.stringify(Or({
            event_id: e.event_id,
            sent_at: new Date().toISOString()
        }, n && {
            sdk: n
        }))
          , m = JSON.stringify({
            type: e.type,
            sample_rates: [{
                id: c,
                rate: u
            }]
        })
          , v = h + `
` + m + `
` + f.body;
        f.body = v
    }
    return f
}
function rme(e, t) {
    t.debug === !0 && Dt.enable();
    var n = br()
      , r = new e(t);
    n.bindClient(r)
}
var t7 = "6.2.5", n7, ime = function() {
    function e() {
        this.name = e.id
    }
    return e.prototype.setupOnce = function() {
        n7 = Function.prototype.toString,
        Function.prototype.toString = function() {
            for (var t = [], n = 0; n < arguments.length; n++)
                t[n] = arguments[n];
            var r = this.__sentry_original__ || this;
            return n7.apply(r, t)
        }
    }
    ,
    e.id = "FunctionToString",
    e
}(), ome = [/^Script error\.?$/, /^Javascript error: Script error\.? on line 0$/], sme = function() {
    function e(t) {
        t === void 0 && (t = {}),
        this._options = t,
        this.name = e.id
    }
    return e.prototype.setupOnce = function() {
        Ty(function(t) {
            var n = br();
            if (!n)
                return t;
            var r = n.getIntegration(e);
            if (r) {
                var i = n.getClient()
                  , o = i ? i.getOptions() : {}
                  , s = r._mergeOptions(o);
                if (r._shouldDropEvent(t, s))
                    return null
            }
            return t
        })
    }
    ,
    e.prototype._shouldDropEvent = function(t, n) {
        return this._isSentryError(t, n) ? (Dt.warn(`Event dropped due to being internal Sentry Error.
Event: ` + Ic(t)),
        !0) : this._isIgnoredError(t, n) ? (Dt.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: " + Ic(t)),
        !0) : this._isDeniedUrl(t, n) ? (Dt.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: " + Ic(t) + `.
Url: ` + this._getEventFilterUrl(t)),
        !0) : this._isAllowedUrl(t, n) ? !1 : (Dt.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: " + Ic(t) + `.
Url: ` + this._getEventFilterUrl(t)),
        !0)
    }
    ,
    e.prototype._isSentryError = function(t, n) {
        if (!n.ignoreInternal)
            return !1;
        try {
            return t && t.exception && t.exception.values && t.exception.values[0] && t.exception.values[0].type === "SentryError" || !1
        } catch {
            return !1
        }
    }
    ,
    e.prototype._isIgnoredError = function(t, n) {
        return !n.ignoreErrors || !n.ignoreErrors.length ? !1 : this._getPossibleEventMessages(t).some(function(r) {
            return n.ignoreErrors.some(function(i) {
                return Rb(r, i)
            })
        })
    }
    ,
    e.prototype._isDeniedUrl = function(t, n) {
        if (!n.denyUrls || !n.denyUrls.length)
            return !1;
        var r = this._getEventFilterUrl(t);
        return r ? n.denyUrls.some(function(i) {
            return Rb(r, i)
        }) : !1
    }
    ,
    e.prototype._isAllowedUrl = function(t, n) {
        if (!n.allowUrls || !n.allowUrls.length)
            return !0;
        var r = this._getEventFilterUrl(t);
        return r ? n.allowUrls.some(function(i) {
            return Rb(r, i)
        }) : !0
    }
    ,
    e.prototype._mergeOptions = function(t) {
        return t === void 0 && (t = {}),
        {
            allowUrls: Bl(this._options.whitelistUrls || [], this._options.allowUrls || [], t.whitelistUrls || [], t.allowUrls || []),
            denyUrls: Bl(this._options.blacklistUrls || [], this._options.denyUrls || [], t.blacklistUrls || [], t.denyUrls || []),
            ignoreErrors: Bl(this._options.ignoreErrors || [], t.ignoreErrors || [], ome),
            ignoreInternal: typeof this._options.ignoreInternal < "u" ? this._options.ignoreInternal : !0
        }
    }
    ,
    e.prototype._getPossibleEventMessages = function(t) {
        if (t.message)
            return [t.message];
        if (t.exception)
            try {
                var n = t.exception.values && t.exception.values[0] || {}
                  , r = n.type
                  , i = r === void 0 ? "" : r
                  , o = n.value
                  , s = o === void 0 ? "" : o;
                return ["" + s, i + ": " + s]
            } catch {
                return Dt.error("Cannot extract message for event " + Ic(t)),
                []
            }
        return []
    }
    ,
    e.prototype._getEventFilterUrl = function(t) {
        try {
            if (t.stacktrace) {
                var n = t.stacktrace.frames;
                return n && n[n.length - 1].filename || null
            }
            if (t.exception) {
                var r = t.exception.values && t.exception.values[0].stacktrace && t.exception.values[0].stacktrace.frames;
                return r && r[r.length - 1].filename || null
            }
            return null
        } catch {
            return Dt.error("Cannot extract url for event " + Ic(t)),
            null
        }
    }
    ,
    e.id = "InboundFilters",
    e
}(), ng = "?", ame = /^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i, lme = /^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i, cme = /^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i, ume = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i, dme = /\((\S*)(?::(\d+))(?::(\d+))\)/, fme = /Minified React error #\d+;/i;
function Tp(e) {
    var t = null
      , n = 0;
    e && (typeof e.framesToPop == "number" ? n = e.framesToPop : fme.test(e.message) && (n = 1));
    try {
        if (t = gme(e),
        t)
            return r7(t, n)
    } catch {}
    try {
        if (t = hme(e),
        t)
            return r7(t, n)
    } catch {}
    return {
        message: C5(e),
        name: e && e.name,
        stack: [],
        failed: !0
    }
}
function hme(e) {
    if (!e || !e.stack)
        return null;
    for (var t = [], n = e.stack.split(`
`), r, i, o, s, a = 0; a < n.length; ++a) {
        if (o = ame.exec(n[a])) {
            var l = o[2] && o[2].indexOf("native") === 0;
            r = o[2] && o[2].indexOf("eval") === 0,
            r && (i = dme.exec(o[2])) && (o[2] = i[1],
            o[3] = i[2],
            o[4] = i[3]),
            s = {
                url: o[2] && o[2].indexOf("address at ") === 0 ? o[2].substr(11) : o[2],
                func: o[1] || ng,
                args: l ? [o[2]] : [],
                line: o[3] ? +o[3] : null,
                column: o[4] ? +o[4] : null
            }
        } else if (o = cme.exec(n[a]))
            s = {
                url: o[2],
                func: o[1] || ng,
                args: [],
                line: +o[3],
                column: o[4] ? +o[4] : null
            };
        else if (o = lme.exec(n[a]))
            r = o[3] && o[3].indexOf(" > eval") > -1,
            r && (i = ume.exec(o[3])) ? (o[1] = o[1] || "eval",
            o[3] = i[1],
            o[4] = i[2],
            o[5] = "") : a === 0 && !o[5] && e.columnNumber !== void 0 && (t[0].column = e.columnNumber + 1),
            s = {
                url: o[3],
                func: o[1] || ng,
                args: o[2] ? o[2].split(",") : [],
                line: o[4] ? +o[4] : null,
                column: o[5] ? +o[5] : null
            };
        else
            continue;
        !s.func && s.line && (s.func = ng),
        t.push(s)
    }
    return t.length ? {
        message: C5(e),
        name: e.name,
        stack: t
    } : null
}
function gme(e) {
    if (!e || !e.stacktrace)
        return null;
    for (var t = e.stacktrace, n = / line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i, r = / line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i, i = t.split(`
`), o = [], s, a = 0; a < i.length; a += 2) {
        var l = null;
        (s = n.exec(i[a])) ? l = {
            url: s[2],
            func: s[3],
            args: [],
            line: +s[1],
            column: null
        } : (s = r.exec(i[a])) && (l = {
            url: s[6],
            func: s[3] || s[4],
            args: s[5] ? s[5].split(",") : [],
            line: +s[1],
            column: +s[2]
        }),
        l && (!l.func && l.line && (l.func = ng),
        o.push(l))
    }
    return o.length ? {
        message: C5(e),
        name: e.name,
        stack: o
    } : null
}
function r7(e, t) {
    try {
        return Zt(Zt({}, e), {
            stack: e.stack.slice(t)
        })
    } catch {
        return e
    }
}
function C5(e) {
    var t = e && e.message;
    return t ? t.error && typeof t.error.message == "string" ? t.error.message : t : "No error message"
}
var pme = 50;
function Qz(e) {
    var t = k5(e.stack)
      , n = {
        type: e.name,
        value: e.message
    };
    return t && t.length && (n.stacktrace = {
        frames: t
    }),
    n.type === void 0 && n.value === "" && (n.value = "Unrecoverable error caught"),
    n
}
function mme(e, t, n) {
    var r = {
        exception: {
            values: [{
                type: y5(e) ? e.constructor.name : n ? "UnhandledRejection" : "Error",
                value: "Non-Error " + (n ? "promise rejection" : "exception") + " captured with keys: " + x0e(e)
            }]
        },
        extra: {
            __serialized__: $z(e)
        }
    };
    if (t) {
        var i = Tp(t)
          , o = k5(i.stack);
        r.stacktrace = {
            frames: o
        }
    }
    return r
}
function i7(e) {
    var t = Qz(e);
    return {
        exception: {
            values: [t]
        }
    }
}
function k5(e) {
    if (!e || !e.length)
        return [];
    var t = e
      , n = t[0].func || ""
      , r = t[t.length - 1].func || "";
    return (n.indexOf("captureMessage") !== -1 || n.indexOf("captureException") !== -1) && (t = t.slice(1)),
    r.indexOf("sentryWrapped") !== -1 && (t = t.slice(0, -1)),
    t.slice(0, pme).map(function(i) {
        return {
            colno: i.column === null ? void 0 : i.column,
            filename: i.url || t[0].url,
            function: i.func || "?",
            in_app: !0,
            lineno: i.line === null ? void 0 : i.line
        }
    }).reverse()
}
function vme(e, t, n) {
    var r = n && n.syntheticException || void 0
      , i = dx(t, r, {
        attachStacktrace: e.attachStacktrace
    });
    return Cf(i, {
        handled: !0,
        type: "generic"
    }),
    i.level = Xo.Error,
    n && n.event_id && (i.event_id = n.event_id),
    ci.resolve(i)
}
function yme(e, t, n, r) {
    n === void 0 && (n = Xo.Info);
    var i = r && r.syntheticException || void 0
      , o = fx(t, i, {
        attachStacktrace: e.attachStacktrace
    });
    return o.level = n,
    r && r.event_id && (o.event_id = r.event_id),
    ci.resolve(o)
}
function dx(e, t, n) {
    n === void 0 && (n = {});
    var r;
    if (Nz(e) && e.error) {
        var i = e;
        return e = i.error,
        r = i7(Tp(e)),
        r
    }
    if (YM(e) || r0e(e)) {
        var o = e
          , s = o.name || (YM(o) ? "DOMError" : "DOMException")
          , a = o.message ? s + ": " + o.message : s;
        return r = fx(a, t, n),
        lx(r, a),
        "code"in o && (r.tags = Zt(Zt({}, r.tags), {
            "DOMException.code": "" + o.code
        })),
        r
    }
    if (Oz(e))
        return r = i7(Tp(e)),
        r;
    if (ky(e) || y5(e)) {
        var l = e;
        return r = mme(l, t, n.rejection),
        Cf(r, {
            synthetic: !0
        }),
        r
    }
    return r = fx(e, t, n),
    lx(r, "" + e, void 0),
    Cf(r, {
        synthetic: !0
    }),
    r
}
function fx(e, t, n) {
    n === void 0 && (n = {});
    var r = {
        message: e
    };
    if (n.attachStacktrace && t) {
        var i = Tp(t)
          , o = k5(i.stack);
        r.stacktrace = {
            frames: o
        }
    }
    return r
}
var wme = {
    event: "error",
    transaction: "transaction",
    session: "session"
}
  , Jz = function() {
    function e(t) {
        this.options = t,
        this._buffer = new $0e(30),
        this._rateLimits = {},
        this._api = new Kz(t.dsn,t._metadata),
        this.url = this._api.getStoreEndpointWithUrlEncodedAuth()
    }
    return e.prototype.sendEvent = function(t) {
        throw new rr("Transport Class has to implement `sendEvent` method")
    }
    ,
    e.prototype.close = function(t) {
        return this._buffer.drain(t)
    }
    ,
    e.prototype._handleResponse = function(t) {
        var n = t.requestType
          , r = t.response
          , i = t.headers
          , o = t.resolve
          , s = t.reject
          , a = _u.fromHttpCode(r.status)
          , l = this._handleRateLimit(i);
        if (l && Dt.warn("Too many requests, backing off until: " + this._disabledUntil(n)),
        a === _u.Success) {
            o({
                status: a
            });
            return
        }
        s(r)
    }
    ,
    e.prototype._disabledUntil = function(t) {
        var n = wme[t];
        return this._rateLimits[n] || this._rateLimits.all
    }
    ,
    e.prototype._isRateLimited = function(t) {
        return this._disabledUntil(t) > new Date(Date.now())
    }
    ,
    e.prototype._handleRateLimit = function(t) {
        var n, r, i, o, s = Date.now(), a = t["x-sentry-rate-limits"], l = t["retry-after"];
        if (a) {
            try {
                for (var c = VM(a.trim().split(",")), u = c.next(); !u.done; u = c.next()) {
                    var f = u.value
                      , h = f.split(":", 2)
                      , m = parseInt(h[0], 10)
                      , v = (isNaN(m) ? 60 : m) * 1e3;
                    try {
                        for (var y = (i = void 0,
                        VM(h[1].split(";"))), E = y.next(); !E.done; E = y.next()) {
                            var b = E.value;
                            this._rateLimits[b || "all"] = new Date(s + v)
                        }
                    } catch (_) {
                        i = {
                            error: _
                        }
                    } finally {
                        try {
                            E && !E.done && (o = y.return) && o.call(y)
                        } finally {
                            if (i)
                                throw i.error
                        }
                    }
                }
            } catch (_) {
                n = {
                    error: _
                }
            } finally {
                try {
                    u && !u.done && (r = c.return) && r.call(c)
                } finally {
                    if (n)
                        throw n.error
                }
            }
            return !0
        } else if (l)
            return this._rateLimits.all = new Date(s + m0e(s, l)),
            !0;
        return !1
    }
    ,
    e
}();
function Eme() {
    var e, t, n = Pn();
    if (cx(n.fetch))
        return n.fetch.bind(n);
    var r = n.document
      , i = n.fetch;
    if (typeof ((e = r) === null || e === void 0 ? void 0 : e.createElement) == "function")
        try {
            var o = r.createElement("iframe");
            o.hidden = !0,
            r.head.appendChild(o),
            !((t = o.contentWindow) === null || t === void 0) && t.fetch && (i = o.contentWindow.fetch),
            r.head.removeChild(o)
        } catch (s) {
            Dt.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ", s)
        }
    return i.bind(n)
}
var bme = function(e) {
    Cy(t, e);
    function t(n, r) {
        r === void 0 && (r = Eme());
        var i = e.call(this, n) || this;
        return i._fetch = r,
        i
    }
    return t.prototype.sendEvent = function(n) {
        return this._sendRequest(qz(n, this._api), n)
    }
    ,
    t.prototype.sendSession = function(n) {
        return this._sendRequest(Zz(n, this._api), n)
    }
    ,
    t.prototype._sendRequest = function(n, r) {
        var i = this;
        if (this._isRateLimited(n.type))
            return Promise.reject({
                event: r,
                type: n.type,
                reason: "Transport locked till " + this._disabledUntil(n.type) + " due to too many requests.",
                status: 429
            });
        var o = {
            body: n.body,
            method: "POST",
            referrerPolicy: I0e() ? "origin" : ""
        };
        return this.options.fetchParameters !== void 0 && Object.assign(o, this.options.fetchParameters),
        this.options.headers !== void 0 && (o.headers = this.options.headers),
        this._buffer.add(new ci(function(s, a) {
            i._fetch(n.url, o).then(function(l) {
                var c = {
                    "x-sentry-rate-limits": l.headers.get("X-Sentry-Rate-Limits"),
                    "retry-after": l.headers.get("Retry-After")
                };
                i._handleResponse({
                    requestType: n.type,
                    response: l,
                    headers: c,
                    resolve: s,
                    reject: a
                })
            }).catch(a)
        }
        ))
    }
    ,
    t
}(Jz)
  , _me = function(e) {
    Cy(t, e);
    function t() {
        return e !== null && e.apply(this, arguments) || this
    }
    return t.prototype.sendEvent = function(n) {
        return this._sendRequest(qz(n, this._api), n)
    }
    ,
    t.prototype.sendSession = function(n) {
        return this._sendRequest(Zz(n, this._api), n)
    }
    ,
    t.prototype._sendRequest = function(n, r) {
        var i = this;
        return this._isRateLimited(n.type) ? Promise.reject({
            event: r,
            type: n.type,
            reason: "Transport locked till " + this._disabledUntil(n.type) + " due to too many requests.",
            status: 429
        }) : this._buffer.add(new ci(function(o, s) {
            var a = new XMLHttpRequest;
            a.onreadystatechange = function() {
                if (a.readyState === 4) {
                    var c = {
                        "x-sentry-rate-limits": a.getResponseHeader("X-Sentry-Rate-Limits"),
                        "retry-after": a.getResponseHeader("Retry-After")
                    };
                    i._handleResponse({
                        requestType: n.type,
                        response: a,
                        headers: c,
                        resolve: o,
                        reject: s
                    })
                }
            }
            ,
            a.open("POST", n.url);
            for (var l in i.options.headers)
                i.options.headers.hasOwnProperty(l) && a.setRequestHeader(l, i.options.headers[l]);
            a.send(n.body)
        }
        ))
    }
    ,
    t
}(Jz)
  , xme = function(e) {
    Cy(t, e);
    function t() {
        return e !== null && e.apply(this, arguments) || this
    }
    return t.prototype.eventFromException = function(n, r) {
        return vme(this._options, n, r)
    }
    ,
    t.prototype.eventFromMessage = function(n, r, i) {
        return r === void 0 && (r = Xo.Info),
        yme(this._options, n, r, i)
    }
    ,
    t.prototype._setupTransport = function() {
        if (!this._options.dsn)
            return e.prototype._setupTransport.call(this);
        var n = Zt(Zt({}, this._options.transportOptions), {
            dsn: this._options.dsn,
            _metadata: this._options._metadata
        });
        return this._options.transport ? new this._options.transport(n) : b5() ? new bme(n) : new _me(n)
    }
    ,
    t
}(tme)
  , hx = 0;
function o7() {
    return hx > 0
}
function Sme() {
    hx += 1,
    setTimeout(function() {
        hx -= 1
    })
}
function pd(e, t, n) {
    if (t === void 0 && (t = {}),
    typeof e != "function")
        return e;
    try {
        if (e.__sentry__)
            return e;
        if (e.__sentry_wrapped__)
            return e.__sentry_wrapped__
    } catch {
        return e
    }
    var r = function() {
        var s = Array.prototype.slice.call(arguments);
        try {
            var a = s.map(function(l) {
                return pd(l, t)
            });
            return e.handleEvent ? e.handleEvent.apply(this, a) : e.apply(this, a)
        } catch (l) {
            throw Sme(),
            jz(function(c) {
                c.addEventProcessor(function(u) {
                    var f = Zt({}, u);
                    return t.mechanism && (lx(f, void 0, void 0),
                    Cf(f, t.mechanism)),
                    f.extra = Zt(Zt({}, f.extra), {
                        arguments: s
                    }),
                    f
                }),
                Yz(l)
            }),
            l
        }
    };
    try {
        for (var i in e)
            Object.prototype.hasOwnProperty.call(e, i) && (r[i] = e[i])
    } catch {}
    e.prototype = e.prototype || {},
    r.prototype = e.prototype,
    Object.defineProperty(e, "__sentry_wrapped__", {
        enumerable: !1,
        value: r
    }),
    Object.defineProperties(r, {
        __sentry__: {
            enumerable: !1,
            value: !0
        },
        __sentry_original__: {
            enumerable: !1,
            value: e
        }
    });
    try {
        var o = Object.getOwnPropertyDescriptor(r, "name");
        o.configurable && Object.defineProperty(r, "name", {
            get: function() {
                return e.name
            }
        })
    } catch {}
    return r
}
function Ime(e) {
    if (e === void 0 && (e = {}),
    !e.eventId) {
        Dt.error("Missing eventId option in showReportDialog call");
        return
    }
    if (!e.dsn) {
        Dt.error("Missing dsn option in showReportDialog call");
        return
    }
    var t = document.createElement("script");
    t.async = !0,
    t.src = new Kz(e.dsn).getReportDialogEndpoint(e),
    e.onLoad && (t.onload = e.onLoad),
    (document.head || document.body).appendChild(t)
}
var Cme = function() {
    function e(t) {
        this.name = e.id,
        this._onErrorHandlerInstalled = !1,
        this._onUnhandledRejectionHandlerInstalled = !1,
        this._options = Zt({
            onerror: !0,
            onunhandledrejection: !0
        }, t)
    }
    return e.prototype.setupOnce = function() {
        Error.stackTraceLimit = 50,
        this._options.onerror && (Dt.log("Global Handler attached: onerror"),
        this._installGlobalOnErrorHandler()),
        this._options.onunhandledrejection && (Dt.log("Global Handler attached: onunhandledrejection"),
        this._installGlobalOnUnhandledRejectionHandler())
    }
    ,
    e.prototype._installGlobalOnErrorHandler = function() {
        var t = this;
        this._onErrorHandlerInstalled || (dl({
            callback: function(n) {
                var r = n.error
                  , i = br()
                  , o = i.getIntegration(e)
                  , s = r && r.__sentry_own_request__ === !0;
                if (!(!o || o7() || s)) {
                    var a = i.getClient()
                      , l = kp(r) ? t._eventFromIncompleteOnError(n.msg, n.url, n.line, n.column) : t._enhanceEventWithInitialFrame(dx(r, void 0, {
                        attachStacktrace: a && a.getOptions().attachStacktrace,
                        rejection: !1
                    }), n.url, n.line, n.column);
                    Cf(l, {
                        handled: !1,
                        type: "onerror"
                    }),
                    i.captureEvent(l, {
                        originalException: r
                    })
                }
            },
            type: "error"
        }),
        this._onErrorHandlerInstalled = !0)
    }
    ,
    e.prototype._installGlobalOnUnhandledRejectionHandler = function() {
        var t = this;
        this._onUnhandledRejectionHandlerInstalled || (dl({
            callback: function(n) {
                var r = n;
                try {
                    "reason"in n ? r = n.reason : "detail"in n && "reason"in n.detail && (r = n.detail.reason)
                } catch {}
                var i = br()
                  , o = i.getIntegration(e)
                  , s = r && r.__sentry_own_request__ === !0;
                if (!o || o7() || s)
                    return !0;
                var a = i.getClient()
                  , l = kp(r) ? t._eventFromRejectionWithPrimitive(r) : dx(r, void 0, {
                    attachStacktrace: a && a.getOptions().attachStacktrace,
                    rejection: !0
                });
                l.level = Xo.Error,
                Cf(l, {
                    handled: !1,
                    type: "onunhandledrejection"
                }),
                i.captureEvent(l, {
                    originalException: r
                })
            },
            type: "unhandledrejection"
        }),
        this._onUnhandledRejectionHandlerInstalled = !0)
    }
    ,
    e.prototype._eventFromIncompleteOnError = function(t, n, r, i) {
        var o = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i, s = Nz(t) ? t.message : t, a;
        if (If(s)) {
            var l = s.match(o);
            l && (a = l[1],
            s = l[2])
        }
        var c = {
            exception: {
                values: [{
                    type: a || "Error",
                    value: s
                }]
            }
        };
        return this._enhanceEventWithInitialFrame(c, n, r, i)
    }
    ,
    e.prototype._eventFromRejectionWithPrimitive = function(t) {
        return {
            exception: {
                values: [{
                    type: "UnhandledRejection",
                    value: "Non-Error promise rejection captured with value: " + String(t)
                }]
            }
        }
    }
    ,
    e.prototype._enhanceEventWithInitialFrame = function(t, n, r, i) {
        t.exception = t.exception || {},
        t.exception.values = t.exception.values || [],
        t.exception.values[0] = t.exception.values[0] || {},
        t.exception.values[0].stacktrace = t.exception.values[0].stacktrace || {},
        t.exception.values[0].stacktrace.frames = t.exception.values[0].stacktrace.frames || [];
        var o = isNaN(parseInt(i, 10)) ? void 0 : i
          , s = isNaN(parseInt(r, 10)) ? void 0 : r
          , a = If(n) && n.length > 0 ? n : p0e();
        return t.exception.values[0].stacktrace.frames.length === 0 && t.exception.values[0].stacktrace.frames.push({
            colno: o,
            filename: a,
            function: "?",
            in_app: !0,
            lineno: s
        }),
        t
    }
    ,
    e.id = "GlobalHandlers",
    e
}()
  , kme = ["EventTarget", "Window", "Node", "ApplicationCache", "AudioTrackList", "ChannelMergerNode", "CryptoOperation", "EventSource", "FileReader", "HTMLUnknownElement", "IDBDatabase", "IDBRequest", "IDBTransaction", "KeyOperation", "MediaController", "MessagePort", "ModalWindow", "Notification", "SVGElementInstance", "Screen", "TextTrack", "TextTrackCue", "TextTrackList", "WebSocket", "WebSocketWorker", "Worker", "XMLHttpRequest", "XMLHttpRequestEventTarget", "XMLHttpRequestUpload"]
  , Tme = function() {
    function e(t) {
        this.name = e.id,
        this._options = Zt({
            XMLHttpRequest: !0,
            eventTarget: !0,
            requestAnimationFrame: !0,
            setInterval: !0,
            setTimeout: !0
        }, t)
    }
    return e.prototype.setupOnce = function() {
        var t = Pn();
        if (this._options.setTimeout && or(t, "setTimeout", this._wrapTimeFunction.bind(this)),
        this._options.setInterval && or(t, "setInterval", this._wrapTimeFunction.bind(this)),
        this._options.requestAnimationFrame && or(t, "requestAnimationFrame", this._wrapRAF.bind(this)),
        this._options.XMLHttpRequest && "XMLHttpRequest"in t && or(XMLHttpRequest.prototype, "send", this._wrapXHR.bind(this)),
        this._options.eventTarget) {
            var n = Array.isArray(this._options.eventTarget) ? this._options.eventTarget : kme;
            n.forEach(this._wrapEventTarget.bind(this))
        }
    }
    ,
    e.prototype._wrapTimeFunction = function(t) {
        return function() {
            for (var n = [], r = 0; r < arguments.length; r++)
                n[r] = arguments[r];
            var i = n[0];
            return n[0] = pd(i, {
                mechanism: {
                    data: {
                        function: il(t)
                    },
                    handled: !0,
                    type: "instrument"
                }
            }),
            t.apply(this, n)
        }
    }
    ,
    e.prototype._wrapRAF = function(t) {
        return function(n) {
            return t.call(this, pd(n, {
                mechanism: {
                    data: {
                        function: "requestAnimationFrame",
                        handler: il(t)
                    },
                    handled: !0,
                    type: "instrument"
                }
            }))
        }
    }
    ,
    e.prototype._wrapEventTarget = function(t) {
        var n = Pn()
          , r = n[t] && n[t].prototype;
        !r || !r.hasOwnProperty || !r.hasOwnProperty("addEventListener") || (or(r, "addEventListener", function(i) {
            return function(o, s, a) {
                try {
                    typeof s.handleEvent == "function" && (s.handleEvent = pd(s.handleEvent.bind(s), {
                        mechanism: {
                            data: {
                                function: "handleEvent",
                                handler: il(s),
                                target: t
                            },
                            handled: !0,
                            type: "instrument"
                        }
                    }))
                } catch {}
                return i.call(this, o, pd(s, {
                    mechanism: {
                        data: {
                            function: "addEventListener",
                            handler: il(s),
                            target: t
                        },
                        handled: !0,
                        type: "instrument"
                    }
                }), a)
            }
        }),
        or(r, "removeEventListener", function(i) {
            return function(o, s, a) {
                var l, c = s;
                try {
                    var u = (l = c) === null || l === void 0 ? void 0 : l.__sentry_wrapped__;
                    u && i.call(this, o, u, a)
                } catch {}
                return i.call(this, o, c, a)
            }
        }))
    }
    ,
    e.prototype._wrapXHR = function(t) {
        return function() {
            for (var n = [], r = 0; r < arguments.length; r++)
                n[r] = arguments[r];
            var i = this
              , o = ["onload", "onerror", "onprogress", "onreadystatechange"];
            return o.forEach(function(s) {
                s in i && typeof i[s] == "function" && or(i, s, function(a) {
                    var l = {
                        mechanism: {
                            data: {
                                function: s,
                                handler: il(a)
                            },
                            handled: !0,
                            type: "instrument"
                        }
                    };
                    return a.__sentry_original__ && (l.mechanism.data.handler = il(a.__sentry_original__)),
                    pd(a, l)
                })
            }),
            t.apply(this, n)
        }
    }
    ,
    e.id = "TryCatch",
    e
}()
  , e$ = function() {
    function e(t) {
        this.name = e.id,
        this._options = Zt({
            console: !0,
            dom: !0,
            fetch: !0,
            history: !0,
            sentry: !0,
            xhr: !0
        }, t)
    }
    return e.prototype.addSentryBreadcrumb = function(t) {
        this._options.sentry && br().addBreadcrumb({
            category: "sentry." + (t.type === "transaction" ? "transaction" : "event"),
            event_id: t.event_id,
            level: t.level,
            message: Ic(t)
        }, {
            event: t
        })
    }
    ,
    e.prototype.setupOnce = function() {
        var t = this;
        this._options.console && dl({
            callback: function() {
                for (var n = [], r = 0; r < arguments.length; r++)
                    n[r] = arguments[r];
                t._consoleBreadcrumb.apply(t, Ac(n))
            },
            type: "console"
        }),
        this._options.dom && dl({
            callback: function() {
                for (var n = [], r = 0; r < arguments.length; r++)
                    n[r] = arguments[r];
                t._domBreadcrumb.apply(t, Ac(n))
            },
            type: "dom"
        }),
        this._options.xhr && dl({
            callback: function() {
                for (var n = [], r = 0; r < arguments.length; r++)
                    n[r] = arguments[r];
                t._xhrBreadcrumb.apply(t, Ac(n))
            },
            type: "xhr"
        }),
        this._options.fetch && dl({
            callback: function() {
                for (var n = [], r = 0; r < arguments.length; r++)
                    n[r] = arguments[r];
                t._fetchBreadcrumb.apply(t, Ac(n))
            },
            type: "fetch"
        }),
        this._options.history && dl({
            callback: function() {
                for (var n = [], r = 0; r < arguments.length; r++)
                    n[r] = arguments[r];
                t._historyBreadcrumb.apply(t, Ac(n))
            },
            type: "history"
        })
    }
    ,
    e.prototype._consoleBreadcrumb = function(t) {
        var n = {
            category: "console",
            data: {
                arguments: t.args,
                logger: "console"
            },
            level: Xo.fromString(t.level),
            message: iv(t.args, " ")
        };
        if (t.level === "assert")
            if (t.args[0] === !1)
                n.message = "Assertion failed: " + (iv(t.args.slice(1), " ") || "console.assert"),
                n.data.arguments = t.args.slice(1);
            else
                return;
        br().addBreadcrumb(n, {
            input: t.args,
            level: t.level
        })
    }
    ,
    e.prototype._domBreadcrumb = function(t) {
        var n;
        try {
            n = t.event.target ? rv(t.event.target) : rv(t.event)
        } catch {
            n = "<unknown>"
        }
        n.length !== 0 && br().addBreadcrumb({
            category: "ui." + t.name,
            message: n
        }, {
            event: t.event,
            name: t.name,
            global: t.global
        })
    }
    ,
    e.prototype._xhrBreadcrumb = function(t) {
        if (t.endTimestamp) {
            if (t.xhr.__sentry_own_request__)
                return;
            var n = t.xhr.__sentry_xhr__ || {}
              , r = n.method
              , i = n.url
              , o = n.status_code
              , s = n.body;
            br().addBreadcrumb({
                category: "xhr",
                data: {
                    method: r,
                    url: i,
                    status_code: o
                },
                type: "http"
            }, {
                xhr: t.xhr,
                input: s
            });
            return
        }
    }
    ,
    e.prototype._fetchBreadcrumb = function(t) {
        t.endTimestamp && (t.fetchData.url.match(/sentry_key/) && t.fetchData.method === "POST" || (t.error ? br().addBreadcrumb({
            category: "fetch",
            data: t.fetchData,
            level: Xo.Error,
            type: "http"
        }, {
            data: t.error,
            input: t.args
        }) : br().addBreadcrumb({
            category: "fetch",
            data: Zt(Zt({}, t.fetchData), {
                status_code: t.response.status
            }),
            type: "http"
        }, {
            input: t.args,
            response: t.response
        })))
    }
    ,
    e.prototype._historyBreadcrumb = function(t) {
        var n = Pn()
          , r = t.from
          , i = t.to
          , o = Db(n.location.href)
          , s = Db(r)
          , a = Db(i);
        s.path || (s = o),
        o.protocol === a.protocol && o.host === a.host && (i = a.relative),
        o.protocol === s.protocol && o.host === s.host && (r = s.relative),
        br().addBreadcrumb({
            category: "navigation",
            data: {
                from: r,
                to: i
            }
        })
    }
    ,
    e.id = "Breadcrumbs",
    e
}()
  , Ame = "cause"
  , Mme = 5
  , Lme = function() {
    function e(t) {
        t === void 0 && (t = {}),
        this.name = e.id,
        this._key = t.key || Ame,
        this._limit = t.limit || Mme
    }
    return e.prototype.setupOnce = function() {
        Ty(function(t, n) {
            var r = br().getIntegration(e);
            return r ? r._handler(t, n) : t
        })
    }
    ,
    e.prototype._handler = function(t, n) {
        if (!t.exception || !t.exception.values || !n || !Zl(n.originalException, Error))
            return t;
        var r = this._walkErrorTree(n.originalException, this._key);
        return t.exception.values = Ac(r, t.exception.values),
        t
    }
    ,
    e.prototype._walkErrorTree = function(t, n, r) {
        if (r === void 0 && (r = []),
        !Zl(t[n], Error) || r.length + 1 >= this._limit)
            return r;
        var i = Tp(t[n])
          , o = Qz(i);
        return this._walkErrorTree(t[n], n, Ac([o], r))
    }
    ,
    e.id = "LinkedErrors",
    e
}()
  , dd = Pn()
  , Pme = function() {
    function e() {
        this.name = e.id
    }
    return e.prototype.setupOnce = function() {
        Ty(function(t) {
            var n, r, i;
            if (br().getIntegration(e)) {
                if (!dd.navigator && !dd.location && !dd.document)
                    return t;
                var o = ((n = t.request) === null || n === void 0 ? void 0 : n.url) || ((r = dd.location) === null || r === void 0 ? void 0 : r.href)
                  , s = (dd.document || {}).referrer
                  , a = (dd.navigator || {}).userAgent
                  , l = Zt(Zt(Zt({}, (i = t.request) === null || i === void 0 ? void 0 : i.headers), s && {
                    Referer: s
                }), a && {
                    "User-Agent": a
                })
                  , c = Zt(Zt({}, o && {
                    url: o
                }), {
                    headers: l
                });
                return Zt(Zt({}, t), {
                    request: c
                })
            }
            return t
        })
    }
    ,
    e.id = "UserAgent",
    e
}()
  , Rme = function(e) {
    Cy(t, e);
    function t(n) {
        n === void 0 && (n = {});
        var r = this;
        return n._metadata = n._metadata || {},
        n._metadata.sdk = n._metadata.sdk || {
            name: "sentry.javascript.browser",
            packages: [{
                name: "npm:@sentry/browser",
                version: t7
            }],
            version: t7
        },
        r = e.call(this, xme, n) || this,
        r
    }
    return t.prototype.showReportDialog = function(n) {
        n === void 0 && (n = {});
        var r = Pn().document;
        if (r) {
            if (!this._isEnabled()) {
                Dt.error("Trying to call showReportDialog with Sentry Client disabled");
                return
            }
            Ime(Zt(Zt({}, n), {
                dsn: n.dsn || this.getDsn()
            }))
        }
    }
    ,
    t.prototype._prepareEvent = function(n, r, i) {
        return n.platform = n.platform || "javascript",
        e.prototype._prepareEvent.call(this, n, r, i)
    }
    ,
    t.prototype._sendEvent = function(n) {
        var r = this.getIntegration(e$);
        r && r.addSentryBreadcrumb(n),
        e.prototype._sendEvent.call(this, n)
    }
    ,
    t
}(J0e)
  , Dme = [new sme, new ime, new Tme, new e$, new Cme, new Lme, new Pme];
function Ome(e) {
    if (e === void 0 && (e = {}),
    e.defaultIntegrations === void 0 && (e.defaultIntegrations = Dme),
    e.release === void 0) {
        var t = Pn();
        t.SENTRY_RELEASE && t.SENTRY_RELEASE.id && (e.release = t.SENTRY_RELEASE.id)
    }
    e.autoSessionTracking === void 0 && (e.autoSessionTracking = !0),
    rme(Rme, e),
    e.autoSessionTracking && Nme()
}
function Nme() {
    var e = Pn()
      , t = e.document;
    if (typeof t > "u") {
        Dt.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");
        return
    }
    var n = br();
    "startSession"in n && (n.startSession(),
    n.captureSession(),
    dl({
        callback: function() {
            n.startSession(),
            n.captureSession()
        },
        type: "history"
    }))
}
class Fme extends ve.Component {
    constructor() {
        super(...arguments);
        D(this, "state", {
            hasError: !1,
            sentryEventId: "",
            localStorage: ""
        })
    }
    render() {
        return this.state.hasError ? this.errorSplash() : this.props.children
    }
    componentDidCatch(n, r) {
        const i = {};
        for (const [o,s] of Object.entries({
            ...localStorage
        }))
            try {
                i[o] = JSON.parse(s)
            } catch {
                i[o] = s
            }
        jz(o=>{
            o.setExtras(r);
            const s = Yz(n);
            this.setState(a=>({
                hasError: !0,
                sentryEventId: s,
                localStorage: JSON.stringify(i)
            }))
        }
        )
    }
    selectTextArea(n) {
        n.target !== document.activeElement && (n.preventDefault(),
        n.target.select())
    }
    async createGithubIssue() {
        let n = "";
        try {
            const r = (await _e(()=>import("./bug-issue-template-BID_ABWq.js"), __vite__mapDeps([]))).default;
            n = encodeURIComponent(r(this.state.sentryEventId))
        } catch (r) {
            console.error(r)
        }
        window.open(`https://github.com/excalidraw/excalidraw/issues/new?body=${n}`, "_blank", "noopener noreferrer")
    }
    errorSplash() {
        return g("div", {
            className: "ErrorSplash excalidraw",
            children: L("div", {
                className: "ErrorSplash-messageContainer",
                children: [g("div", {
                    className: "ErrorSplash-paragraph bigger align-center",
                    children: g(li, {
                        i18nKey: "errorSplash.headingMain",
                        button: n=>g("button", {
                            onClick: ()=>window.location.reload(),
                            children: n
                        })
                    })
                }), L("div", {
                    className: "ErrorSplash-paragraph align-center",
                    children: [g(li, {
                        i18nKey: "errorSplash.clearCanvasMessage",
                        button: n=>g("button", {
                            onClick: ()=>{
                                try {
                                    localStorage.clear(),
                                    window.location.reload()
                                } catch (r) {
                                    console.error(r)
                                }
                            }
                            ,
                            children: n
                        })
                    }), g("br", {}), L("div", {
                        className: "smaller",
                        children: [g("span", {
                            role: "img",
                            "aria-label": "warning",
                            children: "⚠️"
                        }), k("errorSplash.clearCanvasCaveat"), g("span", {
                            role: "img",
                            "aria-hidden": "true",
                            children: "⚠️"
                        })]
                    })]
                }), L("div", {
                    children: [g("div", {
                        className: "ErrorSplash-paragraph",
                        children: k("errorSplash.trackedToSentry", {
                            eventId: this.state.sentryEventId
                        })
                    }), g("div", {
                        className: "ErrorSplash-paragraph",
                        children: g(li, {
                            i18nKey: "errorSplash.openIssueMessage",
                            button: n=>g("button", {
                                onClick: ()=>this.createGithubIssue(),
                                children: n
                            })
                        })
                    }), g("div", {
                        className: "ErrorSplash-paragraph",
                        children: L("div", {
                            className: "ErrorSplash-details",
                            children: [g("label", {
                                children: k("errorSplash.sceneContent")
                            }), g("textarea", {
                                rows: 5,
                                onPointerDown: this.selectTextArea,
                                readOnly: !0,
                                value: this.state.localStorage
                            })]
                        })
                    })]
                })]
            })
        })
    }
}
const Bme = 300
  , zme = 5e3
  , $me = 300
  , Ume = 500
  , s7 = 2e4
  , Hme = 50
  , Wme = 33
  , Gme = 24 * 60 * 60 * 1e3
  , T5 = 3 * 1024 * 1024
  , Vme = 31536e3
  , Am = {
    SERVER_VOLATILE: "server-volatile-broadcast",
    SERVER: "server-broadcast",
    USER_FOLLOW_CHANGE: "user-follow",
    USER_FOLLOW_ROOM_CHANGE: "user-follow-room-change"
};
var Fr = (e=>(e.INVALID_RESPONSE = "INVALID_RESPONSE",
e.INIT = "SCENE_INIT",
e.UPDATE = "SCENE_UPDATE",
e.MOUSE_LOCATION = "MOUSE_LOCATION",
e.IDLE_STATUS = "IDLE_STATUS",
e.USER_VISIBLE_SCENE_BOUNDS = "USER_VISIBLE_SCENE_BOUNDS",
e))(Fr || {});
const t$ = {
    shareLinkFiles: "/files/shareLinks",
    collabFiles: "/files/rooms"
}
  , Yme = 10
  , Ln = {
    LOCAL_STORAGE_ELEMENTS: "excalidraw",
    LOCAL_STORAGE_APP_STATE: "excalidraw-state",
    LOCAL_STORAGE_COLLAB: "excalidraw-collab",
    LOCAL_STORAGE_THEME: "excalidraw-theme",
    VERSION_DATA_STATE: "version-dataState",
    VERSION_FILES: "version-files",
    IDB_LIBRARY: "excalidraw-library",
    __LEGACY_LOCAL_STORAGE_LIBRARY: "excalidraw-library"
}
  , jme = {
    AUTH_STATE_COOKIE: "excplus-auth"
}
  , xu = document.cookie.includes(jme.AUTH_STATE_COOKIE);
class n$ {
    constructor({getFiles: t, saveFiles: n}) {
        D(this, "fetchingFiles", new Map);
        D(this, "savingFiles", new Map);
        D(this, "savedFiles", new Map);
        D(this, "erroredFiles", new Map);
        D(this, "_getFiles");
        D(this, "_saveFiles");
        D(this, "isFileHandled", t=>this.savedFiles.has(t) || this.fetchingFiles.has(t) || this.savingFiles.has(t) || this.erroredFiles.has(t));
        D(this, "isFileSaved", t=>this.savedFiles.has(t));
        D(this, "saveFiles", async({elements: t, files: n})=>{
            const r = new Map;
            for (const i of t)
                Hn(i) && n[i.fileId] && !this.isFileHandled(i.fileId) && (r.set(i.fileId, n[i.fileId]),
                this.savingFiles.set(i.fileId, !0));
            try {
                const {savedFiles: i, erroredFiles: o} = await this._saveFiles({
                    addedFiles: r
                });
                for (const [s] of i)
                    this.savedFiles.set(s, !0);
                return {
                    savedFiles: i,
                    erroredFiles: o
                }
            } finally {
                for (const [i] of r)
                    this.savingFiles.delete(i)
            }
        }
        );
        D(this, "getFiles", async t=>{
            if (!t.length)
                return {
                    loadedFiles: [],
                    erroredFiles: new Map
                };
            for (const n of t)
                this.fetchingFiles.set(n, !0);
            try {
                const {loadedFiles: n, erroredFiles: r} = await this._getFiles(t);
                for (const i of n)
                    this.savedFiles.set(i.id, !0);
                for (const [i] of r)
                    this.erroredFiles.set(i, !0);
                return {
                    loadedFiles: n,
                    erroredFiles: r
                }
            } finally {
                for (const n of t)
                    this.fetchingFiles.delete(n)
            }
        }
        );
        D(this, "shouldPreventUnload", t=>t.some(n=>Hn(n) && !n.isDeleted && this.savingFiles.has(n.fileId)));
        D(this, "shouldUpdateImageElementStatus", t=>Hn(t) && this.isFileSaved(t.fileId) && t.status === "pending");
        this._getFiles = t,
        this._saveFiles = n
    }
    reset() {
        this.fetchingFiles.clear(),
        this.savingFiles.clear(),
        this.savedFiles.clear(),
        this.erroredFiles.clear()
    }
}
const A5 = async({files: e, maxBytes: t, encryptionKey: n})=>{
    const r = [];
    for (const [i,o] of e) {
        const s = new TextEncoder().encode(o.dataURL)
          , a = await pO(s, {
            encryptionKey: n,
            metadata: {
                id: i,
                mimeType: o.mimeType,
                created: Date.now(),
                lastRetrieved: Date.now()
            }
        });
        if (s.byteLength > t)
            throw new Error(k("errors.fileTooBig", {
                maxSize: `${Math.trunc(t / 1024 / 1024)}MB`
            }));
        r.push({
            id: i,
            buffer: a
        })
    }
    return r
}
  , rg = e=>{
    e.erroredFiles.size && e.excalidrawAPI.updateScene({
        elements: e.excalidrawAPI.getSceneElementsIncludingDeleted().map(t=>Hn(t) && e.erroredFiles.has(t.fileId) ? Ne(t, {
            status: "error"
        }) : t),
        storeAction: ee.UPDATE
    })
}
;
let av;
try {
    av = JSON.parse('{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}')
} catch {
    console.warn('Error JSON parsing firebase config. Supplied value: {"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}'),
    av = {}
}
let $b = null
  , Fh = null
  , Bh = null
  , a7 = !1;
const Kme = async()=>{
    const e = (await _e(()=>import("./index.esm-CanUw3FJ.js"), __vite__mapDeps([2, 3]))).default;
    if (!a7) {
        try {
            e.initializeApp(av)
        } catch (t) {
            if (t.code === "app/duplicate-app")
                console.warn(t.name, t.code);
            else
                throw t
        }
        a7 = !0
    }
    return e
}
  , r$ = async()=>($b || ($b = Kme()),
$b)
  , i$ = async()=>{
    const e = await r$();
    return Fh || (Fh = _e(()=>import("./index.esm-DKJLhsYu.js"), __vite__mapDeps([4, 3]))),
    Fh !== !0 && (await Fh,
    Fh = !0),
    e
}
  , o$ = async()=>{
    const e = await r$();
    return Bh || (Bh = _e(()=>import("./index.esm-C9xdq4RB.js"), __vite__mapDeps([5, 3]))),
    Bh !== !0 && (await Bh,
    Bh = !0),
    e
}
  , Xme = async(e,t)=>{
    const n = JSON.stringify(t)
      , r = new TextEncoder().encode(n)
      , {encryptedBuffer: i, iv: o} = await Zv(e, r);
    return {
        ciphertext: i,
        iv: o
    }
}
  , gx = async(e,t)=>{
    const n = e.ciphertext.toUint8Array()
      , r = e.iv.toUint8Array()
      , i = await fp(r, n, t)
      , o = new TextDecoder("utf-8").decode(new Uint8Array(i));
    return JSON.parse(o)
}
  , Pc = class Pc {
}
;
D(Pc, "cache", new WeakMap),
D(Pc, "get", t=>Pc.cache.get(t)),
D(Pc, "set", (t,n)=>{
    Pc.cache.set(t, ul(n))
}
);
let Ap = Pc;
const s$ = (e,t)=>{
    if (e.socket && e.roomId && e.roomKey) {
        const n = ul(t);
        return Ap.get(e.socket) === n
    }
    return !0
}
  , M5 = async({prefix: e, files: t})=>{
    const n = await o$()
      , r = new Map
      , i = new Map;
    return await Promise.all(t.map(async({id: o, buffer: s})=>{
        try {
            await n.storage().ref(`${e}/${o}`).put(new Blob([s],{
                type: Re.binary
            }), {
                cacheControl: `public, max-age=${Vme}`
            }),
            i.set(o, !0)
        } catch {
            r.set(o, !0)
        }
    }
    )),
    {
        savedFiles: i,
        erroredFiles: r
    }
}
  , l7 = async(e,t,n)=>{
    const r = ul(t)
      , {ciphertext: i, iv: o} = await Xme(n, t);
    return {
        sceneVersion: r,
        ciphertext: e.firestore.Blob.fromUint8Array(new Uint8Array(i)),
        iv: e.firestore.Blob.fromUint8Array(o)
    }
}
  , Zme = async(e,t,n)=>{
    const {roomId: r, roomKey: i, socket: o} = e;
    if (!r || !i || !o || s$(e, t))
        return null;
    const s = await i$()
      , a = s.firestore()
      , l = a.collection("scenes").doc(r)
      , c = await a.runTransaction(async f=>{
        const h = await f.get(l);
        if (!h.exists) {
            const b = await l7(s, t, i);
            return f.set(l, b),
            b
        }
        const m = h.data()
          , v = _l(gu(await gx(m, i), null))
          , y = _l(a5(t, v, n))
          , E = await l7(s, y, i);
        return f.update(l, E),
        E
    }
    )
      , u = _l(gu(await gx(c, i), null));
    return Ap.set(o, u),
    u
}
  , qme = async(e,t,n)=>{
    const s = await (await i$()).firestore().collection("scenes").doc(e).get();
    if (!s.exists)
        return null;
    const a = s.data()
      , l = _l(gu(await gx(a, t), null));
    return n && Ap.set(n, l),
    l
}
  , a$ = async(e,t,n)=>{
    const r = []
      , i = new Map;
    return await Promise.all([...new Set(n)].map(async o=>{
        try {
            const s = `https://firebasestorage.googleapis.com/v0/b/${av.storageBucket}/o/${encodeURIComponent(e.replace(/^\//, ""))}%2F${o}`
              , a = await fetch(`${s}?alt=media`);
            if (a.status < 400) {
                const l = await a.arrayBuffer()
                  , {data: c, metadata: u} = await mO(new Uint8Array(l), {
                    decryptionKey: t
                })
                  , f = new TextDecoder().decode(c);
                r.push({
                    mimeType: u.mimeType || Re.binary,
                    id: o,
                    dataURL: f,
                    created: (u == null ? void 0 : u.created) || Date.now(),
                    lastRetrieved: (u == null ? void 0 : u.created) || Date.now()
                })
            } else
                i.set(o, !0)
        } catch (s) {
            i.set(o, !0),
            console.error(s)
        }
    }
    )),
    {
        loadedFiles: r,
        erroredFiles: i
    }
}
  , l$ = e=>e.isDeleted ? e.updated > Date.now() - Gme : !bu(e)
  , _l = e=>e.filter(t=>l$(t))
  , Qme = "https://json.excalidraw.com/api/v2/"
  , Jme = "https://json.excalidraw.com/api/v2/post/"
  , e2e = async()=>{
    const e = new Uint8Array(Yme);
    return window.crypto.getRandomValues(e),
    nD(e)
}
  , c$ = /^#room=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/
  , c7 = e=>{
    const t = new URL(e).hash;
    return c$.test(t)
}
  , t2e = e=>{
    const n = new URL(e).hash.match(c$);
    return n && n[2].length !== 22 ? (window.alert(k("alerts.invalidEncryptionKey")),
    null) : n ? {
        roomId: n[1],
        roomKey: n[2]
    } : null
}
  , n2e = async()=>{
    const e = await e2e()
      , t = await o4();
    if (!t)
        throw new Error("Couldn't generate room key");
    return {
        roomId: e,
        roomKey: t
    }
}
  , r2e = e=>`${window.location.origin}${window.location.pathname}#room=${e.roomId},${e.roomKey}`
  , i2e = async({buffer: e, decryptionKey: t})=>{
    let n;
    try {
        const o = e.slice(0, mm)
          , s = e.slice(mm, e.byteLength);
        n = await fp(new Uint8Array(o), s, t)
    } catch {
        const s = new Uint8Array(mm);
        n = await fp(s, e, t)
    }
    const r = new window.TextDecoder("utf-8").decode(new Uint8Array(n))
      , i = JSON.parse(r);
    return {
        elements: i.elements || null,
        appState: i.appState || null
    }
}
  , o2e = async(e,t)=>{
    try {
        const n = await fetch(`${Qme}${e}`);
        if (!n.ok)
            return window.alert(k("alerts.importBackendFailed")),
            {};
        const r = await n.arrayBuffer();
        try {
            const {data: i} = await mO(new Uint8Array(r), {
                decryptionKey: t
            })
              , o = JSON.parse(new TextDecoder().decode(i));
            return {
                elements: o.elements || null,
                appState: o.appState || null
            }
        } catch (i) {
            return console.warn("error when decoding shareLink data using the new format:", i),
            i2e({
                buffer: r,
                decryptionKey: t
            })
        }
    } catch (n) {
        return window.alert(k("alerts.importBackendFailed")),
        console.error(n),
        {}
    }
}
  , u7 = async(e,t,n)=>{
    let r;
    return e != null && t != null ? r = pu(await o2e(e, t), n == null ? void 0 : n.appState, n == null ? void 0 : n.elements, {
        repairBindings: !0,
        refreshDimensions: !1
    }) : r = pu(n || null, null, null, {
        repairBindings: !0
    }),
    {
        elements: r.elements,
        appState: r.appState,
        files: r.files
    }
}
  , s2e = async(e,t,n)=>{
    const r = await o4("string")
      , i = await pO(new TextEncoder().encode(Bf(e, t, n, "database")), {
        encryptionKey: r
    });
    try {
        const o = new Map;
        for (const c of e)
            Hn(c) && n[c.fileId] && o.set(c.fileId, n[c.fileId]);
        const s = await A5({
            files: o,
            encryptionKey: r,
            maxBytes: T5
        })
          , l = await (await fetch(Jme, {
            method: "POST",
            body: i.buffer
        })).json();
        if (l.id) {
            const c = new URL(window.location.href);
            c.hash = `json=${l.id},${r}`;
            const u = c.toString();
            return await M5({
                prefix: `/files/shareLinks/${l.id}`,
                files: s
            }),
            {
                url: u,
                errorMessage: null
            }
        } else if (l.error_class === "RequestTooLargeError")
            return {
                url: null,
                errorMessage: k("alerts.couldNotCreateShareableLinkTooBig")
            };
        return {
            url: null,
            errorMessage: k("alerts.couldNotCreateShareableLink")
        }
    } catch (o) {
        return console.error(o),
        {
            url: null,
            errorMessage: k("alerts.couldNotCreateShareableLink")
        }
    }
}
  , a2e = e=>{
    try {
        localStorage.setItem(Ln.LOCAL_STORAGE_COLLAB, JSON.stringify({
            username: e
        }))
    } catch (t) {
        console.error(t)
    }
}
  , u$ = ()=>{
    try {
        const e = localStorage.getItem(Ln.LOCAL_STORAGE_COLLAB);
        if (e)
            return JSON.parse(e).username
    } catch (e) {
        console.error(e)
    }
    return null
}
  , d$ = ()=>{
    let e = null
      , t = null;
    try {
        e = localStorage.getItem(Ln.LOCAL_STORAGE_ELEMENTS),
        t = localStorage.getItem(Ln.LOCAL_STORAGE_APP_STATE)
    } catch (i) {
        console.error(i)
    }
    let n = [];
    if (e)
        try {
            n = RN(JSON.parse(e))
        } catch (i) {
            console.error(i)
        }
    let r = null;
    if (t)
        try {
            r = {
                ...ho(),
                ...qP(JSON.parse(t))
            }
        } catch (i) {
            console.error(i)
        }
    return {
        elements: n,
        appState: r
    }
}
  , f$ = ()=>{
    try {
        const e = localStorage.getItem(Ln.LOCAL_STORAGE_ELEMENTS);
        return (e == null ? void 0 : e.length) || 0
    } catch (e) {
        return console.error(e),
        0
    }
}
  , l2e = ()=>{
    try {
        const e = localStorage.getItem(Ln.LOCAL_STORAGE_APP_STATE)
          , t = localStorage.getItem(Ln.LOCAL_STORAGE_COLLAB)
          , n = (e == null ? void 0 : e.length) || 0
          , r = (t == null ? void 0 : t.length) || 0;
        return n + r + f$()
    } catch (e) {
        return console.error(e),
        0
    }
}
;
class c2e {
    constructor(t) {
        D(this, "collab");
        D(this, "socket", null);
        D(this, "socketInitialized", !1);
        D(this, "roomId", null);
        D(this, "roomKey", null);
        D(this, "broadcastedElementVersions", new Map);
        D(this, "queueFileUpload", ca(async()=>{
            try {
                await this.collab.fileManager.saveFiles({
                    elements: this.collab.excalidrawAPI.getSceneElementsIncludingDeleted(),
                    files: this.collab.excalidrawAPI.getFiles()
                })
            } catch (t) {
                t.name !== "AbortError" && this.collab.excalidrawAPI.updateScene({
                    appState: {
                        errorMessage: t.message
                    }
                })
            }
            this.collab.excalidrawAPI.updateScene({
                elements: this.collab.excalidrawAPI.getSceneElementsIncludingDeleted().map(t=>this.collab.fileManager.shouldUpdateImageElementStatus(t) ? Ne(t, {
                    status: "saved"
                }) : t),
                storeAction: ee.UPDATE
            })
        }
        , $me));
        D(this, "broadcastScene", async(t,n,r)=>{
            if (t === Fr.INIT && !r)
                throw new Error("syncAll must be true when sending SCENE.INIT");
            const i = n.reduce((s,a)=>((r || !this.broadcastedElementVersions.has(a.id) || a.version > this.broadcastedElementVersions.get(a.id)) && l$(a) && s.push(a),
            s), [])
              , o = {
                type: t,
                payload: {
                    elements: i
                }
            };
            for (const s of i)
                this.broadcastedElementVersions.set(s.id, s.version);
            this.queueFileUpload(),
            await this._broadcastSocketData(o)
        }
        );
        D(this, "broadcastIdleChange", t=>{
            var n;
            if ((n = this.socket) != null && n.id) {
                const r = {
                    type: Fr.IDLE_STATUS,
                    payload: {
                        socketId: this.socket.id,
                        userState: t,
                        username: this.collab.state.username
                    }
                };
                return this._broadcastSocketData(r, !0)
            }
        }
        );
        D(this, "broadcastMouseLocation", t=>{
            var n;
            if ((n = this.socket) != null && n.id) {
                const r = {
                    type: Fr.MOUSE_LOCATION,
                    payload: {
                        socketId: this.socket.id,
                        pointer: t.pointer,
                        button: t.button || "up",
                        selectedElementIds: this.collab.excalidrawAPI.getAppState().selectedElementIds,
                        username: this.collab.state.username
                    }
                };
                return this._broadcastSocketData(r, !0)
            }
        }
        );
        D(this, "broadcastVisibleSceneBounds", (t,n)=>{
            var r;
            if ((r = this.socket) != null && r.id) {
                const i = {
                    type: Fr.USER_VISIBLE_SCENE_BOUNDS,
                    payload: {
                        socketId: this.socket.id,
                        username: this.collab.state.username,
                        sceneBounds: t.sceneBounds
                    }
                };
                return this._broadcastSocketData(i, !0, n)
            }
        }
        );
        D(this, "broadcastUserFollowed", t=>{
            var n;
            (n = this.socket) != null && n.id && this.socket.emit(Am.USER_FOLLOW_CHANGE, t)
        }
        );
        this.collab = t
    }
    open(t, n, r) {
        return this.socket = t,
        this.roomId = n,
        this.roomKey = r,
        this.socket.on("init-room", ()=>{
            this.socket && (this.socket.emit("join-room", this.roomId),
            at("share", "room joined"))
        }
        ),
        this.socket.on("new-user", async i=>{
            this.broadcastScene(Fr.INIT, this.collab.getSceneElementsIncludingDeleted(), !0)
        }
        ),
        this.socket.on("room-user-change", i=>{
            this.collab.setCollaborators(i)
        }
        ),
        t
    }
    close() {
        this.socket && (this.queueFileUpload.flush(),
        this.socket.close(),
        this.socket = null,
        this.roomId = null,
        this.roomKey = null,
        this.socketInitialized = !1,
        this.broadcastedElementVersions = new Map)
    }
    isOpen() {
        return !!(this.socketInitialized && this.socket && this.roomId && this.roomKey)
    }
    async _broadcastSocketData(t, n=!1, r) {
        var i;
        if (this.isOpen()) {
            const o = JSON.stringify(t)
              , s = new TextEncoder().encode(o)
              , {encryptedBuffer: a, iv: l} = await Zv(this.roomKey, s);
            (i = this.socket) == null || i.emit(n ? Am.SERVER_VOLATILE : Am.SERVER, r ?? this.roomId, a, l)
        }
    }
}
const lv = {
    [Ln.VERSION_DATA_STATE]: -1,
    [Ln.VERSION_FILES]: -1
}
  , d7 = e=>JSON.parse(localStorage.getItem(e) || "-1") > lv[e]
  , h$ = e=>{
    const t = Date.now();
    try {
        localStorage.setItem(e, JSON.stringify(t)),
        lv[e] = t
    } catch (n) {
        console.error("error while updating browser state verison", n)
    }
}
  , u2e = ()=>{
    try {
        for (const e of Object.keys(lv))
            localStorage.setItem(e, JSON.stringify(-1)),
            lv[e] = -1
    } catch (e) {
        console.error("error while resetting browser state verison", e)
    }
}
;
function d2e() {
    var e = !navigator.userAgentData && /Safari\//.test(navigator.userAgent) && !/Chrom(e|ium)\//.test(navigator.userAgent);
    if (!e || !indexedDB.databases)
        return Promise.resolve();
    var t;
    return new Promise(function(n) {
        var r = function() {
            return indexedDB.databases().finally(n)
        };
        t = setInterval(r, 100),
        r()
    }
    ).finally(function() {
        return clearInterval(t)
    })
}
function Ou(e) {
    return new Promise((t,n)=>{
        e.oncomplete = e.onsuccess = ()=>t(e.result),
        e.onabort = e.onerror = ()=>n(e.error)
    }
    )
}
function L5(e, t) {
    const n = d2e().then(()=>{
        const r = indexedDB.open(e);
        return r.onupgradeneeded = ()=>r.result.createObjectStore(t),
        Ou(r)
    }
    );
    return (r,i)=>n.then(o=>i(o.transaction(t, r).objectStore(t)))
}
let Ub;
function jf() {
    return Ub || (Ub = L5("keyval-store", "keyval")),
    Ub
}
function f2e(e, t=jf()) {
    return t("readonly", n=>Ou(n.get(e)))
}
function g$(e, t, n=jf()) {
    return n("readwrite", r=>(r.put(t, e),
    Ou(r.transaction)))
}
function h2e(e, t=jf()) {
    return t("readwrite", n=>(e.forEach(r=>n.put(r[1], r[0])),
    Ou(n.transaction)))
}
function g2e(e, t=jf()) {
    return t("readonly", n=>Promise.all(e.map(r=>Ou(n.get(r)))))
}
function p2e(e, t=jf()) {
    return t("readwrite", n=>(n.delete(e),
    Ou(n.transaction)))
}
function m2e(e, t) {
    return e("readonly", n=>(n.openCursor().onsuccess = function() {
        this.result && (t(this.result),
        this.result.continue())
    }
    ,
    Ou(n.transaction)))
}
function v2e(e=jf()) {
    const t = [];
    return m2e(e, n=>t.push([n.key, n.value])).then(()=>t)
}
class y2e {
    constructor() {
        D(this, "locks", new Map);
        D(this, "lock", t=>{
            this.locks.set(t, !0)
        }
        );
        D(this, "unlock", t=>(this.locks.delete(t),
        !this.isLocked()))
    }
    isLocked(t) {
        return t ? this.locks.has(t) : !!this.locks.size
    }
}
const Rg = L5("files-db", "files-store");
class w2e extends n$ {
    constructor() {
        super(...arguments);
        D(this, "clearObsoleteFiles", async n=>{
            await v2e(Rg).then(r=>{
                for (const [i,o] of r)
                    (!o.lastRetrieved || Date.now() - o.lastRetrieved > 24 * 3600 * 1e3) && !n.currentFileIds.includes(i) && p2e(i, Rg)
            }
            )
        }
        )
    }
}
const E2e = (e,t)=>{
    try {
        localStorage.setItem(Ln.LOCAL_STORAGE_ELEMENTS, JSON.stringify(RN(e))),
        localStorage.setItem(Ln.LOCAL_STORAGE_APP_STATE, JSON.stringify(qP(t))),
        h$(Ln.VERSION_DATA_STATE)
    } catch (n) {
        console.error(n)
    }
}
  , Jn = class Jn {
}
;
D(Jn, "_save", Wl(async(t,n,r,i)=>{
    E2e(t, n),
    await Jn.fileStorage.saveFiles({
        elements: t,
        files: r
    }),
    i()
}
, Bme)),
D(Jn, "save", (t,n,r,i)=>{
    Jn.isSavePaused() || Jn._save(t, n, r, i)
}
),
D(Jn, "flushSave", ()=>{
    Jn._save.flush()
}
),
D(Jn, "locker", new y2e),
D(Jn, "pauseSave", t=>{
    Jn.locker.lock(t)
}
),
D(Jn, "resumeSave", t=>{
    Jn.locker.unlock(t)
}
),
D(Jn, "isSavePaused", ()=>document.hidden || Jn.locker.isLocked()),
D(Jn, "fileStorage", new w2e({
    getFiles(t) {
        return g2e(t, Rg).then(async n=>{
            const r = []
              , i = new Map
              , o = [];
            n.forEach((s,a)=>{
                const l = t[a];
                if (s) {
                    const c = {
                        ...s,
                        lastRetrieved: Date.now()
                    };
                    o.push([l, c]),
                    r.push(c)
                } else
                    i.set(l, !0)
            }
            );
            try {
                h2e(o, Rg)
            } catch (s) {
                console.warn(s)
            }
            return {
                loadedFiles: r,
                erroredFiles: i
            }
        }
        )
    },
    async saveFiles({addedFiles: t}) {
        const n = new Map
          , r = new Map;
        return h$(Ln.VERSION_FILES),
        await Promise.all([...t].map(async([i,o])=>{
            try {
                await g$(i, o, Rg),
                n.set(i, !0)
            } catch (s) {
                console.error(s),
                r.set(i, !0)
            }
        }
        )),
        {
            savedFiles: n,
            erroredFiles: r
        }
    }
}));
let Er = Jn;
const Mo = class Mo {
    static async load() {
        return await f2e(Mo.key, Mo.store) || null
    }
    static save(t) {
        return g$(Mo.key, t, Mo.store)
    }
}
;
D(Mo, "idb_name", Ln.IDB_LIBRARY),
D(Mo, "key", "libraryData"),
D(Mo, "store", L5(`${Mo.idb_name}-db`, `${Mo.idb_name}-store`));
let cv = Mo;
class b2e {
    static load() {
        const t = localStorage.getItem(Ln.__LEGACY_LOCAL_STORAGE_LIBRARY);
        if (t != null) {
            const n = JSON.parse(t);
            if (n)
                return {
                    libraryItems: n
                }
        }
        return null
    }
    static clear() {
        localStorage.removeItem(Ln.__LEGACY_LOCAL_STORAGE_LIBRARY)
    }
}
const el = NR()
  , px = mn({
    message: null,
    nonce: 0
})
  , p$ = ({collabError: e})=>{
    const [t,n] = T.useState(!1)
      , r = T.useRef();
    return T.useEffect(()=>(n(!0),
    r.current = setTimeout(()=>{
        n(!1)
    }
    , 1e3),
    ()=>{
        clearTimeout(r.current)
    }
    ), [e.message, e.nonce]),
    e.message ? g(Ma, {
        label: e.message,
        long: !0,
        children: g("div", {
            className: xe("collab-errors-button", {
                "collab-errors-button-shake": t
            }),
            children: xee
        })
    }) : null
}
;
p$.displayName = "CollabError";
const m$ = mn(null)
  , mx = mn(!1)
  , v$ = mn(!1)
  , y$ = mn(null);
class _2e extends T.PureComponent {
    constructor(n) {
        super(n);
        D(this, "portal");
        D(this, "fileManager");
        D(this, "excalidrawAPI");
        D(this, "activeIntervalId");
        D(this, "idleTimeoutId");
        D(this, "socketInitializationTimer");
        D(this, "lastBroadcastedOrReceivedSceneVersion", -1);
        D(this, "collaborators", new Map);
        D(this, "onUmmount", null);
        D(this, "onOfflineStatusToggle", ()=>{
            el.set(v$, !window.navigator.onLine)
        }
        );
        D(this, "isCollaborating", ()=>el.get(mx));
        D(this, "setIsCollaborating", n=>{
            el.set(mx, n)
        }
        );
        D(this, "onUnload", ()=>{
            this.destroySocketClient({
                isUnload: !0
            })
        }
        );
        D(this, "beforeUnload", Xt(n=>{
            const r = _l(this.getSceneElementsIncludingDeleted());
            this.isCollaborating() && (this.fileManager.shouldPreventUnload(r) || !s$(this.portal, r)) && (this.saveCollabRoomToFirebase(r),
            A6(n))
        }
        ));
        D(this, "saveCollabRoomToFirebase", async n=>{
            try {
                const r = await Zme(this.portal, n, this.excalidrawAPI.getAppState());
                this.resetErrorIndicator(),
                this.isCollaborating() && r && this.handleRemoteSceneUpdate(this._reconcileElements(r))
            } catch (r) {
                const i = /is longer than.*?bytes/.test(r.message) ? k("errors.collabSaveFailed_sizeExceeded") : k("errors.collabSaveFailed");
                (!this.state.dialogNotifiedErrors[i] || !this.isCollaborating()) && (this.setErrorDialog(i),
                this.setState({
                    dialogNotifiedErrors: {
                        ...this.state.dialogNotifiedErrors,
                        [i]: !0
                    }
                })),
                this.isCollaborating() && this.setErrorIndicator(i),
                console.error(r)
            }
        }
        );
        D(this, "stopCollaboration", (n=!0)=>{
            if (this.queueBroadcastAllElements.cancel(),
            this.queueSaveToFirebase.cancel(),
            this.loadImageFiles.cancel(),
            this.resetErrorIndicator(!0),
            this.saveCollabRoomToFirebase(_l(this.excalidrawAPI.getSceneElementsIncludingDeleted())),
            this.portal.socket && this.fallbackInitializationHandler && this.portal.socket.off("connect_error", this.fallbackInitializationHandler),
            !n)
                Er.fileStorage.reset(),
                this.destroySocketClient();
            else if (window.confirm(k("alerts.collabStopOverridePrompt"))) {
                u2e(),
                window.history.pushState({}, fa, window.location.origin),
                this.destroySocketClient(),
                Er.fileStorage.reset();
                const r = this.excalidrawAPI.getSceneElementsIncludingDeleted().map(i=>ga(i) && i.status === "saved" ? Ne(i, {
                    status: "pending"
                }) : i);
                this.excalidrawAPI.updateScene({
                    elements: r,
                    storeAction: ee.UPDATE
                })
            }
        }
        );
        D(this, "destroySocketClient", n=>{
            this.lastBroadcastedOrReceivedSceneVersion = -1,
            this.portal.close(),
            this.fileManager.reset(),
            n != null && n.isUnload || (this.setIsCollaborating(!1),
            this.setActiveRoomLink(null),
            this.collaborators = new Map,
            this.excalidrawAPI.updateScene({
                collaborators: this.collaborators
            }),
            Er.resumeSave("collaboration"))
        }
        );
        D(this, "fetchImageFilesFromFirebase", async n=>{
            const r = n.elements.filter(i=>Hn(i) && !this.fileManager.isFileHandled(i.fileId) && !i.isDeleted && (n.forceFetchFiles ? i.status !== "pending" || Date.now() - i.updated > 1e4 : i.status === "saved")).map(i=>i.fileId);
            return await this.fileManager.getFiles(r)
        }
        );
        D(this, "decryptPayload", async(n,r,i)=>{
            try {
                const o = await fp(n, r, i)
                  , s = new TextDecoder("utf-8").decode(new Uint8Array(o));
                return JSON.parse(s)
            } catch (o) {
                return window.alert(k("alerts.decryptFailed")),
                console.error(o),
                {
                    type: Fr.INVALID_RESPONSE
                }
            }
        }
        );
        D(this, "fallbackInitializationHandler", null);
        D(this, "startCollaboration", async n=>{
            if (this.state.username || _e(()=>import("./random-username.esm-__vdrxyo.js"), __vite__mapDeps([])).then(({getRandomUsername: l})=>{
                const c = l();
                this.setUsername(c)
            }
            ),
            this.portal.socket)
                return null;
            let r, i;
            n ? {roomId: r, roomKey: i} = n : ({roomId: r, roomKey: i} = await n2e(),
            window.history.pushState({}, fa, r2e({
                roomId: r,
                roomKey: i
            })));
            const o = Mv();
            this.setIsCollaborating(!0),
            Er.pauseSave("collaboration");
            const {default: s} = await _e(()=>import("./index-ChGp7972.js"), __vite__mapDeps([]))
              , a = ()=>{
                this.initializeRoom({
                    roomLinkData: n,
                    fetchScene: !0
                }).then(l=>{
                    o.resolve(l)
                }
                )
            }
            ;
            this.fallbackInitializationHandler = a;
            try {
                this.portal.socket = this.portal.open(s("https://oss-collab.excalidraw.com", {
                    transports: ["websocket", "polling"]
                }), r, i),
                this.portal.socket.once("connect_error", a)
            } catch (l) {
                return console.error(l),
                this.setErrorDialog(l.message),
                null
            }
            if (!n) {
                const l = this.excalidrawAPI.getSceneElements().map(c=>ga(c) && c.status === "saved" ? Ne(c, {
                    status: "pending"
                }) : c);
                this.excalidrawAPI.updateScene({
                    elements: l,
                    storeAction: ee.UPDATE
                }),
                this.saveCollabRoomToFirebase(_l(l))
            }
            return this.socketInitializationTimer = window.setTimeout(a, zme),
            this.portal.socket.on("client-broadcast", async(l,c)=>{
                var f;
                if (!this.portal.roomKey)
                    return;
                const u = await this.decryptPayload(c, l, this.portal.roomKey);
                switch (u.type) {
                case Fr.INVALID_RESPONSE:
                    return;
                case Fr.INIT:
                    {
                        if (!this.portal.socketInitialized) {
                            this.initializeRoom({
                                fetchScene: !1
                            });
                            const h = u.payload.elements
                              , m = this._reconcileElements(h);
                            this.handleRemoteSceneUpdate(m),
                            o.resolve({
                                elements: m,
                                scrollToContent: !0
                            })
                        }
                        break
                    }
                case Fr.UPDATE:
                    this.handleRemoteSceneUpdate(this._reconcileElements(u.payload.elements));
                    break;
                case Fr.MOUSE_LOCATION:
                    {
                        const {pointer: h, button: m, username: v, selectedElementIds: y} = u.payload
                          , E = u.payload.socketId || u.payload.socketID;
                        this.updateCollaborator(E, {
                            pointer: h,
                            button: m,
                            selectedElementIds: y,
                            username: v
                        });
                        break
                    }
                case Fr.USER_VISIBLE_SCENE_BOUNDS:
                    {
                        const {sceneBounds: h, socketId: m} = u.payload
                          , v = this.excalidrawAPI.getAppState();
                        if (((f = v.userToFollow) == null ? void 0 : f.socketId) !== m) {
                            console.warn(`receiving remote client's (from ${m}) viewport bounds even though we're not subscribed to it!`);
                            return
                        }
                        if (v.userToFollow && v.followedBy.has(v.userToFollow.socketId))
                            return;
                        this.excalidrawAPI.updateScene({
                            appState: FF({
                                appState: v,
                                bounds: h,
                                fitToViewport: !0,
                                viewportZoomFactor: 1
                            }).appState
                        });
                        break
                    }
                case Fr.IDLE_STATUS:
                    {
                        const {userState: h, socketId: m, username: v} = u.payload;
                        this.updateCollaborator(m, {
                            userState: h,
                            username: v
                        });
                        break
                    }
                default:
                    Gl(u, null)
                }
            }
            ),
            this.portal.socket.on("first-in-room", async()=>{
                this.portal.socket && this.portal.socket.off("first-in-room");
                const l = await this.initializeRoom({
                    fetchScene: !0,
                    roomLinkData: n
                });
                o.resolve(l)
            }
            ),
            this.portal.socket.on(Am.USER_FOLLOW_ROOM_CHANGE, l=>{
                this.excalidrawAPI.updateScene({
                    appState: {
                        followedBy: new Set(l)
                    }
                }),
                this.relayVisibleSceneBounds({
                    force: !0
                })
            }
            ),
            this.initializeIdleDetector(),
            this.setActiveRoomLink(window.location.href),
            o
        }
        );
        D(this, "initializeRoom", async({fetchScene: n, roomLinkData: r})=>{
            if (clearTimeout(this.socketInitializationTimer),
            this.portal.socket && this.fallbackInitializationHandler && this.portal.socket.off("connect_error", this.fallbackInitializationHandler),
            n && r && this.portal.socket) {
                this.excalidrawAPI.resetScene();
                try {
                    const i = await qme(r.roomId, r.roomKey, this.portal.socket);
                    if (i)
                        return this.setLastBroadcastedOrReceivedSceneVersion(ul(i)),
                        {
                            elements: i,
                            scrollToContent: !0
                        }
                } catch (i) {
                    console.error(i)
                } finally {
                    this.portal.socketInitialized = !0
                }
            } else
                this.portal.socketInitialized = !0;
            return null
        }
        );
        D(this, "_reconcileElements", n=>{
            const r = this.getSceneElementsIncludingDeleted()
              , i = this.excalidrawAPI.getAppState()
              , o = gu(n, null)
              , s = a5(r, o, i);
            return this.setLastBroadcastedOrReceivedSceneVersion(ul(s)),
            s
        }
        );
        D(this, "loadImageFiles", ca(async()=>{
            const {loadedFiles: n, erroredFiles: r} = await this.fetchImageFilesFromFirebase({
                elements: this.excalidrawAPI.getSceneElementsIncludingDeleted()
            });
            this.excalidrawAPI.addFiles(n),
            rg({
                excalidrawAPI: this.excalidrawAPI,
                erroredFiles: r,
                elements: this.excalidrawAPI.getSceneElementsIncludingDeleted()
            })
        }
        , Ume));
        D(this, "handleRemoteSceneUpdate", n=>{
            this.excalidrawAPI.updateScene({
                elements: n,
                storeAction: ee.UPDATE
            }),
            this.loadImageFiles()
        }
        );
        D(this, "onPointerMove", ()=>{
            this.idleTimeoutId && (window.clearTimeout(this.idleTimeoutId),
            this.idleTimeoutId = null),
            this.idleTimeoutId = window.setTimeout(this.reportIdle, yk),
            this.activeIntervalId || (this.activeIntervalId = window.setInterval(this.reportActive, wk))
        }
        );
        D(this, "onVisibilityChange", ()=>{
            document.hidden ? (this.idleTimeoutId && (window.clearTimeout(this.idleTimeoutId),
            this.idleTimeoutId = null),
            this.activeIntervalId && (window.clearInterval(this.activeIntervalId),
            this.activeIntervalId = null),
            this.onIdleStateChange(Uc.AWAY)) : (this.idleTimeoutId = window.setTimeout(this.reportIdle, yk),
            this.activeIntervalId = window.setInterval(this.reportActive, wk),
            this.onIdleStateChange(Uc.ACTIVE))
        }
        );
        D(this, "reportIdle", ()=>{
            this.onIdleStateChange(Uc.IDLE),
            this.activeIntervalId && (window.clearInterval(this.activeIntervalId),
            this.activeIntervalId = null)
        }
        );
        D(this, "reportActive", ()=>{
            this.onIdleStateChange(Uc.ACTIVE)
        }
        );
        D(this, "initializeIdleDetector", ()=>{
            document.addEventListener(ce.POINTER_MOVE, this.onPointerMove),
            document.addEventListener(ce.VISIBILITY_CHANGE, this.onVisibilityChange)
        }
        );
        D(this, "updateCollaborator", (n,r)=>{
            var s;
            const i = new Map(this.collaborators)
              , o = Object.assign({}, i.get(n), r, {
                isCurrentUser: n === ((s = this.portal.socket) == null ? void 0 : s.id)
            });
            i.set(n, o),
            this.collaborators = i,
            this.excalidrawAPI.updateScene({
                collaborators: i
            })
        }
        );
        D(this, "setLastBroadcastedOrReceivedSceneVersion", n=>{
            this.lastBroadcastedOrReceivedSceneVersion = n
        }
        );
        D(this, "getLastBroadcastedOrReceivedSceneVersion", ()=>this.lastBroadcastedOrReceivedSceneVersion);
        D(this, "getSceneElementsIncludingDeleted", ()=>this.excalidrawAPI.getSceneElementsIncludingDeleted());
        D(this, "onPointerUpdate", ca(n=>{
            n.pointersMap.size < 2 && this.portal.socket && this.portal.broadcastMouseLocation(n)
        }
        , Wme));
        D(this, "relayVisibleSceneBounds", n=>{
            const r = this.excalidrawAPI.getAppState();
            this.portal.socket && (r.followedBy.size > 0 || n != null && n.force) && this.portal.broadcastVisibleSceneBounds({
                sceneBounds: fN(r)
            }, `follow@${this.portal.socket.id}`)
        }
        );
        D(this, "onIdleStateChange", n=>{
            this.portal.broadcastIdleChange(n)
        }
        );
        D(this, "broadcastElements", n=>{
            ul(n) > this.getLastBroadcastedOrReceivedSceneVersion() && (this.portal.broadcastScene(Fr.UPDATE, n, !1),
            this.lastBroadcastedOrReceivedSceneVersion = ul(n),
            this.queueBroadcastAllElements())
        }
        );
        D(this, "syncElements", n=>{
            this.broadcastElements(n),
            this.queueSaveToFirebase()
        }
        );
        D(this, "queueBroadcastAllElements", ca(()=>{
            this.portal.broadcastScene(Fr.UPDATE, this.excalidrawAPI.getSceneElementsIncludingDeleted(), !0);
            const n = this.getLastBroadcastedOrReceivedSceneVersion()
              , r = Math.max(n, ul(this.getSceneElementsIncludingDeleted()));
            this.setLastBroadcastedOrReceivedSceneVersion(r)
        }
        , s7));
        D(this, "queueSaveToFirebase", ca(()=>{
            this.portal.socketInitialized && this.saveCollabRoomToFirebase(_l(this.excalidrawAPI.getSceneElementsIncludingDeleted()))
        }
        , s7, {
            leading: !1
        }));
        D(this, "setUsername", n=>{
            this.setState({
                username: n
            }),
            a2e(n)
        }
        );
        D(this, "getUsername", ()=>this.state.username);
        D(this, "setActiveRoomLink", n=>{
            this.setState({
                activeRoomLink: n
            }),
            el.set(y$, n)
        }
        );
        D(this, "getActiveRoomLink", ()=>this.state.activeRoomLink);
        D(this, "setErrorIndicator", n=>{
            el.set(px, {
                message: n,
                nonce: Date.now()
            })
        }
        );
        D(this, "resetErrorIndicator", (n=!1)=>{
            el.set(px, {
                message: null,
                nonce: 0
            }),
            n && this.setState({
                dialogNotifiedErrors: {}
            })
        }
        );
        D(this, "setErrorDialog", n=>{
            this.setState({
                errorMessage: n
            })
        }
        );
        this.state = {
            errorMessage: null,
            dialogNotifiedErrors: {},
            username: u$() || "",
            activeRoomLink: null
        },
        this.portal = new c2e(this),
        this.fileManager = new n$({
            getFiles: async r=>{
                const {roomId: i, roomKey: o} = this.portal;
                if (!i || !o)
                    throw new df;
                return a$(`files/rooms/${i}`, o, r)
            }
            ,
            saveFiles: async({addedFiles: r})=>{
                const {roomId: i, roomKey: o} = this.portal;
                if (!i || !o)
                    throw new df;
                return M5({
                    prefix: `${t$.collabFiles}/${i}`,
                    files: await A5({
                        files: r,
                        encryptionKey: o,
                        maxBytes: T5
                    })
                })
            }
        }),
        this.excalidrawAPI = n.excalidrawAPI,
        this.activeIntervalId = null,
        this.idleTimeoutId = null
    }
    componentDidMount() {
        window.addEventListener(ce.BEFORE_UNLOAD, this.beforeUnload),
        window.addEventListener("online", this.onOfflineStatusToggle),
        window.addEventListener("offline", this.onOfflineStatusToggle),
        window.addEventListener(ce.UNLOAD, this.onUnload);
        const n = this.excalidrawAPI.onUserFollow(s=>{
            this.portal.socket && this.portal.broadcastUserFollowed(s)
        }
        )
          , r = Av(this.relayVisibleSceneBounds)
          , i = this.excalidrawAPI.onScrollChange(()=>r());
        this.onUmmount = ()=>{
            n(),
            i()
        }
        ,
        this.onOfflineStatusToggle();
        const o = {
            isCollaborating: this.isCollaborating,
            onPointerUpdate: this.onPointerUpdate,
            startCollaboration: this.startCollaboration,
            syncElements: this.syncElements,
            fetchImageFilesFromFirebase: this.fetchImageFilesFromFirebase,
            stopCollaboration: this.stopCollaboration,
            setUsername: this.setUsername,
            getUsername: this.getUsername,
            getActiveRoomLink: this.getActiveRoomLink,
            setCollabError: this.setErrorDialog
        };
        el.set(m$, o)
    }
    componentWillUnmount() {
        var n;
        window.removeEventListener("online", this.onOfflineStatusToggle),
        window.removeEventListener("offline", this.onOfflineStatusToggle),
        window.removeEventListener(ce.BEFORE_UNLOAD, this.beforeUnload),
        window.removeEventListener(ce.UNLOAD, this.onUnload),
        window.removeEventListener(ce.POINTER_MOVE, this.onPointerMove),
        window.removeEventListener(ce.VISIBILITY_CHANGE, this.onVisibilityChange),
        this.activeIntervalId && (window.clearInterval(this.activeIntervalId),
        this.activeIntervalId = null),
        this.idleTimeoutId && (window.clearTimeout(this.idleTimeoutId),
        this.idleTimeoutId = null),
        (n = this.onUmmount) == null || n.call(this)
    }
    setCollaborators(n) {
        var i;
        const r = new Map;
        for (const o of n)
            r.set(o, Object.assign({}, this.collaborators.get(o), {
                isCurrentUser: o === ((i = this.portal.socket) == null ? void 0 : i.id)
            }));
        this.collaborators = r,
        this.excalidrawAPI.updateScene({
            collaborators: r
        })
    }
    render() {
        const {errorMessage: n} = this.state;
        return g(Se, {
            children: n != null && g(v5, {
                onClose: ()=>this.setErrorDialog(null),
                children: n
            })
        })
    }
}
const x2e = 500
  , f7 = Wl(e=>{
    e({
        scene: f$(),
        total: l2e()
    })
}
, x2e)
  , S2e = e=>{
    const [t,n] = T.useState({
        scene: 0,
        total: 0
    });
    T.useEffect(()=>{
        f7(s=>{
            n(s)
        }
        )
    }
    , [e.elements, e.appState]),
    T.useEffect(()=>()=>f7.cancel(), []);
    const r = V3();
    let i, o;
    return r !== WP ? (o = r.slice(0, 16).replace("T", " "),
    i = r.slice(21)) : o = k("stats.versionNotAvailable"),
    L(ia.StatsRows, {
        order: -1,
        children: [g(ia.StatsRow, {
            heading: !0,
            children: k("stats.version")
        }), L(ia.StatsRow, {
            style: {
                textAlign: "center",
                cursor: "pointer"
            },
            onClick: async()=>{
                try {
                    await Pu(V3()),
                    e.setToast(k("toast.copyToClipboard"))
                } catch {}
            }
            ,
            title: k("stats.versionCopy"),
            children: [o, g("br", {}), i]
        }), g(ia.StatsRow, {
            heading: !0,
            children: k("stats.storage")
        }), L(ia.StatsRow, {
            columns: 2,
            children: [g("div", {
                children: k("stats.scene")
            }), g("div", {
                children: Nk(t.scene, 1)
            })]
        }), L(ia.StatsRow, {
            columns: 2,
            children: [g("div", {
                children: k("stats.total")
            }), g("div", {
                children: Nk(t.total, 1)
            })]
        })]
    })
}
;
let I2e = (e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n &= 63,
n < 36 ? t += n.toString(36) : n < 62 ? t += (n - 26).toString(36).toUpperCase() : n > 62 ? t += "-" : t += "_",
t), "");
const vx = async(e,t,n,r)=>{
    const i = await o$()
      , o = `${I2e(12)}`
      , s = await o4()
      , a = await Zv(s, Bf(e, t, n, "database"))
      , l = new Blob([a.iv, new Uint8Array(a.encryptedBuffer)],{
        type: Re.binary
    });
    await i.storage().ref(`/migrations/scenes/${o}`).put(l, {
        customMetadata: {
            data: JSON.stringify({
                version: 2,
                name: r
            }),
            created: Date.now().toString()
        }
    });
    const c = new Map;
    for (const u of e)
        Hn(u) && n[u.fileId] && c.set(u.fileId, n[u.fileId]);
    if (c.size) {
        const u = await A5({
            files: c,
            encryptionKey: s,
            maxBytes: T5
        });
        await M5({
            prefix: `/migrations/files/scenes/${o}`,
            files: u
        })
    }
    window.open(`https://app.excalidraw.com/import?excalidraw=${o},${s}`)
}
  , C2e = ({elements: e, appState: t, files: n, name: r, onError: i, onSuccess: o})=>{
    const {t: s} = vn();
    return L(J_, {
        color: "primary",
        children: [g("div", {
            className: "Card-icon",
            children: g(fz, {
                style: {
                    "--color-logo-icon": "#fff",
                    width: "2.8rem",
                    height: "2.8rem"
                }
            })
        }), g("h2", {
            children: "Excalidraw+"
        }), g("div", {
            className: "Card-details",
            children: s("exportDialog.excalidrawplus_description")
        }), g(lt, {
            className: "Card-button",
            type: "button",
            title: s("exportDialog.excalidrawplus_button"),
            "aria-label": s("exportDialog.excalidrawplus_button"),
            showAriaLabel: !0,
            onClick: async()=>{
                try {
                    at("export", "eplus", `ui (${zp()})`),
                    await vx(e, t, n, r),
                    o()
                } catch (a) {
                    console.error(a),
                    a.name !== "AbortError" && i(new Error(s("exportDialog.excalidrawplus_exportError")))
                }
            }
        })]
    })
}
;
function k2e(e, t) {
    if (!(e instanceof t))
        throw new TypeError("Cannot call a class as a function")
}
function Mp(e) {
    "@babel/helpers - typeof";
    return Mp = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
        return typeof t
    }
    : function(t) {
        return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
    }
    ,
    Mp(e)
}
function T2e(e, t) {
    if (Mp(e) != "object" || !e)
        return e;
    var n = e[Symbol.toPrimitive];
    if (n !== void 0) {
        var r = n.call(e, t);
        if (Mp(r) != "object")
            return r;
        throw new TypeError("@@toPrimitive must return a primitive value.")
    }
    return String(e)
}
function A2e(e) {
    var t = T2e(e, "string");
    return Mp(t) == "symbol" ? t : t + ""
}
function M2e(e, t) {
    for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1,
        r.configurable = !0,
        "value"in r && (r.writable = !0),
        Object.defineProperty(e, A2e(r.key), r)
    }
}
function L2e(e, t, n) {
    return t && M2e(e.prototype, t),
    Object.defineProperty(e, "prototype", {
        writable: !1
    }),
    e
}
var w$ = []
  , P2e = w$.forEach
  , R2e = w$.slice;
function D2e(e) {
    return P2e.call(R2e.call(arguments, 1), function(t) {
        if (t)
            for (var n in t)
                e[n] === void 0 && (e[n] = t[n])
    }),
    e
}
var h7 = /^[\u0009\u0020-\u007e\u0080-\u00ff]+$/
  , O2e = function(t, n, r) {
    var i = r || {};
    i.path = i.path || "/";
    var o = encodeURIComponent(n)
      , s = t + "=" + o;
    if (i.maxAge > 0) {
        var a = i.maxAge - 0;
        if (isNaN(a))
            throw new Error("maxAge should be a Number");
        s += "; Max-Age=" + Math.floor(a)
    }
    if (i.domain) {
        if (!h7.test(i.domain))
            throw new TypeError("option domain is invalid");
        s += "; Domain=" + i.domain
    }
    if (i.path) {
        if (!h7.test(i.path))
            throw new TypeError("option path is invalid");
        s += "; Path=" + i.path
    }
    if (i.expires) {
        if (typeof i.expires.toUTCString != "function")
            throw new TypeError("option expires is invalid");
        s += "; Expires=" + i.expires.toUTCString()
    }
    if (i.httpOnly && (s += "; HttpOnly"),
    i.secure && (s += "; Secure"),
    i.sameSite) {
        var l = typeof i.sameSite == "string" ? i.sameSite.toLowerCase() : i.sameSite;
        switch (l) {
        case !0:
            s += "; SameSite=Strict";
            break;
        case "lax":
            s += "; SameSite=Lax";
            break;
        case "strict":
            s += "; SameSite=Strict";
            break;
        case "none":
            s += "; SameSite=None";
            break;
        default:
            throw new TypeError("option sameSite is invalid")
        }
    }
    return s
}
  , g7 = {
    create: function(t, n, r, i) {
        var o = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : {
            path: "/",
            sameSite: "strict"
        };
        r && (o.expires = new Date,
        o.expires.setTime(o.expires.getTime() + r * 60 * 1e3)),
        i && (o.domain = i),
        document.cookie = O2e(t, encodeURIComponent(n), o)
    },
    read: function(t) {
        for (var n = t + "=", r = document.cookie.split(";"), i = 0; i < r.length; i++) {
            for (var o = r[i]; o.charAt(0) === " "; )
                o = o.substring(1, o.length);
            if (o.indexOf(n) === 0)
                return o.substring(n.length, o.length)
        }
        return null
    },
    remove: function(t) {
        this.create(t, "", -1)
    }
}
  , N2e = {
    name: "cookie",
    lookup: function(t) {
        var n;
        if (t.lookupCookie && typeof document < "u") {
            var r = g7.read(t.lookupCookie);
            r && (n = r)
        }
        return n
    },
    cacheUserLanguage: function(t, n) {
        n.lookupCookie && typeof document < "u" && g7.create(n.lookupCookie, t, n.cookieMinutes, n.cookieDomain, n.cookieOptions)
    }
}
  , F2e = {
    name: "querystring",
    lookup: function(t) {
        var n;
        if (typeof window < "u") {
            var r = window.location.search;
            !window.location.search && window.location.hash && window.location.hash.indexOf("?") > -1 && (r = window.location.hash.substring(window.location.hash.indexOf("?")));
            for (var i = r.substring(1), o = i.split("&"), s = 0; s < o.length; s++) {
                var a = o[s].indexOf("=");
                if (a > 0) {
                    var l = o[s].substring(0, a);
                    l === t.lookupQuerystring && (n = o[s].substring(a + 1))
                }
            }
        }
        return n
    }
}
  , zh = null
  , p7 = function() {
    if (zh !== null)
        return zh;
    try {
        zh = window !== "undefined" && window.localStorage !== null;
        var t = "i18next.translate.boo";
        window.localStorage.setItem(t, "foo"),
        window.localStorage.removeItem(t)
    } catch {
        zh = !1
    }
    return zh
}
  , B2e = {
    name: "localStorage",
    lookup: function(t) {
        var n;
        if (t.lookupLocalStorage && p7()) {
            var r = window.localStorage.getItem(t.lookupLocalStorage);
            r && (n = r)
        }
        return n
    },
    cacheUserLanguage: function(t, n) {
        n.lookupLocalStorage && p7() && window.localStorage.setItem(n.lookupLocalStorage, t)
    }
}
  , $h = null
  , m7 = function() {
    if ($h !== null)
        return $h;
    try {
        $h = window !== "undefined" && window.sessionStorage !== null;
        var t = "i18next.translate.boo";
        window.sessionStorage.setItem(t, "foo"),
        window.sessionStorage.removeItem(t)
    } catch {
        $h = !1
    }
    return $h
}
  , z2e = {
    name: "sessionStorage",
    lookup: function(t) {
        var n;
        if (t.lookupSessionStorage && m7()) {
            var r = window.sessionStorage.getItem(t.lookupSessionStorage);
            r && (n = r)
        }
        return n
    },
    cacheUserLanguage: function(t, n) {
        n.lookupSessionStorage && m7() && window.sessionStorage.setItem(n.lookupSessionStorage, t)
    }
}
  , $2e = {
    name: "navigator",
    lookup: function(t) {
        var n = [];
        if (typeof navigator < "u") {
            if (navigator.languages)
                for (var r = 0; r < navigator.languages.length; r++)
                    n.push(navigator.languages[r]);
            navigator.userLanguage && n.push(navigator.userLanguage),
            navigator.language && n.push(navigator.language)
        }
        return n.length > 0 ? n : void 0
    }
}
  , U2e = {
    name: "htmlTag",
    lookup: function(t) {
        var n, r = t.htmlTag || (typeof document < "u" ? document.documentElement : null);
        return r && typeof r.getAttribute == "function" && (n = r.getAttribute("lang")),
        n
    }
}
  , H2e = {
    name: "path",
    lookup: function(t) {
        var n;
        if (typeof window < "u") {
            var r = window.location.pathname.match(/\/([a-zA-Z-]*)/g);
            if (r instanceof Array)
                if (typeof t.lookupFromPathIndex == "number") {
                    if (typeof r[t.lookupFromPathIndex] != "string")
                        return;
                    n = r[t.lookupFromPathIndex].replace("/", "")
                } else
                    n = r[0].replace("/", "")
        }
        return n
    }
}
  , W2e = {
    name: "subdomain",
    lookup: function(t) {
        var n;
        if (typeof window < "u") {
            var r = window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);
            r instanceof Array && (typeof t.lookupFromSubdomainIndex == "number" ? n = r[t.lookupFromSubdomainIndex].replace("http://", "").replace("https://", "").replace(".", "") : n = r[0].replace("http://", "").replace("https://", "").replace(".", ""))
        }
        return n
    }
};
function G2e() {
    return {
        order: ["querystring", "cookie", "localStorage", "sessionStorage", "navigator", "htmlTag"],
        lookupQuerystring: "lng",
        lookupCookie: "i18next",
        lookupLocalStorage: "i18nextLng",
        lookupSessionStorage: "i18nextLng",
        caches: ["localStorage"],
        excludeCacheFor: ["cimode"]
    }
}
var E$ = function() {
    function e(t) {
        var n = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
        k2e(this, e),
        this.type = "languageDetector",
        this.detectors = {},
        this.init(t, n)
    }
    return L2e(e, [{
        key: "init",
        value: function(n) {
            var r = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}
              , i = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};
            this.services = n,
            this.options = D2e(r, this.options || {}, G2e()),
            this.options.lookupFromUrlIndex && (this.options.lookupFromPathIndex = this.options.lookupFromUrlIndex),
            this.i18nOptions = i,
            this.addDetector(N2e),
            this.addDetector(F2e),
            this.addDetector(B2e),
            this.addDetector(z2e),
            this.addDetector($2e),
            this.addDetector(U2e),
            this.addDetector(H2e),
            this.addDetector(W2e)
        }
    }, {
        key: "addDetector",
        value: function(n) {
            this.detectors[n.name] = n
        }
    }, {
        key: "detect",
        value: function(n) {
            var r = this;
            n || (n = this.options.order);
            var i = [];
            return n.forEach(function(o) {
                if (r.detectors[o]) {
                    var s = r.detectors[o].lookup(r.options);
                    s && typeof s == "string" && (s = [s]),
                    s && (i = i.concat(s))
                }
            }),
            this.services.languageUtils.getBestMatchFromCodes ? i : i.length > 0 ? i[0] : null
        }
    }, {
        key: "cacheUserLanguage",
        value: function(n, r) {
            var i = this;
            r || (r = this.options.caches),
            r && (this.options.excludeCacheFor && this.options.excludeCacheFor.indexOf(n) > -1 || r.forEach(function(o) {
                i.detectors[o] && i.detectors[o].cacheUserLanguage(n, i.options)
            }))
        }
    }]),
    e
}();
E$.type = "languageDetector";
const P5 = new E$;
P5.init({
    languageUtils: {}
});
const b$ = ()=>{
    var r;
    const e = P5.detect()
      , t = Array.isArray(e) ? e[0] : e;
    return (t ? (r = kv.find(i=>i.code.startsWith(t))) == null ? void 0 : r.code : null) || ku.code
}
  , _$ = mn(b$())
  , V2e = ()=>{
    const [e,t] = Ot(_$);
    return T.useEffect(()=>{
        P5.cacheUserLanguage(e)
    }
    , [e]),
    [e, t]
}
  , Y2e = ({style: e})=>{
    const {t, langCode: n} = vn()
      , r = Lf(_$);
    return g("select", {
        className: "dropdown-select dropdown-select__language",
        onChange: ({target: i})=>r(i.value),
        value: n,
        "aria-label": t("buttons.selectLanguage"),
        style: e,
        children: kv.map(i=>g("option", {
            value: i.code,
            children: i.label
        }, i.code))
    })
}
  , j2e = ve.memo(e=>L(Ct, {
    children: [g(Ct.DefaultItems.LoadScene, {}), g(Ct.DefaultItems.SaveToActiveFile, {}), g(Ct.DefaultItems.Export, {}), g(Ct.DefaultItems.SaveAsImage, {}), e.isCollabEnabled && g(Ct.DefaultItems.LiveCollaborationTrigger, {
        isCollaborating: e.isCollaborating,
        onSelect: ()=>e.onCollabDialogOpen()
    }), g(Ct.DefaultItems.CommandPalette, {
        className: "highlighted"
    }), g(Ct.DefaultItems.Help, {}), g(Ct.DefaultItems.ClearCanvas, {}), g(Ct.Separator, {}), g(Ct.ItemLink, {
        icon: J3,
        href: "https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=hamburger",
        className: "",
        children: "Excalidraw+"
    }), g(Ct.DefaultItems.Socials, {}), g(Ct.ItemLink, {
        icon: HD,
        href: `https://app.excalidraw.com${xu ? "" : "/sign-up"}?utm_source=signin&utm_medium=app&utm_content=hamburger`,
        className: "highlighted",
        children: xu ? "Sign in" : "Sign up"
    }), g(Ct.Separator, {}), g(Ct.DefaultItems.ToggleTheme, {
        allowSystemTheme: !0,
        theme: e.theme,
        onSelect: e.setTheme
    }), g(Ct.ItemCustom, {
        children: g(Y2e, {
            style: {
                width: "100%"
            }
        })
    }), g(Ct.DefaultItems.ChangeCanvasBackground, {})]
}))
  , K2e = ve.memo(e=>{
    const {t} = vn();
    let n;
    return xu ? n = t("welcomeScreen.app.center_heading_plus").split(/(Excalidraw\+)/).map((r,i)=>r === "Excalidraw+" ? g("a", {
        style: {
            pointerEvents: Ec.inheritFromUI
        },
        href: "https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenSignedInUser",
        children: "Excalidraw+"
    }, i) : r) : n = t("welcomeScreen.app.center_heading"),
    L(Dr, {
        children: [g(Dr.Hints.MenuHint, {
            children: t("welcomeScreen.app.menuHint")
        }), g(Dr.Hints.ToolbarHint, {}), g(Dr.Hints.HelpHint, {}), L(Dr.Center, {
            children: [g(Dr.Center.Logo, {}), g(Dr.Center.Heading, {
                children: n
            }), L(Dr.Center.Menu, {
                children: [g(Dr.Center.MenuItemLoadScene, {}), g(Dr.Center.MenuItemHelp, {}), e.isCollabEnabled && g(Dr.Center.MenuItemLiveCollaborationTrigger, {
                    onSelect: ()=>e.onCollabDialogOpen()
                }), !xu && g(Dr.Center.MenuItemLink, {
                    href: "https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenGuest",
                    shortcut: null,
                    icon: HD,
                    children: "Sign up"
                })]
            })]
        })]
    })
}
)
  , X2e = ()=>{
    const {t: e} = vn();
    return g("a", {
        className: "encrypted-icon tooltip",
        href: "https://blog.excalidraw.com/end-to-end-encryption/",
        target: "_blank",
        rel: "noopener noreferrer",
        "aria-label": e("encrypted.link"),
        children: g(Ma, {
            label: e("encrypted.tooltip"),
            long: !0,
            children: Aee
        })
    })
}
  , Z2e = ()=>xu ? g("a", {
    href: "https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=signedInUserRedirectButton#excalidraw-redirect",
    target: "_blank",
    rel: "noreferrer",
    className: "plus-button",
    children: "Go to Excalidraw+"
}) : null
  , q2e = ve.memo(()=>g(dz, {
    children: g("div", {
        style: {
            display: "flex",
            gap: ".5rem",
            alignItems: "center"
        },
        children: xu ? g(Z2e, {}) : g(X2e, {})
    })
}))
  , Q2e = ({link: e, onCloseRequest: t, setErrorMessage: n})=>{
    const {t: r} = vn()
      , [i,o] = T.useState(!1)
      , s = T.useRef(0)
      , a = T.useRef(null);
    return g(mi, {
        onCloseRequest: t,
        title: !1,
        size: "small",
        children: L("div", {
            className: "ShareableLinkDialog",
            children: [g("h3", {
                children: "Shareable link"
            }), L("div", {
                className: "ShareableLinkDialog__linkRow",
                children: [g(bp, {
                    ref: a,
                    label: "Link",
                    readonly: !0,
                    fullWidth: !0,
                    value: e,
                    selectOnRender: !0
                }), L(Jp, {
                    open: i,
                    children: [g(e1, {
                        asChild: !0,
                        children: g(co, {
                            size: "large",
                            label: "Copy link",
                            icon: Bv,
                            onClick: async()=>{
                                var c;
                                try {
                                    await Pu(e)
                                } catch {
                                    n(r("errors.copyToSystemClipboardFailed"))
                                }
                                o(!0),
                                s.current && window.clearTimeout(s.current),
                                s.current = window.setTimeout(()=>{
                                    o(!1)
                                }
                                , 3e3),
                                (c = a.current) == null || c.select()
                            }
                        })
                    }), L(py, {
                        onOpenAutoFocus: c=>c.preventDefault(),
                        onCloseAutoFocus: c=>c.preventDefault(),
                        className: "ShareableLinkDialog__popover",
                        side: "top",
                        align: "end",
                        sideOffset: 5.5,
                        children: [OD, " copied"]
                    })]
                })]
            }), L("div", {
                className: "ShareableLinkDialog__description",
                children: ["🔒 ", r("alerts.uploadedSecurly")]
            })]
        })
    })
}
  , x$ = mn({
    isOpen: !1
})
  , J2e = ()=>{
    const e = window.navigator
      , t = /Apple/.test(e.vendor)
      , n = e.appVersion.indexOf("Win") !== -1;
    return t ? See : n ? Cee : N6
}
  , eve = ({collabAPI: e, activeRoomLink: t, handleClose: n})=>{
    const {t: r} = vn()
      , [i,o] = T.useState(!1)
      , s = T.useRef(0)
      , a = T.useRef(null)
      , l = "share"in navigator
      , c = async()=>{
        var f;
        try {
            await Pu(t)
        } catch {
            e.setCollabError(r("errors.copyToSystemClipboardFailed"))
        }
        o(!0),
        s.current && window.clearTimeout(s.current),
        s.current = window.setTimeout(()=>{
            o(!1)
        }
        , 3e3),
        (f = a.current) == null || f.select()
    }
      , u = async()=>{
        try {
            await navigator.share({
                title: r("roomDialog.shareTitle"),
                text: r("roomDialog.shareTitle"),
                url: t
            })
        } catch {}
    }
    ;
    return L(Se, {
        children: [g("h3", {
            className: "ShareDialog__active__header",
            children: r("labels.liveCollaboration").replace(/\./g, "")
        }), g(bp, {
            defaultValue: e.getUsername(),
            placeholder: "Your name",
            label: "Your name",
            onChange: e.setUsername,
            onKeyDown: f=>f.key === U.ENTER && n()
        }), L("div", {
            className: "ShareDialog__active__linkRow",
            children: [g(bp, {
                ref: a,
                label: "Link",
                readonly: !0,
                fullWidth: !0,
                value: t
            }), l && g(co, {
                size: "large",
                variant: "icon",
                label: "Share",
                icon: J2e(),
                className: "ShareDialog__active__share",
                onClick: u
            }), L(Jp, {
                open: i,
                children: [g(e1, {
                    asChild: !0,
                    children: g(co, {
                        size: "large",
                        label: "Copy link",
                        icon: Bv,
                        onClick: c
                    })
                }), L(py, {
                    onOpenAutoFocus: f=>f.preventDefault(),
                    onCloseAutoFocus: f=>f.preventDefault(),
                    className: "ShareDialog__popover",
                    side: "top",
                    align: "end",
                    sideOffset: 5.5,
                    children: [OD, " copied"]
                })]
            })]
        }), L("div", {
            className: "ShareDialog__active__description",
            children: [L("p", {
                children: [L("span", {
                    role: "img",
                    "aria-hidden": "true",
                    className: "ShareDialog__active__description__emoji",
                    children: ["🔒", " "]
                }), r("roomDialog.desc_privacy")]
            }), g("p", {
                children: r("roomDialog.desc_exitSession")
            })]
        }), g("div", {
            className: "ShareDialog__active__actions",
            children: g(co, {
                size: "large",
                variant: "outlined",
                color: "danger",
                label: r("roomDialog.button_stopSession"),
                icon: fte,
                onClick: ()=>{
                    at("share", "room closed"),
                    e.stopCollaboration(),
                    e.isCollaborating() || n()
                }
            })
        })]
    })
}
  , tve = e=>{
    const {t} = vn()
      , {collabAPI: n} = e
      , r = n ? L(Se, {
        children: [g("div", {
            className: "ShareDialog__picker__header",
            children: t("labels.liveCollaboration").replace(/\./g, "")
        }), L("div", {
            className: "ShareDialog__picker__description",
            children: [g("div", {
                style: {
                    marginBottom: "1em"
                },
                children: t("roomDialog.desc_intro")
            }), t("roomDialog.desc_privacy")]
        }), g("div", {
            className: "ShareDialog__picker__button",
            children: g(co, {
                size: "large",
                label: t("roomDialog.button_startSession"),
                icon: dte,
                onClick: ()=>{
                    at("share", "room creation", `ui (${zp()})`),
                    n.startCollaboration(null)
                }
            })
        }), e.type === "share" && g("div", {
            className: "ShareDialog__separator",
            children: g("span", {
                children: t("shareDialog.or")
            })
        })]
    }) : null;
    return L(Se, {
        children: [r, e.type === "share" && L(Se, {
            children: [g("div", {
                className: "ShareDialog__picker__header",
                children: t("exportDialog.link_title")
            }), g("div", {
                className: "ShareDialog__picker__description",
                children: t("exportDialog.link_details")
            }), g("div", {
                className: "ShareDialog__picker__button",
                children: g(co, {
                    size: "large",
                    label: t("exportDialog.link_button"),
                    icon: l2,
                    onClick: async()=>{
                        await e.onExportToBackend(),
                        e.handleClose()
                    }
                })
            })]
        })]
    })
}
  , nve = e=>{
    const t = cf(y$);
    return g(mi, {
        size: "small",
        onCloseRequest: e.handleClose,
        title: !1,
        children: g("div", {
            className: "ShareDialog",
            children: e.collabAPI && t ? g(eve, {
                collabAPI: e.collabAPI,
                activeRoomLink: t,
                handleClose: e.handleClose
            }) : g(tve, {
                ...e
            })
        })
    })
}
  , rve = e=>{
    const [t,n] = Ot(x$)
      , {openDialog: r} = Wn();
    return T.useEffect(()=>{
        r && n({
            isOpen: !1
        })
    }
    , [r, n]),
    t.isOpen ? g(nve, {
        handleClose: ()=>n({
            isOpen: !1
        }),
        collabAPI: e.collabAPI,
        onExportToBackend: e.onExportToBackend,
        type: t.type
    }) : null
}
  , S$ = mn(localStorage.getItem(Ln.LOCAL_STORAGE_THEME) || Oe.LIGHT)
  , v7 = ()=>{
    var e;
    return (e = window.matchMedia) == null ? void 0 : e.call(window, "(prefers-color-scheme: dark)")
}
  , ive = ()=>{
    const [e,t] = Ot(S$)
      , [n,r] = T.useState(Oe.LIGHT);
    return T.useEffect(()=>{
        const i = v7()
          , o = a=>{
            r(a.matches ? Oe.DARK : Oe.LIGHT)
        }
        ;
        e === "system" && (i == null || i.addEventListener("change", o));
        const s = a=>{
            !a[U.CTRL_OR_CMD] && a.altKey && a.shiftKey && a.code === pt.D && (a.preventDefault(),
            a.stopImmediatePropagation(),
            t(n === Oe.DARK ? Oe.LIGHT : Oe.DARK))
        }
        ;
        return document.addEventListener(ce.KEYDOWN, s, {
            capture: !0
        }),
        ()=>{
            i == null || i.removeEventListener("change", o),
            document.removeEventListener(ce.KEYDOWN, s, {
                capture: !0
            })
        }
    }
    , [e, n, t]),
    T.useLayoutEffect(()=>{
        var i;
        localStorage.setItem(Ln.LOCAL_STORAGE_THEME, e),
        r(e === "system" ? (i = v7()) != null && i.matches ? Oe.DARK : Oe.LIGHT : e)
    }
    , [e]),
    {
        editorTheme: n
    }
}
;
RP();
window.EXCALIDRAW_THROTTLE_RENDER = !0;
let md = null;
window.addEventListener("beforeinstallprompt", e=>{
    e.preventDefault(),
    md = e
}
);
let I$ = !1;
if (window.self !== window.top)
    try {
        const e = new URL(document.referrer)
          , t = new URL(window.location.href);
        e.origin === t.origin && (I$ = !0)
    } catch {}
const y7 = {
    title: k("overwriteConfirm.modal.shareableLink.title"),
    description: g(li, {
        i18nKey: "overwriteConfirm.modal.shareableLink.description",
        bold: e=>g("strong", {
            children: e
        }),
        br: ()=>g("br", {})
    }),
    actionLabel: k("overwriteConfirm.modal.shareableLink.button"),
    color: "danger"
}
  , yx = async e=>{
    var c, u;
    const n = new URLSearchParams(window.location.search).get("id")
      , r = window.location.hash.match(/^#json=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/)
      , i = window.location.hash.match(/^#url=(.*)$/)
      , o = d$();
    let s = await u7(null, null, o)
      , a = t2e(window.location.href);
    const l = !!(n || r || a);
    if (l)
        if (!s.elements.length || a || await tx(y7))
            r && (s = await u7(r[1], r[2], o)),
            s.scrollToContent = !0,
            a || window.history.replaceState({}, fa, window.location.origin);
        else {
            if (document.hidden)
                return new Promise((f,h)=>{
                    window.addEventListener("focus", ()=>yx(e).then(f).catch(h), {
                        once: !0
                    })
                }
                );
            a = null,
            window.history.replaceState({}, fa, window.location.origin)
        }
    else if (i) {
        window.history.replaceState({}, fa, window.location.origin);
        const f = i[1];
        try {
            const h = await fetch(window.decodeURIComponent(f))
              , m = await r4(await h.blob(), null, null);
            if (!s.elements.length || await tx(y7))
                return {
                    scene: m,
                    isExternalScene: l
                }
        } catch {
            return {
                scene: {
                    appState: {
                        errorMessage: k("alerts.invalidSceneUrl")
                    }
                },
                isExternalScene: l
            }
        }
    }
    if (a && e.collabAPI) {
        const {excalidrawAPI: f} = e
          , h = await e.collabAPI.startCollaboration(a);
        return {
            scene: {
                ...h,
                appState: {
                    ...rO({
                        ...h == null ? void 0 : h.appState,
                        theme: ((c = o == null ? void 0 : o.appState) == null ? void 0 : c.theme) || ((u = h == null ? void 0 : h.appState) == null ? void 0 : u.theme)
                    }, f.getAppState()),
                    isLoading: !1
                },
                elements: a5((h == null ? void 0 : h.elements) || [], f.getSceneElementsIncludingDeleted(), f.getAppState())
            },
            isExternalScene: !0,
            id: a.roomId,
            key: a.roomKey
        }
    } else if (s)
        return l && r ? {
            scene: s,
            isExternalScene: l,
            id: r[1],
            key: r[2]
        } : {
            scene: s,
            isExternalScene: !1
        };
    return {
        scene: null,
        isExternalScene: !1
    }
}
  , ove = ()=>{
    const [e,t] = T.useState("")
      , n = uJ()
      , [r,i] = Ot(S$)
      , {editorTheme: o} = ive()
      , [s,a] = V2e()
      , l = T.useRef({
        promise: null
    });
    l.current.promise || (l.current.promise = Mv()),
    T.useEffect(()=>{
        at("load", "frame", zp()),
        setTimeout(()=>{
            at("load", "version", V3())
        }
        , Iq)
    }
    , []);
    const [c,u] = HR()
      , [,f] = Ot(x$)
      , [h] = Ot(m$)
      , [m] = eQ(mx, ()=>c7(window.location.href))
      , v = cf(px);
    che({
        excalidrawAPI: c,
        adapter: cv,
        migrationAdapter: b2e
    }),
    T.useEffect(()=>{
        if (!c || !n && !h)
            return;
        const I = (j,re=!1)=>{
            var se;
            if (j.scene)
                if (h != null && h.isCollaborating())
                    j.scene.elements && h.fetchImageFilesFromFirebase({
                        elements: j.scene.elements,
                        forceFetchFiles: !0
                    }).then(({loadedFiles: ae, erroredFiles: q})=>{
                        c.addFiles(ae),
                        rg({
                            excalidrawAPI: c,
                            erroredFiles: q,
                            elements: c.getSceneElementsIncludingDeleted()
                        })
                    }
                    );
                else {
                    const ae = ((se = j.scene.elements) == null ? void 0 : se.reduce((q,K)=>Hn(K) ? q.concat(K.fileId) : q, [])) || [];
                    j.isExternalScene ? a$(`${t$.shareLinkFiles}/${j.id}`, j.key, ae).then(({loadedFiles: q, erroredFiles: K})=>{
                        c.addFiles(q),
                        rg({
                            excalidrawAPI: c,
                            erroredFiles: K,
                            elements: c.getSceneElementsIncludingDeleted()
                        })
                    }
                    ) : re && (ae.length && Er.fileStorage.getFiles(ae).then(({loadedFiles: q, erroredFiles: K})=>{
                        q.length && c.addFiles(q),
                        rg({
                            excalidrawAPI: c,
                            erroredFiles: K,
                            elements: c.getSceneElementsIncludingDeleted()
                        })
                    }
                    ),
                    Er.fileStorage.clearObsoleteFiles({
                        currentFileIds: ae
                    }))
                }
        }
        ;
        yx({
            collabAPI: h,
            excalidrawAPI: c
        }).then(async j=>{
            I(j, !0),
            l.current.promise.resolve(j.scene)
        }
        );
        const O = async j=>{
            j.preventDefault(),
            X_() || (h != null && h.isCollaborating() && !c7(window.location.href) && h.stopCollaboration(!1),
            c.updateScene({
                appState: {
                    isLoading: !0
                }
            }),
            yx({
                collabAPI: h,
                excalidrawAPI: c
            }).then(se=>{
                I(se),
                se.scene && c.updateScene({
                    ...se.scene,
                    ...pu(se.scene, null, null, {
                        repairBindings: !0
                    }),
                    storeAction: ee.CAPTURE
                })
            }
            ))
        }
          , N = setTimeout(()=>document.title = fa, Sq)
          , $ = Wl(()=>{
            if (!document.hidden && (h && !h.isCollaborating() || n)) {
                if (d7(Ln.VERSION_DATA_STATE)) {
                    const j = d$()
                      , re = u$();
                    a(b$()),
                    c.updateScene({
                        ...j,
                        storeAction: ee.UPDATE
                    }),
                    cv.load().then(se=>{
                        se && c.updateLibrary({
                            libraryItems: se.libraryItems
                        })
                    }
                    ),
                    h == null || h.setUsername(re || "")
                }
                if (d7(Ln.VERSION_FILES)) {
                    const j = c.getSceneElementsIncludingDeleted()
                      , re = c.getFiles()
                      , se = (j == null ? void 0 : j.reduce((ae,q)=>Hn(q) && !re[q.fileId] ? ae.concat(q.fileId) : ae, [])) || [];
                    se.length && Er.fileStorage.getFiles(se).then(({loadedFiles: ae, erroredFiles: q})=>{
                        ae.length && c.addFiles(ae),
                        rg({
                            excalidrawAPI: c,
                            erroredFiles: q,
                            elements: c.getSceneElementsIncludingDeleted()
                        })
                    }
                    )
                }
            }
        }
        , Hme)
          , V = ()=>{
            Er.flushSave()
        }
          , z = j=>{
            (j.type === ce.BLUR || document.hidden) && Er.flushSave(),
            (j.type === ce.VISIBILITY_CHANGE || j.type === ce.FOCUS) && $()
        }
        ;
        return window.addEventListener(ce.HASHCHANGE, O, !1),
        window.addEventListener(ce.UNLOAD, V, !1),
        window.addEventListener(ce.BLUR, z, !1),
        document.addEventListener(ce.VISIBILITY_CHANGE, z, !1),
        window.addEventListener(ce.FOCUS, z, !1),
        ()=>{
            window.removeEventListener(ce.HASHCHANGE, O, !1),
            window.removeEventListener(ce.UNLOAD, V, !1),
            window.removeEventListener(ce.BLUR, z, !1),
            window.removeEventListener(ce.FOCUS, z, !1),
            document.removeEventListener(ce.VISIBILITY_CHANGE, z, !1),
            clearTimeout(N)
        }
    }
    , [n, h, c, a]),
    T.useEffect(()=>{
        const I = O=>{
            Er.flushSave(),
            c && Er.fileStorage.shouldPreventUnload(c.getSceneElements()) && A6(O)
        }
        ;
        return window.addEventListener(ce.BEFORE_UNLOAD, I),
        ()=>{
            window.removeEventListener(ce.BEFORE_UNLOAD, I)
        }
    }
    , [c]);
    const y = (I,O,N)=>{
        h != null && h.isCollaborating() && h.syncElements(I),
        Er.isSavePaused() || Er.save(I, O, N, ()=>{
            if (c) {
                let $ = !1;
                const V = c.getSceneElementsIncludingDeleted().map(z=>{
                    if (Er.fileStorage.shouldUpdateImageElementStatus(z)) {
                        const j = Ne(z, {
                            status: "saved"
                        });
                        return j !== z && ($ = !0),
                        j
                    }
                    return z
                }
                );
                $ && c.updateScene({
                    elements: V,
                    storeAction: ee.UPDATE
                })
            }
        }
        )
    }
      , [E,b] = T.useState(null)
      , _ = async(I,O,N)=>{
        if (I.length === 0)
            throw new Error(k("alerts.cannotExportEmptyCanvas"));
        try {
            const {url: $, errorMessage: V} = await s2e(I, {
                ...O,
                viewBackgroundColor: O.exportBackground ? O.viewBackgroundColor : ho().viewBackgroundColor
            }, N);
            if (V)
                throw new Error(V);
            $ && b($)
        } catch ($) {
            if ($.name !== "AbortError") {
                const {width: V, height: z} = O;
                throw console.error($, {
                    width: V,
                    height: z,
                    devicePixelRatio: window.devicePixelRatio
                }),
                new Error($.message)
            }
        }
    }
      , x = (I,O)=>g(S2e, {
        setToast: N=>c.setToast({
            message: N
        }),
        appState: O,
        elements: I
    })
      , C = cf(v$)
      , P = T.useCallback(()=>f({
        isOpen: !0,
        type: "collaborationOnly"
    }), [f]);
    if (I$)
        return g("div", {
            style: {
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
                textAlign: "center",
                height: "100%"
            },
            children: g("h1", {
                children: "I'm not a pretzel!"
            })
        });
    const M = {
        label: "Excalidraw+",
        category: Et.links,
        predicate: !0,
        icon: g("div", {
            style: {
                width: 14
            },
            children: J3
        }),
        keywords: ["plus", "cloud", "server"],
        perform: ()=>{
            window.open("https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=command_palette", "_blank")
        }
    }
      , A = {
        label: "Sign up",
        category: Et.links,
        predicate: !0,
        icon: g("div", {
            style: {
                width: 14
            },
            children: J3
        }),
        keywords: ["excalidraw", "plus", "cloud", "server", "signin", "login", "signup"],
        perform: ()=>{
            window.open("https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=command_palette", "_blank")
        }
    };
    return g("div", {
        style: {
            height: "100%"
        },
        className: xe("excalidraw-app", {
            "is-collaborating": m
        }),
        children: L(vz, {
            excalidrawAPI: u,
            onChange: y,
            initialData: l.current.promise,
            isCollaborating: m,
            onPointerUpdate: h == null ? void 0 : h.onPointerUpdate,
            UIOptions: {
                canvasActions: {
                    toggleTheme: !0,
                    export: {
                        onExportToBackend: _,
                        renderCustomUI: c ? (I,O,N)=>g(C2e, {
                            elements: I,
                            appState: O,
                            files: N,
                            name: c.getName(),
                            onError: $=>{
                                c == null || c.updateScene({
                                    appState: {
                                        errorMessage: $.message
                                    }
                                })
                            }
                            ,
                            onSuccess: ()=>{
                                c.updateScene({
                                    appState: {
                                        openDialog: null
                                    }
                                })
                            }
                        }) : void 0
                    }
                }
            },
            langCode: s,
            renderCustomStats: x,
            detectScroll: !1,
            handleKeyboardGlobally: !0,
            autoFocus: !0,
            theme: o,
            renderTopRightUI: I=>I || !h || n ? null : L("div", {
                className: "top-right-ui",
                children: [v.message && g(p$, {
                    collabError: v
                }), g(pz, {
                    isCollaborating: m,
                    onSelect: ()=>f({
                        isOpen: !0,
                        type: "share"
                    })
                })]
            }),
            children: [g(j2e, {
                onCollabDialogOpen: P,
                isCollaborating: m,
                isCollabEnabled: !n,
                theme: r,
                setTheme: I=>i(I)
            }), g(K2e, {
                onCollabDialogOpen: P,
                isCollabEnabled: !n
            }), L(Vc, {
                children: [g(Vc.Actions.ExportToImage, {}), g(Vc.Actions.SaveToDisk, {}), c && g(Vc.Action, {
                    title: k("overwriteConfirm.action.excalidrawPlus.title"),
                    actionLabel: k("overwriteConfirm.action.excalidrawPlus.button"),
                    onClick: ()=>{
                        vx(c.getSceneElements(), c.getAppState(), c.getFiles(), c.getName())
                    }
                    ,
                    children: k("overwriteConfirm.action.excalidrawPlus.description")
                })]
            }), g(q2e, {}), g(Iz, {
                onTextSubmit: async I=>{
                    try {
                        const O = await fetch("https://oss-ai.excalidraw.com/v1/ai/text-to-diagram/generate", {
                            method: "POST",
                            headers: {
                                Accept: "application/json",
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({
                                prompt: I
                            })
                        })
                          , N = O.headers.has("X-Ratelimit-Limit") ? parseInt(O.headers.get("X-Ratelimit-Limit") || "0", 10) : void 0
                          , $ = O.headers.has("X-Ratelimit-Remaining") ? parseInt(O.headers.get("X-Ratelimit-Remaining") || "0", 10) : void 0
                          , V = await O.json();
                        if (!O.ok) {
                            if (O.status === 429)
                                return {
                                    rateLimit: N,
                                    rateLimitRemaining: $,
                                    error: new Error("Too many requests today, please try again tomorrow!")
                                };
                            throw new Error(V.message || "Generation failed...")
                        }
                        const z = V.generatedResponse;
                        if (!z)
                            throw new Error("Generation failed...");
                        return {
                            generatedResponse: z,
                            rateLimit: N,
                            rateLimitRemaining: $
                        }
                    } catch {
                        throw new Error("Request failed")
                    }
                }
            }), g(mz, {}), m && C && g("div", {
                className: "collab-offline-warning",
                children: k("alerts.collabOfflineWarning")
            }), E && g(Q2e, {
                link: E,
                onCloseRequest: ()=>b(null),
                setErrorMessage: t
            }), c && !n && g(_2e, {
                excalidrawAPI: c
            }), g(rve, {
                collabAPI: h,
                onExportToBackend: async()=>{
                    if (c)
                        try {
                            await _(c.getSceneElements(), c.getAppState(), c.getFiles())
                        } catch (I) {
                            t(I.message)
                        }
                }
            }), e && g(v5, {
                onClose: ()=>t(""),
                children: e
            }), g(iM, {
                customCommandPaletteItems: [{
                    label: k("labels.liveCollaboration"),
                    category: Et.app,
                    keywords: ["team", "multiplayer", "share", "public", "session", "invite"],
                    icon: F6,
                    perform: ()=>{
                        f({
                            isOpen: !0,
                            type: "collaborationOnly"
                        })
                    }
                }, {
                    label: k("roomDialog.button_stopSession"),
                    category: Et.app,
                    predicate: ()=>!!(h != null && h.isCollaborating()),
                    keywords: ["stop", "session", "end", "leave", "close", "exit", "collaboration"],
                    perform: ()=>{
                        h && (h.stopCollaboration(),
                        h.isCollaborating() || f({
                            isOpen: !1
                        }))
                    }
                }, {
                    label: k("labels.share"),
                    category: Et.app,
                    predicate: !0,
                    icon: N6,
                    keywords: ["link", "shareable", "readonly", "export", "publish", "snapshot", "url", "collaborate", "invite"],
                    perform: async()=>{
                        f({
                            isOpen: !0,
                            type: "share"
                        })
                    }
                }, {
                    label: "GitHub",
                    icon: D6,
                    category: Et.links,
                    predicate: !0,
                    keywords: ["issues", "bugs", "requests", "report", "features", "social", "community"],
                    perform: ()=>{
                        window.open("https://github.com/excalidraw/excalidraw", "_blank", "noopener noreferrer")
                    }
                }, {
                    label: k("labels.followUs"),
                    icon: TD,
                    category: Et.links,
                    predicate: !0,
                    keywords: ["twitter", "contact", "social", "community"],
                    perform: ()=>{
                        window.open("https://x.com/excalidraw", "_blank", "noopener noreferrer")
                    }
                }, {
                    label: k("labels.discordChat"),
                    category: Et.links,
                    predicate: !0,
                    icon: kD,
                    keywords: ["chat", "talk", "contact", "bugs", "requests", "report", "feedback", "suggestions", "social", "community"],
                    perform: ()=>{
                        window.open("https://discord.gg/UexuTaE", "_blank", "noopener noreferrer")
                    }
                }, {
                    label: "YouTube",
                    icon: WD,
                    category: Et.links,
                    predicate: !0,
                    keywords: ["features", "tutorials", "howto", "help", "community"],
                    perform: ()=>{
                        window.open("https://youtube.com/@excalidraw", "_blank", "noopener noreferrer")
                    }
                }, ...xu ? [{
                    ...A,
                    label: "Sign in / Go to Excalidraw+"
                }] : [M, A], {
                    label: k("overwriteConfirm.action.excalidrawPlus.button"),
                    category: Et.export,
                    icon: Iee,
                    predicate: !0,
                    keywords: ["plus", "export", "save", "backup"],
                    perform: ()=>{
                        c && vx(c.getSceneElements(), c.getAppState(), c.getFiles(), c.getName())
                    }
                }, {
                    ...iM.defaultItems.toggleTheme,
                    perform: ()=>{
                        i(o === Oe.DARK ? Oe.LIGHT : Oe.DARK)
                    }
                }, {
                    label: k("labels.installPWA"),
                    category: Et.app,
                    predicate: ()=>!!md,
                    perform: ()=>{
                        md && (md.prompt(),
                        md.userChoice.then(()=>{
                            md = null
                        }
                        ))
                    }
                }]
            })]
        })
    })
}
  , sve = ()=>g(Fme, {
    children: g(S6, {
        unstable_createStore: ()=>el,
        children: g(ove, {})
    })
});
function ave(e={}) {
    const {immediate: t=!1, onNeedRefresh: n, onOfflineReady: r, onRegistered: i, onRegisteredSW: o, onRegisterError: s} = e;
    let a, l;
    const c = async(f=!0)=>{
        await l
    }
    ;
    async function u() {
        if ("serviceWorker"in navigator) {
            const {Workbox: f} = await _e(()=>import("./workbox-window.prod.es5-D5gOYdM7.js"), __vite__mapDeps([]));
            a = new f("/sw.js",{
                scope: "/",
                type: "classic"
            }),
            a.addEventListener("activated", h=>{
                (h.isUpdate || h.isExternal) && window.location.reload()
            }
            ),
            a.addEventListener("installed", h=>{
                h.isUpdate || r == null || r()
            }
            ),
            a.register({
                immediate: t
            }).then(h=>{
                o ? o("/sw.js", h) : i == null || i(h)
            }
            ).catch(h=>{
                s == null || s(h)
            }
            )
        }
    }
    return l = u(),
    c
}
var G0 = Pn()
  , lve = function() {
    function e(t) {
        t === void 0 && (t = {}),
        this.name = e.id,
        this._levels = ["log", "info", "warn", "error", "debug", "assert"],
        t.levels && (this._levels = t.levels)
    }
    return e.prototype.setupOnce = function(t, n) {
        "console"in G0 && this._levels.forEach(function(r) {
            r in G0.console && or(G0.console, r, function(i) {
                return function() {
                    for (var o = [], s = 0; s < arguments.length; s++)
                        o[s] = arguments[s];
                    var a = n();
                    a.getIntegration(e) && a.withScope(function(l) {
                        l.setLevel(Xo.fromString(r)),
                        l.setExtra("arguments", o),
                        l.addEventProcessor(function(u) {
                            return u.logger = "console",
                            u
                        });
                        var c = iv(o, " ");
                        r === "assert" ? o[0] === !1 && (c = "Assertion failed: " + (iv(o.slice(1), " ") || "console.assert"),
                        l.setExtra("arguments", o.slice(1)),
                        a.captureMessage(c)) : a.captureMessage(c)
                    }),
                    i && Function.prototype.apply.call(i, G0.console, o)
                }
            })
        })
    }
    ,
    e.id = "CaptureConsole",
    e
}()
  , cve = {
    VITE_APP_BACKEND_V2_GET_URL: "https://json.excalidraw.com/api/v2/",
    VITE_APP_BACKEND_V2_POST_URL: "https://json.excalidraw.com/api/v2/post/",
    VITE_APP_LIBRARY_URL: "https://libraries.excalidraw.com",
    VITE_APP_LIBRARY_BACKEND: "https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",
    VITE_APP_PLUS_LP: "https://plus.excalidraw.com",
    VITE_APP_PLUS_APP: "https://app.excalidraw.com",
    VITE_APP_AI_BACKEND: "https://oss-ai.excalidraw.com",
    VITE_APP_WS_SERVER_URL: "https://oss-collab.excalidraw.com",
    VITE_APP_FIREBASE_CONFIG: '{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',
    VITE_APP_ENABLE_TRACKING: "true",
    VITE_APP_GIT_SHA: "fb4bb29aa5d9f03c60afc9984b01f25bcd117970",
    BASE_URL: "/",
    MODE: "production",
    DEV: !1,
    PROD: !0,
    SSR: !1
};
const C$ = {
    "excalidraw.com": "production",
    "vercel.app": "staging"
}
  , uve = cve.VITE_APP_DISABLE_SENTRY === "true"
  , Hb = !uve && Object.keys(C$).find(e=>window.location.hostname.indexOf(e) >= 0);
Ome({
    dsn: Hb ? "https://7bfc596a5bf945eda6b660d3015a5460@sentry.io/5179260" : void 0,
    environment: Hb ? C$[Hb] : void 0,
    release: "fb4bb29aa5d9f03c60afc9984b01f25bcd117970",
    ignoreErrors: ["undefined is not an object (evaluating 'window.__pad.performLoop')"],
    integrations: [new lve({
        levels: ["error"]
    })],
    beforeSend(e) {
        var t;
        return (t = e.request) != null && t.url && (e.request.url = e.request.url.replace(/#.*$/, "")),
        e
    }
});
window.__EXCALIDRAW_SHA__ = "fb4bb29aa5d9f03c60afc9984b01f25bcd117970";
const dve = document.getElementById("root")
  , fve = PP(dve);
ave();
fve.render(g(T.StrictMode, {
    children: g(sve, {})
}));
export {gve as _, ws as a, vve as b, yve as c, pve as d, mve as e, yue as f, Su as g, oa as h, _e as i};
function __vite__mapDeps(indexes) {
    if (!__vite__mapDeps.viteFileDeps) {
        __vite__mapDeps.viteFileDeps = ["assets/pica-Ckuc2DK-.js", "assets/_commonjs-dynamic-modules-TDtrdbi3.js", "assets/index.esm-CanUw3FJ.js", "assets/index.esm-Bfl03_ep.js", "assets/index.esm-DKJLhsYu.js", "assets/index.esm-C9xdq4RB.js"]
    }
    return indexes.map((i)=>__vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-C4-HgQg_.js.map

